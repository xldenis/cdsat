
module Core_Ptr_NonNull_NonNull_Type
  use prelude.prelude.Opaque

  type t_nonnull 't =
    | C_NonNull opaque_ptr

  function any_l (_ : 'b) : 'a

  let rec t_nonnull < 't > (input:t_nonnull 't) (ret  (pointer:opaque_ptr))= any
    [ good (pointer:opaque_ptr)-> {C_NonNull pointer = input} (! ret {pointer})
    | bad (pointer:opaque_ptr)-> {C_NonNull pointer <> input} {false} any ]

end
module Core_Marker_PhantomData_Type
  type t_phantomdata 't =
    | C_PhantomData

  function any_l (_ : 'b) : 'a

  let rec t_phantomdata < 't > (input:t_phantomdata 't) (ret  )= any
    [ good -> {C_PhantomData  = input} (! ret) | bad -> {C_PhantomData  <> input} {false} any ]

end
module Core_Ptr_Unique_Unique_Type
  use Core_Marker_PhantomData_Type as PhantomData'0

  use Core_Ptr_NonNull_NonNull_Type as NonNull'0

  type t_unique 't =
    | C_Unique (NonNull'0.t_nonnull 't) (PhantomData'0.t_phantomdata 't)

  function any_l (_ : 'b) : 'a

  let rec t_unique < 't > (input:t_unique 't) (ret  (pointer:NonNull'0.t_nonnull 't) (_marker:PhantomData'0.t_phantomdata 't))= any
    [ good (pointer:NonNull'0.t_nonnull 't) (_marker:PhantomData'0.t_phantomdata 't)-> {C_Unique pointer _marker
      = input}
      (! ret {pointer} {_marker})
    | bad (pointer:NonNull'0.t_nonnull 't) (_marker:PhantomData'0.t_phantomdata 't)-> {C_Unique pointer _marker
      <> input}
      {false}
      any ]

end
module Alloc_RawVec_Cap_Type
  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  type t_cap  =
    | C_Cap usize

  function any_l (_ : 'b) : 'a

  let rec t_cap (input:t_cap) (ret  (field_0:usize))= any
    [ good (field_0:usize)-> {C_Cap field_0 = input} (! ret {field_0})
    | bad (field_0:usize)-> {C_Cap field_0 <> input} {false} any ]

end
module Alloc_RawVec_RawVec_Type
  use Alloc_RawVec_Cap_Type as Cap'0

  use Core_Ptr_Unique_Unique_Type as Unique'0

  type t_rawvec 't 'a =
    | C_RawVec (Unique'0.t_unique 't) (Cap'0.t_cap) 'a

  function any_l (_ : 'b) : 'a

  let rec t_rawvec < 't > < 'a > (input:t_rawvec 't 'a) (ret  (ptr:Unique'0.t_unique 't) (cap:Cap'0.t_cap) (alloc:'a))= any
    [ good (ptr:Unique'0.t_unique 't) (cap:Cap'0.t_cap) (alloc:'a)-> {C_RawVec ptr cap alloc = input}
      (! ret {ptr} {cap} {alloc})
    | bad (ptr:Unique'0.t_unique 't) (cap:Cap'0.t_cap) (alloc:'a)-> {C_RawVec ptr cap alloc <> input} {false} any ]

end
module Alloc_Vec_Vec_Type
  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  use Alloc_RawVec_RawVec_Type as RawVec'0

  type t_vec 't 'a =
    | C_Vec (RawVec'0.t_rawvec 't 'a) usize

  function any_l (_ : 'b) : 'a

  let rec t_vec < 't > < 'a > (input:t_vec 't 'a) (ret  (buf:RawVec'0.t_rawvec 't 'a) (len:usize))= any
    [ good (buf:RawVec'0.t_rawvec 't 'a) (len:usize)-> {C_Vec buf len = input} (! ret {buf} {len})
    | bad (buf:RawVec'0.t_rawvec 't 'a) (len:usize)-> {C_Vec buf len <> input} {false} any ]

end
module Cdsat_Term_Sort_Type
  type t_sort  =
    | C_Boolean
    | C_Rational

  function any_l (_ : 'b) : 'a

  let rec boolean (input:t_sort) (ret  )= any
    [ good -> {C_Boolean  = input} (! ret) | bad -> {C_Boolean  <> input} {false} any ]


  let rec rational (input:t_sort) (ret  )= any
    [ good -> {C_Rational  = input} (! ret) | bad -> {C_Rational  <> input} {false} any ]

end
module NumRational_Ratio_Type
  type t_ratio 't =
    | C_Ratio 't 't

  function any_l (_ : 'b) : 'a

  let rec t_ratio < 't > (input:t_ratio 't) (ret  (numer:'t) (denom:'t))= any
    [ good (numer:'t) (denom:'t)-> {C_Ratio numer denom = input} (! ret {numer} {denom})
    | bad (numer:'t) (denom:'t)-> {C_Ratio numer denom <> input} {false} any ]

end
module NumBigint_Bigint_Sign_Type
  type t_sign  =
    | C_Minus
    | C_NoSign
    | C_Plus

  function any_l (_ : 'b) : 'a

  let rec minus (input:t_sign) (ret  )= any
    [ good -> {C_Minus  = input} (! ret) | bad -> {C_Minus  <> input} {false} any ]


  let rec no_sign (input:t_sign) (ret  )= any
    [ good -> {C_NoSign  = input} (! ret) | bad -> {C_NoSign  <> input} {false} any ]


  let rec plus (input:t_sign) (ret  )= any
    [ good -> {C_Plus  = input} (! ret) | bad -> {C_Plus  <> input} {false} any ]

end
module Alloc_Alloc_Global_Type
  type t_global  =
    | C_Global

  function any_l (_ : 'b) : 'a

  let rec t_global (input:t_global) (ret  )= any
    [ good -> {C_Global  = input} (! ret) | bad -> {C_Global  <> input} {false} any ]

end
module NumBigint_Biguint_BigUint_Type
  use Alloc_Alloc_Global_Type as Global'0

  use prelude.prelude.UInt64

  use prelude.prelude.Int

  use Alloc_Vec_Vec_Type as Vec'0

  type t_biguint  =
    | C_BigUint (Vec'0.t_vec uint64 (Global'0.t_global))

  function any_l (_ : 'b) : 'a

  let rec t_biguint (input:t_biguint) (ret  (data:Vec'0.t_vec uint64 (Global'0.t_global)))= any
    [ good (data:Vec'0.t_vec uint64 (Global'0.t_global))-> {C_BigUint data = input} (! ret {data})
    | bad (data:Vec'0.t_vec uint64 (Global'0.t_global))-> {C_BigUint data <> input} {false} any ]

end
module NumBigint_Bigint_BigInt_Type
  use NumBigint_Biguint_BigUint_Type as BigUint'0

  use NumBigint_Bigint_Sign_Type as Sign'0

  type t_bigint  =
    | C_BigInt (Sign'0.t_sign) (BigUint'0.t_biguint)

  function any_l (_ : 'b) : 'a

  let rec t_bigint (input:t_bigint) (ret  (sign:Sign'0.t_sign) (data:BigUint'0.t_biguint))= any
    [ good (sign:Sign'0.t_sign) (data:BigUint'0.t_biguint)-> {C_BigInt sign data = input} (! ret {sign} {data})
    | bad (sign:Sign'0.t_sign) (data:BigUint'0.t_biguint)-> {C_BigInt sign data <> input} {false} any ]

end
module Cdsat_Term_Value_Type
  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  type t_value  =
    | C_Bool bool
    | C_Rat (Ratio'0.t_ratio (BigInt'0.t_bigint))

  function any_l (_ : 'b) : 'a

  let rec bool (input:t_value) (ret  (field_0:bool))= any
    [ good (field_0:bool)-> {C_Bool field_0 = input} (! ret {field_0})
    | bad (field_0:bool)-> {C_Bool field_0 <> input} {false} any ]


  let rec rat (input:t_value) (ret  (field_0:Ratio'0.t_ratio (BigInt'0.t_bigint)))= any
    [ good (field_0:Ratio'0.t_ratio (BigInt'0.t_bigint))-> {C_Rat field_0 = input} (! ret {field_0})
    | bad (field_0:Ratio'0.t_ratio (BigInt'0.t_bigint))-> {C_Rat field_0 <> input} {false} any ]

end
module Cdsat_Term_Term_Type
  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  use Cdsat_Term_Value_Type as Value'0

  use Cdsat_Term_Sort_Type as Sort'0

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  type t_term  =
    | C_Variable usize (Sort'0.t_sort)
    | C_Value (Value'0.t_value)
    | C_Plus (t_term) (t_term)
    | C_Times (Ratio'0.t_ratio (BigInt'0.t_bigint)) (t_term)
    | C_Eq (t_term) (t_term)
    | C_Lt (t_term) (t_term)
    | C_Conj (t_term) (t_term)
    | C_Neg (t_term)
    | C_Disj (t_term) (t_term)
    | C_Impl (t_term) (t_term)

  function any_l (_ : 'b) : 'a

  let rec variable (input:t_term) (ret  (field_0:usize) (field_1:Sort'0.t_sort))= any
    [ good (field_0:usize) (field_1:Sort'0.t_sort)-> {C_Variable field_0 field_1 = input} (! ret {field_0} {field_1})
    | bad (field_0:usize) (field_1:Sort'0.t_sort)-> {C_Variable field_0 field_1 <> input} {false} any ]


  let rec value (input:t_term) (ret  (field_0:Value'0.t_value))= any
    [ good (field_0:Value'0.t_value)-> {C_Value field_0 = input} (! ret {field_0})
    | bad (field_0:Value'0.t_value)-> {C_Value field_0 <> input} {false} any ]


  let rec plus (input:t_term) (ret  (field_0:t_term) (field_1:t_term))= any
    [ good (field_0:t_term) (field_1:t_term)-> {C_Plus field_0 field_1 = input} (! ret {field_0} {field_1})
    | bad (field_0:t_term) (field_1:t_term)-> {C_Plus field_0 field_1 <> input} {false} any ]


  let rec times (input:t_term) (ret  (field_0:Ratio'0.t_ratio (BigInt'0.t_bigint)) (field_1:t_term))= any
    [ good (field_0:Ratio'0.t_ratio (BigInt'0.t_bigint)) (field_1:t_term)-> {C_Times field_0 field_1 = input}
      (! ret {field_0} {field_1})
    | bad (field_0:Ratio'0.t_ratio (BigInt'0.t_bigint)) (field_1:t_term)-> {C_Times field_0 field_1 <> input}
      {false}
      any ]


  let rec eq (input:t_term) (ret  (field_0:t_term) (field_1:t_term))= any
    [ good (field_0:t_term) (field_1:t_term)-> {C_Eq field_0 field_1 = input} (! ret {field_0} {field_1})
    | bad (field_0:t_term) (field_1:t_term)-> {C_Eq field_0 field_1 <> input} {false} any ]


  let rec lt (input:t_term) (ret  (field_0:t_term) (field_1:t_term))= any
    [ good (field_0:t_term) (field_1:t_term)-> {C_Lt field_0 field_1 = input} (! ret {field_0} {field_1})
    | bad (field_0:t_term) (field_1:t_term)-> {C_Lt field_0 field_1 <> input} {false} any ]


  let rec conj (input:t_term) (ret  (field_0:t_term) (field_1:t_term))= any
    [ good (field_0:t_term) (field_1:t_term)-> {C_Conj field_0 field_1 = input} (! ret {field_0} {field_1})
    | bad (field_0:t_term) (field_1:t_term)-> {C_Conj field_0 field_1 <> input} {false} any ]


  let rec neg (input:t_term) (ret  (field_0:t_term))= any
    [ good (field_0:t_term)-> {C_Neg field_0 = input} (! ret {field_0})
    | bad (field_0:t_term)-> {C_Neg field_0 <> input} {false} any ]


  let rec disj (input:t_term) (ret  (field_0:t_term) (field_1:t_term))= any
    [ good (field_0:t_term) (field_1:t_term)-> {C_Disj field_0 field_1 = input} (! ret {field_0} {field_1})
    | bad (field_0:t_term) (field_1:t_term)-> {C_Disj field_0 field_1 <> input} {false} any ]


  let rec impl (input:t_term) (ret  (field_0:t_term) (field_1:t_term))= any
    [ good (field_0:t_term) (field_1:t_term)-> {C_Impl field_0 field_1 = input} (! ret {field_0} {field_1})
    | bad (field_0:t_term) (field_1:t_term)-> {C_Impl field_0 field_1 <> input} {false} any ]

end
module Cdsat_Trail_TrailIndex_Type
  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  type t_trailindex  =
    | C_TrailIndex usize usize

  function any_l (_ : 'b) : 'a

  let rec t_trailindex (input:t_trailindex) (ret  (field_0:usize) (field_1:usize))= any
    [ good (field_0:usize) (field_1:usize)-> {C_TrailIndex field_0 field_1 = input} (! ret {field_0} {field_1})
    | bad (field_0:usize) (field_1:usize)-> {C_TrailIndex field_0 field_1 <> input} {false} any ]


  function trailindex_0 (self : t_trailindex) : usize =
    match self with
      | C_TrailIndex a _ -> a
      end

  function trailindex_1 (self : t_trailindex) : usize =
    match self with
      | C_TrailIndex _ a -> a
      end
end
module Cdsat_Trail_Reason_Type
  use Alloc_Alloc_Global_Type as Global'0

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use Alloc_Vec_Vec_Type as Vec'0

  type t_reason  =
    | C_Justified (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))
    | C_Decision
    | C_Input

  function any_l (_ : 'b) : 'a

  let rec justified (input:t_reason) (ret  (field_0:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)))= any
    [ good (field_0:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> {C_Justified field_0 = input}
      (! ret {field_0})
    | bad (field_0:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> {C_Justified field_0 <> input}
      {false}
      any ]


  let rec decision (input:t_reason) (ret  )= any
    [ good -> {C_Decision  = input} (! ret) | bad -> {C_Decision  <> input} {false} any ]


  let rec input (input:t_reason) (ret  )= any
    [ good -> {C_Input  = input} (! ret) | bad -> {C_Input  <> input} {false} any ]

end
module Cdsat_Trail_Assignment_Type
  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  use Cdsat_Trail_Reason_Type as Reason'0

  use Cdsat_Term_Value_Type as Value'0

  use Cdsat_Term_Term_Type as Term'0

  type t_assignment  =
    | C_Assignment (Term'0.t_term) (Value'0.t_value) (Reason'0.t_reason) usize

  function any_l (_ : 'b) : 'a

  let rec t_assignment (input:t_assignment) (ret  (term:Term'0.t_term) (val':Value'0.t_value) (reason:Reason'0.t_reason) (level:usize))= any
    [ good (term:Term'0.t_term) (val':Value'0.t_value) (reason:Reason'0.t_reason) (level:usize)-> {C_Assignment term val' reason level
      = input}
      (! ret {term} {val'} {reason} {level})
    | bad (term:Term'0.t_term) (val':Value'0.t_value) (reason:Reason'0.t_reason) (level:usize)-> {C_Assignment term val' reason level
      <> input}
      {false}
      any ]


  function assignment_term (self : t_assignment) : Term'0.t_term =
    match self with
      | C_Assignment a _ _ _ -> a
      end

  function assignment_val (self : t_assignment) : Value'0.t_value =
    match self with
      | C_Assignment _ a _ _ -> a
      end

  function assignment_reason (self : t_assignment) : Reason'0.t_reason =
    match self with
      | C_Assignment _ _ a _ -> a
      end

  function assignment_level (self : t_assignment) : usize =
    match self with
      | C_Assignment _ _ _ a -> a
      end
end
module Cdsat_Theory_Sort_Type
  type t_sort  =
    | C_Rational
    | C_Boolean

  function any_l (_ : 'b) : 'a

  let rec rational (input:t_sort) (ret  )= any
    [ good -> {C_Rational  = input} (! ret) | bad -> {C_Rational  <> input} {false} any ]


  let rec boolean (input:t_sort) (ret  )= any
    [ good -> {C_Boolean  = input} (! ret) | bad -> {C_Boolean  <> input} {false} any ]

end
module Cdsat_Theory_Var_Type
  use Cdsat_Theory_Sort_Type as Sort'0

  use prelude.prelude.Int

  type t_var  =
    | C_Var int (Sort'0.t_sort)

  function any_l (_ : 'b) : 'a

  let rec t_var (input:t_var) (ret  (field_0:int) (field_1:Sort'0.t_sort))= any
    [ good (field_0:int) (field_1:Sort'0.t_sort)-> {C_Var field_0 field_1 = input} (! ret {field_0} {field_1})
    | bad (field_0:int) (field_1:Sort'0.t_sort)-> {C_Var field_0 field_1 <> input} {false} any ]


  function var_1 (self : t_var) : Sort'0.t_sort =
    match self with
      | C_Var _ a -> a
      end
end
module Cdsat_Theory_Value_Type
  use prelude.prelude.Real

  type t_value  =
    | C_Bool bool
    | C_Rat (Real.real)

  function any_l (_ : 'b) : 'a

  let rec bool (input:t_value) (ret  (field_0:bool))= any
    [ good (field_0:bool)-> {C_Bool field_0 = input} (! ret {field_0})
    | bad (field_0:bool)-> {C_Bool field_0 <> input} {false} any ]


  let rec rat (input:t_value) (ret  (field_0:Real.real))= any
    [ good (field_0:Real.real)-> {C_Rat field_0 = input} (! ret {field_0})
    | bad (field_0:Real.real)-> {C_Rat field_0 <> input} {false} any ]

end
module Cdsat_Theory_Term_Type
  use Cdsat_Theory_Value_Type as Value'0

  use Cdsat_Theory_Var_Type as Var'0

  type t_term  =
    | C_Variable (Var'0.t_var)
    | C_Value (Value'0.t_value)
    | C_Plus (t_term) (t_term)
    | C_Eq (t_term) (t_term)
    | C_Conj (t_term) (t_term)
    | C_Disj (t_term) (t_term)
    | C_Neg (t_term)

  function any_l (_ : 'b) : 'a

  let rec variable (input:t_term) (ret  (field_0:Var'0.t_var))= any
    [ good (field_0:Var'0.t_var)-> {C_Variable field_0 = input} (! ret {field_0})
    | bad (field_0:Var'0.t_var)-> {C_Variable field_0 <> input} {false} any ]


  let rec value (input:t_term) (ret  (field_0:Value'0.t_value))= any
    [ good (field_0:Value'0.t_value)-> {C_Value field_0 = input} (! ret {field_0})
    | bad (field_0:Value'0.t_value)-> {C_Value field_0 <> input} {false} any ]


  let rec plus (input:t_term) (ret  (field_0:t_term) (field_1:t_term))= any
    [ good (field_0:t_term) (field_1:t_term)-> {C_Plus field_0 field_1 = input} (! ret {field_0} {field_1})
    | bad (field_0:t_term) (field_1:t_term)-> {C_Plus field_0 field_1 <> input} {false} any ]


  let rec eq (input:t_term) (ret  (field_0:t_term) (field_1:t_term))= any
    [ good (field_0:t_term) (field_1:t_term)-> {C_Eq field_0 field_1 = input} (! ret {field_0} {field_1})
    | bad (field_0:t_term) (field_1:t_term)-> {C_Eq field_0 field_1 <> input} {false} any ]


  let rec conj (input:t_term) (ret  (field_0:t_term) (field_1:t_term))= any
    [ good (field_0:t_term) (field_1:t_term)-> {C_Conj field_0 field_1 = input} (! ret {field_0} {field_1})
    | bad (field_0:t_term) (field_1:t_term)-> {C_Conj field_0 field_1 <> input} {false} any ]


  let rec disj (input:t_term) (ret  (field_0:t_term) (field_1:t_term))= any
    [ good (field_0:t_term) (field_1:t_term)-> {C_Disj field_0 field_1 = input} (! ret {field_0} {field_1})
    | bad (field_0:t_term) (field_1:t_term)-> {C_Disj field_0 field_1 <> input} {false} any ]


  let rec neg (input:t_term) (ret  (field_0:t_term))= any
    [ good (field_0:t_term)-> {C_Neg field_0 = input} (! ret {field_0})
    | bad (field_0:t_term)-> {C_Neg field_0 <> input} {false} any ]

end
module Cdsat_Theory_Assign_Type
  use Cdsat_Theory_Value_Type as Value'0

  use Cdsat_Theory_Term_Type as Term'0

  use set.Fset

  type t_assign  =
    | C_Decision (Term'0.t_term) (Value'0.t_value)
    | C_Justified (Fset.fset (Term'0.t_term, Value'0.t_value)) (Term'0.t_term) (Value'0.t_value)
    | C_Input (Term'0.t_term) (Value'0.t_value)

  function any_l (_ : 'b) : 'a

  let rec decision (input:t_assign) (ret  (field_0:Term'0.t_term) (field_1:Value'0.t_value))= any
    [ good (field_0:Term'0.t_term) (field_1:Value'0.t_value)-> {C_Decision field_0 field_1 = input}
      (! ret {field_0} {field_1})
    | bad (field_0:Term'0.t_term) (field_1:Value'0.t_value)-> {C_Decision field_0 field_1 <> input} {false} any ]


  let rec justified (input:t_assign) (ret  (field_0:Fset.fset (Term'0.t_term, Value'0.t_value)) (field_1:Term'0.t_term) (field_2:Value'0.t_value))= any
    [ good (field_0:Fset.fset (Term'0.t_term, Value'0.t_value)) (field_1:Term'0.t_term) (field_2:Value'0.t_value)-> {C_Justified field_0 field_1 field_2
      = input}
      (! ret {field_0} {field_1} {field_2})
    | bad (field_0:Fset.fset (Term'0.t_term, Value'0.t_value)) (field_1:Term'0.t_term) (field_2:Value'0.t_value)-> {C_Justified field_0 field_1 field_2
      <> input}
      {false}
      any ]


  let rec input (input:t_assign) (ret  (field_0:Term'0.t_term) (field_1:Value'0.t_value))= any
    [ good (field_0:Term'0.t_term) (field_1:Value'0.t_value)-> {C_Input field_0 field_1 = input}
      (! ret {field_0} {field_1})
    | bad (field_0:Term'0.t_term) (field_1:Value'0.t_value)-> {C_Input field_0 field_1 <> input} {false} any ]

end
module Cdsat_Theory_Trail_Type
  use prelude.prelude.Int

  use Cdsat_Theory_Assign_Type as Assign'0

  type t_trail  =
    | C_Empty
    | C_Assign (Assign'0.t_assign) int (t_trail)

  function any_l (_ : 'b) : 'a

  let rec empty (input:t_trail) (ret  )= any
    [ good -> {C_Empty  = input} (! ret) | bad -> {C_Empty  <> input} {false} any ]


  let rec assign (input:t_trail) (ret  (field_0:Assign'0.t_assign) (field_1:int) (field_2:t_trail))= any
    [ good (field_0:Assign'0.t_assign) (field_1:int) (field_2:t_trail)-> {C_Assign field_0 field_1 field_2 = input}
      (! ret {field_0} {field_1} {field_2})
    | bad (field_0:Assign'0.t_assign) (field_1:int) (field_2:t_trail)-> {C_Assign field_0 field_1 field_2 <> input}
      {false}
      any ]

end
module Cdsat_Trail_Trail_Type
  use Cdsat_Theory_Trail_Type as Trail'0

  use prelude.prelude.Snapshot

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  use Alloc_Alloc_Global_Type as Global'0

  use Cdsat_Trail_Assignment_Type as Assignment'0

  use Alloc_Vec_Vec_Type as Vec'0

  type t_trail  =
    | C_Trail (Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) usize (Snapshot.snap_ty (Trail'0.t_trail)) usize

  function any_l (_ : 'b) : 'a

  let rec t_trail (input:t_trail) (ret  (assignments:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (level:usize) (ghost':Snapshot.snap_ty (Trail'0.t_trail)) (num_assign:usize))= any
    [ good (assignments:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (level:usize) (ghost':Snapshot.snap_ty (Trail'0.t_trail)) (num_assign:usize)-> {C_Trail assignments level ghost' num_assign
      = input}
      (! ret {assignments} {level} {ghost'} {num_assign})
    | bad (assignments:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (level:usize) (ghost':Snapshot.snap_ty (Trail'0.t_trail)) (num_assign:usize)-> {C_Trail assignments level ghost' num_assign
      <> input}
      {false}
      any ]


  function trail_assignments (self : t_trail) : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)

   =
    match self with
      | C_Trail a _ _ _ -> a
      end

  function trail_ghost (self : t_trail) : Snapshot.snap_ty (Trail'0.t_trail) =
    match self with
      | C_Trail _ _ a _ -> a
      end

  function trail_level (self : t_trail) : usize =
    match self with
      | C_Trail _ a _ _ -> a
      end
end
module Cdsat_Trail_IndexIterator_Type
  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use Cdsat_Trail_Trail_Type as Trail'0

  use prelude.prelude.Borrow

  type t_indexiterator  =
    | C_IndexIterator (borrowed (Trail'0.t_trail)) (TrailIndex'0.t_trailindex)

  function any_l (_ : 'b) : 'a

  let rec t_indexiterator (input:t_indexiterator) (ret  (trail:borrowed (Trail'0.t_trail)) (cur_ix:TrailIndex'0.t_trailindex))= any
    [ good (trail:borrowed (Trail'0.t_trail)) (cur_ix:TrailIndex'0.t_trailindex)-> {C_IndexIterator trail cur_ix
      = input}
      (! ret {trail} {cur_ix})
    | bad (trail:borrowed (Trail'0.t_trail)) (cur_ix:TrailIndex'0.t_trailindex)-> {C_IndexIterator trail cur_ix
      <> input}
      {false}
      any ]


  function indexiterator_trail (self : t_indexiterator) : borrowed (Trail'0.t_trail) =
    match self with
      | C_IndexIterator a _ -> a
      end
end
module Cdsat_Theory_Model_Type
  use Cdsat_Theory_Value_Type as Value'0

  use Cdsat_Theory_Var_Type as Var'0

  use map.Map

  type t_model  =
    | C_Model (Map.map (Var'0.t_var) (Value'0.t_value))

  function any_l (_ : 'b) : 'a

  let rec t_model (input:t_model) (ret  (field_0:Map.map (Var'0.t_var) (Value'0.t_value)))= any
    [ good (field_0:Map.map (Var'0.t_var) (Value'0.t_value))-> {C_Model field_0 = input} (! ret {field_0})
    | bad (field_0:Map.map (Var'0.t_var) (Value'0.t_value))-> {C_Model field_0 <> input} {false} any ]


  function model_0 (self : t_model) : Map.map (Var'0.t_var) (Value'0.t_value) =
    match self with
      | C_Model a -> a
      end
end
module Cdsat_Theory_Impl5_Len_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  use Cdsat_Theory_Trail_Type as Trail'0

  use prelude.prelude.Int

  constant self  : Trail'0.t_trail

  function len [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int

  goal vc_len : match self with
    | Trail'0.C_Empty -> [%#stheory0] 0 >= 0
    | Trail'0.C_Assign _ _ tl -> ([%#stheory0] len tl >= 0)  -> ([%#stheory0] len tl + 1 >= 0)
    end
end
module Cdsat_Theory_Impl5_Level_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span2 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span3 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  use Cdsat_Theory_Assign_Type as Assign'0

  use Cdsat_Theory_Trail_Type as Trail'0

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span3] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span2] len'0 self >= 0

  constant self  : Trail'0.t_trail

  function level [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int

  goal vc_level : match self with
    | Trail'0.C_Empty -> let result = 0 in ([%#stheory1] result <= len'0 self) && ([%#stheory0] result >= 0)
    | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> ([%#stheory1] level tl <= len'0 tl)
    && ([%#stheory0] level tl >= 0)
     -> (let result = 1 + level tl in ([%#stheory1] result <= len'0 self) && ([%#stheory0] result >= 0))
    | Trail'0.C_Assign _ _ tl -> ([%#stheory1] level tl <= len'0 tl) && ([%#stheory0] level tl >= 0)
     -> (let result = level tl in ([%#stheory1] result <= len'0 self) && ([%#stheory0] result >= 0))
    end
end
module Core_Option_Option_Type
  type t_option 't =
    | C_None
    | C_Some 't

  function any_l (_ : 'b) : 'a

  let rec none < 't > (input:t_option 't) (ret  )= any
    [ good -> {C_None  = input} (! ret) | bad -> {C_None  <> input} {false} any ]


  let rec some < 't > (input:t_option 't) (ret  (field_0:'t))= any
    [ good (field_0:'t)-> {C_Some field_0 = input} (! ret {field_0})
    | bad (field_0:'t)-> {C_Some field_0 <> input} {false} any ]

end
module Cdsat_Theory_Impl5_Find_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span3 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span4 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span5 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span6 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span7 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span8 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span9 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span10 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span11 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span12 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span13 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  use Cdsat_Theory_Value_Type as Value'0

  use Cdsat_Theory_Term_Type as Term'0

  use Cdsat_Theory_Trail_Type as Trail'0

  use Cdsat_Theory_Sort_Type as Sort'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span3] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span4] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  use Cdsat_Theory_Assign_Type as Assign'0

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span5] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span6] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'0 a
      end

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span8] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span7] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span11] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span10] level'0 self <= len'0 self)
  && ([%#span9] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span12] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span13] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use prelude.prelude.Int

  use Core_Option_Option_Type as Option'0

  constant self  : Trail'0.t_trail

  constant d  : (Term'0.t_term, Value'0.t_value)

  function find [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)


  goal vc_find : match self with
    | Trail'0.C_Empty -> let result = Option'0.C_None in ([%#stheory2] invariant_assign'0 self
     -> (forall p : (Assign'0.t_assign, int) . result = Option'0.C_Some p
     -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
    && ([%#stheory1] invariant_nonneg'0 self
     -> (forall p : (Assign'0.t_assign, int) . result = Option'0.C_Some p
     -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
    && ([%#stheory0] match result with
      | Option'0.C_Some (a, l) -> to_pair'0 a = d
      | _ -> true
      end)
    | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then
      let result = Option'0.C_Some (a, l) in ([%#stheory2] invariant_assign'0 self
       -> (forall p : (Assign'0.t_assign, int) . result = Option'0.C_Some p
       -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
      && ([%#stheory1] invariant_nonneg'0 self
       -> (forall p : (Assign'0.t_assign, int) . result = Option'0.C_Some p
       -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
      && ([%#stheory0] match result with
        | Option'0.C_Some (a, l) -> to_pair'0 a = d
        | _ -> true
        end)
    else
      ([%#stheory2] invariant_assign'0 tl
       -> (forall p : (Assign'0.t_assign, int) . find tl d = Option'0.C_Some p
       -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
      && ([%#stheory1] invariant_nonneg'0 tl
       -> (forall p : (Assign'0.t_assign, int) . find tl d = Option'0.C_Some p
       -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 tl))
      && ([%#stheory0] match find tl d with
        | Option'0.C_Some (a, l) -> to_pair'0 a = d
        | _ -> true
        end)
       -> (let result = find tl d in ([%#stheory2] invariant_assign'0 self
       -> (forall p : (Assign'0.t_assign, int) . result = Option'0.C_Some p
       -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
      && ([%#stheory1] invariant_nonneg'0 self
       -> (forall p : (Assign'0.t_assign, int) . result = Option'0.C_Some p
       -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
      && ([%#stheory0] match result with
        | Option'0.C_Some (a, l) -> to_pair'0 a = d
        | _ -> true
        end))

    end
end
module Cdsat_Theory_Impl5_LevelOf_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span stheory4 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span5 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span6 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span7 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span8 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span9 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span10 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span11 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span12 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span13 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span14 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span15 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span16 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span5] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use Cdsat_Theory_Term_Type as Term'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span6] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  use Cdsat_Theory_Assign_Type as Assign'0

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span7] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  use Cdsat_Theory_Trail_Type as Trail'0

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span8] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'0 a
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span9] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use prelude.prelude.Int

  use Core_Option_Option_Type as Option'0

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span11] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span10] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span14] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span13] level'0 self <= len'0 self)
  && ([%#span12] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span15] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span16] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#stheory4] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#stheory3] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#stheory2] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  constant self  : Trail'0.t_trail

  constant d  : (Term'0.t_term, Value'0.t_value)

  function level_of [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int


  goal vc_level_of : ([%#stheory0] invariant_nonneg'0 self)
   -> ([%#stheory4] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#stheory3] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#stheory2] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)
   -> match find'0 self d with
    | Option'0.C_Some (_, l) -> let result = l in [%#stheory1] result >= 0 /\ result <= level'0 self
    | Option'0.C_None -> let result = 0 in [%#stheory1] result >= 0 /\ result <= level'0 self
    end
end
module Cdsat_Theory_Impl5_SetLevel_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span stheory4 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span stheory5 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span stheory6 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span stheory7 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span stheory8 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span9 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span10 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span11 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span12 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span13 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span14 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span15 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span16 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span17 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span20 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span21 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span22 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span23 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span24 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span25 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span26 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  use set.Fset

  use Cdsat_Theory_Value_Type as Value'0

  use Cdsat_Theory_Term_Type as Term'0

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span9] Fset.remove a self

  use set.Fset

  use Cdsat_Theory_Trail_Type as Trail'0

  use set.Fset

  use Cdsat_Theory_Assign_Type as Assign'0

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span11] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span10] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span14] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span13] level'0 self <= len'0 self)
  && ([%#span12] level'0 self >= 0)

  use set.Fset

  use prelude.prelude.Int

  use Cdsat_Theory_Sort_Type as Sort'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span15] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span16] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span17] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span18] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'0 a
      end

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span19] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span20] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span24] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span23] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span22] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span21] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span25] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#stheory7] invariant_nonneg'0 self)
   -> ([%#stheory8] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  use set.Fset

  predicate contains'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span26] Fset.mem e self

  constant self  : Trail'0.t_trail

  constant s  : Fset.fset (Term'0.t_term, Value'0.t_value)

  function set_level [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  goal vc_set_level : ([%#stheory0] invariant_nonneg'0 self)
   -> (if Fset.cardinal s = 0 then
    let result = 0 in ([%#stheory5] result <= level'0 self)
    && ([%#stheory4] result >= 0)
    && ([%#stheory3] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> result = 0)
    && ([%#stheory2] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
     -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 s i /\ level_of'0 self i = result))
    && ([%#stheory1] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 s i  -> level_of'0 self i <= result)
  else
    if Fset.cardinal s = 1 then
      ([%#stheory7] invariant_nonneg'0 self)
      /\ (([%#stheory8] level_of'0 self (Fset.pick s) >= 0 /\ level_of'0 self (Fset.pick s) <= level'0 self)
       -> (let result = level_of'0 self (Fset.pick s) in ([%#stheory5] result <= level'0 self)
      && ([%#stheory4] result >= 0)
      && ([%#stheory3] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> result = 0)
      && ([%#stheory2] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
       -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 s i /\ level_of'0 self i = result))
      && ([%#stheory1] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 s i  -> level_of'0 self i <= result)))
    else
      let a = Fset.pick s in (([%#stheory0] invariant_nonneg'0 self)
      /\ 0 <= ([%#stheory6] Fset.cardinal s)
      /\ ([%#stheory6] Fset.cardinal (remove'0 s a)) < ([%#stheory6] Fset.cardinal s))
      /\ (([%#stheory5] set_level self (remove'0 s a) <= level'0 self)
      && ([%#stheory4] set_level self (remove'0 s a) >= 0)
      && ([%#stheory3] remove'0 s a = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
       -> set_level self (remove'0 s a) = 0)
      && ([%#stheory2] remove'0 s a <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
       -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 (remove'0 s a) i
      /\ level_of'0 self i = set_level self (remove'0 s a)))
      && ([%#stheory1] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 (remove'0 s a) i
       -> level_of'0 self i <= set_level self (remove'0 s a))
       -> (let rec' = set_level self (remove'0 s a) in ([%#stheory7] invariant_nonneg'0 self)
      /\ (([%#stheory8] level_of'0 self a >= 0 /\ level_of'0 self a <= level'0 self)
       -> (if level_of'0 self a >= rec' then
        ([%#stheory7] invariant_nonneg'0 self)
        /\ (([%#stheory8] level_of'0 self a >= 0 /\ level_of'0 self a <= level'0 self)
         -> (let result = level_of'0 self a in ([%#stheory5] result <= level'0 self)
        && ([%#stheory4] result >= 0)
        && ([%#stheory3] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> result = 0)
        && ([%#stheory2] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
         -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 s i /\ level_of'0 self i = result))
        && ([%#stheory1] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 s i  -> level_of'0 self i <= result)))
      else
        let result = rec' in ([%#stheory5] result <= level'0 self)
        && ([%#stheory4] result >= 0)
        && ([%#stheory3] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> result = 0)
        && ([%#stheory2] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
         -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 s i /\ level_of'0 self i = result))
        && ([%#stheory1] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 s i  -> level_of'0 self i <= result)
      ))))

  )
end
module Cdsat_Theory_Impl5_Contains_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span4 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span5 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span6 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span7 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span8 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span9 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span10 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span11 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span12 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span13 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span14 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span15 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  use Cdsat_Theory_Assign_Type as Assign'0

  use Cdsat_Theory_Trail_Type as Trail'0

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span5] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span4] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span8] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span7] level'0 self <= len'0 self)
  && ([%#span6] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span9] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  use Cdsat_Theory_Value_Type as Value'0

  use Cdsat_Theory_Term_Type as Term'0

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span10] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use prelude.prelude.Int

  use Core_Option_Option_Type as Option'0

  use Cdsat_Theory_Sort_Type as Sort'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span11] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span12] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span13] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span14] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'0 a
      end

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span15] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#stheory3] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#stheory2] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#stheory1] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  constant self  : Trail'0.t_trail

  constant d  : (Term'0.t_term, Value'0.t_value)

  predicate contains [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))


  goal vc_contains : ([%#stheory3] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#stheory2] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#stheory1] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)
   -> match find'0 self d with
    | Option'0.C_Some ix -> [%#stheory0] invariant_assign'0 self
     -> true = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)
    | Option'0.C_None -> [%#stheory0] invariant_assign'0 self
     -> false = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)
    end
end
module Cdsat_Theory_Impl1_Negate_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span2 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span3 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  use Cdsat_Theory_Value_Type as Value'0

  use Cdsat_Theory_Sort_Type as Sort'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span2] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span3] sort'0 self = Sort'0.C_Boolean

  constant self  : Value'0.t_value

  function negate [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value

  goal vc_negate : ([%#stheory0] is_bool'0 self)
   -> match self with
    | Value'0.C_Bool b -> [%#stheory1] is_bool'0 (Value'0.C_Bool (not b))
    | _ -> [%#stheory1] is_bool'0 self
    end
end
module Cdsat_Theory_Impl4_Interp_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span2 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span3 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span4 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span2] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span3] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k = v
     -> Cdsat_Theory_Var_Type.var_1 k = sort'0 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'0 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use prelude.prelude.Real

  use prelude.prelude.Int

  function from_int'0 (_1 : int) : Real.real

  use map.Map

  use Cdsat_Theory_Term_Type as Term'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span4] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'0 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  constant self  : Model'0.t_model

  constant t  : Term'0.t_term

  function interp [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value


  goal vc_interp : ([%#stheory0] inv'0 self)
   -> match t with
    | Term'0.C_Variable v -> [%#stheory1] invariant'0 self
     -> sort'0 (Map.get (Cdsat_Theory_Model_Type.model_0 self) v) = sort'1 t
    | Term'0.C_Value v -> [%#stheory1] invariant'0 self  -> sort'0 v = sort'1 t
    | Term'0.C_Plus l r -> ([%#stheory0] inv'0 self)
    /\ (([%#stheory1] invariant'0 self  -> sort'0 (interp self l) = sort'1 l)
     -> ([%#stheory0] inv'0 self)
    /\ (([%#stheory1] invariant'0 self  -> sort'0 (interp self r) = sort'1 r)
     -> match (interp self l, interp self r) with
      | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> [%#stheory1] invariant'0 self  -> sort'0 (Value'0.C_Rat r1) = sort'1 t
      | _ -> [%#stheory1] invariant'0 self  -> sort'0 (Value'0.C_Rat (from_int'0 (- 1))) = sort'1 t
      end))
    | Term'0.C_Conj l r -> ([%#stheory0] inv'0 self)
    /\ (([%#stheory1] invariant'0 self  -> sort'0 (interp self l) = sort'1 l)
     -> ([%#stheory0] inv'0 self)
    /\ (([%#stheory1] invariant'0 self  -> sort'0 (interp self r) = sort'1 r)
     -> match (interp self l, interp self r) with
      | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> if b1 then
        [%#stheory1] invariant'0 self  -> sort'0 (Value'0.C_Bool b2) = sort'1 t
      else
        [%#stheory1] invariant'0 self  -> sort'0 (Value'0.C_Bool false) = sort'1 t

      | _ -> [%#stheory1] invariant'0 self  -> sort'0 (Value'0.C_Bool false) = sort'1 t
      end))
    | Term'0.C_Disj l r -> ([%#stheory0] inv'0 self)
    /\ (([%#stheory1] invariant'0 self  -> sort'0 (interp self l) = sort'1 l)
     -> ([%#stheory0] inv'0 self)
    /\ (([%#stheory1] invariant'0 self  -> sort'0 (interp self r) = sort'1 r)
     -> match (interp self l, interp self r) with
      | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> [%#stheory1] invariant'0 self
       -> sort'0 (Value'0.C_Bool (b1 \/ b2)) = sort'1 t
      | _ -> [%#stheory1] invariant'0 self  -> sort'0 (Value'0.C_Bool false) = sort'1 t
      end))
    | Term'0.C_Eq l r -> ([%#stheory0] inv'0 self)
    /\ (([%#stheory1] invariant'0 self  -> sort'0 (interp self l) = sort'1 l)
     -> ([%#stheory0] inv'0 self)
    /\ (([%#stheory1] invariant'0 self  -> sort'0 (interp self r) = sort'1 r)
     -> ([%#stheory1] invariant'0 self  -> sort'0 (Value'0.C_Bool (interp self l = interp self r)) = sort'1 t)))
    | Term'0.C_Neg t_1 -> ([%#stheory0] inv'0 self)
    /\ (([%#stheory1] invariant'0 self  -> sort'0 (interp self t_1) = sort'1 t_1)
     -> match interp self t_1 with
      | Value'0.C_Bool b -> [%#stheory1] invariant'0 self  -> sort'0 (Value'0.C_Bool (not b)) = sort'1 t
      | _ -> [%#stheory1] invariant'0 self  -> sort'0 (Value'0.C_Bool false) = sort'1 t
      end)
    end
end
module Cdsat_Theory_Impl5_CountBounds_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 738 15 738 31

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 739 4 739 83

  let%span span2 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span3 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span4 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span5 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span6 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span7 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span8 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span9 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span10 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span11 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span12 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span13 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span14 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span15 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span16 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span17 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span20 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span21 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span22 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span23 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span24 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span25 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span26 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span27 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span28 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span29 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span30 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span31 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span32 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span33 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span34 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span35 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span36 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span37 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  let%span span38 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span39 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  use Cdsat_Theory_Assign_Type as Assign'0

  use Cdsat_Theory_Trail_Type as Trail'0

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span3] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span2] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span6] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span5] level'0 self <= len'0 self)
  && ([%#span4] level'0 self >= 0)

  use prelude.prelude.Int

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  use Cdsat_Theory_Term_Type as Term'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span7] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span8] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span9] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span10] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'1 a
      end

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span11] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span12] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span16] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span15] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span14] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span13] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span19] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span17] invariant_nonneg'0 self)
   -> ([%#span18] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span21] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span20] invariant_assign'0 self
   -> contains'0 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span22] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span25] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span23] is_bool'0 self)
   -> ([%#span24] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span26] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'0 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'0 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  use set.Fset

  use set.Fset

  predicate contains'1 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span27] Fset.mem e self

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'0.t_trail) =
    [%#span28] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'1 j a  -> contains'0 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span29] Fset.remove a self

  use set.Fset

  use set.Fset

  use set.Fset

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span37] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#span30] invariant_nonneg'0 self)
   -> ([%#span35] set_level'0 self s <= level'0 self)
  && ([%#span34] set_level'0 self s >= 0)
  && ([%#span33] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#span32] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'1 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span31] forall i : (Term'0.t_term, Value'0.t_value) . contains'1 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'0.t_trail) =
    [%#span38] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'0.t_trail) =
    [%#span39] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  constant self  : Trail'0.t_trail

  function count_bounds [#"/Users/xavier/Code/cdsat/src/theory.rs" 740 4 740 35] (self : Trail'0.t_trail) : ()

  goal vc_count_bounds : ([%#stheory0] invariant'0 self)
   -> match self with
    | Trail'0.C_Empty -> [%#stheory1] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a
     -> level_of'0 self a <= level'0 self
    | Trail'0.C_Assign (Assign'0.C_Input _ _) _ tl -> ([%#stheory0] invariant'0 tl)
    /\ (([%#stheory1] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 tl a  -> level_of'0 tl a <= level'0 tl)
     -> ([%#stheory1] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a
     -> level_of'0 self a <= level'0 self))
    | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> ([%#stheory0] invariant'0 tl)
    /\ (([%#stheory1] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 tl a  -> level_of'0 tl a <= level'0 tl)
     -> ([%#stheory1] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a
     -> level_of'0 self a <= level'0 self))
    | Trail'0.C_Assign (Assign'0.C_Justified _ _ _) _ tl -> ([%#stheory0] invariant'0 tl)
    /\ (([%#stheory1] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 tl a  -> level_of'0 tl a <= level'0 tl)
     -> ([%#stheory1] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a
     -> level_of'0 self a <= level'0 self))
    end
end
module Cdsat_Theory_Impl5_Restrict_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 548 15 548 31

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 550 15 550 25

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 549 14 549 32

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 551 4 551 141

  let%span stheory4 = "/Users/xavier/Code/cdsat/src/theory.rs" 552 4 552 142

  let%span stheory5 = "/Users/xavier/Code/cdsat/src/theory.rs" 553 4 553 56

  let%span stheory6 = "/Users/xavier/Code/cdsat/src/theory.rs" 554 4 554 71

  let%span stheory7 = "/Users/xavier/Code/cdsat/src/theory.rs" 555 4 555 77

  let%span stheory8 = "/Users/xavier/Code/cdsat/src/theory.rs" 556 14 556 126

  let%span stheory9 = "/Users/xavier/Code/cdsat/src/theory.rs" 557 14 557 40

  let%span stheory10 = "/Users/xavier/Code/cdsat/src/theory.rs" 738 15 738 31

  let%span stheory11 = "/Users/xavier/Code/cdsat/src/theory.rs" 739 4 739 83

  let%span span12 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span13 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span14 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span15 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span16 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span17 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span20 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span21 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span22 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span23 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span24 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span25 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span26 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span28 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span29 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span30 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span31 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span32 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span33 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span34 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span35 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span36 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span37 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span38 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span39 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span40 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span41 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span42 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span43 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span44 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span45 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span46 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span47 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span48 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  let%span span49 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span50 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span51 = "/Users/xavier/Code/cdsat/src/theory.rs" 741 8 746 9

  let%span span52 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span53 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span54 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span55 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span56 = "/Users/xavier/Code/cdsat/src/theory.rs" 675 8 675 71

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span12] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span13] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'2 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use Cdsat_Theory_Assign_Type as Assign'0

  use Cdsat_Theory_Trail_Type as Trail'0

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span15] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span14] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span18] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span17] level'0 self <= len'0 self)
  && ([%#span16] level'0 self >= 0)

  use prelude.prelude.Int

  use Cdsat_Theory_Term_Type as Term'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span19] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span20] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span21] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'1 a
      end

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span22] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span23] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span27] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span26] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span25] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span24] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span30] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span28] invariant_nonneg'0 self)
   -> ([%#span29] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span32] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span31] invariant_assign'0 self
   -> contains'0 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span33] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span36] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span34] is_bool'0 self)
   -> ([%#span35] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span37] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'0 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'0 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  use set.Fset

  use set.Fset

  predicate contains'1 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span38] Fset.mem e self

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'0.t_trail) =
    [%#span39] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'1 j a  -> contains'0 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span40] Fset.remove a self

  use set.Fset

  use set.Fset

  use set.Fset

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span48] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#span41] invariant_nonneg'0 self)
   -> ([%#span46] set_level'0 self s <= level'0 self)
  && ([%#span45] set_level'0 self s >= 0)
  && ([%#span44] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#span43] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'1 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span42] forall i : (Term'0.t_term, Value'0.t_value) . contains'1 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'0.t_trail) =
    [%#span49] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'0.t_trail) =
    [%#span50] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function count_bounds'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 740 4 740 35] (self : Trail'0.t_trail) : () =
    [%#span51] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign (Assign'0.C_Input _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Justified _ _ _) _ tl -> count_bounds'0 tl
      end

  axiom count_bounds'0_spec : forall self : Trail'0.t_trail . ([%#stheory10] invariant'0 self)
   -> ([%#stheory11] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a
   -> level_of'0 self a <= level'0 self)

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span54] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span52] inv'0 self)
   -> ([%#span53] invariant'2 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span55] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  predicate satisfied_by'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 674 4 674 47] (self : Trail'0.t_trail) (m : Model'0.t_model)

   =
    [%#span56] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a  -> satisfies'0 m a

  constant self  : Trail'0.t_trail

  constant level  : int

  function restrict [#"/Users/xavier/Code/cdsat/src/theory.rs" 558 4 558 45] (self : Trail'0.t_trail) (level : int) : Trail'0.t_trail


  goal vc_restrict : ([%#stheory1] level >= 0)
   -> ([%#stheory0] invariant'0 self)
   -> match self with
    | Trail'0.C_Empty -> let result = Trail'0.C_Empty in ([%#stheory9] len'0 result <= len'0 self)
    && ([%#stheory8] (level'0 self >= level  -> level'0 result = level)
    /\ (level'0 self < level  -> level'0 result = level'0 self))
    && ([%#stheory7] forall m : Model'0.t_model . inv'0 m  -> satisfied_by'0 self m  -> satisfied_by'0 result m)
    && ([%#stheory6] forall a : (Term'0.t_term, Value'0.t_value) . not contains'0 self a  -> not contains'0 result a)
    && ([%#stheory5] level >= level'0 self  -> result = self)
    && ([%#stheory4] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 result a
     -> contains'0 self a /\ level_of'0 result a <= level /\ level_of'0 result a = level_of'0 self a)
    && ([%#stheory3] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a
     -> level_of'0 self a <= level  -> contains'0 result a /\ level_of'0 result a = level_of'0 self a)
    && ([%#stheory2] invariant'0 result)
    | Trail'0.C_Assign a l tl -> (([%#stheory1] level >= 0) && ([%#stheory0] invariant'0 tl))
    /\ (([%#stheory9] len'0 (restrict tl level) <= len'0 tl)
    && ([%#stheory8] (level'0 tl >= level  -> level'0 (restrict tl level) = level)
    /\ (level'0 tl < level  -> level'0 (restrict tl level) = level'0 tl))
    && ([%#stheory7] forall m : Model'0.t_model . inv'0 m
     -> satisfied_by'0 tl m  -> satisfied_by'0 (restrict tl level) m)
    && ([%#stheory6] forall a : (Term'0.t_term, Value'0.t_value) . not contains'0 tl a
     -> not contains'0 (restrict tl level) a)
    && ([%#stheory5] level >= level'0 tl  -> restrict tl level = tl)
    && ([%#stheory4] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 (restrict tl level) a
     -> contains'0 tl a
    /\ level_of'0 (restrict tl level) a <= level /\ level_of'0 (restrict tl level) a = level_of'0 tl a)
    && ([%#stheory3] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 tl a
     -> level_of'0 tl a <= level
     -> contains'0 (restrict tl level) a /\ level_of'0 (restrict tl level) a = level_of'0 tl a)
    && ([%#stheory2] invariant'0 (restrict tl level))
     -> (let tl_1 = restrict tl level in ([%#stheory10] invariant'0 tl_1)
    /\ (([%#stheory11] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 tl_1 a
     -> level_of'0 tl_1 a <= level'0 tl_1)
     -> (let _ = count_bounds'0 tl_1 in if l <= level then
      let result = Trail'0.C_Assign a l tl_1 in ([%#stheory9] len'0 result <= len'0 self)
      && ([%#stheory8] (level'0 self >= level  -> level'0 result = level)
      /\ (level'0 self < level  -> level'0 result = level'0 self))
      && ([%#stheory7] forall m : Model'0.t_model . inv'0 m  -> satisfied_by'0 self m  -> satisfied_by'0 result m)
      && ([%#stheory6] forall a : (Term'0.t_term, Value'0.t_value) . not contains'0 self a  -> not contains'0 result a)
      && ([%#stheory5] level >= level'0 self  -> result = self)
      && ([%#stheory4] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 result a
       -> contains'0 self a /\ level_of'0 result a <= level /\ level_of'0 result a = level_of'0 self a)
      && ([%#stheory3] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a
       -> level_of'0 self a <= level  -> contains'0 result a /\ level_of'0 result a = level_of'0 self a)
      && ([%#stheory2] invariant'0 result)
    else
      let result = tl_1 in ([%#stheory9] len'0 result <= len'0 self)
      && ([%#stheory8] (level'0 self >= level  -> level'0 result = level)
      /\ (level'0 self < level  -> level'0 result = level'0 self))
      && ([%#stheory7] forall m : Model'0.t_model . inv'0 m  -> satisfied_by'0 self m  -> satisfied_by'0 result m)
      && ([%#stheory6] forall a : (Term'0.t_term, Value'0.t_value) . not contains'0 self a  -> not contains'0 result a)
      && ([%#stheory5] level >= level'0 self  -> result = self)
      && ([%#stheory4] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 result a
       -> contains'0 self a /\ level_of'0 result a <= level /\ level_of'0 result a = level_of'0 self a)
      && ([%#stheory3] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a
       -> level_of'0 self a <= level  -> contains'0 result a /\ level_of'0 result a = level_of'0 self a)
      && ([%#stheory2] invariant'0 result)
    ))))
    end
end
module Cdsat_Theory_Impl5_Impls_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 693 4 693 55

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 548 15 548 31

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 550 15 550 25

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 549 14 549 32

  let%span stheory4 = "/Users/xavier/Code/cdsat/src/theory.rs" 551 4 551 141

  let%span stheory5 = "/Users/xavier/Code/cdsat/src/theory.rs" 552 4 552 142

  let%span stheory6 = "/Users/xavier/Code/cdsat/src/theory.rs" 553 4 553 56

  let%span stheory7 = "/Users/xavier/Code/cdsat/src/theory.rs" 554 4 554 71

  let%span stheory8 = "/Users/xavier/Code/cdsat/src/theory.rs" 555 4 555 77

  let%span stheory9 = "/Users/xavier/Code/cdsat/src/theory.rs" 556 14 556 126

  let%span stheory10 = "/Users/xavier/Code/cdsat/src/theory.rs" 557 14 557 40

  let%span stheory11 = "/Users/xavier/Code/cdsat/src/theory.rs" 695 8 695 108

  let%span span12 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span13 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span14 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span15 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span16 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span17 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span20 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span21 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span22 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span23 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span24 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span25 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span26 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span28 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span29 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span30 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span31 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span32 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span33 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span34 = "/Users/xavier/Code/cdsat/src/theory.rs" 675 8 675 71

  let%span span35 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span36 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span37 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span38 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span39 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span40 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span41 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span42 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span43 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span44 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span45 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span46 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span47 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span48 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span49 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span50 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span51 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span52 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span53 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  let%span span54 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span55 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span56 = "/Users/xavier/Code/cdsat/src/theory.rs" 738 15 738 31

  let%span span57 = "/Users/xavier/Code/cdsat/src/theory.rs" 739 4 739 83

  let%span span58 = "/Users/xavier/Code/cdsat/src/theory.rs" 741 8 746 9

  let%span span59 = "/Users/xavier/Code/cdsat/src/theory.rs" 559 8 570 9

  let%span span60 = "/Users/xavier/Code/cdsat/src/theory.rs" 682 8 682 82

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span12] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span13] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'1 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use Cdsat_Theory_Trail_Type as Trail'0

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span15] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span14] len'0 self >= 0

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  use Cdsat_Theory_Term_Type as Term'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span16] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span19] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span17] inv'0 self)
   -> ([%#span18] invariant'1 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span20] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  use prelude.prelude.Int

  use Cdsat_Theory_Assign_Type as Assign'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span21] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span22] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'2 a
      end

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span25] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span24] level'0 self <= len'0 self)
  && ([%#span23] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span26] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span27] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span31] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span30] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span29] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span28] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span33] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span32] invariant_assign'0 self
   -> contains'0 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  predicate satisfied_by'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 674 4 674 47] (self : Trail'0.t_trail) (m : Model'0.t_model)

   =
    [%#span34] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a  -> satisfies'0 m a

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span37] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span35] invariant_nonneg'0 self)
   -> ([%#span36] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span38] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span41] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span39] is_bool'0 self)
   -> ([%#span40] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span42] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'0 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'0 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  use set.Fset

  use set.Fset

  predicate contains'1 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span43] Fset.mem e self

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'0.t_trail) =
    [%#span44] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'1 j a  -> contains'0 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span45] Fset.remove a self

  use set.Fset

  use set.Fset

  use set.Fset

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span53] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#span46] invariant_nonneg'0 self)
   -> ([%#span51] set_level'0 self s <= level'0 self)
  && ([%#span50] set_level'0 self s >= 0)
  && ([%#span49] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#span48] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'1 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span47] forall i : (Term'0.t_term, Value'0.t_value) . contains'1 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'0.t_trail) =
    [%#span54] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'0.t_trail) =
    [%#span55] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function count_bounds'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 740 4 740 35] (self : Trail'0.t_trail) : () =
    [%#span58] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign (Assign'0.C_Input _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Justified _ _ _) _ tl -> count_bounds'0 tl
      end

  axiom count_bounds'0_spec : forall self : Trail'0.t_trail . ([%#span56] invariant'0 self)
   -> ([%#span57] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a  -> level_of'0 self a <= level'0 self)

  function restrict'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 558 4 558 45] (self : Trail'0.t_trail) (level : int) : Trail'0.t_trail

   =
    [%#span59] match self with
      | Trail'0.C_Empty -> Trail'0.C_Empty
      | Trail'0.C_Assign a l tl -> let tl = restrict'0 tl level in let _ = count_bounds'0 tl in if l <= level then
        Trail'0.C_Assign a l tl
      else
        tl

      end

  axiom restrict'0_spec : forall self : Trail'0.t_trail, level : int . ([%#stheory1] invariant'0 self)
   -> ([%#stheory2] level >= 0)
   -> ([%#stheory10] len'0 (restrict'0 self level) <= len'0 self)
  && ([%#stheory9] (level'0 self >= level  -> level'0 (restrict'0 self level) = level)
  /\ (level'0 self < level  -> level'0 (restrict'0 self level) = level'0 self))
  && ([%#stheory8] forall m : Model'0.t_model . inv'0 m
   -> satisfied_by'0 self m  -> satisfied_by'0 (restrict'0 self level) m)
  && ([%#stheory7] forall a : (Term'0.t_term, Value'0.t_value) . not contains'0 self a
   -> not contains'0 (restrict'0 self level) a)
  && ([%#stheory6] level >= level'0 self  -> restrict'0 self level = self)
  && ([%#stheory5] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 (restrict'0 self level) a
   -> contains'0 self a
  /\ level_of'0 (restrict'0 self level) a <= level /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#stheory4] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a
   -> level_of'0 self a <= level
   -> contains'0 (restrict'0 self level) a /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#stheory3] invariant'0 (restrict'0 self level))

  predicate unsat'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 681 4 681 30] (self : Trail'0.t_trail) =
    [%#span60] forall m : Model'0.t_model . inv'0 m  -> satisfied_by'0 (restrict'0 self 0) m  -> false

  constant self  : Trail'0.t_trail

  constant rhs  : Trail'0.t_trail

  predicate impls [#"/Users/xavier/Code/cdsat/src/theory.rs" 694 4 694 41] (self : Trail'0.t_trail) (rhs : Trail'0.t_trail)


  goal vc_impls : (forall m : Model'0.t_model . if inv'0 m then
    (([%#stheory2] 0 >= 0) && ([%#stheory1] invariant'0 self))
    /\ (([%#stheory10] len'0 (restrict'0 self 0) <= len'0 self)
    && ([%#stheory9] (level'0 self >= 0  -> level'0 (restrict'0 self 0) = 0)
    /\ (level'0 self < 0  -> level'0 (restrict'0 self 0) = level'0 self))
    && ([%#stheory8] forall m : Model'0.t_model . inv'0 m
     -> satisfied_by'0 self m  -> satisfied_by'0 (restrict'0 self 0) m)
    && ([%#stheory7] forall a : (Term'0.t_term, Value'0.t_value) . not contains'0 self a
     -> not contains'0 (restrict'0 self 0) a)
    && ([%#stheory6] 0 >= level'0 self  -> restrict'0 self 0 = self)
    && ([%#stheory5] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 (restrict'0 self 0) a
     -> contains'0 self a
    /\ level_of'0 (restrict'0 self 0) a <= 0 /\ level_of'0 (restrict'0 self 0) a = level_of'0 self a)
    && ([%#stheory4] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a
     -> level_of'0 self a <= 0
     -> contains'0 (restrict'0 self 0) a /\ level_of'0 (restrict'0 self 0) a = level_of'0 self a)
    && ([%#stheory3] invariant'0 (restrict'0 self 0))
     -> (if satisfied_by'0 (restrict'0 self 0) m then
      ([%#stheory2] 0 >= 0) && ([%#stheory1] invariant'0 rhs)
    else
      true
    ))
  else
    true
  )
  /\ ([%#stheory0] ([%#stheory11] forall m : Model'0.t_model . inv'0 m
   -> satisfied_by'0 (restrict'0 self 0) m  -> satisfied_by'0 (restrict'0 rhs 0) m)  -> unsat'0 rhs  -> unsat'0 self)
end
module Core_Cmp_Ordering_Type
  type t_ordering  =
    | C_Less
    | C_Equal
    | C_Greater

  function any_l (_ : 'b) : 'a

  let rec less (input:t_ordering) (ret  )= any
    [ good -> {C_Less  = input} (! ret) | bad -> {C_Less  <> input} {false} any ]


  let rec equal (input:t_ordering) (ret  )= any
    [ good -> {C_Equal  = input} (! ret) | bad -> {C_Equal  <> input} {false} any ]


  let rec greater (input:t_ordering) (ret  )= any
    [ good -> {C_Greater  = input} (! ret) | bad -> {C_Greater  <> input} {false} any ]

end
module Cdsat_Theory_Impl5_FindJustified_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 616 15 616 27

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 617 15 617 32

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 618 4 618 90

  let%span span3 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span4 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span5 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span6 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span7 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span8 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span9 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span10 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span11 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span12 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span13 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span14 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span15 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span16 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span17 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span20 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span21 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span22 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span23 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span24 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span25 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span26 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span28 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span3] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span4] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k = v
     -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'1 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use Cdsat_Theory_Term_Type as Term'0

  use Cdsat_Theory_Assign_Type as Assign'0

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span5] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Cdsat_Theory_Trail_Type as Trail'0

  use set.Fset

  use prelude.prelude.Real

  use prelude.prelude.Int

  function from_int'0 (_1 : int) : Real.real

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span6] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span9] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span7] inv'0 self)
   -> ([%#span8] invariant'1 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span10] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  use set.Fset

  predicate contains'1 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span11] Fset.mem e self

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span12] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 v a  -> satisfies'0 self a

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span13] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'0 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  use prelude.prelude.Int

  use Core_Option_Option_Type as Option'0

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span14] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span15] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'0 a
      end

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span17] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span16] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span20] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span19] level'0 self <= len'0 self)
  && ([%#span18] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span21] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span25] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span24] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span23] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span22] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span27] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span26] invariant_assign'0 self
   -> contains'0 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'0.t_trail)
   =
    [%#span28] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a _ tl -> sound'0 tl /\ justified_sound'0 a
      end

  constant self  : Trail'0.t_trail

  constant kv  : (Term'0.t_term, Value'0.t_value)

  function find_justified [#"/Users/xavier/Code/cdsat/src/theory.rs" 619 4 619 46] (self : Trail'0.t_trail) (kv : (Term'0.t_term, Value'0.t_value)) : ()


  goal vc_find_justified : ([%#stheory1] contains'0 self kv)
   -> ([%#stheory0] sound'0 self)
   -> match self with
    | Trail'0.C_Empty -> [%#stheory2] forall l : int . forall a : Assign'0.t_assign . find'0 self kv
    = Option'0.C_Some (a, l)  -> justified_sound'0 a
    | Trail'0.C_Assign a l tl -> if to_pair'0 a = kv then
      [%#stheory2] forall l : int . forall a : Assign'0.t_assign . find'0 self kv = Option'0.C_Some (a, l)
       -> justified_sound'0 a
    else
      (([%#stheory1] contains'0 tl kv) && ([%#stheory0] sound'0 tl))
      /\ (([%#stheory2] forall l : int . forall a : Assign'0.t_assign . find'0 tl kv = Option'0.C_Some (a, l)
       -> justified_sound'0 a)
       -> ([%#stheory2] forall l : int . forall a : Assign'0.t_assign . find'0 self kv = Option'0.C_Some (a, l)
       -> justified_sound'0 a))

    end
end
module Cdsat_Theory_Impl5_Justification_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 484 15 484 31

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 485 15 485 35

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 486 15 486 27

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 487 4 487 54

  let%span stheory4 = "/Users/xavier/Code/cdsat/src/theory.rs" 488 4 488 58

  let%span stheory5 = "/Users/xavier/Code/cdsat/src/theory.rs" 489 4 489 61

  let%span stheory6 = "/Users/xavier/Code/cdsat/src/theory.rs" 616 15 616 27

  let%span stheory7 = "/Users/xavier/Code/cdsat/src/theory.rs" 617 15 617 32

  let%span stheory8 = "/Users/xavier/Code/cdsat/src/theory.rs" 618 4 618 90

  let%span stheory9 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span stheory10 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span stheory11 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span12 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span13 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span14 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span15 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span16 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span17 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span20 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span21 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span22 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span23 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span24 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span25 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span26 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span28 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span29 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span30 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span31 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span32 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span33 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span34 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span35 = "/Users/xavier/Code/cdsat/src/theory.rs" 620 8 629 9

  let%span span36 = "/Users/xavier/Code/cdsat/src/theory.rs" 512 8 515 9

  let%span span37 = "/Users/xavier/Code/cdsat/src/theory.rs" 522 8 525 9

  let%span span38 = "/Users/xavier/Code/cdsat/src/theory.rs" 206 8 206 84

  let%span span39 = "/Users/xavier/Code/cdsat/src/theory.rs" 502 8 505 9

  let%span span40 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span41 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span42 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span43 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span44 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span45 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span46 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span47 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span48 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span49 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span50 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span51 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span52 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span53 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span54 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span55 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span56 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span57 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  let%span span58 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span59 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span12] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span13] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'1 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use Cdsat_Theory_Term_Type as Term'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span14] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  use Cdsat_Theory_Assign_Type as Assign'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span15] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  use Cdsat_Theory_Trail_Type as Trail'0

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span16] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'2 a
      end

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span18] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span17] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span21] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span20] level'0 self <= len'0 self)
  && ([%#span19] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span22] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span23] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use set.Fset

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span26] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span24] inv'0 self)
   -> ([%#span25] invariant'1 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span27] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  use set.Fset

  predicate contains'1 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span28] Fset.mem e self

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span29] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 v a  -> satisfies'0 self a

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span30] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'0 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  use prelude.prelude.Int

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span31] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#stheory11] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#stheory10] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#stheory9] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span33] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span32] invariant_assign'0 self
   -> contains'0 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'0.t_trail)
   =
    [%#span34] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a _ tl -> sound'0 tl /\ justified_sound'0 a
      end

  function find_justified'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 619 4 619 46] (self : Trail'0.t_trail) (kv : (Term'0.t_term, Value'0.t_value)) : ()

   =
    [%#span35] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = kv then () else find_justified'0 tl kv
      end

  axiom find_justified'0_spec : forall self : Trail'0.t_trail, kv : (Term'0.t_term, Value'0.t_value) . ([%#stheory6] sound'0 self)
   -> ([%#stheory7] contains'0 self kv)
   -> ([%#stheory8] forall l : int . forall a : Assign'0.t_assign . find'0 self kv = Option'0.C_Some (a, l)
   -> justified_sound'0 a)

  predicate is_decision'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 511 4 511 54] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span36] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Decision _ _, _) -> true
      | _ -> false
      end

  use set.Fset

  predicate is_input'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 521 4 521 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span37] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Input _ _, _) -> true
      | _ -> false
      end

  predicate entails'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 205 4 205 74] (self : Model'0.t_model) (j : Fset.fset (Term'0.t_term, Value'0.t_value)) (c : (Term'0.t_term, Value'0.t_value))

   =
    [%#span38] invariant'1 self  -> satisfy_set'0 self j  -> satisfies'0 self c

  predicate is_justified'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 501 4 501 55] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span39] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified _ _ _, _) -> true
      | _ -> false
      end

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span40] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span43] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span41] is_bool'0 self)
   -> ([%#span42] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span44] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'0 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'0 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'0.t_trail) =
    [%#span45] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'1 j a  -> contains'0 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span46] Fset.remove a self

  use set.Fset

  use set.Fset

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span49] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span47] invariant_nonneg'0 self)
   -> ([%#span48] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span57] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#span50] invariant_nonneg'0 self)
   -> ([%#span55] set_level'0 self s <= level'0 self)
  && ([%#span54] set_level'0 self s >= 0)
  && ([%#span53] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#span52] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'1 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span51] forall i : (Term'0.t_term, Value'0.t_value) . contains'1 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'0.t_trail) =
    [%#span58] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'0.t_trail) =
    [%#span59] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  constant self  : Trail'0.t_trail

  constant d  : (Term'0.t_term, Value'0.t_value)

  function justification [#"/Users/xavier/Code/cdsat/src/theory.rs" 490 4 490 71] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)


  goal vc_justification : ([%#stheory2] sound'0 self)
   -> ([%#stheory1] is_justified'0 self d)
   -> ([%#stheory0] invariant'0 self)
   -> (([%#stheory7] contains'0 self d) && ([%#stheory6] sound'0 self))
  /\ (([%#stheory8] forall l : int . forall a : Assign'0.t_assign . find'0 self d = Option'0.C_Some (a, l)
   -> justified_sound'0 a)
   -> (let _ = find_justified'0 self d in ([%#stheory11] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#stheory10] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#stheory9] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)
   -> match find'0 self d with
    | Option'0.C_Some (Assign'0.C_Justified j _ _, _) -> let result = j in ([%#stheory5] is_decision'0 self d
     -> result = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
    && ([%#stheory4] is_input'0 self d  -> result = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
    && ([%#stheory3] forall m : Model'0.t_model . inv'0 m  -> entails'0 m result d)
    | _ -> let result = Fset.empty : Fset.fset (Term'0.t_term, Value'0.t_value) in ([%#stheory5] is_decision'0 self d
     -> result = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
    && ([%#stheory4] is_input'0 self d  -> result = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
    && ([%#stheory3] forall m : Model'0.t_model . inv'0 m  -> entails'0 m result d)
    end))
end
module Cdsat_Trail_Remove_Impl
  type t

  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 13 814 14

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 24 814 25

  let%span strail2 = "/Users/xavier/Code/cdsat/src/trail.rs" 809 0 809 73

  let%span strail3 = "/Users/xavier/Code/cdsat/src/trail.rs" 810 0 810 63

  let%span strail4 = "/Users/xavier/Code/cdsat/src/trail.rs" 811 0 811 55

  let%span strail5 = "/Users/xavier/Code/cdsat/src/trail.rs" 812 0 812 52

  let%span strail6 = "/Users/xavier/Code/cdsat/src/trail.rs" 813 10 813 33

  let%span strail7 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 33 814 39

  let%span strail8 = "/Users/xavier/Code/cdsat/src/trail.rs" 808 10 808 17

  let%span span9 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 129 8 129 78

  predicate invariant'1 (self : t)

  predicate inv'1 (_x : t)

  axiom inv'1 : forall x : t . inv'1 x = true

  use seq.Seq

  predicate invariant'0 (self : Seq.seq t)

  predicate inv'0 (_x : Seq.seq t)

  axiom inv'0 : forall x : Seq.seq t . inv'0 x = true

  use seq.Seq

  use prelude.seq_ext.SeqExt

  use seq.Seq

  use seq.Seq

  use prelude.prelude.Int

  use seq.Seq

  predicate contains'0 (self : Seq.seq t) (e : t) =
    [%#span9] exists i : int . 0 <= i /\ i < Seq.length self /\ Seq.get self i = e

  constant s  : Seq.seq t

  constant e  : t

  function remove [#"/Users/xavier/Code/cdsat/src/trail.rs" 814 0 814 39] (s : Seq.seq t) (e : t) : Seq.seq t

  goal vc_remove : ([%#strail1] inv'1 e)
   -> ([%#strail0] inv'0 s)
   -> (if s = (Seq.empty : Seq.seq t) then
    let result = Seq.empty : Seq.seq t in ([%#strail7] inv'0 result)
    && ([%#strail6] Seq.length result <= Seq.length s)
    && ([%#strail5] contains'0 s e  -> Seq.length result < Seq.length s)
    && ([%#strail4] forall t : t . inv'1 t  -> contains'0 result t  -> t <> e)
    && ([%#strail3] forall t : t . inv'1 t  -> contains'0 result t  -> contains'0 s t)
    && ([%#strail2] forall t : t . inv'1 t  -> contains'0 s t  -> e <> t  -> contains'0 result t)
  else
    if Seq.get s (Seq.length s - 1) = e then
      ((([%#strail1] inv'1 e) && ([%#strail0] inv'0 (SeqExt.subsequence s 0 (Seq.length s - 1))))
      /\ 0 <= ([%#strail8] Seq.length s)
      /\ ([%#strail8] Seq.length (SeqExt.subsequence s 0 (Seq.length s - 1))) < ([%#strail8] Seq.length s))
      /\ (([%#strail7] inv'0 (remove (SeqExt.subsequence s 0 (Seq.length s - 1)) e))
      && ([%#strail6] Seq.length (remove (SeqExt.subsequence s 0 (Seq.length s - 1)) e)
      <= Seq.length (SeqExt.subsequence s 0 (Seq.length s - 1)))
      && ([%#strail5] contains'0 (SeqExt.subsequence s 0 (Seq.length s - 1)) e
       -> Seq.length (remove (SeqExt.subsequence s 0 (Seq.length s - 1)) e)
      < Seq.length (SeqExt.subsequence s 0 (Seq.length s - 1)))
      && ([%#strail4] forall t : t . inv'1 t
       -> contains'0 (remove (SeqExt.subsequence s 0 (Seq.length s - 1)) e) t  -> t <> e)
      && ([%#strail3] forall t : t . inv'1 t
       -> contains'0 (remove (SeqExt.subsequence s 0 (Seq.length s - 1)) e) t
       -> contains'0 (SeqExt.subsequence s 0 (Seq.length s - 1)) t)
      && ([%#strail2] forall t : t . inv'1 t
       -> contains'0 (SeqExt.subsequence s 0 (Seq.length s - 1)) t
       -> e <> t  -> contains'0 (remove (SeqExt.subsequence s 0 (Seq.length s - 1)) e) t)
       -> (let result = remove (SeqExt.subsequence s 0 (Seq.length s - 1)) e in ([%#strail7] inv'0 result)
      && ([%#strail6] Seq.length result <= Seq.length s)
      && ([%#strail5] contains'0 s e  -> Seq.length result < Seq.length s)
      && ([%#strail4] forall t : t . inv'1 t  -> contains'0 result t  -> t <> e)
      && ([%#strail3] forall t : t . inv'1 t  -> contains'0 result t  -> contains'0 s t)
      && ([%#strail2] forall t : t . inv'1 t  -> contains'0 s t  -> e <> t  -> contains'0 result t)))
    else
      ((([%#strail1] inv'1 e) && ([%#strail0] inv'0 (SeqExt.subsequence s 0 (Seq.length s - 1))))
      /\ 0 <= ([%#strail8] Seq.length s)
      /\ ([%#strail8] Seq.length (SeqExt.subsequence s 0 (Seq.length s - 1))) < ([%#strail8] Seq.length s))
      /\ (([%#strail7] inv'0 (remove (SeqExt.subsequence s 0 (Seq.length s - 1)) e))
      && ([%#strail6] Seq.length (remove (SeqExt.subsequence s 0 (Seq.length s - 1)) e)
      <= Seq.length (SeqExt.subsequence s 0 (Seq.length s - 1)))
      && ([%#strail5] contains'0 (SeqExt.subsequence s 0 (Seq.length s - 1)) e
       -> Seq.length (remove (SeqExt.subsequence s 0 (Seq.length s - 1)) e)
      < Seq.length (SeqExt.subsequence s 0 (Seq.length s - 1)))
      && ([%#strail4] forall t : t . inv'1 t
       -> contains'0 (remove (SeqExt.subsequence s 0 (Seq.length s - 1)) e) t  -> t <> e)
      && ([%#strail3] forall t : t . inv'1 t
       -> contains'0 (remove (SeqExt.subsequence s 0 (Seq.length s - 1)) e) t
       -> contains'0 (SeqExt.subsequence s 0 (Seq.length s - 1)) t)
      && ([%#strail2] forall t : t . inv'1 t
       -> contains'0 (SeqExt.subsequence s 0 (Seq.length s - 1)) t
       -> e <> t  -> contains'0 (remove (SeqExt.subsequence s 0 (Seq.length s - 1)) e) t)
       -> (let result = Seq.snoc (remove (SeqExt.subsequence s 0 (Seq.length s - 1)) e) (Seq.get s (Seq.length s
      - 1)) in ([%#strail7] inv'0 result)
      && ([%#strail6] Seq.length result <= Seq.length s)
      && ([%#strail5] contains'0 s e  -> Seq.length result < Seq.length s)
      && ([%#strail4] forall t : t . inv'1 t  -> contains'0 result t  -> t <> e)
      && ([%#strail3] forall t : t . inv'1 t  -> contains'0 result t  -> contains'0 s t)
      && ([%#strail2] forall t : t . inv'1 t  -> contains'0 s t  -> e <> t  -> contains'0 result t)))

  )
end
module Cdsat_Trail_Impl9_AbstractJustification_Impl
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 313 4 313 82

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 314 14 314 40

  let%span strail2 = "/Users/xavier/Code/cdsat/src/trail.rs" 315 4 315 115

  let%span strail3 = "/Users/xavier/Code/cdsat/src/trail.rs" 316 4 316 115

  let%span strail4 = "/Users/xavier/Code/cdsat/src/trail.rs" 317 4 317 101

  let%span strail5 = "/Users/xavier/Code/cdsat/src/trail.rs" 312 14 312 24

  let%span strail6 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 13 814 14

  let%span strail7 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 24 814 25

  let%span strail8 = "/Users/xavier/Code/cdsat/src/trail.rs" 809 0 809 73

  let%span strail9 = "/Users/xavier/Code/cdsat/src/trail.rs" 810 0 810 63

  let%span strail10 = "/Users/xavier/Code/cdsat/src/trail.rs" 811 0 811 55

  let%span strail11 = "/Users/xavier/Code/cdsat/src/trail.rs" 812 0 812 52

  let%span strail12 = "/Users/xavier/Code/cdsat/src/trail.rs" 813 10 813 33

  let%span strail13 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 33 814 39

  let%span strail14 = "/Users/xavier/Code/cdsat/src/trail.rs" 808 10 808 17

  let%span span15 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span16 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span17 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span18 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span19 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span20 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span21 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span22 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 129 8 129 78

  let%span span23 = "/Users/xavier/Code/cdsat/src/trail.rs" 807 0 807 8

  let%span span24 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span25 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span26 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span27 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span28 = "/Users/xavier/Code/cdsat/src/term.rs" 195 8 225 9

  let%span span29 = "/Users/xavier/Code/cdsat/src/term.rs" 180 8 180 25

  let%span span30 = "/Users/xavier/Code/cdsat/src/trail.rs" 726 8 726 61

  let%span span31 = "/Users/xavier/Code/cdsat/src/trail.rs" 646 8 648 9

  let%span span32 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span33 = "/Users/xavier/Code/cdsat/src/trail.rs" 291 12 291 92

  use Cdsat_Trail_Assignment_Type as Assignment'0

  use seq.Seq

  predicate invariant'5 (self : Seq.seq (Assignment'0.t_assignment)) =
    [%#span15] true

  predicate inv'5 (_x : Seq.seq (Assignment'0.t_assignment))

  axiom inv'5 : forall x : Seq.seq (Assignment'0.t_assignment) . inv'5 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  constant max'0 : usize = [%#span16] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'4 (_x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

  function shallow_model'1 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) : Seq.seq (Assignment'0.t_assignment)


  axiom shallow_model'1_spec : forall self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . ([%#span17] inv'4 self)
   -> ([%#span19] inv'5 (shallow_model'1 self))
  && ([%#span18] Seq.length (shallow_model'1 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'4 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span20] inv'5 (shallow_model'1 self)

  axiom inv'4 : forall x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . inv'4 x = true

  predicate invariant'3 (self : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span15] true

  predicate inv'3 (_x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'3 : forall x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'3 x = true

  use seq.Seq

  predicate inv'2 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  function shallow_model'0 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))


  axiom shallow_model'0_spec : forall self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . ([%#span17] inv'2 self)
   -> ([%#span19] inv'3 (shallow_model'0 self))
  && ([%#span18] Seq.length (shallow_model'0 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'2 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span20] inv'3 (shallow_model'0 self)

  axiom inv'2 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'2 x
  = true

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  predicate invariant'1 (self : TrailIndex'0.t_trailindex) =
    [%#span15] true

  predicate inv'1 (_x : TrailIndex'0.t_trailindex)

  axiom inv'1 : forall x : TrailIndex'0.t_trailindex . inv'1 x = true

  predicate invariant'0 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span15] true

  predicate inv'0 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'0 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'0 x = true

  use set.Fset

  use set.Fset

  use Cdsat_Theory_Value_Type as Value'0

  use Cdsat_Theory_Term_Type as Term'0

  use set.Fset

  function insert'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span21] Fset.add e self

  use seq.Seq

  use prelude.seq_ext.SeqExt

  use seq.Seq

  use seq.Seq

  use seq.Seq

  predicate contains'2 (self : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) =
    [%#span22] exists i : int . 0 <= i /\ i < Seq.length self /\ Seq.get self i = e

  function remove'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 814 0 814 39] (s : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom remove'0_def : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . remove'0 s e
  = ([%#span23] if s = (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) then
    Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)
  else
    if Seq.get s (Seq.length s - 1) = e then
      remove'0 (SeqExt.subsequence s 0 (Seq.length s - 1)) e
    else
      Seq.snoc (remove'0 (SeqExt.subsequence s 0 (Seq.length s - 1)) e) (Seq.get s (Seq.length s - 1))

  )

  axiom remove'0_spec : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . ([%#strail6] inv'0 s)
   -> ([%#strail7] inv'1 e)
   -> ([%#strail13] inv'0 (remove'0 s e))
  && ([%#strail12] Seq.length (remove'0 s e) <= Seq.length s)
  && ([%#strail11] contains'2 s e  -> Seq.length (remove'0 s e) < Seq.length s)
  && ([%#strail10] forall t : TrailIndex'0.t_trailindex . inv'1 t  -> contains'2 (remove'0 s e) t  -> t <> e)
  && ([%#strail9] forall t : TrailIndex'0.t_trailindex . inv'1 t  -> contains'2 (remove'0 s e) t  -> contains'2 s t)
  && ([%#strail8] forall t : TrailIndex'0.t_trailindex . inv'1 t
   -> contains'2 s t  -> e <> t  -> contains'2 (remove'0 s e) t)

  use Cdsat_Trail_Trail_Type as Trail'0

  use prelude.prelude.Borrow

  use Cdsat_Term_Value_Type as Value'1

  use Cdsat_Term_Term_Type as Term'1

  use prelude.prelude.Real

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  function deep_model'4 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span24] match self with
      | Value'1.C_Bool b -> Value'0.C_Bool b
      | Value'1.C_Rat br -> Value'0.C_Rat (deep_model'4 br)
      end

  function shallow_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span25] deep_model'1 self

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  use Cdsat_Theory_Sort_Type as Sort'1

  use Cdsat_Term_Sort_Type as Sort'0

  use Cdsat_Theory_Var_Type as Var'0

  function deep_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'0.t_sort) : Sort'1.t_sort =
    [%#span26] match self with
      | Sort'0.C_Boolean -> Sort'1.C_Boolean
      | Sort'0.C_Rational -> Sort'1.C_Rational
      end

  function deep_model'2 (self : usize) : int =
    [%#span27] UIntSize.to_int self

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 193 4 193 44] (self : Term'1.t_term) : Term'0.t_term =
    [%#span28] match self with
      | Term'1.C_Variable v s -> Term'0.C_Variable (Var'0.C_Var (deep_model'2 v) (deep_model'3 s))
      | Term'1.C_Value v -> Term'0.C_Value (deep_model'1 v)
      | Term'1.C_Plus l r -> Term'0.C_Plus (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Eq l r -> Term'0.C_Eq (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Conj l r -> Term'0.C_Conj (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Disj l r -> Term'0.C_Disj (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Neg t -> Term'0.C_Neg (deep_model'0 t)
      | Term'1.C_Impl l r -> Term'0.C_Disj (Term'0.C_Neg (deep_model'0 l)) (deep_model'0 r)
      | Term'1.C_Times l r -> Term'0.C_Plus (Term'0.C_Value (Value'0.C_Rat (deep_model'4 l))) (deep_model'0 r)
      | Term'1.C_Lt l r -> Term'0.C_Eq (deep_model'0 l) (deep_model'0 r)
      end

  function shallow_model'2 [#"/Users/xavier/Code/cdsat/src/term.rs" 179 4 179 50] (self : Term'1.t_term) : Term'0.t_term
   =
    [%#span29] deep_model'0 self

  function term_value'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 725 4 725 61] (self : Assignment'0.t_assignment) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span30] (shallow_model'2 (Cdsat_Trail_Assignment_Type.assignment_term self), shallow_model'3 (Cdsat_Trail_Assignment_Type.assignment_val self))

  use seq.Seq

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  use seq.Seq

  use Cdsat_Trail_Trail_Type as Cdsat_Trail_Trail_Type

  function index_logic'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 645 4 645 77] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span31] term_value'0 (Seq.get (shallow_model'1 (Seq.get (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)))) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)))

  use set.Fset

  predicate contains'1 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span32] Fset.mem e self

  use set.Fset

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 289 4 289 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex)

   =
    [%#span33] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)
    < Seq.length (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self))
    /\ UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)
    < Seq.length (shallow_model'1 (Seq.get (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))))

  constant self  : Trail'0.t_trail

  constant just  : Seq.seq (TrailIndex'0.t_trailindex)

  function abstract_justification [#"/Users/xavier/Code/cdsat/src/trail.rs" 318 4 321 44] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) : Fset.fset (Term'0.t_term, Value'0.t_value)


  goal vc_abstract_justification : ([%#strail0] forall i : int . 0 <= i /\ i < Seq.length just
   -> contains'0 self (Seq.get just i))
   -> (if Seq.length just > 0 then
    (([%#strail7] inv'1 (Seq.get just 0)) && ([%#strail6] inv'0 just))
    /\ (([%#strail13] inv'0 (remove'0 just (Seq.get just 0)))
    && ([%#strail12] Seq.length (remove'0 just (Seq.get just 0)) <= Seq.length just)
    && ([%#strail11] contains'2 just (Seq.get just 0)  -> Seq.length (remove'0 just (Seq.get just 0)) < Seq.length just)
    && ([%#strail10] forall t : TrailIndex'0.t_trailindex . inv'1 t
     -> contains'2 (remove'0 just (Seq.get just 0)) t  -> t <> Seq.get just 0)
    && ([%#strail9] forall t : TrailIndex'0.t_trailindex . inv'1 t
     -> contains'2 (remove'0 just (Seq.get just 0)) t  -> contains'2 just t)
    && ([%#strail8] forall t : TrailIndex'0.t_trailindex . inv'1 t
     -> contains'2 just t  -> Seq.get just 0 <> t  -> contains'2 (remove'0 just (Seq.get just 0)) t)
     -> (([%#strail0] forall i : int . 0 <= i /\ i < Seq.length (remove'0 just (Seq.get just 0))
     -> contains'0 self (Seq.get (remove'0 just (Seq.get just 0)) i))
    /\ 0 <= ([%#strail5] Seq.length just)
    /\ ([%#strail5] Seq.length (remove'0 just (Seq.get just 0))) < ([%#strail5] Seq.length just))
    /\ (([%#strail4] forall i : int . 0 <= i /\ i < Seq.length (remove'0 just (Seq.get just 0))
     -> contains'1 (abstract_justification self (remove'0 just (Seq.get just 0))) (index_logic'0 self (Seq.get (remove'0 just (Seq.get just 0)) i)))
    && ([%#strail3] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (abstract_justification self (remove'0 just (Seq.get just 0))) a
     -> (exists ix : TrailIndex'0.t_trailindex . contains'2 (remove'0 just (Seq.get just 0)) ix
    /\ a = index_logic'0 self ix))
    && ([%#strail2] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (abstract_justification self (remove'0 just (Seq.get just 0))) a
     -> (exists ix : TrailIndex'0.t_trailindex . contains'0 self ix /\ a = index_logic'0 self ix))
    && ([%#strail1] Fset.cardinal (abstract_justification self (remove'0 just (Seq.get just 0)))
    <= Seq.length (remove'0 just (Seq.get just 0)))
     -> (let set = abstract_justification self (remove'0 just (Seq.get just 0)) in let a = index_logic'0 self (Seq.get just 0) in let result = insert'0 set a in ([%#strail4] forall i : int . 0
    <= i
    /\ i < Seq.length just  -> contains'1 result (index_logic'0 self (Seq.get just i)))
    && ([%#strail3] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 result a
     -> (exists ix : TrailIndex'0.t_trailindex . contains'2 just ix /\ a = index_logic'0 self ix))
    && ([%#strail2] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 result a
     -> (exists ix : TrailIndex'0.t_trailindex . contains'0 self ix /\ a = index_logic'0 self ix))
    && ([%#strail1] Fset.cardinal result <= Seq.length just))))
  else
    let result = Fset.empty : Fset.fset (Term'0.t_term, Value'0.t_value) in ([%#strail4] forall i : int . 0 <= i
    /\ i < Seq.length just  -> contains'1 result (index_logic'0 self (Seq.get just i)))
    && ([%#strail3] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 result a
     -> (exists ix : TrailIndex'0.t_trailindex . contains'2 just ix /\ a = index_logic'0 self ix))
    && ([%#strail2] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 result a
     -> (exists ix : TrailIndex'0.t_trailindex . contains'0 self ix /\ a = index_logic'0 self ix))
    && ([%#strail1] Fset.cardinal result <= Seq.length just)
  )
end
module Cdsat_Bool_BoolTheory_Type
  type t_booltheory  =
    | C_BoolTheory

  function any_l (_ : 'b) : 'a

  let rec t_booltheory (input:t_booltheory) (ret  )= any
    [ good -> {C_BoolTheory  = input} (! ret) | bad -> {C_BoolTheory  <> input} {false} any ]

end
module Core_Result_Result_Type
  type t_result 't 'e =
    | C_Ok 't
    | C_Err 'e

  function any_l (_ : 'b) : 'a

  let rec ok < 't > < 'e > (input:t_result 't 'e) (ret  (field_0:'t))= any
    [ good (field_0:'t)-> {C_Ok field_0 = input} (! ret {field_0})
    | bad (field_0:'t)-> {C_Ok field_0 <> input} {false} any ]


  let rec err < 't > < 'e > (input:t_result 't 'e) (ret  (field_0:'e))= any
    [ good (field_0:'e)-> {C_Err field_0 = input} (! ret {field_0})
    | bad (field_0:'e)-> {C_Err field_0 <> input} {false} any ]

end
module Cdsat_Concrete_ExtendResult_Type
  use Cdsat_Term_Value_Type as Value'0

  use Cdsat_Term_Term_Type as Term'0

  use Alloc_Alloc_Global_Type as Global'0

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use Alloc_Vec_Vec_Type as Vec'0

  type t_extendresult  =
    | C_Conflict (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))
    | C_Decision (Term'0.t_term) (Value'0.t_value)
    | C_Satisfied

  function any_l (_ : 'b) : 'a

  let rec conflict (input:t_extendresult) (ret  (field_0:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)))= any
    [ good (field_0:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> {C_Conflict field_0 = input}
      (! ret {field_0})
    | bad (field_0:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> {C_Conflict field_0 <> input}
      {false}
      any ]


  let rec decision (input:t_extendresult) (ret  (field_0:Term'0.t_term) (field_1:Value'0.t_value))= any
    [ good (field_0:Term'0.t_term) (field_1:Value'0.t_value)-> {C_Decision field_0 field_1 = input}
      (! ret {field_0} {field_1})
    | bad (field_0:Term'0.t_term) (field_1:Value'0.t_value)-> {C_Decision field_0 field_1 <> input} {false} any ]


  let rec satisfied (input:t_extendresult) (ret  )= any
    [ good -> {C_Satisfied  = input} (! ret) | bad -> {C_Satisfied  <> input} {false} any ]

end
module Cdsat_Trail_Impl9_Indices
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 653 56 653 57

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 653 59 653 60

  let%span strail2 = "/Users/xavier/Code/cdsat/src/trail.rs" 651 14 651 34

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 26 20 26 34

  use Cdsat_Trail_IndexIterator_Type as Cdsat_Trail_IndexIterator_Type

  use prelude.prelude.Intrinsic

  use prelude.prelude.Borrow

  use Cdsat_Trail_Trail_Type as Trail'0

  predicate resolve'0 (self : borrowed (Trail'0.t_trail)) =
    [%#span3] self.final = self.current

  use Cdsat_Trail_IndexIterator_Type as IndexIterator'0

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  let rec indices (self:borrowed (Trail'0.t_trail)) (return'  (ret:IndexIterator'0.t_indexiterator))= (! bb0
    [ bb0 = s0
      [ s0 = Borrow.borrow_final <Trail'0.t_trail> {self.current} {Borrow.get_id self}
          (fun (_ret':borrowed (Trail'0.t_trail)) ->
             [ &_3 <- _ret' ]
             [ &self <- { self with current = _3.final ; } ]
            s1)
      | s1 =  [ &_4 <- TrailIndex'0.C_TrailIndex ([%#strail0] (0 : usize)) ([%#strail1] (0 : usize)) ] s2
      | s2 =  [ &_0 <- IndexIterator'0.C_IndexIterator _3 _4 ]
        (any
        [ any_ (_any:borrowed (Trail'0.t_trail))-> (!  [ &_3 <- _any ]
          (any [ any_ (_any:TrailIndex'0.t_trailindex)-> (!  [ &_4 <- _any ] s3) ] )) ]
        )
      | s3 = -{resolve'0 self}- s4
      | s4 = return' {_0} ]
       ]
    )
    [ & _0 : IndexIterator'0.t_indexiterator = any_l ()
    | & self : borrowed (Trail'0.t_trail) = self
    | & _3 : borrowed (Trail'0.t_trail) = any_l ()
    | & _4 : TrailIndex'0.t_trailindex = any_l () ]

    [ return' (result:IndexIterator'0.t_indexiterator)-> {[@expl:postcondition] [%#strail2] Cdsat_Trail_IndexIterator_Type.indexiterator_trail result
      = self}
      (! return' {result}) ]

end
module Cdsat_Trail_Impl10_Next
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 699 29 699 30

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 703 25 703 26

  let%span strail2 = "/Users/xavier/Code/cdsat/src/trail.rs" 704 24 704 25

  let%span strail3 = "/Users/xavier/Code/cdsat/src/trail.rs" 687 14 687 44

  let%span strail4 = "/Users/xavier/Code/cdsat/src/trail.rs" 688 14 691 5

  let%span span5 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span6 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span7 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span8 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span9 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span10 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span11 = "/Users/xavier/Code/cdsat/src/trail.rs" 291 12 291 92

  let%span span12 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 90 8 90 31

  let%span span13 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2255 16 2255 20

  let%span span14 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 78 26 78 48

  let%span span15 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 122 20 122 37

  let%span span16 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 115 20 115 37

  let%span span17 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 156 27 156 46

  let%span span18 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2906 14 2906 18

  let%span span19 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2906 20 2906 25

  let%span span20 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 157 26 157 54

  let%span span21 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2906 4 2906 46

  let%span span22 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 26 20 26 34

  use Cdsat_Trail_Assignment_Type as Assignment'0

  use seq.Seq

  predicate invariant'6 (self : Seq.seq (Assignment'0.t_assignment)) =
    [%#span5] true

  predicate inv'6 (_x : Seq.seq (Assignment'0.t_assignment))

  axiom inv'6 : forall x : Seq.seq (Assignment'0.t_assignment) . inv'6 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  constant max'0 : usize = [%#span6] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'5 (_x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

  function shallow_model'3 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) : Seq.seq (Assignment'0.t_assignment)


  axiom shallow_model'3_spec : forall self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . ([%#span7] inv'5 self)
   -> ([%#span9] inv'6 (shallow_model'3 self))
  && ([%#span8] Seq.length (shallow_model'3 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'5 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span10] inv'6 (shallow_model'3 self)

  axiom inv'5 : forall x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . inv'5 x = true

  predicate invariant'4 (self : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span5] true

  predicate inv'4 (_x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'4 : forall x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'4 x = true

  use seq.Seq

  predicate inv'3 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  function shallow_model'2 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))


  axiom shallow_model'2_spec : forall self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . ([%#span7] inv'3 self)
   -> ([%#span9] inv'4 (shallow_model'2 self))
  && ([%#span8] Seq.length (shallow_model'2 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'3 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span10] inv'4 (shallow_model'2 self)

  axiom inv'3 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'3 x
  = true

  predicate invariant'2 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span5] true

  predicate inv'2 (_x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

  axiom inv'2 : forall x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . inv'2 x = true

  predicate invariant'1 (self : usize) =
    [%#span5] true

  predicate inv'1 (_x : usize)

  axiom inv'1 : forall x : usize . inv'1 x = true

  predicate invariant'0 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span5] true

  predicate inv'0 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  axiom inv'0 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'0 x
  = true

  use seq.Seq

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  use Cdsat_Trail_Trail_Type as Cdsat_Trail_Trail_Type

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use Cdsat_Trail_Trail_Type as Trail'0

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 289 4 289 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex)

   =
    [%#span11] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)
    < Seq.length (shallow_model'2 (Cdsat_Trail_Trail_Type.trail_assignments self))
    /\ UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)
    < Seq.length (shallow_model'3 (Seq.get (shallow_model'2 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))))

  use Cdsat_Trail_IndexIterator_Type as Cdsat_Trail_IndexIterator_Type

  use prelude.prelude.Intrinsic

  use prelude.prelude.Borrow

  function shallow_model'1 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) : Seq.seq (Assignment'0.t_assignment)

   =
    [%#span12] shallow_model'3 self

  let rec len'1 (self:Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (return'  (ret:usize))= {[@expl:precondition] [%#span13] inv'2 self}
    any
    [ return' (result:usize)-> {[%#span14] UIntSize.to_int result = Seq.length (shallow_model'1 self)}
      (! return' {result}) ]


  use prelude.prelude.Slice

  predicate has_value'0 [@inline:trivial] (self : usize) (seq : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) (out : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

   =
    [%#span15] Seq.get seq (UIntSize.to_int self) = out

  predicate in_bounds'0 [@inline:trivial] (self : usize) (seq : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

   =
    [%#span16] UIntSize.to_int self < Seq.length seq

  function shallow_model'0 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

   =
    [%#span12] shallow_model'2 self

  let rec index'0 (self:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (index:usize) (return'  (ret:Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))= {[@expl:precondition] [%#span19] inv'1 index}
    {[@expl:precondition] [%#span18] inv'0 self}
    {[@expl:precondition] [%#span17] in_bounds'0 index (shallow_model'0 self)}
    any
    [ return' (result:Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))-> {[%#span21] inv'2 result}
      {[%#span20] has_value'0 index (shallow_model'0 self) result}
      (! return' {result}) ]


  use Core_Option_Option_Type as Option'0

  use Cdsat_Trail_IndexIterator_Type as IndexIterator'0

  predicate resolve'0 (self : borrowed (IndexIterator'0.t_indexiterator)) =
    [%#span22] self.final = self.current

  let rec len'0 (self:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (return'  (ret:usize))= {[@expl:precondition] [%#span13] inv'0 self}
    any
    [ return' (result:usize)-> {[%#span14] UIntSize.to_int result = Seq.length (shallow_model'0 self)}
      (! return' {result}) ]


  use Cdsat_Theory_Trail_Type as Trail'1

  use prelude.prelude.Snapshot

  let rec next (self:borrowed (IndexIterator'0.t_indexiterator)) (return'  (ret:Option'0.t_option (TrailIndex'0.t_trailindex)))= (! bb0
    [ bb0 = s0
      [ s0 = IndexIterator'0.t_indexiterator {self.current}
          (fun (rtrail'0:borrowed (Trail'0.t_trail)) (rcur_ix'0:TrailIndex'0.t_trailindex) ->
            Trail'0.t_trail {rtrail'0.current}
              (fun (rassignments'0:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (rlevel'0:usize) (rghost'0:Snapshot.snap_ty (Trail'1.t_trail)) (rnum_assign'0:usize) ->
                len'0 {rassignments'0} (fun (_ret':usize) ->  [ &_7 <- _ret' ] s1)))
      | s1 = bb1 ]

    | bb1 = s0
      [ s0 = IndexIterator'0.t_indexiterator {self.current}
          (fun (rtrail'0:borrowed (Trail'0.t_trail)) (rcur_ix'0:TrailIndex'0.t_trailindex) ->
            TrailIndex'0.t_trailindex {rcur_ix'0}
              (fun (r0'0:usize) (r1'0:usize) ->
                UIntSize.ge {r0'0} {_7}
                  (fun (_ret':bool) ->  [ &_5 <- _ret' ] (any [ any_ (_any:usize)-> (!  [ &_7 <- _any ] s1) ] ))))
      | s1 = any [ br0 -> {_5 = false} (! bb3) | br1 -> {_5} (! bb2) ]  ]

    | bb2 = s0 [ s0 = -{resolve'0 self}- s1 | s1 =  [ &_0 <- Option'0.C_None ] s2 | s2 = bb9 ]
    | bb3 = s0
      [ s0 = IndexIterator'0.t_indexiterator {self.current}
          (fun (rtrail'0:borrowed (Trail'0.t_trail)) (rcur_ix'0:TrailIndex'0.t_trailindex) ->
            Trail'0.t_trail {rtrail'0.current}
              (fun (rassignments'0:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (rlevel'0:usize) (rghost'0:Snapshot.snap_ty (Trail'1.t_trail)) (rnum_assign'0:usize) ->
                IndexIterator'0.t_indexiterator {self.current}
                  (fun (rtrail'1:borrowed (Trail'0.t_trail)) (rcur_ix'1:TrailIndex'0.t_trailindex) ->
                    TrailIndex'0.t_trailindex {rcur_ix'1}
                      (fun (r0'0:usize) (r1'0:usize) ->
                        index'0 {rassignments'0} {r0'0}
                          (fun (_ret':Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) ->
                             [ &_15 <- _ret' ]
                            s1)))))
      | s1 = bb4 ]

    | bb4 = s0 [ s0 = len'1 {_15} (fun (_ret':usize) ->  [ &_13 <- _ret' ] s1) | s1 = bb5 ]
    | bb5 = s0
      [ s0 = IndexIterator'0.t_indexiterator {self.current}
          (fun (rtrail'0:borrowed (Trail'0.t_trail)) (rcur_ix'0:TrailIndex'0.t_trailindex) ->
            TrailIndex'0.t_trailindex {rcur_ix'0}
              (fun (r0'0:usize) (r1'0:usize) ->
                UIntSize.lt {r1'0} {_13}
                  (fun (_ret':bool) ->  [ &_11 <- _ret' ] (any [ any_ (_any:usize)-> (!  [ &_13 <- _any ] s1) ] ))))
      | s1 = any [ br0 -> {_11 = false} (! bb7) | br1 -> {_11} (! bb6) ]  ]

    | bb6 = s0
      [ s0 = IndexIterator'0.t_indexiterator {self.current}
          (fun (rtrail'0:borrowed (Trail'0.t_trail)) (rcur_ix'0:TrailIndex'0.t_trailindex) ->  [ &res <- rcur_ix'0 ] s1)
      | s1 = IndexIterator'0.t_indexiterator {self.current}
          (fun (rtrail'1:borrowed (Trail'0.t_trail)) (rcur_ix'1:TrailIndex'0.t_trailindex) ->
            TrailIndex'0.t_trailindex {rcur_ix'1}
              (fun (r0'0:usize) (r1'0:usize) ->
                UIntSize.add {r1'0} {[%#strail0] (1 : usize)}
                  (fun (_ret':usize) ->
                    IndexIterator'0.t_indexiterator {self.current}
                      (fun (l_trail'0:borrowed (Trail'0.t_trail)) (l_cur_ix'0:TrailIndex'0.t_trailindex) ->
                        TrailIndex'0.t_trailindex {l_cur_ix'0}
                          (fun (l_0'0:usize) (l_1'0:usize) ->

                            [ &self <- { self with current = IndexIterator'0.C_IndexIterator l_trail'0 (TrailIndex'0.C_TrailIndex l_0'0 _ret') ; } ]

                            s2)))))
      | s2 = -{resolve'0 self}- s3
      | s3 =  [ &_0 <- Option'0.C_Some res ] s4
      | s4 = bb9 ]

    | bb7 = s0
      [ s0 = IndexIterator'0.t_indexiterator {self.current}
          (fun (rtrail'0:borrowed (Trail'0.t_trail)) (rcur_ix'0:TrailIndex'0.t_trailindex) ->
            TrailIndex'0.t_trailindex {rcur_ix'0}
              (fun (r0'0:usize) (r1'0:usize) ->
                UIntSize.add {r0'0} {[%#strail1] (1 : usize)}
                  (fun (_ret':usize) ->
                    IndexIterator'0.t_indexiterator {self.current}
                      (fun (l_trail'0:borrowed (Trail'0.t_trail)) (l_cur_ix'0:TrailIndex'0.t_trailindex) ->
                        TrailIndex'0.t_trailindex {l_cur_ix'0}
                          (fun (l_0'0:usize) (l_1'0:usize) ->

                            [ &self <- { self with current = IndexIterator'0.C_IndexIterator l_trail'0 (TrailIndex'0.C_TrailIndex _ret' l_1'0) ; } ]

                            s1)))))
      | s1 = IndexIterator'0.t_indexiterator {self.current}
          (fun (l_trail'1:borrowed (Trail'0.t_trail)) (l_cur_ix'1:TrailIndex'0.t_trailindex) ->
            TrailIndex'0.t_trailindex {l_cur_ix'1}
              (fun (l_0'1:usize) (l_1'1:usize) ->

                [ &self <- { self with current = IndexIterator'0.C_IndexIterator l_trail'1 (TrailIndex'0.C_TrailIndex l_0'1 ([%#strail2] (0 : usize))) ; } ]

                s2))
      | s2 = Borrow.borrow_final <IndexIterator'0.t_indexiterator> {self.current} {Borrow.get_id self}
          (fun (_ret':borrowed (IndexIterator'0.t_indexiterator)) ->
             [ &_21 <- _ret' ]
             [ &self <- { self with current = _21.final ; } ]
            s3)
      | s3 = next {_21} (fun (_ret':Option'0.t_option (TrailIndex'0.t_trailindex)) ->  [ &_0 <- _ret' ] s4)
      | s4 = bb8 ]

    | bb8 = s0 [ s0 = -{resolve'0 self}- s1 | s1 = bb9 ]
    | bb9 = return' {_0} ]
    )
    [ & _0 : Option'0.t_option (TrailIndex'0.t_trailindex) = any_l ()
    | & self : borrowed (IndexIterator'0.t_indexiterator) = self
    | & _5 : bool = any_l ()
    | & _7 : usize = any_l ()
    | & _11 : bool = any_l ()
    | & _13 : usize = any_l ()
    | & _15 : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) = any_l ()
    | & res : TrailIndex'0.t_trailindex = any_l ()
    | & _21 : borrowed (IndexIterator'0.t_indexiterator) = any_l () ]

    [ return' (result:Option'0.t_option (TrailIndex'0.t_trailindex))-> {[@expl:postcondition] [%#strail4] match result with
        | Option'0.C_Some ix -> contains'0 (Cdsat_Trail_IndexIterator_Type.indexiterator_trail self.current).current ix
        | Option'0.C_None -> true
        end}
      {[@expl:postcondition] [%#strail3] Cdsat_Trail_IndexIterator_Type.indexiterator_trail self.final
      = Cdsat_Trail_IndexIterator_Type.indexiterator_trail self.current}
      (! return' {result}) ]

end
module Cdsat_Trail_Impl10_Trail
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 681 14 681 36

  use Cdsat_Trail_IndexIterator_Type as Cdsat_Trail_IndexIterator_Type

  use prelude.prelude.Intrinsic

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use Cdsat_Trail_Trail_Type as Trail'0

  use prelude.prelude.Borrow

  use Cdsat_Trail_IndexIterator_Type as IndexIterator'0

  let rec trail (self:IndexIterator'0.t_indexiterator) (return'  (ret:Trail'0.t_trail))= (! bb0
    [ bb0 = s0
      [ s0 = IndexIterator'0.t_indexiterator {self}
          (fun (rtrail'0:borrowed (Trail'0.t_trail)) (rcur_ix'0:TrailIndex'0.t_trailindex) ->  [ &_3 <- rtrail'0 ] s1)
      | s1 =  [ &_0 <- _3.current ] s2
      | s2 = return' {_0} ]
       ]
    )
    [ & _0 : Trail'0.t_trail = any_l ()
    | & self : IndexIterator'0.t_indexiterator = self
    | & _3 : borrowed (Trail'0.t_trail) = any_l () ]

    [ return' (result:Trail'0.t_trail)-> {[@expl:postcondition] [%#strail0] result
      = (Cdsat_Trail_IndexIterator_Type.indexiterator_trail self).current}
      (! return' {result}) ]

end
module Cdsat_Trail_Impl11_Index
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 715 15 715 35

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 716 14 716 67

  let%span span2 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span3 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span4 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span5 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span6 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span7 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span8 = "/Users/xavier/Code/cdsat/src/trail.rs" 291 12 291 92

  let%span span9 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 122 20 122 37

  let%span span10 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 115 20 115 37

  let%span span11 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 90 8 90 31

  let%span span12 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 156 27 156 46

  let%span span13 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2906 14 2906 18

  let%span span14 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2906 20 2906 25

  let%span span15 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 157 26 157 54

  let%span span16 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2906 4 2906 46

  use Cdsat_Trail_Assignment_Type as Assignment'0

  use seq.Seq

  predicate invariant'7 (self : Seq.seq (Assignment'0.t_assignment)) =
    [%#span2] true

  predicate inv'7 (_x : Seq.seq (Assignment'0.t_assignment))

  axiom inv'7 : forall x : Seq.seq (Assignment'0.t_assignment) . inv'7 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  constant max'0 : usize = [%#span3] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'6 (_x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

  function shallow_model'1 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) : Seq.seq (Assignment'0.t_assignment)


  axiom shallow_model'1_spec : forall self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . ([%#span4] inv'6 self)
   -> ([%#span6] inv'7 (shallow_model'1 self))
  && ([%#span5] Seq.length (shallow_model'1 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'6 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span7] inv'7 (shallow_model'1 self)

  axiom inv'6 : forall x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . inv'6 x = true

  predicate invariant'5 (self : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span2] true

  predicate inv'5 (_x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'5 : forall x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'5 x = true

  use seq.Seq

  predicate inv'4 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  function shallow_model'0 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))


  axiom shallow_model'0_spec : forall self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . ([%#span4] inv'4 self)
   -> ([%#span6] inv'5 (shallow_model'0 self))
  && ([%#span5] Seq.length (shallow_model'0 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'4 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span7] inv'5 (shallow_model'0 self)

  axiom inv'4 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'4 x
  = true

  predicate invariant'3 (self : Assignment'0.t_assignment) =
    [%#span2] true

  predicate inv'3 (_x : Assignment'0.t_assignment)

  axiom inv'3 : forall x : Assignment'0.t_assignment . inv'3 x = true

  predicate invariant'2 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span2] true

  predicate inv'2 (_x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

  axiom inv'2 : forall x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . inv'2 x = true

  predicate invariant'1 (self : usize) =
    [%#span2] true

  predicate inv'1 (_x : usize)

  axiom inv'1 : forall x : usize . inv'1 x = true

  predicate invariant'0 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span2] true

  predicate inv'0 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  axiom inv'0 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'0 x
  = true

  use seq.Seq

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  use seq.Seq

  use Cdsat_Trail_Trail_Type as Cdsat_Trail_Trail_Type

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use Cdsat_Trail_Trail_Type as Trail'0

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 289 4 289 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex)

   =
    [%#span8] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)
    < Seq.length (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self))
    /\ UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)
    < Seq.length (shallow_model'1 (Seq.get (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))))

  use prelude.prelude.Intrinsic

  use prelude.prelude.Slice

  use prelude.prelude.Borrow

  predicate has_value'1 [@inline:trivial] (self : usize) (seq : Seq.seq (Assignment'0.t_assignment)) (out : Assignment'0.t_assignment)

   =
    [%#span9] Seq.get seq (UIntSize.to_int self) = out

  predicate in_bounds'1 [@inline:trivial] (self : usize) (seq : Seq.seq (Assignment'0.t_assignment)) =
    [%#span10] UIntSize.to_int self < Seq.length seq

  function shallow_model'3 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) : Seq.seq (Assignment'0.t_assignment)

   =
    [%#span11] shallow_model'1 self

  let rec index'1 (self:Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (index:usize) (return'  (ret:Assignment'0.t_assignment))= {[@expl:precondition] [%#span14] inv'1 index}
    {[@expl:precondition] [%#span13] inv'2 self}
    {[@expl:precondition] [%#span12] in_bounds'1 index (shallow_model'3 self)}
    any
    [ return' (result:Assignment'0.t_assignment)-> {[%#span16] inv'3 result}
      {[%#span15] has_value'1 index (shallow_model'3 self) result}
      (! return' {result}) ]


  predicate has_value'0 [@inline:trivial] (self : usize) (seq : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) (out : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

   =
    [%#span9] Seq.get seq (UIntSize.to_int self) = out

  predicate in_bounds'0 [@inline:trivial] (self : usize) (seq : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

   =
    [%#span10] UIntSize.to_int self < Seq.length seq

  function shallow_model'2 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

   =
    [%#span11] shallow_model'0 self

  let rec index'0 (self:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (index:usize) (return'  (ret:Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))= {[@expl:precondition] [%#span14] inv'1 index}
    {[@expl:precondition] [%#span13] inv'0 self}
    {[@expl:precondition] [%#span12] in_bounds'0 index (shallow_model'2 self)}
    any
    [ return' (result:Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))-> {[%#span16] inv'2 result}
      {[%#span15] has_value'0 index (shallow_model'2 self) result}
      (! return' {result}) ]


  use Cdsat_Theory_Trail_Type as Trail'1

  use prelude.prelude.Snapshot

  let rec index (self:Trail'0.t_trail) (index:TrailIndex'0.t_trailindex) (return'  (ret:Assignment'0.t_assignment))= {[%#strail0] contains'0 self index}
    (! bb0
    [ bb0 = s0
      [ s0 = Trail'0.t_trail {self}
          (fun (rassignments'0:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (rlevel'0:usize) (rghost'0:Snapshot.snap_ty (Trail'1.t_trail)) (rnum_assign'0:usize) ->
            TrailIndex'0.t_trailindex {index}
              (fun (r0'0:usize) (r1'0:usize) ->
                index'0 {rassignments'0} {r0'0}
                  (fun (_ret':Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) ->  [ &_8 <- _ret' ] s1)))
      | s1 = bb1 ]

    | bb1 = s0
      [ s0 = TrailIndex'0.t_trailindex {index}
          (fun (r0'0:usize) (r1'0:usize) ->
            index'1 {_8} {r1'0} (fun (_ret':Assignment'0.t_assignment) ->  [ &_6 <- _ret' ] s1))
      | s1 = bb2 ]

    | bb2 = s0 [ s0 =  [ &_5 <- _6 ] s1 | s1 =  [ &_0 <- _5 ] s2 | s2 = return' {_0} ]  ]
    )
    [ & _0 : Assignment'0.t_assignment = any_l ()
    | & self : Trail'0.t_trail = self
    | & index : TrailIndex'0.t_trailindex = index
    | & _5 : Assignment'0.t_assignment = any_l ()
    | & _6 : Assignment'0.t_assignment = any_l ()
    | & _8 : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) = any_l () ]

    [ return' (result:Assignment'0.t_assignment)-> {[@expl:postcondition] [%#strail1] result
      = Seq.get (shallow_model'1 (Seq.get (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 index)))) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 index))}
      (! return' {result}) ]

end
module Cdsat_Term_Impl1_Sort
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 51 14 51 18

  let%span sterm1 = "/Users/xavier/Code/cdsat/src/term.rs" 49 14 49 37

  let%span span2 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span3 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span4 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span5 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span6 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span7 = "/Users/xavier/Code/cdsat/src/term.rs" 195 8 225 9

  let%span span8 = "/Users/xavier/Code/cdsat/src/term.rs" 180 8 180 25

  let%span span9 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 90 8 90 31

  let%span span10 = "/Users/xavier/Code/cdsat/src/term.rs" 28 8 28 25

  use Cdsat_Theory_Value_Type as Value'1

  use Cdsat_Theory_Sort_Type as Sort'1

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'1.t_value) : Sort'1.t_sort =
    [%#span2] match self with
      | Value'1.C_Bool _ -> Sort'1.C_Boolean
      | Value'1.C_Rat _ -> Sort'1.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use Cdsat_Theory_Term_Type as Term'1

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'1.t_term) : Sort'1.t_sort =
    [%#span3] match self with
      | Term'1.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'1.C_Value v -> sort'1 v
      | Term'1.C_Plus _ _ -> Sort'1.C_Rational
      | Term'1.C_Eq _ _ -> Sort'1.C_Boolean
      | Term'1.C_Conj _ _ -> Sort'1.C_Boolean
      | Term'1.C_Neg _ -> Sort'1.C_Boolean
      | Term'1.C_Disj _ _ -> Sort'1.C_Boolean
      end

  use prelude.prelude.Real

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  use Cdsat_Term_Value_Type as Value'0

  use Cdsat_Term_Sort_Type as Sort'0

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function deep_model'4 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span4] match self with
      | Value'0.C_Bool b -> Value'1.C_Bool b
      | Value'0.C_Rat br -> Value'1.C_Rat (deep_model'4 br)
      end

  use Cdsat_Theory_Var_Type as Var'0

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'0.t_sort) : Sort'1.t_sort =
    [%#span5] match self with
      | Sort'0.C_Boolean -> Sort'1.C_Boolean
      | Sort'0.C_Rational -> Sort'1.C_Rational
      end

  use prelude.prelude.UIntSize

  function deep_model'2 (self : usize) : int =
    [%#span6] UIntSize.to_int self

  use Cdsat_Term_Term_Type as Term'0

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 193 4 193 44] (self : Term'0.t_term) : Term'1.t_term =
    [%#span7] match self with
      | Term'0.C_Variable v s -> Term'1.C_Variable (Var'0.C_Var (deep_model'2 v) (deep_model'0 s))
      | Term'0.C_Value v -> Term'1.C_Value (deep_model'3 v)
      | Term'0.C_Plus l r -> Term'1.C_Plus (deep_model'1 l) (deep_model'1 r)
      | Term'0.C_Eq l r -> Term'1.C_Eq (deep_model'1 l) (deep_model'1 r)
      | Term'0.C_Conj l r -> Term'1.C_Conj (deep_model'1 l) (deep_model'1 r)
      | Term'0.C_Disj l r -> Term'1.C_Disj (deep_model'1 l) (deep_model'1 r)
      | Term'0.C_Neg t -> Term'1.C_Neg (deep_model'1 t)
      | Term'0.C_Impl l r -> Term'1.C_Disj (Term'1.C_Neg (deep_model'1 l)) (deep_model'1 r)
      | Term'0.C_Times l r -> Term'1.C_Plus (Term'1.C_Value (Value'1.C_Rat (deep_model'4 l))) (deep_model'1 r)
      | Term'0.C_Lt l r -> Term'1.C_Eq (deep_model'1 l) (deep_model'1 r)
      end

  function shallow_model'2 [#"/Users/xavier/Code/cdsat/src/term.rs" 179 4 179 50] (self : Term'0.t_term) : Term'1.t_term
   =
    [%#span8] deep_model'1 self

  use prelude.prelude.Borrow

  function shallow_model'1 (self : Term'0.t_term) : Term'1.t_term =
    [%#span9] shallow_model'2 self

  function shallow_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 27 4 27 50] (self : Sort'0.t_sort) : Sort'1.t_sort =
    [%#span10] deep_model'0 self

  use prelude.prelude.Intrinsic

  let rec sort (self:Term'0.t_term) (return'  (ret:Sort'0.t_sort))= (! bb0
    [ bb0 = any
      [ br0 (a:usize) (b:Sort'0.t_sort)-> {self = Term'0.C_Variable a b} (! bb2)
      | br1 (a:Value'0.t_value)-> {self = Term'0.C_Value a} (! bb3)
      | br2 (a:Term'0.t_term) (b:Term'0.t_term)-> {self = Term'0.C_Plus a b} (! bb6)
      | br3 (a:Ratio'0.t_ratio (BigInt'0.t_bigint)) (b:Term'0.t_term)-> {self = Term'0.C_Times a b} (! bb13)
      | br4 (a:Term'0.t_term) (b:Term'0.t_term)-> {self = Term'0.C_Eq a b} (! bb7)
      | br5 (a:Term'0.t_term) (b:Term'0.t_term)-> {self = Term'0.C_Lt a b} (! bb8)
      | br6 (a:Term'0.t_term) (b:Term'0.t_term)-> {self = Term'0.C_Conj a b} (! bb9)
      | br7 (a:Term'0.t_term)-> {self = Term'0.C_Neg a} (! bb10)
      | br8 (a:Term'0.t_term) (b:Term'0.t_term)-> {self = Term'0.C_Disj a b} (! bb11)
      | br9 (a:Term'0.t_term) (b:Term'0.t_term)-> {self = Term'0.C_Impl a b} (! bb12) ]

    | bb12 = bb23
    | bb23 = s0 [ s0 =  [ &_0 <- Sort'0.C_Boolean ] s1 | s1 = bb24 ]
    | bb11 = bb22
    | bb22 = s0 [ s0 =  [ &_0 <- Sort'0.C_Boolean ] s1 | s1 = bb24 ]
    | bb10 = bb21
    | bb21 = s0 [ s0 =  [ &_0 <- Sort'0.C_Boolean ] s1 | s1 = bb24 ]
    | bb9 = bb20
    | bb20 = s0 [ s0 =  [ &_0 <- Sort'0.C_Boolean ] s1 | s1 = bb24 ]
    | bb8 = bb19
    | bb19 = s0 [ s0 =  [ &_0 <- Sort'0.C_Boolean ] s1 | s1 = bb24 ]
    | bb7 = bb18
    | bb18 = s0 [ s0 =  [ &_0 <- Sort'0.C_Boolean ] s1 | s1 = bb24 ]
    | bb13 = s0 [ s0 =  [ &_0 <- Sort'0.C_Rational ] s1 | s1 = bb24 ]
    | bb6 = bb17
    | bb17 = s0 [ s0 =  [ &_0 <- Sort'0.C_Rational ] s1 | s1 = bb24 ]
    | bb3 = Term'0.value {self}
        (fun (r0'0:Value'0.t_value) ->
          any
          [ br0 (a:bool)-> {r0'0 = Value'0.C_Bool a} (! bb4)
          | br1 (a:Ratio'0.t_ratio (BigInt'0.t_bigint))-> {r0'0 = Value'0.C_Rat a} (! bb5) ]
          )
    | bb1 = {[%#sterm0] false} any
    | bb5 = bb16
    | bb16 = s0 [ s0 =  [ &_0 <- Sort'0.C_Rational ] s1 | s1 = bb24 ]
    | bb4 = bb15
    | bb15 = s0 [ s0 =  [ &_0 <- Sort'0.C_Boolean ] s1 | s1 = bb24 ]
    | bb2 = bb14
    | bb14 = s0
      [ s0 = Term'0.variable {self} (fun (r0'0:usize) (r1'0:Sort'0.t_sort) ->  [ &s <- r1'0 ] s1)
      | s1 =  [ &_0 <- s ] s2
      | s2 = bb24 ]

    | bb24 = return' {_0} ]
    ) [ & _0 : Sort'0.t_sort = any_l () | & self : Term'0.t_term = self | & s : Sort'0.t_sort = any_l () ]
    [ return' (result:Sort'0.t_sort)-> {[@expl:postcondition] [%#sterm1] shallow_model'0 result
      = sort'0 (shallow_model'1 self)}
      (! return' {result}) ]

end
module Cdsat_Term_Impl13_Eq
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 14 23 14 32

  let%span span1 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span2 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 81 8 81 28

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 46 8 46 12

  let%span span4 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 17 8 17 60

  use Cdsat_Theory_Sort_Type as Sort'1

  use Cdsat_Term_Sort_Type as Sort'0

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'0.t_sort) : Sort'1.t_sort =
    [%#span1] match self with
      | Sort'0.C_Boolean -> Sort'1.C_Boolean
      | Sort'0.C_Rational -> Sort'1.C_Rational
      end

  use prelude.prelude.Borrow

  function deep_model'0 (self : Sort'0.t_sort) : Sort'1.t_sort =
    [%#span2] deep_model'1 self

  use prelude.prelude.Intrinsic

  predicate resolve'1 (self : Sort'0.t_sort) =
    [%#span3] true

  predicate resolve'0 (self : (Sort'0.t_sort, Sort'0.t_sort)) =
    [%#span4] resolve'1 (let (a, _) = self in a) /\ resolve'1 (let (_, a) = self in a)

  let rec eq (self:Sort'0.t_sort) (rhs:Sort'0.t_sort) (return'  (ret:bool))= (! bb0
    [ bb0 = s0
      [ s0 =  [ &_4 <- (self, rhs) ] s1
      | s1 = any
        [ br0 -> {(let (r'0, _) = _4 in r'0) = Sort'0.C_Boolean } (! bb2)
        | br1 -> {(let (r'0, _) = _4 in r'0) = Sort'0.C_Rational } (! bb4) ]
         ]

    | bb9 = s0 [ s0 = -{resolve'0 _4}- s1 | s1 = bb1 ]
    | bb4 = s0
      [ s0 = -{resolve'0 _4}- s1
      | s1 = any
        [ br0 -> {(let (_, r'0) = _4 in r'0) = Sort'0.C_Boolean } (! bb1)
        | br1 -> {(let (_, r'0) = _4 in r'0) = Sort'0.C_Rational } (! bb5) ]
         ]

    | bb5 = bb7
    | bb7 = s0 [ s0 =  [ &_0 <- [%#sterm0] true ] s1 | s1 = bb8 ]
    | bb2 = any
      [ br0 -> {(let (_, r'0) = _4 in r'0) = Sort'0.C_Boolean } (! bb3)
      | br1 -> {(let (_, r'0) = _4 in r'0) = Sort'0.C_Rational } (! bb10) ]

    | bb10 = s0 [ s0 = -{resolve'0 _4}- s1 | s1 = bb1 ]
    | bb1 = s0 [ s0 =  [ &_0 <- [%#sterm0] false ] s1 | s1 = bb8 ]
    | bb3 = bb6
    | bb6 = s0 [ s0 = -{resolve'0 _4}- s1 | s1 =  [ &_0 <- [%#sterm0] true ] s2 | s2 = bb8 ]
    | bb8 = return' {_0} ]
    )
    [ & _0 : bool = any_l ()
    | & self : Sort'0.t_sort = self
    | & rhs : Sort'0.t_sort = rhs
    | & _4 : (Sort'0.t_sort, Sort'0.t_sort) = any_l () ]

    [ return' (result:bool)-> {[@expl:postcondition] [%#sterm0] result = (deep_model'0 self = deep_model'0 rhs)}
      (! return' {result}) ]

end
module Cdsat_Bool_Impl0_IsRelevant
  let%span sbool0 = "/Users/xavier/Code/cdsat/src/bool.rs" 99 32 99 36

  let%span sbool1 = "/Users/xavier/Code/cdsat/src/bool.rs" 98 32 98 36

  let%span sbool2 = "/Users/xavier/Code/cdsat/src/bool.rs" 97 28 97 32

  let%span sbool3 = "/Users/xavier/Code/cdsat/src/bool.rs" 96 32 96 36

  let%span sbool4 = "/Users/xavier/Code/cdsat/src/bool.rs" 95 30 95 35

  let%span sbool5 = "/Users/xavier/Code/cdsat/src/bool.rs" 93 33 93 38

  let%span sbool6 = "/Users/xavier/Code/cdsat/src/bool.rs" 92 32 92 37

  let%span sbool7 = "/Users/xavier/Code/cdsat/src/bool.rs" 91 43 91 47

  let%span sbool8 = "/Users/xavier/Code/cdsat/src/bool.rs" 100 17 100 22

  let%span sbool9 = "/Users/xavier/Code/cdsat/src/bool.rs" 90 48 90 52

  let%span sbool10 = "/Users/xavier/Code/cdsat/src/bool.rs" 87 4 87 44

  let%span span11 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span12 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span13 = "/Users/xavier/Code/cdsat/src/theory.rs" 60 8 60 36

  let%span span14 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span15 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span16 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span17 = "/Users/xavier/Code/cdsat/src/term.rs" 195 8 225 9

  let%span span18 = "/Users/xavier/Code/cdsat/src/term.rs" 180 8 180 25

  let%span span19 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 81 8 81 28

  let%span span20 = "/Users/xavier/Code/cdsat/src/term.rs" 14 23 14 32

  let%span span21 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 90 8 90 31

  let%span span22 = "/Users/xavier/Code/cdsat/src/term.rs" 28 8 28 25

  let%span span23 = "/Users/xavier/Code/cdsat/src/term.rs" 49 14 49 37

  use Cdsat_Bool_BoolTheory_Type as BoolTheory'0

  use Cdsat_Theory_Sort_Type as Sort'1

  use Cdsat_Theory_Value_Type as Value'1

  function sort'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'1.t_value) : Sort'1.t_sort =
    [%#span11] match self with
      | Value'1.C_Bool _ -> Sort'1.C_Boolean
      | Value'1.C_Rat _ -> Sort'1.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use Cdsat_Theory_Term_Type as Term'1

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'1.t_term) : Sort'1.t_sort =
    [%#span12] match self with
      | Term'1.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'1.C_Value v -> sort'2 v
      | Term'1.C_Plus _ _ -> Sort'1.C_Rational
      | Term'1.C_Eq _ _ -> Sort'1.C_Boolean
      | Term'1.C_Conj _ _ -> Sort'1.C_Boolean
      | Term'1.C_Neg _ -> Sort'1.C_Boolean
      | Term'1.C_Disj _ _ -> Sort'1.C_Boolean
      end

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 59 4 59 32] (self : Term'1.t_term) =
    [%#span13] sort'1 self = Sort'1.C_Boolean

  use prelude.prelude.Real

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  use Cdsat_Term_Value_Type as Value'0

  use Cdsat_Term_Sort_Type as Sort'0

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function deep_model'5 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'4 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span14] match self with
      | Value'0.C_Bool b -> Value'1.C_Bool b
      | Value'0.C_Rat br -> Value'1.C_Rat (deep_model'5 br)
      end

  use Cdsat_Theory_Var_Type as Var'0

  function deep_model'2 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'0.t_sort) : Sort'1.t_sort =
    [%#span15] match self with
      | Sort'0.C_Boolean -> Sort'1.C_Boolean
      | Sort'0.C_Rational -> Sort'1.C_Rational
      end

  use prelude.prelude.UIntSize

  function deep_model'3 (self : usize) : int =
    [%#span16] UIntSize.to_int self

  use Cdsat_Term_Term_Type as Term'0

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 193 4 193 44] (self : Term'0.t_term) : Term'1.t_term =
    [%#span17] match self with
      | Term'0.C_Variable v s -> Term'1.C_Variable (Var'0.C_Var (deep_model'3 v) (deep_model'2 s))
      | Term'0.C_Value v -> Term'1.C_Value (deep_model'4 v)
      | Term'0.C_Plus l r -> Term'1.C_Plus (deep_model'1 l) (deep_model'1 r)
      | Term'0.C_Eq l r -> Term'1.C_Eq (deep_model'1 l) (deep_model'1 r)
      | Term'0.C_Conj l r -> Term'1.C_Conj (deep_model'1 l) (deep_model'1 r)
      | Term'0.C_Disj l r -> Term'1.C_Disj (deep_model'1 l) (deep_model'1 r)
      | Term'0.C_Neg t -> Term'1.C_Neg (deep_model'1 t)
      | Term'0.C_Impl l r -> Term'1.C_Disj (Term'1.C_Neg (deep_model'1 l)) (deep_model'1 r)
      | Term'0.C_Times l r -> Term'1.C_Plus (Term'1.C_Value (Value'1.C_Rat (deep_model'5 l))) (deep_model'1 r)
      | Term'0.C_Lt l r -> Term'1.C_Eq (deep_model'1 l) (deep_model'1 r)
      end

  function shallow_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 179 4 179 50] (self : Term'0.t_term) : Term'1.t_term
   =
    [%#span18] deep_model'1 self

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  use prelude.prelude.Intrinsic

  use prelude.prelude.Borrow

  function deep_model'0 (self : Sort'0.t_sort) : Sort'1.t_sort =
    [%#span19] deep_model'2 self

  let rec eq'0 (self:Sort'0.t_sort) (rhs:Sort'0.t_sort) (return'  (ret:bool))= any
    [ return' (result:bool)-> {[%#span20] result = (deep_model'0 self = deep_model'0 rhs)} (! return' {result}) ]


  function shallow_model'2 (self : Term'0.t_term) : Term'1.t_term =
    [%#span21] shallow_model'0 self

  function shallow_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 27 4 27 50] (self : Sort'0.t_sort) : Sort'1.t_sort =
    [%#span22] deep_model'2 self

  let rec sort'0 (self:Term'0.t_term) (return'  (ret:Sort'0.t_sort))= any
    [ return' (result:Sort'0.t_sort)-> {[%#span23] shallow_model'1 result = sort'1 (shallow_model'2 self)}
      (! return' {result}) ]


  use Cdsat_Trail_Reason_Type as Reason'0

  use Cdsat_Trail_Assignment_Type as Assignment'0

  let rec promoted0 (return'  (ret:Sort'0.t_sort))= bb0
    [ bb0 = s0 [ s0 =  [ &_1 <- Sort'0.C_Boolean ] s1 | s1 =  [ &_0 <- _1 ] s2 | s2 = return' {_0} ]  ]
     [ & _0 : Sort'0.t_sort = any_l () | & _1 : Sort'0.t_sort = any_l () ]
    [ return' (result:Sort'0.t_sort)-> return' {result} ]


  let rec is_relevant (self:BoolTheory'0.t_booltheory) (a:Assignment'0.t_assignment) (return'  (ret:bool))= (! bb0
    [ bb0 = s0
      [ s0 = Assignment'0.t_assignment {a}
          (fun (rterm'0:Term'0.t_term) (rval'0:Value'0.t_value) (rreason'0:Reason'0.t_reason) (rlevel'0:usize) ->
             [ &_4 <- rterm'0 ]
            s1)
      | s1 = any
        [ br0 (a:usize) (b:Sort'0.t_sort)-> {_4 = Term'0.C_Variable a b} (! bb2)
        | br1 (a:Value'0.t_value)-> {_4 = Term'0.C_Value a} (! bb4)
        | br2 (a:Term'0.t_term) (b:Term'0.t_term)-> {_4 = Term'0.C_Plus a b} (! bb6)
        | br3 (a:Ratio'0.t_ratio (BigInt'0.t_bigint)) (b:Term'0.t_term)-> {_4 = Term'0.C_Times a b} (! bb7)
        | br4 (a:Term'0.t_term) (b:Term'0.t_term)-> {_4 = Term'0.C_Eq a b} (! bb8)
        | br5 (a:Term'0.t_term) (b:Term'0.t_term)-> {_4 = Term'0.C_Lt a b} (! bb9)
        | br6 (a:Term'0.t_term) (b:Term'0.t_term)-> {_4 = Term'0.C_Conj a b} (! bb10)
        | br7 (a:Term'0.t_term)-> {_4 = Term'0.C_Neg a} (! bb11)
        | br8 (a:Term'0.t_term) (b:Term'0.t_term)-> {_4 = Term'0.C_Disj a b} (! bb12)
        | br9 (a:Term'0.t_term) (b:Term'0.t_term)-> {_4 = Term'0.C_Impl a b} (! bb13) ]
         ]

    | bb32 = bb1
    | bb13 = bb25
    | bb25 = s0 [ s0 =  [ &_0 <- [%#sbool0] true ] s1 | s1 = bb26 ]
    | bb12 = bb24
    | bb24 = s0 [ s0 =  [ &_0 <- [%#sbool1] true ] s1 | s1 = bb26 ]
    | bb11 = bb23
    | bb23 = s0 [ s0 =  [ &_0 <- [%#sbool2] true ] s1 | s1 = bb26 ]
    | bb10 = bb22
    | bb22 = s0 [ s0 =  [ &_0 <- [%#sbool3] true ] s1 | s1 = bb26 ]
    | bb9 = bb21
    | bb21 = s0 [ s0 =  [ &_0 <- [%#sbool4] false ] s1 | s1 = bb26 ]
    | bb8 = bb18
    | bb18 = s0
      [ s0 = Term'0.eq {_4} (fun (r0'0:Term'0.t_term) (r1'0:Term'0.t_term) ->  [ &r <- r1'0 ] s1)
      | s1 = sort'0 {r} (fun (_ret':Sort'0.t_sort) ->  [ &_10 <- _ret' ] s2)
      | s2 = bb19 ]

    | bb19 = s0
      [ s0 = promoted0 (fun (pr0:Sort'0.t_sort) ->  [ &_14 <- pr0 ] s1)
      | s1 = eq'0 {_10} {_14} (fun (_ret':bool) ->  [ &_0 <- _ret' ] s2)
      | s2 = bb20 ]

    | bb20 = bb26
    | bb7 = bb17
    | bb17 = s0 [ s0 =  [ &_0 <- [%#sbool5] false ] s1 | s1 = bb26 ]
    | bb6 = bb16
    | bb16 = s0 [ s0 =  [ &_0 <- [%#sbool6] false ] s1 | s1 = bb26 ]
    | bb4 = Term'0.value {_4}
        (fun (r0'0:Value'0.t_value) ->
          any
          [ br0 (a:bool)-> {r0'0 = Value'0.C_Bool a} (! bb5)
          | br1 (a:Ratio'0.t_ratio (BigInt'0.t_bigint))-> {r0'0 = Value'0.C_Rat a} (! bb34) ]
          )
    | bb34 = bb1
    | bb5 = bb15
    | bb15 = s0 [ s0 =  [ &_0 <- [%#sbool7] true ] s1 | s1 = bb26 ]
    | bb2 = Term'0.variable {_4}
        (fun (r0'0:usize) (r1'0:Sort'0.t_sort) ->
          any [ br0 -> {r1'0 = Sort'0.C_Boolean } (! bb3) | br1 -> {r1'0 = Sort'0.C_Rational } (! bb33) ] )
    | bb33 = bb1
    | bb1 = s0 [ s0 =  [ &_0 <- [%#sbool8] false ] s1 | s1 = bb26 ]
    | bb3 = bb14
    | bb14 = s0 [ s0 =  [ &_0 <- [%#sbool9] true ] s1 | s1 = bb26 ]
    | bb26 = return' {_0} ]
    )
    [ & _0 : bool = any_l ()
    | & a : Assignment'0.t_assignment = a
    | & _4 : Term'0.t_term = any_l ()
    | & r : Term'0.t_term = any_l ()
    | & _10 : Sort'0.t_sort = any_l ()
    | & _14 : Sort'0.t_sort = any_l () ]

    [ return' (result:bool)-> {[@expl:postcondition] [%#sbool10] result
       -> is_bool'0 (shallow_model'0 (Cdsat_Trail_Assignment_Type.assignment_term a))}
      (! return' {result}) ]

end
module Cdsat_Trail_Impl9_AbsJustExtend_Impl
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 363 4 363 84

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 364 4 364 72

  let%span strail2 = "/Users/xavier/Code/cdsat/src/trail.rs" 365 4 365 129

  let%span strail3 = "/Users/xavier/Code/cdsat/src/trail.rs" 362 14 362 24

  let%span strail4 = "/Users/xavier/Code/cdsat/src/trail.rs" 360 4 360 12

  let%span strail5 = "/Users/xavier/Code/cdsat/src/trail.rs" 360 4 360 12

  let%span span6 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span7 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span8 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span9 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span10 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span11 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span12 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span13 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span14 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 129 8 129 78

  let%span span15 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 13 814 14

  let%span span16 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 24 814 25

  let%span span17 = "/Users/xavier/Code/cdsat/src/trail.rs" 809 0 809 73

  let%span span18 = "/Users/xavier/Code/cdsat/src/trail.rs" 810 0 810 63

  let%span span19 = "/Users/xavier/Code/cdsat/src/trail.rs" 811 0 811 55

  let%span span20 = "/Users/xavier/Code/cdsat/src/trail.rs" 812 0 812 52

  let%span span21 = "/Users/xavier/Code/cdsat/src/trail.rs" 813 10 813 33

  let%span span22 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 33 814 39

  let%span span23 = "/Users/xavier/Code/cdsat/src/trail.rs" 808 10 808 17

  let%span span24 = "/Users/xavier/Code/cdsat/src/trail.rs" 807 0 807 8

  let%span span25 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span26 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span27 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span28 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span29 = "/Users/xavier/Code/cdsat/src/term.rs" 195 8 225 9

  let%span span30 = "/Users/xavier/Code/cdsat/src/term.rs" 180 8 180 25

  let%span span31 = "/Users/xavier/Code/cdsat/src/trail.rs" 726 8 726 61

  let%span span32 = "/Users/xavier/Code/cdsat/src/trail.rs" 646 8 648 9

  let%span span33 = "/Users/xavier/Code/cdsat/src/trail.rs" 291 12 291 92

  let%span span34 = "/Users/xavier/Code/cdsat/src/trail.rs" 313 4 313 82

  let%span span35 = "/Users/xavier/Code/cdsat/src/trail.rs" 314 14 314 40

  let%span span36 = "/Users/xavier/Code/cdsat/src/trail.rs" 315 4 315 115

  let%span span37 = "/Users/xavier/Code/cdsat/src/trail.rs" 316 4 316 115

  let%span span38 = "/Users/xavier/Code/cdsat/src/trail.rs" 317 4 317 101

  let%span span39 = "/Users/xavier/Code/cdsat/src/trail.rs" 312 14 312 24

  let%span span40 = "/Users/xavier/Code/cdsat/src/trail.rs" 310 4 310 12

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  predicate invariant'5 (self : TrailIndex'0.t_trailindex) =
    [%#span6] true

  predicate inv'5 (_x : TrailIndex'0.t_trailindex)

  axiom inv'5 : forall x : TrailIndex'0.t_trailindex . inv'5 x = true

  use seq.Seq

  predicate invariant'4 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span6] true

  predicate inv'4 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'4 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'4 x = true

  use Cdsat_Trail_Assignment_Type as Assignment'0

  predicate invariant'3 (self : Seq.seq (Assignment'0.t_assignment)) =
    [%#span6] true

  predicate inv'3 (_x : Seq.seq (Assignment'0.t_assignment))

  axiom inv'3 : forall x : Seq.seq (Assignment'0.t_assignment) . inv'3 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  constant max'0 : usize = [%#span7] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'2 (_x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

  function shallow_model'1 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) : Seq.seq (Assignment'0.t_assignment)


  axiom shallow_model'1_spec : forall self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . ([%#span8] inv'2 self)
   -> ([%#span10] inv'3 (shallow_model'1 self))
  && ([%#span9] Seq.length (shallow_model'1 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'2 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span11] inv'3 (shallow_model'1 self)

  axiom inv'2 : forall x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . inv'2 x = true

  predicate invariant'1 (self : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span6] true

  predicate inv'1 (_x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'1 : forall x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'1 x = true

  use seq.Seq

  predicate inv'0 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  function shallow_model'0 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))


  axiom shallow_model'0_spec : forall self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . ([%#span8] inv'0 self)
   -> ([%#span10] inv'1 (shallow_model'0 self))
  && ([%#span9] Seq.length (shallow_model'0 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'0 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span11] inv'1 (shallow_model'0 self)

  axiom inv'0 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'0 x
  = true

  use Cdsat_Trail_Trail_Type as Trail'0

  use set.Fset

  use Cdsat_Theory_Value_Type as Value'0

  use Cdsat_Theory_Term_Type as Term'0

  use set.Fset

  predicate contains'2 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span12] Fset.mem e self

  use set.Fset

  use set.Fset

  function insert'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span13] Fset.add e self

  use seq.Seq

  use prelude.seq_ext.SeqExt

  use seq.Seq

  use seq.Seq

  use seq.Seq

  predicate contains'1 (self : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) =
    [%#span14] exists i : int . 0 <= i /\ i < Seq.length self /\ Seq.get self i = e

  function remove'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 814 0 814 39] (s : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom remove'0_def : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . remove'0 s e
  = ([%#span24] if s = (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) then
    Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)
  else
    if Seq.get s (Seq.length s - 1) = e then
      remove'0 (SeqExt.subsequence s 0 (Seq.length s - 1)) e
    else
      Seq.snoc (remove'0 (SeqExt.subsequence s 0 (Seq.length s - 1)) e) (Seq.get s (Seq.length s - 1))

  )

  axiom remove'0_spec : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . ([%#span15] inv'4 s)
   -> ([%#span16] inv'5 e)
   -> ([%#span22] inv'4 (remove'0 s e))
  && ([%#span21] Seq.length (remove'0 s e) <= Seq.length s)
  && ([%#span20] contains'1 s e  -> Seq.length (remove'0 s e) < Seq.length s)
  && ([%#span19] forall t : TrailIndex'0.t_trailindex . inv'5 t  -> contains'1 (remove'0 s e) t  -> t <> e)
  && ([%#span18] forall t : TrailIndex'0.t_trailindex . inv'5 t  -> contains'1 (remove'0 s e) t  -> contains'1 s t)
  && ([%#span17] forall t : TrailIndex'0.t_trailindex . inv'5 t
   -> contains'1 s t  -> e <> t  -> contains'1 (remove'0 s e) t)

  use prelude.prelude.Borrow

  use Cdsat_Term_Value_Type as Value'1

  use Cdsat_Term_Term_Type as Term'1

  use prelude.prelude.Real

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  function deep_model'4 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span25] match self with
      | Value'1.C_Bool b -> Value'0.C_Bool b
      | Value'1.C_Rat br -> Value'0.C_Rat (deep_model'4 br)
      end

  function shallow_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span26] deep_model'1 self

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  use Cdsat_Theory_Sort_Type as Sort'1

  use Cdsat_Term_Sort_Type as Sort'0

  use Cdsat_Theory_Var_Type as Var'0

  function deep_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'0.t_sort) : Sort'1.t_sort =
    [%#span27] match self with
      | Sort'0.C_Boolean -> Sort'1.C_Boolean
      | Sort'0.C_Rational -> Sort'1.C_Rational
      end

  function deep_model'2 (self : usize) : int =
    [%#span28] UIntSize.to_int self

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 193 4 193 44] (self : Term'1.t_term) : Term'0.t_term =
    [%#span29] match self with
      | Term'1.C_Variable v s -> Term'0.C_Variable (Var'0.C_Var (deep_model'2 v) (deep_model'3 s))
      | Term'1.C_Value v -> Term'0.C_Value (deep_model'1 v)
      | Term'1.C_Plus l r -> Term'0.C_Plus (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Eq l r -> Term'0.C_Eq (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Conj l r -> Term'0.C_Conj (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Disj l r -> Term'0.C_Disj (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Neg t -> Term'0.C_Neg (deep_model'0 t)
      | Term'1.C_Impl l r -> Term'0.C_Disj (Term'0.C_Neg (deep_model'0 l)) (deep_model'0 r)
      | Term'1.C_Times l r -> Term'0.C_Plus (Term'0.C_Value (Value'0.C_Rat (deep_model'4 l))) (deep_model'0 r)
      | Term'1.C_Lt l r -> Term'0.C_Eq (deep_model'0 l) (deep_model'0 r)
      end

  function shallow_model'2 [#"/Users/xavier/Code/cdsat/src/term.rs" 179 4 179 50] (self : Term'1.t_term) : Term'0.t_term
   =
    [%#span30] deep_model'0 self

  function term_value'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 725 4 725 61] (self : Assignment'0.t_assignment) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span31] (shallow_model'2 (Cdsat_Trail_Assignment_Type.assignment_term self), shallow_model'3 (Cdsat_Trail_Assignment_Type.assignment_val self))

  use seq.Seq

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  use seq.Seq

  use Cdsat_Trail_Trail_Type as Cdsat_Trail_Trail_Type

  function index_logic'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 645 4 645 77] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span32] term_value'0 (Seq.get (shallow_model'1 (Seq.get (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)))) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)))

  use set.Fset

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 289 4 289 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex)

   =
    [%#span33] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)
    < Seq.length (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self))
    /\ UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)
    < Seq.length (shallow_model'1 (Seq.get (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))))

  function abstract_justification'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 318 4 321 44] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) : Fset.fset (Term'0.t_term, Value'0.t_value)


  axiom abstract_justification'0_def : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . abstract_justification'0 self just
  = ([%#span40] if Seq.length just > 0 then
    let set = abstract_justification'0 self (remove'0 just (Seq.get just 0)) in let a = index_logic'0 self (Seq.get just 0) in insert'0 set a
  else
    Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)
  )

  axiom abstract_justification'0_spec : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span34] forall i : int . 0
  <= i
  /\ i < Seq.length just  -> contains'0 self (Seq.get just i))
   -> ([%#span38] forall i : int . 0 <= i /\ i < Seq.length just
   -> contains'2 (abstract_justification'0 self just) (index_logic'0 self (Seq.get just i)))
  && ([%#span37] forall a : (Term'0.t_term, Value'0.t_value) . contains'2 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'1 just ix /\ a = index_logic'0 self ix))
  && ([%#span36] forall a : (Term'0.t_term, Value'0.t_value) . contains'2 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'0 self ix /\ a = index_logic'0 self ix))
  && ([%#span35] Fset.cardinal (abstract_justification'0 self just) <= Seq.length just)

  constant self  : Trail'0.t_trail

  constant just  : Seq.seq (TrailIndex'0.t_trailindex)

  constant just2  : Seq.seq (TrailIndex'0.t_trailindex)

  function abs_just_extend [#"/Users/xavier/Code/cdsat/src/trail.rs" 366 4 366 79] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) (just2 : Seq.seq (TrailIndex'0.t_trailindex)) : ()


  goal vc_abs_just_extend : ([%#strail1] forall ix : TrailIndex'0.t_trailindex . contains'1 just ix
   -> contains'1 just2 ix)
   -> ([%#strail0] forall i : int . 0 <= i /\ i < Seq.length just2  -> contains'0 self (Seq.get just2 i))
   -> ([%#strail4] forall i : int . 0 <= i /\ i < Seq.length just  -> contains'0 self (Seq.get just i))
  && (let _ = () in let _ = () in ([%#strail5] forall i : int . 0 <= i /\ i < Seq.length just2
   -> contains'0 self (Seq.get just2 i))
  && (let _ = () in let _ = () in [%#strail2] forall tv : (Term'0.t_term, Value'0.t_value) . contains'2 (abstract_justification'0 self just) tv
   -> contains'2 (abstract_justification'0 self just2) tv))
end
module Cdsat_Term_Impl8_Bool
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 272 14 272 18

  let%span spanic1 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/panic.rs" 135 8 135 76

  let%span sterm2 = "/Users/xavier/Code/cdsat/src/term.rs" 269 4 269 32

  let%span sterm3 = "/Users/xavier/Code/cdsat/src/term.rs" 270 14 270 42

  let%span span4 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span5 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span6 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span7 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span8 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 90 8 90 31

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'1

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'1.t_value) : Sort'0.t_sort =
    [%#span4] match self with
      | Value'1.C_Bool _ -> Sort'0.C_Boolean
      | Value'1.C_Rat _ -> Sort'0.C_Rational
      end

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'1.t_value) =
    [%#span5] sort'0 self = Sort'0.C_Boolean

  use prelude.prelude.Real

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  function deep_model'1 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  use Cdsat_Term_Value_Type as Value'0

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span6] match self with
      | Value'0.C_Bool b -> Value'1.C_Bool b
      | Value'0.C_Rat br -> Value'1.C_Rat (deep_model'1 br)
      end

  function shallow_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span7] deep_model'0 self

  use prelude.prelude.Borrow

  function shallow_model'0 (self : Value'0.t_value) : Value'1.t_value =
    [%#span8] shallow_model'1 self

  use prelude.prelude.Intrinsic

  let rec bool (self:Value'0.t_value) (return'  (ret:bool))= {[%#sterm2] is_bool'0 (shallow_model'0 self)}
    (! bb0
    [ bb0 = any
      [ br0 (a:bool)-> {self = Value'0.C_Bool a} (! bb2)
      | br1 (a:Ratio'0.t_ratio (BigInt'0.t_bigint))-> {self = Value'0.C_Rat a} (! bb3) ]

    | bb1 = {[%#sterm0] false} any
    | bb3 = {[%#spanic1] false} any
    | bb2 = bb4
    | bb4 = s0
      [ s0 = Value'0.bool {self} (fun (r0'0:bool) ->  [ &b <- r0'0 ] s1) | s1 =  [ &_0 <- b ] s2 | s2 = return' {_0} ]
       ]
    ) [ & _0 : bool = any_l () | & self : Value'0.t_value = self | & b : bool = any_l () ]
    [ return' (result:bool)-> {[@expl:postcondition] [%#sterm3] self = Value'0.C_Bool result} (! return' {result}) ]

end
module Cdsat_Term_Impl8_Negate
  let%span spanic0 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/panic.rs" 135 8 135 76

  let%span sterm1 = "/Users/xavier/Code/cdsat/src/term.rs" 306 15 306 32

  let%span sterm2 = "/Users/xavier/Code/cdsat/src/term.rs" 307 14 307 41

  let%span span3 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span4 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span5 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span6 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span7 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span8 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span9 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span10 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 90 8 90 31

  use Cdsat_Theory_Value_Type as Value'1

  use Cdsat_Theory_Sort_Type as Sort'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'1.t_value) : Sort'0.t_sort =
    [%#span3] match self with
      | Value'1.C_Bool _ -> Sort'0.C_Boolean
      | Value'1.C_Rat _ -> Sort'0.C_Rational
      end

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'1.t_value) =
    [%#span4] sort'0 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'1.t_value) : Value'1.t_value =
    [%#span7] match self with
      | Value'1.C_Bool b -> Value'1.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'1.t_value . ([%#span5] is_bool'0 self)
   -> ([%#span6] is_bool'0 (negate'0 self))

  use prelude.prelude.Real

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  function deep_model'1 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  use Cdsat_Term_Value_Type as Value'0

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span8] match self with
      | Value'0.C_Bool b -> Value'1.C_Bool b
      | Value'0.C_Rat br -> Value'1.C_Rat (deep_model'1 br)
      end

  function shallow_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span9] deep_model'0 self

  use prelude.prelude.Borrow

  function shallow_model'0 (self : Value'0.t_value) : Value'1.t_value =
    [%#span10] shallow_model'1 self

  use prelude.prelude.Intrinsic

  let rec negate (self:Value'0.t_value) (return'  (ret:Value'0.t_value))= {[%#sterm1] is_bool'0 (shallow_model'0 self)}
    (! bb0
    [ bb0 = any
      [ br0 (a:bool)-> {self = Value'0.C_Bool a} (! bb2)
      | br1 (a:Ratio'0.t_ratio (BigInt'0.t_bigint))-> {self = Value'0.C_Rat a} (! bb1) ]

    | bb1 = {[%#spanic0] false} any
    | bb2 = bb3
    | bb3 = s0
      [ s0 = Value'0.bool {self} (fun (r0'0:bool) ->  [ &b <- r0'0 ] s1)
      | s1 =  [ &_6 <- not b ] s2
      | s2 =  [ &_0 <- Value'0.C_Bool _6 ] (any [ any_ (_any:bool)-> (!  [ &_6 <- _any ] s3) ] )
      | s3 = return' {_0} ]
       ]
    )
    [ & _0 : Value'0.t_value = any_l ()
    | & self : Value'0.t_value = self
    | & b : bool = any_l ()
    | & _6 : bool = any_l () ]

    [ return' (result:Value'0.t_value)-> {[@expl:postcondition] [%#sterm2] shallow_model'1 result
      = negate'0 (shallow_model'0 self)}
      (! return' {result}) ]

end
module Cdsat_Term_Impl23_Eq
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 230 23 230 32

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span2 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 81 8 81 28

  let%span span4 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 118 8 118 12

  let%span span5 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/cmp.rs" 11 26 11 75

  let%span span6 = "/Users/xavier/.cargo/registry/src/index.crates.io-6f17d22bba15001f/num-rational-0.3.2/src/lib.rs" 381 11 381 15

  let%span span7 = "/Users/xavier/.cargo/registry/src/index.crates.io-6f17d22bba15001f/num-rational-0.3.2/src/lib.rs" 381 17 381 22

  let%span span8 = "/Users/xavier/Code/creusot/creusot-contracts/src/num_rational.rs" 35 22 35 71

  let%span span9 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 46 8 46 12

  let%span span10 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 17 8 17 60

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  predicate invariant'0 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) =
    [%#span1] true

  predicate inv'0 (_x : Ratio'0.t_ratio (BigInt'0.t_bigint))

  axiom inv'0 : forall x : Ratio'0.t_ratio (BigInt'0.t_bigint) . inv'0 x = true

  use prelude.prelude.Real

  function deep_model'4 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  use Cdsat_Theory_Value_Type as Value'1

  use Cdsat_Term_Value_Type as Value'0

  function deep_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span2] match self with
      | Value'0.C_Bool b -> Value'1.C_Bool b
      | Value'0.C_Rat br -> Value'1.C_Rat (deep_model'4 br)
      end

  use prelude.prelude.Borrow

  function deep_model'0 (self : Value'0.t_value) : Value'1.t_value =
    [%#span3] deep_model'3 self

  use prelude.prelude.Intrinsic

  function deep_model'5 (self : bool) : bool =
    [%#span4] self

  function deep_model'2 (self : bool) : bool =
    [%#span3] deep_model'5 self

  let rec eq'1 (self:bool) (other:bool) (return'  (ret:bool))= any
    [ return' (result:bool)-> {[%#span5] result = (deep_model'2 self = deep_model'2 other)} (! return' {result}) ]


  function deep_model'1 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real =
    [%#span3] deep_model'4 self

  let rec eq'0 (self:Ratio'0.t_ratio (BigInt'0.t_bigint)) (other:Ratio'0.t_ratio (BigInt'0.t_bigint)) (return'  (ret:bool))= {[@expl:precondition] [%#span7] inv'0 other}
    {[@expl:precondition] [%#span6] inv'0 self}
    any [ return' (result:bool)-> {[%#span8] result = (deep_model'1 self = deep_model'1 other)} (! return' {result}) ]

  predicate resolve'1 (self : Value'0.t_value) =
    [%#span9] true

  predicate resolve'0 (self : (Value'0.t_value, Value'0.t_value)) =
    [%#span10] resolve'1 (let (a, _) = self in a) /\ resolve'1 (let (_, a) = self in a)

  let rec eq (self:Value'0.t_value) (rhs:Value'0.t_value) (return'  (ret:bool))= (! bb0
    [ bb0 = s0
      [ s0 =  [ &_4 <- (self, rhs) ] s1
      | s1 = any
        [ br0 (a:bool)-> {(let (r'0, _) = _4 in r'0) = Value'0.C_Bool a} (! bb2)
        | br1 (a:Ratio'0.t_ratio (BigInt'0.t_bigint))-> {(let (r'0, _) = _4 in r'0) = Value'0.C_Rat a} (! bb4) ]
         ]

    | bb4 = any
      [ br0 (a:bool)-> {(let (_, r'0) = _4 in r'0) = Value'0.C_Bool a} (! bb1)
      | br1 (a:Ratio'0.t_ratio (BigInt'0.t_bigint))-> {(let (_, r'0) = _4 in r'0) = Value'0.C_Rat a} (! bb5) ]

    | bb5 = bb11
    | bb11 = s0
      [ s0 = Value'0.rat {let (r'0, _) = _4 in r'0}
          (fun (r0'0:Ratio'0.t_ratio (BigInt'0.t_bigint)) ->  [ &v0_11 <- r0'0 ] s1)
      | s1 = Value'0.rat {let (_, r'1) = _4 in r'1}
          (fun (r0'1:Ratio'0.t_ratio (BigInt'0.t_bigint)) ->  [ &v0_21 <- r0'1 ] s2)
      | s2 = -{resolve'0 _4}- s3
      | s3 = eq'0 {v0_11} {v0_21} (fun (_ret':bool) ->  [ &_17 <- _ret' ] s4)
      | s4 = bb12 ]

    | bb12 = any [ br0 -> {_17 = false} (! bb14) | br1 -> {_17} (! bb13) ]
    | bb13 = s0 [ s0 =  [ &_0 <- [%#sterm0] true ] s1 | s1 = bb15 ]
    | bb14 = s0 [ s0 =  [ &_0 <- [%#sterm0] false ] s1 | s1 = bb15 ]
    | bb15 = bb16
    | bb2 = any
      [ br0 (a:bool)-> {(let (_, r'0) = _4 in r'0) = Value'0.C_Bool a} (! bb3)
      | br1 (a:Ratio'0.t_ratio (BigInt'0.t_bigint))-> {(let (_, r'0) = _4 in r'0) = Value'0.C_Rat a} (! bb1) ]

    | bb1 = s0 [ s0 = -{resolve'0 _4}- s1 | s1 =  [ &_0 <- [%#sterm0] false ] s2 | s2 = bb16 ]
    | bb3 = bb6
    | bb6 = s0
      [ s0 = Value'0.bool {let (r'0, _) = _4 in r'0} (fun (r0'0:bool) ->  [ &v0_1 <- r0'0 ] s1)
      | s1 = Value'0.bool {let (_, r'1) = _4 in r'1} (fun (r0'1:bool) ->  [ &v0_2 <- r0'1 ] s2)
      | s2 = -{resolve'0 _4}- s3
      | s3 = eq'1 {v0_1} {v0_2} (fun (_ret':bool) ->  [ &_12 <- _ret' ] s4)
      | s4 = bb7 ]

    | bb7 = any [ br0 -> {_12 = false} (! bb9) | br1 -> {_12} (! bb8) ]
    | bb8 = s0 [ s0 =  [ &_0 <- [%#sterm0] true ] s1 | s1 = bb10 ]
    | bb9 = s0 [ s0 =  [ &_0 <- [%#sterm0] false ] s1 | s1 = bb10 ]
    | bb10 = bb16
    | bb16 = return' {_0} ]
    )
    [ & _0 : bool = any_l ()
    | & self : Value'0.t_value = self
    | & rhs : Value'0.t_value = rhs
    | & _4 : (Value'0.t_value, Value'0.t_value) = any_l ()
    | & v0_1 : bool = any_l ()
    | & v0_2 : bool = any_l ()
    | & _12 : bool = any_l ()
    | & v0_11 : Ratio'0.t_ratio (BigInt'0.t_bigint) = any_l ()
    | & v0_21 : Ratio'0.t_ratio (BigInt'0.t_bigint) = any_l ()
    | & _17 : bool = any_l () ]

    [ return' (result:bool)-> {[@expl:postcondition] [%#sterm0] result = (deep_model'0 self = deep_model'0 rhs)}
      (! return' {result}) ]

end
module Core_Slice_Iter_Iter_Type
  use prelude.prelude.Borrow

  use Core_Marker_PhantomData_Type as PhantomData'0

  use prelude.prelude.Opaque

  use Core_Ptr_NonNull_NonNull_Type as NonNull'0

  type t_iter 't =
    | C_Iter (NonNull'0.t_nonnull 't) opaque_ptr (PhantomData'0.t_phantomdata 't)

  function any_l (_ : 'b) : 'a

  let rec t_iter < 't > (input:t_iter 't) (ret  (ptr:NonNull'0.t_nonnull 't) (end_or_len:opaque_ptr) (_marker:PhantomData'0.t_phantomdata 't))= any
    [ good (ptr:NonNull'0.t_nonnull 't) (end_or_len:opaque_ptr) (_marker:PhantomData'0.t_phantomdata 't)-> {C_Iter ptr end_or_len _marker
      = input}
      (! ret {ptr} {end_or_len} {_marker})
    | bad (ptr:NonNull'0.t_nonnull 't) (end_or_len:opaque_ptr) (_marker:PhantomData'0.t_phantomdata 't)-> {C_Iter ptr end_or_len _marker
      <> input}
      {false}
      any ]

end
module Cdsat_Trail_Impl9_IndexOf
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 429 24 429 25

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 430 8 430 126

  let%span strail2 = "/Users/xavier/Code/cdsat/src/trail.rs" 430 8 430 126

  let%span strail3 = "/Users/xavier/Code/cdsat/src/trail.rs" 430 8 430 126

  let%span strail4 = "/Users/xavier/Code/cdsat/src/trail.rs" 431 20 431 44

  let%span strail5 = "/Users/xavier/Code/cdsat/src/trail.rs" 430 8 430 126

  let%span strail6 = "/Users/xavier/Code/cdsat/src/trail.rs" 433 29 433 30

  let%span strail7 = "/Users/xavier/Code/cdsat/src/trail.rs" 434 12 434 51

  let%span strail8 = "/Users/xavier/Code/cdsat/src/trail.rs" 434 12 434 51

  let%span strail9 = "/Users/xavier/Code/cdsat/src/trail.rs" 434 12 434 51

  let%span strail10 = "/Users/xavier/Code/cdsat/src/trail.rs" 434 24 434 49

  let%span strail11 = "/Users/xavier/Code/cdsat/src/trail.rs" 434 12 434 51

  let%span strail12 = "/Users/xavier/Code/cdsat/src/trail.rs" 438 30 438 47

  let%span strail13 = "/Users/xavier/Code/cdsat/src/trail.rs" 444 26 444 27

  let%span strail14 = "/Users/xavier/Code/cdsat/src/trail.rs" 446 21 446 22

  let%span strail15 = "/Users/xavier/Code/cdsat/src/trail.rs" 440 34 440 58

  let%span strail16 = "/Users/xavier/Code/cdsat/src/trail.rs" 441 34 441 50

  let%span strail17 = "/Users/xavier/Code/cdsat/src/trail.rs" 424 14 427 5

  let%span span18 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span19 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span20 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span21 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span22 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span23 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span24 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 19 21 19 25

  let%span span25 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 17 14 17 41

  let%span span26 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 18 14 18 42

  let%span span27 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 19 4 19 50

  let%span span28 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 43 8 43 31

  let%span span29 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 90 8 90 31

  let%span span30 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 91 19 91 23

  let%span span31 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 89 14 89 41

  let%span span32 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 90 4 90 82

  let%span span33 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 91 4 91 35

  let%span span34 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 399 12 399 66

  let%span span35 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 410 15 410 32

  let%span span36 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 411 15 411 32

  let%span span37 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 413 31 413 33

  let%span span38 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 413 61 413 63

  let%span span39 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 412 14 412 42

  let%span span40 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 408 4 408 10

  let%span span41 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 405 14 405 45

  let%span span42 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 403 4 403 10

  let%span span43 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span44 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span45 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span46 = "/Users/xavier/Code/cdsat/src/term.rs" 195 8 225 9

  let%span span47 = "/Users/xavier/Code/cdsat/src/term.rs" 180 8 180 25

  let%span span48 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 81 8 81 28

  let%span span49 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/cmp.rs" 1661 15 1661 19

  let%span span50 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/cmp.rs" 1661 21 1661 26

  let%span span51 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/cmp.rs" 11 26 11 75

  let%span span52 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 26 20 26 34

  let%span span53 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 108 8 108 31

  let%span span54 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 392 20 392 61

  let%span span55 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/iter.rs" 95 26 98 17

  let%span span56 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/slice/iter/macros.rs" 154 12 154 47

  let%span span57 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 205 20 205 34

  let%span span58 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 199 20 199 24

  let%span span59 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/iter.rs" 89 0 175 1

  let%span span60 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 3020 17 3020 21

  let%span span61 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span62 = "/Users/xavier/Code/cdsat/src/trail.rs" 726 8 726 61

  let%span span63 = "/Users/xavier/Code/cdsat/src/trail.rs" 646 8 648 9

  let%span span64 = "/Users/xavier/Code/cdsat/src/trail.rs" 291 12 291 92

  use Cdsat_Trail_Assignment_Type as Assignment'0

  use prelude.prelude.Slice

  predicate invariant'16 (self : slice (Assignment'0.t_assignment)) =
    [%#span18] true

  predicate inv'16 (_x : slice (Assignment'0.t_assignment))

  axiom inv'16 : forall x : slice (Assignment'0.t_assignment) . inv'16 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  predicate invariant'15 (self : slice (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span18] true

  predicate inv'15 (_x : slice (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'15 : forall x : slice (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'15 x = true

  predicate invariant'14 (self : slice (Assignment'0.t_assignment)) =
    [%#span18] true

  predicate inv'14 (_x : slice (Assignment'0.t_assignment))

  axiom inv'14 : forall x : slice (Assignment'0.t_assignment) . inv'14 x = true

  use seq.Seq

  predicate invariant'13 (self : Seq.seq (Assignment'0.t_assignment)) =
    [%#span18] true

  predicate inv'13 (_x : Seq.seq (Assignment'0.t_assignment))

  axiom inv'13 : forall x : Seq.seq (Assignment'0.t_assignment) . inv'13 x = true

  predicate invariant'12 (self : Seq.seq (Assignment'0.t_assignment)) =
    [%#span18] true

  predicate inv'12 (_x : Seq.seq (Assignment'0.t_assignment))

  axiom inv'12 : forall x : Seq.seq (Assignment'0.t_assignment) . inv'12 x = true

  use prelude.prelude.UIntSize

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  constant max'0 : usize = [%#span19] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'11 (_x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

  function shallow_model'4 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) : Seq.seq (Assignment'0.t_assignment)


  axiom shallow_model'4_spec : forall self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . ([%#span20] inv'11 self)
   -> ([%#span22] inv'12 (shallow_model'4 self))
  && ([%#span21] Seq.length (shallow_model'4 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'11 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span23] inv'12 (shallow_model'4 self)

  axiom inv'11 : forall x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . inv'11 x = true

  predicate invariant'10 (self : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span18] true

  predicate inv'10 (_x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'10 : forall x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'10 x = true

  use seq.Seq

  predicate inv'9 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  function shallow_model'3 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))


  axiom shallow_model'3_spec : forall self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . ([%#span20] inv'9 self)
   -> ([%#span22] inv'10 (shallow_model'3 self))
  && ([%#span21] Seq.length (shallow_model'3 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'9 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span23] inv'10 (shallow_model'3 self)

  axiom inv'9 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'9 x
  = true

  predicate invariant'8 (self : slice (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span18] true

  predicate inv'8 (_x : slice (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'8 : forall x : slice (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'8 x = true

  predicate invariant'7 (self : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span18] true

  predicate inv'7 (_x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'7 : forall x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'7 x = true

  use Cdsat_Term_Term_Type as Term'0

  predicate invariant'6 (self : Term'0.t_term) =
    [%#span18] true

  predicate inv'6 (_x : Term'0.t_term)

  axiom inv'6 : forall x : Term'0.t_term . inv'6 x = true

  use Core_Option_Option_Type as Option'0

  predicate invariant'5 (self : Option'0.t_option (Assignment'0.t_assignment)) =
    [%#span18] true

  predicate inv'5 (_x : Option'0.t_option (Assignment'0.t_assignment))

  axiom inv'5 : forall x : Option'0.t_option (Assignment'0.t_assignment) . inv'5 x = true

  predicate invariant'4 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span18] true

  predicate inv'4 (_x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

  axiom inv'4 : forall x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . inv'4 x = true

  predicate invariant'3 (self : Option'0.t_option (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span18] true

  predicate inv'3 (_x : Option'0.t_option (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'3 : forall x : Option'0.t_option (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'3 x
  = true

  predicate invariant'2 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span18] true

  predicate inv'2 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  axiom inv'2 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'2 x
  = true

  use prelude.prelude.Borrow

  use Core_Slice_Iter_Iter_Type as Iter'0

  use seq.Seq

  use seq.Seq

  use prelude.prelude.Slice

  function shallow_model'14 (self : slice (Assignment'0.t_assignment)) : Seq.seq (Assignment'0.t_assignment)

  axiom shallow_model'14_spec : forall self : slice (Assignment'0.t_assignment) . ([%#span24] inv'16 self)
   -> ([%#span27] inv'12 (shallow_model'14 self))
  && ([%#span26] shallow_model'14 self = Slice.id self)
  && ([%#span25] Seq.length (shallow_model'14 self) <= UIntSize.to_int (max'0 : usize))

  function index_logic'2 [@inline:trivial] (self : slice (Assignment'0.t_assignment)) (ix : int) : Assignment'0.t_assignment

   =
    [%#span28] Seq.get (shallow_model'14 self) ix

  use seq.Seq

  function shallow_model'12 (self : slice (Assignment'0.t_assignment)) : Seq.seq (Assignment'0.t_assignment) =
    [%#span29] shallow_model'14 self

  use seq.Seq

  function to_ref_seq'1 (self : slice (Assignment'0.t_assignment)) : Seq.seq (Assignment'0.t_assignment)

  axiom to_ref_seq'1_spec : forall self : slice (Assignment'0.t_assignment) . ([%#span30] inv'14 self)
   -> ([%#span33] inv'13 (to_ref_seq'1 self))
  && ([%#span32] forall i : int . 0 <= i /\ i < Seq.length (to_ref_seq'1 self)
   -> Seq.get (to_ref_seq'1 self) i = index_logic'2 self i)
  && ([%#span31] Seq.length (to_ref_seq'1 self) = Seq.length (shallow_model'12 self))

  function shallow_model'5 (self : Iter'0.t_iter (Assignment'0.t_assignment)) : slice (Assignment'0.t_assignment)

  predicate produces'1 (self : Iter'0.t_iter (Assignment'0.t_assignment)) (visited : Seq.seq (Assignment'0.t_assignment)) (tl : Iter'0.t_iter (Assignment'0.t_assignment))

   =
    [%#span34] to_ref_seq'1 (shallow_model'5 self) = Seq.(++) visited (to_ref_seq'1 (shallow_model'5 tl))

  function produces_trans'1 (a : Iter'0.t_iter (Assignment'0.t_assignment)) (ab : Seq.seq (Assignment'0.t_assignment)) (b : Iter'0.t_iter (Assignment'0.t_assignment)) (bc : Seq.seq (Assignment'0.t_assignment)) (c : Iter'0.t_iter (Assignment'0.t_assignment)) : ()

   =
    [%#span40] ()

  axiom produces_trans'1_spec : forall a : Iter'0.t_iter (Assignment'0.t_assignment), ab : Seq.seq (Assignment'0.t_assignment), b : Iter'0.t_iter (Assignment'0.t_assignment), bc : Seq.seq (Assignment'0.t_assignment), c : Iter'0.t_iter (Assignment'0.t_assignment) . ([%#span35] produces'1 a ab b)
   -> ([%#span36] produces'1 b bc c)
   -> ([%#span37] inv'13 ab)  -> ([%#span38] inv'13 bc)  -> ([%#span39] produces'1 a (Seq.(++) ab bc) c)

  use seq.Seq

  function produces_refl'1 (self : Iter'0.t_iter (Assignment'0.t_assignment)) : () =
    [%#span42] ()

  axiom produces_refl'1_spec : forall self : Iter'0.t_iter (Assignment'0.t_assignment) . [%#span41] produces'1 self (Seq.empty  : Seq.seq (Assignment'0.t_assignment)) self

  predicate invariant'1 (self : Iter'0.t_iter (Assignment'0.t_assignment)) =
    [%#span18] true

  predicate inv'1 (_x : Iter'0.t_iter (Assignment'0.t_assignment))

  axiom inv'1 : forall x : Iter'0.t_iter (Assignment'0.t_assignment) . inv'1 x = true

  use seq.Seq

  use seq.Seq

  use prelude.prelude.Slice

  function shallow_model'10 (self : slice (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))


  axiom shallow_model'10_spec : forall self : slice (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . ([%#span24] inv'15 self)
   -> ([%#span27] inv'10 (shallow_model'10 self))
  && ([%#span26] shallow_model'10 self = Slice.id self)
  && ([%#span25] Seq.length (shallow_model'10 self) <= UIntSize.to_int (max'0 : usize))

  function index_logic'1 [@inline:trivial] (self : slice (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) (ix : int) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span28] Seq.get (shallow_model'10 self) ix

  use seq.Seq

  function shallow_model'7 (self : slice (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

   =
    [%#span29] shallow_model'10 self

  use seq.Seq

  function to_ref_seq'0 (self : slice (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))


  axiom to_ref_seq'0_spec : forall self : slice (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . ([%#span30] inv'8 self)
   -> ([%#span33] inv'7 (to_ref_seq'0 self))
  && ([%#span32] forall i : int . 0 <= i /\ i < Seq.length (to_ref_seq'0 self)
   -> Seq.get (to_ref_seq'0 self) i = index_logic'1 self i)
  && ([%#span31] Seq.length (to_ref_seq'0 self) = Seq.length (shallow_model'7 self))

  function shallow_model'2 (self : Iter'0.t_iter (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) : slice (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))


  predicate produces'0 (self : Iter'0.t_iter (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) (visited : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) (tl : Iter'0.t_iter (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

   =
    [%#span34] to_ref_seq'0 (shallow_model'2 self) = Seq.(++) visited (to_ref_seq'0 (shallow_model'2 tl))

  function produces_trans'0 (a : Iter'0.t_iter (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) (ab : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) (b : Iter'0.t_iter (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) (bc : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) (c : Iter'0.t_iter (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) : ()

   =
    [%#span40] ()

  axiom produces_trans'0_spec : forall a : Iter'0.t_iter (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)), ab : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)), b : Iter'0.t_iter (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)), bc : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)), c : Iter'0.t_iter (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . ([%#span35] produces'0 a ab b)
   -> ([%#span36] produces'0 b bc c)
   -> ([%#span37] inv'7 ab)  -> ([%#span38] inv'7 bc)  -> ([%#span39] produces'0 a (Seq.(++) ab bc) c)

  use seq.Seq

  function produces_refl'0 (self : Iter'0.t_iter (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) : () =
    [%#span42] ()

  axiom produces_refl'0_spec : forall self : Iter'0.t_iter (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . [%#span41] produces'0 self (Seq.empty  : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) self

  predicate invariant'0 (self : Iter'0.t_iter (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span18] true

  predicate inv'0 (_x : Iter'0.t_iter (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'0 : forall x : Iter'0.t_iter (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'0 x = true

  use prelude.prelude.Snapshot

  use prelude.prelude.Intrinsic

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use prelude.prelude.Real

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  use Cdsat_Term_Value_Type as Value'0

  use Cdsat_Theory_Sort_Type as Sort'1

  use Cdsat_Term_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'1

  function deep_model'6 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'5 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span43] match self with
      | Value'0.C_Bool b -> Value'1.C_Bool b
      | Value'0.C_Rat br -> Value'1.C_Rat (deep_model'6 br)
      end

  use Cdsat_Theory_Var_Type as Var'0

  function deep_model'4 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'0.t_sort) : Sort'1.t_sort =
    [%#span44] match self with
      | Sort'0.C_Boolean -> Sort'1.C_Boolean
      | Sort'0.C_Rational -> Sort'1.C_Rational
      end

  function deep_model'3 (self : usize) : int =
    [%#span45] UIntSize.to_int self

  use Cdsat_Theory_Term_Type as Term'1

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 193 4 193 44] (self : Term'0.t_term) : Term'1.t_term =
    [%#span46] match self with
      | Term'0.C_Variable v s -> Term'1.C_Variable (Var'0.C_Var (deep_model'3 v) (deep_model'4 s))
      | Term'0.C_Value v -> Term'1.C_Value (deep_model'5 v)
      | Term'0.C_Plus l r -> Term'1.C_Plus (deep_model'1 l) (deep_model'1 r)
      | Term'0.C_Eq l r -> Term'1.C_Eq (deep_model'1 l) (deep_model'1 r)
      | Term'0.C_Conj l r -> Term'1.C_Conj (deep_model'1 l) (deep_model'1 r)
      | Term'0.C_Disj l r -> Term'1.C_Disj (deep_model'1 l) (deep_model'1 r)
      | Term'0.C_Neg t -> Term'1.C_Neg (deep_model'1 t)
      | Term'0.C_Impl l r -> Term'1.C_Disj (Term'1.C_Neg (deep_model'1 l)) (deep_model'1 r)
      | Term'0.C_Times l r -> Term'1.C_Plus (Term'1.C_Value (Value'1.C_Rat (deep_model'6 l))) (deep_model'1 r)
      | Term'0.C_Lt l r -> Term'1.C_Eq (deep_model'1 l) (deep_model'1 r)
      end

  function shallow_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 179 4 179 50] (self : Term'0.t_term) : Term'1.t_term
   =
    [%#span47] deep_model'1 self

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  function deep_model'2 (self : Term'0.t_term) : Term'1.t_term =
    [%#span48] deep_model'1 self

  function deep_model'0 (self : Term'0.t_term) : Term'1.t_term =
    [%#span48] deep_model'2 self

  let rec eq'0 (self:Term'0.t_term) (other:Term'0.t_term) (return'  (ret:bool))= {[@expl:precondition] [%#span50] inv'6 other}
    {[@expl:precondition] [%#span49] inv'6 self}
    any [ return' (result:bool)-> {[%#span51] result = (deep_model'0 self = deep_model'0 other)} (! return' {result}) ]

  use Cdsat_Trail_Reason_Type as Reason'0

  use seq.Seq

  predicate resolve'1 (self : borrowed (Iter'0.t_iter (Assignment'0.t_assignment))) =
    [%#span52] self.final = self.current

  use seq.Seq

  function shallow_model'13 (self : borrowed (Iter'0.t_iter (Assignment'0.t_assignment))) : slice (Assignment'0.t_assignment)

   =
    [%#span53] shallow_model'5 self.current

  predicate completed'1 (self : borrowed (Iter'0.t_iter (Assignment'0.t_assignment))) =
    [%#span54] resolve'1 self
    /\ shallow_model'14 (shallow_model'13 self) = (Seq.empty  : Seq.seq (Assignment'0.t_assignment))

  let rec next'1 (self:borrowed (Iter'0.t_iter (Assignment'0.t_assignment))) (return'  (ret:Option'0.t_option (Assignment'0.t_assignment)))= any
    [ return' (result:Option'0.t_option (Assignment'0.t_assignment))-> {[%#span56] inv'5 result}
      {[%#span55] match result with
        | Option'0.C_None -> completed'1 self
        | Option'0.C_Some v -> produces'1 self.current (Seq.singleton v) self.final
        end}
      (! return' {result}) ]


  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  function shallow_model'11 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) : Seq.seq (Assignment'0.t_assignment)

   =
    [%#span29] shallow_model'4 self

  predicate into_iter_post'1 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (res : Iter'0.t_iter (Assignment'0.t_assignment))

   =
    [%#span57] shallow_model'11 self = shallow_model'12 (shallow_model'5 res)

  predicate into_iter_pre'1 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span58] true

  let rec into_iter'1 (self:Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (return'  (ret:Iter'0.t_iter (Assignment'0.t_assignment)))= {[@expl:precondition] [%#span60] inv'4 self}
    {[@expl:precondition] [%#span59] into_iter_pre'1 self}
    any
    [ return' (result:Iter'0.t_iter (Assignment'0.t_assignment))-> {[%#span59] into_iter_post'1 self result}
      (! return' {result}) ]


  use seq.Seq

  predicate resolve'0 (self : borrowed (Iter'0.t_iter (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))) =
    [%#span52] self.final = self.current

  use seq.Seq

  function shallow_model'9 (self : borrowed (Iter'0.t_iter (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))) : slice (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

   =
    [%#span53] shallow_model'2 self.current

  predicate completed'0 (self : borrowed (Iter'0.t_iter (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))))
   =
    [%#span54] resolve'0 self
    /\ shallow_model'10 (shallow_model'9 self)
    = (Seq.empty  : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  let rec next'0 (self:borrowed (Iter'0.t_iter (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))) (return'  (ret:Option'0.t_option (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))))= any
    [ return' (result:Option'0.t_option (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))-> {[%#span56] inv'3 result}
      {[%#span55] match result with
        | Option'0.C_None -> completed'0 self
        | Option'0.C_Some v -> produces'0 self.current (Seq.singleton v) self.final
        end}
      (! return' {result}) ]


  function shallow_model'0 (self : Term'0.t_term) : Term'1.t_term =
    [%#span29] shallow_model'1 self

  function shallow_model'8 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span61] deep_model'5 self

  function term_value'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 725 4 725 61] (self : Assignment'0.t_assignment) : (Term'1.t_term, Value'1.t_value)

   =
    [%#span62] (shallow_model'1 (Cdsat_Trail_Assignment_Type.assignment_term self), shallow_model'8 (Cdsat_Trail_Assignment_Type.assignment_val self))

  use Cdsat_Trail_Trail_Type as Cdsat_Trail_Trail_Type

  use Cdsat_Trail_Trail_Type as Trail'0

  function index_logic'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 645 4 645 77] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : (Term'1.t_term, Value'1.t_value)

   =
    [%#span63] term_value'0 (Seq.get (shallow_model'4 (Seq.get (shallow_model'3 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)))) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)))

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 289 4 289 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex)

   =
    [%#span64] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)
    < Seq.length (shallow_model'3 (Cdsat_Trail_Trail_Type.trail_assignments self))
    /\ UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)
    < Seq.length (shallow_model'4 (Seq.get (shallow_model'3 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))))

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  function shallow_model'6 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

   =
    [%#span29] shallow_model'3 self

  predicate into_iter_post'0 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (res : Iter'0.t_iter (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

   =
    [%#span57] shallow_model'6 self = shallow_model'7 (shallow_model'2 res)

  predicate into_iter_pre'0 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span58] true

  let rec into_iter'0 (self:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (return'  (ret:Iter'0.t_iter (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))))= {[@expl:precondition] [%#span60] inv'2 self}
    {[@expl:precondition] [%#span59] into_iter_pre'0 self}
    any
    [ return' (result:Iter'0.t_iter (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))-> {[%#span59] into_iter_post'0 self result}
      (! return' {result}) ]


  use Cdsat_Theory_Trail_Type as Trail'1

  let rec index_of (self:Trail'0.t_trail) (a:Term'0.t_term) (return'  (ret:Option'0.t_option (TrailIndex'0.t_trailindex)))= (! bb0
    [ bb0 = s0
      [ s0 =  [ &level <- [%#strail0] (0 : usize) ] s1
      | s1 = Trail'0.t_trail {self}
          (fun (rassignments'0:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (rlevel'0:usize) (rghost'0:Snapshot.snap_ty (Trail'1.t_trail)) (rnum_assign'0:usize) ->
            into_iter'0 {rassignments'0}
              (fun (_ret':Iter'0.t_iter (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) ->
                 [ &iter <- _ret' ]
                s2))
      | s2 = bb1 ]

    | bb1 = s0 [ s0 =  [ &iter_old <- [%#strail1] Snapshot.new iter ] s1 | s1 = bb2 ]
    | bb2 = s0
      [ s0 =
        [ &produced <- [%#strail2] Snapshot.new (Seq.empty  : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) ]

        s1
      | s1 = bb3 ]

    | bb3 = bb4
    | bb4 = bb4
      [ bb4 = {[@expl:loop invariant] [%#strail4] UIntSize.to_int level = Seq.length (Snapshot.inner produced)}
        {[@expl:loop invariant] [%#strail3] forall ix : TrailIndex'0.t_trailindex . 0
        <= UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)
        /\ UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix) < Seq.length (Snapshot.inner produced)
         -> contains'0 self ix  -> (let (a, _) = index_logic'0 self ix in a) <> shallow_model'0 a}
        {[@expl:loop invariant] [%#strail3] produces'0 (Snapshot.inner iter_old) (Snapshot.inner produced) iter}
        {[@expl:loop invariant] [%#strail3] inv'0 iter}
        (! s0) [ s0 = bb5 ]
        [ bb5 = s0
          [ s0 = Borrow.borrow_mut <Iter'0.t_iter (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))> {iter}
              (fun (_ret':borrowed (Iter'0.t_iter (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))) ->
                 [ &_19 <- _ret' ]
                 [ &iter <- _19.final ]
                s1)
          | s1 = Borrow.borrow_final
              <Iter'0.t_iter (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))>
              {_19.current}
              {Borrow.get_id _19}
              (fun (_ret':borrowed (Iter'0.t_iter (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))) ->
                 [ &_18 <- _ret' ]
                 [ &_19 <- { _19 with current = _18.final ; } ]
                s2)
          | s2 = next'0 {_18}
              (fun (_ret':Option'0.t_option (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) ->
                 [ &_17 <- _ret' ]
                s3)
          | s3 = bb6 ]

        | bb6 = s0
          [ s0 = -{resolve'0 _19}- s1
          | s1 = any
            [ br0 -> {_17 = Option'0.C_None } (! bb9)
            | br1 (a:Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))-> {_17 = Option'0.C_Some a} (! bb8) ]
             ]

        | bb8 = bb10
        | bb10 = s0
          [ s0 = Option'0.some <Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)> {_17}
              (fun (r0'0:Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) ->
                 [ &__creusot_proc_iter_elem <- r0'0 ]
                s1)
          | s1 =
            [ &_22 <- [%#strail5] Snapshot.new (Seq.(++) (Snapshot.inner produced) (Seq.singleton __creusot_proc_iter_elem)) ]

            s2
          | s2 = bb11 ]

        | bb11 = s0
          [ s0 =  [ &produced <- _22 ]
            (any
            [ any_ (_any:Snapshot.snap_ty (Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))))-> (!
              [ &_22 <- _any ]

              s1) ]
            )
          | s1 =  [ &assignments <- __creusot_proc_iter_elem ] s2
          | s2 =  [ &offset <- [%#strail6] (0 : usize) ] s3
          | s3 = into_iter'1 {assignments}
              (fun (_ret':Iter'0.t_iter (Assignment'0.t_assignment)) ->  [ &iter1 <- _ret' ] s4)
          | s4 = bb12 ]

        | bb12 = s0 [ s0 =  [ &iter_old1 <- [%#strail7] Snapshot.new iter1 ] s1 | s1 = bb13 ]
        | bb13 = s0
          [ s0 =  [ &produced1 <- [%#strail8] Snapshot.new (Seq.empty  : Seq.seq (Assignment'0.t_assignment)) ] s1
          | s1 = bb14 ]

        | bb14 = bb15
        | bb15 = bb15
          [ bb15 = {[@expl:loop invariant] [%#strail9] forall ix : TrailIndex'0.t_trailindex . Cdsat_Trail_TrailIndex_Type.trailindex_0 ix
            = level
             -> Cdsat_Trail_TrailIndex_Type.trailindex_1 ix < offset
             -> contains'0 self ix  -> (let (a, _) = index_logic'0 self ix in a) <> shallow_model'0 a}
            {[@expl:loop invariant] [%#strail10] UIntSize.to_int offset = Seq.length (Snapshot.inner produced1)}
            {[@expl:loop invariant] [%#strail9] produces'1 (Snapshot.inner iter_old1) (Snapshot.inner produced1) iter1}
            {[@expl:loop invariant] [%#strail9] inv'1 iter1}
            (! s0) [ s0 = bb16 ]
            [ bb16 = s0
              [ s0 = Borrow.borrow_mut <Iter'0.t_iter (Assignment'0.t_assignment)> {iter1}
                  (fun (_ret':borrowed (Iter'0.t_iter (Assignment'0.t_assignment))) ->
                     [ &_39 <- _ret' ]
                     [ &iter1 <- _39.final ]
                    s1)
              | s1 = Borrow.borrow_final <Iter'0.t_iter (Assignment'0.t_assignment)> {_39.current} {Borrow.get_id _39}
                  (fun (_ret':borrowed (Iter'0.t_iter (Assignment'0.t_assignment))) ->
                     [ &_38 <- _ret' ]
                     [ &_39 <- { _39 with current = _38.final ; } ]
                    s2)
              | s2 = next'1 {_38} (fun (_ret':Option'0.t_option (Assignment'0.t_assignment)) ->  [ &_37 <- _ret' ] s3)
              | s3 = bb17 ]

            | bb17 = s0
              [ s0 = -{resolve'1 _39}- s1
              | s1 = any
                [ br0 -> {_37 = Option'0.C_None } (! bb20)
                | br1 (a:Assignment'0.t_assignment)-> {_37 = Option'0.C_Some a} (! bb19) ]
                 ]

            | bb19 = bb21
            | bb21 = s0
              [ s0 = Option'0.some <Assignment'0.t_assignment> {_37}
                  (fun (r0'0:Assignment'0.t_assignment) ->  [ &__creusot_proc_iter_elem1 <- r0'0 ] s1)
              | s1 =
                [ &_42 <- [%#strail11] Snapshot.new (Seq.(++) (Snapshot.inner produced1) (Seq.singleton __creusot_proc_iter_elem1)) ]

                s2
              | s2 = bb22 ]

            | bb22 = s0
              [ s0 =  [ &produced1 <- _42 ]
                (any [ any_ (_any:Snapshot.snap_ty (Seq.seq (Assignment'0.t_assignment)))-> (!  [ &_42 <- _any ] s1) ] )
              | s1 =  [ &asgn <- __creusot_proc_iter_elem1 ] s2
              | s2 =  [ &ix <- TrailIndex'0.C_TrailIndex level offset ] s3
              | s3 = {[@expl:assertion] [%#strail12] contains'0 self ix} s4
              | s4 = Assignment'0.t_assignment {asgn}
                  (fun (rterm'0:Term'0.t_term) (rval'0:Value'0.t_value) (rreason'0:Reason'0.t_reason) (rlevel'0:usize) ->
                    eq'0 {rterm'0} {a} (fun (_ret':bool) ->  [ &_51 <- _ret' ] s5))
              | s5 = bb23 ]

            | bb23 = any [ br0 -> {_51 = false} (! bb25) | br1 -> {_51} (! bb24) ]
            | bb25 = s0
              [ s0 = UIntSize.add {offset} {[%#strail13] (1 : usize)} (fun (_ret':usize) ->  [ &offset <- _ret' ] s1)
              | s1 = bb15 ]
               ]
             ]

        | bb20 = s0
          [ s0 = UIntSize.add {level} {[%#strail14] (1 : usize)} (fun (_ret':usize) ->  [ &level <- _ret' ] s1)
          | s1 = bb4 ]
           ]
         ]

    | bb7 = {[%#strail3] false} any
    | bb18 = {[%#strail9] false} any
    | bb24 = s0
      [ s0 = {[@expl:assertion] [%#strail15] (let (a, _) = index_logic'0 self ix in a)
        = shallow_model'1 (Cdsat_Trail_Assignment_Type.assignment_term asgn)}
        s1
      | s1 = {[@expl:assertion] [%#strail16] shallow_model'1 (Cdsat_Trail_Assignment_Type.assignment_term asgn)
        = shallow_model'0 a}
        s2
      | s2 =  [ &_0 <- Option'0.C_Some ix ] s3
      | s3 = bb26 ]

    | bb9 = s0 [ s0 =  [ &_0 <- Option'0.C_None ] s1 | s1 = bb26 ]
    | bb26 = return' {_0} ]
    )
    [ & _0 : Option'0.t_option (TrailIndex'0.t_trailindex) = any_l ()
    | & self : Trail'0.t_trail = self
    | & a : Term'0.t_term = a
    | & level : usize = any_l ()
    | & iter : Iter'0.t_iter (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) = any_l ()
    | & iter_old : Snapshot.snap_ty (Iter'0.t_iter (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) = any_l ()
    | & produced : Snapshot.snap_ty (Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) = any_l ()
    | & _17 : Option'0.t_option (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) = any_l ()
    | & _18 : borrowed (Iter'0.t_iter (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) = any_l ()
    | & _19 : borrowed (Iter'0.t_iter (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) = any_l ()
    | & __creusot_proc_iter_elem : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) = any_l ()
    | & _22 : Snapshot.snap_ty (Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) = any_l ()
    | & assignments : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) = any_l ()
    | & offset : usize = any_l ()
    | & iter1 : Iter'0.t_iter (Assignment'0.t_assignment) = any_l ()
    | & iter_old1 : Snapshot.snap_ty (Iter'0.t_iter (Assignment'0.t_assignment)) = any_l ()
    | & produced1 : Snapshot.snap_ty (Seq.seq (Assignment'0.t_assignment)) = any_l ()
    | & _37 : Option'0.t_option (Assignment'0.t_assignment) = any_l ()
    | & _38 : borrowed (Iter'0.t_iter (Assignment'0.t_assignment)) = any_l ()
    | & _39 : borrowed (Iter'0.t_iter (Assignment'0.t_assignment)) = any_l ()
    | & __creusot_proc_iter_elem1 : Assignment'0.t_assignment = any_l ()
    | & _42 : Snapshot.snap_ty (Seq.seq (Assignment'0.t_assignment)) = any_l ()
    | & asgn : Assignment'0.t_assignment = any_l ()
    | & ix : TrailIndex'0.t_trailindex = any_l ()
    | & _51 : bool = any_l () ]

    [ return' (result:Option'0.t_option (TrailIndex'0.t_trailindex))-> {[@expl:postcondition] [%#strail17] match result with
        | Option'0.C_Some x -> contains'0 self x /\ (let (a, _) = index_logic'0 self x in a) = shallow_model'0 a
        | Option'0.C_None -> forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
         -> (let (a, _) = index_logic'0 self ix in a) <> shallow_model'0 a
        end}
      (! return' {result}) ]

end
module Cdsat_Term_Impl21_Clone
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 230 9 230 14

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span2 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/clone.rs" 7 0 20 1

  let%span span3 = "/Users/xavier/.cargo/registry/src/index.crates.io-6f17d22bba15001f/num-rational-0.3.2/src/lib.rs" 50 15 50 20

  let%span span4 = "/Users/xavier/.cargo/registry/src/index.crates.io-6f17d22bba15001f/num-rational-0.3.2/src/lib.rs" 50 15 50 20

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  predicate invariant'1 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) =
    [%#span1] true

  predicate inv'1 (_x : Ratio'0.t_ratio (BigInt'0.t_bigint))

  axiom inv'1 : forall x : Ratio'0.t_ratio (BigInt'0.t_bigint) . inv'1 x = true

  predicate invariant'0 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) =
    [%#span1] true

  predicate inv'0 (_x : Ratio'0.t_ratio (BigInt'0.t_bigint))

  axiom inv'0 : forall x : Ratio'0.t_ratio (BigInt'0.t_bigint) . inv'0 x = true

  use prelude.prelude.Borrow

  use prelude.prelude.Intrinsic

  let rec clone'1 (self:bool) (return'  (ret:bool))= any
    [ return' (result:bool)-> {[%#span2] result = self} (! return' {result}) ]


  let rec clone'0 (self:Ratio'0.t_ratio (BigInt'0.t_bigint)) (return'  (ret:Ratio'0.t_ratio (BigInt'0.t_bigint)))= {[@expl:precondition] [%#span3] inv'0 self}
    any
    [ return' (result:Ratio'0.t_ratio (BigInt'0.t_bigint))-> {[%#span4] inv'1 result}
      {[%#span2] result = self}
      (! return' {result}) ]


  use Cdsat_Term_Value_Type as Value'0

  let rec clone' (self:Value'0.t_value) (return'  (ret:Value'0.t_value))= (! bb0
    [ bb0 = any
      [ br0 (a:bool)-> {self = Value'0.C_Bool a} (! bb2)
      | br1 (a:Ratio'0.t_ratio (BigInt'0.t_bigint))-> {self = Value'0.C_Rat a} (! bb3) ]

    | bb1 = {[%#sterm0] false} any
    | bb3 = s0
      [ s0 = Value'0.rat {self} (fun (r0'0:Ratio'0.t_ratio (BigInt'0.t_bigint)) ->  [ &v0_11 <- r0'0 ] s1)
      | s1 =  [ &_11 <- v0_11 ] s2
      | s2 = clone'0 {_11} (fun (_ret':Ratio'0.t_ratio (BigInt'0.t_bigint)) ->  [ &_9 <- _ret' ] s3)
      | s3 = bb6 ]

    | bb6 = s0
      [ s0 =  [ &_0 <- Value'0.C_Rat _9 ]
        (any [ any_ (_any:Ratio'0.t_ratio (BigInt'0.t_bigint))-> (!  [ &_9 <- _any ] s1) ] )
      | s1 = bb7 ]

    | bb7 = bb8
    | bb2 = bb4
    | bb4 = s0
      [ s0 = Value'0.bool {self} (fun (r0'0:bool) ->  [ &v0_1 <- r0'0 ] s1)
      | s1 =  [ &_7 <- v0_1 ] s2
      | s2 = clone'1 {_7} (fun (_ret':bool) ->  [ &_5 <- _ret' ] s3)
      | s3 = bb5 ]

    | bb5 = s0 [ s0 =  [ &_0 <- Value'0.C_Bool _5 ] (any [ any_ (_any:bool)-> (!  [ &_5 <- _any ] s1) ] ) | s1 = bb8 ]
    | bb8 = return' {_0} ]
    )
    [ & _0 : Value'0.t_value = any_l ()
    | & self : Value'0.t_value = self
    | & v0_1 : bool = any_l ()
    | & _5 : bool = any_l ()
    | & _7 : bool = any_l ()
    | & v0_11 : Ratio'0.t_ratio (BigInt'0.t_bigint) = any_l ()
    | & _9 : Ratio'0.t_ratio (BigInt'0.t_bigint) = any_l ()
    | & _11 : Ratio'0.t_ratio (BigInt'0.t_bigint) = any_l () ]
     [ return' (result:Value'0.t_value)-> {[@expl:postcondition] [%#sterm0] result = self} (! return' {result}) ]
end
module Cdsat_Term_Impl11_Clone
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 14 9 14 14

  use prelude.prelude.Borrow

  use prelude.prelude.Intrinsic

  use Cdsat_Term_Sort_Type as Sort'0

  let rec clone' (self:Sort'0.t_sort) (return'  (ret:Sort'0.t_sort))= (! bb0
    [ bb0 = any [ br0 -> {self = Sort'0.C_Boolean } (! bb2) | br1 -> {self = Sort'0.C_Rational } (! bb3) ]
    | bb1 = {[%#sterm0] false} any
    | bb3 = s0 [ s0 =  [ &_0 <- Sort'0.C_Rational ] s1 | s1 = bb5 ]
    | bb2 = bb4
    | bb4 = s0 [ s0 =  [ &_0 <- Sort'0.C_Boolean ] s1 | s1 = bb5 ]
    | bb5 = return' {_0} ]
    ) [ & _0 : Sort'0.t_sort = any_l () | & self : Sort'0.t_sort = self ]
    [ return' (result:Sort'0.t_sort)-> {[@expl:postcondition] [%#sterm0] result = self} (! return' {result}) ]

end
module Alloc_Boxed_Box_Type
  use Core_Ptr_Unique_Unique_Type as Unique'0

  type t_box 't 'a =
    | C_Box (Unique'0.t_unique 't) 'a

  function any_l (_ : 'b) : 'a
end
module Cdsat_Term_Impl17_Clone
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 33 9 33 14

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span2 = "/Users/xavier/Code/cdsat/src/term.rs" 14 9 14 14

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/clone.rs" 7 0 20 1

  let%span span4 = "/Users/xavier/Code/cdsat/src/term.rs" 230 9 230 14

  let%span span5 = "/Users/xavier/.cargo/registry/src/index.crates.io-6f17d22bba15001f/num-rational-0.3.2/src/lib.rs" 50 15 50 20

  let%span span6 = "/Users/xavier/.cargo/registry/src/index.crates.io-6f17d22bba15001f/num-rational-0.3.2/src/lib.rs" 50 15 50 20

  let%span span7 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/boxed.rs" 1305 14 1305 18

  let%span span8 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/boxed.rs" 1305 4 1305 27

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  predicate invariant'3 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) =
    [%#span1] true

  predicate inv'3 (_x : Ratio'0.t_ratio (BigInt'0.t_bigint))

  axiom inv'3 : forall x : Ratio'0.t_ratio (BigInt'0.t_bigint) . inv'3 x = true

  predicate invariant'2 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) =
    [%#span1] true

  predicate inv'2 (_x : Ratio'0.t_ratio (BigInt'0.t_bigint))

  axiom inv'2 : forall x : Ratio'0.t_ratio (BigInt'0.t_bigint) . inv'2 x = true

  use Cdsat_Term_Term_Type as Term'0

  predicate invariant'1 (self : Term'0.t_term) =
    [%#span1] true

  predicate inv'1 (_x : Term'0.t_term)

  axiom inv'1 : forall x : Term'0.t_term . inv'1 x = true

  predicate invariant'0 (self : Term'0.t_term) =
    [%#span1] true

  predicate inv'0 (_x : Term'0.t_term)

  axiom inv'0 : forall x : Term'0.t_term . inv'0 x = true

  use prelude.prelude.Borrow

  use prelude.prelude.Intrinsic

  use Cdsat_Term_Sort_Type as Sort'0

  let rec clone'4 (self:Sort'0.t_sort) (return'  (ret:Sort'0.t_sort))= any
    [ return' (result:Sort'0.t_sort)-> {[%#span2] result = self} (! return' {result}) ]


  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  let rec clone'3 (self:usize) (return'  (ret:usize))= any
    [ return' (result:usize)-> {[%#span3] result = self} (! return' {result}) ]


  use Cdsat_Term_Value_Type as Value'0

  let rec clone'2 (self:Value'0.t_value) (return'  (ret:Value'0.t_value))= any
    [ return' (result:Value'0.t_value)-> {[%#span4] result = self} (! return' {result}) ]


  let rec clone'1 (self:Ratio'0.t_ratio (BigInt'0.t_bigint)) (return'  (ret:Ratio'0.t_ratio (BigInt'0.t_bigint)))= {[@expl:precondition] [%#span5] inv'2 self}
    any
    [ return' (result:Ratio'0.t_ratio (BigInt'0.t_bigint))-> {[%#span6] inv'3 result}
      {[%#span3] result = self}
      (! return' {result}) ]


  use Alloc_Alloc_Global_Type as Global'0

  let rec clone'0 (self:Term'0.t_term) (return'  (ret:Term'0.t_term))= {[@expl:precondition] [%#span7] inv'0 self}
    any [ return' (result:Term'0.t_term)-> {[%#span8] inv'1 result} {[%#span3] result = self} (! return' {result}) ]

  let rec clone' (self:Term'0.t_term) (return'  (ret:Term'0.t_term))= (! bb0
    [ bb0 = any
      [ br0 (a:usize) (b:Sort'0.t_sort)-> {self = Term'0.C_Variable a b} (! bb2)
      | br1 (a:Value'0.t_value)-> {self = Term'0.C_Value a} (! bb3)
      | br2 (a:Term'0.t_term) (b:Term'0.t_term)-> {self = Term'0.C_Plus a b} (! bb4)
      | br3 (a:Ratio'0.t_ratio (BigInt'0.t_bigint)) (b:Term'0.t_term)-> {self = Term'0.C_Times a b} (! bb5)
      | br4 (a:Term'0.t_term) (b:Term'0.t_term)-> {self = Term'0.C_Eq a b} (! bb6)
      | br5 (a:Term'0.t_term) (b:Term'0.t_term)-> {self = Term'0.C_Lt a b} (! bb7)
      | br6 (a:Term'0.t_term) (b:Term'0.t_term)-> {self = Term'0.C_Conj a b} (! bb8)
      | br7 (a:Term'0.t_term)-> {self = Term'0.C_Neg a} (! bb9)
      | br8 (a:Term'0.t_term) (b:Term'0.t_term)-> {self = Term'0.C_Disj a b} (! bb10)
      | br9 (a:Term'0.t_term) (b:Term'0.t_term)-> {self = Term'0.C_Impl a b} (! bb11) ]

    | bb1 = {[%#sterm0] false} any
    | bb11 = s0
      [ s0 = Term'0.impl {self} (fun (r0'0:Term'0.t_term) (r1'0:Term'0.t_term) ->  [ &v0_19 <- r0'0 ] s1)
      | s1 = Term'0.impl {self} (fun (r0'1:Term'0.t_term) (r1'1:Term'0.t_term) ->  [ &v1_17 <- r1'1 ] s2)
      | s2 =  [ &_72 <- v0_19 ] s3
      | s3 = clone'0 {_72} (fun (_ret':Term'0.t_term) ->  [ &_70 <- _ret' ] s4)
      | s4 = bb51 ]

    | bb51 = s0
      [ s0 =  [ &_75 <- v1_17 ] s1
      | s1 = clone'0 {_75} (fun (_ret':Term'0.t_term) ->  [ &_73 <- _ret' ] s2)
      | s2 = bb52 ]

    | bb52 = s0
      [ s0 =  [ &_0 <- Term'0.C_Impl _70 _73 ]
        (any
        [ any_ (_any:Term'0.t_term)-> (!  [ &_70 <- _any ]
          (any [ any_ (_any:Term'0.t_term)-> (!  [ &_73 <- _any ] s1) ] )) ]
        )
      | s1 = bb53 ]

    | bb53 = bb54
    | bb54 = bb55
    | bb10 = bb46
    | bb46 = s0
      [ s0 = Term'0.disj {self} (fun (r0'0:Term'0.t_term) (r1'0:Term'0.t_term) ->  [ &v0_18 <- r0'0 ] s1)
      | s1 = Term'0.disj {self} (fun (r0'1:Term'0.t_term) (r1'1:Term'0.t_term) ->  [ &v1_16 <- r1'1 ] s2)
      | s2 =  [ &_64 <- v0_18 ] s3
      | s3 = clone'0 {_64} (fun (_ret':Term'0.t_term) ->  [ &_62 <- _ret' ] s4)
      | s4 = bb47 ]

    | bb47 = s0
      [ s0 =  [ &_67 <- v1_16 ] s1
      | s1 = clone'0 {_67} (fun (_ret':Term'0.t_term) ->  [ &_65 <- _ret' ] s2)
      | s2 = bb48 ]

    | bb48 = s0
      [ s0 =  [ &_0 <- Term'0.C_Disj _62 _65 ]
        (any
        [ any_ (_any:Term'0.t_term)-> (!  [ &_62 <- _any ]
          (any [ any_ (_any:Term'0.t_term)-> (!  [ &_65 <- _any ] s1) ] )) ]
        )
      | s1 = bb49 ]

    | bb49 = bb50
    | bb50 = bb55
    | bb9 = bb43
    | bb43 = s0
      [ s0 = Term'0.neg {self} (fun (r0'0:Term'0.t_term) ->  [ &v0_17 <- r0'0 ] s1)
      | s1 =  [ &_59 <- v0_17 ] s2
      | s2 = clone'0 {_59} (fun (_ret':Term'0.t_term) ->  [ &_57 <- _ret' ] s3)
      | s3 = bb44 ]

    | bb44 = s0
      [ s0 =  [ &_0 <- Term'0.C_Neg _57 ] (any [ any_ (_any:Term'0.t_term)-> (!  [ &_57 <- _any ] s1) ] ) | s1 = bb45 ]

    | bb45 = bb55
    | bb8 = bb38
    | bb38 = s0
      [ s0 = Term'0.conj {self} (fun (r0'0:Term'0.t_term) (r1'0:Term'0.t_term) ->  [ &v0_16 <- r0'0 ] s1)
      | s1 = Term'0.conj {self} (fun (r0'1:Term'0.t_term) (r1'1:Term'0.t_term) ->  [ &v1_15 <- r1'1 ] s2)
      | s2 =  [ &_52 <- v0_16 ] s3
      | s3 = clone'0 {_52} (fun (_ret':Term'0.t_term) ->  [ &_50 <- _ret' ] s4)
      | s4 = bb39 ]

    | bb39 = s0
      [ s0 =  [ &_55 <- v1_15 ] s1
      | s1 = clone'0 {_55} (fun (_ret':Term'0.t_term) ->  [ &_53 <- _ret' ] s2)
      | s2 = bb40 ]

    | bb40 = s0
      [ s0 =  [ &_0 <- Term'0.C_Conj _50 _53 ]
        (any
        [ any_ (_any:Term'0.t_term)-> (!  [ &_50 <- _any ]
          (any [ any_ (_any:Term'0.t_term)-> (!  [ &_53 <- _any ] s1) ] )) ]
        )
      | s1 = bb41 ]

    | bb41 = bb42
    | bb42 = bb55
    | bb7 = bb33
    | bb33 = s0
      [ s0 = Term'0.lt {self} (fun (r0'0:Term'0.t_term) (r1'0:Term'0.t_term) ->  [ &v0_15 <- r0'0 ] s1)
      | s1 = Term'0.lt {self} (fun (r0'1:Term'0.t_term) (r1'1:Term'0.t_term) ->  [ &v1_14 <- r1'1 ] s2)
      | s2 =  [ &_44 <- v0_15 ] s3
      | s3 = clone'0 {_44} (fun (_ret':Term'0.t_term) ->  [ &_42 <- _ret' ] s4)
      | s4 = bb34 ]

    | bb34 = s0
      [ s0 =  [ &_47 <- v1_14 ] s1
      | s1 = clone'0 {_47} (fun (_ret':Term'0.t_term) ->  [ &_45 <- _ret' ] s2)
      | s2 = bb35 ]

    | bb35 = s0
      [ s0 =  [ &_0 <- Term'0.C_Lt _42 _45 ]
        (any
        [ any_ (_any:Term'0.t_term)-> (!  [ &_42 <- _any ]
          (any [ any_ (_any:Term'0.t_term)-> (!  [ &_45 <- _any ] s1) ] )) ]
        )
      | s1 = bb36 ]

    | bb36 = bb37
    | bb37 = bb55
    | bb6 = bb28
    | bb28 = s0
      [ s0 = Term'0.eq {self} (fun (r0'0:Term'0.t_term) (r1'0:Term'0.t_term) ->  [ &v0_14 <- r0'0 ] s1)
      | s1 = Term'0.eq {self} (fun (r0'1:Term'0.t_term) (r1'1:Term'0.t_term) ->  [ &v1_13 <- r1'1 ] s2)
      | s2 =  [ &_36 <- v0_14 ] s3
      | s3 = clone'0 {_36} (fun (_ret':Term'0.t_term) ->  [ &_34 <- _ret' ] s4)
      | s4 = bb29 ]

    | bb29 = s0
      [ s0 =  [ &_39 <- v1_13 ] s1
      | s1 = clone'0 {_39} (fun (_ret':Term'0.t_term) ->  [ &_37 <- _ret' ] s2)
      | s2 = bb30 ]

    | bb30 = s0
      [ s0 =  [ &_0 <- Term'0.C_Eq _34 _37 ]
        (any
        [ any_ (_any:Term'0.t_term)-> (!  [ &_34 <- _any ]
          (any [ any_ (_any:Term'0.t_term)-> (!  [ &_37 <- _any ] s1) ] )) ]
        )
      | s1 = bb31 ]

    | bb31 = bb32
    | bb32 = bb55
    | bb5 = bb23
    | bb23 = s0
      [ s0 = Term'0.times {self}
          (fun (r0'0:Ratio'0.t_ratio (BigInt'0.t_bigint)) (r1'0:Term'0.t_term) ->  [ &v0_13 <- r0'0 ] s1)
      | s1 = Term'0.times {self}
          (fun (r0'1:Ratio'0.t_ratio (BigInt'0.t_bigint)) (r1'1:Term'0.t_term) ->  [ &v1_12 <- r1'1 ] s2)
      | s2 =  [ &_28 <- v0_13 ] s3
      | s3 = clone'1 {_28} (fun (_ret':Ratio'0.t_ratio (BigInt'0.t_bigint)) ->  [ &_26 <- _ret' ] s4)
      | s4 = bb24 ]

    | bb24 = s0
      [ s0 =  [ &_31 <- v1_12 ] s1
      | s1 = clone'0 {_31} (fun (_ret':Term'0.t_term) ->  [ &_29 <- _ret' ] s2)
      | s2 = bb25 ]

    | bb25 = s0
      [ s0 =  [ &_0 <- Term'0.C_Times _26 _29 ]
        (any
        [ any_ (_any:Ratio'0.t_ratio (BigInt'0.t_bigint))-> (!  [ &_26 <- _any ]
          (any [ any_ (_any:Term'0.t_term)-> (!  [ &_29 <- _any ] s1) ] )) ]
        )
      | s1 = bb26 ]

    | bb26 = bb27
    | bb27 = bb55
    | bb4 = bb18
    | bb18 = s0
      [ s0 = Term'0.plus {self} (fun (r0'0:Term'0.t_term) (r1'0:Term'0.t_term) ->  [ &v0_12 <- r0'0 ] s1)
      | s1 = Term'0.plus {self} (fun (r0'1:Term'0.t_term) (r1'1:Term'0.t_term) ->  [ &v1_11 <- r1'1 ] s2)
      | s2 =  [ &_20 <- v0_12 ] s3
      | s3 = clone'0 {_20} (fun (_ret':Term'0.t_term) ->  [ &_18 <- _ret' ] s4)
      | s4 = bb19 ]

    | bb19 = s0
      [ s0 =  [ &_23 <- v1_11 ] s1
      | s1 = clone'0 {_23} (fun (_ret':Term'0.t_term) ->  [ &_21 <- _ret' ] s2)
      | s2 = bb20 ]

    | bb20 = s0
      [ s0 =  [ &_0 <- Term'0.C_Plus _18 _21 ]
        (any
        [ any_ (_any:Term'0.t_term)-> (!  [ &_18 <- _any ]
          (any [ any_ (_any:Term'0.t_term)-> (!  [ &_21 <- _any ] s1) ] )) ]
        )
      | s1 = bb21 ]

    | bb21 = bb22
    | bb22 = bb55
    | bb3 = bb15
    | bb15 = s0
      [ s0 = Term'0.value {self} (fun (r0'0:Value'0.t_value) ->  [ &v0_11 <- r0'0 ] s1)
      | s1 =  [ &_15 <- v0_11 ] s2
      | s2 = clone'2 {_15} (fun (_ret':Value'0.t_value) ->  [ &_13 <- _ret' ] s3)
      | s3 = bb16 ]

    | bb16 = s0
      [ s0 =  [ &_0 <- Term'0.C_Value _13 ] (any [ any_ (_any:Value'0.t_value)-> (!  [ &_13 <- _any ] s1) ] )
      | s1 = bb17 ]

    | bb17 = bb55
    | bb2 = bb12
    | bb12 = s0
      [ s0 = Term'0.variable {self} (fun (r0'0:usize) (r1'0:Sort'0.t_sort) ->  [ &v0_1 <- r0'0 ] s1)
      | s1 = Term'0.variable {self} (fun (r0'1:usize) (r1'1:Sort'0.t_sort) ->  [ &v1_1 <- r1'1 ] s2)
      | s2 =  [ &_8 <- v0_1 ] s3
      | s3 = clone'3 {_8} (fun (_ret':usize) ->  [ &_6 <- _ret' ] s4)
      | s4 = bb13 ]

    | bb13 = s0
      [ s0 =  [ &_11 <- v1_1 ] s1 | s1 = clone'4 {_11} (fun (_ret':Sort'0.t_sort) ->  [ &_9 <- _ret' ] s2) | s2 = bb14 ]

    | bb14 = s0
      [ s0 =  [ &_0 <- Term'0.C_Variable _6 _9 ]
        (any
        [ any_ (_any:usize)-> (!  [ &_6 <- _any ] (any [ any_ (_any:Sort'0.t_sort)-> (!  [ &_9 <- _any ] s1) ] )) ]
        )
      | s1 = bb55 ]

    | bb55 = return' {_0} ]
    )
    [ & _0 : Term'0.t_term = any_l ()
    | & self : Term'0.t_term = self
    | & v0_1 : usize = any_l ()
    | & v1_1 : Sort'0.t_sort = any_l ()
    | & _6 : usize = any_l ()
    | & _8 : usize = any_l ()
    | & _9 : Sort'0.t_sort = any_l ()
    | & _11 : Sort'0.t_sort = any_l ()
    | & v0_11 : Value'0.t_value = any_l ()
    | & _13 : Value'0.t_value = any_l ()
    | & _15 : Value'0.t_value = any_l ()
    | & v0_12 : Term'0.t_term = any_l ()
    | & v1_11 : Term'0.t_term = any_l ()
    | & _18 : Term'0.t_term = any_l ()
    | & _20 : Term'0.t_term = any_l ()
    | & _21 : Term'0.t_term = any_l ()
    | & _23 : Term'0.t_term = any_l ()
    | & v0_13 : Ratio'0.t_ratio (BigInt'0.t_bigint) = any_l ()
    | & v1_12 : Term'0.t_term = any_l ()
    | & _26 : Ratio'0.t_ratio (BigInt'0.t_bigint) = any_l ()
    | & _28 : Ratio'0.t_ratio (BigInt'0.t_bigint) = any_l ()
    | & _29 : Term'0.t_term = any_l ()
    | & _31 : Term'0.t_term = any_l ()
    | & v0_14 : Term'0.t_term = any_l ()
    | & v1_13 : Term'0.t_term = any_l ()
    | & _34 : Term'0.t_term = any_l ()
    | & _36 : Term'0.t_term = any_l ()
    | & _37 : Term'0.t_term = any_l ()
    | & _39 : Term'0.t_term = any_l ()
    | & v0_15 : Term'0.t_term = any_l ()
    | & v1_14 : Term'0.t_term = any_l ()
    | & _42 : Term'0.t_term = any_l ()
    | & _44 : Term'0.t_term = any_l ()
    | & _45 : Term'0.t_term = any_l ()
    | & _47 : Term'0.t_term = any_l ()
    | & v0_16 : Term'0.t_term = any_l ()
    | & v1_15 : Term'0.t_term = any_l ()
    | & _50 : Term'0.t_term = any_l ()
    | & _52 : Term'0.t_term = any_l ()
    | & _53 : Term'0.t_term = any_l ()
    | & _55 : Term'0.t_term = any_l ()
    | & v0_17 : Term'0.t_term = any_l ()
    | & _57 : Term'0.t_term = any_l ()
    | & _59 : Term'0.t_term = any_l ()
    | & v0_18 : Term'0.t_term = any_l ()
    | & v1_16 : Term'0.t_term = any_l ()
    | & _62 : Term'0.t_term = any_l ()
    | & _64 : Term'0.t_term = any_l ()
    | & _65 : Term'0.t_term = any_l ()
    | & _67 : Term'0.t_term = any_l ()
    | & v0_19 : Term'0.t_term = any_l ()
    | & v1_17 : Term'0.t_term = any_l ()
    | & _70 : Term'0.t_term = any_l ()
    | & _72 : Term'0.t_term = any_l ()
    | & _73 : Term'0.t_term = any_l ()
    | & _75 : Term'0.t_term = any_l () ]
     [ return' (result:Term'0.t_term)-> {[@expl:postcondition] [%#sterm0] result = self} (! return' {result}) ]
end
module Cdsat_Trail_Impl5_CmpLeLog_Impl
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 102 14 102 64

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span2 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span3 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  let%span span4 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 14 70 15

  let%span span5 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 23 70 24

  let%span span6 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 69 14 69 59

  let%span span7 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 64 15 64 48

  let%span span8 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 16 66 17

  let%span span9 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 25 66 26

  let%span span10 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 65 14 65 44

  let%span span11 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 59 15 59 45

  let%span span12 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 16 61 17

  let%span span13 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 25 61 26

  let%span span14 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 60 14 60 47

  let%span span15 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 53 15 53 32

  let%span span16 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 54 15 54 32

  let%span span17 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 13 56 14

  let%span span18 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 22 56 23

  let%span span19 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 31 56 32

  let%span span20 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 55 14 55 31

  let%span span21 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 50 12 50 13

  let%span span22 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 49 14 49 45

  let%span span23 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 41 20 41 56

  let%span span24 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 18 46 19

  let%span span25 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 27 46 28

  let%span span26 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 45 14 45 64

  let%span span27 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 31 20 31 53

  let%span span28 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 18 36 19

  let%span span29 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 27 36 28

  let%span span30 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 35 14 35 61

  let%span span31 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 21 20 21 53

  let%span span32 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 18 26 19

  let%span span33 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 27 26 28

  let%span span34 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 25 14 25 61

  let%span span35 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 11 20 11 56

  let%span span36 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 18 16 19

  let%span span37 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 27 16 28

  let%span span38 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 15 14 15 64

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  predicate invariant'0 (self : TrailIndex'0.t_trailindex) =
    [%#span1] true

  predicate inv'0 (_x : TrailIndex'0.t_trailindex)

  axiom inv'0 : forall x : TrailIndex'0.t_trailindex . inv'0 x = true

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function eq_cmp'1 (_1 : usize) (_2 : usize) : ()

  function antisym2'1 (_1 : usize) (_2 : usize) : ()

  function antisym1'1 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'1 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'1 (_1 : usize) : ()

  function cmp_gt_log'1 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'1 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'1 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'1 (_1 : usize) (_2 : usize) : ()

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span2] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span3] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  function eq_cmp'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom eq_cmp'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span4] inv'0 x)
   -> ([%#span5] inv'0 y)  -> ([%#span6] (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal))

  function antisym2'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym2'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span7] cmp_log'0 x y
  = Ordering'0.C_Greater)
   -> ([%#span8] inv'0 x)  -> ([%#span9] inv'0 y)  -> ([%#span10] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym1'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span11] cmp_log'0 x y
  = Ordering'0.C_Less)
   -> ([%#span12] inv'0 x)  -> ([%#span13] inv'0 y)  -> ([%#span14] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span15] cmp_log'0 x y
  = o)
   -> ([%#span16] cmp_log'0 y z = o)
   -> ([%#span17] inv'0 x)  -> ([%#span18] inv'0 y)  -> ([%#span19] inv'0 z)  -> ([%#span20] cmp_log'0 x z = o)

  function refl'0 (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'0_spec : forall x : TrailIndex'0.t_trailindex . ([%#span21] inv'0 x)
   -> ([%#span22] cmp_log'0 x x = Ordering'0.C_Equal)

  function gt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span23] cmp_log'0 self o = Ordering'0.C_Greater

  function cmp_gt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_gt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span24] inv'0 x)
   -> ([%#span25] inv'0 y)  -> ([%#span26] gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater))

  function ge_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span27] cmp_log'0 self o <> Ordering'0.C_Less

  function cmp_ge_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_ge_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span28] inv'0 x)
   -> ([%#span29] inv'0 y)  -> ([%#span30] ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less))

  function lt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span31] cmp_log'0 self o = Ordering'0.C_Less

  function cmp_lt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_lt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span32] inv'0 x)
   -> ([%#span33] inv'0 y)  -> ([%#span34] lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less))

  function le_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span35] cmp_log'0 self o <> Ordering'0.C_Greater

  function cmp_le_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_le_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span36] inv'0 x)
   -> ([%#span37] inv'0 y)  -> ([%#span38] le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater))

  constant x  : TrailIndex'0.t_trailindex

  constant y  : TrailIndex'0.t_trailindex

  function cmp_le_log [#"/Users/xavier/Code/cdsat/src/trail.rs" 103 4 103 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  goal vc_cmp_le_log : [%#strail0] le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater)
end
module Cdsat_Trail_Impl5_CmpLtLog_Impl
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 107 14 107 61

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span2 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span3 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  let%span span4 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 14 70 15

  let%span span5 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 23 70 24

  let%span span6 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 69 14 69 59

  let%span span7 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 64 15 64 48

  let%span span8 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 16 66 17

  let%span span9 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 25 66 26

  let%span span10 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 65 14 65 44

  let%span span11 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 59 15 59 45

  let%span span12 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 16 61 17

  let%span span13 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 25 61 26

  let%span span14 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 60 14 60 47

  let%span span15 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 53 15 53 32

  let%span span16 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 54 15 54 32

  let%span span17 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 13 56 14

  let%span span18 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 22 56 23

  let%span span19 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 31 56 32

  let%span span20 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 55 14 55 31

  let%span span21 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 50 12 50 13

  let%span span22 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 49 14 49 45

  let%span span23 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 41 20 41 56

  let%span span24 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 18 46 19

  let%span span25 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 27 46 28

  let%span span26 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 45 14 45 64

  let%span span27 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 31 20 31 53

  let%span span28 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 18 36 19

  let%span span29 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 27 36 28

  let%span span30 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 35 14 35 61

  let%span span31 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 21 20 21 53

  let%span span32 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 18 26 19

  let%span span33 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 27 26 28

  let%span span34 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 25 14 25 61

  let%span span35 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 11 20 11 56

  let%span span36 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 18 16 19

  let%span span37 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 27 16 28

  let%span span38 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 15 14 15 64

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  predicate invariant'0 (self : TrailIndex'0.t_trailindex) =
    [%#span1] true

  predicate inv'0 (_x : TrailIndex'0.t_trailindex)

  axiom inv'0 : forall x : TrailIndex'0.t_trailindex . inv'0 x = true

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function eq_cmp'1 (_1 : usize) (_2 : usize) : ()

  function antisym2'1 (_1 : usize) (_2 : usize) : ()

  function antisym1'1 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'1 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'1 (_1 : usize) : ()

  function cmp_gt_log'1 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'1 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'1 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'1 (_1 : usize) (_2 : usize) : ()

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span2] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span3] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  function eq_cmp'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom eq_cmp'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span4] inv'0 x)
   -> ([%#span5] inv'0 y)  -> ([%#span6] (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal))

  function antisym2'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym2'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span7] cmp_log'0 x y
  = Ordering'0.C_Greater)
   -> ([%#span8] inv'0 x)  -> ([%#span9] inv'0 y)  -> ([%#span10] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym1'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span11] cmp_log'0 x y
  = Ordering'0.C_Less)
   -> ([%#span12] inv'0 x)  -> ([%#span13] inv'0 y)  -> ([%#span14] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span15] cmp_log'0 x y
  = o)
   -> ([%#span16] cmp_log'0 y z = o)
   -> ([%#span17] inv'0 x)  -> ([%#span18] inv'0 y)  -> ([%#span19] inv'0 z)  -> ([%#span20] cmp_log'0 x z = o)

  function refl'0 (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'0_spec : forall x : TrailIndex'0.t_trailindex . ([%#span21] inv'0 x)
   -> ([%#span22] cmp_log'0 x x = Ordering'0.C_Equal)

  function gt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span23] cmp_log'0 self o = Ordering'0.C_Greater

  function cmp_gt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_gt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span24] inv'0 x)
   -> ([%#span25] inv'0 y)  -> ([%#span26] gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater))

  function ge_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span27] cmp_log'0 self o <> Ordering'0.C_Less

  function cmp_ge_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_ge_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span28] inv'0 x)
   -> ([%#span29] inv'0 y)  -> ([%#span30] ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less))

  function lt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span31] cmp_log'0 self o = Ordering'0.C_Less

  function cmp_lt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_lt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span32] inv'0 x)
   -> ([%#span33] inv'0 y)  -> ([%#span34] lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less))

  function le_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span35] cmp_log'0 self o <> Ordering'0.C_Greater

  function cmp_le_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_le_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span36] inv'0 x)
   -> ([%#span37] inv'0 y)  -> ([%#span38] le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater))

  constant x  : TrailIndex'0.t_trailindex

  constant y  : TrailIndex'0.t_trailindex

  function cmp_lt_log [#"/Users/xavier/Code/cdsat/src/trail.rs" 108 4 108 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  goal vc_cmp_lt_log : [%#strail0] lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less)
end
module Cdsat_Trail_Impl5_CmpGeLog_Impl
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 112 14 112 61

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span2 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span3 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  let%span span4 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 14 70 15

  let%span span5 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 23 70 24

  let%span span6 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 69 14 69 59

  let%span span7 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 64 15 64 48

  let%span span8 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 16 66 17

  let%span span9 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 25 66 26

  let%span span10 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 65 14 65 44

  let%span span11 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 59 15 59 45

  let%span span12 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 16 61 17

  let%span span13 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 25 61 26

  let%span span14 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 60 14 60 47

  let%span span15 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 53 15 53 32

  let%span span16 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 54 15 54 32

  let%span span17 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 13 56 14

  let%span span18 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 22 56 23

  let%span span19 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 31 56 32

  let%span span20 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 55 14 55 31

  let%span span21 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 50 12 50 13

  let%span span22 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 49 14 49 45

  let%span span23 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 41 20 41 56

  let%span span24 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 18 46 19

  let%span span25 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 27 46 28

  let%span span26 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 45 14 45 64

  let%span span27 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 31 20 31 53

  let%span span28 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 18 36 19

  let%span span29 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 27 36 28

  let%span span30 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 35 14 35 61

  let%span span31 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 21 20 21 53

  let%span span32 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 18 26 19

  let%span span33 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 27 26 28

  let%span span34 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 25 14 25 61

  let%span span35 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 11 20 11 56

  let%span span36 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 18 16 19

  let%span span37 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 27 16 28

  let%span span38 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 15 14 15 64

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  predicate invariant'0 (self : TrailIndex'0.t_trailindex) =
    [%#span1] true

  predicate inv'0 (_x : TrailIndex'0.t_trailindex)

  axiom inv'0 : forall x : TrailIndex'0.t_trailindex . inv'0 x = true

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function eq_cmp'1 (_1 : usize) (_2 : usize) : ()

  function antisym2'1 (_1 : usize) (_2 : usize) : ()

  function antisym1'1 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'1 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'1 (_1 : usize) : ()

  function cmp_gt_log'1 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'1 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'1 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'1 (_1 : usize) (_2 : usize) : ()

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span2] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span3] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  function eq_cmp'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom eq_cmp'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span4] inv'0 x)
   -> ([%#span5] inv'0 y)  -> ([%#span6] (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal))

  function antisym2'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym2'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span7] cmp_log'0 x y
  = Ordering'0.C_Greater)
   -> ([%#span8] inv'0 x)  -> ([%#span9] inv'0 y)  -> ([%#span10] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym1'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span11] cmp_log'0 x y
  = Ordering'0.C_Less)
   -> ([%#span12] inv'0 x)  -> ([%#span13] inv'0 y)  -> ([%#span14] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span15] cmp_log'0 x y
  = o)
   -> ([%#span16] cmp_log'0 y z = o)
   -> ([%#span17] inv'0 x)  -> ([%#span18] inv'0 y)  -> ([%#span19] inv'0 z)  -> ([%#span20] cmp_log'0 x z = o)

  function refl'0 (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'0_spec : forall x : TrailIndex'0.t_trailindex . ([%#span21] inv'0 x)
   -> ([%#span22] cmp_log'0 x x = Ordering'0.C_Equal)

  function gt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span23] cmp_log'0 self o = Ordering'0.C_Greater

  function cmp_gt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_gt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span24] inv'0 x)
   -> ([%#span25] inv'0 y)  -> ([%#span26] gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater))

  function ge_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span27] cmp_log'0 self o <> Ordering'0.C_Less

  function cmp_ge_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_ge_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span28] inv'0 x)
   -> ([%#span29] inv'0 y)  -> ([%#span30] ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less))

  function lt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span31] cmp_log'0 self o = Ordering'0.C_Less

  function cmp_lt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_lt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span32] inv'0 x)
   -> ([%#span33] inv'0 y)  -> ([%#span34] lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less))

  function le_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span35] cmp_log'0 self o <> Ordering'0.C_Greater

  function cmp_le_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_le_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span36] inv'0 x)
   -> ([%#span37] inv'0 y)  -> ([%#span38] le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater))

  constant x  : TrailIndex'0.t_trailindex

  constant y  : TrailIndex'0.t_trailindex

  function cmp_ge_log [#"/Users/xavier/Code/cdsat/src/trail.rs" 113 4 113 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  goal vc_cmp_ge_log : [%#strail0] ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less)
end
module Cdsat_Trail_Impl5_CmpGtLog_Impl
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 117 14 117 64

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span2 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span3 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  let%span span4 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 14 70 15

  let%span span5 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 23 70 24

  let%span span6 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 69 14 69 59

  let%span span7 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 64 15 64 48

  let%span span8 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 16 66 17

  let%span span9 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 25 66 26

  let%span span10 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 65 14 65 44

  let%span span11 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 59 15 59 45

  let%span span12 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 16 61 17

  let%span span13 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 25 61 26

  let%span span14 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 60 14 60 47

  let%span span15 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 53 15 53 32

  let%span span16 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 54 15 54 32

  let%span span17 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 13 56 14

  let%span span18 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 22 56 23

  let%span span19 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 31 56 32

  let%span span20 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 55 14 55 31

  let%span span21 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 50 12 50 13

  let%span span22 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 49 14 49 45

  let%span span23 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 41 20 41 56

  let%span span24 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 18 46 19

  let%span span25 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 27 46 28

  let%span span26 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 45 14 45 64

  let%span span27 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 31 20 31 53

  let%span span28 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 18 36 19

  let%span span29 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 27 36 28

  let%span span30 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 35 14 35 61

  let%span span31 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 21 20 21 53

  let%span span32 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 18 26 19

  let%span span33 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 27 26 28

  let%span span34 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 25 14 25 61

  let%span span35 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 11 20 11 56

  let%span span36 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 18 16 19

  let%span span37 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 27 16 28

  let%span span38 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 15 14 15 64

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  predicate invariant'0 (self : TrailIndex'0.t_trailindex) =
    [%#span1] true

  predicate inv'0 (_x : TrailIndex'0.t_trailindex)

  axiom inv'0 : forall x : TrailIndex'0.t_trailindex . inv'0 x = true

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function eq_cmp'1 (_1 : usize) (_2 : usize) : ()

  function antisym2'1 (_1 : usize) (_2 : usize) : ()

  function antisym1'1 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'1 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'1 (_1 : usize) : ()

  function cmp_gt_log'1 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'1 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'1 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'1 (_1 : usize) (_2 : usize) : ()

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span2] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span3] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  function eq_cmp'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom eq_cmp'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span4] inv'0 x)
   -> ([%#span5] inv'0 y)  -> ([%#span6] (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal))

  function antisym2'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym2'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span7] cmp_log'0 x y
  = Ordering'0.C_Greater)
   -> ([%#span8] inv'0 x)  -> ([%#span9] inv'0 y)  -> ([%#span10] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym1'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span11] cmp_log'0 x y
  = Ordering'0.C_Less)
   -> ([%#span12] inv'0 x)  -> ([%#span13] inv'0 y)  -> ([%#span14] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span15] cmp_log'0 x y
  = o)
   -> ([%#span16] cmp_log'0 y z = o)
   -> ([%#span17] inv'0 x)  -> ([%#span18] inv'0 y)  -> ([%#span19] inv'0 z)  -> ([%#span20] cmp_log'0 x z = o)

  function refl'0 (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'0_spec : forall x : TrailIndex'0.t_trailindex . ([%#span21] inv'0 x)
   -> ([%#span22] cmp_log'0 x x = Ordering'0.C_Equal)

  function gt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span23] cmp_log'0 self o = Ordering'0.C_Greater

  function cmp_gt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_gt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span24] inv'0 x)
   -> ([%#span25] inv'0 y)  -> ([%#span26] gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater))

  function ge_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span27] cmp_log'0 self o <> Ordering'0.C_Less

  function cmp_ge_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_ge_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span28] inv'0 x)
   -> ([%#span29] inv'0 y)  -> ([%#span30] ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less))

  function lt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span31] cmp_log'0 self o = Ordering'0.C_Less

  function cmp_lt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_lt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span32] inv'0 x)
   -> ([%#span33] inv'0 y)  -> ([%#span34] lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less))

  function le_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span35] cmp_log'0 self o <> Ordering'0.C_Greater

  function cmp_le_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_le_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span36] inv'0 x)
   -> ([%#span37] inv'0 y)  -> ([%#span38] le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater))

  constant x  : TrailIndex'0.t_trailindex

  constant y  : TrailIndex'0.t_trailindex

  function cmp_gt_log [#"/Users/xavier/Code/cdsat/src/trail.rs" 118 4 118 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  goal vc_cmp_gt_log : [%#strail0] gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater)
end
module Cdsat_Trail_Impl5_Refl_Impl
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 122 14 122 45

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span2 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function eq_cmp'0 (_1 : usize) (_2 : usize) : ()

  function antisym2'0 (_1 : usize) (_2 : usize) : ()

  function antisym1'0 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'0 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'0 (_1 : usize) : ()

  function cmp_gt_log'0 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'0 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'0 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'0 (_1 : usize) (_2 : usize) : ()

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span1] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span2] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  constant x  : TrailIndex'0.t_trailindex

  function refl [#"/Users/xavier/Code/cdsat/src/trail.rs" 123 4 123 20] (x : TrailIndex'0.t_trailindex) : ()

  goal vc_refl : [%#strail0] cmp_log'0 x x = Ordering'0.C_Equal
end
module Cdsat_Trail_Impl5_Trans_Impl
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 127 15 127 32

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 128 15 128 32

  let%span strail2 = "/Users/xavier/Code/cdsat/src/trail.rs" 129 14 129 31

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span4 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function eq_cmp'0 (_1 : usize) (_2 : usize) : ()

  function antisym2'0 (_1 : usize) (_2 : usize) : ()

  function antisym1'0 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'0 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'0 (_1 : usize) : ()

  function cmp_gt_log'0 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'0 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'0 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'0 (_1 : usize) (_2 : usize) : ()

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span3] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span4] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  constant x  : TrailIndex'0.t_trailindex

  constant y  : TrailIndex'0.t_trailindex

  constant z  : TrailIndex'0.t_trailindex

  constant o  : Ordering'0.t_ordering

  function trans [#"/Users/xavier/Code/cdsat/src/trail.rs" 130 4 130 52] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  goal vc_trans : ([%#strail1] cmp_log'0 y z = o)
   -> ([%#strail0] cmp_log'0 x y = o)  -> ([%#strail2] cmp_log'0 x z = o)
end
module Cdsat_Trail_Impl5_Antisym1_Impl
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 134 15 134 45

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 135 14 135 47

  let%span span2 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span3 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function eq_cmp'0 (_1 : usize) (_2 : usize) : ()

  function antisym2'0 (_1 : usize) (_2 : usize) : ()

  function antisym1'0 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'0 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'0 (_1 : usize) : ()

  function cmp_gt_log'0 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'0 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'0 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'0 (_1 : usize) (_2 : usize) : ()

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span2] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span3] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  constant x  : TrailIndex'0.t_trailindex

  constant y  : TrailIndex'0.t_trailindex

  function antisym1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 136 4 136 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  goal vc_antisym1 : ([%#strail0] cmp_log'0 x y = Ordering'0.C_Less)
   -> ([%#strail1] cmp_log'0 y x = Ordering'0.C_Greater)
end
module Cdsat_Trail_Impl5_Antisym2_Impl
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 140 15 140 48

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 141 14 141 44

  let%span span2 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span3 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function eq_cmp'0 (_1 : usize) (_2 : usize) : ()

  function antisym2'0 (_1 : usize) (_2 : usize) : ()

  function antisym1'0 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'0 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'0 (_1 : usize) : ()

  function cmp_gt_log'0 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'0 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'0 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'0 (_1 : usize) (_2 : usize) : ()

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span2] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span3] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  constant x  : TrailIndex'0.t_trailindex

  constant y  : TrailIndex'0.t_trailindex

  function antisym2 [#"/Users/xavier/Code/cdsat/src/trail.rs" 142 4 142 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  goal vc_antisym2 : ([%#strail0] cmp_log'0 x y = Ordering'0.C_Greater)
   -> ([%#strail1] cmp_log'0 y x = Ordering'0.C_Less)
end
module Cdsat_Trail_Impl5_EqCmp_Impl
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 146 14 146 59

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span2 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function eq_cmp'0 (_1 : usize) (_2 : usize) : ()

  function antisym2'0 (_1 : usize) (_2 : usize) : ()

  function antisym1'0 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'0 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'0 (_1 : usize) : ()

  function cmp_gt_log'0 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'0 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'0 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'0 (_1 : usize) (_2 : usize) : ()

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span1] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span2] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  constant x  : TrailIndex'0.t_trailindex

  constant y  : TrailIndex'0.t_trailindex

  function eq_cmp [#"/Users/xavier/Code/cdsat/src/trail.rs" 147 4 147 31] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  goal vc_eq_cmp : [%#strail0] (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal)
end
module Cdsat_Bool_Impl0_EvalInner
  let%span sbool0 = "/Users/xavier/Code/cdsat/src/bool.rs" 146 18 146 37

  let%span sbool1 = "/Users/xavier/Code/cdsat/src/bool.rs" 154 27 154 61

  let%span sbool2 = "/Users/xavier/Code/cdsat/src/bool.rs" 204 31 204 59

  let%span sbool3 = "/Users/xavier/Code/cdsat/src/bool.rs" 208 31 208 59

  let%span sbool4 = "/Users/xavier/Code/cdsat/src/bool.rs" 212 16 213 73

  let%span sbool5 = "/Users/xavier/Code/cdsat/src/bool.rs" 214 38 214 61

  let%span sbool6 = "/Users/xavier/Code/cdsat/src/bool.rs" 191 31 191 59

  let%span sbool7 = "/Users/xavier/Code/cdsat/src/bool.rs" 195 31 195 59

  let%span sbool8 = "/Users/xavier/Code/cdsat/src/bool.rs" 199 16 200 73

  let%span sbool9 = "/Users/xavier/Code/cdsat/src/bool.rs" 201 38 201 60

  let%span sbool10 = "/Users/xavier/Code/cdsat/src/bool.rs" 186 34 186 62

  let%span sbool11 = "/Users/xavier/Code/cdsat/src/bool.rs" 174 31 174 59

  let%span sbool12 = "/Users/xavier/Code/cdsat/src/bool.rs" 178 31 178 59

  let%span sbool13 = "/Users/xavier/Code/cdsat/src/bool.rs" 182 16 183 73

  let%span sbool14 = "/Users/xavier/Code/cdsat/src/bool.rs" 184 38 184 60

  let%span sbool15 = "/Users/xavier/Code/cdsat/src/bool.rs" 160 31 160 59

  let%span sbool16 = "/Users/xavier/Code/cdsat/src/bool.rs" 164 31 164 59

  let%span sbool17 = "/Users/xavier/Code/cdsat/src/bool.rs" 168 16 169 73

  let%span sbool18 = "/Users/xavier/Code/cdsat/src/bool.rs" 219 34 219 60

  let%span sbool19 = "/Users/xavier/Code/cdsat/src/bool.rs" 220 20 220 64

  let%span sbool20 = "/Users/xavier/Code/cdsat/src/bool.rs" 221 20 221 90

  let%span sbool21 = "/Users/xavier/Code/cdsat/src/bool.rs" 126 15 126 29

  let%span sbool22 = "/Users/xavier/Code/cdsat/src/bool.rs" 127 4 127 34

  let%span sbool23 = "/Users/xavier/Code/cdsat/src/bool.rs" 128 4 128 30

  let%span sbool24 = "/Users/xavier/Code/cdsat/src/bool.rs" 129 4 129 70

  let%span sbool25 = "/Users/xavier/Code/cdsat/src/bool.rs" 130 14 137 5

  let%span sbool26 = "/Users/xavier/Code/cdsat/src/bool.rs" 138 4 138 75

  let%span sbool27 = "/Users/xavier/Code/cdsat/src/bool.rs" 139 4 139 72

  let%span span28 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span29 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  let%span span30 = "/Users/xavier/Code/cdsat/src/trail.rs" 146 14 146 59

  let%span span31 = "/Users/xavier/Code/cdsat/src/trail.rs" 140 15 140 48

  let%span span32 = "/Users/xavier/Code/cdsat/src/trail.rs" 141 14 141 44

  let%span span33 = "/Users/xavier/Code/cdsat/src/trail.rs" 134 15 134 45

  let%span span34 = "/Users/xavier/Code/cdsat/src/trail.rs" 135 14 135 47

  let%span span35 = "/Users/xavier/Code/cdsat/src/trail.rs" 127 15 127 32

  let%span span36 = "/Users/xavier/Code/cdsat/src/trail.rs" 128 15 128 32

  let%span span37 = "/Users/xavier/Code/cdsat/src/trail.rs" 129 14 129 31

  let%span span38 = "/Users/xavier/Code/cdsat/src/trail.rs" 122 14 122 45

  let%span span39 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 41 20 41 56

  let%span span40 = "/Users/xavier/Code/cdsat/src/trail.rs" 117 14 117 64

  let%span span41 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 31 20 31 53

  let%span span42 = "/Users/xavier/Code/cdsat/src/trail.rs" 112 14 112 61

  let%span span43 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 21 20 21 53

  let%span span44 = "/Users/xavier/Code/cdsat/src/trail.rs" 107 14 107 61

  let%span span45 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 11 20 11 56

  let%span span46 = "/Users/xavier/Code/cdsat/src/trail.rs" 102 14 102 64

  let%span span47 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 14 70 15

  let%span span48 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 23 70 24

  let%span span49 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 69 14 69 59

  let%span span50 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 64 15 64 48

  let%span span51 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 16 66 17

  let%span span52 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 25 66 26

  let%span span53 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 65 14 65 44

  let%span span54 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 59 15 59 45

  let%span span55 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 16 61 17

  let%span span56 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 25 61 26

  let%span span57 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 60 14 60 47

  let%span span58 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 53 15 53 32

  let%span span59 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 54 15 54 32

  let%span span60 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 13 56 14

  let%span span61 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 22 56 23

  let%span span62 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 31 56 32

  let%span span63 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 55 14 55 31

  let%span span64 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 50 12 50 13

  let%span span65 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 49 14 49 45

  let%span span66 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 18 46 19

  let%span span67 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 27 46 28

  let%span span68 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 45 14 45 64

  let%span span69 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 18 36 19

  let%span span70 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 27 36 28

  let%span span71 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 35 14 35 61

  let%span span72 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 18 26 19

  let%span span73 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 27 26 28

  let%span span74 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 25 14 25 61

  let%span span75 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 18 16 19

  let%span span76 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 27 16 28

  let%span span77 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 15 14 15 64

  let%span span78 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span79 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span80 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span81 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span82 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span83 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span84 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span85 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span86 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span87 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span88 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span89 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span90 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span91 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span92 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span93 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span94 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span95 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span96 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span97 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span98 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span99 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span100 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span101 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span102 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span103 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span104 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span105 = "/Users/xavier/Code/cdsat/src/theory.rs" 398 8 400 79

  let%span span106 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span107 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span108 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span109 = "/Users/xavier/Code/cdsat/src/term.rs" 195 8 225 9

  let%span span110 = "/Users/xavier/Code/cdsat/src/term.rs" 180 8 180 25

  let%span span111 = "/Users/xavier/Code/cdsat/src/trail.rs" 291 12 291 92

  let%span span112 = "/Users/xavier/Code/cdsat/src/theory.rs" 60 8 60 36

  let%span span113 = "/Users/xavier/Code/cdsat/src/theory.rs" 31 8 54 9

  let%span span114 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span115 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 129 8 129 78

  let%span span116 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 13 814 14

  let%span span117 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 24 814 25

  let%span span118 = "/Users/xavier/Code/cdsat/src/trail.rs" 809 0 809 73

  let%span span119 = "/Users/xavier/Code/cdsat/src/trail.rs" 810 0 810 63

  let%span span120 = "/Users/xavier/Code/cdsat/src/trail.rs" 811 0 811 55

  let%span span121 = "/Users/xavier/Code/cdsat/src/trail.rs" 812 0 812 52

  let%span span122 = "/Users/xavier/Code/cdsat/src/trail.rs" 813 10 813 33

  let%span span123 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 33 814 39

  let%span span124 = "/Users/xavier/Code/cdsat/src/trail.rs" 808 10 808 17

  let%span span125 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span126 = "/Users/xavier/Code/cdsat/src/trail.rs" 726 8 726 61

  let%span span127 = "/Users/xavier/Code/cdsat/src/trail.rs" 646 8 648 9

  let%span span128 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span129 = "/Users/xavier/Code/cdsat/src/trail.rs" 313 4 313 82

  let%span span130 = "/Users/xavier/Code/cdsat/src/trail.rs" 314 14 314 40

  let%span span131 = "/Users/xavier/Code/cdsat/src/trail.rs" 315 4 315 115

  let%span span132 = "/Users/xavier/Code/cdsat/src/trail.rs" 316 4 316 115

  let%span span133 = "/Users/xavier/Code/cdsat/src/trail.rs" 317 4 317 101

  let%span span134 = "/Users/xavier/Code/cdsat/src/trail.rs" 312 14 312 24

  let%span span135 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span136 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span137 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span138 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span139 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span140 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span141 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span142 = "/Users/xavier/Code/cdsat/src/theory.rs" 616 15 616 27

  let%span span143 = "/Users/xavier/Code/cdsat/src/theory.rs" 617 15 617 32

  let%span span144 = "/Users/xavier/Code/cdsat/src/theory.rs" 618 4 618 90

  let%span span145 = "/Users/xavier/Code/cdsat/src/theory.rs" 512 8 515 9

  let%span span146 = "/Users/xavier/Code/cdsat/src/theory.rs" 522 8 525 9

  let%span span147 = "/Users/xavier/Code/cdsat/src/theory.rs" 206 8 206 84

  let%span span148 = "/Users/xavier/Code/cdsat/src/theory.rs" 502 8 505 9

  let%span span149 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span150 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span151 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span152 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span153 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span154 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span155 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span156 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span157 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span158 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span159 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span160 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span161 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span162 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span163 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span164 = "/Users/xavier/Code/cdsat/src/theory.rs" 484 15 484 31

  let%span span165 = "/Users/xavier/Code/cdsat/src/theory.rs" 485 15 485 35

  let%span span166 = "/Users/xavier/Code/cdsat/src/theory.rs" 486 15 486 27

  let%span span167 = "/Users/xavier/Code/cdsat/src/theory.rs" 487 4 487 54

  let%span span168 = "/Users/xavier/Code/cdsat/src/theory.rs" 488 4 488 58

  let%span span169 = "/Users/xavier/Code/cdsat/src/theory.rs" 489 4 489 61

  let%span span170 = "/Users/xavier/Code/cdsat/src/trail.rs" 268 8 272 9

  let%span span171 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 31 8 31 32

  let%span span172 = "/Users/xavier/Code/cdsat/src/trail.rs" 547 4 547 12

  let%span span173 = "/Users/xavier/Code/cdsat/src/trail.rs" 254 8 263 9

  let%span span174 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 20 8 20 31

  let%span span175 = "/Users/xavier/Code/cdsat/src/trail.rs" 179 4 179 12

  let%span span176 = "/Users/xavier/Code/cdsat/src/trail.rs" 279 12 283 13

  let%span span177 = "/Users/xavier/Code/cdsat/src/trail.rs" 238 8 248 9

  let%span span178 = "/Users/xavier/Code/cdsat/src/term.rs" 230 9 230 14

  let%span span179 = "/Users/xavier/Code/cdsat/src/trail.rs" 715 15 715 35

  let%span span180 = "/Users/xavier/Code/cdsat/src/trail.rs" 716 14 716 67

  let%span span181 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 108 8 108 31

  let%span span182 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 90 8 90 31

  let%span span183 = "/Users/xavier/Code/creusot/creusot-contracts/src/snapshot.rs" 28 20 28 48

  let%span span184 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 1993 21 1993 25

  let%span span185 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 1993 27 1993 32

  let%span span186 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 82 26 82 51

  let%span span187 = "/Users/xavier/Code/cdsat/src/term.rs" 33 9 33 14

  let%span span188 = "/Users/xavier/Code/cdsat/src/trail.rs" 424 14 427 5

  let%span span189 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 81 8 81 28

  let%span span190 = "/Users/xavier/Code/cdsat/src/term.rs" 230 23 230 32

  let%span span191 = "/Users/xavier/Code/cdsat/src/term.rs" 14 23 14 32

  let%span span192 = "/Users/xavier/Code/cdsat/src/term.rs" 28 8 28 25

  let%span span193 = "/Users/xavier/Code/cdsat/src/term.rs" 49 14 49 37

  let%span span194 = "/Users/xavier/Code/cdsat/src/term.rs" 306 15 306 32

  let%span span195 = "/Users/xavier/Code/cdsat/src/term.rs" 307 14 307 41

  let%span span196 = "/Users/xavier/Code/cdsat/src/term.rs" 269 4 269 32

  let%span span197 = "/Users/xavier/Code/cdsat/src/term.rs" 270 14 270 42

  let%span span198 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/boxed.rs" 20 8 20 31

  let%span span199 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 26 20 26 34

  let%span span200 = "/Users/xavier/Code/cdsat/src/trail.rs" 363 4 363 84

  let%span span201 = "/Users/xavier/Code/cdsat/src/trail.rs" 364 4 364 72

  let%span span202 = "/Users/xavier/Code/cdsat/src/trail.rs" 365 4 365 129

  let%span span203 = "/Users/xavier/Code/cdsat/src/trail.rs" 362 14 362 24

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function eq_cmp'2 (_1 : usize) (_2 : usize) : ()

  function antisym2'2 (_1 : usize) (_2 : usize) : ()

  function antisym1'2 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'2 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'2 (_1 : usize) : ()

  function cmp_gt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'2 (_1 : usize) (_2 : usize) : ()

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span28] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span29] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  function eq_cmp'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 147 4 147 31] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom eq_cmp'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span30] (x = y)
  = (cmp_log'0 x y = Ordering'0.C_Equal)

  function antisym2'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 142 4 142 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom antisym2'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span31] cmp_log'0 x y
  = Ordering'0.C_Greater)  -> ([%#span32] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 136 4 136 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom antisym1'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span33] cmp_log'0 x y
  = Ordering'0.C_Less)  -> ([%#span34] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 130 4 130 52] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span35] cmp_log'0 x y
  = o)  -> ([%#span36] cmp_log'0 y z = o)  -> ([%#span37] cmp_log'0 x z = o)

  function refl'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 123 4 123 20] (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'1_spec : forall x : TrailIndex'0.t_trailindex . [%#span38] cmp_log'0 x x = Ordering'0.C_Equal

  function gt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span39] cmp_log'0 self o = Ordering'0.C_Greater

  function cmp_gt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 118 4 118 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_gt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span40] gt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Greater)

  function ge_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span41] cmp_log'0 self o <> Ordering'0.C_Less

  function cmp_ge_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 113 4 113 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_ge_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span42] ge_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Less)

  function lt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span43] cmp_log'0 self o = Ordering'0.C_Less

  function cmp_lt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 108 4 108 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_lt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span44] lt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Less)

  function le_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span45] cmp_log'0 self o <> Ordering'0.C_Greater

  function cmp_le_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 103 4 103 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_le_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span46] le_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Greater)

  predicate inv'4 (_x : TrailIndex'0.t_trailindex)

  function eq_cmp'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom eq_cmp'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span47] inv'4 x)
   -> ([%#span48] inv'4 y)  -> ([%#span49] (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal))

  function antisym2'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym2'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span50] cmp_log'0 x y
  = Ordering'0.C_Greater)
   -> ([%#span51] inv'4 x)  -> ([%#span52] inv'4 y)  -> ([%#span53] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym1'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span54] cmp_log'0 x y
  = Ordering'0.C_Less)
   -> ([%#span55] inv'4 x)  -> ([%#span56] inv'4 y)  -> ([%#span57] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span58] cmp_log'0 x y
  = o)
   -> ([%#span59] cmp_log'0 y z = o)
   -> ([%#span60] inv'4 x)  -> ([%#span61] inv'4 y)  -> ([%#span62] inv'4 z)  -> ([%#span63] cmp_log'0 x z = o)

  function refl'0 (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'0_spec : forall x : TrailIndex'0.t_trailindex . ([%#span64] inv'4 x)
   -> ([%#span65] cmp_log'0 x x = Ordering'0.C_Equal)

  function cmp_gt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_gt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span66] inv'4 x)
   -> ([%#span67] inv'4 y)  -> ([%#span68] gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater))

  function cmp_ge_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_ge_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span69] inv'4 x)
   -> ([%#span70] inv'4 y)  -> ([%#span71] ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less))

  function cmp_lt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_lt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span72] inv'4 x)
   -> ([%#span73] inv'4 y)  -> ([%#span74] lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less))

  function cmp_le_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_le_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span75] inv'4 x)
   -> ([%#span76] inv'4 y)  -> ([%#span77] le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater))

  use Cdsat_Trail_Assignment_Type as Assignment'0

  use seq.Seq

  predicate invariant'11 (self : Seq.seq (Assignment'0.t_assignment)) =
    [%#span78] true

  predicate inv'8 (_x : Seq.seq (Assignment'0.t_assignment))

  axiom inv'8 : forall x : Seq.seq (Assignment'0.t_assignment) . inv'8 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  constant max'0 : usize = [%#span79] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'7 (_x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

  function shallow_model'11 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) : Seq.seq (Assignment'0.t_assignment)


  axiom shallow_model'11_spec : forall self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . ([%#span80] inv'7 self)
   -> ([%#span82] inv'8 (shallow_model'11 self))
  && ([%#span81] Seq.length (shallow_model'11 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'10 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span83] inv'8 (shallow_model'11 self)

  axiom inv'7 : forall x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . inv'7 x = true

  predicate invariant'9 (self : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span78] true

  predicate inv'6 (_x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'6 : forall x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'6 x = true

  use seq.Seq

  predicate inv'5 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  function shallow_model'10 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))


  axiom shallow_model'10_spec : forall self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . ([%#span80] inv'5 self)
   -> ([%#span82] inv'6 (shallow_model'10 self))
  && ([%#span81] Seq.length (shallow_model'10 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'8 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span83] inv'6 (shallow_model'10 self)

  axiom inv'5 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'5 x
  = true

  predicate invariant'6 (self : TrailIndex'0.t_trailindex) =
    [%#span78] true

  axiom inv'4 : forall x : TrailIndex'0.t_trailindex . inv'4 x = true

  use prelude.prelude.Borrow

  predicate invariant'5 (self : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) =
    [%#span78] true

  predicate inv'3 (_x : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)))

  axiom inv'3 : forall x : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) . inv'3 x = true

  predicate invariant'4 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span78] true

  predicate inv'2 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'2 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'2 x = true

  use seq.Seq

  predicate inv'1 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function shallow_model'0 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom shallow_model'0_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span80] inv'1 self)
   -> ([%#span82] inv'2 (shallow_model'0 self))
  && ([%#span81] Seq.length (shallow_model'0 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'3 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span83] inv'2 (shallow_model'0 self)

  axiom inv'1 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'1 x = true

  use Cdsat_Theory_Sort_Type as Sort'1

  use Cdsat_Theory_Value_Type as Value'1

  function sort'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'1.t_value) : Sort'1.t_sort =
    [%#span84] match self with
      | Value'1.C_Bool _ -> Sort'1.C_Boolean
      | Value'1.C_Rat _ -> Sort'1.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span85] forall v : Value'1.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'2 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'2 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'1.t_value) =
    [%#span86] sort'2 self = Sort'1.C_Boolean

  function negate'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'1.t_value) : Value'1.t_value =
    [%#span89] match self with
      | Value'1.C_Bool b -> Value'1.C_Bool (not b)
      | _ -> self
      end

  axiom negate'1_spec : forall self : Value'1.t_value . ([%#span87] is_bool'0 self)
   -> ([%#span88] is_bool'0 (negate'1 self))

  use Cdsat_Theory_Term_Type as Term'1

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'1.t_term) : Sort'1.t_sort =
    [%#span90] match self with
      | Term'1.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'1.C_Value v -> sort'2 v
      | Term'1.C_Plus _ _ -> Sort'1.C_Rational
      | Term'1.C_Eq _ _ -> Sort'1.C_Boolean
      | Term'1.C_Conj _ _ -> Sort'1.C_Boolean
      | Term'1.C_Neg _ -> Sort'1.C_Boolean
      | Term'1.C_Disj _ _ -> Sort'1.C_Boolean
      end

  use prelude.prelude.Int

  use Cdsat_Theory_Trail_Type as Trail'1

  use Cdsat_Theory_Assign_Type as Assign'0

  predicate invariant'7 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span91] match self with
      | Assign'0.C_Decision t v -> sort'1 t = sort'2 v
      | Assign'0.C_Justified _ t v -> sort'1 t = sort'2 v /\ sort'1 t = Sort'1.C_Boolean
      | Assign'0.C_Input t v -> sort'1 t = sort'2 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'1.t_trail) =
    [%#span92] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'7 a
      end

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'1.t_trail) : int

  axiom len'0_spec : forall self : Trail'1.t_trail . [%#span93] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'1.t_trail) : int =
    [%#span96] match self with
      | Trail'1.C_Empty -> 0
      | Trail'1.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'1.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'1.t_trail . ([%#span95] level'0 self <= len'0 self)
  && ([%#span94] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'1.t_trail) =
    [%#span97] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'1.t_term, Value'1.t_value)

   =
    [%#span98] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span102] match self with
      | Trail'1.C_Empty -> Option'0.C_None
      | Trail'1.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'1.t_trail, d : (Term'1.t_term, Value'1.t_value) . ([%#span101] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'1 (let (a, _) = d in a) = sort'2 (let (_, a) = d in a)))
  && ([%#span100] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span99] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  predicate contains'3 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value))

   =
    [%#span104] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'3_spec : forall self : Trail'1.t_trail, d : (Term'1.t_term, Value'1.t_value) . [%#span103] invariant_assign'0 self
   -> contains'3 self d = true  -> sort'1 (let (a, _) = d in a) = sort'2 (let (_, a) = d in a)

  predicate acceptable'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 397 4 397 56] (self : Trail'1.t_trail) (t : Term'1.t_term) (val' : Value'1.t_value)

   =
    [%#span105] not contains'3 self (t, val')
    /\ sort'1 t = sort'2 val' /\ (is_bool'0 val'  -> not contains'3 self (t, negate'1 val'))

  use prelude.prelude.Real

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  use Cdsat_Term_Value_Type as Value'0

  use Cdsat_Term_Sort_Type as Sort'0

  function deep_model'4 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span106] match self with
      | Value'0.C_Bool b -> Value'1.C_Bool b
      | Value'0.C_Rat br -> Value'1.C_Rat (deep_model'4 br)
      end

  function deep_model'5 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'0.t_sort) : Sort'1.t_sort =
    [%#span107] match self with
      | Sort'0.C_Boolean -> Sort'1.C_Boolean
      | Sort'0.C_Rational -> Sort'1.C_Rational
      end

  function deep_model'6 (self : usize) : int =
    [%#span108] UIntSize.to_int self

  use Cdsat_Term_Term_Type as Term'0

  function deep_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 193 4 193 44] (self : Term'0.t_term) : Term'1.t_term =
    [%#span109] match self with
      | Term'0.C_Variable v s -> Term'1.C_Variable (Var'0.C_Var (deep_model'6 v) (deep_model'5 s))
      | Term'0.C_Value v -> Term'1.C_Value (deep_model'0 v)
      | Term'0.C_Plus l r -> Term'1.C_Plus (deep_model'3 l) (deep_model'3 r)
      | Term'0.C_Eq l r -> Term'1.C_Eq (deep_model'3 l) (deep_model'3 r)
      | Term'0.C_Conj l r -> Term'1.C_Conj (deep_model'3 l) (deep_model'3 r)
      | Term'0.C_Disj l r -> Term'1.C_Disj (deep_model'3 l) (deep_model'3 r)
      | Term'0.C_Neg t -> Term'1.C_Neg (deep_model'3 t)
      | Term'0.C_Impl l r -> Term'1.C_Disj (Term'1.C_Neg (deep_model'3 l)) (deep_model'3 r)
      | Term'0.C_Times l r -> Term'1.C_Plus (Term'1.C_Value (Value'1.C_Rat (deep_model'4 l))) (deep_model'3 r)
      | Term'0.C_Lt l r -> Term'1.C_Eq (deep_model'3 l) (deep_model'3 r)
      end

  function shallow_model'6 [#"/Users/xavier/Code/cdsat/src/term.rs" 179 4 179 50] (self : Term'0.t_term) : Term'1.t_term
   =
    [%#span110] deep_model'3 self

  use prelude.prelude.Snapshot

  use Cdsat_Trail_Trail_Type as Cdsat_Trail_Trail_Type

  use seq.Seq

  use Cdsat_Trail_Trail_Type as Trail'0

  predicate contains'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 289 4 289 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex)

   =
    [%#span111] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)
    < Seq.length (shallow_model'10 (Cdsat_Trail_Trail_Type.trail_assignments self))
    /\ UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)
    < Seq.length (shallow_model'11 (Seq.get (shallow_model'10 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))))

  predicate is_bool'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 59 4 59 32] (self : Term'1.t_term) =
    [%#span112] sort'1 self = Sort'1.C_Boolean

  function well_sorted'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 30 4 30 36] (self : Term'1.t_term) : bool =
    [%#span113] match self with
      | Term'1.C_Variable v -> true
      | Term'1.C_Value v -> true
      | Term'1.C_Plus l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'1 l = sort'1 r /\ sort'1 r = Sort'1.C_Rational
      | Term'1.C_Eq l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'1 l = sort'1 r
      | Term'1.C_Conj l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'1 l = sort'1 r /\ sort'1 r = Sort'1.C_Boolean
      | Term'1.C_Disj l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'1 l = sort'1 r /\ sort'1 r = Sort'1.C_Boolean
      | Term'1.C_Neg t -> well_sorted'0 t /\ sort'1 t = Sort'1.C_Boolean
      end

  use set.Fset

  use set.Fset

  use set.Fset

  function insert'0 [@inline:trivial] (self : Fset.fset (Term'1.t_term, Value'1.t_value)) (e : (Term'1.t_term, Value'1.t_value)) : Fset.fset (Term'1.t_term, Value'1.t_value)

   =
    [%#span114] Fset.add e self

  use seq.Seq

  use prelude.seq_ext.SeqExt

  use seq.Seq

  use seq.Seq

  predicate contains'0 (self : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) =
    [%#span115] exists i : int . 0 <= i /\ i < Seq.length self /\ Seq.get self i = e

  function remove'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 814 0 814 39] (s : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom remove'0_spec : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . ([%#span116] inv'2 s)
   -> ([%#span117] inv'4 e)
   -> ([%#span123] inv'2 (remove'0 s e))
  && ([%#span122] Seq.length (remove'0 s e) <= Seq.length s)
  && ([%#span121] contains'0 s e  -> Seq.length (remove'0 s e) < Seq.length s)
  && ([%#span120] forall t : TrailIndex'0.t_trailindex . inv'4 t  -> contains'0 (remove'0 s e) t  -> t <> e)
  && ([%#span119] forall t : TrailIndex'0.t_trailindex . inv'4 t  -> contains'0 (remove'0 s e) t  -> contains'0 s t)
  && ([%#span118] forall t : TrailIndex'0.t_trailindex . inv'4 t
   -> contains'0 s t  -> e <> t  -> contains'0 (remove'0 s e) t)

  function shallow_model'2 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span125] deep_model'0 self

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  function term_value'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 725 4 725 61] (self : Assignment'0.t_assignment) : (Term'1.t_term, Value'1.t_value)

   =
    [%#span126] (shallow_model'6 (Cdsat_Trail_Assignment_Type.assignment_term self), shallow_model'2 (Cdsat_Trail_Assignment_Type.assignment_val self))

  use seq.Seq

  function index_logic'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 645 4 645 77] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : (Term'1.t_term, Value'1.t_value)

   =
    [%#span127] term_value'0 (Seq.get (shallow_model'11 (Seq.get (shallow_model'10 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)))) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)))

  use set.Fset

  predicate contains'2 [@inline:trivial] (self : Fset.fset (Term'1.t_term, Value'1.t_value)) (e : (Term'1.t_term, Value'1.t_value))

   =
    [%#span128] Fset.mem e self

  use set.Fset

  function abstract_justification'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 318 4 321 44] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) : Fset.fset (Term'1.t_term, Value'1.t_value)


  axiom abstract_justification'0_spec : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span129] forall i : int . 0
  <= i
  /\ i < Seq.length just  -> contains'1 self (Seq.get just i))
   -> ([%#span133] forall i : int . 0 <= i /\ i < Seq.length just
   -> contains'2 (abstract_justification'0 self just) (index_logic'0 self (Seq.get just i)))
  && ([%#span132] forall a : (Term'1.t_term, Value'1.t_value) . contains'2 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'0 just ix /\ a = index_logic'0 self ix))
  && ([%#span131] forall a : (Term'1.t_term, Value'1.t_value) . contains'2 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'1 self ix /\ a = index_logic'0 self ix))
  && ([%#span130] Fset.cardinal (abstract_justification'0 self just) <= Seq.length just)

  function from_int'0 (_1 : int) : Real.real

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'1.t_term) : Value'1.t_value

   =
    [%#span137] match t with
      | Term'1.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'1.C_Value v -> v
      | Term'1.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'1.C_Rat r1, Value'1.C_Rat r2) -> Value'1.C_Rat r1
        | _ -> Value'1.C_Rat (from_int'0 (- 1))
        end
      | Term'1.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'1.C_Bool b1, Value'1.C_Bool b2) -> Value'1.C_Bool (b1 /\ b2)
        | _ -> Value'1.C_Bool false
        end
      | Term'1.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'1.C_Bool b1, Value'1.C_Bool b2) -> Value'1.C_Bool (b1 \/ b2)
        | _ -> Value'1.C_Bool false
        end
      | Term'1.C_Eq l r -> Value'1.C_Bool (interp'0 self l = interp'0 self r)
      | Term'1.C_Neg t -> match interp'0 self t with
        | Value'1.C_Bool b -> Value'1.C_Bool (not b)
        | _ -> Value'1.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'1.t_term . ([%#span135] inv'0 self)
   -> ([%#span136] invariant'2 self  -> sort'2 (interp'0 self t) = sort'1 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'1.t_term, Value'1.t_value))

   =
    [%#span138] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'1.t_term, Value'1.t_value))

   =
    [%#span139] forall a : (Term'1.t_term, Value'1.t_value) . contains'2 v a  -> satisfies'0 self a

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span140] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'0 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'1.t_trail)
   =
    [%#span141] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a _ tl -> sound'0 tl /\ justified_sound'0 a
      end

  function find_justified'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 619 4 619 46] (self : Trail'1.t_trail) (kv : (Term'1.t_term, Value'1.t_value)) : ()


  axiom find_justified'0_spec : forall self : Trail'1.t_trail, kv : (Term'1.t_term, Value'1.t_value) . ([%#span142] sound'0 self)
   -> ([%#span143] contains'3 self kv)
   -> ([%#span144] forall l : int . forall a : Assign'0.t_assign . find'0 self kv = Option'0.C_Some (a, l)
   -> justified_sound'0 a)

  predicate is_decision'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 511 4 511 54] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value))

   =
    [%#span145] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Decision _ _, _) -> true
      | _ -> false
      end

  predicate is_input'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 521 4 521 51] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value))

   =
    [%#span146] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Input _ _, _) -> true
      | _ -> false
      end

  predicate entails'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 205 4 205 74] (self : Model'0.t_model) (j : Fset.fset (Term'1.t_term, Value'1.t_value)) (c : (Term'1.t_term, Value'1.t_value))

   =
    [%#span147] invariant'2 self  -> satisfy_set'0 self j  -> satisfies'0 self c

  predicate is_justified'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 501 4 501 55] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value))

   =
    [%#span148] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified _ _ _, _) -> true
      | _ -> false
      end

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'1.t_trail) =
    [%#span149] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> let ap = to_pair'0 a in not contains'3 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'3 tl ((let (a, _) = ap in a), negate'1 (let (_, a) = ap in a))
      else
        true
      )
      end

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'1.t_trail) =
    [%#span150] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'1.t_term, Value'1.t_value) . contains'2 j a  -> contains'3 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'1 [@inline:trivial] (self : Fset.fset (Term'1.t_term, Value'1.t_value)) (a : (Term'1.t_term, Value'1.t_value)) : Fset.fset (Term'1.t_term, Value'1.t_value)

   =
    [%#span151] Fset.remove a self

  use set.Fset

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value)) : int

   =
    [%#span154] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'1.t_trail, d : (Term'1.t_term, Value'1.t_value) . ([%#span152] invariant_nonneg'0 self)
   -> ([%#span153] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'1.t_trail) (s : Fset.fset (Term'1.t_term, Value'1.t_value)) : int


  axiom set_level'0_spec : forall self : Trail'1.t_trail, s : Fset.fset (Term'1.t_term, Value'1.t_value) . ([%#span155] invariant_nonneg'0 self)
   -> ([%#span160] set_level'0 self s <= level'0 self)
  && ([%#span159] set_level'0 self s >= 0)
  && ([%#span158] s = (Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value))  -> set_level'0 self s = 0)
  && ([%#span157] s <> (Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value))
   -> (exists i : (Term'1.t_term, Value'1.t_value) . contains'2 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span156] forall i : (Term'1.t_term, Value'1.t_value) . contains'2 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'1.t_trail) =
    [%#span162] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'1.t_trail) =
    [%#span163] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function justification'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 490 4 490 71] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value)) : Fset.fset (Term'1.t_term, Value'1.t_value)


  axiom justification'0_spec : forall self : Trail'1.t_trail, d : (Term'1.t_term, Value'1.t_value) . ([%#span164] invariant'1 self)
   -> ([%#span165] is_justified'0 self d)
   -> ([%#span166] sound'0 self)
   -> ([%#span169] is_decision'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value)))
  && ([%#span168] is_input'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value)))
  && ([%#span167] forall m : Model'0.t_model . inv'0 m  -> entails'0 m (justification'0 self d) d)

  predicate justified_correct'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 267 4 267 78] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) (j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

   =
    [%#span170] (forall i : TrailIndex'0.t_trailindex . contains'0 (shallow_model'0 j) i
     -> lt_log'0 i ix /\ contains'1 self i)
    /\ is_justified'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ justification'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    = abstract_justification'0 self (shallow_model'0 j)

  use Cdsat_Trail_Reason_Type as Reason'0

  function index_logic'3 [@inline:trivial] (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (ix : usize) : Assignment'0.t_assignment

   =
    [%#span171] Seq.get (shallow_model'11 self) (UIntSize.to_int ix)

  function index_logic'2 [@inline:trivial] (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (ix : usize) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span171] Seq.get (shallow_model'10 self) (UIntSize.to_int ix)

  function reason'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 549 4 549 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : Reason'0.t_reason

   =
    [%#span172] Cdsat_Trail_Assignment_Type.assignment_reason (index_logic'3 (index_logic'2 (Cdsat_Trail_Trail_Type.trail_assignments self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)) (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix))

  predicate justified_is_justified'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 253 4 253 47] (self : Trail'0.t_trail) =
    [%#span173] forall ix : TrailIndex'0.t_trailindex . contains'1 self ix
     -> (let reason = reason'0 self ix in (reason = Reason'0.C_Decision)
    = is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ (reason = Reason'0.C_Input)
    = is_input'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ (forall j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . reason = Reason'0.C_Justified j
     -> justified_correct'0 self ix j))

  function index_logic'1 [@inline:trivial] (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (ix : int) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span174] Seq.get (shallow_model'10 self) ix

  function level_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 180 4 180 33] (self : TrailIndex'0.t_trailindex) : int
   =
    [%#span175] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 self)

  predicate abstract_relation'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 277 4 277 42] (self : Trail'0.t_trail) =
    [%#span176] (forall ix : TrailIndex'0.t_trailindex . contains'1 self ix
     -> contains'3 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix))
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'1 self ix
     -> level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    = UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))
    /\ (forall a : (Term'1.t_term, Value'1.t_value) . contains'3 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
     -> (exists ix : TrailIndex'0.t_trailindex . contains'1 self ix
    /\ level_log'0 ix = level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
    /\ index_logic'0 self ix = a))

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 237 4 237 34] (self : Trail'0.t_trail) =
    [%#span177] abstract_relation'0 self
    /\ sound'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    /\ invariant'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    /\ level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    = UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self)
    /\ UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self)
    = Seq.length (shallow_model'10 (Cdsat_Trail_Trail_Type.trail_assignments self)) - 1
    /\ (forall i : int . 0 <= i /\ i < Seq.length (shallow_model'10 (Cdsat_Trail_Trail_Type.trail_assignments self))
     -> Seq.length (shallow_model'11 (index_logic'1 (Cdsat_Trail_Trail_Type.trail_assignments self) i)) > 0)
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'1 self ix
     -> (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix) = 0)
    = is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix))
    /\ (forall j : TrailIndex'0.t_trailindex . forall i : TrailIndex'0.t_trailindex . contains'1 self i
     -> contains'1 self j  -> i <> j  -> index_logic'0 self i <> index_logic'0 self j)
    /\ justified_is_justified'0 self
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'1 self ix
     -> well_sorted'0 (let (a, _) = index_logic'0 self ix in a))

  use prelude.prelude.Snapshot

  use prelude.prelude.Intrinsic

  let rec clone'1 (self:Value'0.t_value) (return'  (ret:Value'0.t_value))= any
    [ return' (result:Value'0.t_value)-> {[%#span178] result = self} (! return' {result}) ]


  let rec index'0 (self:Trail'0.t_trail) (index:TrailIndex'0.t_trailindex) (return'  (ret:Assignment'0.t_assignment))= {[@expl:precondition] [%#span179] contains'1 self index}
    any
    [ return' (result:Assignment'0.t_assignment)-> {[%#span180] result
      = Seq.get (shallow_model'11 (Seq.get (shallow_model'10 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 index)))) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 index))}
      (! return' {result}) ]


  function shallow_model'5 (self : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) : Seq.seq (TrailIndex'0.t_trailindex)

   =
    [%#span181] shallow_model'0 self.current

  function shallow_model'12 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)

   =
    [%#span182] shallow_model'0 self

  use prelude.prelude.Snapshot

  function shallow_model'4 (self : Snapshot.snap_ty (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) : Seq.seq (TrailIndex'0.t_trailindex)

   =
    [%#span183] shallow_model'12 (Snapshot.inner self)

  function shallow_model'3 (self : Term'0.t_term) : Term'1.t_term =
    [%#span182] shallow_model'6 self

  let rec push'0 (self:borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) (value:TrailIndex'0.t_trailindex) (return'  (ret:()))= {[@expl:precondition] [%#span185] inv'4 value}
    {[@expl:precondition] [%#span184] inv'3 self}
    any
    [ return' (result:())-> {[%#span186] shallow_model'0 self.final = Seq.snoc (shallow_model'5 self) value}
      (! return' {result}) ]


  let rec clone'0 (self:Term'0.t_term) (return'  (ret:Term'0.t_term))= any
    [ return' (result:Term'0.t_term)-> {[%#span187] result = self} (! return' {result}) ]


  let rec index_of'0 (self:Trail'0.t_trail) (a:Term'0.t_term) (return'  (ret:Option'0.t_option (TrailIndex'0.t_trailindex)))= any
    [ return' (result:Option'0.t_option (TrailIndex'0.t_trailindex))-> {[%#span188] match result with
        | Option'0.C_Some x -> contains'1 self x /\ (let (a, _) = index_logic'0 self x in a) = shallow_model'3 a
        | Option'0.C_None -> forall ix : TrailIndex'0.t_trailindex . contains'1 self ix
         -> (let (a, _) = index_logic'0 self ix in a) <> shallow_model'3 a
        end}
      (! return' {result}) ]


  function deep_model'2 (self : Value'0.t_value) : Value'1.t_value =
    [%#span189] deep_model'0 self

  let rec eq'1 (self:Value'0.t_value) (rhs:Value'0.t_value) (return'  (ret:bool))= any
    [ return' (result:bool)-> {[%#span190] result = (deep_model'2 self = deep_model'2 rhs)} (! return' {result}) ]


  function deep_model'1 (self : Sort'0.t_sort) : Sort'1.t_sort =
    [%#span189] deep_model'5 self

  let rec eq'0 (self:Sort'0.t_sort) (rhs:Sort'0.t_sort) (return'  (ret:bool))= any
    [ return' (result:bool)-> {[%#span191] result = (deep_model'1 self = deep_model'1 rhs)} (! return' {result}) ]


  function shallow_model'9 [#"/Users/xavier/Code/cdsat/src/term.rs" 27 4 27 50] (self : Sort'0.t_sort) : Sort'1.t_sort =
    [%#span192] deep_model'5 self

  let rec sort'0 (self:Term'0.t_term) (return'  (ret:Sort'0.t_sort))= any
    [ return' (result:Sort'0.t_sort)-> {[%#span193] shallow_model'9 result = sort'1 (shallow_model'3 self)}
      (! return' {result}) ]


  function shallow_model'8 (self : Value'0.t_value) : Value'1.t_value =
    [%#span182] shallow_model'2 self

  let rec negate'0 (self:Value'0.t_value) (return'  (ret:Value'0.t_value))= {[@expl:precondition] [%#span194] is_bool'0 (shallow_model'8 self)}
    any
    [ return' (result:Value'0.t_value)-> {[%#span195] shallow_model'2 result = negate'1 (shallow_model'8 self)}
      (! return' {result}) ]


  let rec bool'0 (self:Value'0.t_value) (return'  (ret:bool))= {[@expl:precondition] [%#span196] is_bool'0 (shallow_model'8 self)}
    any [ return' (result:bool)-> {[%#span197] self = Value'0.C_Bool result} (! return' {result}) ]

  function shallow_model'7 (self : Term'0.t_term) : Term'1.t_term =
    [%#span198] shallow_model'6 self

  function shallow_model'1 (self : Term'0.t_term) : Term'1.t_term =
    [%#span182] shallow_model'7 self

  use Cdsat_Bool_BoolTheory_Type as BoolTheory'0

  predicate resolve'1 (self : borrowed (BoolTheory'0.t_booltheory)) =
    [%#span199] self.final = self.current

  predicate resolve'0 (self : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) =
    [%#span199] self.final = self.current

  use Core_Result_Result_Type as Result'0

  use prelude.prelude.Snapshot

  function abs_just_extend'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 366 4 366 79] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) (just2 : Seq.seq (TrailIndex'0.t_trailindex)) : ()


  axiom abs_just_extend'0_spec : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex), just2 : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span200] forall i : int . 0
  <= i
  /\ i < Seq.length just2  -> contains'1 self (Seq.get just2 i))
   -> ([%#span201] forall ix : TrailIndex'0.t_trailindex . contains'0 just ix  -> contains'0 just2 ix)
   -> ([%#span202] forall tv : (Term'1.t_term, Value'1.t_value) . contains'2 (abstract_justification'0 self just) tv
   -> contains'2 (abstract_justification'0 self just2) tv)

  use prelude.prelude.Snapshot

  let rec promoted0 (return'  (ret:Sort'0.t_sort))= bb0
    [ bb0 = s0 [ s0 =  [ &_1 <- Sort'0.C_Boolean ] s1 | s1 =  [ &_0 <- _1 ] s2 | s2 = return' {_0} ]  ]
     [ & _0 : Sort'0.t_sort = any_l () | & _1 : Sort'0.t_sort = any_l () ]
    [ return' (result:Sort'0.t_sort)-> return' {result} ]


  let rec eval_inner (self:borrowed (BoolTheory'0.t_booltheory)) (tl:Trail'0.t_trail) (tm:Term'0.t_term) (used:borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) (return'  (ret:Result'0.t_result (Value'0.t_value) (Term'0.t_term)))= {[%#sbool24] forall ix : TrailIndex'0.t_trailindex . contains'0 (shallow_model'5 used) ix
     -> contains'1 tl ix}
    {[%#sbool23] is_bool'1 (shallow_model'3 tm)}
    {[%#sbool22] well_sorted'0 (shallow_model'3 tm)}
    {[%#sbool21] invariant'0 tl}
    (! bb0
    [ bb0 = s0 [ s0 =  [ &old' <- [%#sbool0] Snapshot.new used.current ] s1 | s1 = bb1 ]
    | bb1 = s0 [ s0 =  [ &_14 <- [%#sbool1] Snapshot.new () ] s1 | s1 = bb2 ]
    | bb2 = any
      [ br0 (a:usize) (b:Sort'0.t_sort)-> {tm = Term'0.C_Variable a b} (! bb3)
      | br1 (a:Value'0.t_value)-> {tm = Term'0.C_Value a} (! bb4)
      | br2 (a:Term'0.t_term) (b:Term'0.t_term)-> {tm = Term'0.C_Plus a b} (! bb3)
      | br3 (a:Ratio'0.t_ratio (BigInt'0.t_bigint)) (b:Term'0.t_term)-> {tm = Term'0.C_Times a b} (! bb3)
      | br4 (a:Term'0.t_term) (b:Term'0.t_term)-> {tm = Term'0.C_Eq a b} (! bb6)
      | br5 (a:Term'0.t_term) (b:Term'0.t_term)-> {tm = Term'0.C_Lt a b} (! bb3)
      | br6 (a:Term'0.t_term) (b:Term'0.t_term)-> {tm = Term'0.C_Conj a b} (! bb7)
      | br7 (a:Term'0.t_term)-> {tm = Term'0.C_Neg a} (! bb8)
      | br8 (a:Term'0.t_term) (b:Term'0.t_term)-> {tm = Term'0.C_Disj a b} (! bb9)
      | br9 (a:Term'0.t_term) (b:Term'0.t_term)-> {tm = Term'0.C_Impl a b} (! bb10) ]

    | bb10 = bb99
    | bb99 = s0
      [ s0 = Term'0.impl {tm} (fun (r0'0:Term'0.t_term) (r1'0:Term'0.t_term) ->  [ &l4 <- r0'0 ] s1)
      | s1 = Term'0.impl {tm} (fun (r0'1:Term'0.t_term) (r1'1:Term'0.t_term) ->  [ &r4 <- r1'1 ] s2)
      | s2 = Borrow.borrow_mut <BoolTheory'0.t_booltheory> {self.current}
          (fun (_ret':borrowed (BoolTheory'0.t_booltheory)) ->
             [ &_145 <- _ret' ]
             [ &self <- { self with current = _145.final ; } ]
            s3)
      | s3 = Borrow.borrow_mut <Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)> {used.current}
          (fun (_ret':borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) ->
             [ &_148 <- _ret' ]
             [ &used <- { used with current = _148.final ; } ]
            s4)
      | s4 = eval_inner {_145} {tl} {l4} {_148}
          (fun (_ret':Result'0.t_result (Value'0.t_value) (Term'0.t_term)) ->  [ &_144 <- _ret' ] s5)
      | s5 = bb100 ]

    | bb100 = any
      [ br0 (a:Value'0.t_value)-> {_144 = Result'0.C_Ok a} (! bb102)
      | br1 (a:Term'0.t_term)-> {_144 = Result'0.C_Err a} (! bb103) ]

    | bb101 = s0 [ s0 = -{resolve'0 used}- s1 | s1 = -{resolve'1 self}- s2 | s2 = {[%#sbool2] false} any ]
    | bb103 = s0
      [ s0 = -{resolve'0 used}- s1
      | s1 = -{resolve'1 self}- s2
      | s2 = Result'0.err <Value'0.t_value> <Term'0.t_term> {_144}
          (fun (r0'0:Term'0.t_term) ->
             [ &e6 <- r0'0 ]
            (any
            [ any_ (_any:Term'0.t_term)-> (! Result'0.err <Value'0.t_value> <Term'0.t_term> {_144}
                (fun (l_0'0:Term'0.t_term) ->  [ &_144 <- Result'0.C_Err _any ] s3)) ]
            ))
      | s3 =  [ &_0 <- Result'0.C_Err e6 ] (any [ any_ (_any:Term'0.t_term)-> (!  [ &e6 <- _any ] s4) ] )
      | s4 = bb106 ]

    | bb106 = bb137
    | bb137 = bb138
    | bb138 = bb139
    | bb102 = bb104
    | bb104 = s0
      [ s0 = Result'0.ok <Value'0.t_value> <Term'0.t_term> {_144}
          (fun (r0'0:Value'0.t_value) ->
             [ &x6 <- r0'0 ]
            (any
            [ any_ (_any:Value'0.t_value)-> (! Result'0.ok <Value'0.t_value> <Term'0.t_term> {_144}
                (fun (l_0'0:Value'0.t_value) ->  [ &_144 <- Result'0.C_Ok _any ] s1)) ]
            ))
      | s1 =  [ &v13 <- x6 ] (any [ any_ (_any:Value'0.t_value)-> (!  [ &x6 <- _any ] s2) ] )
      | s2 = bb105 ]

    | bb105 = bb107
    | bb107 = s0
      [ s0 = Borrow.borrow_final <BoolTheory'0.t_booltheory> {self.current} {Borrow.get_id self}
          (fun (_ret':borrowed (BoolTheory'0.t_booltheory)) ->
             [ &_156 <- _ret' ]
             [ &self <- { self with current = _156.final ; } ]
            s1)
      | s1 = Borrow.borrow_final
          <Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)>
          {used.current}
          {Borrow.get_id used}
          (fun (_ret':borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) ->
             [ &_159 <- _ret' ]
             [ &used <- { used with current = _159.final ; } ]
            s2)
      | s2 = eval_inner {_156} {tl} {r4} {_159}
          (fun (_ret':Result'0.t_result (Value'0.t_value) (Term'0.t_term)) ->  [ &_155 <- _ret' ] s3)
      | s3 = bb108 ]

    | bb108 = s0
      [ s0 = -{resolve'0 used}- s1
      | s1 = -{resolve'1 self}- s2
      | s2 = any
        [ br0 (a:Value'0.t_value)-> {_155 = Result'0.C_Ok a} (! bb110)
        | br1 (a:Term'0.t_term)-> {_155 = Result'0.C_Err a} (! bb111) ]
         ]

    | bb109 = {[%#sbool3] false} any
    | bb111 = s0
      [ s0 = Result'0.err <Value'0.t_value> <Term'0.t_term> {_155}
          (fun (r0'0:Term'0.t_term) ->
             [ &e7 <- r0'0 ]
            (any
            [ any_ (_any:Term'0.t_term)-> (! Result'0.err <Value'0.t_value> <Term'0.t_term> {_155}
                (fun (l_0'0:Term'0.t_term) ->  [ &_155 <- Result'0.C_Err _any ] s1)) ]
            ))
      | s1 =  [ &_0 <- Result'0.C_Err e7 ] (any [ any_ (_any:Term'0.t_term)-> (!  [ &e7 <- _any ] s2) ] )
      | s2 = bb114 ]

    | bb114 = bb134
    | bb134 = bb135
    | bb135 = bb136
    | bb110 = bb112
    | bb112 = s0
      [ s0 = Result'0.ok <Value'0.t_value> <Term'0.t_term> {_155}
          (fun (r0'0:Value'0.t_value) ->
             [ &x7 <- r0'0 ]
            (any
            [ any_ (_any:Value'0.t_value)-> (! Result'0.ok <Value'0.t_value> <Term'0.t_term> {_155}
                (fun (l_0'0:Value'0.t_value) ->  [ &_155 <- Result'0.C_Ok _any ] s1)) ]
            ))
      | s1 =  [ &v23 <- x7 ] (any [ any_ (_any:Value'0.t_value)-> (!  [ &x7 <- _any ] s2) ] )
      | s2 = bb113 ]

    | bb113 = bb115
    | bb115 = s0
      [ s0 = {[@expl:assertion] [%#sbool4] forall m : Model'0.t_model . inv'0 m
         -> satisfy_set'0 m (abstract_justification'0 tl (shallow_model'0 used.final))
         -> satisfies'0 m (shallow_model'1 l4, shallow_model'2 v13)
        /\ satisfies'0 m (shallow_model'1 r4, shallow_model'2 v23)}
        s1
      | s1 = bb116 ]

    | bb116 = s0 [ s0 = bool'0 {v13} (fun (_ret':bool) ->  [ &_169 <- _ret' ] s1) | s1 = bb117 ]
    | bb117 = any [ br0 -> {_169 = false} (! bb119) | br1 -> {_169} (! bb118) ]
    | bb118 = s0 [ s0 = bool'0 {v23} (fun (_ret':bool) ->  [ &_168 <- _ret' ] s1) | s1 = bb120 ]
    | bb120 = bb121
    | bb119 = s0 [ s0 =  [ &_168 <- [%#sbool5] true ] s1 | s1 = bb121 ]
    | bb121 = s0
      [ s0 =  [ &_167 <- Value'0.C_Bool _168 ] (any [ any_ (_any:bool)-> (!  [ &_168 <- _any ] s1) ] )
      | s1 =  [ &_0 <- Result'0.C_Ok _167 ] (any [ any_ (_any:Value'0.t_value)-> (!  [ &_167 <- _any ] s2) ] )
      | s2 = bb122 ]

    | bb122 = bb136
    | bb136 = bb139
    | bb139 = bb158
    | bb9 = bb75
    | bb75 = s0
      [ s0 = Term'0.disj {tm} (fun (r0'0:Term'0.t_term) (r1'0:Term'0.t_term) ->  [ &l3 <- r0'0 ] s1)
      | s1 = Term'0.disj {tm} (fun (r0'1:Term'0.t_term) (r1'1:Term'0.t_term) ->  [ &r3 <- r1'1 ] s2)
      | s2 = Borrow.borrow_mut <BoolTheory'0.t_booltheory> {self.current}
          (fun (_ret':borrowed (BoolTheory'0.t_booltheory)) ->
             [ &_113 <- _ret' ]
             [ &self <- { self with current = _113.final ; } ]
            s3)
      | s3 = Borrow.borrow_mut <Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)> {used.current}
          (fun (_ret':borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) ->
             [ &_116 <- _ret' ]
             [ &used <- { used with current = _116.final ; } ]
            s4)
      | s4 = eval_inner {_113} {tl} {l3} {_116}
          (fun (_ret':Result'0.t_result (Value'0.t_value) (Term'0.t_term)) ->  [ &_112 <- _ret' ] s5)
      | s5 = bb76 ]

    | bb76 = any
      [ br0 (a:Value'0.t_value)-> {_112 = Result'0.C_Ok a} (! bb78)
      | br1 (a:Term'0.t_term)-> {_112 = Result'0.C_Err a} (! bb79) ]

    | bb77 = s0 [ s0 = -{resolve'0 used}- s1 | s1 = -{resolve'1 self}- s2 | s2 = {[%#sbool6] false} any ]
    | bb79 = s0
      [ s0 = -{resolve'0 used}- s1
      | s1 = -{resolve'1 self}- s2
      | s2 = Result'0.err <Value'0.t_value> <Term'0.t_term> {_112}
          (fun (r0'0:Term'0.t_term) ->
             [ &e4 <- r0'0 ]
            (any
            [ any_ (_any:Term'0.t_term)-> (! Result'0.err <Value'0.t_value> <Term'0.t_term> {_112}
                (fun (l_0'0:Term'0.t_term) ->  [ &_112 <- Result'0.C_Err _any ] s3)) ]
            ))
      | s3 =  [ &_0 <- Result'0.C_Err e4 ] (any [ any_ (_any:Term'0.t_term)-> (!  [ &e4 <- _any ] s4) ] )
      | s4 = bb82 ]

    | bb82 = bb143
    | bb143 = bb144
    | bb144 = bb145
    | bb78 = bb80
    | bb80 = s0
      [ s0 = Result'0.ok <Value'0.t_value> <Term'0.t_term> {_112}
          (fun (r0'0:Value'0.t_value) ->
             [ &x4 <- r0'0 ]
            (any
            [ any_ (_any:Value'0.t_value)-> (! Result'0.ok <Value'0.t_value> <Term'0.t_term> {_112}
                (fun (l_0'0:Value'0.t_value) ->  [ &_112 <- Result'0.C_Ok _any ] s1)) ]
            ))
      | s1 =  [ &v12 <- x4 ] (any [ any_ (_any:Value'0.t_value)-> (!  [ &x4 <- _any ] s2) ] )
      | s2 = bb81 ]

    | bb81 = bb83
    | bb83 = s0
      [ s0 = Borrow.borrow_final <BoolTheory'0.t_booltheory> {self.current} {Borrow.get_id self}
          (fun (_ret':borrowed (BoolTheory'0.t_booltheory)) ->
             [ &_124 <- _ret' ]
             [ &self <- { self with current = _124.final ; } ]
            s1)
      | s1 = Borrow.borrow_final
          <Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)>
          {used.current}
          {Borrow.get_id used}
          (fun (_ret':borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) ->
             [ &_127 <- _ret' ]
             [ &used <- { used with current = _127.final ; } ]
            s2)
      | s2 = eval_inner {_124} {tl} {r3} {_127}
          (fun (_ret':Result'0.t_result (Value'0.t_value) (Term'0.t_term)) ->  [ &_123 <- _ret' ] s3)
      | s3 = bb84 ]

    | bb84 = s0
      [ s0 = -{resolve'0 used}- s1
      | s1 = -{resolve'1 self}- s2
      | s2 = any
        [ br0 (a:Value'0.t_value)-> {_123 = Result'0.C_Ok a} (! bb86)
        | br1 (a:Term'0.t_term)-> {_123 = Result'0.C_Err a} (! bb87) ]
         ]

    | bb85 = {[%#sbool7] false} any
    | bb87 = s0
      [ s0 = Result'0.err <Value'0.t_value> <Term'0.t_term> {_123}
          (fun (r0'0:Term'0.t_term) ->
             [ &e5 <- r0'0 ]
            (any
            [ any_ (_any:Term'0.t_term)-> (! Result'0.err <Value'0.t_value> <Term'0.t_term> {_123}
                (fun (l_0'0:Term'0.t_term) ->  [ &_123 <- Result'0.C_Err _any ] s1)) ]
            ))
      | s1 =  [ &_0 <- Result'0.C_Err e5 ] (any [ any_ (_any:Term'0.t_term)-> (!  [ &e5 <- _any ] s2) ] )
      | s2 = bb90 ]

    | bb90 = bb140
    | bb140 = bb141
    | bb141 = bb142
    | bb86 = bb88
    | bb88 = s0
      [ s0 = Result'0.ok <Value'0.t_value> <Term'0.t_term> {_123}
          (fun (r0'0:Value'0.t_value) ->
             [ &x5 <- r0'0 ]
            (any
            [ any_ (_any:Value'0.t_value)-> (! Result'0.ok <Value'0.t_value> <Term'0.t_term> {_123}
                (fun (l_0'0:Value'0.t_value) ->  [ &_123 <- Result'0.C_Ok _any ] s1)) ]
            ))
      | s1 =  [ &v22 <- x5 ] (any [ any_ (_any:Value'0.t_value)-> (!  [ &x5 <- _any ] s2) ] )
      | s2 = bb89 ]

    | bb89 = bb91
    | bb91 = s0
      [ s0 = {[@expl:assertion] [%#sbool8] forall m : Model'0.t_model . inv'0 m
         -> satisfy_set'0 m (abstract_justification'0 tl (shallow_model'0 used.final))
         -> satisfies'0 m (shallow_model'1 l3, shallow_model'2 v12)
        /\ satisfies'0 m (shallow_model'1 r3, shallow_model'2 v22)}
        s1
      | s1 = bb92 ]

    | bb92 = s0 [ s0 = bool'0 {v12} (fun (_ret':bool) ->  [ &_137 <- _ret' ] s1) | s1 = bb93 ]
    | bb93 = any [ br0 -> {_137 = false} (! bb95) | br1 -> {_137} (! bb94) ]
    | bb94 = s0 [ s0 =  [ &_136 <- [%#sbool9] true ] s1 | s1 = bb97 ]
    | bb95 = s0 [ s0 = bool'0 {v22} (fun (_ret':bool) ->  [ &_136 <- _ret' ] s1) | s1 = bb96 ]
    | bb96 = bb97
    | bb97 = s0
      [ s0 =  [ &_135 <- Value'0.C_Bool _136 ] (any [ any_ (_any:bool)-> (!  [ &_136 <- _any ] s1) ] )
      | s1 =  [ &_0 <- Result'0.C_Ok _135 ] (any [ any_ (_any:Value'0.t_value)-> (!  [ &_135 <- _any ] s2) ] )
      | s2 = bb98 ]

    | bb98 = bb142
    | bb142 = bb145
    | bb145 = bb158
    | bb8 = bb62
    | bb62 = s0
      [ s0 = Term'0.neg {tm} (fun (r0'0:Term'0.t_term) ->  [ &t <- r0'0 ] s1)
      | s1 = Borrow.borrow_final <BoolTheory'0.t_booltheory> {self.current} {Borrow.get_id self}
          (fun (_ret':borrowed (BoolTheory'0.t_booltheory)) ->
             [ &_98 <- _ret' ]
             [ &self <- { self with current = _98.final ; } ]
            s2)
      | s2 = Borrow.borrow_final
          <Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)>
          {used.current}
          {Borrow.get_id used}
          (fun (_ret':borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) ->
             [ &_101 <- _ret' ]
             [ &used <- { used with current = _101.final ; } ]
            s3)
      | s3 = eval_inner {_98} {tl} {t} {_101}
          (fun (_ret':Result'0.t_result (Value'0.t_value) (Term'0.t_term)) ->  [ &_97 <- _ret' ] s4)
      | s4 = bb63 ]

    | bb63 = s0
      [ s0 = -{resolve'0 used}- s1
      | s1 = -{resolve'1 self}- s2
      | s2 = any
        [ br0 (a:Value'0.t_value)-> {_97 = Result'0.C_Ok a} (! bb65)
        | br1 (a:Term'0.t_term)-> {_97 = Result'0.C_Err a} (! bb66) ]
         ]

    | bb64 = {[%#sbool10] false} any
    | bb66 = s0
      [ s0 = Result'0.err <Value'0.t_value> <Term'0.t_term> {_97}
          (fun (r0'0:Term'0.t_term) ->
             [ &t1 <- r0'0 ]
            (any
            [ any_ (_any:Term'0.t_term)-> (! Result'0.err <Value'0.t_value> <Term'0.t_term> {_97}
                (fun (l_0'0:Term'0.t_term) ->  [ &_97 <- Result'0.C_Err _any ] s1)) ]
            ))
      | s1 =  [ &_0 <- Result'0.C_Err t1 ] (any [ any_ (_any:Term'0.t_term)-> (!  [ &t1 <- _any ] s2) ] )
      | s2 = bb71 ]

    | bb71 = bb72
    | bb72 = bb73
    | bb65 = bb67
    | bb67 = s0
      [ s0 = Result'0.ok <Value'0.t_value> <Term'0.t_term> {_97}
          (fun (r0'0:Value'0.t_value) ->
             [ &v1 <- r0'0 ]
            (any
            [ any_ (_any:Value'0.t_value)-> (! Result'0.ok <Value'0.t_value> <Term'0.t_term> {_97}
                (fun (l_0'0:Value'0.t_value) ->  [ &_97 <- Result'0.C_Ok _any ] s1)) ]
            ))
      | s1 = negate'0 {v1} (fun (_ret':Value'0.t_value) ->  [ &_104 <- _ret' ] s2)
      | s2 = bb68 ]

    | bb68 = s0
      [ s0 =  [ &_0 <- Result'0.C_Ok _104 ] (any [ any_ (_any:Value'0.t_value)-> (!  [ &_104 <- _any ] s1) ] )
      | s1 = bb69 ]

    | bb69 = bb70
    | bb70 = bb73
    | bb73 = bb74
    | bb74 = bb133
    | bb7 = bb38
    | bb38 = s0
      [ s0 = Term'0.conj {tm} (fun (r0'0:Term'0.t_term) (r1'0:Term'0.t_term) ->  [ &l2 <- r0'0 ] s1)
      | s1 = Term'0.conj {tm} (fun (r0'1:Term'0.t_term) (r1'1:Term'0.t_term) ->  [ &r2 <- r1'1 ] s2)
      | s2 = Borrow.borrow_mut <BoolTheory'0.t_booltheory> {self.current}
          (fun (_ret':borrowed (BoolTheory'0.t_booltheory)) ->
             [ &_69 <- _ret' ]
             [ &self <- { self with current = _69.final ; } ]
            s3)
      | s3 = Borrow.borrow_mut <Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)> {used.current}
          (fun (_ret':borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) ->
             [ &_72 <- _ret' ]
             [ &used <- { used with current = _72.final ; } ]
            s4)
      | s4 = eval_inner {_69} {tl} {l2} {_72}
          (fun (_ret':Result'0.t_result (Value'0.t_value) (Term'0.t_term)) ->  [ &_68 <- _ret' ] s5)
      | s5 = bb39 ]

    | bb39 = any
      [ br0 (a:Value'0.t_value)-> {_68 = Result'0.C_Ok a} (! bb41)
      | br1 (a:Term'0.t_term)-> {_68 = Result'0.C_Err a} (! bb42) ]

    | bb40 = s0 [ s0 = -{resolve'0 used}- s1 | s1 = -{resolve'1 self}- s2 | s2 = {[%#sbool11] false} any ]
    | bb42 = s0
      [ s0 = -{resolve'0 used}- s1
      | s1 = -{resolve'1 self}- s2
      | s2 = Result'0.err <Value'0.t_value> <Term'0.t_term> {_68}
          (fun (r0'0:Term'0.t_term) ->
             [ &e2 <- r0'0 ]
            (any
            [ any_ (_any:Term'0.t_term)-> (! Result'0.err <Value'0.t_value> <Term'0.t_term> {_68}
                (fun (l_0'0:Term'0.t_term) ->  [ &_68 <- Result'0.C_Err _any ] s3)) ]
            ))
      | s3 =  [ &_0 <- Result'0.C_Err e2 ] (any [ any_ (_any:Term'0.t_term)-> (!  [ &e2 <- _any ] s4) ] )
      | s4 = bb45 ]

    | bb45 = bb149
    | bb149 = bb150
    | bb150 = bb151
    | bb41 = bb43
    | bb43 = s0
      [ s0 = Result'0.ok <Value'0.t_value> <Term'0.t_term> {_68}
          (fun (r0'0:Value'0.t_value) ->
             [ &x2 <- r0'0 ]
            (any
            [ any_ (_any:Value'0.t_value)-> (! Result'0.ok <Value'0.t_value> <Term'0.t_term> {_68}
                (fun (l_0'0:Value'0.t_value) ->  [ &_68 <- Result'0.C_Ok _any ] s1)) ]
            ))
      | s1 =  [ &v11 <- x2 ] (any [ any_ (_any:Value'0.t_value)-> (!  [ &x2 <- _any ] s2) ] )
      | s2 = bb44 ]

    | bb44 = bb46
    | bb46 = s0
      [ s0 = Borrow.borrow_final <BoolTheory'0.t_booltheory> {self.current} {Borrow.get_id self}
          (fun (_ret':borrowed (BoolTheory'0.t_booltheory)) ->
             [ &_80 <- _ret' ]
             [ &self <- { self with current = _80.final ; } ]
            s1)
      | s1 = Borrow.borrow_final
          <Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)>
          {used.current}
          {Borrow.get_id used}
          (fun (_ret':borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) ->
             [ &_83 <- _ret' ]
             [ &used <- { used with current = _83.final ; } ]
            s2)
      | s2 = eval_inner {_80} {tl} {r2} {_83}
          (fun (_ret':Result'0.t_result (Value'0.t_value) (Term'0.t_term)) ->  [ &_79 <- _ret' ] s3)
      | s3 = bb47 ]

    | bb47 = s0
      [ s0 = -{resolve'0 used}- s1
      | s1 = -{resolve'1 self}- s2
      | s2 = any
        [ br0 (a:Value'0.t_value)-> {_79 = Result'0.C_Ok a} (! bb49)
        | br1 (a:Term'0.t_term)-> {_79 = Result'0.C_Err a} (! bb50) ]
         ]

    | bb48 = {[%#sbool12] false} any
    | bb50 = s0
      [ s0 = Result'0.err <Value'0.t_value> <Term'0.t_term> {_79}
          (fun (r0'0:Term'0.t_term) ->
             [ &e3 <- r0'0 ]
            (any
            [ any_ (_any:Term'0.t_term)-> (! Result'0.err <Value'0.t_value> <Term'0.t_term> {_79}
                (fun (l_0'0:Term'0.t_term) ->  [ &_79 <- Result'0.C_Err _any ] s1)) ]
            ))
      | s1 =  [ &_0 <- Result'0.C_Err e3 ] (any [ any_ (_any:Term'0.t_term)-> (!  [ &e3 <- _any ] s2) ] )
      | s2 = bb53 ]

    | bb53 = bb146
    | bb146 = bb147
    | bb147 = bb148
    | bb49 = bb51
    | bb51 = s0
      [ s0 = Result'0.ok <Value'0.t_value> <Term'0.t_term> {_79}
          (fun (r0'0:Value'0.t_value) ->
             [ &x3 <- r0'0 ]
            (any
            [ any_ (_any:Value'0.t_value)-> (! Result'0.ok <Value'0.t_value> <Term'0.t_term> {_79}
                (fun (l_0'0:Value'0.t_value) ->  [ &_79 <- Result'0.C_Ok _any ] s1)) ]
            ))
      | s1 =  [ &v21 <- x3 ] (any [ any_ (_any:Value'0.t_value)-> (!  [ &x3 <- _any ] s2) ] )
      | s2 = bb52 ]

    | bb52 = bb54
    | bb54 = s0
      [ s0 = {[@expl:assertion] [%#sbool13] forall m : Model'0.t_model . inv'0 m
         -> satisfy_set'0 m (abstract_justification'0 tl (shallow_model'0 used.final))
         -> satisfies'0 m (shallow_model'1 l2, shallow_model'2 v11)
        /\ satisfies'0 m (shallow_model'1 r2, shallow_model'2 v21)}
        s1
      | s1 = bb55 ]

    | bb55 = s0 [ s0 = bool'0 {v11} (fun (_ret':bool) ->  [ &_93 <- _ret' ] s1) | s1 = bb56 ]
    | bb56 = any [ br0 -> {_93 = false} (! bb58) | br1 -> {_93} (! bb57) ]
    | bb57 = s0 [ s0 = bool'0 {v21} (fun (_ret':bool) ->  [ &_92 <- _ret' ] s1) | s1 = bb59 ]
    | bb59 = bb60
    | bb58 = s0 [ s0 =  [ &_92 <- [%#sbool14] false ] s1 | s1 = bb60 ]
    | bb60 = s0
      [ s0 =  [ &_91 <- Value'0.C_Bool _92 ] (any [ any_ (_any:bool)-> (!  [ &_92 <- _any ] s1) ] )
      | s1 =  [ &_0 <- Result'0.C_Ok _91 ] (any [ any_ (_any:Value'0.t_value)-> (!  [ &_91 <- _any ] s2) ] )
      | s2 = bb61 ]

    | bb61 = bb148
    | bb148 = bb151
    | bb151 = bb158
    | bb6 = bb14
    | bb14 = s0
      [ s0 = Term'0.eq {tm} (fun (r0'0:Term'0.t_term) (r1'0:Term'0.t_term) ->  [ &l <- r0'0 ] s1)
      | s1 =  [ &l1 <- l ] s2
      | s2 = Term'0.eq {tm} (fun (r0'1:Term'0.t_term) (r1'1:Term'0.t_term) ->  [ &r <- r1'1 ] s3)
      | s3 =  [ &r1 <- r ] s4
      | s4 = sort'0 {r1} (fun (_ret':Sort'0.t_sort) ->  [ &_31 <- _ret' ] s5)
      | s5 = bb15 ]

    | bb15 = s0
      [ s0 = promoted0 (fun (pr0:Sort'0.t_sort) ->  [ &_194 <- pr0 ] s1)
      | s1 = eq'0 {_31} {_194} (fun (_ret':bool) ->  [ &_29 <- _ret' ] s2)
      | s2 = bb16 ]

    | bb16 = any [ br0 -> {_29 = false} (! bb18) | br1 -> {_29} (! bb17) ]
    | bb17 = s0
      [ s0 = Borrow.borrow_mut <BoolTheory'0.t_booltheory> {self.current}
          (fun (_ret':borrowed (BoolTheory'0.t_booltheory)) ->
             [ &_38 <- _ret' ]
             [ &self <- { self with current = _38.final ; } ]
            s1)
      | s1 = Borrow.borrow_mut <Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)> {used.current}
          (fun (_ret':borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) ->
             [ &_41 <- _ret' ]
             [ &used <- { used with current = _41.final ; } ]
            s2)
      | s2 = eval_inner {_38} {tl} {l} {_41}
          (fun (_ret':Result'0.t_result (Value'0.t_value) (Term'0.t_term)) ->  [ &_37 <- _ret' ] s3)
      | s3 = bb19 ]

    | bb19 = any
      [ br0 (a:Value'0.t_value)-> {_37 = Result'0.C_Ok a} (! bb21)
      | br1 (a:Term'0.t_term)-> {_37 = Result'0.C_Err a} (! bb22) ]

    | bb20 = s0 [ s0 = -{resolve'0 used}- s1 | s1 = -{resolve'1 self}- s2 | s2 = {[%#sbool15] false} any ]
    | bb22 = s0
      [ s0 = -{resolve'0 used}- s1
      | s1 = -{resolve'1 self}- s2
      | s2 = Result'0.err <Value'0.t_value> <Term'0.t_term> {_37}
          (fun (r0'0:Term'0.t_term) ->
             [ &e <- r0'0 ]
            (any
            [ any_ (_any:Term'0.t_term)-> (! Result'0.err <Value'0.t_value> <Term'0.t_term> {_37}
                (fun (l_0'0:Term'0.t_term) ->  [ &_37 <- Result'0.C_Err _any ] s3)) ]
            ))
      | s3 =  [ &_0 <- Result'0.C_Err e ] (any [ any_ (_any:Term'0.t_term)-> (!  [ &e <- _any ] s4) ] )
      | s4 = bb25 ]

    | bb25 = bb155
    | bb155 = bb156
    | bb156 = bb157
    | bb21 = bb23
    | bb23 = s0
      [ s0 = Result'0.ok <Value'0.t_value> <Term'0.t_term> {_37}
          (fun (r0'0:Value'0.t_value) ->
             [ &x <- r0'0 ]
            (any
            [ any_ (_any:Value'0.t_value)-> (! Result'0.ok <Value'0.t_value> <Term'0.t_term> {_37}
                (fun (l_0'0:Value'0.t_value) ->  [ &_37 <- Result'0.C_Ok _any ] s1)) ]
            ))
      | s1 =  [ &v1 <- x ] (any [ any_ (_any:Value'0.t_value)-> (!  [ &x <- _any ] s2) ] )
      | s2 = bb24 ]

    | bb24 = bb26
    | bb26 = s0
      [ s0 = Borrow.borrow_final <BoolTheory'0.t_booltheory> {self.current} {Borrow.get_id self}
          (fun (_ret':borrowed (BoolTheory'0.t_booltheory)) ->
             [ &_49 <- _ret' ]
             [ &self <- { self with current = _49.final ; } ]
            s1)
      | s1 = Borrow.borrow_final
          <Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)>
          {used.current}
          {Borrow.get_id used}
          (fun (_ret':borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) ->
             [ &_52 <- _ret' ]
             [ &used <- { used with current = _52.final ; } ]
            s2)
      | s2 = eval_inner {_49} {tl} {r} {_52}
          (fun (_ret':Result'0.t_result (Value'0.t_value) (Term'0.t_term)) ->  [ &_48 <- _ret' ] s3)
      | s3 = bb27 ]

    | bb27 = s0
      [ s0 = -{resolve'0 used}- s1
      | s1 = -{resolve'1 self}- s2
      | s2 = any
        [ br0 (a:Value'0.t_value)-> {_48 = Result'0.C_Ok a} (! bb29)
        | br1 (a:Term'0.t_term)-> {_48 = Result'0.C_Err a} (! bb30) ]
         ]

    | bb28 = {[%#sbool16] false} any
    | bb30 = s0
      [ s0 = Result'0.err <Value'0.t_value> <Term'0.t_term> {_48}
          (fun (r0'0:Term'0.t_term) ->
             [ &e1 <- r0'0 ]
            (any
            [ any_ (_any:Term'0.t_term)-> (! Result'0.err <Value'0.t_value> <Term'0.t_term> {_48}
                (fun (l_0'0:Term'0.t_term) ->  [ &_48 <- Result'0.C_Err _any ] s1)) ]
            ))
      | s1 =  [ &_0 <- Result'0.C_Err e1 ] (any [ any_ (_any:Term'0.t_term)-> (!  [ &e1 <- _any ] s2) ] )
      | s2 = bb33 ]

    | bb33 = bb152
    | bb152 = bb153
    | bb153 = bb154
    | bb29 = bb31
    | bb31 = s0
      [ s0 = Result'0.ok <Value'0.t_value> <Term'0.t_term> {_48}
          (fun (r0'0:Value'0.t_value) ->
             [ &x1 <- r0'0 ]
            (any
            [ any_ (_any:Value'0.t_value)-> (! Result'0.ok <Value'0.t_value> <Term'0.t_term> {_48}
                (fun (l_0'0:Value'0.t_value) ->  [ &_48 <- Result'0.C_Ok _any ] s1)) ]
            ))
      | s1 =  [ &v2 <- x1 ] (any [ any_ (_any:Value'0.t_value)-> (!  [ &x1 <- _any ] s2) ] )
      | s2 = bb32 ]

    | bb32 = bb34
    | bb34 = s0
      [ s0 = {[@expl:assertion] [%#sbool17] forall m : Model'0.t_model . inv'0 m
         -> satisfy_set'0 m (abstract_justification'0 tl (shallow_model'0 used.final))
         -> satisfies'0 m (shallow_model'1 l, shallow_model'2 v1)
        /\ satisfies'0 m (shallow_model'1 r, shallow_model'2 v2)}
        s1
      | s1 = bb35 ]

    | bb35 = s0 [ s0 = eq'1 {v1} {v2} (fun (_ret':bool) ->  [ &_61 <- _ret' ] s1) | s1 = bb36 ]
    | bb36 = s0
      [ s0 =  [ &_60 <- Value'0.C_Bool _61 ] (any [ any_ (_any:bool)-> (!  [ &_61 <- _any ] s1) ] )
      | s1 =  [ &_0 <- Result'0.C_Ok _60 ] (any [ any_ (_any:Value'0.t_value)-> (!  [ &_60 <- _any ] s2) ] )
      | s2 = bb37 ]

    | bb37 = bb154
    | bb154 = bb157
    | bb157 = bb158
    | bb18 = bb3
    | bb4 = Term'0.value {tm}
        (fun (r0'0:Value'0.t_value) ->
          any
          [ br0 (a:bool)-> {r0'0 = Value'0.C_Bool a} (! bb5)
          | br1 (a:Ratio'0.t_ratio (BigInt'0.t_bigint))-> {r0'0 = Value'0.C_Rat a} (! bb3) ]
          )
    | bb3 = s0
      [ s0 = -{resolve'1 self}- s1
      | s1 = index_of'0 {tl} {tm} (fun (_ret':Option'0.t_option (TrailIndex'0.t_trailindex)) ->  [ &_172 <- _ret' ] s2)
      | s2 = bb123 ]

    | bb123 = any
      [ br0 -> {_172 = Option'0.C_None } (! bb130)
      | br1 (a:TrailIndex'0.t_trailindex)-> {_172 = Option'0.C_Some a} (! bb124) ]

    | bb130 = s0
      [ s0 = -{resolve'0 used}- s1
      | s1 = clone'0 {tm} (fun (_ret':Term'0.t_term) ->  [ &_192 <- _ret' ] s2)
      | s2 = bb131 ]

    | bb131 = s0
      [ s0 =  [ &_0 <- Result'0.C_Err _192 ] (any [ any_ (_any:Term'0.t_term)-> (!  [ &_192 <- _any ] s1) ] )
      | s1 = bb132 ]

    | bb132 = bb133
    | bb133 = bb159
    | bb124 = bb125
    | bb125 = s0
      [ s0 = Option'0.some <TrailIndex'0.t_trailindex> {_172}
          (fun (r0'0:TrailIndex'0.t_trailindex) ->  [ &x8 <- r0'0 ] s1)
      | s1 = Borrow.borrow_final
          <Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)>
          {used.current}
          {Borrow.get_id used}
          (fun (_ret':borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) ->
             [ &_179 <- _ret' ]
             [ &used <- { used with current = _179.final ; } ]
            s2)
      | s2 = push'0 {_179} {x8} (fun (_ret':()) ->  [ &_178 <- _ret' ] s3)
      | s3 = bb126 ]

    | bb126 = s0
      [ s0 = -{resolve'0 used}- s1
      | s1 = {[@expl:assertion] [%#sbool18] (let (a, _) = index_logic'0 tl x8 in a) = shallow_model'3 tm} s2
      | s2 = {[@expl:assertion] [%#sbool19] is_bool'0 (let (_, a) = index_logic'0 tl x8 in a)} s3
      | s3 = {[@expl:assertion] [%#sbool20] forall ix : TrailIndex'0.t_trailindex . contains'0 (shallow_model'4 old') ix
         -> contains'0 (shallow_model'5 used) ix}
        s4
      | s4 = index'0 {tl} {x8} (fun (_ret':Assignment'0.t_assignment) ->  [ &_189 <- _ret' ] s5)
      | s5 = bb127 ]

    | bb127 = s0
      [ s0 = Assignment'0.t_assignment {_189}
          (fun (rterm'0:Term'0.t_term) (rval'0:Value'0.t_value) (rreason'0:Reason'0.t_reason) (rlevel'0:usize) ->
            clone'1 {rval'0} (fun (_ret':Value'0.t_value) ->  [ &_187 <- _ret' ] s1))
      | s1 = bb128 ]

    | bb128 = s0
      [ s0 =  [ &_0 <- Result'0.C_Ok _187 ] (any [ any_ (_any:Value'0.t_value)-> (!  [ &_187 <- _any ] s1) ] )
      | s1 = bb129 ]

    | bb129 = bb158
    | bb5 = bb11
    | bb11 = s0
      [ s0 = -{resolve'0 used}- s1
      | s1 = -{resolve'1 self}- s2
      | s2 = Term'0.value {tm} (fun (r0'0:Value'0.t_value) ->  [ &v <- r0'0 ] s3)
      | s3 = clone'1 {v} (fun (_ret':Value'0.t_value) ->  [ &_23 <- _ret' ] s4)
      | s4 = bb12 ]

    | bb12 = s0
      [ s0 =  [ &_0 <- Result'0.C_Ok _23 ] (any [ any_ (_any:Value'0.t_value)-> (!  [ &_23 <- _any ] s1) ] )
      | s1 = bb13 ]

    | bb13 = bb158
    | bb158 = bb159
    | bb159 = return' {_0} ]
    )
    [ & _0 : Result'0.t_result (Value'0.t_value) (Term'0.t_term) = any_l ()
    | & self : borrowed (BoolTheory'0.t_booltheory) = self
    | & tl : Trail'0.t_trail = tl
    | & tm : Term'0.t_term = tm
    | & used : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) = used
    | & old' : Snapshot.snap_ty (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) = any_l ()
    | & _14 : Snapshot.snap_ty () = any_l ()
    | & v : Value'0.t_value = any_l ()
    | & _23 : Value'0.t_value = any_l ()
    | & l : Term'0.t_term = any_l ()
    | & l1 : Term'0.t_term = any_l ()
    | & r : Term'0.t_term = any_l ()
    | & r1 : Term'0.t_term = any_l ()
    | & _29 : bool = any_l ()
    | & _31 : Sort'0.t_sort = any_l ()
    | & v1 : Value'0.t_value = any_l ()
    | & _37 : Result'0.t_result (Value'0.t_value) (Term'0.t_term) = any_l ()
    | & _38 : borrowed (BoolTheory'0.t_booltheory) = any_l ()
    | & _41 : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) = any_l ()
    | & x : Value'0.t_value = any_l ()
    | & e : Term'0.t_term = any_l ()
    | & v2 : Value'0.t_value = any_l ()
    | & _48 : Result'0.t_result (Value'0.t_value) (Term'0.t_term) = any_l ()
    | & _49 : borrowed (BoolTheory'0.t_booltheory) = any_l ()
    | & _52 : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) = any_l ()
    | & x1 : Value'0.t_value = any_l ()
    | & e1 : Term'0.t_term = any_l ()
    | & _60 : Value'0.t_value = any_l ()
    | & _61 : bool = any_l ()
    | & l2 : Term'0.t_term = any_l ()
    | & r2 : Term'0.t_term = any_l ()
    | & v11 : Value'0.t_value = any_l ()
    | & _68 : Result'0.t_result (Value'0.t_value) (Term'0.t_term) = any_l ()
    | & _69 : borrowed (BoolTheory'0.t_booltheory) = any_l ()
    | & _72 : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) = any_l ()
    | & x2 : Value'0.t_value = any_l ()
    | & e2 : Term'0.t_term = any_l ()
    | & v21 : Value'0.t_value = any_l ()
    | & _79 : Result'0.t_result (Value'0.t_value) (Term'0.t_term) = any_l ()
    | & _80 : borrowed (BoolTheory'0.t_booltheory) = any_l ()
    | & _83 : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) = any_l ()
    | & x3 : Value'0.t_value = any_l ()
    | & e3 : Term'0.t_term = any_l ()
    | & _91 : Value'0.t_value = any_l ()
    | & _92 : bool = any_l ()
    | & _93 : bool = any_l ()
    | & t : Term'0.t_term = any_l ()
    | & _97 : Result'0.t_result (Value'0.t_value) (Term'0.t_term) = any_l ()
    | & _98 : borrowed (BoolTheory'0.t_booltheory) = any_l ()
    | & _101 : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) = any_l ()
    | & _104 : Value'0.t_value = any_l ()
    | & t1 : Term'0.t_term = any_l ()
    | & l3 : Term'0.t_term = any_l ()
    | & r3 : Term'0.t_term = any_l ()
    | & v12 : Value'0.t_value = any_l ()
    | & _112 : Result'0.t_result (Value'0.t_value) (Term'0.t_term) = any_l ()
    | & _113 : borrowed (BoolTheory'0.t_booltheory) = any_l ()
    | & _116 : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) = any_l ()
    | & x4 : Value'0.t_value = any_l ()
    | & e4 : Term'0.t_term = any_l ()
    | & v22 : Value'0.t_value = any_l ()
    | & _123 : Result'0.t_result (Value'0.t_value) (Term'0.t_term) = any_l ()
    | & _124 : borrowed (BoolTheory'0.t_booltheory) = any_l ()
    | & _127 : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) = any_l ()
    | & x5 : Value'0.t_value = any_l ()
    | & e5 : Term'0.t_term = any_l ()
    | & _135 : Value'0.t_value = any_l ()
    | & _136 : bool = any_l ()
    | & _137 : bool = any_l ()
    | & l4 : Term'0.t_term = any_l ()
    | & r4 : Term'0.t_term = any_l ()
    | & v13 : Value'0.t_value = any_l ()
    | & _144 : Result'0.t_result (Value'0.t_value) (Term'0.t_term) = any_l ()
    | & _145 : borrowed (BoolTheory'0.t_booltheory) = any_l ()
    | & _148 : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) = any_l ()
    | & x6 : Value'0.t_value = any_l ()
    | & e6 : Term'0.t_term = any_l ()
    | & v23 : Value'0.t_value = any_l ()
    | & _155 : Result'0.t_result (Value'0.t_value) (Term'0.t_term) = any_l ()
    | & _156 : borrowed (BoolTheory'0.t_booltheory) = any_l ()
    | & _159 : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) = any_l ()
    | & x7 : Value'0.t_value = any_l ()
    | & e7 : Term'0.t_term = any_l ()
    | & _167 : Value'0.t_value = any_l ()
    | & _168 : bool = any_l ()
    | & _169 : bool = any_l ()
    | & _172 : Option'0.t_option (TrailIndex'0.t_trailindex) = any_l ()
    | & x8 : TrailIndex'0.t_trailindex = any_l ()
    | & _178 : () = any_l ()
    | & _179 : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) = any_l ()
    | & _187 : Value'0.t_value = any_l ()
    | & _189 : Assignment'0.t_assignment = any_l ()
    | & _192 : Term'0.t_term = any_l ()
    | & _194 : Sort'0.t_sort = any_l () ]

    [ return' (result:Result'0.t_result (Value'0.t_value) (Term'0.t_term))-> {[@expl:postcondition] [%#sbool27] forall ix : TrailIndex'0.t_trailindex . contains'0 (shallow_model'0 used.final) ix
       -> contains'1 tl ix}
      {[@expl:postcondition] [%#sbool26] forall ix : TrailIndex'0.t_trailindex . contains'0 (shallow_model'5 used) ix
       -> contains'0 (shallow_model'0 used.final) ix}
      {[@expl:postcondition] [%#sbool25] match result with
        | Result'0.C_Ok v -> is_bool'0 (shallow_model'2 v)
        /\ (forall m : Model'0.t_model . inv'0 m
         -> satisfy_set'0 m (abstract_justification'0 tl (shallow_model'0 used.final))
         -> satisfies'0 m (shallow_model'3 tm, shallow_model'2 v))
        | Result'0.C_Err t -> acceptable'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost tl)) (shallow_model'6 t) (shallow_model'2 (Value'0.C_Bool true))
        /\ well_sorted'0 (shallow_model'6 t)
        end}
      (! return' {result}) ]

end
module Cdsat_Bool_Impl0_Eval
  let%span sbool0 = "/Users/xavier/Code/cdsat/src/bool.rs" 116 20 116 30

  let%span sbool1 = "/Users/xavier/Code/cdsat/src/bool.rs" 104 15 104 29

  let%span sbool2 = "/Users/xavier/Code/cdsat/src/bool.rs" 105 4 105 34

  let%span sbool3 = "/Users/xavier/Code/cdsat/src/bool.rs" 106 4 106 30

  let%span sbool4 = "/Users/xavier/Code/cdsat/src/bool.rs" 107 4 107 73

  let%span sbool5 = "/Users/xavier/Code/cdsat/src/bool.rs" 108 14 114 5

  let%span span6 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span7 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  let%span span8 = "/Users/xavier/Code/cdsat/src/trail.rs" 146 14 146 59

  let%span span9 = "/Users/xavier/Code/cdsat/src/trail.rs" 140 15 140 48

  let%span span10 = "/Users/xavier/Code/cdsat/src/trail.rs" 141 14 141 44

  let%span span11 = "/Users/xavier/Code/cdsat/src/trail.rs" 134 15 134 45

  let%span span12 = "/Users/xavier/Code/cdsat/src/trail.rs" 135 14 135 47

  let%span span13 = "/Users/xavier/Code/cdsat/src/trail.rs" 127 15 127 32

  let%span span14 = "/Users/xavier/Code/cdsat/src/trail.rs" 128 15 128 32

  let%span span15 = "/Users/xavier/Code/cdsat/src/trail.rs" 129 14 129 31

  let%span span16 = "/Users/xavier/Code/cdsat/src/trail.rs" 122 14 122 45

  let%span span17 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 41 20 41 56

  let%span span18 = "/Users/xavier/Code/cdsat/src/trail.rs" 117 14 117 64

  let%span span19 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 31 20 31 53

  let%span span20 = "/Users/xavier/Code/cdsat/src/trail.rs" 112 14 112 61

  let%span span21 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 21 20 21 53

  let%span span22 = "/Users/xavier/Code/cdsat/src/trail.rs" 107 14 107 61

  let%span span23 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 11 20 11 56

  let%span span24 = "/Users/xavier/Code/cdsat/src/trail.rs" 102 14 102 64

  let%span span25 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 14 70 15

  let%span span26 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 23 70 24

  let%span span27 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 69 14 69 59

  let%span span28 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 64 15 64 48

  let%span span29 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 16 66 17

  let%span span30 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 25 66 26

  let%span span31 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 65 14 65 44

  let%span span32 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 59 15 59 45

  let%span span33 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 16 61 17

  let%span span34 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 25 61 26

  let%span span35 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 60 14 60 47

  let%span span36 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 53 15 53 32

  let%span span37 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 54 15 54 32

  let%span span38 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 13 56 14

  let%span span39 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 22 56 23

  let%span span40 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 31 56 32

  let%span span41 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 55 14 55 31

  let%span span42 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 50 12 50 13

  let%span span43 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 49 14 49 45

  let%span span44 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 18 46 19

  let%span span45 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 27 46 28

  let%span span46 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 45 14 45 64

  let%span span47 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 18 36 19

  let%span span48 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 27 36 28

  let%span span49 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 35 14 35 61

  let%span span50 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 18 26 19

  let%span span51 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 27 26 28

  let%span span52 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 25 14 25 61

  let%span span53 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 18 16 19

  let%span span54 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 27 16 28

  let%span span55 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 15 14 15 64

  let%span span56 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span57 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span58 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span59 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span60 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span61 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span62 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span63 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span64 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span65 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span66 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span67 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span68 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span69 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span70 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span71 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span72 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span73 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span74 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span75 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span76 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span77 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span78 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span79 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span80 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span81 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span82 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span83 = "/Users/xavier/Code/cdsat/src/theory.rs" 398 8 400 79

  let%span span84 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span85 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span86 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span87 = "/Users/xavier/Code/cdsat/src/term.rs" 195 8 225 9

  let%span span88 = "/Users/xavier/Code/cdsat/src/term.rs" 180 8 180 25

  let%span span89 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span90 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span91 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span92 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span93 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span94 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span95 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span96 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 129 8 129 78

  let%span span97 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 13 814 14

  let%span span98 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 24 814 25

  let%span span99 = "/Users/xavier/Code/cdsat/src/trail.rs" 809 0 809 73

  let%span span100 = "/Users/xavier/Code/cdsat/src/trail.rs" 810 0 810 63

  let%span span101 = "/Users/xavier/Code/cdsat/src/trail.rs" 811 0 811 55

  let%span span102 = "/Users/xavier/Code/cdsat/src/trail.rs" 812 0 812 52

  let%span span103 = "/Users/xavier/Code/cdsat/src/trail.rs" 813 10 813 33

  let%span span104 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 33 814 39

  let%span span105 = "/Users/xavier/Code/cdsat/src/trail.rs" 808 10 808 17

  let%span span106 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span107 = "/Users/xavier/Code/cdsat/src/trail.rs" 726 8 726 61

  let%span span108 = "/Users/xavier/Code/cdsat/src/trail.rs" 646 8 648 9

  let%span span109 = "/Users/xavier/Code/cdsat/src/trail.rs" 291 12 291 92

  let%span span110 = "/Users/xavier/Code/cdsat/src/trail.rs" 313 4 313 82

  let%span span111 = "/Users/xavier/Code/cdsat/src/trail.rs" 314 14 314 40

  let%span span112 = "/Users/xavier/Code/cdsat/src/trail.rs" 315 4 315 115

  let%span span113 = "/Users/xavier/Code/cdsat/src/trail.rs" 316 4 316 115

  let%span span114 = "/Users/xavier/Code/cdsat/src/trail.rs" 317 4 317 101

  let%span span115 = "/Users/xavier/Code/cdsat/src/trail.rs" 312 14 312 24

  let%span span116 = "/Users/xavier/Code/cdsat/src/theory.rs" 60 8 60 36

  let%span span117 = "/Users/xavier/Code/cdsat/src/theory.rs" 31 8 54 9

  let%span span118 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 90 8 90 31

  let%span span119 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span120 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span121 = "/Users/xavier/Code/cdsat/src/theory.rs" 616 15 616 27

  let%span span122 = "/Users/xavier/Code/cdsat/src/theory.rs" 617 15 617 32

  let%span span123 = "/Users/xavier/Code/cdsat/src/theory.rs" 618 4 618 90

  let%span span124 = "/Users/xavier/Code/cdsat/src/theory.rs" 512 8 515 9

  let%span span125 = "/Users/xavier/Code/cdsat/src/theory.rs" 522 8 525 9

  let%span span126 = "/Users/xavier/Code/cdsat/src/theory.rs" 206 8 206 84

  let%span span127 = "/Users/xavier/Code/cdsat/src/theory.rs" 502 8 505 9

  let%span span128 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span129 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span130 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span131 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span132 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span133 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span134 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span135 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span136 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span137 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span138 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span139 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span140 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span141 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span142 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span143 = "/Users/xavier/Code/cdsat/src/theory.rs" 484 15 484 31

  let%span span144 = "/Users/xavier/Code/cdsat/src/theory.rs" 485 15 485 35

  let%span span145 = "/Users/xavier/Code/cdsat/src/theory.rs" 486 15 486 27

  let%span span146 = "/Users/xavier/Code/cdsat/src/theory.rs" 487 4 487 54

  let%span span147 = "/Users/xavier/Code/cdsat/src/theory.rs" 488 4 488 58

  let%span span148 = "/Users/xavier/Code/cdsat/src/theory.rs" 489 4 489 61

  let%span span149 = "/Users/xavier/Code/cdsat/src/trail.rs" 268 8 272 9

  let%span span150 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 31 8 31 32

  let%span span151 = "/Users/xavier/Code/cdsat/src/trail.rs" 547 4 547 12

  let%span span152 = "/Users/xavier/Code/cdsat/src/trail.rs" 254 8 263 9

  let%span span153 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 20 8 20 31

  let%span span154 = "/Users/xavier/Code/cdsat/src/trail.rs" 179 4 179 12

  let%span span155 = "/Users/xavier/Code/cdsat/src/trail.rs" 279 12 283 13

  let%span span156 = "/Users/xavier/Code/cdsat/src/trail.rs" 238 8 248 9

  let%span span157 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 26 20 26 34

  let%span span158 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 108 8 108 31

  let%span span159 = "/Users/xavier/Code/cdsat/src/bool.rs" 126 15 126 29

  let%span span160 = "/Users/xavier/Code/cdsat/src/bool.rs" 127 4 127 34

  let%span span161 = "/Users/xavier/Code/cdsat/src/bool.rs" 128 4 128 30

  let%span span162 = "/Users/xavier/Code/cdsat/src/bool.rs" 129 4 129 70

  let%span span163 = "/Users/xavier/Code/cdsat/src/bool.rs" 130 14 137 5

  let%span span164 = "/Users/xavier/Code/cdsat/src/bool.rs" 138 4 138 75

  let%span span165 = "/Users/xavier/Code/cdsat/src/bool.rs" 139 4 139 72

  let%span span166 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 69 26 69 44

  let%span span167 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 422 4 422 30

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function eq_cmp'2 (_1 : usize) (_2 : usize) : ()

  function antisym2'2 (_1 : usize) (_2 : usize) : ()

  function antisym1'2 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'2 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'2 (_1 : usize) : ()

  function cmp_gt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'2 (_1 : usize) (_2 : usize) : ()

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span6] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span7] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  function eq_cmp'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 147 4 147 31] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom eq_cmp'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span8] (x = y)
  = (cmp_log'0 x y = Ordering'0.C_Equal)

  function antisym2'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 142 4 142 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom antisym2'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span9] cmp_log'0 x y
  = Ordering'0.C_Greater)  -> ([%#span10] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 136 4 136 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom antisym1'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span11] cmp_log'0 x y
  = Ordering'0.C_Less)  -> ([%#span12] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 130 4 130 52] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span13] cmp_log'0 x y
  = o)  -> ([%#span14] cmp_log'0 y z = o)  -> ([%#span15] cmp_log'0 x z = o)

  function refl'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 123 4 123 20] (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'1_spec : forall x : TrailIndex'0.t_trailindex . [%#span16] cmp_log'0 x x = Ordering'0.C_Equal

  function gt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span17] cmp_log'0 self o = Ordering'0.C_Greater

  function cmp_gt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 118 4 118 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_gt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span18] gt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Greater)

  function ge_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span19] cmp_log'0 self o <> Ordering'0.C_Less

  function cmp_ge_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 113 4 113 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_ge_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span20] ge_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Less)

  function lt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span21] cmp_log'0 self o = Ordering'0.C_Less

  function cmp_lt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 108 4 108 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_lt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span22] lt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Less)

  function le_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span23] cmp_log'0 self o <> Ordering'0.C_Greater

  function cmp_le_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 103 4 103 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_le_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span24] le_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Greater)

  predicate inv'7 (_x : TrailIndex'0.t_trailindex)

  function eq_cmp'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom eq_cmp'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span25] inv'7 x)
   -> ([%#span26] inv'7 y)  -> ([%#span27] (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal))

  function antisym2'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym2'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span28] cmp_log'0 x y
  = Ordering'0.C_Greater)
   -> ([%#span29] inv'7 x)  -> ([%#span30] inv'7 y)  -> ([%#span31] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym1'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span32] cmp_log'0 x y
  = Ordering'0.C_Less)
   -> ([%#span33] inv'7 x)  -> ([%#span34] inv'7 y)  -> ([%#span35] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span36] cmp_log'0 x y
  = o)
   -> ([%#span37] cmp_log'0 y z = o)
   -> ([%#span38] inv'7 x)  -> ([%#span39] inv'7 y)  -> ([%#span40] inv'7 z)  -> ([%#span41] cmp_log'0 x z = o)

  function refl'0 (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'0_spec : forall x : TrailIndex'0.t_trailindex . ([%#span42] inv'7 x)
   -> ([%#span43] cmp_log'0 x x = Ordering'0.C_Equal)

  function cmp_gt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_gt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span44] inv'7 x)
   -> ([%#span45] inv'7 y)  -> ([%#span46] gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater))

  function cmp_ge_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_ge_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span47] inv'7 x)
   -> ([%#span48] inv'7 y)  -> ([%#span49] ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less))

  function cmp_lt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_lt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span50] inv'7 x)
   -> ([%#span51] inv'7 y)  -> ([%#span52] lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less))

  function cmp_le_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_le_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span53] inv'7 x)
   -> ([%#span54] inv'7 y)  -> ([%#span55] le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater))

  predicate invariant'10 (self : TrailIndex'0.t_trailindex) =
    [%#span56] true

  axiom inv'7 : forall x : TrailIndex'0.t_trailindex . inv'7 x = true

  use Cdsat_Trail_Assignment_Type as Assignment'0

  use seq.Seq

  predicate invariant'9 (self : Seq.seq (Assignment'0.t_assignment)) =
    [%#span56] true

  predicate inv'6 (_x : Seq.seq (Assignment'0.t_assignment))

  axiom inv'6 : forall x : Seq.seq (Assignment'0.t_assignment) . inv'6 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  constant max'0 : usize = [%#span57] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'5 (_x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

  function shallow_model'6 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) : Seq.seq (Assignment'0.t_assignment)


  axiom shallow_model'6_spec : forall self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . ([%#span58] inv'5 self)
   -> ([%#span60] inv'6 (shallow_model'6 self))
  && ([%#span59] Seq.length (shallow_model'6 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'8 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span61] inv'6 (shallow_model'6 self)

  axiom inv'5 : forall x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . inv'5 x = true

  predicate invariant'7 (self : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span56] true

  predicate inv'4 (_x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'4 : forall x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'4 x = true

  use seq.Seq

  predicate inv'3 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  function shallow_model'5 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))


  axiom shallow_model'5_spec : forall self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . ([%#span58] inv'3 self)
   -> ([%#span60] inv'4 (shallow_model'5 self))
  && ([%#span59] Seq.length (shallow_model'5 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'6 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span61] inv'4 (shallow_model'5 self)

  axiom inv'3 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'3 x
  = true

  predicate invariant'5 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span56] true

  predicate inv'2 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'2 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'2 x = true

  use seq.Seq

  predicate inv'1 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function shallow_model'1 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom shallow_model'1_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span58] inv'1 self)
   -> ([%#span60] inv'2 (shallow_model'1 self))
  && ([%#span59] Seq.length (shallow_model'1 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'3 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span61] inv'2 (shallow_model'1 self)

  axiom inv'1 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'1 x = true

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'1

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'1.t_value) : Sort'0.t_sort =
    [%#span62] match self with
      | Value'1.C_Bool _ -> Sort'0.C_Boolean
      | Value'1.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span63] forall v : Value'1.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'2 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  predicate is_bool'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'1.t_value) =
    [%#span64] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'1.t_value) : Value'1.t_value =
    [%#span67] match self with
      | Value'1.C_Bool b -> Value'1.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'1.t_value . ([%#span65] is_bool'1 self)
   -> ([%#span66] is_bool'1 (negate'0 self))

  use Cdsat_Theory_Term_Type as Term'1

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'1.t_term) : Sort'0.t_sort =
    [%#span68] match self with
      | Term'1.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'1.C_Value v -> sort'1 v
      | Term'1.C_Plus _ _ -> Sort'0.C_Rational
      | Term'1.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'1.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'1.C_Neg _ -> Sort'0.C_Boolean
      | Term'1.C_Disj _ _ -> Sort'0.C_Boolean
      end

  use prelude.prelude.Int

  use Cdsat_Theory_Trail_Type as Trail'1

  use Cdsat_Theory_Assign_Type as Assign'0

  predicate invariant'4 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span69] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'1.t_trail) =
    [%#span70] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'4 a
      end

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'1.t_trail) : int

  axiom len'0_spec : forall self : Trail'1.t_trail . [%#span71] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'1.t_trail) : int =
    [%#span74] match self with
      | Trail'1.C_Empty -> 0
      | Trail'1.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'1.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'1.t_trail . ([%#span73] level'0 self <= len'0 self)
  && ([%#span72] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'1.t_trail) =
    [%#span75] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'1.t_term, Value'1.t_value)

   =
    [%#span76] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span80] match self with
      | Trail'1.C_Empty -> Option'0.C_None
      | Trail'1.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'1.t_trail, d : (Term'1.t_term, Value'1.t_value) . ([%#span79] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span78] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span77] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  predicate contains'3 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value))

   =
    [%#span82] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'3_spec : forall self : Trail'1.t_trail, d : (Term'1.t_term, Value'1.t_value) . [%#span81] invariant_assign'0 self
   -> contains'3 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  predicate acceptable'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 397 4 397 56] (self : Trail'1.t_trail) (t : Term'1.t_term) (val' : Value'1.t_value)

   =
    [%#span83] not contains'3 self (t, val')
    /\ sort'0 t = sort'1 val' /\ (is_bool'1 val'  -> not contains'3 self (t, negate'0 val'))

  use prelude.prelude.Real

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  use Cdsat_Term_Value_Type as Value'0

  use Cdsat_Term_Sort_Type as Sort'1

  function deep_model'2 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span84] match self with
      | Value'0.C_Bool b -> Value'1.C_Bool b
      | Value'0.C_Rat br -> Value'1.C_Rat (deep_model'2 br)
      end

  function deep_model'4 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'1.t_sort) : Sort'0.t_sort =
    [%#span85] match self with
      | Sort'1.C_Boolean -> Sort'0.C_Boolean
      | Sort'1.C_Rational -> Sort'0.C_Rational
      end

  function deep_model'3 (self : usize) : int =
    [%#span86] UIntSize.to_int self

  use Cdsat_Term_Term_Type as Term'0

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 193 4 193 44] (self : Term'0.t_term) : Term'1.t_term =
    [%#span87] match self with
      | Term'0.C_Variable v s -> Term'1.C_Variable (Var'0.C_Var (deep_model'3 v) (deep_model'4 s))
      | Term'0.C_Value v -> Term'1.C_Value (deep_model'0 v)
      | Term'0.C_Plus l r -> Term'1.C_Plus (deep_model'1 l) (deep_model'1 r)
      | Term'0.C_Eq l r -> Term'1.C_Eq (deep_model'1 l) (deep_model'1 r)
      | Term'0.C_Conj l r -> Term'1.C_Conj (deep_model'1 l) (deep_model'1 r)
      | Term'0.C_Disj l r -> Term'1.C_Disj (deep_model'1 l) (deep_model'1 r)
      | Term'0.C_Neg t -> Term'1.C_Neg (deep_model'1 t)
      | Term'0.C_Impl l r -> Term'1.C_Disj (Term'1.C_Neg (deep_model'1 l)) (deep_model'1 r)
      | Term'0.C_Times l r -> Term'1.C_Plus (Term'1.C_Value (Value'1.C_Rat (deep_model'2 l))) (deep_model'1 r)
      | Term'0.C_Lt l r -> Term'1.C_Eq (deep_model'1 l) (deep_model'1 r)
      end

  function shallow_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 179 4 179 50] (self : Term'0.t_term) : Term'1.t_term
   =
    [%#span88] deep_model'1 self

  use prelude.prelude.Snapshot

  use Cdsat_Trail_Trail_Type as Cdsat_Trail_Trail_Type

  function from_int'0 (_1 : int) : Real.real

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'1.t_term) : Value'1.t_value

   =
    [%#span91] match t with
      | Term'1.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'1.C_Value v -> v
      | Term'1.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'1.C_Rat r1, Value'1.C_Rat r2) -> Value'1.C_Rat r1
        | _ -> Value'1.C_Rat (from_int'0 (- 1))
        end
      | Term'1.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'1.C_Bool b1, Value'1.C_Bool b2) -> Value'1.C_Bool (b1 /\ b2)
        | _ -> Value'1.C_Bool false
        end
      | Term'1.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'1.C_Bool b1, Value'1.C_Bool b2) -> Value'1.C_Bool (b1 \/ b2)
        | _ -> Value'1.C_Bool false
        end
      | Term'1.C_Eq l r -> Value'1.C_Bool (interp'0 self l = interp'0 self r)
      | Term'1.C_Neg t -> match interp'0 self t with
        | Value'1.C_Bool b -> Value'1.C_Bool (not b)
        | _ -> Value'1.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'1.t_term . ([%#span89] inv'0 self)
   -> ([%#span90] invariant'2 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'1.t_term, Value'1.t_value))

   =
    [%#span92] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  use set.Fset

  use set.Fset

  predicate contains'2 [@inline:trivial] (self : Fset.fset (Term'1.t_term, Value'1.t_value)) (e : (Term'1.t_term, Value'1.t_value))

   =
    [%#span93] Fset.mem e self

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'1.t_term, Value'1.t_value))

   =
    [%#span94] forall a : (Term'1.t_term, Value'1.t_value) . contains'2 v a  -> satisfies'0 self a

  use set.Fset

  use set.Fset

  function insert'0 [@inline:trivial] (self : Fset.fset (Term'1.t_term, Value'1.t_value)) (e : (Term'1.t_term, Value'1.t_value)) : Fset.fset (Term'1.t_term, Value'1.t_value)

   =
    [%#span95] Fset.add e self

  use seq.Seq

  use prelude.seq_ext.SeqExt

  use seq.Seq

  use seq.Seq

  predicate contains'0 (self : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) =
    [%#span96] exists i : int . 0 <= i /\ i < Seq.length self /\ Seq.get self i = e

  function remove'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 814 0 814 39] (s : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom remove'0_spec : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . ([%#span97] inv'2 s)
   -> ([%#span98] inv'7 e)
   -> ([%#span104] inv'2 (remove'0 s e))
  && ([%#span103] Seq.length (remove'0 s e) <= Seq.length s)
  && ([%#span102] contains'0 s e  -> Seq.length (remove'0 s e) < Seq.length s)
  && ([%#span101] forall t : TrailIndex'0.t_trailindex . inv'7 t  -> contains'0 (remove'0 s e) t  -> t <> e)
  && ([%#span100] forall t : TrailIndex'0.t_trailindex . inv'7 t  -> contains'0 (remove'0 s e) t  -> contains'0 s t)
  && ([%#span99] forall t : TrailIndex'0.t_trailindex . inv'7 t
   -> contains'0 s t  -> e <> t  -> contains'0 (remove'0 s e) t)

  use Cdsat_Trail_Trail_Type as Trail'0

  use prelude.prelude.Borrow

  function shallow_model'2 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span106] deep_model'0 self

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  function term_value'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 725 4 725 61] (self : Assignment'0.t_assignment) : (Term'1.t_term, Value'1.t_value)

   =
    [%#span107] (shallow_model'3 (Cdsat_Trail_Assignment_Type.assignment_term self), shallow_model'2 (Cdsat_Trail_Assignment_Type.assignment_val self))

  use seq.Seq

  use seq.Seq

  function index_logic'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 645 4 645 77] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : (Term'1.t_term, Value'1.t_value)

   =
    [%#span108] term_value'0 (Seq.get (shallow_model'6 (Seq.get (shallow_model'5 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)))) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)))

  use set.Fset

  predicate contains'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 289 4 289 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex)

   =
    [%#span109] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)
    < Seq.length (shallow_model'5 (Cdsat_Trail_Trail_Type.trail_assignments self))
    /\ UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)
    < Seq.length (shallow_model'6 (Seq.get (shallow_model'5 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))))

  function abstract_justification'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 318 4 321 44] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) : Fset.fset (Term'1.t_term, Value'1.t_value)


  axiom abstract_justification'0_spec : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span110] forall i : int . 0
  <= i
  /\ i < Seq.length just  -> contains'1 self (Seq.get just i))
   -> ([%#span114] forall i : int . 0 <= i /\ i < Seq.length just
   -> contains'2 (abstract_justification'0 self just) (index_logic'1 self (Seq.get just i)))
  && ([%#span113] forall a : (Term'1.t_term, Value'1.t_value) . contains'2 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'0 just ix /\ a = index_logic'1 self ix))
  && ([%#span112] forall a : (Term'1.t_term, Value'1.t_value) . contains'2 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'1 self ix /\ a = index_logic'1 self ix))
  && ([%#span111] Fset.cardinal (abstract_justification'0 self just) <= Seq.length just)

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 59 4 59 32] (self : Term'1.t_term) =
    [%#span116] sort'0 self = Sort'0.C_Boolean

  function well_sorted'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 30 4 30 36] (self : Term'1.t_term) : bool =
    [%#span117] match self with
      | Term'1.C_Variable v -> true
      | Term'1.C_Value v -> true
      | Term'1.C_Plus l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Rational
      | Term'1.C_Eq l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r
      | Term'1.C_Conj l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Boolean
      | Term'1.C_Disj l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Boolean
      | Term'1.C_Neg t -> well_sorted'0 t /\ sort'0 t = Sort'0.C_Boolean
      end

  function shallow_model'0 (self : Term'0.t_term) : Term'1.t_term =
    [%#span118] shallow_model'3 self

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span119] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'0 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'1.t_trail)
   =
    [%#span120] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a _ tl -> sound'0 tl /\ justified_sound'0 a
      end

  function find_justified'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 619 4 619 46] (self : Trail'1.t_trail) (kv : (Term'1.t_term, Value'1.t_value)) : ()


  axiom find_justified'0_spec : forall self : Trail'1.t_trail, kv : (Term'1.t_term, Value'1.t_value) . ([%#span121] sound'0 self)
   -> ([%#span122] contains'3 self kv)
   -> ([%#span123] forall l : int . forall a : Assign'0.t_assign . find'0 self kv = Option'0.C_Some (a, l)
   -> justified_sound'0 a)

  predicate is_decision'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 511 4 511 54] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value))

   =
    [%#span124] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Decision _ _, _) -> true
      | _ -> false
      end

  predicate is_input'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 521 4 521 51] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value))

   =
    [%#span125] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Input _ _, _) -> true
      | _ -> false
      end

  predicate entails'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 205 4 205 74] (self : Model'0.t_model) (j : Fset.fset (Term'1.t_term, Value'1.t_value)) (c : (Term'1.t_term, Value'1.t_value))

   =
    [%#span126] invariant'2 self  -> satisfy_set'0 self j  -> satisfies'0 self c

  predicate is_justified'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 501 4 501 55] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value))

   =
    [%#span127] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified _ _ _, _) -> true
      | _ -> false
      end

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'1.t_trail) =
    [%#span128] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> let ap = to_pair'0 a in not contains'3 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'1 (let (_, a) = ap in a) then
        not contains'3 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'1.t_trail) =
    [%#span129] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'1.t_term, Value'1.t_value) . contains'2 j a  -> contains'3 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'1 [@inline:trivial] (self : Fset.fset (Term'1.t_term, Value'1.t_value)) (a : (Term'1.t_term, Value'1.t_value)) : Fset.fset (Term'1.t_term, Value'1.t_value)

   =
    [%#span130] Fset.remove a self

  use set.Fset

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value)) : int

   =
    [%#span133] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'1.t_trail, d : (Term'1.t_term, Value'1.t_value) . ([%#span131] invariant_nonneg'0 self)
   -> ([%#span132] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'1.t_trail) (s : Fset.fset (Term'1.t_term, Value'1.t_value)) : int


  axiom set_level'0_spec : forall self : Trail'1.t_trail, s : Fset.fset (Term'1.t_term, Value'1.t_value) . ([%#span134] invariant_nonneg'0 self)
   -> ([%#span139] set_level'0 self s <= level'0 self)
  && ([%#span138] set_level'0 self s >= 0)
  && ([%#span137] s = (Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value))  -> set_level'0 self s = 0)
  && ([%#span136] s <> (Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value))
   -> (exists i : (Term'1.t_term, Value'1.t_value) . contains'2 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span135] forall i : (Term'1.t_term, Value'1.t_value) . contains'2 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'1.t_trail) =
    [%#span141] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'1.t_trail) =
    [%#span142] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function justification'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 490 4 490 71] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value)) : Fset.fset (Term'1.t_term, Value'1.t_value)


  axiom justification'0_spec : forall self : Trail'1.t_trail, d : (Term'1.t_term, Value'1.t_value) . ([%#span143] invariant'1 self)
   -> ([%#span144] is_justified'0 self d)
   -> ([%#span145] sound'0 self)
   -> ([%#span148] is_decision'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value)))
  && ([%#span147] is_input'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value)))
  && ([%#span146] forall m : Model'0.t_model . inv'0 m  -> entails'0 m (justification'0 self d) d)

  predicate justified_correct'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 267 4 267 78] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) (j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

   =
    [%#span149] (forall i : TrailIndex'0.t_trailindex . contains'0 (shallow_model'1 j) i
     -> lt_log'0 i ix /\ contains'1 self i)
    /\ is_justified'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'1 self ix)
    /\ justification'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'1 self ix)
    = abstract_justification'0 self (shallow_model'1 j)

  use Cdsat_Trail_Reason_Type as Reason'0

  function index_logic'3 [@inline:trivial] (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (ix : usize) : Assignment'0.t_assignment

   =
    [%#span150] Seq.get (shallow_model'6 self) (UIntSize.to_int ix)

  function index_logic'2 [@inline:trivial] (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (ix : usize) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span150] Seq.get (shallow_model'5 self) (UIntSize.to_int ix)

  function reason'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 549 4 549 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : Reason'0.t_reason

   =
    [%#span151] Cdsat_Trail_Assignment_Type.assignment_reason (index_logic'3 (index_logic'2 (Cdsat_Trail_Trail_Type.trail_assignments self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)) (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix))

  predicate justified_is_justified'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 253 4 253 47] (self : Trail'0.t_trail) =
    [%#span152] forall ix : TrailIndex'0.t_trailindex . contains'1 self ix
     -> (let reason = reason'0 self ix in (reason = Reason'0.C_Decision)
    = is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'1 self ix)
    /\ (reason = Reason'0.C_Input)
    = is_input'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'1 self ix)
    /\ (forall j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . reason = Reason'0.C_Justified j
     -> justified_correct'0 self ix j))

  function index_logic'0 [@inline:trivial] (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (ix : int) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span153] Seq.get (shallow_model'5 self) ix

  function level_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 180 4 180 33] (self : TrailIndex'0.t_trailindex) : int
   =
    [%#span154] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 self)

  predicate abstract_relation'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 277 4 277 42] (self : Trail'0.t_trail) =
    [%#span155] (forall ix : TrailIndex'0.t_trailindex . contains'1 self ix
     -> contains'3 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'1 self ix))
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'1 self ix
     -> level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'1 self ix)
    = UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))
    /\ (forall a : (Term'1.t_term, Value'1.t_value) . contains'3 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
     -> (exists ix : TrailIndex'0.t_trailindex . contains'1 self ix
    /\ level_log'0 ix = level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
    /\ index_logic'1 self ix = a))

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 237 4 237 34] (self : Trail'0.t_trail) =
    [%#span156] abstract_relation'0 self
    /\ sound'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    /\ invariant'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    /\ level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    = UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self)
    /\ UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self)
    = Seq.length (shallow_model'5 (Cdsat_Trail_Trail_Type.trail_assignments self)) - 1
    /\ (forall i : int . 0 <= i /\ i < Seq.length (shallow_model'5 (Cdsat_Trail_Trail_Type.trail_assignments self))
     -> Seq.length (shallow_model'6 (index_logic'0 (Cdsat_Trail_Trail_Type.trail_assignments self) i)) > 0)
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'1 self ix
     -> (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix) = 0)
    = is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'1 self ix))
    /\ (forall j : TrailIndex'0.t_trailindex . forall i : TrailIndex'0.t_trailindex . contains'1 self i
     -> contains'1 self j  -> i <> j  -> index_logic'1 self i <> index_logic'1 self j)
    /\ justified_is_justified'0 self
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'1 self ix
     -> well_sorted'0 (let (a, _) = index_logic'1 self ix in a))

  use prelude.prelude.Intrinsic

  use Cdsat_Bool_BoolTheory_Type as BoolTheory'0

  predicate resolve'1 (self : borrowed (BoolTheory'0.t_booltheory)) =
    [%#span157] self.final = self.current

  predicate resolve'0 (self : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) =
    [%#span157] self.final = self.current

  use Core_Result_Result_Type as Result'0

  function shallow_model'4 (self : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) : Seq.seq (TrailIndex'0.t_trailindex)

   =
    [%#span158] shallow_model'1 self.current

  let rec eval_inner'0 (self:borrowed (BoolTheory'0.t_booltheory)) (tl:Trail'0.t_trail) (tm:Term'0.t_term) (used:borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) (return'  (ret:Result'0.t_result (Value'0.t_value) (Term'0.t_term)))= {[@expl:precondition] [%#span162] forall ix : TrailIndex'0.t_trailindex . contains'0 (shallow_model'4 used) ix
     -> contains'1 tl ix}
    {[@expl:precondition] [%#span161] is_bool'0 (shallow_model'0 tm)}
    {[@expl:precondition] [%#span160] well_sorted'0 (shallow_model'0 tm)}
    {[@expl:precondition] [%#span159] invariant'0 tl}
    any
    [ return' (result:Result'0.t_result (Value'0.t_value) (Term'0.t_term))-> {[%#span165] forall ix : TrailIndex'0.t_trailindex . contains'0 (shallow_model'1 used.final) ix
       -> contains'1 tl ix}
      {[%#span164] forall ix : TrailIndex'0.t_trailindex . contains'0 (shallow_model'4 used) ix
       -> contains'0 (shallow_model'1 used.final) ix}
      {[%#span163] match result with
        | Result'0.C_Ok v -> is_bool'1 (shallow_model'2 v)
        /\ (forall m : Model'0.t_model . inv'0 m
         -> satisfy_set'0 m (abstract_justification'0 tl (shallow_model'1 used.final))
         -> satisfies'0 m (shallow_model'0 tm, shallow_model'2 v))
        | Result'0.C_Err t -> acceptable'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost tl)) (shallow_model'3 t) (shallow_model'2 (Value'0.C_Bool true))
        /\ well_sorted'0 (shallow_model'3 t)
        end}
      (! return' {result}) ]


  let rec new'0 (_1:()) (return'  (ret:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)))= any
    [ return' (result:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> {[%#span167] inv'1 result}
      {[%#span166] Seq.length (shallow_model'1 result) = 0}
      (! return' {result}) ]


  let rec eval (self:borrowed (BoolTheory'0.t_booltheory)) (tl:Trail'0.t_trail) (tm:Term'0.t_term) (return'  (ret:(Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global), Result'0.t_result (Value'0.t_value) (Term'0.t_term))))= {[%#sbool3] is_bool'0 (shallow_model'0 tm)}
    {[%#sbool2] well_sorted'0 (shallow_model'0 tm)}
    {[%#sbool1] invariant'0 tl}
    (! bb0
    [ bb0 = s0
      [ s0 = new'0 {[%#sbool0] ()}
          (fun (_ret':Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->  [ &v <- _ret' ] s1)
      | s1 = bb1 ]

    | bb1 = s0
      [ s0 = Borrow.borrow_final <BoolTheory'0.t_booltheory> {self.current} {Borrow.get_id self}
          (fun (_ret':borrowed (BoolTheory'0.t_booltheory)) ->
             [ &_11 <- _ret' ]
             [ &self <- { self with current = _11.final ; } ]
            s1)
      | s1 = Borrow.borrow_mut <Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)> {v}
          (fun (_ret':borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) ->
             [ &_15 <- _ret' ]
             [ &v <- _15.final ]
            s2)
      | s2 = Borrow.borrow_final
          <Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)>
          {_15.current}
          {Borrow.get_id _15}
          (fun (_ret':borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) ->
             [ &_14 <- _ret' ]
             [ &_15 <- { _15 with current = _14.final ; } ]
            s3)
      | s3 = eval_inner'0 {_11} {tl} {tm} {_14}
          (fun (_ret':Result'0.t_result (Value'0.t_value) (Term'0.t_term)) ->  [ &res <- _ret' ] s4)
      | s4 = bb2 ]

    | bb2 = s0
      [ s0 = -{resolve'0 _15}- s1
      | s1 = -{resolve'1 self}- s2
      | s2 =  [ &_0 <- (v, res) ]
        (any
        [ any_ (_any:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> (!  [ &v <- _any ]
          (any [ any_ (_any:Result'0.t_result (Value'0.t_value) (Term'0.t_term))-> (!  [ &res <- _any ] s3) ] )) ]
        )
      | s3 = bb3 ]

    | bb3 = bb4
    | bb4 = bb5
    | bb5 = bb6
    | bb6 = return' {_0} ]
    )
    [ & _0 : (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global), Result'0.t_result (Value'0.t_value) (Term'0.t_term)) = any_l ()
    | & self : borrowed (BoolTheory'0.t_booltheory) = self
    | & tl : Trail'0.t_trail = tl
    | & tm : Term'0.t_term = tm
    | & v : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) = any_l ()
    | & res : Result'0.t_result (Value'0.t_value) (Term'0.t_term) = any_l ()
    | & _11 : borrowed (BoolTheory'0.t_booltheory) = any_l ()
    | & _14 : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) = any_l ()
    | & _15 : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) = any_l () ]

    [ return' (result:(Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global), Result'0.t_result (Value'0.t_value) (Term'0.t_term)))-> {[@expl:postcondition] [%#sbool5] match let (_, a) = result in a with
        | Result'0.C_Ok v -> is_bool'1 (shallow_model'2 v)
        /\ (forall m : Model'0.t_model . inv'0 m
         -> satisfy_set'0 m (abstract_justification'0 tl (shallow_model'1 (let (a, _) = result in a)))
         -> satisfies'0 m (shallow_model'0 tm, shallow_model'2 v))
        | Result'0.C_Err t -> acceptable'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost tl)) (shallow_model'3 t) (shallow_model'2 (Value'0.C_Bool true))
        /\ well_sorted'0 (shallow_model'3 t)
        end}
      {[@expl:postcondition] [%#sbool4] forall ix : TrailIndex'0.t_trailindex . contains'0 (shallow_model'1 (let (a, _) = result in a)) ix
       -> contains'1 tl ix}
      (! return' {result}) ]

end
module Cdsat_Trail_Impl9_AbsJustCons_Impl
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 373 15 373 34

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 374 4 374 82

  let%span strail2 = "/Users/xavier/Code/cdsat/src/trail.rs" 375 14 375 144

  let%span strail3 = "/Users/xavier/Code/cdsat/src/trail.rs" 372 14 372 24

  let%span span4 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span5 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span6 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span7 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span8 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span9 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span10 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span11 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span12 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span13 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span14 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span15 = "/Users/xavier/Code/cdsat/src/term.rs" 195 8 225 9

  let%span span16 = "/Users/xavier/Code/cdsat/src/term.rs" 180 8 180 25

  let%span span17 = "/Users/xavier/Code/cdsat/src/trail.rs" 726 8 726 61

  let%span span18 = "/Users/xavier/Code/cdsat/src/trail.rs" 646 8 648 9

  let%span span19 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 129 8 129 78

  let%span span20 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 13 814 14

  let%span span21 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 24 814 25

  let%span span22 = "/Users/xavier/Code/cdsat/src/trail.rs" 809 0 809 73

  let%span span23 = "/Users/xavier/Code/cdsat/src/trail.rs" 810 0 810 63

  let%span span24 = "/Users/xavier/Code/cdsat/src/trail.rs" 811 0 811 55

  let%span span25 = "/Users/xavier/Code/cdsat/src/trail.rs" 812 0 812 52

  let%span span26 = "/Users/xavier/Code/cdsat/src/trail.rs" 813 10 813 33

  let%span span27 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 33 814 39

  let%span span28 = "/Users/xavier/Code/cdsat/src/trail.rs" 808 10 808 17

  let%span span29 = "/Users/xavier/Code/cdsat/src/trail.rs" 807 0 807 8

  let%span span30 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span31 = "/Users/xavier/Code/cdsat/src/trail.rs" 291 12 291 92

  let%span span32 = "/Users/xavier/Code/cdsat/src/trail.rs" 313 4 313 82

  let%span span33 = "/Users/xavier/Code/cdsat/src/trail.rs" 314 14 314 40

  let%span span34 = "/Users/xavier/Code/cdsat/src/trail.rs" 315 4 315 115

  let%span span35 = "/Users/xavier/Code/cdsat/src/trail.rs" 316 4 316 115

  let%span span36 = "/Users/xavier/Code/cdsat/src/trail.rs" 317 4 317 101

  let%span span37 = "/Users/xavier/Code/cdsat/src/trail.rs" 312 14 312 24

  let%span span38 = "/Users/xavier/Code/cdsat/src/trail.rs" 310 4 310 12

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  predicate invariant'5 (self : TrailIndex'0.t_trailindex) =
    [%#span4] true

  predicate inv'5 (_x : TrailIndex'0.t_trailindex)

  axiom inv'5 : forall x : TrailIndex'0.t_trailindex . inv'5 x = true

  use seq.Seq

  predicate invariant'4 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span4] true

  predicate inv'4 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'4 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'4 x = true

  use Cdsat_Trail_Assignment_Type as Assignment'0

  predicate invariant'3 (self : Seq.seq (Assignment'0.t_assignment)) =
    [%#span4] true

  predicate inv'3 (_x : Seq.seq (Assignment'0.t_assignment))

  axiom inv'3 : forall x : Seq.seq (Assignment'0.t_assignment) . inv'3 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  constant max'0 : usize = [%#span5] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'2 (_x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

  function shallow_model'1 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) : Seq.seq (Assignment'0.t_assignment)


  axiom shallow_model'1_spec : forall self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . ([%#span6] inv'2 self)
   -> ([%#span8] inv'3 (shallow_model'1 self))
  && ([%#span7] Seq.length (shallow_model'1 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'2 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span9] inv'3 (shallow_model'1 self)

  axiom inv'2 : forall x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . inv'2 x = true

  predicate invariant'1 (self : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span4] true

  predicate inv'1 (_x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'1 : forall x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'1 x = true

  use seq.Seq

  predicate inv'0 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  function shallow_model'0 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))


  axiom shallow_model'0_spec : forall self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . ([%#span6] inv'0 self)
   -> ([%#span8] inv'1 (shallow_model'0 self))
  && ([%#span7] Seq.length (shallow_model'0 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'0 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span9] inv'1 (shallow_model'0 self)

  axiom inv'0 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'0 x
  = true

  use Cdsat_Trail_Trail_Type as Trail'0

  use set.Fset

  use Cdsat_Theory_Value_Type as Value'0

  use Cdsat_Theory_Term_Type as Term'0

  use set.Fset

  function insert'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span10] Fset.add e self

  use prelude.prelude.Borrow

  use Cdsat_Term_Value_Type as Value'1

  use Cdsat_Term_Term_Type as Term'1

  use prelude.prelude.Real

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  function deep_model'4 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span11] match self with
      | Value'1.C_Bool b -> Value'0.C_Bool b
      | Value'1.C_Rat br -> Value'0.C_Rat (deep_model'4 br)
      end

  function shallow_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span12] deep_model'1 self

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  use Cdsat_Theory_Sort_Type as Sort'1

  use Cdsat_Term_Sort_Type as Sort'0

  use Cdsat_Theory_Var_Type as Var'0

  function deep_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'0.t_sort) : Sort'1.t_sort =
    [%#span13] match self with
      | Sort'0.C_Boolean -> Sort'1.C_Boolean
      | Sort'0.C_Rational -> Sort'1.C_Rational
      end

  function deep_model'2 (self : usize) : int =
    [%#span14] UIntSize.to_int self

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 193 4 193 44] (self : Term'1.t_term) : Term'0.t_term =
    [%#span15] match self with
      | Term'1.C_Variable v s -> Term'0.C_Variable (Var'0.C_Var (deep_model'2 v) (deep_model'3 s))
      | Term'1.C_Value v -> Term'0.C_Value (deep_model'1 v)
      | Term'1.C_Plus l r -> Term'0.C_Plus (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Eq l r -> Term'0.C_Eq (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Conj l r -> Term'0.C_Conj (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Disj l r -> Term'0.C_Disj (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Neg t -> Term'0.C_Neg (deep_model'0 t)
      | Term'1.C_Impl l r -> Term'0.C_Disj (Term'0.C_Neg (deep_model'0 l)) (deep_model'0 r)
      | Term'1.C_Times l r -> Term'0.C_Plus (Term'0.C_Value (Value'0.C_Rat (deep_model'4 l))) (deep_model'0 r)
      | Term'1.C_Lt l r -> Term'0.C_Eq (deep_model'0 l) (deep_model'0 r)
      end

  function shallow_model'2 [#"/Users/xavier/Code/cdsat/src/term.rs" 179 4 179 50] (self : Term'1.t_term) : Term'0.t_term
   =
    [%#span16] deep_model'0 self

  function term_value'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 725 4 725 61] (self : Assignment'0.t_assignment) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span17] (shallow_model'2 (Cdsat_Trail_Assignment_Type.assignment_term self), shallow_model'3 (Cdsat_Trail_Assignment_Type.assignment_val self))

  use seq.Seq

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  use seq.Seq

  use Cdsat_Trail_Trail_Type as Cdsat_Trail_Trail_Type

  function index_logic'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 645 4 645 77] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span18] term_value'0 (Seq.get (shallow_model'1 (Seq.get (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)))) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)))

  use set.Fset

  use seq.Seq

  use prelude.seq_ext.SeqExt

  use seq.Seq

  use seq.Seq

  use seq.Seq

  predicate contains'2 (self : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) =
    [%#span19] exists i : int . 0 <= i /\ i < Seq.length self /\ Seq.get self i = e

  function remove'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 814 0 814 39] (s : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom remove'0_def : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . remove'0 s e
  = ([%#span29] if s = (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) then
    Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)
  else
    if Seq.get s (Seq.length s - 1) = e then
      remove'0 (SeqExt.subsequence s 0 (Seq.length s - 1)) e
    else
      Seq.snoc (remove'0 (SeqExt.subsequence s 0 (Seq.length s - 1)) e) (Seq.get s (Seq.length s - 1))

  )

  axiom remove'0_spec : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . ([%#span20] inv'4 s)
   -> ([%#span21] inv'5 e)
   -> ([%#span27] inv'4 (remove'0 s e))
  && ([%#span26] Seq.length (remove'0 s e) <= Seq.length s)
  && ([%#span25] contains'2 s e  -> Seq.length (remove'0 s e) < Seq.length s)
  && ([%#span24] forall t : TrailIndex'0.t_trailindex . inv'5 t  -> contains'2 (remove'0 s e) t  -> t <> e)
  && ([%#span23] forall t : TrailIndex'0.t_trailindex . inv'5 t  -> contains'2 (remove'0 s e) t  -> contains'2 s t)
  && ([%#span22] forall t : TrailIndex'0.t_trailindex . inv'5 t
   -> contains'2 s t  -> e <> t  -> contains'2 (remove'0 s e) t)

  use set.Fset

  predicate contains'1 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span30] Fset.mem e self

  use set.Fset

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 289 4 289 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex)

   =
    [%#span31] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)
    < Seq.length (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self))
    /\ UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)
    < Seq.length (shallow_model'1 (Seq.get (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))))

  function abstract_justification'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 318 4 321 44] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) : Fset.fset (Term'0.t_term, Value'0.t_value)


  axiom abstract_justification'0_def : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . abstract_justification'0 self just
  = ([%#span38] if Seq.length just > 0 then
    let set = abstract_justification'0 self (remove'0 just (Seq.get just 0)) in let a = index_logic'0 self (Seq.get just 0) in insert'0 set a
  else
    Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)
  )

  axiom abstract_justification'0_spec : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span32] forall i : int . 0
  <= i
  /\ i < Seq.length just  -> contains'0 self (Seq.get just i))
   -> ([%#span36] forall i : int . 0 <= i /\ i < Seq.length just
   -> contains'1 (abstract_justification'0 self just) (index_logic'0 self (Seq.get just i)))
  && ([%#span35] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'2 just ix /\ a = index_logic'0 self ix))
  && ([%#span34] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'0 self ix /\ a = index_logic'0 self ix))
  && ([%#span33] Fset.cardinal (abstract_justification'0 self just) <= Seq.length just)

  use seq.Seq

  use seq.Seq

  constant self  : Trail'0.t_trail

  constant just  : Seq.seq (TrailIndex'0.t_trailindex)

  constant elem  : TrailIndex'0.t_trailindex

  function abs_just_cons [#"/Users/xavier/Code/cdsat/src/trail.rs" 376 4 376 67] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) (elem : TrailIndex'0.t_trailindex) : ()


  goal vc_abs_just_cons : ([%#strail1] forall i : int . 0 <= i /\ i < Seq.length just
   -> contains'0 self (Seq.get just i))
   -> ([%#strail0] contains'0 self elem)
   -> ([%#strail2] abstract_justification'0 self (Seq.(++) (Seq.singleton elem) just)
  = insert'0 (abstract_justification'0 self just) (index_logic'0 self elem))
end
module Cdsat_Trail_Impl9_AbsJustSnoc_Impl
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 382 15 382 34

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 383 4 383 82

  let%span strail2 = "/Users/xavier/Code/cdsat/src/trail.rs" 384 14 384 126

  let%span strail3 = "/Users/xavier/Code/cdsat/src/trail.rs" 381 14 381 24

  let%span strail4 = "/Users/xavier/Code/cdsat/src/trail.rs" 373 15 373 34

  let%span strail5 = "/Users/xavier/Code/cdsat/src/trail.rs" 374 4 374 82

  let%span strail6 = "/Users/xavier/Code/cdsat/src/trail.rs" 375 14 375 144

  let%span strail7 = "/Users/xavier/Code/cdsat/src/trail.rs" 372 14 372 24

  let%span span8 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span9 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span10 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span11 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span12 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span13 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span14 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span15 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span16 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span17 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span18 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span19 = "/Users/xavier/Code/cdsat/src/term.rs" 195 8 225 9

  let%span span20 = "/Users/xavier/Code/cdsat/src/term.rs" 180 8 180 25

  let%span span21 = "/Users/xavier/Code/cdsat/src/trail.rs" 726 8 726 61

  let%span span22 = "/Users/xavier/Code/cdsat/src/trail.rs" 646 8 648 9

  let%span span23 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 129 8 129 78

  let%span span24 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 13 814 14

  let%span span25 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 24 814 25

  let%span span26 = "/Users/xavier/Code/cdsat/src/trail.rs" 809 0 809 73

  let%span span27 = "/Users/xavier/Code/cdsat/src/trail.rs" 810 0 810 63

  let%span span28 = "/Users/xavier/Code/cdsat/src/trail.rs" 811 0 811 55

  let%span span29 = "/Users/xavier/Code/cdsat/src/trail.rs" 812 0 812 52

  let%span span30 = "/Users/xavier/Code/cdsat/src/trail.rs" 813 10 813 33

  let%span span31 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 33 814 39

  let%span span32 = "/Users/xavier/Code/cdsat/src/trail.rs" 808 10 808 17

  let%span span33 = "/Users/xavier/Code/cdsat/src/trail.rs" 807 0 807 8

  let%span span34 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span35 = "/Users/xavier/Code/cdsat/src/trail.rs" 291 12 291 92

  let%span span36 = "/Users/xavier/Code/cdsat/src/trail.rs" 313 4 313 82

  let%span span37 = "/Users/xavier/Code/cdsat/src/trail.rs" 314 14 314 40

  let%span span38 = "/Users/xavier/Code/cdsat/src/trail.rs" 315 4 315 115

  let%span span39 = "/Users/xavier/Code/cdsat/src/trail.rs" 316 4 316 115

  let%span span40 = "/Users/xavier/Code/cdsat/src/trail.rs" 317 4 317 101

  let%span span41 = "/Users/xavier/Code/cdsat/src/trail.rs" 312 14 312 24

  let%span span42 = "/Users/xavier/Code/cdsat/src/trail.rs" 310 4 310 12

  let%span span43 = "/Users/xavier/Code/cdsat/src/trail.rs" 377 8 377 10

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  predicate invariant'5 (self : TrailIndex'0.t_trailindex) =
    [%#span8] true

  predicate inv'5 (_x : TrailIndex'0.t_trailindex)

  axiom inv'5 : forall x : TrailIndex'0.t_trailindex . inv'5 x = true

  use seq.Seq

  predicate invariant'4 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span8] true

  predicate inv'4 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'4 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'4 x = true

  use Cdsat_Trail_Assignment_Type as Assignment'0

  predicate invariant'3 (self : Seq.seq (Assignment'0.t_assignment)) =
    [%#span8] true

  predicate inv'3 (_x : Seq.seq (Assignment'0.t_assignment))

  axiom inv'3 : forall x : Seq.seq (Assignment'0.t_assignment) . inv'3 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  constant max'0 : usize = [%#span9] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'2 (_x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

  function shallow_model'1 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) : Seq.seq (Assignment'0.t_assignment)


  axiom shallow_model'1_spec : forall self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . ([%#span10] inv'2 self)
   -> ([%#span12] inv'3 (shallow_model'1 self))
  && ([%#span11] Seq.length (shallow_model'1 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'2 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span13] inv'3 (shallow_model'1 self)

  axiom inv'2 : forall x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . inv'2 x = true

  predicate invariant'1 (self : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span8] true

  predicate inv'1 (_x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'1 : forall x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'1 x = true

  use seq.Seq

  predicate inv'0 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  function shallow_model'0 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))


  axiom shallow_model'0_spec : forall self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . ([%#span10] inv'0 self)
   -> ([%#span12] inv'1 (shallow_model'0 self))
  && ([%#span11] Seq.length (shallow_model'0 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'0 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span13] inv'1 (shallow_model'0 self)

  axiom inv'0 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'0 x
  = true

  use seq.Seq

  use seq.Seq

  use Cdsat_Theory_Value_Type as Value'0

  use Cdsat_Theory_Term_Type as Term'0

  use set.Fset

  use prelude.prelude.Borrow

  use Cdsat_Trail_Trail_Type as Trail'0

  use set.Fset

  function insert'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span14] Fset.add e self

  use Cdsat_Term_Value_Type as Value'1

  use Cdsat_Term_Term_Type as Term'1

  use prelude.prelude.Real

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  function deep_model'4 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span15] match self with
      | Value'1.C_Bool b -> Value'0.C_Bool b
      | Value'1.C_Rat br -> Value'0.C_Rat (deep_model'4 br)
      end

  function shallow_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span16] deep_model'1 self

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  use Cdsat_Theory_Sort_Type as Sort'1

  use Cdsat_Term_Sort_Type as Sort'0

  use Cdsat_Theory_Var_Type as Var'0

  function deep_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'0.t_sort) : Sort'1.t_sort =
    [%#span17] match self with
      | Sort'0.C_Boolean -> Sort'1.C_Boolean
      | Sort'0.C_Rational -> Sort'1.C_Rational
      end

  function deep_model'2 (self : usize) : int =
    [%#span18] UIntSize.to_int self

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 193 4 193 44] (self : Term'1.t_term) : Term'0.t_term =
    [%#span19] match self with
      | Term'1.C_Variable v s -> Term'0.C_Variable (Var'0.C_Var (deep_model'2 v) (deep_model'3 s))
      | Term'1.C_Value v -> Term'0.C_Value (deep_model'1 v)
      | Term'1.C_Plus l r -> Term'0.C_Plus (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Eq l r -> Term'0.C_Eq (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Conj l r -> Term'0.C_Conj (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Disj l r -> Term'0.C_Disj (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Neg t -> Term'0.C_Neg (deep_model'0 t)
      | Term'1.C_Impl l r -> Term'0.C_Disj (Term'0.C_Neg (deep_model'0 l)) (deep_model'0 r)
      | Term'1.C_Times l r -> Term'0.C_Plus (Term'0.C_Value (Value'0.C_Rat (deep_model'4 l))) (deep_model'0 r)
      | Term'1.C_Lt l r -> Term'0.C_Eq (deep_model'0 l) (deep_model'0 r)
      end

  function shallow_model'2 [#"/Users/xavier/Code/cdsat/src/term.rs" 179 4 179 50] (self : Term'1.t_term) : Term'0.t_term
   =
    [%#span20] deep_model'0 self

  function term_value'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 725 4 725 61] (self : Assignment'0.t_assignment) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span21] (shallow_model'2 (Cdsat_Trail_Assignment_Type.assignment_term self), shallow_model'3 (Cdsat_Trail_Assignment_Type.assignment_val self))

  use seq.Seq

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  use seq.Seq

  use Cdsat_Trail_Trail_Type as Cdsat_Trail_Trail_Type

  function index_logic'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 645 4 645 77] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span22] term_value'0 (Seq.get (shallow_model'1 (Seq.get (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)))) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)))

  use set.Fset

  use seq.Seq

  use prelude.seq_ext.SeqExt

  use seq.Seq

  use seq.Seq

  use seq.Seq

  predicate contains'2 (self : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) =
    [%#span23] exists i : int . 0 <= i /\ i < Seq.length self /\ Seq.get self i = e

  function remove'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 814 0 814 39] (s : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom remove'0_def : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . remove'0 s e
  = ([%#span33] if s = (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) then
    Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)
  else
    if Seq.get s (Seq.length s - 1) = e then
      remove'0 (SeqExt.subsequence s 0 (Seq.length s - 1)) e
    else
      Seq.snoc (remove'0 (SeqExt.subsequence s 0 (Seq.length s - 1)) e) (Seq.get s (Seq.length s - 1))

  )

  axiom remove'0_spec : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . ([%#span24] inv'4 s)
   -> ([%#span25] inv'5 e)
   -> ([%#span31] inv'4 (remove'0 s e))
  && ([%#span30] Seq.length (remove'0 s e) <= Seq.length s)
  && ([%#span29] contains'2 s e  -> Seq.length (remove'0 s e) < Seq.length s)
  && ([%#span28] forall t : TrailIndex'0.t_trailindex . inv'5 t  -> contains'2 (remove'0 s e) t  -> t <> e)
  && ([%#span27] forall t : TrailIndex'0.t_trailindex . inv'5 t  -> contains'2 (remove'0 s e) t  -> contains'2 s t)
  && ([%#span26] forall t : TrailIndex'0.t_trailindex . inv'5 t
   -> contains'2 s t  -> e <> t  -> contains'2 (remove'0 s e) t)

  use set.Fset

  predicate contains'1 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span34] Fset.mem e self

  use set.Fset

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 289 4 289 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex)

   =
    [%#span35] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)
    < Seq.length (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self))
    /\ UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)
    < Seq.length (shallow_model'1 (Seq.get (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))))

  function abstract_justification'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 318 4 321 44] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) : Fset.fset (Term'0.t_term, Value'0.t_value)


  axiom abstract_justification'0_def : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . abstract_justification'0 self just
  = ([%#span42] if Seq.length just > 0 then
    let set = abstract_justification'0 self (remove'0 just (Seq.get just 0)) in let a = index_logic'0 self (Seq.get just 0) in insert'0 set a
  else
    Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)
  )

  axiom abstract_justification'0_spec : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span36] forall i : int . 0
  <= i
  /\ i < Seq.length just  -> contains'0 self (Seq.get just i))
   -> ([%#span40] forall i : int . 0 <= i /\ i < Seq.length just
   -> contains'1 (abstract_justification'0 self just) (index_logic'0 self (Seq.get just i)))
  && ([%#span39] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'2 just ix /\ a = index_logic'0 self ix))
  && ([%#span38] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'0 self ix /\ a = index_logic'0 self ix))
  && ([%#span37] Fset.cardinal (abstract_justification'0 self just) <= Seq.length just)

  function abs_just_cons'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 376 4 376 67] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) (elem : TrailIndex'0.t_trailindex) : ()


  axiom abs_just_cons'0_def : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex), elem : TrailIndex'0.t_trailindex . abs_just_cons'0 self just elem
  = ([%#span43] ())

  axiom abs_just_cons'0_spec : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex), elem : TrailIndex'0.t_trailindex . ([%#strail4] contains'0 self elem)
   -> ([%#strail5] forall i : int . 0 <= i /\ i < Seq.length just  -> contains'0 self (Seq.get just i))
   -> ([%#strail6] abstract_justification'0 self (Seq.(++) (Seq.singleton elem) just)
  = insert'0 (abstract_justification'0 self just) (index_logic'0 self elem))

  constant self  : Trail'0.t_trail

  constant just  : Seq.seq (TrailIndex'0.t_trailindex)

  constant elem  : TrailIndex'0.t_trailindex

  function abs_just_snoc [#"/Users/xavier/Code/cdsat/src/trail.rs" 385 4 385 67] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) (elem : TrailIndex'0.t_trailindex) : ()


  goal vc_abs_just_snoc : ([%#strail1] forall i : int . 0 <= i /\ i < Seq.length just
   -> contains'0 self (Seq.get just i))
   -> ([%#strail0] contains'0 self elem)
   -> (if just = (Seq.empty : Seq.seq (TrailIndex'0.t_trailindex)) then
    [%#strail2] abstract_justification'0 self (Seq.snoc just elem)
    = insert'0 (abstract_justification'0 self just) (index_logic'0 self elem)
  else
    let j = Seq.snoc just elem in (([%#strail5] forall i : int . 0 <= i
    /\ i < Seq.length (SeqExt.subsequence j 1 (Seq.length j))
     -> contains'0 self (Seq.get (SeqExt.subsequence j 1 (Seq.length j)) i))
    && ([%#strail4] contains'0 self (Seq.get j 0)))
    /\ (([%#strail6] abstract_justification'0 self (Seq.(++) (Seq.singleton (Seq.get j 0)) (SeqExt.subsequence j 1 (Seq.length j)))
    = insert'0 (abstract_justification'0 self (SeqExt.subsequence j 1 (Seq.length j))) (index_logic'0 self (Seq.get j 0)))
     -> (let _ = abs_just_cons'0 self (SeqExt.subsequence j 1 (Seq.length j)) (Seq.get j 0) in ((([%#strail1] forall i : int . 0
    <= i
    /\ i < Seq.length (SeqExt.subsequence just 1 (Seq.length just))
     -> contains'0 self (Seq.get (SeqExt.subsequence just 1 (Seq.length just)) i))
    && ([%#strail0] contains'0 self elem))
    /\ 0 <= ([%#strail3] Seq.length just)
    /\ ([%#strail3] Seq.length (SeqExt.subsequence just 1 (Seq.length just))) < ([%#strail3] Seq.length just))
    /\ (([%#strail2] abstract_justification'0 self (Seq.snoc (SeqExt.subsequence just 1 (Seq.length just)) elem)
    = insert'0 (abstract_justification'0 self (SeqExt.subsequence just 1 (Seq.length just))) (index_logic'0 self elem))
     -> ([%#strail2] abstract_justification'0 self (Seq.snoc just elem)
    = insert'0 (abstract_justification'0 self just) (index_logic'0 self elem)))))
  )
end
module Cdsat_Trail_AbstractJustificationInsert_Impl
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 900 11 900 24

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 901 11 901 24

  let%span strail2 = "/Users/xavier/Code/cdsat/src/trail.rs" 902 0 902 58

  let%span strail3 = "/Users/xavier/Code/cdsat/src/trail.rs" 903 10 903 101

  let%span strail4 = "/Users/xavier/Code/cdsat/src/trail.rs" 899 10 899 17

  let%span strail5 = "/Users/xavier/Code/cdsat/src/trail.rs" 382 15 382 34

  let%span strail6 = "/Users/xavier/Code/cdsat/src/trail.rs" 383 4 383 82

  let%span strail7 = "/Users/xavier/Code/cdsat/src/trail.rs" 384 14 384 126

  let%span strail8 = "/Users/xavier/Code/cdsat/src/trail.rs" 381 14 381 24

  let%span span9 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span10 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  let%span span11 = "/Users/xavier/Code/cdsat/src/trail.rs" 146 14 146 59

  let%span span12 = "/Users/xavier/Code/cdsat/src/trail.rs" 144 4 144 10

  let%span span13 = "/Users/xavier/Code/cdsat/src/trail.rs" 140 15 140 48

  let%span span14 = "/Users/xavier/Code/cdsat/src/trail.rs" 141 14 141 44

  let%span span15 = "/Users/xavier/Code/cdsat/src/trail.rs" 138 4 138 10

  let%span span16 = "/Users/xavier/Code/cdsat/src/trail.rs" 134 15 134 45

  let%span span17 = "/Users/xavier/Code/cdsat/src/trail.rs" 135 14 135 47

  let%span span18 = "/Users/xavier/Code/cdsat/src/trail.rs" 132 4 132 10

  let%span span19 = "/Users/xavier/Code/cdsat/src/trail.rs" 127 15 127 32

  let%span span20 = "/Users/xavier/Code/cdsat/src/trail.rs" 128 15 128 32

  let%span span21 = "/Users/xavier/Code/cdsat/src/trail.rs" 129 14 129 31

  let%span span22 = "/Users/xavier/Code/cdsat/src/trail.rs" 125 4 125 10

  let%span span23 = "/Users/xavier/Code/cdsat/src/trail.rs" 122 14 122 45

  let%span span24 = "/Users/xavier/Code/cdsat/src/trail.rs" 120 4 120 10

  let%span span25 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 41 20 41 56

  let%span span26 = "/Users/xavier/Code/cdsat/src/trail.rs" 117 14 117 64

  let%span span27 = "/Users/xavier/Code/cdsat/src/trail.rs" 115 4 115 10

  let%span span28 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 31 20 31 53

  let%span span29 = "/Users/xavier/Code/cdsat/src/trail.rs" 112 14 112 61

  let%span span30 = "/Users/xavier/Code/cdsat/src/trail.rs" 110 4 110 10

  let%span span31 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 21 20 21 53

  let%span span32 = "/Users/xavier/Code/cdsat/src/trail.rs" 107 14 107 61

  let%span span33 = "/Users/xavier/Code/cdsat/src/trail.rs" 105 4 105 10

  let%span span34 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 11 20 11 56

  let%span span35 = "/Users/xavier/Code/cdsat/src/trail.rs" 102 14 102 64

  let%span span36 = "/Users/xavier/Code/cdsat/src/trail.rs" 100 4 100 10

  let%span span37 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span38 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span39 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span40 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span41 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span42 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 14 70 15

  let%span span43 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 23 70 24

  let%span span44 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 69 14 69 59

  let%span span45 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 64 15 64 48

  let%span span46 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 16 66 17

  let%span span47 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 25 66 26

  let%span span48 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 65 14 65 44

  let%span span49 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 59 15 59 45

  let%span span50 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 16 61 17

  let%span span51 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 25 61 26

  let%span span52 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 60 14 60 47

  let%span span53 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 53 15 53 32

  let%span span54 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 54 15 54 32

  let%span span55 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 13 56 14

  let%span span56 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 22 56 23

  let%span span57 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 31 56 32

  let%span span58 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 55 14 55 31

  let%span span59 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 50 12 50 13

  let%span span60 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 49 14 49 45

  let%span span61 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 18 46 19

  let%span span62 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 27 46 28

  let%span span63 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 45 14 45 64

  let%span span64 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 18 36 19

  let%span span65 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 27 36 28

  let%span span66 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 35 14 35 61

  let%span span67 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 18 26 19

  let%span span68 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 27 26 28

  let%span span69 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 25 14 25 61

  let%span span70 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 18 16 19

  let%span span71 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 27 16 28

  let%span span72 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 15 14 15 64

  let%span span73 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span74 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span75 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span76 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span77 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span78 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span79 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span80 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span81 = "/Users/xavier/Code/cdsat/src/term.rs" 195 8 225 9

  let%span span82 = "/Users/xavier/Code/cdsat/src/term.rs" 180 8 180 25

  let%span span83 = "/Users/xavier/Code/cdsat/src/trail.rs" 726 8 726 61

  let%span span84 = "/Users/xavier/Code/cdsat/src/trail.rs" 646 8 648 9

  let%span span85 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 129 8 129 78

  let%span span86 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 13 814 14

  let%span span87 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 24 814 25

  let%span span88 = "/Users/xavier/Code/cdsat/src/trail.rs" 809 0 809 73

  let%span span89 = "/Users/xavier/Code/cdsat/src/trail.rs" 810 0 810 63

  let%span span90 = "/Users/xavier/Code/cdsat/src/trail.rs" 811 0 811 55

  let%span span91 = "/Users/xavier/Code/cdsat/src/trail.rs" 812 0 812 52

  let%span span92 = "/Users/xavier/Code/cdsat/src/trail.rs" 813 10 813 33

  let%span span93 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 33 814 39

  let%span span94 = "/Users/xavier/Code/cdsat/src/trail.rs" 808 10 808 17

  let%span span95 = "/Users/xavier/Code/cdsat/src/trail.rs" 807 0 807 8

  let%span span96 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span97 = "/Users/xavier/Code/cdsat/src/trail.rs" 291 12 291 92

  let%span span98 = "/Users/xavier/Code/cdsat/src/trail.rs" 313 4 313 82

  let%span span99 = "/Users/xavier/Code/cdsat/src/trail.rs" 314 14 314 40

  let%span span100 = "/Users/xavier/Code/cdsat/src/trail.rs" 315 4 315 115

  let%span span101 = "/Users/xavier/Code/cdsat/src/trail.rs" 316 4 316 115

  let%span span102 = "/Users/xavier/Code/cdsat/src/trail.rs" 317 4 317 101

  let%span span103 = "/Users/xavier/Code/cdsat/src/trail.rs" 312 14 312 24

  let%span span104 = "/Users/xavier/Code/cdsat/src/trail.rs" 310 4 310 12

  let%span span105 = "/Users/xavier/Code/cdsat/src/trail.rs" 373 15 373 34

  let%span span106 = "/Users/xavier/Code/cdsat/src/trail.rs" 374 4 374 82

  let%span span107 = "/Users/xavier/Code/cdsat/src/trail.rs" 375 14 375 144

  let%span span108 = "/Users/xavier/Code/cdsat/src/trail.rs" 372 14 372 24

  let%span span109 = "/Users/xavier/Code/cdsat/src/trail.rs" 377 8 377 10

  let%span span110 = "/Users/xavier/Code/cdsat/src/trail.rs" 380 4 380 12

  let%span span111 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span112 = "/Users/xavier/Code/cdsat/src/theory.rs" 31 8 54 9

  let%span span113 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span114 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span115 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span116 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span117 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span118 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span119 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span120 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span121 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span122 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span123 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span124 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span125 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span126 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span127 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span128 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span129 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span130 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span131 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span132 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span133 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span134 = "/Users/xavier/Code/cdsat/src/theory.rs" 616 15 616 27

  let%span span135 = "/Users/xavier/Code/cdsat/src/theory.rs" 617 15 617 32

  let%span span136 = "/Users/xavier/Code/cdsat/src/theory.rs" 618 4 618 90

  let%span span137 = "/Users/xavier/Code/cdsat/src/theory.rs" 512 8 515 9

  let%span span138 = "/Users/xavier/Code/cdsat/src/theory.rs" 522 8 525 9

  let%span span139 = "/Users/xavier/Code/cdsat/src/theory.rs" 206 8 206 84

  let%span span140 = "/Users/xavier/Code/cdsat/src/theory.rs" 502 8 505 9

  let%span span141 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span142 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span143 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span144 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span145 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span146 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span147 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span148 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span149 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span150 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span151 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span152 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span153 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span154 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span155 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span156 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span157 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span158 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span159 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span160 = "/Users/xavier/Code/cdsat/src/theory.rs" 484 15 484 31

  let%span span161 = "/Users/xavier/Code/cdsat/src/theory.rs" 485 15 485 35

  let%span span162 = "/Users/xavier/Code/cdsat/src/theory.rs" 486 15 486 27

  let%span span163 = "/Users/xavier/Code/cdsat/src/theory.rs" 487 4 487 54

  let%span span164 = "/Users/xavier/Code/cdsat/src/theory.rs" 488 4 488 58

  let%span span165 = "/Users/xavier/Code/cdsat/src/theory.rs" 489 4 489 61

  let%span span166 = "/Users/xavier/Code/cdsat/src/trail.rs" 268 8 272 9

  let%span span167 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 31 8 31 32

  let%span span168 = "/Users/xavier/Code/cdsat/src/trail.rs" 547 4 547 12

  let%span span169 = "/Users/xavier/Code/cdsat/src/trail.rs" 254 8 263 9

  let%span span170 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 20 8 20 31

  let%span span171 = "/Users/xavier/Code/cdsat/src/trail.rs" 179 4 179 12

  let%span span172 = "/Users/xavier/Code/cdsat/src/trail.rs" 279 12 283 13

  let%span span173 = "/Users/xavier/Code/cdsat/src/trail.rs" 238 8 248 9

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function eq_cmp'2 (_1 : usize) (_2 : usize) : ()

  function antisym2'2 (_1 : usize) (_2 : usize) : ()

  function antisym1'2 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'2 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'2 (_1 : usize) : ()

  function cmp_gt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'2 (_1 : usize) (_2 : usize) : ()

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span9] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span10] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  function eq_cmp'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 147 4 147 31] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span12] ()

  axiom eq_cmp'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span11] (x = y)
  = (cmp_log'0 x y = Ordering'0.C_Equal)

  function antisym2'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 142 4 142 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span15] ()

  axiom antisym2'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span13] cmp_log'0 x y
  = Ordering'0.C_Greater)  -> ([%#span14] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 136 4 136 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span18] ()

  axiom antisym1'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span16] cmp_log'0 x y
  = Ordering'0.C_Less)  -> ([%#span17] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 130 4 130 52] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()

   =
    [%#span22] ()

  axiom trans'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span19] cmp_log'0 x y
  = o)  -> ([%#span20] cmp_log'0 y z = o)  -> ([%#span21] cmp_log'0 x z = o)

  function refl'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 123 4 123 20] (x : TrailIndex'0.t_trailindex) : () =
    [%#span24] ()

  axiom refl'1_spec : forall x : TrailIndex'0.t_trailindex . [%#span23] cmp_log'0 x x = Ordering'0.C_Equal

  function gt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span25] cmp_log'0 self o = Ordering'0.C_Greater

  function cmp_gt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 118 4 118 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span27] ()

  axiom cmp_gt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span26] gt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Greater)

  function ge_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span28] cmp_log'0 self o <> Ordering'0.C_Less

  function cmp_ge_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 113 4 113 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span30] ()

  axiom cmp_ge_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span29] ge_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Less)

  function lt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span31] cmp_log'0 self o = Ordering'0.C_Less

  function cmp_lt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 108 4 108 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span33] ()

  axiom cmp_lt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span32] lt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Less)

  function le_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span34] cmp_log'0 self o <> Ordering'0.C_Greater

  function cmp_le_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 103 4 103 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span36] ()

  axiom cmp_le_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span35] le_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Greater)

  use seq.Seq

  predicate inv'4 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  constant max'0 : usize = [%#span37] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'7 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function shallow_model'4 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom shallow_model'4_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span38] inv'7 self)
   -> ([%#span40] inv'4 (shallow_model'4 self))
  && ([%#span39] Seq.length (shallow_model'4 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'10 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span41] inv'4 (shallow_model'4 self)

  axiom inv'7 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'7 x = true

  predicate inv'5 (_x : TrailIndex'0.t_trailindex)

  function eq_cmp'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom eq_cmp'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span42] inv'5 x)
   -> ([%#span43] inv'5 y)  -> ([%#span44] (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal))

  function antisym2'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym2'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span45] cmp_log'0 x y
  = Ordering'0.C_Greater)
   -> ([%#span46] inv'5 x)  -> ([%#span47] inv'5 y)  -> ([%#span48] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym1'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span49] cmp_log'0 x y
  = Ordering'0.C_Less)
   -> ([%#span50] inv'5 x)  -> ([%#span51] inv'5 y)  -> ([%#span52] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span53] cmp_log'0 x y
  = o)
   -> ([%#span54] cmp_log'0 y z = o)
   -> ([%#span55] inv'5 x)  -> ([%#span56] inv'5 y)  -> ([%#span57] inv'5 z)  -> ([%#span58] cmp_log'0 x z = o)

  function refl'0 (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'0_spec : forall x : TrailIndex'0.t_trailindex . ([%#span59] inv'5 x)
   -> ([%#span60] cmp_log'0 x x = Ordering'0.C_Equal)

  function cmp_gt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_gt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span61] inv'5 x)
   -> ([%#span62] inv'5 y)  -> ([%#span63] gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater))

  function cmp_ge_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_ge_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span64] inv'5 x)
   -> ([%#span65] inv'5 y)  -> ([%#span66] ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less))

  function cmp_lt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_lt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span67] inv'5 x)
   -> ([%#span68] inv'5 y)  -> ([%#span69] lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less))

  function cmp_le_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_le_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span70] inv'5 x)
   -> ([%#span71] inv'5 y)  -> ([%#span72] le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater))

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span73] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'9 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span74] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'6 (_x : Model'0.t_model)

  axiom inv'6 : forall x : Model'0.t_model . inv'6 x
  = (invariant'9 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  predicate invariant'8 (self : TrailIndex'0.t_trailindex) =
    [%#span75] true

  axiom inv'5 : forall x : TrailIndex'0.t_trailindex . inv'5 x = true

  predicate invariant'7 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span75] true

  axiom inv'4 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'4 x = true

  use Cdsat_Trail_Assignment_Type as Assignment'0

  predicate invariant'6 (self : Seq.seq (Assignment'0.t_assignment)) =
    [%#span75] true

  predicate inv'3 (_x : Seq.seq (Assignment'0.t_assignment))

  axiom inv'3 : forall x : Seq.seq (Assignment'0.t_assignment) . inv'3 x = true

  use seq.Seq

  predicate inv'2 (_x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

  function shallow_model'1 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) : Seq.seq (Assignment'0.t_assignment)


  axiom shallow_model'1_spec : forall self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . ([%#span38] inv'2 self)
   -> ([%#span40] inv'3 (shallow_model'1 self))
  && ([%#span39] Seq.length (shallow_model'1 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'5 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span41] inv'3 (shallow_model'1 self)

  axiom inv'2 : forall x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . inv'2 x = true

  predicate invariant'4 (self : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span75] true

  predicate inv'1 (_x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'1 : forall x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'1 x = true

  use seq.Seq

  predicate inv'0 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  function shallow_model'0 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))


  axiom shallow_model'0_spec : forall self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . ([%#span38] inv'0 self)
   -> ([%#span40] inv'1 (shallow_model'0 self))
  && ([%#span39] Seq.length (shallow_model'0 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'3 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span41] inv'1 (shallow_model'0 self)

  axiom inv'0 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'0 x
  = true

  use seq.Seq

  use Cdsat_Theory_Term_Type as Term'0

  use set.Fset

  use prelude.prelude.Borrow

  use Cdsat_Trail_Trail_Type as Trail'0

  use set.Fset

  function insert'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span76] Fset.add e self

  use Cdsat_Term_Value_Type as Value'1

  use Cdsat_Term_Term_Type as Term'1

  use prelude.prelude.Real

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  function deep_model'4 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span77] match self with
      | Value'1.C_Bool b -> Value'0.C_Bool b
      | Value'1.C_Rat br -> Value'0.C_Rat (deep_model'4 br)
      end

  function shallow_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span78] deep_model'1 self

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  use Cdsat_Term_Sort_Type as Sort'1

  function deep_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'1.t_sort) : Sort'0.t_sort =
    [%#span79] match self with
      | Sort'1.C_Boolean -> Sort'0.C_Boolean
      | Sort'1.C_Rational -> Sort'0.C_Rational
      end

  function deep_model'2 (self : usize) : int =
    [%#span80] UIntSize.to_int self

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 193 4 193 44] (self : Term'1.t_term) : Term'0.t_term =
    [%#span81] match self with
      | Term'1.C_Variable v s -> Term'0.C_Variable (Var'0.C_Var (deep_model'2 v) (deep_model'3 s))
      | Term'1.C_Value v -> Term'0.C_Value (deep_model'1 v)
      | Term'1.C_Plus l r -> Term'0.C_Plus (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Eq l r -> Term'0.C_Eq (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Conj l r -> Term'0.C_Conj (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Disj l r -> Term'0.C_Disj (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Neg t -> Term'0.C_Neg (deep_model'0 t)
      | Term'1.C_Impl l r -> Term'0.C_Disj (Term'0.C_Neg (deep_model'0 l)) (deep_model'0 r)
      | Term'1.C_Times l r -> Term'0.C_Plus (Term'0.C_Value (Value'0.C_Rat (deep_model'4 l))) (deep_model'0 r)
      | Term'1.C_Lt l r -> Term'0.C_Eq (deep_model'0 l) (deep_model'0 r)
      end

  function shallow_model'2 [#"/Users/xavier/Code/cdsat/src/term.rs" 179 4 179 50] (self : Term'1.t_term) : Term'0.t_term
   =
    [%#span82] deep_model'0 self

  function term_value'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 725 4 725 61] (self : Assignment'0.t_assignment) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span83] (shallow_model'2 (Cdsat_Trail_Assignment_Type.assignment_term self), shallow_model'3 (Cdsat_Trail_Assignment_Type.assignment_val self))

  use seq.Seq

  use seq.Seq

  use Cdsat_Trail_Trail_Type as Cdsat_Trail_Trail_Type

  function index_logic'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 645 4 645 77] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span84] term_value'0 (Seq.get (shallow_model'1 (Seq.get (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)))) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)))

  use set.Fset

  use seq.Seq

  use prelude.seq_ext.SeqExt

  use seq.Seq

  predicate contains'1 (self : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) =
    [%#span85] exists i : int . 0 <= i /\ i < Seq.length self /\ Seq.get self i = e

  function remove'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 814 0 814 39] (s : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom remove'0_def : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . remove'0 s e
  = ([%#span95] if s = (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) then
    Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)
  else
    if Seq.get s (Seq.length s - 1) = e then
      remove'0 (SeqExt.subsequence s 0 (Seq.length s - 1)) e
    else
      Seq.snoc (remove'0 (SeqExt.subsequence s 0 (Seq.length s - 1)) e) (Seq.get s (Seq.length s - 1))

  )

  axiom remove'0_spec : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . ([%#span86] inv'4 s)
   -> ([%#span87] inv'5 e)
   -> ([%#span93] inv'4 (remove'0 s e))
  && ([%#span92] Seq.length (remove'0 s e) <= Seq.length s)
  && ([%#span91] contains'1 s e  -> Seq.length (remove'0 s e) < Seq.length s)
  && ([%#span90] forall t : TrailIndex'0.t_trailindex . inv'5 t  -> contains'1 (remove'0 s e) t  -> t <> e)
  && ([%#span89] forall t : TrailIndex'0.t_trailindex . inv'5 t  -> contains'1 (remove'0 s e) t  -> contains'1 s t)
  && ([%#span88] forall t : TrailIndex'0.t_trailindex . inv'5 t
   -> contains'1 s t  -> e <> t  -> contains'1 (remove'0 s e) t)

  use set.Fset

  predicate contains'2 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span96] Fset.mem e self

  use set.Fset

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 289 4 289 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex)

   =
    [%#span97] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)
    < Seq.length (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self))
    /\ UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)
    < Seq.length (shallow_model'1 (Seq.get (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))))

  function abstract_justification'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 318 4 321 44] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) : Fset.fset (Term'0.t_term, Value'0.t_value)


  axiom abstract_justification'0_def : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . abstract_justification'0 self just
  = ([%#span104] if Seq.length just > 0 then
    let set = abstract_justification'0 self (remove'0 just (Seq.get just 0)) in let a = index_logic'0 self (Seq.get just 0) in insert'0 set a
  else
    Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)
  )

  axiom abstract_justification'0_spec : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span98] forall i : int . 0
  <= i
  /\ i < Seq.length just  -> contains'0 self (Seq.get just i))
   -> ([%#span102] forall i : int . 0 <= i /\ i < Seq.length just
   -> contains'2 (abstract_justification'0 self just) (index_logic'0 self (Seq.get just i)))
  && ([%#span101] forall a : (Term'0.t_term, Value'0.t_value) . contains'2 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'1 just ix /\ a = index_logic'0 self ix))
  && ([%#span100] forall a : (Term'0.t_term, Value'0.t_value) . contains'2 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'0 self ix /\ a = index_logic'0 self ix))
  && ([%#span99] Fset.cardinal (abstract_justification'0 self just) <= Seq.length just)

  use seq.Seq

  use seq.Seq

  function abs_just_cons'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 376 4 376 67] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) (elem : TrailIndex'0.t_trailindex) : ()


  axiom abs_just_cons'0_def : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex), elem : TrailIndex'0.t_trailindex . abs_just_cons'0 self just elem
  = ([%#span109] ())

  axiom abs_just_cons'0_spec : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex), elem : TrailIndex'0.t_trailindex . ([%#span105] contains'0 self elem)
   -> ([%#span106] forall i : int . 0 <= i /\ i < Seq.length just  -> contains'0 self (Seq.get just i))
   -> ([%#span107] abstract_justification'0 self (Seq.(++) (Seq.singleton elem) just)
  = insert'0 (abstract_justification'0 self just) (index_logic'0 self elem))

  function abs_just_snoc'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 385 4 385 67] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) (elem : TrailIndex'0.t_trailindex) : ()


  axiom abs_just_snoc'0_def : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex), elem : TrailIndex'0.t_trailindex . abs_just_snoc'0 self just elem
  = ([%#span110] if just = (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) then
    ()
  else
    let j = Seq.snoc just elem in let _ = abs_just_cons'0 self (SeqExt.subsequence j 1 (Seq.length j)) (Seq.get j 0) in abs_just_snoc'0 self (SeqExt.subsequence just 1 (Seq.length just)) elem
  )

  axiom abs_just_snoc'0_spec : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex), elem : TrailIndex'0.t_trailindex . ([%#strail5] contains'0 self elem)
   -> ([%#strail6] forall i : int . 0 <= i /\ i < Seq.length just  -> contains'0 self (Seq.get just i))
   -> ([%#strail7] abstract_justification'0 self (Seq.snoc just elem)
  = insert'0 (abstract_justification'0 self just) (index_logic'0 self elem))

  use Cdsat_Theory_Trail_Type as Trail'1

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span111] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  function well_sorted'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 30 4 30 36] (self : Term'0.t_term) : bool =
    [%#span112] match self with
      | Term'0.C_Variable v -> true
      | Term'0.C_Value v -> true
      | Term'0.C_Plus l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Rational
      | Term'0.C_Eq l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r
      | Term'0.C_Conj l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Boolean
      | Term'0.C_Disj l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Boolean
      | Term'0.C_Neg t -> well_sorted'0 t /\ sort'0 t = Sort'0.C_Boolean
      end

  use prelude.prelude.Int

  use Cdsat_Theory_Assign_Type as Assign'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span113] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'1.t_trail) =
    [%#span114] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'2 a
      end

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'1.t_trail) : int

  axiom len'0_spec : forall self : Trail'1.t_trail . [%#span115] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'1.t_trail) : int =
    [%#span118] match self with
      | Trail'1.C_Empty -> 0
      | Trail'1.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'1.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'1.t_trail . ([%#span117] level'0 self <= len'0 self)
  && ([%#span116] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'1.t_trail) =
    [%#span119] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span120] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span124] match self with
      | Trail'1.C_Empty -> Option'0.C_None
      | Trail'1.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span123] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span122] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span121] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  function from_int'0 (_1 : int) : Real.real

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span127] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span125] inv'6 self)
   -> ([%#span126] invariant'9 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span128] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span129] forall a : (Term'0.t_term, Value'0.t_value) . contains'2 v a  -> satisfies'0 self a

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span130] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'6 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate contains'3 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span132] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'3_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span131] invariant_assign'0 self
   -> contains'3 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'1.t_trail)
   =
    [%#span133] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a _ tl -> sound'0 tl /\ justified_sound'0 a
      end

  function find_justified'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 619 4 619 46] (self : Trail'1.t_trail) (kv : (Term'0.t_term, Value'0.t_value)) : ()


  axiom find_justified'0_spec : forall self : Trail'1.t_trail, kv : (Term'0.t_term, Value'0.t_value) . ([%#span134] sound'0 self)
   -> ([%#span135] contains'3 self kv)
   -> ([%#span136] forall l : int . forall a : Assign'0.t_assign . find'0 self kv = Option'0.C_Some (a, l)
   -> justified_sound'0 a)

  predicate is_decision'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 511 4 511 54] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span137] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Decision _ _, _) -> true
      | _ -> false
      end

  predicate is_input'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 521 4 521 51] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span138] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Input _ _, _) -> true
      | _ -> false
      end

  predicate entails'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 205 4 205 74] (self : Model'0.t_model) (j : Fset.fset (Term'0.t_term, Value'0.t_value)) (c : (Term'0.t_term, Value'0.t_value))

   =
    [%#span139] invariant'9 self  -> satisfy_set'0 self j  -> satisfies'0 self c

  predicate is_justified'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 501 4 501 55] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span140] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified _ _ _, _) -> true
      | _ -> false
      end

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span141] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span144] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span142] is_bool'0 self)
   -> ([%#span143] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'1.t_trail) =
    [%#span145] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> let ap = to_pair'0 a in not contains'3 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'3 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'1.t_trail) =
    [%#span146] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'2 j a  -> contains'3 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'1 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span147] Fset.remove a self

  use set.Fset

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span150] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span148] invariant_nonneg'0 self)
   -> ([%#span149] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'1.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_spec : forall self : Trail'1.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#span151] invariant_nonneg'0 self)
   -> ([%#span156] set_level'0 self s <= level'0 self)
  && ([%#span155] set_level'0 self s >= 0)
  && ([%#span154] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#span153] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'2 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span152] forall i : (Term'0.t_term, Value'0.t_value) . contains'2 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'1.t_trail) =
    [%#span158] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'1.t_trail) =
    [%#span159] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function justification'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 490 4 490 71] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)


  axiom justification'0_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span160] invariant'1 self)
   -> ([%#span161] is_justified'0 self d)
   -> ([%#span162] sound'0 self)
   -> ([%#span165] is_decision'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#span164] is_input'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#span163] forall m : Model'0.t_model . inv'6 m  -> entails'0 m (justification'0 self d) d)

  use prelude.prelude.Snapshot

  predicate justified_correct'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 267 4 267 78] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) (j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

   =
    [%#span166] (forall i : TrailIndex'0.t_trailindex . contains'1 (shallow_model'4 j) i
     -> lt_log'0 i ix /\ contains'0 self i)
    /\ is_justified'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ justification'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    = abstract_justification'0 self (shallow_model'4 j)

  use Cdsat_Trail_Reason_Type as Reason'0

  function index_logic'3 [@inline:trivial] (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (ix : usize) : Assignment'0.t_assignment

   =
    [%#span167] Seq.get (shallow_model'1 self) (UIntSize.to_int ix)

  function index_logic'2 [@inline:trivial] (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (ix : usize) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span167] Seq.get (shallow_model'0 self) (UIntSize.to_int ix)

  function reason'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 549 4 549 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : Reason'0.t_reason

   =
    [%#span168] Cdsat_Trail_Assignment_Type.assignment_reason (index_logic'3 (index_logic'2 (Cdsat_Trail_Trail_Type.trail_assignments self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)) (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix))

  predicate justified_is_justified'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 253 4 253 47] (self : Trail'0.t_trail) =
    [%#span169] forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> (let reason = reason'0 self ix in (reason = Reason'0.C_Decision)
    = is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ (reason = Reason'0.C_Input)
    = is_input'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ (forall j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . reason = Reason'0.C_Justified j
     -> justified_correct'0 self ix j))

  function index_logic'1 [@inline:trivial] (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (ix : int) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span170] Seq.get (shallow_model'0 self) ix

  function level_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 180 4 180 33] (self : TrailIndex'0.t_trailindex) : int
   =
    [%#span171] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 self)

  predicate abstract_relation'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 277 4 277 42] (self : Trail'0.t_trail) =
    [%#span172] (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> contains'3 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix))
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    = UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))
    /\ (forall a : (Term'0.t_term, Value'0.t_value) . contains'3 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
     -> (exists ix : TrailIndex'0.t_trailindex . contains'0 self ix
    /\ level_log'0 ix = level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
    /\ index_logic'0 self ix = a))

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 237 4 237 34] (self : Trail'0.t_trail) =
    [%#span173] abstract_relation'0 self
    /\ sound'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    /\ invariant'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    /\ level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    = UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self)
    /\ UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self)
    = Seq.length (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) - 1
    /\ (forall i : int . 0 <= i /\ i < Seq.length (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self))
     -> Seq.length (shallow_model'1 (index_logic'1 (Cdsat_Trail_Trail_Type.trail_assignments self) i)) > 0)
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix) = 0)
    = is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix))
    /\ (forall j : TrailIndex'0.t_trailindex . forall i : TrailIndex'0.t_trailindex . contains'0 self i
     -> contains'0 self j  -> i <> j  -> index_logic'0 self i <> index_logic'0 self j)
    /\ justified_is_justified'0 self
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> well_sorted'0 (let (a, _) = index_logic'0 self ix in a))

  constant t  : Trail'0.t_trail

  constant x  : TrailIndex'0.t_trailindex

  constant s  : Seq.seq (TrailIndex'0.t_trailindex)

  function abstract_justification_insert [#"/Users/xavier/Code/cdsat/src/trail.rs" 904 0 904 88] (t : Trail'0.t_trail) (x : TrailIndex'0.t_trailindex) (s : Seq.seq (TrailIndex'0.t_trailindex)) : ()


  goal vc_abstract_justification_insert : ([%#strail2] forall i : TrailIndex'0.t_trailindex . contains'1 s i
   -> contains'0 t i)
   -> ([%#strail1] contains'0 t x)
   -> ([%#strail0] invariant'0 t)
   -> (([%#strail6] forall i : int . 0 <= i /\ i < Seq.length s  -> contains'0 t (Seq.get s i))
  && ([%#strail5] contains'0 t x))
  /\ (([%#strail7] abstract_justification'0 t (Seq.snoc s x)
  = insert'0 (abstract_justification'0 t s) (index_logic'0 t x))
   -> ([%#strail3] abstract_justification'0 t (Seq.snoc s x)
  = insert'0 (abstract_justification'0 t s) (index_logic'0 t x)))
end
module Cdsat_Theory_Impl4_Consistent_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 238 15 238 37

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 239 15 239 37

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 240 15 240 21

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 242 22 242 26

  let%span stheory4 = "/Users/xavier/Code/cdsat/src/theory.rs" 241 14 241 19

  let%span span5 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span6 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span7 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span8 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span9 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span10 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span11 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span5] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span6] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k = v
     -> Cdsat_Theory_Var_Type.var_1 k = sort'0 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'0 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use Cdsat_Theory_Term_Type as Term'0

  use prelude.prelude.Real

  use prelude.prelude.Int

  function from_int'0 (_1 : int) : Real.real

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span7] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'0 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span10] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span8] inv'0 self)
   -> ([%#span9] invariant'0 self  -> sort'0 (interp'0 self t) = sort'1 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span11] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  constant self  : Model'0.t_model

  constant t  : Term'0.t_term

  constant v  : Value'0.t_value

  constant w  : Value'0.t_value

  function consistent [#"/Users/xavier/Code/cdsat/src/theory.rs" 242 4 242 56] (self : Model'0.t_model) (t : Term'0.t_term) (v : Value'0.t_value) (w : Value'0.t_value) : ()


  goal vc_consistent : ([%#stheory3] inv'0 self)
   -> ([%#stheory2] v <> w)
   -> ([%#stheory1] satisfies'0 self (t, w))  -> ([%#stheory0] satisfies'0 self (t, v))  -> ([%#stheory4] false)
end
module Cdsat_Bool_Impl0_Extend
  let%span sbool0 = "/Users/xavier/Code/cdsat/src/bool.rs" 34 32 34 48

  let%span sbool1 = "/Users/xavier/Code/cdsat/src/bool.rs" 36 34 36 52

  let%span sbool2 = "/Users/xavier/Code/cdsat/src/bool.rs" 38 8 38 81

  let%span sbool3 = "/Users/xavier/Code/cdsat/src/bool.rs" 41 20 41 50

  let%span sbool4 = "/Users/xavier/Code/cdsat/src/bool.rs" 51 12 51 53

  let%span sbool5 = "/Users/xavier/Code/cdsat/src/bool.rs" 58 20 58 80

  let%span sbool6 = "/Users/xavier/Code/cdsat/src/bool.rs" 81 22 81 45

  let%span sbool7 = "/Users/xavier/Code/cdsat/src/bool.rs" 56 18 56 21

  let%span sbool8 = "/Users/xavier/Code/cdsat/src/bool.rs" 61 71 61 75

  let%span sbool9 = "/Users/xavier/Code/cdsat/src/bool.rs" 67 43 67 98

  let%span sbool10 = "/Users/xavier/Code/cdsat/src/bool.rs" 68 43 68 82

  let%span sbool11 = "/Users/xavier/Code/cdsat/src/bool.rs" 70 38 70 61

  let%span sbool12 = "/Users/xavier/Code/cdsat/src/bool.rs" 72 24 74 25

  let%span sbool13 = "/Users/xavier/Code/cdsat/src/bool.rs" 19 4 19 38

  let%span sbool14 = "/Users/xavier/Code/cdsat/src/bool.rs" 20 14 31 5

  let%span sbool15 = "/Users/xavier/Code/cdsat/src/bool.rs" 32 4 32 44

  let%span span16 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span17 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  let%span span18 = "/Users/xavier/Code/cdsat/src/trail.rs" 146 14 146 59

  let%span span19 = "/Users/xavier/Code/cdsat/src/trail.rs" 140 15 140 48

  let%span span20 = "/Users/xavier/Code/cdsat/src/trail.rs" 141 14 141 44

  let%span span21 = "/Users/xavier/Code/cdsat/src/trail.rs" 134 15 134 45

  let%span span22 = "/Users/xavier/Code/cdsat/src/trail.rs" 135 14 135 47

  let%span span23 = "/Users/xavier/Code/cdsat/src/trail.rs" 127 15 127 32

  let%span span24 = "/Users/xavier/Code/cdsat/src/trail.rs" 128 15 128 32

  let%span span25 = "/Users/xavier/Code/cdsat/src/trail.rs" 129 14 129 31

  let%span span26 = "/Users/xavier/Code/cdsat/src/trail.rs" 122 14 122 45

  let%span span27 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 41 20 41 56

  let%span span28 = "/Users/xavier/Code/cdsat/src/trail.rs" 117 14 117 64

  let%span span29 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 31 20 31 53

  let%span span30 = "/Users/xavier/Code/cdsat/src/trail.rs" 112 14 112 61

  let%span span31 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 21 20 21 53

  let%span span32 = "/Users/xavier/Code/cdsat/src/trail.rs" 107 14 107 61

  let%span span33 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 11 20 11 56

  let%span span34 = "/Users/xavier/Code/cdsat/src/trail.rs" 102 14 102 64

  let%span span35 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 14 70 15

  let%span span36 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 23 70 24

  let%span span37 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 69 14 69 59

  let%span span38 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 64 15 64 48

  let%span span39 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 16 66 17

  let%span span40 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 25 66 26

  let%span span41 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 65 14 65 44

  let%span span42 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 59 15 59 45

  let%span span43 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 16 61 17

  let%span span44 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 25 61 26

  let%span span45 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 60 14 60 47

  let%span span46 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 53 15 53 32

  let%span span47 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 54 15 54 32

  let%span span48 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 13 56 14

  let%span span49 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 22 56 23

  let%span span50 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 31 56 32

  let%span span51 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 55 14 55 31

  let%span span52 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 50 12 50 13

  let%span span53 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 49 14 49 45

  let%span span54 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 18 46 19

  let%span span55 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 27 46 28

  let%span span56 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 45 14 45 64

  let%span span57 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 18 36 19

  let%span span58 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 27 36 28

  let%span span59 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 35 14 35 61

  let%span span60 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 18 26 19

  let%span span61 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 27 26 28

  let%span span62 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 25 14 25 61

  let%span span63 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 18 16 19

  let%span span64 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 27 16 28

  let%span span65 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 15 14 15 64

  let%span span66 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span67 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span68 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span69 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span70 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span71 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span72 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span73 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span74 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 129 8 129 78

  let%span span75 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span76 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span77 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span78 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span79 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span80 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span81 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span82 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span83 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 13 814 14

  let%span span84 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 24 814 25

  let%span span85 = "/Users/xavier/Code/cdsat/src/trail.rs" 809 0 809 73

  let%span span86 = "/Users/xavier/Code/cdsat/src/trail.rs" 810 0 810 63

  let%span span87 = "/Users/xavier/Code/cdsat/src/trail.rs" 811 0 811 55

  let%span span88 = "/Users/xavier/Code/cdsat/src/trail.rs" 812 0 812 52

  let%span span89 = "/Users/xavier/Code/cdsat/src/trail.rs" 813 10 813 33

  let%span span90 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 33 814 39

  let%span span91 = "/Users/xavier/Code/cdsat/src/trail.rs" 808 10 808 17

  let%span span92 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span93 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span94 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span95 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span96 = "/Users/xavier/Code/cdsat/src/term.rs" 195 8 225 9

  let%span span97 = "/Users/xavier/Code/cdsat/src/term.rs" 180 8 180 25

  let%span span98 = "/Users/xavier/Code/cdsat/src/trail.rs" 726 8 726 61

  let%span span99 = "/Users/xavier/Code/cdsat/src/trail.rs" 646 8 648 9

  let%span span100 = "/Users/xavier/Code/cdsat/src/trail.rs" 291 12 291 92

  let%span span101 = "/Users/xavier/Code/cdsat/src/trail.rs" 313 4 313 82

  let%span span102 = "/Users/xavier/Code/cdsat/src/trail.rs" 314 14 314 40

  let%span span103 = "/Users/xavier/Code/cdsat/src/trail.rs" 315 4 315 115

  let%span span104 = "/Users/xavier/Code/cdsat/src/trail.rs" 316 4 316 115

  let%span span105 = "/Users/xavier/Code/cdsat/src/trail.rs" 317 4 317 101

  let%span span106 = "/Users/xavier/Code/cdsat/src/trail.rs" 312 14 312 24

  let%span span107 = "/Users/xavier/Code/cdsat/src/theory.rs" 238 15 238 37

  let%span span108 = "/Users/xavier/Code/cdsat/src/theory.rs" 239 15 239 37

  let%span span109 = "/Users/xavier/Code/cdsat/src/theory.rs" 240 15 240 21

  let%span span110 = "/Users/xavier/Code/cdsat/src/theory.rs" 242 22 242 26

  let%span span111 = "/Users/xavier/Code/cdsat/src/theory.rs" 241 14 241 19

  let%span span112 = "/Users/xavier/Code/cdsat/src/trail.rs" 373 15 373 34

  let%span span113 = "/Users/xavier/Code/cdsat/src/trail.rs" 374 4 374 82

  let%span span114 = "/Users/xavier/Code/cdsat/src/trail.rs" 375 14 375 144

  let%span span115 = "/Users/xavier/Code/cdsat/src/trail.rs" 372 14 372 24

  let%span span116 = "/Users/xavier/Code/cdsat/src/trail.rs" 382 15 382 34

  let%span span117 = "/Users/xavier/Code/cdsat/src/trail.rs" 383 4 383 82

  let%span span118 = "/Users/xavier/Code/cdsat/src/trail.rs" 384 14 384 126

  let%span span119 = "/Users/xavier/Code/cdsat/src/trail.rs" 381 14 381 24

  let%span span120 = "/Users/xavier/Code/cdsat/src/theory.rs" 31 8 54 9

  let%span span121 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span122 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span123 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span124 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span125 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span126 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span127 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span128 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span129 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span130 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span131 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span132 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span133 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span134 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span135 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span136 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span137 = "/Users/xavier/Code/cdsat/src/theory.rs" 616 15 616 27

  let%span span138 = "/Users/xavier/Code/cdsat/src/theory.rs" 617 15 617 32

  let%span span139 = "/Users/xavier/Code/cdsat/src/theory.rs" 618 4 618 90

  let%span span140 = "/Users/xavier/Code/cdsat/src/theory.rs" 512 8 515 9

  let%span span141 = "/Users/xavier/Code/cdsat/src/theory.rs" 522 8 525 9

  let%span span142 = "/Users/xavier/Code/cdsat/src/theory.rs" 206 8 206 84

  let%span span143 = "/Users/xavier/Code/cdsat/src/theory.rs" 502 8 505 9

  let%span span144 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span145 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span146 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span147 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span148 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span149 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span150 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span151 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span152 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span153 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span154 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span155 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span156 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span157 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span158 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span159 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span160 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span161 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span162 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span163 = "/Users/xavier/Code/cdsat/src/theory.rs" 484 15 484 31

  let%span span164 = "/Users/xavier/Code/cdsat/src/theory.rs" 485 15 485 35

  let%span span165 = "/Users/xavier/Code/cdsat/src/theory.rs" 486 15 486 27

  let%span span166 = "/Users/xavier/Code/cdsat/src/theory.rs" 487 4 487 54

  let%span span167 = "/Users/xavier/Code/cdsat/src/theory.rs" 488 4 488 58

  let%span span168 = "/Users/xavier/Code/cdsat/src/theory.rs" 489 4 489 61

  let%span span169 = "/Users/xavier/Code/cdsat/src/trail.rs" 268 8 272 9

  let%span span170 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 31 8 31 32

  let%span span171 = "/Users/xavier/Code/cdsat/src/trail.rs" 547 4 547 12

  let%span span172 = "/Users/xavier/Code/cdsat/src/trail.rs" 254 8 263 9

  let%span span173 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 20 8 20 31

  let%span span174 = "/Users/xavier/Code/cdsat/src/trail.rs" 179 4 179 12

  let%span span175 = "/Users/xavier/Code/cdsat/src/trail.rs" 279 12 283 13

  let%span span176 = "/Users/xavier/Code/cdsat/src/trail.rs" 238 8 248 9

  let%span span177 = "/Users/xavier/Code/cdsat/src/trail.rs" 900 11 900 24

  let%span span178 = "/Users/xavier/Code/cdsat/src/trail.rs" 901 11 901 24

  let%span span179 = "/Users/xavier/Code/cdsat/src/trail.rs" 902 0 902 58

  let%span span180 = "/Users/xavier/Code/cdsat/src/trail.rs" 903 10 903 101

  let%span span181 = "/Users/xavier/Code/cdsat/src/trail.rs" 899 10 899 17

  let%span span182 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 108 8 108 31

  let%span span183 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 1993 21 1993 25

  let%span span184 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 1993 27 1993 32

  let%span span185 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 82 26 82 51

  let%span span186 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 26 20 26 34

  let%span span187 = "/Users/xavier/Code/cdsat/src/trail.rs" 667 4 667 27

  let%span span188 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 81 8 81 28

  let%span span189 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/cmp.rs" 263 11 263 15

  let%span span190 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/cmp.rs" 263 17 263 22

  let%span span191 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/cmp.rs" 17 26 17 75

  let%span span192 = "/Users/xavier/Code/cdsat/src/term.rs" 14 23 14 32

  let%span span193 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 90 8 90 31

  let%span span194 = "/Users/xavier/Code/cdsat/src/term.rs" 28 8 28 25

  let%span span195 = "/Users/xavier/Code/cdsat/src/term.rs" 49 14 49 37

  let%span span196 = "/Users/xavier/Code/cdsat/src/theory.rs" 398 8 400 79

  let%span span197 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 46 8 46 12

  let%span span198 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 51 8 51 85

  let%span span199 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 17 8 17 60

  let%span span200 = "/Users/xavier/Code/cdsat/src/theory.rs" 60 8 60 36

  let%span span201 = "/Users/xavier/Code/cdsat/src/bool.rs" 104 15 104 29

  let%span span202 = "/Users/xavier/Code/cdsat/src/bool.rs" 105 4 105 34

  let%span span203 = "/Users/xavier/Code/cdsat/src/bool.rs" 106 4 106 30

  let%span span204 = "/Users/xavier/Code/cdsat/src/bool.rs" 107 4 107 73

  let%span span205 = "/Users/xavier/Code/cdsat/src/bool.rs" 108 14 114 5

  let%span span206 = "/Users/xavier/Code/cdsat/src/bool.rs" 87 4 87 44

  let%span span207 = "/Users/xavier/Code/cdsat/src/trail.rs" 715 15 715 35

  let%span span208 = "/Users/xavier/Code/cdsat/src/trail.rs" 716 14 716 67

  let%span span209 = "/Users/xavier/Code/cdsat/src/trail.rs" 681 14 681 36

  let%span span210 = "/Users/xavier/Code/cdsat/src/trail.rs" 687 14 687 44

  let%span span211 = "/Users/xavier/Code/cdsat/src/trail.rs" 688 14 691 5

  let%span span212 = "/Users/xavier/Code/cdsat/src/theory.rs" 675 8 675 71

  let%span span213 = "/Users/xavier/Code/cdsat/src/theory.rs" 738 15 738 31

  let%span span214 = "/Users/xavier/Code/cdsat/src/theory.rs" 739 4 739 83

  let%span span215 = "/Users/xavier/Code/cdsat/src/theory.rs" 548 15 548 31

  let%span span216 = "/Users/xavier/Code/cdsat/src/theory.rs" 550 15 550 25

  let%span span217 = "/Users/xavier/Code/cdsat/src/theory.rs" 549 14 549 32

  let%span span218 = "/Users/xavier/Code/cdsat/src/theory.rs" 551 4 551 141

  let%span span219 = "/Users/xavier/Code/cdsat/src/theory.rs" 552 4 552 142

  let%span span220 = "/Users/xavier/Code/cdsat/src/theory.rs" 553 4 553 56

  let%span span221 = "/Users/xavier/Code/cdsat/src/theory.rs" 554 4 554 71

  let%span span222 = "/Users/xavier/Code/cdsat/src/theory.rs" 555 4 555 77

  let%span span223 = "/Users/xavier/Code/cdsat/src/theory.rs" 556 14 556 126

  let%span span224 = "/Users/xavier/Code/cdsat/src/theory.rs" 557 14 557 40

  let%span span225 = "/Users/xavier/Code/cdsat/src/theory.rs" 682 8 682 82

  let%span span226 = "/Users/xavier/Code/cdsat/src/theory.rs" 693 4 693 55

  let%span span227 = "/Users/xavier/Code/cdsat/src/theory.rs" 695 8 695 108

  let%span span228 = "/Users/xavier/Code/cdsat/src/trail.rs" 651 14 651 34

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function eq_cmp'2 (_1 : usize) (_2 : usize) : ()

  function antisym2'2 (_1 : usize) (_2 : usize) : ()

  function antisym1'2 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'2 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'2 (_1 : usize) : ()

  function cmp_gt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'2 (_1 : usize) (_2 : usize) : ()

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span16] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span17] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  function eq_cmp'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 147 4 147 31] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom eq_cmp'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span18] (x = y)
  = (cmp_log'0 x y = Ordering'0.C_Equal)

  function antisym2'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 142 4 142 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom antisym2'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span19] cmp_log'0 x y
  = Ordering'0.C_Greater)  -> ([%#span20] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 136 4 136 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom antisym1'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span21] cmp_log'0 x y
  = Ordering'0.C_Less)  -> ([%#span22] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 130 4 130 52] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span23] cmp_log'0 x y
  = o)  -> ([%#span24] cmp_log'0 y z = o)  -> ([%#span25] cmp_log'0 x z = o)

  function refl'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 123 4 123 20] (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'1_spec : forall x : TrailIndex'0.t_trailindex . [%#span26] cmp_log'0 x x = Ordering'0.C_Equal

  function gt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span27] cmp_log'0 self o = Ordering'0.C_Greater

  function cmp_gt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 118 4 118 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_gt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span28] gt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Greater)

  function ge_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span29] cmp_log'0 self o <> Ordering'0.C_Less

  function cmp_ge_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 113 4 113 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_ge_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span30] ge_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Less)

  function lt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span31] cmp_log'0 self o = Ordering'0.C_Less

  function cmp_lt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 108 4 108 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_lt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span32] lt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Less)

  function le_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span33] cmp_log'0 self o <> Ordering'0.C_Greater

  function cmp_le_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 103 4 103 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_le_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span34] le_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Greater)

  predicate inv'3 (_x : TrailIndex'0.t_trailindex)

  function eq_cmp'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom eq_cmp'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span35] inv'3 x)
   -> ([%#span36] inv'3 y)  -> ([%#span37] (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal))

  function antisym2'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym2'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span38] cmp_log'0 x y
  = Ordering'0.C_Greater)
   -> ([%#span39] inv'3 x)  -> ([%#span40] inv'3 y)  -> ([%#span41] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym1'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span42] cmp_log'0 x y
  = Ordering'0.C_Less)
   -> ([%#span43] inv'3 x)  -> ([%#span44] inv'3 y)  -> ([%#span45] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span46] cmp_log'0 x y
  = o)
   -> ([%#span47] cmp_log'0 y z = o)
   -> ([%#span48] inv'3 x)  -> ([%#span49] inv'3 y)  -> ([%#span50] inv'3 z)  -> ([%#span51] cmp_log'0 x z = o)

  function refl'0 (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'0_spec : forall x : TrailIndex'0.t_trailindex . ([%#span52] inv'3 x)
   -> ([%#span53] cmp_log'0 x x = Ordering'0.C_Equal)

  function cmp_gt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_gt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span54] inv'3 x)
   -> ([%#span55] inv'3 y)  -> ([%#span56] gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater))

  function cmp_ge_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_ge_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span57] inv'3 x)
   -> ([%#span58] inv'3 y)  -> ([%#span59] ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less))

  function cmp_lt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_lt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span60] inv'3 x)
   -> ([%#span61] inv'3 y)  -> ([%#span62] lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less))

  function cmp_le_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_le_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span63] inv'3 x)
   -> ([%#span64] inv'3 y)  -> ([%#span65] le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater))

  use Cdsat_Trail_Assignment_Type as Assignment'0

  use seq.Seq

  predicate invariant'12 (self : Seq.seq (Assignment'0.t_assignment)) =
    [%#span66] true

  predicate inv'9 (_x : Seq.seq (Assignment'0.t_assignment))

  axiom inv'9 : forall x : Seq.seq (Assignment'0.t_assignment) . inv'9 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  constant max'0 : usize = [%#span67] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'8 (_x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

  function shallow_model'4 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) : Seq.seq (Assignment'0.t_assignment)


  axiom shallow_model'4_spec : forall self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . ([%#span68] inv'8 self)
   -> ([%#span70] inv'9 (shallow_model'4 self))
  && ([%#span69] Seq.length (shallow_model'4 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'11 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span71] inv'9 (shallow_model'4 self)

  axiom inv'8 : forall x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . inv'8 x = true

  predicate invariant'10 (self : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span66] true

  predicate inv'7 (_x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'7 : forall x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'7 x = true

  use seq.Seq

  predicate inv'6 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  function shallow_model'3 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))


  axiom shallow_model'3_spec : forall self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . ([%#span68] inv'6 self)
   -> ([%#span70] inv'7 (shallow_model'3 self))
  && ([%#span69] Seq.length (shallow_model'3 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'9 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span71] inv'7 (shallow_model'3 self)

  axiom inv'6 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'6 x
  = true

  predicate invariant'8 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span66] true

  predicate inv'5 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'5 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'5 x = true

  use seq.Seq

  predicate inv'4 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function shallow_model'2 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom shallow_model'2_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span68] inv'4 self)
   -> ([%#span70] inv'5 (shallow_model'2 self))
  && ([%#span69] Seq.length (shallow_model'2 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'7 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span71] inv'5 (shallow_model'2 self)

  axiom inv'4 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'4 x = true

  predicate invariant'6 (self : TrailIndex'0.t_trailindex) =
    [%#span66] true

  axiom inv'3 : forall x : TrailIndex'0.t_trailindex . inv'3 x = true

  use prelude.prelude.Borrow

  predicate invariant'5 (self : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) =
    [%#span66] true

  predicate inv'2 (_x : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)))

  axiom inv'2 : forall x : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) . inv'2 x = true

  use Cdsat_Term_Value_Type as Value'0

  predicate invariant'4 (self : Value'0.t_value) =
    [%#span66] true

  predicate inv'1 (_x : Value'0.t_value)

  axiom inv'1 : forall x : Value'0.t_value . inv'1 x = true

  use Cdsat_Theory_Sort_Type as Sort'1

  use Cdsat_Theory_Value_Type as Value'1

  function sort'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'1.t_value) : Sort'1.t_sort =
    [%#span72] match self with
      | Value'1.C_Bool _ -> Sort'1.C_Boolean
      | Value'1.C_Rat _ -> Sort'1.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span73] forall v : Value'1.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'2 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'2 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use seq.Seq

  predicate contains'1 (self : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) =
    [%#span74] exists i : int . 0 <= i /\ i < Seq.length self /\ Seq.get self i = e

  use Cdsat_Bool_BoolTheory_Type as BoolTheory'0

  use prelude.prelude.Snapshot

  use Cdsat_Trail_IndexIterator_Type as IndexIterator'0

  use Cdsat_Trail_Trail_Type as Trail'0

  use prelude.prelude.Intrinsic

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  use Cdsat_Theory_Term_Type as Term'1

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'1.t_term) : Sort'1.t_sort =
    [%#span75] match self with
      | Term'1.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'1.C_Value v -> sort'2 v
      | Term'1.C_Plus _ _ -> Sort'1.C_Rational
      | Term'1.C_Eq _ _ -> Sort'1.C_Boolean
      | Term'1.C_Conj _ _ -> Sort'1.C_Boolean
      | Term'1.C_Neg _ -> Sort'1.C_Boolean
      | Term'1.C_Disj _ _ -> Sort'1.C_Boolean
      end

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'1.t_term) : Value'1.t_value

   =
    [%#span78] match t with
      | Term'1.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'1.C_Value v -> v
      | Term'1.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'1.C_Rat r1, Value'1.C_Rat r2) -> Value'1.C_Rat r1
        | _ -> Value'1.C_Rat (from_int'0 (- 1))
        end
      | Term'1.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'1.C_Bool b1, Value'1.C_Bool b2) -> Value'1.C_Bool (b1 /\ b2)
        | _ -> Value'1.C_Bool false
        end
      | Term'1.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'1.C_Bool b1, Value'1.C_Bool b2) -> Value'1.C_Bool (b1 \/ b2)
        | _ -> Value'1.C_Bool false
        end
      | Term'1.C_Eq l r -> Value'1.C_Bool (interp'0 self l = interp'0 self r)
      | Term'1.C_Neg t -> match interp'0 self t with
        | Value'1.C_Bool b -> Value'1.C_Bool (not b)
        | _ -> Value'1.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'1.t_term . ([%#span76] inv'0 self)
   -> ([%#span77] invariant'2 self  -> sort'2 (interp'0 self t) = sort'1 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'1.t_term, Value'1.t_value))

   =
    [%#span79] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  use set.Fset

  use set.Fset

  predicate contains'3 [@inline:trivial] (self : Fset.fset (Term'1.t_term, Value'1.t_value)) (e : (Term'1.t_term, Value'1.t_value))

   =
    [%#span80] Fset.mem e self

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'1.t_term, Value'1.t_value))

   =
    [%#span81] forall a : (Term'1.t_term, Value'1.t_value) . contains'3 v a  -> satisfies'0 self a

  use set.Fset

  use set.Fset

  function insert'0 [@inline:trivial] (self : Fset.fset (Term'1.t_term, Value'1.t_value)) (e : (Term'1.t_term, Value'1.t_value)) : Fset.fset (Term'1.t_term, Value'1.t_value)

   =
    [%#span82] Fset.add e self

  use seq.Seq

  use prelude.seq_ext.SeqExt

  use seq.Seq

  function remove'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 814 0 814 39] (s : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom remove'0_spec : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . ([%#span83] inv'5 s)
   -> ([%#span84] inv'3 e)
   -> ([%#span90] inv'5 (remove'0 s e))
  && ([%#span89] Seq.length (remove'0 s e) <= Seq.length s)
  && ([%#span88] contains'1 s e  -> Seq.length (remove'0 s e) < Seq.length s)
  && ([%#span87] forall t : TrailIndex'0.t_trailindex . inv'3 t  -> contains'1 (remove'0 s e) t  -> t <> e)
  && ([%#span86] forall t : TrailIndex'0.t_trailindex . inv'3 t  -> contains'1 (remove'0 s e) t  -> contains'1 s t)
  && ([%#span85] forall t : TrailIndex'0.t_trailindex . inv'3 t
   -> contains'1 s t  -> e <> t  -> contains'1 (remove'0 s e) t)

  use Cdsat_Term_Term_Type as Term'0

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  function deep_model'6 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span92] match self with
      | Value'0.C_Bool b -> Value'1.C_Bool b
      | Value'0.C_Rat br -> Value'1.C_Rat (deep_model'6 br)
      end

  function shallow_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span93] deep_model'1 self

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  use Cdsat_Term_Sort_Type as Sort'0

  function deep_model'5 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'0.t_sort) : Sort'1.t_sort =
    [%#span94] match self with
      | Sort'0.C_Boolean -> Sort'1.C_Boolean
      | Sort'0.C_Rational -> Sort'1.C_Rational
      end

  function deep_model'4 (self : usize) : int =
    [%#span95] UIntSize.to_int self

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 193 4 193 44] (self : Term'0.t_term) : Term'1.t_term =
    [%#span96] match self with
      | Term'0.C_Variable v s -> Term'1.C_Variable (Var'0.C_Var (deep_model'4 v) (deep_model'5 s))
      | Term'0.C_Value v -> Term'1.C_Value (deep_model'1 v)
      | Term'0.C_Plus l r -> Term'1.C_Plus (deep_model'0 l) (deep_model'0 r)
      | Term'0.C_Eq l r -> Term'1.C_Eq (deep_model'0 l) (deep_model'0 r)
      | Term'0.C_Conj l r -> Term'1.C_Conj (deep_model'0 l) (deep_model'0 r)
      | Term'0.C_Disj l r -> Term'1.C_Disj (deep_model'0 l) (deep_model'0 r)
      | Term'0.C_Neg t -> Term'1.C_Neg (deep_model'0 t)
      | Term'0.C_Impl l r -> Term'1.C_Disj (Term'1.C_Neg (deep_model'0 l)) (deep_model'0 r)
      | Term'0.C_Times l r -> Term'1.C_Plus (Term'1.C_Value (Value'1.C_Rat (deep_model'6 l))) (deep_model'0 r)
      | Term'0.C_Lt l r -> Term'1.C_Eq (deep_model'0 l) (deep_model'0 r)
      end

  function shallow_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 179 4 179 50] (self : Term'0.t_term) : Term'1.t_term
   =
    [%#span97] deep_model'0 self

  function term_value'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 725 4 725 61] (self : Assignment'0.t_assignment) : (Term'1.t_term, Value'1.t_value)

   =
    [%#span98] (shallow_model'0 (Cdsat_Trail_Assignment_Type.assignment_term self), shallow_model'1 (Cdsat_Trail_Assignment_Type.assignment_val self))

  use seq.Seq

  use seq.Seq

  use Cdsat_Trail_Trail_Type as Cdsat_Trail_Trail_Type

  function index_logic'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 645 4 645 77] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : (Term'1.t_term, Value'1.t_value)

   =
    [%#span99] term_value'0 (Seq.get (shallow_model'4 (Seq.get (shallow_model'3 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)))) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)))

  use set.Fset

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 289 4 289 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex)

   =
    [%#span100] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)
    < Seq.length (shallow_model'3 (Cdsat_Trail_Trail_Type.trail_assignments self))
    /\ UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)
    < Seq.length (shallow_model'4 (Seq.get (shallow_model'3 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))))

  function abstract_justification'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 318 4 321 44] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) : Fset.fset (Term'1.t_term, Value'1.t_value)


  axiom abstract_justification'0_spec : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span101] forall i : int . 0
  <= i
  /\ i < Seq.length just  -> contains'0 self (Seq.get just i))
   -> ([%#span105] forall i : int . 0 <= i /\ i < Seq.length just
   -> contains'3 (abstract_justification'0 self just) (index_logic'1 self (Seq.get just i)))
  && ([%#span104] forall a : (Term'1.t_term, Value'1.t_value) . contains'3 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'1 just ix /\ a = index_logic'1 self ix))
  && ([%#span103] forall a : (Term'1.t_term, Value'1.t_value) . contains'3 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'0 self ix /\ a = index_logic'1 self ix))
  && ([%#span102] Fset.cardinal (abstract_justification'0 self just) <= Seq.length just)

  use prelude.prelude.Snapshot

  function consistent'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 242 4 242 56] (self : Model'0.t_model) (t : Term'1.t_term) (v : Value'1.t_value) (w : Value'1.t_value) : ()


  axiom consistent'0_spec : forall self : Model'0.t_model, t : Term'1.t_term, v : Value'1.t_value, w : Value'1.t_value . ([%#span107] satisfies'0 self (t, v))
   -> ([%#span108] satisfies'0 self (t, w))
   -> ([%#span109] v <> w)  -> ([%#span110] inv'0 self)  -> ([%#span111] false)

  use prelude.prelude.Snapshot

  use seq.Seq

  use seq.Seq

  function abs_just_cons'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 376 4 376 67] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) (elem : TrailIndex'0.t_trailindex) : ()


  axiom abs_just_cons'0_spec : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex), elem : TrailIndex'0.t_trailindex . ([%#span112] contains'0 self elem)
   -> ([%#span113] forall i : int . 0 <= i /\ i < Seq.length just  -> contains'0 self (Seq.get just i))
   -> ([%#span114] abstract_justification'0 self (Seq.(++) (Seq.singleton elem) just)
  = insert'0 (abstract_justification'0 self just) (index_logic'1 self elem))

  function abs_just_snoc'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 385 4 385 67] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) (elem : TrailIndex'0.t_trailindex) : ()


  axiom abs_just_snoc'0_spec : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex), elem : TrailIndex'0.t_trailindex . ([%#span116] contains'0 self elem)
   -> ([%#span117] forall i : int . 0 <= i /\ i < Seq.length just  -> contains'0 self (Seq.get just i))
   -> ([%#span118] abstract_justification'0 self (Seq.snoc just elem)
  = insert'0 (abstract_justification'0 self just) (index_logic'1 self elem))

  use Cdsat_Theory_Trail_Type as Trail'1

  function well_sorted'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 30 4 30 36] (self : Term'1.t_term) : bool =
    [%#span120] match self with
      | Term'1.C_Variable v -> true
      | Term'1.C_Value v -> true
      | Term'1.C_Plus l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'1 l = sort'1 r /\ sort'1 r = Sort'1.C_Rational
      | Term'1.C_Eq l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'1 l = sort'1 r
      | Term'1.C_Conj l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'1 l = sort'1 r /\ sort'1 r = Sort'1.C_Boolean
      | Term'1.C_Disj l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'1 l = sort'1 r /\ sort'1 r = Sort'1.C_Boolean
      | Term'1.C_Neg t -> well_sorted'0 t /\ sort'1 t = Sort'1.C_Boolean
      end

  use prelude.prelude.Int

  use Cdsat_Theory_Assign_Type as Assign'0

  predicate invariant'3 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span121] match self with
      | Assign'0.C_Decision t v -> sort'1 t = sort'2 v
      | Assign'0.C_Justified _ t v -> sort'1 t = sort'2 v /\ sort'1 t = Sort'1.C_Boolean
      | Assign'0.C_Input t v -> sort'1 t = sort'2 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'1.t_trail) =
    [%#span122] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'3 a
      end

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'1.t_trail) : int

  axiom len'0_spec : forall self : Trail'1.t_trail . [%#span123] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'1.t_trail) : int =
    [%#span126] match self with
      | Trail'1.C_Empty -> 0
      | Trail'1.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'1.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'1.t_trail . ([%#span125] level'0 self <= len'0 self)
  && ([%#span124] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'1.t_trail) =
    [%#span127] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'1.t_term, Value'1.t_value)

   =
    [%#span128] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span132] match self with
      | Trail'1.C_Empty -> Option'0.C_None
      | Trail'1.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'1.t_trail, d : (Term'1.t_term, Value'1.t_value) . ([%#span131] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'1 (let (a, _) = d in a) = sort'2 (let (_, a) = d in a)))
  && ([%#span130] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span129] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span133] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'0 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate contains'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value))

   =
    [%#span135] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'2_spec : forall self : Trail'1.t_trail, d : (Term'1.t_term, Value'1.t_value) . [%#span134] invariant_assign'0 self
   -> contains'2 self d = true  -> sort'1 (let (a, _) = d in a) = sort'2 (let (_, a) = d in a)

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'1.t_trail)
   =
    [%#span136] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a _ tl -> sound'0 tl /\ justified_sound'0 a
      end

  function find_justified'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 619 4 619 46] (self : Trail'1.t_trail) (kv : (Term'1.t_term, Value'1.t_value)) : ()


  axiom find_justified'0_spec : forall self : Trail'1.t_trail, kv : (Term'1.t_term, Value'1.t_value) . ([%#span137] sound'0 self)
   -> ([%#span138] contains'2 self kv)
   -> ([%#span139] forall l : int . forall a : Assign'0.t_assign . find'0 self kv = Option'0.C_Some (a, l)
   -> justified_sound'0 a)

  predicate is_decision'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 511 4 511 54] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value))

   =
    [%#span140] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Decision _ _, _) -> true
      | _ -> false
      end

  predicate is_input'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 521 4 521 51] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value))

   =
    [%#span141] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Input _ _, _) -> true
      | _ -> false
      end

  predicate entails'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 205 4 205 74] (self : Model'0.t_model) (j : Fset.fset (Term'1.t_term, Value'1.t_value)) (c : (Term'1.t_term, Value'1.t_value))

   =
    [%#span142] invariant'2 self  -> satisfy_set'0 self j  -> satisfies'0 self c

  predicate is_justified'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 501 4 501 55] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value))

   =
    [%#span143] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified _ _ _, _) -> true
      | _ -> false
      end

  predicate is_bool'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'1.t_value) =
    [%#span144] sort'2 self = Sort'1.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'1.t_value) : Value'1.t_value =
    [%#span147] match self with
      | Value'1.C_Bool b -> Value'1.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'1.t_value . ([%#span145] is_bool'1 self)
   -> ([%#span146] is_bool'1 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'1.t_trail) =
    [%#span148] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> let ap = to_pair'0 a in not contains'2 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'1 (let (_, a) = ap in a) then
        not contains'2 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'1.t_trail) =
    [%#span149] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'1.t_term, Value'1.t_value) . contains'3 j a  -> contains'2 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'1 [@inline:trivial] (self : Fset.fset (Term'1.t_term, Value'1.t_value)) (a : (Term'1.t_term, Value'1.t_value)) : Fset.fset (Term'1.t_term, Value'1.t_value)

   =
    [%#span150] Fset.remove a self

  use set.Fset

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value)) : int

   =
    [%#span153] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'1.t_trail, d : (Term'1.t_term, Value'1.t_value) . ([%#span151] invariant_nonneg'0 self)
   -> ([%#span152] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'1.t_trail) (s : Fset.fset (Term'1.t_term, Value'1.t_value)) : int


  axiom set_level'0_spec : forall self : Trail'1.t_trail, s : Fset.fset (Term'1.t_term, Value'1.t_value) . ([%#span154] invariant_nonneg'0 self)
   -> ([%#span159] set_level'0 self s <= level'0 self)
  && ([%#span158] set_level'0 self s >= 0)
  && ([%#span157] s = (Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value))  -> set_level'0 self s = 0)
  && ([%#span156] s <> (Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value))
   -> (exists i : (Term'1.t_term, Value'1.t_value) . contains'3 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span155] forall i : (Term'1.t_term, Value'1.t_value) . contains'3 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'1.t_trail) =
    [%#span161] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'1.t_trail) =
    [%#span162] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function justification'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 490 4 490 71] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value)) : Fset.fset (Term'1.t_term, Value'1.t_value)


  axiom justification'0_spec : forall self : Trail'1.t_trail, d : (Term'1.t_term, Value'1.t_value) . ([%#span163] invariant'1 self)
   -> ([%#span164] is_justified'0 self d)
   -> ([%#span165] sound'0 self)
   -> ([%#span168] is_decision'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value)))
  && ([%#span167] is_input'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value)))
  && ([%#span166] forall m : Model'0.t_model . inv'0 m  -> entails'0 m (justification'0 self d) d)

  use prelude.prelude.Snapshot

  predicate justified_correct'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 267 4 267 78] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) (j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

   =
    [%#span169] (forall i : TrailIndex'0.t_trailindex . contains'1 (shallow_model'2 j) i
     -> lt_log'0 i ix /\ contains'0 self i)
    /\ is_justified'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'1 self ix)
    /\ justification'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'1 self ix)
    = abstract_justification'0 self (shallow_model'2 j)

  use Cdsat_Trail_Reason_Type as Reason'0

  function index_logic'4 [@inline:trivial] (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (ix : usize) : Assignment'0.t_assignment

   =
    [%#span170] Seq.get (shallow_model'4 self) (UIntSize.to_int ix)

  function index_logic'3 [@inline:trivial] (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (ix : usize) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span170] Seq.get (shallow_model'3 self) (UIntSize.to_int ix)

  function reason'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 549 4 549 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : Reason'0.t_reason

   =
    [%#span171] Cdsat_Trail_Assignment_Type.assignment_reason (index_logic'4 (index_logic'3 (Cdsat_Trail_Trail_Type.trail_assignments self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)) (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix))

  predicate justified_is_justified'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 253 4 253 47] (self : Trail'0.t_trail) =
    [%#span172] forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> (let reason = reason'0 self ix in (reason = Reason'0.C_Decision)
    = is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'1 self ix)
    /\ (reason = Reason'0.C_Input)
    = is_input'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'1 self ix)
    /\ (forall j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . reason = Reason'0.C_Justified j
     -> justified_correct'0 self ix j))

  function index_logic'0 [@inline:trivial] (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (ix : int) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span173] Seq.get (shallow_model'3 self) ix

  function level_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 180 4 180 33] (self : TrailIndex'0.t_trailindex) : int
   =
    [%#span174] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 self)

  predicate abstract_relation'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 277 4 277 42] (self : Trail'0.t_trail) =
    [%#span175] (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> contains'2 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'1 self ix))
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'1 self ix)
    = UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))
    /\ (forall a : (Term'1.t_term, Value'1.t_value) . contains'2 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
     -> (exists ix : TrailIndex'0.t_trailindex . contains'0 self ix
    /\ level_log'0 ix = level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
    /\ index_logic'1 self ix = a))

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 237 4 237 34] (self : Trail'0.t_trail) =
    [%#span176] abstract_relation'0 self
    /\ sound'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    /\ invariant'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    /\ level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    = UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self)
    /\ UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self)
    = Seq.length (shallow_model'3 (Cdsat_Trail_Trail_Type.trail_assignments self)) - 1
    /\ (forall i : int . 0 <= i /\ i < Seq.length (shallow_model'3 (Cdsat_Trail_Trail_Type.trail_assignments self))
     -> Seq.length (shallow_model'4 (index_logic'0 (Cdsat_Trail_Trail_Type.trail_assignments self) i)) > 0)
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix) = 0)
    = is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'1 self ix))
    /\ (forall j : TrailIndex'0.t_trailindex . forall i : TrailIndex'0.t_trailindex . contains'0 self i
     -> contains'0 self j  -> i <> j  -> index_logic'1 self i <> index_logic'1 self j)
    /\ justified_is_justified'0 self
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> well_sorted'0 (let (a, _) = index_logic'1 self ix in a))

  function abstract_justification_insert'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 904 0 904 88] (t : Trail'0.t_trail) (x : TrailIndex'0.t_trailindex) (s : Seq.seq (TrailIndex'0.t_trailindex)) : ()


  axiom abstract_justification_insert'0_spec : forall t : Trail'0.t_trail, x : TrailIndex'0.t_trailindex, s : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span177] invariant'0 t)
   -> ([%#span178] contains'0 t x)
   -> ([%#span179] forall i : TrailIndex'0.t_trailindex . contains'1 s i  -> contains'0 t i)
   -> ([%#span180] abstract_justification'0 t (Seq.snoc s x)
  = insert'0 (abstract_justification'0 t s) (index_logic'1 t x))

  function shallow_model'7 (self : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) : Seq.seq (TrailIndex'0.t_trailindex)

   =
    [%#span182] shallow_model'2 self.current

  let rec push'0 (self:borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) (value:TrailIndex'0.t_trailindex) (return'  (ret:()))= {[@expl:precondition] [%#span184] inv'3 value}
    {[@expl:precondition] [%#span183] inv'2 self}
    any
    [ return' (result:())-> {[%#span185] shallow_model'2 self.final = Seq.snoc (shallow_model'7 self) value}
      (! return' {result}) ]


  use Cdsat_Concrete_ExtendResult_Type as ExtendResult'0

  predicate resolve'4 (self : borrowed (Trail'0.t_trail)) =
    [%#span186] self.final = self.current

  predicate resolve'3 (self : borrowed (BoolTheory'0.t_booltheory)) =
    [%#span186] self.final = self.current

  use Cdsat_Trail_IndexIterator_Type as Cdsat_Trail_IndexIterator_Type

  predicate resolve'2 [#"/Users/xavier/Code/cdsat/src/trail.rs" 668 4 668 28] (self : IndexIterator'0.t_indexiterator) =
    [%#span187] resolve'4 (Cdsat_Trail_IndexIterator_Type.indexiterator_trail self)

  function deep_model'3 (self : Value'0.t_value) : Value'1.t_value =
    [%#span188] deep_model'1 self

  let rec ne'0 (self:Value'0.t_value) (other:Value'0.t_value) (return'  (ret:bool))= {[@expl:precondition] [%#span190] inv'1 other}
    {[@expl:precondition] [%#span189] inv'1 self}
    any
    [ return' (result:bool)-> {[%#span191] result = (deep_model'3 self <> deep_model'3 other)} (! return' {result}) ]


  function deep_model'2 (self : Sort'0.t_sort) : Sort'1.t_sort =
    [%#span188] deep_model'5 self

  let rec eq'0 (self:Sort'0.t_sort) (rhs:Sort'0.t_sort) (return'  (ret:bool))= any
    [ return' (result:bool)-> {[%#span192] result = (deep_model'2 self = deep_model'2 rhs)} (! return' {result}) ]


  function shallow_model'5 (self : Term'0.t_term) : Term'1.t_term =
    [%#span193] shallow_model'0 self

  function shallow_model'6 [#"/Users/xavier/Code/cdsat/src/term.rs" 27 4 27 50] (self : Sort'0.t_sort) : Sort'1.t_sort =
    [%#span194] deep_model'5 self

  let rec sort'0 (self:Term'0.t_term) (return'  (ret:Sort'0.t_sort))= any
    [ return' (result:Sort'0.t_sort)-> {[%#span195] shallow_model'6 result = sort'1 (shallow_model'5 self)}
      (! return' {result}) ]


  predicate acceptable'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 397 4 397 56] (self : Trail'1.t_trail) (t : Term'1.t_term) (val' : Value'1.t_value)

   =
    [%#span196] not contains'2 self (t, val')
    /\ sort'1 t = sort'2 val' /\ (is_bool'1 val'  -> not contains'2 self (t, negate'0 val'))

  predicate resolve'6 (self : TrailIndex'0.t_trailindex) =
    [%#span197] true

  function index_logic'2 [@inline:trivial] (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) (ix : int) : TrailIndex'0.t_trailindex

   =
    [%#span173] Seq.get (shallow_model'2 self) ix

  predicate resolve'1 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span198] forall i : int . 0 <= i /\ i < Seq.length (shallow_model'2 self)  -> resolve'6 (index_logic'2 self i)

  use Core_Result_Result_Type as Result'0

  predicate resolve'5 (self : Result'0.t_result (Value'0.t_value) (Term'0.t_term)) =
    [%#span197] true

  predicate resolve'0 (self : (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global), Result'0.t_result (Value'0.t_value) (Term'0.t_term)))

   =
    [%#span199] resolve'1 (let (a, _) = self in a) /\ resolve'5 (let (_, a) = self in a)

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 59 4 59 32] (self : Term'1.t_term) =
    [%#span200] sort'1 self = Sort'1.C_Boolean

  let rec eval'0 (self:borrowed (BoolTheory'0.t_booltheory)) (tl:Trail'0.t_trail) (tm:Term'0.t_term) (return'  (ret:(Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global), Result'0.t_result (Value'0.t_value) (Term'0.t_term))))= {[@expl:precondition] [%#span203] is_bool'0 (shallow_model'5 tm)}
    {[@expl:precondition] [%#span202] well_sorted'0 (shallow_model'5 tm)}
    {[@expl:precondition] [%#span201] invariant'0 tl}
    any
    [ return' (result:(Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global), Result'0.t_result (Value'0.t_value) (Term'0.t_term)))-> {[%#span205] match let (_, a) = result in a with
        | Result'0.C_Ok v -> is_bool'1 (shallow_model'1 v)
        /\ (forall m : Model'0.t_model . inv'0 m
         -> satisfy_set'0 m (abstract_justification'0 tl (shallow_model'2 (let (a, _) = result in a)))
         -> satisfies'0 m (shallow_model'5 tm, shallow_model'1 v))
        | Result'0.C_Err t -> acceptable'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost tl)) (shallow_model'0 t) (shallow_model'1 (Value'0.C_Bool true))
        /\ well_sorted'0 (shallow_model'0 t)
        end}
      {[%#span204] forall ix : TrailIndex'0.t_trailindex . contains'1 (shallow_model'2 (let (a, _) = result in a)) ix
       -> contains'0 tl ix}
      (! return' {result}) ]


  let rec is_relevant'0 (self:BoolTheory'0.t_booltheory) (a:Assignment'0.t_assignment) (return'  (ret:bool))= any
    [ return' (result:bool)-> {[%#span206] result
       -> is_bool'0 (shallow_model'0 (Cdsat_Trail_Assignment_Type.assignment_term a))}
      (! return' {result}) ]


  let rec index'0 (self:Trail'0.t_trail) (index:TrailIndex'0.t_trailindex) (return'  (ret:Assignment'0.t_assignment))= {[@expl:precondition] [%#span207] contains'0 self index}
    any
    [ return' (result:Assignment'0.t_assignment)-> {[%#span208] result
      = Seq.get (shallow_model'4 (Seq.get (shallow_model'3 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 index)))) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 index))}
      (! return' {result}) ]


  let rec trail'0 (self:IndexIterator'0.t_indexiterator) (return'  (ret:Trail'0.t_trail))= any
    [ return' (result:Trail'0.t_trail)-> {[%#span209] result
      = (Cdsat_Trail_IndexIterator_Type.indexiterator_trail self).current}
      (! return' {result}) ]


  let rec next'0 (self:borrowed (IndexIterator'0.t_indexiterator)) (return'  (ret:Option'0.t_option (TrailIndex'0.t_trailindex)))= any
    [ return' (result:Option'0.t_option (TrailIndex'0.t_trailindex))-> {[%#span211] match result with
        | Option'0.C_Some ix -> contains'0 (Cdsat_Trail_IndexIterator_Type.indexiterator_trail self.current).current ix
        | Option'0.C_None -> true
        end}
      {[%#span210] Cdsat_Trail_IndexIterator_Type.indexiterator_trail self.final
      = Cdsat_Trail_IndexIterator_Type.indexiterator_trail self.current}
      (! return' {result}) ]


  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  predicate satisfied_by'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 674 4 674 47] (self : Trail'1.t_trail) (m : Model'0.t_model)

   =
    [%#span212] forall a : (Term'1.t_term, Value'1.t_value) . contains'2 self a  -> satisfies'0 m a

  function count_bounds'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 740 4 740 35] (self : Trail'1.t_trail) : ()

  axiom count_bounds'0_spec : forall self : Trail'1.t_trail . ([%#span213] invariant'1 self)
   -> ([%#span214] forall a : (Term'1.t_term, Value'1.t_value) . contains'2 self a
   -> level_of'0 self a <= level'0 self)

  function restrict'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 558 4 558 45] (self : Trail'1.t_trail) (level : int) : Trail'1.t_trail


  axiom restrict'0_spec : forall self : Trail'1.t_trail, level : int . ([%#span215] invariant'1 self)
   -> ([%#span216] level >= 0)
   -> ([%#span224] len'0 (restrict'0 self level) <= len'0 self)
  && ([%#span223] (level'0 self >= level  -> level'0 (restrict'0 self level) = level)
  /\ (level'0 self < level  -> level'0 (restrict'0 self level) = level'0 self))
  && ([%#span222] forall m : Model'0.t_model . inv'0 m
   -> satisfied_by'0 self m  -> satisfied_by'0 (restrict'0 self level) m)
  && ([%#span221] forall a : (Term'1.t_term, Value'1.t_value) . not contains'2 self a
   -> not contains'2 (restrict'0 self level) a)
  && ([%#span220] level >= level'0 self  -> restrict'0 self level = self)
  && ([%#span219] forall a : (Term'1.t_term, Value'1.t_value) . contains'2 (restrict'0 self level) a
   -> contains'2 self a
  /\ level_of'0 (restrict'0 self level) a <= level /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span218] forall a : (Term'1.t_term, Value'1.t_value) . contains'2 self a
   -> level_of'0 self a <= level
   -> contains'2 (restrict'0 self level) a /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span217] invariant'1 (restrict'0 self level))

  predicate unsat'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 681 4 681 30] (self : Trail'1.t_trail) =
    [%#span225] forall m : Model'0.t_model . inv'0 m  -> satisfied_by'0 (restrict'0 self 0) m  -> false

  predicate impls'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 694 4 694 41] (self : Trail'1.t_trail) (rhs : Trail'1.t_trail)

   =
    [%#span227] forall m : Model'0.t_model . inv'0 m
     -> satisfied_by'0 (restrict'0 self 0) m  -> satisfied_by'0 (restrict'0 rhs 0) m

  axiom impls'0_spec : forall self : Trail'1.t_trail, rhs : Trail'1.t_trail . [%#span226] impls'0 self rhs
   -> unsat'0 rhs  -> unsat'0 self

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  let rec indices'0 (self:borrowed (Trail'0.t_trail)) (return'  (ret:IndexIterator'0.t_indexiterator))= any
    [ return' (result:IndexIterator'0.t_indexiterator)-> {[%#span228] Cdsat_Trail_IndexIterator_Type.indexiterator_trail result
      = self}
      (! return' {result}) ]


  use prelude.prelude.Snapshot

  let rec promoted0 (return'  (ret:Sort'0.t_sort))= bb0
    [ bb0 = s0 [ s0 =  [ &_1 <- Sort'0.C_Boolean ] s1 | s1 =  [ &_0 <- _1 ] s2 | s2 = return' {_0} ]  ]
     [ & _0 : Sort'0.t_sort = any_l () | & _1 : Sort'0.t_sort = any_l () ]
    [ return' (result:Sort'0.t_sort)-> return' {result} ]


  let rec extend (self:borrowed (BoolTheory'0.t_booltheory)) (tl:borrowed (Trail'0.t_trail)) (return'  (ret:ExtendResult'0.t_extendresult))= {[%#sbool13] invariant'0 tl.current}
    (! bb0
    [ bb0 = s0 [ s0 =  [ &old_tl <- [%#sbool0] Snapshot.new tl ] s1 | s1 = bb1 ]
    | bb1 = s0
      [ s0 = Borrow.borrow_final <Trail'0.t_trail> {tl.current} {Borrow.get_id tl}
          (fun (_ret':borrowed (Trail'0.t_trail)) ->
             [ &_11 <- _ret' ]
             [ &tl <- { tl with current = _11.final ; } ]
            s1)
      | s1 = indices'0 {_11} (fun (_ret':IndexIterator'0.t_indexiterator) ->  [ &iter <- _ret' ] s2)
      | s2 = bb2 ]

    | bb2 = s0 [ s0 =  [ &old_iter <- [%#sbool1] Snapshot.new iter ] s1 | s1 = bb3 ]
    | bb3 = s0 [ s0 =  [ &old_4_0 <- Snapshot.new self ] s1 | s1 = bb4 ]
    | bb4 = bb4
      [ bb4 = {[@expl:loop invariant] (Snapshot.inner old_4_0).final = self.final}
        {[@expl:loop invariant] [%#sbool3] (Cdsat_Trail_IndexIterator_Type.indexiterator_trail iter).final
        = (Cdsat_Trail_IndexIterator_Type.indexiterator_trail (Snapshot.inner old_iter)).final}
        {[@expl:loop invariant] [%#sbool2] invariant'0 (Cdsat_Trail_IndexIterator_Type.indexiterator_trail iter).current}
        {[@expl:loop invariant] [%#sbool2] impls'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost (Snapshot.inner old_tl).current)) (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost (Cdsat_Trail_IndexIterator_Type.indexiterator_trail iter).current))}
        {[@expl:loop invariant] [%#sbool2] forall i : TrailIndex'0.t_trailindex . contains'0 (Snapshot.inner old_tl).current i
         -> contains'0 (Cdsat_Trail_IndexIterator_Type.indexiterator_trail iter).current i}
        (! s0) [ s0 = bb5 ]
        [ bb5 = s0
          [ s0 = Borrow.borrow_mut <IndexIterator'0.t_indexiterator> {iter}
              (fun (_ret':borrowed (IndexIterator'0.t_indexiterator)) ->  [ &_21 <- _ret' ]  [ &iter <- _21.final ] s1)
          | s1 = next'0 {_21} (fun (_ret':Option'0.t_option (TrailIndex'0.t_trailindex)) ->  [ &_20 <- _ret' ] s2)
          | s2 = bb6 ]

        | bb6 = any
          [ br0 -> {_20 = Option'0.C_None } (! bb40)
          | br1 (a:TrailIndex'0.t_trailindex)-> {_20 = Option'0.C_Some a} (! bb7) ]

        | bb7 = bb8
        | bb8 = s0
          [ s0 = Option'0.some <TrailIndex'0.t_trailindex> {_20}
              (fun (r0'0:TrailIndex'0.t_trailindex) ->  [ &ix <- r0'0 ] s1)
          | s1 = trail'0 {iter} (fun (_ret':Trail'0.t_trail) ->  [ &tl1 <- _ret' ] s2)
          | s2 = bb9 ]

        | bb9 = s0
          [ s0 = index'0 {tl1} {ix} (fun (_ret':Assignment'0.t_assignment) ->  [ &_27 <- _ret' ] s1) | s1 = bb10 ]

        | bb10 = s0
          [ s0 =  [ &assign <- _27 ] s1
          | s1 = is_relevant'0 {self.current} {assign} (fun (_ret':bool) ->  [ &_31 <- _ret' ] s2)
          | s2 = bb11 ]

        | bb11 = any [ br0 -> {_31 = false} (! bb13) | br1 -> {_31} (! bb12) ]
        | bb12 = s0
          [ s0 = {[@expl:assertion] [%#sbool4] well_sorted'0 (shallow_model'0 (Cdsat_Trail_Assignment_Type.assignment_term assign))}
            s1
          | s1 = Borrow.borrow_mut <BoolTheory'0.t_booltheory> {self.current}
              (fun (_ret':borrowed (BoolTheory'0.t_booltheory)) ->
                 [ &_40 <- _ret' ]
                 [ &self <- { self with current = _40.final ; } ]
                s2)
          | s2 = Assignment'0.t_assignment {assign}
              (fun (rterm'0:Term'0.t_term) (rval'0:Value'0.t_value) (rreason'0:Reason'0.t_reason) (rlevel'0:usize) ->
                 [ &_43 <- rterm'0 ]
                s3)
          | s3 = eval'0 {_40} {tl1} {_43}
              (fun (_ret':(Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global), Result'0.t_result (Value'0.t_value) (Term'0.t_term))) ->
                 [ &_39 <- _ret' ]
                s4)
          | s4 = bb14 ]

        | bb14 = s0
          [ s0 =  [ &just <- let (r'0, _) = _39 in r'0 ]
            (any
            [ any_ (_any:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> (!
              [ &_39 <- let (_, l'2) = _39 in (_any, l'2) ]

              s1) ]
            )
          | s1 =  [ &res <- let (_, r'1) = _39 in r'1 ]
            (any
            [ any_ (_any:Result'0.t_result (Value'0.t_value) (Term'0.t_term))-> (!
              [ &_39 <- let (l'4, _) = _39 in (l'4, _any) ]

              s2) ]
            )
          | s2 = -{resolve'0 _39}- s3
          | s3 = bb15 ]

        | bb15 = any
          [ br0 (a:Value'0.t_value)-> {res = Result'0.C_Ok a} (! bb18)
          | br1 (a:Term'0.t_term)-> {res = Result'0.C_Err a} (! bb17) ]

        | bb17 = bb19
        | bb19 = s0
          [ s0 = -{resolve'1 just}- s1
          | s1 = Result'0.err <Value'0.t_value> <Term'0.t_term> {res}
              (fun (r0'0:Term'0.t_term) ->
                 [ &dec <- r0'0 ]
                (any
                [ any_ (_any:Term'0.t_term)-> (! Result'0.err <Value'0.t_value> <Term'0.t_term> {res}
                    (fun (l_0'0:Term'0.t_term) ->  [ &res <- Result'0.C_Err _any ] s2)) ]
                ))
          | s2 = {[@expl:assertion] [%#sbool5] acceptable'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost tl1)) (shallow_model'0 dec) (shallow_model'1 (Value'0.C_Bool true))}
            s3
          | s3 = bb20 ]

        | bb20 = s0 [ s0 = sort'0 {dec} (fun (_ret':Sort'0.t_sort) ->  [ &_50 <- _ret' ] s1) | s1 = bb21 ]
        | bb21 = s0
          [ s0 = promoted0 (fun (pr0:Sort'0.t_sort) ->  [ &_79 <- pr0 ] s1)
          | s1 = eq'0 {_50} {_79} (fun (_ret':bool) ->  [ &_48 <- _ret' ] s2)
          | s2 = bb22 ]

        | bb22 = any [ br0 -> {_48 = false} (! bb26) | br1 -> {_48} (! bb23) ]
        | bb26 = bb27
        | bb27 = bb37
        | bb18 = s0
          [ s0 = Result'0.ok <Value'0.t_value> <Term'0.t_term> {res}
              (fun (r0'0:Value'0.t_value) ->
                 [ &res1 <- r0'0 ]
                (any
                [ any_ (_any:Value'0.t_value)-> (! Result'0.ok <Value'0.t_value> <Term'0.t_term> {res}
                    (fun (l_0'0:Value'0.t_value) ->  [ &res <- Result'0.C_Ok _any ] s1)) ]
                ))
          | s1 = Assignment'0.t_assignment {assign}
              (fun (rterm'0:Term'0.t_term) (rval'0:Value'0.t_value) (rreason'0:Reason'0.t_reason) (rlevel'0:usize) ->
                ne'0 {res1} {rval'0} (fun (_ret':bool) ->  [ &_58 <- _ret' ] s2))
          | s2 = bb28 ]

        | bb28 = any [ br0 -> {_58 = false} (! bb35) | br1 -> {_58} (! bb29) ]
        | bb35 = s0 [ s0 = -{resolve'1 just}- s1 | s1 = bb36 ]
        | bb36 = bb37
        | bb37 = bb38
        | bb38 = bb39
        | bb39 = bb4
        | bb13 = bb4 ]
         ]

    | bb40 = s0
      [ s0 = -{resolve'2 iter}- s1
      | s1 = -{resolve'3 self}- s2
      | s2 = -{resolve'4 tl}- s3
      | s3 = {[@expl:assertion] [%#sbool6] (Cdsat_Trail_IndexIterator_Type.indexiterator_trail iter).final
        = (Snapshot.inner old_tl).final}
        s4
      | s4 =  [ &_0 <- ExtendResult'0.C_Satisfied ] s5
      | s5 = bb46 ]

    | bb16 = s0
      [ s0 = -{resolve'1 just}- s1
      | s1 = -{resolve'3 self}- s2
      | s2 = -{resolve'2 iter}- s3
      | s3 = -{resolve'4 tl}- s4
      | s4 = {[%#sbool7] false} any ]

    | bb23 = s0
      [ s0 = -{resolve'2 iter}- s1
      | s1 = -{resolve'3 self}- s2
      | s2 = -{resolve'4 tl}- s3
      | s3 =  [ &_56 <- Value'0.C_Bool ([%#sbool8] true) ] s4
      | s4 =  [ &_0 <- ExtendResult'0.C_Decision dec _56 ]
        (any
        [ any_ (_any:Term'0.t_term)-> (!  [ &dec <- _any ]
          (any [ any_ (_any:Value'0.t_value)-> (!  [ &_56 <- _any ] s5) ] )) ]
        )
      | s5 = bb24 ]

    | bb24 = bb25
    | bb25 = bb42
    | bb42 = bb43
    | bb29 = s0
      [ s0 = -{resolve'2 iter}- s1
      | s1 = -{resolve'3 self}- s2
      | s2 = -{resolve'4 tl}- s3
      | s3 = Borrow.borrow_mut <Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)> {just}
          (fun (_ret':borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) ->
             [ &_63 <- _ret' ]
             [ &just <- _63.final ]
            s4)
      | s4 = push'0 {_63} {ix} (fun (_ret':()) ->  [ &_62 <- _ret' ] s5)
      | s5 = bb30 ]

    | bb30 = s0 [ s0 =  [ &_65 <- [%#sbool9] Snapshot.new () ] s1 | s1 = bb31 ]
    | bb31 = s0 [ s0 =  [ &_67 <- [%#sbool10] Snapshot.new () ] s1 | s1 = bb32 ]
    | bb32 = s0
      [ s0 = {[@expl:assertion] [%#sbool11] (Cdsat_Trail_IndexIterator_Type.indexiterator_trail iter).final
        = (Snapshot.inner old_tl).final}
        s1
      | s1 = {[@expl:assertion] [%#sbool12] forall m : Model'0.t_model . inv'0 m
         -> satisfy_set'0 m (abstract_justification'0 tl1 (shallow_model'2 just))  -> false}
        s2
      | s2 = bb33 ]

    | bb33 = s0
      [ s0 =  [ &_0 <- ExtendResult'0.C_Conflict just ]
        (any [ any_ (_any:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> (!  [ &just <- _any ] s1) ] )
      | s1 = bb34 ]

    | bb34 = bb41
    | bb41 = bb43
    | bb43 = bb44
    | bb44 = bb45
    | bb45 = bb46
    | bb46 = return' {_0} ]
    )
    [ & _0 : ExtendResult'0.t_extendresult = any_l ()
    | & self : borrowed (BoolTheory'0.t_booltheory) = self
    | & tl : borrowed (Trail'0.t_trail) = tl
    | & old_tl : Snapshot.snap_ty (borrowed (Trail'0.t_trail)) = any_l ()
    | & iter : IndexIterator'0.t_indexiterator = any_l ()
    | & _11 : borrowed (Trail'0.t_trail) = any_l ()
    | & old_iter : Snapshot.snap_ty (IndexIterator'0.t_indexiterator) = any_l ()
    | & _20 : Option'0.t_option (TrailIndex'0.t_trailindex) = any_l ()
    | & _21 : borrowed (IndexIterator'0.t_indexiterator) = any_l ()
    | & ix : TrailIndex'0.t_trailindex = any_l ()
    | & tl1 : Trail'0.t_trail = any_l ()
    | & assign : Assignment'0.t_assignment = any_l ()
    | & _27 : Assignment'0.t_assignment = any_l ()
    | & _31 : bool = any_l ()
    | & just : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) = any_l ()
    | & res : Result'0.t_result (Value'0.t_value) (Term'0.t_term) = any_l ()
    | & _39 : (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global), Result'0.t_result (Value'0.t_value) (Term'0.t_term)) = any_l ()
    | & _40 : borrowed (BoolTheory'0.t_booltheory) = any_l ()
    | & _43 : Term'0.t_term = any_l ()
    | & dec : Term'0.t_term = any_l ()
    | & _48 : bool = any_l ()
    | & _50 : Sort'0.t_sort = any_l ()
    | & _56 : Value'0.t_value = any_l ()
    | & res1 : Value'0.t_value = any_l ()
    | & _58 : bool = any_l ()
    | & _62 : () = any_l ()
    | & _63 : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) = any_l ()
    | & _65 : Snapshot.snap_ty () = any_l ()
    | & _67 : Snapshot.snap_ty () = any_l ()
    | & _79 : Sort'0.t_sort = any_l ()
    | & old_4_0 : Snapshot.snap_ty (borrowed (BoolTheory'0.t_booltheory)) = any_l () ]

    [ return' (result:ExtendResult'0.t_extendresult)-> {[@expl:postcondition] [%#sbool15] impls'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost tl.current)) (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost tl.final))}
      {[@expl:postcondition] [%#sbool14] match result with
        | ExtendResult'0.C_Satisfied -> true
        | ExtendResult'0.C_Decision t v -> acceptable'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost tl.final)) (shallow_model'0 t) (shallow_model'1 v)
        /\ well_sorted'0 (shallow_model'0 t)
        | ExtendResult'0.C_Conflict c -> let conflict = abstract_justification'0 tl.final (shallow_model'2 c) in Seq.length (shallow_model'2 c)
        > 0
        /\ (forall t : TrailIndex'0.t_trailindex . contains'1 (shallow_model'2 c) t  -> contains'0 tl.final t)
        /\ (forall m : Model'0.t_model . inv'0 m  -> satisfy_set'0 m conflict  -> false)
        end}
      {[@expl:postcondition] [%#sbool13] invariant'0 tl.final}
      (! return' {result}) ]

end
module Cdsat_Concrete_TheoryState_Type
  type t_theorystate  =
    | C_Sat
    | C_Decision
    | C_Unknown

  function any_l (_ : 'b) : 'a

  let rec sat (input:t_theorystate) (ret  )= any
    [ good -> {C_Sat  = input} (! ret) | bad -> {C_Sat  <> input} {false} any ]


  let rec decision (input:t_theorystate) (ret  )= any
    [ good -> {C_Decision  = input} (! ret) | bad -> {C_Decision  <> input} {false} any ]


  let rec unknown (input:t_theorystate) (ret  )= any
    [ good -> {C_Unknown  = input} (! ret) | bad -> {C_Unknown  <> input} {false} any ]

end
module Cdsat_Concrete_TheoryStateDeepModel_Type
  type t_theorystatedeepmodel  =
    | C_Sat
    | C_Decision
    | C_Unknown

  function any_l (_ : 'b) : 'a

  let rec sat (input:t_theorystatedeepmodel) (ret  )= any
    [ good -> {C_Sat  = input} (! ret) | bad -> {C_Sat  <> input} {false} any ]


  let rec decision (input:t_theorystatedeepmodel) (ret  )= any
    [ good -> {C_Decision  = input} (! ret) | bad -> {C_Decision  <> input} {false} any ]


  let rec unknown (input:t_theorystatedeepmodel) (ret  )= any
    [ good -> {C_Unknown  = input} (! ret) | bad -> {C_Unknown  <> input} {false} any ]

end
module Cdsat_Concrete_Impl1_Eq
  let%span sconcrete0 = "/Users/xavier/Code/cdsat/src/concrete.rs" 21 9 21 18

  let%span span1 = "/Users/xavier/Code/cdsat/src/concrete.rs" 21 24 21 33

  let%span span2 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 81 8 81 28

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 46 8 46 12

  let%span span4 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 17 8 17 60

  use Cdsat_Concrete_TheoryStateDeepModel_Type as TheoryStateDeepModel'0

  use Cdsat_Concrete_TheoryState_Type as TheoryState'0

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/concrete.rs" 21 24 21 33] (self : TheoryState'0.t_theorystate) : TheoryStateDeepModel'0.t_theorystatedeepmodel

   =
    [%#span1] match self with
      | TheoryState'0.C_Sat -> TheoryStateDeepModel'0.C_Sat
      | TheoryState'0.C_Decision -> TheoryStateDeepModel'0.C_Decision
      | TheoryState'0.C_Unknown -> TheoryStateDeepModel'0.C_Unknown
      end

  use prelude.prelude.Borrow

  function deep_model'0 (self : TheoryState'0.t_theorystate) : TheoryStateDeepModel'0.t_theorystatedeepmodel =
    [%#span2] deep_model'1 self

  use prelude.prelude.Intrinsic

  predicate resolve'1 (self : TheoryState'0.t_theorystate) =
    [%#span3] true

  predicate resolve'0 (self : (TheoryState'0.t_theorystate, TheoryState'0.t_theorystate)) =
    [%#span4] resolve'1 (let (a, _) = self in a) /\ resolve'1 (let (_, a) = self in a)

  let rec eq (self:TheoryState'0.t_theorystate) (rhs:TheoryState'0.t_theorystate) (return'  (ret:bool))= (! bb0
    [ bb0 = s0
      [ s0 =  [ &_4 <- (self, rhs) ] s1
      | s1 = any
        [ br0 -> {(let (r'0, _) = _4 in r'0) = TheoryState'0.C_Sat } (! bb2)
        | br1 -> {(let (r'0, _) = _4 in r'0) = TheoryState'0.C_Decision } (! bb4)
        | br2 -> {(let (r'0, _) = _4 in r'0) = TheoryState'0.C_Unknown } (! bb6) ]
         ]

    | bb12 = s0 [ s0 = -{resolve'0 _4}- s1 | s1 = bb1 ]
    | bb6 = s0
      [ s0 = -{resolve'0 _4}- s1
      | s1 = any
        [ br0 -> {(let (_, r'0) = _4 in r'0) = TheoryState'0.C_Sat } (! bb1)
        | br1 -> {(let (_, r'0) = _4 in r'0) = TheoryState'0.C_Decision } (! bb1)
        | br2 -> {(let (_, r'0) = _4 in r'0) = TheoryState'0.C_Unknown } (! bb7) ]
         ]

    | bb7 = bb10
    | bb10 = s0 [ s0 =  [ &_0 <- [%#sconcrete0] true ] s1 | s1 = bb11 ]
    | bb4 = any
      [ br0 -> {(let (_, r'0) = _4 in r'0) = TheoryState'0.C_Sat } (! bb14)
      | br1 -> {(let (_, r'0) = _4 in r'0) = TheoryState'0.C_Decision } (! bb5)
      | br2 -> {(let (_, r'0) = _4 in r'0) = TheoryState'0.C_Unknown } (! bb14) ]

    | bb14 = s0 [ s0 = -{resolve'0 _4}- s1 | s1 = bb1 ]
    | bb5 = bb9
    | bb9 = s0 [ s0 = -{resolve'0 _4}- s1 | s1 =  [ &_0 <- [%#sconcrete0] true ] s2 | s2 = bb11 ]
    | bb2 = any
      [ br0 -> {(let (_, r'0) = _4 in r'0) = TheoryState'0.C_Sat } (! bb3)
      | br1 -> {(let (_, r'0) = _4 in r'0) = TheoryState'0.C_Decision } (! bb13)
      | br2 -> {(let (_, r'0) = _4 in r'0) = TheoryState'0.C_Unknown } (! bb13) ]

    | bb13 = s0 [ s0 = -{resolve'0 _4}- s1 | s1 = bb1 ]
    | bb1 = s0 [ s0 =  [ &_0 <- [%#sconcrete0] false ] s1 | s1 = bb11 ]
    | bb3 = bb8
    | bb8 = s0 [ s0 = -{resolve'0 _4}- s1 | s1 =  [ &_0 <- [%#sconcrete0] true ] s2 | s2 = bb11 ]
    | bb11 = return' {_0} ]
    )
    [ & _0 : bool = any_l ()
    | & self : TheoryState'0.t_theorystate = self
    | & rhs : TheoryState'0.t_theorystate = rhs
    | & _4 : (TheoryState'0.t_theorystate, TheoryState'0.t_theorystate) = any_l () ]

    [ return' (result:bool)-> {[@expl:postcondition] [%#sconcrete0] result = (deep_model'0 self = deep_model'0 rhs)}
      (! return' {result}) ]

end
module Cdsat_Concrete_Impl2_AssertReceiverIsTotalEq
  use Cdsat_Concrete_TheoryState_Type as TheoryState'0

  use prelude.prelude.Borrow

  use prelude.prelude.Intrinsic

  let rec assert_receiver_is_total_eq (self:TheoryState'0.t_theorystate) (return'  (ret:()))= (! bb0
    [ bb0 = return' {_0} ]
    ) [ & _0 : () = any_l () ]  [ return' (result:())-> (! return' {result}) ]
end
module Cdsat_Lra_LraTheory_Type
  type t_lratheory  =
    | C_LRATheory

  function any_l (_ : 'b) : 'a

  let rec t_lratheory (input:t_lratheory) (ret  )= any
    [ good -> {C_LRATheory  = input} (! ret) | bad -> {C_LRATheory  <> input} {false} any ]

end
module Cdsat_Concrete_Solver_Type
  use Cdsat_Lra_LraTheory_Type as LRATheory'0

  use Cdsat_Concrete_TheoryState_Type as TheoryState'0

  use Cdsat_Bool_BoolTheory_Type as BoolTheory'0

  type t_solver  =
    | C_Solver (BoolTheory'0.t_booltheory) (TheoryState'0.t_theorystate) (LRATheory'0.t_lratheory) (TheoryState'0.t_theorystate)

  function any_l (_ : 'b) : 'a

  let rec t_solver (input:t_solver) (ret  (bool_th:BoolTheory'0.t_booltheory) (bool_state:TheoryState'0.t_theorystate) (lra_th:LRATheory'0.t_lratheory) (lra_state:TheoryState'0.t_theorystate))= any
    [ good (bool_th:BoolTheory'0.t_booltheory) (bool_state:TheoryState'0.t_theorystate) (lra_th:LRATheory'0.t_lratheory) (lra_state:TheoryState'0.t_theorystate)-> {C_Solver bool_th bool_state lra_th lra_state
      = input}
      (! ret {bool_th} {bool_state} {lra_th} {lra_state})
    | bad (bool_th:BoolTheory'0.t_booltheory) (bool_state:TheoryState'0.t_theorystate) (lra_th:LRATheory'0.t_lratheory) (lra_state:TheoryState'0.t_theorystate)-> {C_Solver bool_th bool_state lra_th lra_state
      <> input}
      {false}
      any ]


  function solver_bool_state (self : t_solver) : TheoryState'0.t_theorystate =
    match self with
      | C_Solver _ a _ _ -> a
      end

  function solver_lra_state (self : t_solver) : TheoryState'0.t_theorystate =
    match self with
      | C_Solver _ _ _ a -> a
      end
end
module Cdsat_Concrete_Impl0_New
  use prelude.prelude.Intrinsic

  use Cdsat_Concrete_Solver_Type as Solver'0

  use Cdsat_Lra_LraTheory_Type as LRATheory'0

  use Cdsat_Concrete_TheoryState_Type as TheoryState'0

  use Cdsat_Bool_BoolTheory_Type as BoolTheory'0

  let rec new (_1:()) (return'  (ret:Solver'0.t_solver))= (! bb0
    [ bb0 = s0
      [ s0 =  [ &_1 <- BoolTheory'0.C_BoolTheory ] s1
      | s1 =  [ &_2 <- TheoryState'0.C_Unknown ] s2
      | s2 =  [ &_3 <- LRATheory'0.C_LRATheory ] s3
      | s3 =  [ &_4 <- TheoryState'0.C_Unknown ] s4
      | s4 =  [ &_0 <- Solver'0.C_Solver _1 _2 _3 _4 ]
        (any
        [ any_ (_any:BoolTheory'0.t_booltheory)-> (!  [ &_1 <- _any ]
          (any
          [ any_ (_any:TheoryState'0.t_theorystate)-> (!  [ &_2 <- _any ]
            (any
            [ any_ (_any:LRATheory'0.t_lratheory)-> (!  [ &_3 <- _any ]
              (any [ any_ (_any:TheoryState'0.t_theorystate)-> (!  [ &_4 <- _any ] s5) ] )) ]
            )) ]
          )) ]
        )
      | s5 = return' {_0} ]
       ]
    )
    [ & _0 : Solver'0.t_solver = any_l ()
    | & _1 : BoolTheory'0.t_booltheory = any_l ()
    | & _2 : TheoryState'0.t_theorystate = any_l ()
    | & _3 : LRATheory'0.t_lratheory = any_l ()
    | & _4 : TheoryState'0.t_theorystate = any_l () ]
     [ return' (result:Solver'0.t_solver)-> (! return' {result}) ]
end
module Cdsat_Concrete_Impl0_Sat
  let%span sconcrete0 = "/Users/xavier/Code/cdsat/src/concrete.rs" 40 8 40 81

  let%span sconcrete1 = "/Users/xavier/Code/cdsat/src/concrete.rs" 38 14 38 99

  let%span span2 = "/Users/xavier/Code/cdsat/src/concrete.rs" 21 24 21 33

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 81 8 81 28

  let%span span4 = "/Users/xavier/Code/cdsat/src/concrete.rs" 21 9 21 18

  use Cdsat_Concrete_Solver_Type as Cdsat_Concrete_Solver_Type

  use prelude.prelude.Intrinsic

  use Cdsat_Concrete_TheoryStateDeepModel_Type as TheoryStateDeepModel'0

  use Cdsat_Concrete_TheoryState_Type as TheoryState'0

  use prelude.prelude.Borrow

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/concrete.rs" 21 24 21 33] (self : TheoryState'0.t_theorystate) : TheoryStateDeepModel'0.t_theorystatedeepmodel

   =
    [%#span2] match self with
      | TheoryState'0.C_Sat -> TheoryStateDeepModel'0.C_Sat
      | TheoryState'0.C_Decision -> TheoryStateDeepModel'0.C_Decision
      | TheoryState'0.C_Unknown -> TheoryStateDeepModel'0.C_Unknown
      end

  function deep_model'0 (self : TheoryState'0.t_theorystate) : TheoryStateDeepModel'0.t_theorystatedeepmodel =
    [%#span3] deep_model'1 self

  let rec eq'0 (self:TheoryState'0.t_theorystate) (rhs:TheoryState'0.t_theorystate) (return'  (ret:bool))= any
    [ return' (result:bool)-> {[%#span4] result = (deep_model'0 self = deep_model'0 rhs)} (! return' {result}) ]


  use Cdsat_Lra_LraTheory_Type as LRATheory'0

  use Cdsat_Bool_BoolTheory_Type as BoolTheory'0

  use Cdsat_Concrete_Solver_Type as Solver'0

  let rec promoted0 (return'  (ret:TheoryState'0.t_theorystate))= bb0
    [ bb0 = s0 [ s0 =  [ &_1 <- TheoryState'0.C_Sat ] s1 | s1 =  [ &_0 <- _1 ] s2 | s2 = return' {_0} ]  ]
     [ & _0 : TheoryState'0.t_theorystate = any_l () | & _1 : TheoryState'0.t_theorystate = any_l () ]
    [ return' (result:TheoryState'0.t_theorystate)-> return' {result} ]


  let rec promoted1 (return'  (ret:TheoryState'0.t_theorystate))= bb0
    [ bb0 = s0 [ s0 =  [ &_1 <- TheoryState'0.C_Sat ] s1 | s1 =  [ &_0 <- _1 ] s2 | s2 = return' {_0} ]  ]
     [ & _0 : TheoryState'0.t_theorystate = any_l () | & _1 : TheoryState'0.t_theorystate = any_l () ]
    [ return' (result:TheoryState'0.t_theorystate)-> return' {result} ]


  let rec sat (self:Solver'0.t_solver) (return'  (ret:bool))= (! bb0
    [ bb0 = s0
      [ s0 = promoted1 (fun (pr1:TheoryState'0.t_theorystate) ->  [ &_11 <- pr1 ] s1)
      | s1 = Solver'0.t_solver {self}
          (fun (rbool_th'0:BoolTheory'0.t_booltheory) (rbool_state'0:TheoryState'0.t_theorystate) (rlra_th'0:LRATheory'0.t_lratheory) (rlra_state'0:TheoryState'0.t_theorystate) ->
            eq'0 {rbool_state'0} {_11} (fun (_ret':bool) ->  [ &_3 <- _ret' ] s2))
      | s2 = bb1 ]

    | bb1 = any [ br0 -> {_3 = false} (! bb3) | br1 -> {_3} (! bb2) ]
    | bb2 = s0
      [ s0 = promoted0 (fun (pr0:TheoryState'0.t_theorystate) ->  [ &_10 <- pr0 ] s1)
      | s1 = Solver'0.t_solver {self}
          (fun (rbool_th'0:BoolTheory'0.t_booltheory) (rbool_state'0:TheoryState'0.t_theorystate) (rlra_th'0:LRATheory'0.t_lratheory) (rlra_state'0:TheoryState'0.t_theorystate) ->
            eq'0 {rlra_state'0} {_10} (fun (_ret':bool) ->  [ &_0 <- _ret' ] s2))
      | s2 = bb4 ]

    | bb4 = bb5
    | bb3 = s0 [ s0 =  [ &_0 <- [%#sconcrete0] false ] s1 | s1 = bb5 ]
    | bb5 = return' {_0} ]
    )
    [ & _0 : bool = any_l ()
    | & self : Solver'0.t_solver = self
    | & _3 : bool = any_l ()
    | & _10 : TheoryState'0.t_theorystate = any_l ()
    | & _11 : TheoryState'0.t_theorystate = any_l () ]

    [ return' (result:bool)-> {[@expl:postcondition] [%#sconcrete1] result
      = (Cdsat_Concrete_Solver_Type.solver_bool_state self = TheoryState'0.C_Sat
      /\ Cdsat_Concrete_Solver_Type.solver_lra_state self = TheoryState'0.C_Sat)}
      (! return' {result}) ]

end
module Cdsat_Concrete_Answer_Type
  type t_answer  =
    | C_Sat
    | C_Unsat

  function any_l (_ : 'b) : 'a

  let rec sat (input:t_answer) (ret  )= any [ good -> {C_Sat  = input} (! ret) | bad -> {C_Sat  <> input} {false} any ]

  let rec unsat (input:t_answer) (ret  )= any
    [ good -> {C_Unsat  = input} (! ret) | bad -> {C_Unsat  <> input} {false} any ]

end
module Cdsat_Trail_Impl9_Len
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 218 14 218 50

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span2 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span4 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span5 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span6 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span7 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 90 8 90 31

  let%span span8 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2255 16 2255 20

  let%span span9 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 78 26 78 48

  use Alloc_Alloc_Global_Type as Global'0

  use Cdsat_Trail_Assignment_Type as Assignment'0

  use Alloc_Vec_Vec_Type as Vec'0

  use seq.Seq

  predicate invariant'2 (self : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span1] true

  predicate inv'2 (_x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'2 : forall x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'2 x = true

  use prelude.prelude.UIntSize

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  constant max'0 : usize = [%#span2] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'1 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  function shallow_model'0 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))


  axiom shallow_model'0_spec : forall self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . ([%#span3] inv'1 self)
   -> ([%#span5] inv'2 (shallow_model'0 self))
  && ([%#span4] Seq.length (shallow_model'0 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'1 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span6] inv'2 (shallow_model'0 self)

  axiom inv'1 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'1 x
  = true

  predicate invariant'0 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span1] true

  predicate inv'0 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  axiom inv'0 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'0 x
  = true

  use Cdsat_Trail_Trail_Type as Cdsat_Trail_Trail_Type

  use prelude.prelude.Borrow

  use prelude.prelude.Intrinsic

  function shallow_model'1 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

   =
    [%#span7] shallow_model'0 self

  let rec len'0 (self:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (return'  (ret:usize))= {[@expl:precondition] [%#span8] inv'0 self}
    any
    [ return' (result:usize)-> {[%#span9] UIntSize.to_int result = Seq.length (shallow_model'1 self)}
      (! return' {result}) ]


  use Cdsat_Theory_Trail_Type as Trail'1

  use prelude.prelude.Snapshot

  use Cdsat_Trail_Trail_Type as Trail'0

  let rec len (self:Trail'0.t_trail) (return'  (ret:usize))= (! bb0
    [ bb0 = s0
      [ s0 = Trail'0.t_trail {self}
          (fun (rassignments'0:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (rlevel'0:usize) (rghost'0:Snapshot.snap_ty (Trail'1.t_trail)) (rnum_assign'0:usize) ->
            len'0 {rassignments'0} (fun (_ret':usize) ->  [ &_0 <- _ret' ] s1))
      | s1 = bb1 ]

    | bb1 = return' {_0} ]
    ) [ & _0 : usize = any_l () | & self : Trail'0.t_trail = self ]
    [ return' (result:usize)-> {[@expl:postcondition] [%#strail0] UIntSize.to_int result
      = Seq.length (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self))}
      (! return' {result}) ]

end
module Cdsat_Theory_Impl5_SetLevelMax_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 305 15 305 38

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 306 15 306 57

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 308 14 308 69

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span4 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span5 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span6 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span7 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span8 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span9 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span10 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span11 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span12 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span13 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span14 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span15 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span16 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span17 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span20 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span21 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span22 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span23 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span24 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span25 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span26 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span28 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span29 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span30 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span31 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  use Cdsat_Theory_Value_Type as Value'0

  use Cdsat_Theory_Term_Type as Term'0

  use set.Fset

  use Cdsat_Theory_Trail_Type as Trail'0

  use set.Fset

  function insert'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span3] Fset.add e self

  use prelude.prelude.Int

  use prelude.prelude.Int

  use Cdsat_Theory_Sort_Type as Sort'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span4] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span5] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  use Cdsat_Theory_Assign_Type as Assign'0

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span6] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span7] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'0 a
      end

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span9] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span8] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span12] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span11] level'0 self <= len'0 self)
  && ([%#span10] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span13] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span14] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span18] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span17] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span16] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span15] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span21] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span19] invariant_nonneg'0 self)
   -> ([%#span20] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span22] Fset.remove a self

  use set.Fset

  use set.Fset

  use set.Fset

  use set.Fset

  predicate contains'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span23] Fset.mem e self

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span31] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#span24] invariant_nonneg'0 self)
   -> ([%#span29] set_level'0 self s <= level'0 self)
  && ([%#span28] set_level'0 self s >= 0)
  && ([%#span27] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#span26] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span25] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 s i
   -> level_of'0 self i <= set_level'0 self s)

  constant self  : Trail'0.t_trail

  constant set  : Fset.fset (Term'0.t_term, Value'0.t_value)

  constant elem  : (Term'0.t_term, Value'0.t_value)

  function set_level_max [#"/Users/xavier/Code/cdsat/src/theory.rs" 309 4 309 77] (self : Trail'0.t_trail) (set : Fset.fset (Term'0.t_term, Value'0.t_value)) (elem : (Term'0.t_term, Value'0.t_value)) : ()


  goal vc_set_level_max : ([%#stheory1] set_level'0 self set <= level_of'0 self elem)
   -> ([%#stheory0] invariant_nonneg'0 self)
   -> ([%#stheory2] set_level'0 self (insert'0 set elem) = level_of'0 self elem)
end
module Cdsat_Theory_Impl5_SetLevelMin_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 313 15 313 38

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 314 15 314 56

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 315 14 315 69

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span4 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span5 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span6 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span7 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span8 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span9 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span10 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span11 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span12 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span13 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span14 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span15 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span16 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span17 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span20 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span21 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span22 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span23 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span24 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span25 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span26 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span28 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span29 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span30 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span31 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  use Cdsat_Theory_Value_Type as Value'0

  use Cdsat_Theory_Term_Type as Term'0

  use set.Fset

  use Cdsat_Theory_Trail_Type as Trail'0

  use set.Fset

  function insert'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span3] Fset.add e self

  use prelude.prelude.Int

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span4] Fset.remove a self

  use set.Fset

  use set.Fset

  use Cdsat_Theory_Assign_Type as Assign'0

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span6] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span5] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span9] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span8] level'0 self <= len'0 self)
  && ([%#span7] level'0 self >= 0)

  use set.Fset

  use prelude.prelude.Int

  use Cdsat_Theory_Sort_Type as Sort'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span10] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span11] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span12] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span13] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'0 a
      end

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span14] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span15] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span19] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span18] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span17] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span16] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span22] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span20] invariant_nonneg'0 self)
   -> ([%#span21] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  use set.Fset

  predicate contains'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span23] Fset.mem e self

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span31] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#span24] invariant_nonneg'0 self)
   -> ([%#span29] set_level'0 self s <= level'0 self)
  && ([%#span28] set_level'0 self s >= 0)
  && ([%#span27] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#span26] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span25] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 s i
   -> level_of'0 self i <= set_level'0 self s)

  constant self  : Trail'0.t_trail

  constant set  : Fset.fset (Term'0.t_term, Value'0.t_value)

  constant elem  : (Term'0.t_term, Value'0.t_value)

  function set_level_min [#"/Users/xavier/Code/cdsat/src/theory.rs" 316 4 316 77] (self : Trail'0.t_trail) (set : Fset.fset (Term'0.t_term, Value'0.t_value)) (elem : (Term'0.t_term, Value'0.t_value)) : ()


  goal vc_set_level_min : ([%#stheory1] level_of'0 self elem < set_level'0 self set)
   -> ([%#stheory0] invariant_nonneg'0 self)
   -> ([%#stheory2] set_level'0 self (insert'0 set elem) = set_level'0 self set)
end
module Cdsat_Trail_Impl9_MaxLevel
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 618 22 618 23

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 619 24 619 48

  let%span strail2 = "/Users/xavier/Code/cdsat/src/trail.rs" 620 8 620 55

  let%span strail3 = "/Users/xavier/Code/cdsat/src/trail.rs" 620 8 620 55

  let%span strail4 = "/Users/xavier/Code/cdsat/src/trail.rs" 620 8 620 55

  let%span strail5 = "/Users/xavier/Code/cdsat/src/trail.rs" 620 20 620 53

  let%span strail6 = "/Users/xavier/Code/cdsat/src/trail.rs" 621 20 621 102

  let%span strail7 = "/Users/xavier/Code/cdsat/src/trail.rs" 620 8 620 55

  let%span strail8 = "/Users/xavier/Code/cdsat/src/trail.rs" 623 12 623 104

  let%span strail9 = "/Users/xavier/Code/cdsat/src/trail.rs" 624 12 624 57

  let%span strail10 = "/Users/xavier/Code/cdsat/src/trail.rs" 625 23 625 72

  let%span strail11 = "/Users/xavier/Code/cdsat/src/trail.rs" 626 26 626 61

  let%span strail12 = "/Users/xavier/Code/cdsat/src/trail.rs" 629 30 629 69

  let%span strail13 = "/Users/xavier/Code/cdsat/src/trail.rs" 630 16 630 72

  let%span strail14 = "/Users/xavier/Code/cdsat/src/trail.rs" 632 30 632 40

  let%span strail15 = "/Users/xavier/Code/cdsat/src/trail.rs" 633 16 633 72

  let%span strail16 = "/Users/xavier/Code/cdsat/src/trail.rs" 636 20 636 48

  let%span strail17 = "/Users/xavier/Code/cdsat/src/trail.rs" 637 26 637 63

  let%span strail18 = "/Users/xavier/Code/cdsat/src/trail.rs" 639 22 639 48

  let%span strail19 = "/Users/xavier/Code/cdsat/src/trail.rs" 614 15 614 31

  let%span strail20 = "/Users/xavier/Code/cdsat/src/trail.rs" 615 4 615 97

  let%span strail21 = "/Users/xavier/Code/cdsat/src/trail.rs" 616 14 616 88

  let%span span22 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span23 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  let%span span24 = "/Users/xavier/Code/cdsat/src/trail.rs" 146 14 146 59

  let%span span25 = "/Users/xavier/Code/cdsat/src/trail.rs" 144 4 144 10

  let%span span26 = "/Users/xavier/Code/cdsat/src/trail.rs" 140 15 140 48

  let%span span27 = "/Users/xavier/Code/cdsat/src/trail.rs" 141 14 141 44

  let%span span28 = "/Users/xavier/Code/cdsat/src/trail.rs" 138 4 138 10

  let%span span29 = "/Users/xavier/Code/cdsat/src/trail.rs" 134 15 134 45

  let%span span30 = "/Users/xavier/Code/cdsat/src/trail.rs" 135 14 135 47

  let%span span31 = "/Users/xavier/Code/cdsat/src/trail.rs" 132 4 132 10

  let%span span32 = "/Users/xavier/Code/cdsat/src/trail.rs" 127 15 127 32

  let%span span33 = "/Users/xavier/Code/cdsat/src/trail.rs" 128 15 128 32

  let%span span34 = "/Users/xavier/Code/cdsat/src/trail.rs" 129 14 129 31

  let%span span35 = "/Users/xavier/Code/cdsat/src/trail.rs" 125 4 125 10

  let%span span36 = "/Users/xavier/Code/cdsat/src/trail.rs" 122 14 122 45

  let%span span37 = "/Users/xavier/Code/cdsat/src/trail.rs" 120 4 120 10

  let%span span38 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 41 20 41 56

  let%span span39 = "/Users/xavier/Code/cdsat/src/trail.rs" 117 14 117 64

  let%span span40 = "/Users/xavier/Code/cdsat/src/trail.rs" 115 4 115 10

  let%span span41 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 31 20 31 53

  let%span span42 = "/Users/xavier/Code/cdsat/src/trail.rs" 112 14 112 61

  let%span span43 = "/Users/xavier/Code/cdsat/src/trail.rs" 110 4 110 10

  let%span span44 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 21 20 21 53

  let%span span45 = "/Users/xavier/Code/cdsat/src/trail.rs" 107 14 107 61

  let%span span46 = "/Users/xavier/Code/cdsat/src/trail.rs" 105 4 105 10

  let%span span47 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 11 20 11 56

  let%span span48 = "/Users/xavier/Code/cdsat/src/trail.rs" 102 14 102 64

  let%span span49 = "/Users/xavier/Code/cdsat/src/trail.rs" 100 4 100 10

  let%span span50 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span51 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span52 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span53 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span54 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span55 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 14 70 15

  let%span span56 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 23 70 24

  let%span span57 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 69 14 69 59

  let%span span58 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 64 15 64 48

  let%span span59 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 16 66 17

  let%span span60 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 25 66 26

  let%span span61 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 65 14 65 44

  let%span span62 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 59 15 59 45

  let%span span63 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 16 61 17

  let%span span64 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 25 61 26

  let%span span65 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 60 14 60 47

  let%span span66 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 53 15 53 32

  let%span span67 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 54 15 54 32

  let%span span68 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 13 56 14

  let%span span69 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 22 56 23

  let%span span70 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 31 56 32

  let%span span71 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 55 14 55 31

  let%span span72 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 50 12 50 13

  let%span span73 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 49 14 49 45

  let%span span74 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 18 46 19

  let%span span75 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 27 46 28

  let%span span76 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 45 14 45 64

  let%span span77 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 18 36 19

  let%span span78 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 27 36 28

  let%span span79 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 35 14 35 61

  let%span span80 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 18 26 19

  let%span span81 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 27 26 28

  let%span span82 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 25 14 25 61

  let%span span83 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 18 16 19

  let%span span84 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 27 16 28

  let%span span85 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 15 14 15 64

  let%span span86 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span87 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span88 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span89 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 19 21 19 25

  let%span span90 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 17 14 17 41

  let%span span91 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 18 14 18 42

  let%span span92 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 19 4 19 50

  let%span span93 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 43 8 43 31

  let%span span94 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 90 8 90 31

  let%span span95 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 91 19 91 23

  let%span span96 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 89 14 89 41

  let%span span97 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 90 4 90 82

  let%span span98 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 91 4 91 35

  let%span span99 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 399 12 399 66

  let%span span100 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 410 15 410 32

  let%span span101 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 411 15 411 32

  let%span span102 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 413 31 413 33

  let%span span103 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 413 61 413 63

  let%span span104 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 412 14 412 42

  let%span span105 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 408 4 408 10

  let%span span106 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 405 14 405 45

  let%span span107 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 403 4 403 10

  let%span span108 = "/Users/xavier/Code/cdsat/src/trail.rs" 291 12 291 92

  let%span span109 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span110 = "/Users/xavier/Code/cdsat/src/theory.rs" 31 8 54 9

  let%span span111 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span112 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 129 8 129 78

  let%span span113 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 13 814 14

  let%span span114 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 24 814 25

  let%span span115 = "/Users/xavier/Code/cdsat/src/trail.rs" 809 0 809 73

  let%span span116 = "/Users/xavier/Code/cdsat/src/trail.rs" 810 0 810 63

  let%span span117 = "/Users/xavier/Code/cdsat/src/trail.rs" 811 0 811 55

  let%span span118 = "/Users/xavier/Code/cdsat/src/trail.rs" 812 0 812 52

  let%span span119 = "/Users/xavier/Code/cdsat/src/trail.rs" 813 10 813 33

  let%span span120 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 33 814 39

  let%span span121 = "/Users/xavier/Code/cdsat/src/trail.rs" 808 10 808 17

  let%span span122 = "/Users/xavier/Code/cdsat/src/trail.rs" 807 0 807 8

  let%span span123 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span124 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span125 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span126 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span127 = "/Users/xavier/Code/cdsat/src/term.rs" 195 8 225 9

  let%span span128 = "/Users/xavier/Code/cdsat/src/term.rs" 180 8 180 25

  let%span span129 = "/Users/xavier/Code/cdsat/src/trail.rs" 726 8 726 61

  let%span span130 = "/Users/xavier/Code/cdsat/src/trail.rs" 646 8 648 9

  let%span span131 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span132 = "/Users/xavier/Code/cdsat/src/trail.rs" 313 4 313 82

  let%span span133 = "/Users/xavier/Code/cdsat/src/trail.rs" 314 14 314 40

  let%span span134 = "/Users/xavier/Code/cdsat/src/trail.rs" 315 4 315 115

  let%span span135 = "/Users/xavier/Code/cdsat/src/trail.rs" 316 4 316 115

  let%span span136 = "/Users/xavier/Code/cdsat/src/trail.rs" 317 4 317 101

  let%span span137 = "/Users/xavier/Code/cdsat/src/trail.rs" 312 14 312 24

  let%span span138 = "/Users/xavier/Code/cdsat/src/trail.rs" 310 4 310 12

  let%span span139 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span140 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span141 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span142 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span143 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span144 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span145 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span146 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span147 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span148 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span149 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span150 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span151 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span152 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span153 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span154 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span155 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span156 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span157 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span158 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span159 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span160 = "/Users/xavier/Code/cdsat/src/theory.rs" 616 15 616 27

  let%span span161 = "/Users/xavier/Code/cdsat/src/theory.rs" 617 15 617 32

  let%span span162 = "/Users/xavier/Code/cdsat/src/theory.rs" 618 4 618 90

  let%span span163 = "/Users/xavier/Code/cdsat/src/theory.rs" 512 8 515 9

  let%span span164 = "/Users/xavier/Code/cdsat/src/theory.rs" 522 8 525 9

  let%span span165 = "/Users/xavier/Code/cdsat/src/theory.rs" 206 8 206 84

  let%span span166 = "/Users/xavier/Code/cdsat/src/theory.rs" 502 8 505 9

  let%span span167 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span168 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span169 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span170 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span171 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span172 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span173 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span174 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span175 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span176 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span177 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span178 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span179 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span180 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span181 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span182 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span183 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span184 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span185 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span186 = "/Users/xavier/Code/cdsat/src/theory.rs" 484 15 484 31

  let%span span187 = "/Users/xavier/Code/cdsat/src/theory.rs" 485 15 485 35

  let%span span188 = "/Users/xavier/Code/cdsat/src/theory.rs" 486 15 486 27

  let%span span189 = "/Users/xavier/Code/cdsat/src/theory.rs" 487 4 487 54

  let%span span190 = "/Users/xavier/Code/cdsat/src/theory.rs" 488 4 488 58

  let%span span191 = "/Users/xavier/Code/cdsat/src/theory.rs" 489 4 489 61

  let%span span192 = "/Users/xavier/Code/cdsat/src/trail.rs" 268 8 272 9

  let%span span193 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 31 8 31 32

  let%span span194 = "/Users/xavier/Code/cdsat/src/trail.rs" 547 4 547 12

  let%span span195 = "/Users/xavier/Code/cdsat/src/trail.rs" 254 8 263 9

  let%span span196 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 20 8 20 31

  let%span span197 = "/Users/xavier/Code/cdsat/src/trail.rs" 179 4 179 12

  let%span span198 = "/Users/xavier/Code/cdsat/src/trail.rs" 279 12 283 13

  let%span span199 = "/Users/xavier/Code/cdsat/src/trail.rs" 238 8 248 9

  let%span span200 = "/Users/xavier/Code/cdsat/src/theory.rs" 313 15 313 38

  let%span span201 = "/Users/xavier/Code/cdsat/src/theory.rs" 314 15 314 56

  let%span span202 = "/Users/xavier/Code/cdsat/src/theory.rs" 315 14 315 69

  let%span span203 = "/Users/xavier/Code/cdsat/src/theory.rs" 305 15 305 38

  let%span span204 = "/Users/xavier/Code/cdsat/src/theory.rs" 306 15 306 57

  let%span span205 = "/Users/xavier/Code/cdsat/src/theory.rs" 308 14 308 69

  let%span span206 = "/Users/xavier/Code/cdsat/src/trail.rs" 373 15 373 34

  let%span span207 = "/Users/xavier/Code/cdsat/src/trail.rs" 374 4 374 82

  let%span span208 = "/Users/xavier/Code/cdsat/src/trail.rs" 375 14 375 144

  let%span span209 = "/Users/xavier/Code/cdsat/src/trail.rs" 372 14 372 24

  let%span span210 = "/Users/xavier/Code/cdsat/src/trail.rs" 377 8 377 10

  let%span span211 = "/Users/xavier/Code/cdsat/src/trail.rs" 382 15 382 34

  let%span span212 = "/Users/xavier/Code/cdsat/src/trail.rs" 383 4 383 82

  let%span span213 = "/Users/xavier/Code/cdsat/src/trail.rs" 384 14 384 126

  let%span span214 = "/Users/xavier/Code/cdsat/src/trail.rs" 381 14 381 24

  let%span span215 = "/Users/xavier/Code/cdsat/src/trail.rs" 380 4 380 12

  let%span span216 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 87 8 87 33

  let%span span217 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 26 20 26 34

  let%span span218 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 108 8 108 31

  let%span span219 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 392 20 392 61

  let%span span220 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/iter.rs" 95 26 98 17

  let%span span221 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/slice/iter/macros.rs" 154 12 154 47

  let%span span222 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 359 20 359 32

  let%span span223 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 353 20 353 24

  let%span span224 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/iter.rs" 89 0 175 1

  let%span span225 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/slice/iter.rs" 24 17 24 21

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function eq_cmp'2 (_1 : usize) (_2 : usize) : ()

  function antisym2'2 (_1 : usize) (_2 : usize) : ()

  function antisym1'2 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'2 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'2 (_1 : usize) : ()

  function cmp_gt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'2 (_1 : usize) (_2 : usize) : ()

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span22] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span23] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  function eq_cmp'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 147 4 147 31] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span25] ()

  axiom eq_cmp'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span24] (x = y)
  = (cmp_log'0 x y = Ordering'0.C_Equal)

  function antisym2'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 142 4 142 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span28] ()

  axiom antisym2'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span26] cmp_log'0 x y
  = Ordering'0.C_Greater)  -> ([%#span27] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 136 4 136 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span31] ()

  axiom antisym1'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span29] cmp_log'0 x y
  = Ordering'0.C_Less)  -> ([%#span30] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 130 4 130 52] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()

   =
    [%#span35] ()

  axiom trans'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span32] cmp_log'0 x y
  = o)  -> ([%#span33] cmp_log'0 y z = o)  -> ([%#span34] cmp_log'0 x z = o)

  function refl'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 123 4 123 20] (x : TrailIndex'0.t_trailindex) : () =
    [%#span37] ()

  axiom refl'1_spec : forall x : TrailIndex'0.t_trailindex . [%#span36] cmp_log'0 x x = Ordering'0.C_Equal

  function gt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span38] cmp_log'0 self o = Ordering'0.C_Greater

  function cmp_gt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 118 4 118 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span40] ()

  axiom cmp_gt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span39] gt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Greater)

  function ge_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span41] cmp_log'0 self o <> Ordering'0.C_Less

  function cmp_ge_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 113 4 113 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span43] ()

  axiom cmp_ge_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span42] ge_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Less)

  function lt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span44] cmp_log'0 self o = Ordering'0.C_Less

  function cmp_lt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 108 4 108 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span46] ()

  axiom cmp_lt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span45] lt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Less)

  function le_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span47] cmp_log'0 self o <> Ordering'0.C_Greater

  function cmp_le_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 103 4 103 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span49] ()

  axiom cmp_le_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span48] le_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Greater)

  use seq.Seq

  predicate inv'4 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  constant max'0 : usize = [%#span50] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'12 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function shallow_model'8 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom shallow_model'8_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span51] inv'12 self)
   -> ([%#span53] inv'4 (shallow_model'8 self))
  && ([%#span52] Seq.length (shallow_model'8 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'15 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span54] inv'4 (shallow_model'8 self)

  axiom inv'12 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'12 x = true

  predicate inv'5 (_x : TrailIndex'0.t_trailindex)

  function eq_cmp'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom eq_cmp'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span55] inv'5 x)
   -> ([%#span56] inv'5 y)  -> ([%#span57] (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal))

  function antisym2'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym2'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span58] cmp_log'0 x y
  = Ordering'0.C_Greater)
   -> ([%#span59] inv'5 x)  -> ([%#span60] inv'5 y)  -> ([%#span61] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym1'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span62] cmp_log'0 x y
  = Ordering'0.C_Less)
   -> ([%#span63] inv'5 x)  -> ([%#span64] inv'5 y)  -> ([%#span65] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span66] cmp_log'0 x y
  = o)
   -> ([%#span67] cmp_log'0 y z = o)
   -> ([%#span68] inv'5 x)  -> ([%#span69] inv'5 y)  -> ([%#span70] inv'5 z)  -> ([%#span71] cmp_log'0 x z = o)

  function refl'0 (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'0_spec : forall x : TrailIndex'0.t_trailindex . ([%#span72] inv'5 x)
   -> ([%#span73] cmp_log'0 x x = Ordering'0.C_Equal)

  function cmp_gt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_gt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span74] inv'5 x)
   -> ([%#span75] inv'5 y)  -> ([%#span76] gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater))

  function cmp_ge_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_ge_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span77] inv'5 x)
   -> ([%#span78] inv'5 y)  -> ([%#span79] ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less))

  function cmp_lt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_lt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span80] inv'5 x)
   -> ([%#span81] inv'5 y)  -> ([%#span82] lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less))

  function cmp_le_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_le_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span83] inv'5 x)
   -> ([%#span84] inv'5 y)  -> ([%#span85] le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater))

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span86] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'14 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span87] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'11 (_x : Model'0.t_model)

  axiom inv'11 : forall x : Model'0.t_model . inv'11 x
  = (invariant'14 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use Cdsat_Trail_Assignment_Type as Assignment'0

  predicate invariant'13 (self : Seq.seq (Assignment'0.t_assignment)) =
    [%#span88] true

  predicate inv'10 (_x : Seq.seq (Assignment'0.t_assignment))

  axiom inv'10 : forall x : Seq.seq (Assignment'0.t_assignment) . inv'10 x = true

  use seq.Seq

  predicate inv'9 (_x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

  function shallow_model'4 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) : Seq.seq (Assignment'0.t_assignment)


  axiom shallow_model'4_spec : forall self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . ([%#span51] inv'9 self)
   -> ([%#span53] inv'10 (shallow_model'4 self))
  && ([%#span52] Seq.length (shallow_model'4 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'12 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span54] inv'10 (shallow_model'4 self)

  axiom inv'9 : forall x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . inv'9 x = true

  predicate invariant'11 (self : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span88] true

  predicate inv'8 (_x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'8 : forall x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'8 x = true

  use seq.Seq

  predicate inv'7 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  function shallow_model'3 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))


  axiom shallow_model'3_spec : forall self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . ([%#span51] inv'7 self)
   -> ([%#span53] inv'8 (shallow_model'3 self))
  && ([%#span52] Seq.length (shallow_model'3 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'10 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span54] inv'8 (shallow_model'3 self)

  axiom inv'7 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'7 x
  = true

  use prelude.prelude.Slice

  predicate invariant'9 (self : slice (TrailIndex'0.t_trailindex)) =
    [%#span88] true

  predicate inv'6 (_x : slice (TrailIndex'0.t_trailindex))

  axiom inv'6 : forall x : slice (TrailIndex'0.t_trailindex) . inv'6 x = true

  predicate invariant'8 (self : TrailIndex'0.t_trailindex) =
    [%#span88] true

  axiom inv'5 : forall x : TrailIndex'0.t_trailindex . inv'5 x = true

  predicate invariant'7 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span88] true

  axiom inv'4 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'4 x = true

  predicate invariant'6 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span88] true

  predicate inv'3 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'3 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'3 x = true

  use Core_Option_Option_Type as Option'0

  predicate invariant'4 (self : Option'0.t_option (TrailIndex'0.t_trailindex)) =
    [%#span88] true

  predicate inv'2 (_x : Option'0.t_option (TrailIndex'0.t_trailindex))

  axiom inv'2 : forall x : Option'0.t_option (TrailIndex'0.t_trailindex) . inv'2 x = true

  predicate invariant'3 (self : slice (TrailIndex'0.t_trailindex)) =
    [%#span88] true

  predicate inv'1 (_x : slice (TrailIndex'0.t_trailindex))

  axiom inv'1 : forall x : slice (TrailIndex'0.t_trailindex) . inv'1 x = true

  use prelude.prelude.Borrow

  use Core_Slice_Iter_Iter_Type as Iter'0

  use seq.Seq

  use seq.Seq

  use prelude.prelude.Slice

  function shallow_model'2 (self : slice (TrailIndex'0.t_trailindex)) : Seq.seq (TrailIndex'0.t_trailindex)

  axiom shallow_model'2_spec : forall self : slice (TrailIndex'0.t_trailindex) . ([%#span89] inv'6 self)
   -> ([%#span92] inv'4 (shallow_model'2 self))
  && ([%#span91] shallow_model'2 self = Slice.id self)
  && ([%#span90] Seq.length (shallow_model'2 self) <= UIntSize.to_int (max'0 : usize))

  function index_logic'0 [@inline:trivial] (self : slice (TrailIndex'0.t_trailindex)) (ix : int) : TrailIndex'0.t_trailindex

   =
    [%#span93] Seq.get (shallow_model'2 self) ix

  use seq.Seq

  function shallow_model'0 (self : slice (TrailIndex'0.t_trailindex)) : Seq.seq (TrailIndex'0.t_trailindex) =
    [%#span94] shallow_model'2 self

  use seq.Seq

  function to_ref_seq'0 (self : slice (TrailIndex'0.t_trailindex)) : Seq.seq (TrailIndex'0.t_trailindex)

  axiom to_ref_seq'0_spec : forall self : slice (TrailIndex'0.t_trailindex) . ([%#span95] inv'1 self)
   -> ([%#span98] inv'3 (to_ref_seq'0 self))
  && ([%#span97] forall i : int . 0 <= i /\ i < Seq.length (to_ref_seq'0 self)
   -> Seq.get (to_ref_seq'0 self) i = index_logic'0 self i)
  && ([%#span96] Seq.length (to_ref_seq'0 self) = Seq.length (shallow_model'0 self))

  function shallow_model'1 (self : Iter'0.t_iter (TrailIndex'0.t_trailindex)) : slice (TrailIndex'0.t_trailindex)

  predicate produces'0 (self : Iter'0.t_iter (TrailIndex'0.t_trailindex)) (visited : Seq.seq (TrailIndex'0.t_trailindex)) (tl : Iter'0.t_iter (TrailIndex'0.t_trailindex))

   =
    [%#span99] to_ref_seq'0 (shallow_model'1 self) = Seq.(++) visited (to_ref_seq'0 (shallow_model'1 tl))

  function produces_trans'0 (a : Iter'0.t_iter (TrailIndex'0.t_trailindex)) (ab : Seq.seq (TrailIndex'0.t_trailindex)) (b : Iter'0.t_iter (TrailIndex'0.t_trailindex)) (bc : Seq.seq (TrailIndex'0.t_trailindex)) (c : Iter'0.t_iter (TrailIndex'0.t_trailindex)) : ()

   =
    [%#span105] ()

  axiom produces_trans'0_spec : forall a : Iter'0.t_iter (TrailIndex'0.t_trailindex), ab : Seq.seq (TrailIndex'0.t_trailindex), b : Iter'0.t_iter (TrailIndex'0.t_trailindex), bc : Seq.seq (TrailIndex'0.t_trailindex), c : Iter'0.t_iter (TrailIndex'0.t_trailindex) . ([%#span100] produces'0 a ab b)
   -> ([%#span101] produces'0 b bc c)
   -> ([%#span102] inv'3 ab)  -> ([%#span103] inv'3 bc)  -> ([%#span104] produces'0 a (Seq.(++) ab bc) c)

  use seq.Seq

  function produces_refl'0 (self : Iter'0.t_iter (TrailIndex'0.t_trailindex)) : () =
    [%#span107] ()

  axiom produces_refl'0_spec : forall self : Iter'0.t_iter (TrailIndex'0.t_trailindex) . [%#span106] produces'0 self (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) self

  predicate invariant'2 (self : Iter'0.t_iter (TrailIndex'0.t_trailindex)) =
    [%#span88] true

  predicate inv'0 (_x : Iter'0.t_iter (TrailIndex'0.t_trailindex))

  axiom inv'0 : forall x : Iter'0.t_iter (TrailIndex'0.t_trailindex) . inv'0 x = true

  use seq.Seq

  use Cdsat_Trail_Trail_Type as Cdsat_Trail_Trail_Type

  use Cdsat_Trail_Trail_Type as Trail'0

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 289 4 289 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex)

   =
    [%#span108] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)
    < Seq.length (shallow_model'3 (Cdsat_Trail_Trail_Type.trail_assignments self))
    /\ UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)
    < Seq.length (shallow_model'4 (Seq.get (shallow_model'3 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))))

  use Cdsat_Theory_Term_Type as Term'0

  use Cdsat_Theory_Trail_Type as Trail'1

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span109] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  function well_sorted'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 30 4 30 36] (self : Term'0.t_term) : bool =
    [%#span110] match self with
      | Term'0.C_Variable v -> true
      | Term'0.C_Value v -> true
      | Term'0.C_Plus l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Rational
      | Term'0.C_Eq l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r
      | Term'0.C_Conj l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Boolean
      | Term'0.C_Disj l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Boolean
      | Term'0.C_Neg t -> well_sorted'0 t /\ sort'0 t = Sort'0.C_Boolean
      end

  use set.Fset

  use set.Fset

  use set.Fset

  function insert'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span111] Fset.add e self

  use seq.Seq

  use prelude.seq_ext.SeqExt

  use seq.Seq

  predicate contains'2 (self : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) =
    [%#span112] exists i : int . 0 <= i /\ i < Seq.length self /\ Seq.get self i = e

  function remove'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 814 0 814 39] (s : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom remove'0_def : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . remove'0 s e
  = ([%#span122] if s = (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) then
    Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)
  else
    if Seq.get s (Seq.length s - 1) = e then
      remove'0 (SeqExt.subsequence s 0 (Seq.length s - 1)) e
    else
      Seq.snoc (remove'0 (SeqExt.subsequence s 0 (Seq.length s - 1)) e) (Seq.get s (Seq.length s - 1))

  )

  axiom remove'0_spec : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . ([%#span113] inv'4 s)
   -> ([%#span114] inv'5 e)
   -> ([%#span120] inv'4 (remove'0 s e))
  && ([%#span119] Seq.length (remove'0 s e) <= Seq.length s)
  && ([%#span118] contains'2 s e  -> Seq.length (remove'0 s e) < Seq.length s)
  && ([%#span117] forall t : TrailIndex'0.t_trailindex . inv'5 t  -> contains'2 (remove'0 s e) t  -> t <> e)
  && ([%#span116] forall t : TrailIndex'0.t_trailindex . inv'5 t  -> contains'2 (remove'0 s e) t  -> contains'2 s t)
  && ([%#span115] forall t : TrailIndex'0.t_trailindex . inv'5 t
   -> contains'2 s t  -> e <> t  -> contains'2 (remove'0 s e) t)

  use Cdsat_Term_Value_Type as Value'1

  use Cdsat_Term_Term_Type as Term'1

  use prelude.prelude.Real

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  function deep_model'4 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span123] match self with
      | Value'1.C_Bool b -> Value'0.C_Bool b
      | Value'1.C_Rat br -> Value'0.C_Rat (deep_model'4 br)
      end

  function shallow_model'7 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span124] deep_model'1 self

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  use Cdsat_Term_Sort_Type as Sort'1

  function deep_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'1.t_sort) : Sort'0.t_sort =
    [%#span125] match self with
      | Sort'1.C_Boolean -> Sort'0.C_Boolean
      | Sort'1.C_Rational -> Sort'0.C_Rational
      end

  function deep_model'2 (self : usize) : int =
    [%#span126] UIntSize.to_int self

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 193 4 193 44] (self : Term'1.t_term) : Term'0.t_term =
    [%#span127] match self with
      | Term'1.C_Variable v s -> Term'0.C_Variable (Var'0.C_Var (deep_model'2 v) (deep_model'3 s))
      | Term'1.C_Value v -> Term'0.C_Value (deep_model'1 v)
      | Term'1.C_Plus l r -> Term'0.C_Plus (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Eq l r -> Term'0.C_Eq (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Conj l r -> Term'0.C_Conj (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Disj l r -> Term'0.C_Disj (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Neg t -> Term'0.C_Neg (deep_model'0 t)
      | Term'1.C_Impl l r -> Term'0.C_Disj (Term'0.C_Neg (deep_model'0 l)) (deep_model'0 r)
      | Term'1.C_Times l r -> Term'0.C_Plus (Term'0.C_Value (Value'0.C_Rat (deep_model'4 l))) (deep_model'0 r)
      | Term'1.C_Lt l r -> Term'0.C_Eq (deep_model'0 l) (deep_model'0 r)
      end

  function shallow_model'6 [#"/Users/xavier/Code/cdsat/src/term.rs" 179 4 179 50] (self : Term'1.t_term) : Term'0.t_term
   =
    [%#span128] deep_model'0 self

  function term_value'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 725 4 725 61] (self : Assignment'0.t_assignment) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span129] (shallow_model'6 (Cdsat_Trail_Assignment_Type.assignment_term self), shallow_model'7 (Cdsat_Trail_Assignment_Type.assignment_val self))

  use seq.Seq

  function index_logic'2 [#"/Users/xavier/Code/cdsat/src/trail.rs" 645 4 645 77] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span130] term_value'0 (Seq.get (shallow_model'4 (Seq.get (shallow_model'3 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)))) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)))

  use set.Fset

  predicate contains'1 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span131] Fset.mem e self

  use set.Fset

  function abstract_justification'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 318 4 321 44] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) : Fset.fset (Term'0.t_term, Value'0.t_value)


  axiom abstract_justification'0_def : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . abstract_justification'0 self just
  = ([%#span138] if Seq.length just > 0 then
    let set = abstract_justification'0 self (remove'0 just (Seq.get just 0)) in let a = index_logic'2 self (Seq.get just 0) in insert'0 set a
  else
    Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)
  )

  axiom abstract_justification'0_spec : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span132] forall i : int . 0
  <= i
  /\ i < Seq.length just  -> contains'0 self (Seq.get just i))
   -> ([%#span136] forall i : int . 0 <= i /\ i < Seq.length just
   -> contains'1 (abstract_justification'0 self just) (index_logic'2 self (Seq.get just i)))
  && ([%#span135] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'2 just ix /\ a = index_logic'2 self ix))
  && ([%#span134] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'0 self ix /\ a = index_logic'2 self ix))
  && ([%#span133] Fset.cardinal (abstract_justification'0 self just) <= Seq.length just)

  use prelude.prelude.Int

  use Cdsat_Theory_Assign_Type as Assign'0

  predicate invariant'5 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span139] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'1.t_trail) =
    [%#span140] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'5 a
      end

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'1.t_trail) : int

  axiom len'0_spec : forall self : Trail'1.t_trail . [%#span141] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'1.t_trail) : int =
    [%#span144] match self with
      | Trail'1.C_Empty -> 0
      | Trail'1.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'1.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'1.t_trail . ([%#span143] level'0 self <= len'0 self)
  && ([%#span142] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'1.t_trail) =
    [%#span145] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span146] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span150] match self with
      | Trail'1.C_Empty -> Option'0.C_None
      | Trail'1.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span149] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span148] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span147] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  function from_int'0 (_1 : int) : Real.real

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span153] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span151] inv'11 self)
   -> ([%#span152] invariant'14 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span154] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span155] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 v a  -> satisfies'0 self a

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span156] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'11 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate contains'3 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span158] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'3_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span157] invariant_assign'0 self
   -> contains'3 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'1.t_trail)
   =
    [%#span159] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a _ tl -> sound'0 tl /\ justified_sound'0 a
      end

  function find_justified'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 619 4 619 46] (self : Trail'1.t_trail) (kv : (Term'0.t_term, Value'0.t_value)) : ()


  axiom find_justified'0_spec : forall self : Trail'1.t_trail, kv : (Term'0.t_term, Value'0.t_value) . ([%#span160] sound'0 self)
   -> ([%#span161] contains'3 self kv)
   -> ([%#span162] forall l : int . forall a : Assign'0.t_assign . find'0 self kv = Option'0.C_Some (a, l)
   -> justified_sound'0 a)

  predicate is_decision'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 511 4 511 54] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span163] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Decision _ _, _) -> true
      | _ -> false
      end

  predicate is_input'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 521 4 521 51] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span164] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Input _ _, _) -> true
      | _ -> false
      end

  predicate entails'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 205 4 205 74] (self : Model'0.t_model) (j : Fset.fset (Term'0.t_term, Value'0.t_value)) (c : (Term'0.t_term, Value'0.t_value))

   =
    [%#span165] invariant'14 self  -> satisfy_set'0 self j  -> satisfies'0 self c

  predicate is_justified'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 501 4 501 55] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span166] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified _ _ _, _) -> true
      | _ -> false
      end

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span167] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span170] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span168] is_bool'0 self)
   -> ([%#span169] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'1.t_trail) =
    [%#span171] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> let ap = to_pair'0 a in not contains'3 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'3 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'1.t_trail) =
    [%#span172] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'1 j a  -> contains'3 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'1 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span173] Fset.remove a self

  use set.Fset

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span176] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span174] invariant_nonneg'0 self)
   -> ([%#span175] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'1.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_spec : forall self : Trail'1.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#span177] invariant_nonneg'0 self)
   -> ([%#span182] set_level'0 self s <= level'0 self)
  && ([%#span181] set_level'0 self s >= 0)
  && ([%#span180] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#span179] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'1 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span178] forall i : (Term'0.t_term, Value'0.t_value) . contains'1 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'1.t_trail) =
    [%#span184] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'1.t_trail) =
    [%#span185] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function justification'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 490 4 490 71] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)


  axiom justification'0_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span186] invariant'1 self)
   -> ([%#span187] is_justified'0 self d)
   -> ([%#span188] sound'0 self)
   -> ([%#span191] is_decision'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#span190] is_input'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#span189] forall m : Model'0.t_model . inv'11 m  -> entails'0 m (justification'0 self d) d)

  use prelude.prelude.Snapshot

  predicate justified_correct'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 267 4 267 78] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) (j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

   =
    [%#span192] (forall i : TrailIndex'0.t_trailindex . contains'2 (shallow_model'8 j) i
     -> lt_log'0 i ix /\ contains'0 self i)
    /\ is_justified'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'2 self ix)
    /\ justification'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'2 self ix)
    = abstract_justification'0 self (shallow_model'8 j)

  use Cdsat_Trail_Reason_Type as Reason'0

  function index_logic'5 [@inline:trivial] (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (ix : usize) : Assignment'0.t_assignment

   =
    [%#span193] Seq.get (shallow_model'4 self) (UIntSize.to_int ix)

  function index_logic'4 [@inline:trivial] (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (ix : usize) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span193] Seq.get (shallow_model'3 self) (UIntSize.to_int ix)

  function reason'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 549 4 549 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : Reason'0.t_reason

   =
    [%#span194] Cdsat_Trail_Assignment_Type.assignment_reason (index_logic'5 (index_logic'4 (Cdsat_Trail_Trail_Type.trail_assignments self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)) (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix))

  predicate justified_is_justified'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 253 4 253 47] (self : Trail'0.t_trail) =
    [%#span195] forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> (let reason = reason'0 self ix in (reason = Reason'0.C_Decision)
    = is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'2 self ix)
    /\ (reason = Reason'0.C_Input)
    = is_input'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'2 self ix)
    /\ (forall j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . reason = Reason'0.C_Justified j
     -> justified_correct'0 self ix j))

  function index_logic'3 [@inline:trivial] (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (ix : int) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span196] Seq.get (shallow_model'3 self) ix

  function level_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 180 4 180 33] (self : TrailIndex'0.t_trailindex) : int
   =
    [%#span197] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 self)

  predicate abstract_relation'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 277 4 277 42] (self : Trail'0.t_trail) =
    [%#span198] (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> contains'3 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'2 self ix))
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'2 self ix)
    = UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))
    /\ (forall a : (Term'0.t_term, Value'0.t_value) . contains'3 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
     -> (exists ix : TrailIndex'0.t_trailindex . contains'0 self ix
    /\ level_log'0 ix = level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
    /\ index_logic'2 self ix = a))

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 237 4 237 34] (self : Trail'0.t_trail) =
    [%#span199] abstract_relation'0 self
    /\ sound'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    /\ invariant'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    /\ level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    = UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self)
    /\ UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self)
    = Seq.length (shallow_model'3 (Cdsat_Trail_Trail_Type.trail_assignments self)) - 1
    /\ (forall i : int . 0 <= i /\ i < Seq.length (shallow_model'3 (Cdsat_Trail_Trail_Type.trail_assignments self))
     -> Seq.length (shallow_model'4 (index_logic'3 (Cdsat_Trail_Trail_Type.trail_assignments self) i)) > 0)
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix) = 0)
    = is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'2 self ix))
    /\ (forall j : TrailIndex'0.t_trailindex . forall i : TrailIndex'0.t_trailindex . contains'0 self i
     -> contains'0 self j  -> i <> j  -> index_logic'2 self i <> index_logic'2 self j)
    /\ justified_is_justified'0 self
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> well_sorted'0 (let (a, _) = index_logic'2 self ix in a))

  use prelude.prelude.Snapshot

  use prelude.prelude.Intrinsic

  use seq.Seq

  function set_level_min'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 316 4 316 77] (self : Trail'1.t_trail) (set : Fset.fset (Term'0.t_term, Value'0.t_value)) (elem : (Term'0.t_term, Value'0.t_value)) : ()


  axiom set_level_min'0_spec : forall self : Trail'1.t_trail, set : Fset.fset (Term'0.t_term, Value'0.t_value), elem : (Term'0.t_term, Value'0.t_value) . ([%#span200] invariant_nonneg'0 self)
   -> ([%#span201] level_of'0 self elem < set_level'0 self set)
   -> ([%#span202] set_level'0 self (insert'0 set elem) = set_level'0 self set)

  function set_level_max'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 309 4 309 77] (self : Trail'1.t_trail) (set : Fset.fset (Term'0.t_term, Value'0.t_value)) (elem : (Term'0.t_term, Value'0.t_value)) : ()


  axiom set_level_max'0_spec : forall self : Trail'1.t_trail, set : Fset.fset (Term'0.t_term, Value'0.t_value), elem : (Term'0.t_term, Value'0.t_value) . ([%#span203] invariant_nonneg'0 self)
   -> ([%#span204] set_level'0 self set <= level_of'0 self elem)
   -> ([%#span205] set_level'0 self (insert'0 set elem) = level_of'0 self elem)

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  use seq.Seq

  use seq.Seq

  function abs_just_cons'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 376 4 376 67] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) (elem : TrailIndex'0.t_trailindex) : ()


  axiom abs_just_cons'0_def : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex), elem : TrailIndex'0.t_trailindex . abs_just_cons'0 self just elem
  = ([%#span210] ())

  axiom abs_just_cons'0_spec : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex), elem : TrailIndex'0.t_trailindex . ([%#span206] contains'0 self elem)
   -> ([%#span207] forall i : int . 0 <= i /\ i < Seq.length just  -> contains'0 self (Seq.get just i))
   -> ([%#span208] abstract_justification'0 self (Seq.(++) (Seq.singleton elem) just)
  = insert'0 (abstract_justification'0 self just) (index_logic'2 self elem))

  function abs_just_snoc'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 385 4 385 67] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) (elem : TrailIndex'0.t_trailindex) : ()


  axiom abs_just_snoc'0_def : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex), elem : TrailIndex'0.t_trailindex . abs_just_snoc'0 self just elem
  = ([%#span215] if just = (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) then
    ()
  else
    let j = Seq.snoc just elem in let _ = abs_just_cons'0 self (SeqExt.subsequence j 1 (Seq.length j)) (Seq.get j 0) in abs_just_snoc'0 self (SeqExt.subsequence just 1 (Seq.length just)) elem
  )

  axiom abs_just_snoc'0_spec : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex), elem : TrailIndex'0.t_trailindex . ([%#span211] contains'0 self elem)
   -> ([%#span212] forall i : int . 0 <= i /\ i < Seq.length just  -> contains'0 self (Seq.get just i))
   -> ([%#span213] abstract_justification'0 self (Seq.snoc just elem)
  = insert'0 (abstract_justification'0 self just) (index_logic'2 self elem))

  use prelude.prelude.Snapshot

  function index_logic'1 [@inline:trivial] (self : Snapshot.snap_ty (Seq.seq (TrailIndex'0.t_trailindex))) (ix : int) : TrailIndex'0.t_trailindex

   =
    [%#span216] Seq.get (Snapshot.inner self) ix

  use seq.Seq

  predicate resolve'0 (self : borrowed (Iter'0.t_iter (TrailIndex'0.t_trailindex))) =
    [%#span217] self.final = self.current

  function shallow_model'5 (self : borrowed (Iter'0.t_iter (TrailIndex'0.t_trailindex))) : slice (TrailIndex'0.t_trailindex)

   =
    [%#span218] shallow_model'1 self.current

  predicate completed'0 (self : borrowed (Iter'0.t_iter (TrailIndex'0.t_trailindex))) =
    [%#span219] resolve'0 self
    /\ shallow_model'2 (shallow_model'5 self) = (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex))

  let rec next'0 (self:borrowed (Iter'0.t_iter (TrailIndex'0.t_trailindex))) (return'  (ret:Option'0.t_option (TrailIndex'0.t_trailindex)))= any
    [ return' (result:Option'0.t_option (TrailIndex'0.t_trailindex))-> {[%#span221] inv'2 result}
      {[%#span220] match result with
        | Option'0.C_None -> completed'0 self
        | Option'0.C_Some v -> produces'0 self.current (Seq.singleton v) self.final
        end}
      (! return' {result}) ]


  use prelude.prelude.Seq

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  predicate into_iter_post'0 (self : slice (TrailIndex'0.t_trailindex)) (res : Iter'0.t_iter (TrailIndex'0.t_trailindex))

   =
    [%#span222] self = shallow_model'1 res

  predicate into_iter_pre'0 (self : slice (TrailIndex'0.t_trailindex)) =
    [%#span223] true

  let rec into_iter'0 (self:slice (TrailIndex'0.t_trailindex)) (return'  (ret:Iter'0.t_iter (TrailIndex'0.t_trailindex)))= {[@expl:precondition] [%#span225] inv'1 self}
    {[@expl:precondition] [%#span224] into_iter_pre'0 self}
    any
    [ return' (result:Iter'0.t_iter (TrailIndex'0.t_trailindex))-> {[%#span224] into_iter_post'0 self result}
      (! return' {result}) ]


  use prelude.prelude.Snapshot

  let rec max_level (self:Trail'0.t_trail) (assignments:slice (TrailIndex'0.t_trailindex)) (return'  (ret:usize))= {[%#strail20] forall i : int . 0
    <= i
    /\ i < Seq.length (shallow_model'0 assignments)  -> contains'0 self (index_logic'0 assignments i)}
    {[%#strail19] invariant'0 self}
    (! bb0
    [ bb0 = s0
      [ s0 =  [ &max <- [%#strail0] (0 : usize) ] s1
      | s1 =  [ &other <- [%#strail1] Snapshot.new (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) ] s2
      | s2 = bb1 ]

    | bb1 = s0
      [ s0 = into_iter'0 {assignments} (fun (_ret':Iter'0.t_iter (TrailIndex'0.t_trailindex)) ->  [ &iter <- _ret' ] s1)
      | s1 = bb2 ]

    | bb2 = s0 [ s0 =  [ &iter_old <- [%#strail2] Snapshot.new iter ] s1 | s1 = bb3 ]
    | bb3 = s0
      [ s0 =  [ &produced <- [%#strail3] Snapshot.new (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) ] s1
      | s1 = bb4 ]

    | bb4 = bb5
    | bb5 = bb5
      [ bb5 = {[@expl:loop invariant] [%#strail6] set_level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (abstract_justification'0 self (Seq.to_owned (Snapshot.inner produced)))
        = UIntSize.to_int max}
        {[@expl:loop invariant] [%#strail5] Snapshot.inner other = Seq.to_owned (Snapshot.inner produced)}
        {[@expl:loop invariant] [%#strail4] produces'0 (Snapshot.inner iter_old) (Snapshot.inner produced) iter}
        {[@expl:loop invariant] [%#strail4] inv'0 iter}
        (! s0) [ s0 = bb6 ]
        [ bb6 = s0
          [ s0 = Borrow.borrow_mut <Iter'0.t_iter (TrailIndex'0.t_trailindex)> {iter}
              (fun (_ret':borrowed (Iter'0.t_iter (TrailIndex'0.t_trailindex))) ->
                 [ &_23 <- _ret' ]
                 [ &iter <- _23.final ]
                s1)
          | s1 = Borrow.borrow_final <Iter'0.t_iter (TrailIndex'0.t_trailindex)> {_23.current} {Borrow.get_id _23}
              (fun (_ret':borrowed (Iter'0.t_iter (TrailIndex'0.t_trailindex))) ->
                 [ &_22 <- _ret' ]
                 [ &_23 <- { _23 with current = _22.final ; } ]
                s2)
          | s2 = next'0 {_22} (fun (_ret':Option'0.t_option (TrailIndex'0.t_trailindex)) ->  [ &_21 <- _ret' ] s3)
          | s3 = bb7 ]

        | bb7 = s0
          [ s0 = -{resolve'0 _23}- s1
          | s1 = any
            [ br0 -> {_21 = Option'0.C_None } (! bb10)
            | br1 (a:TrailIndex'0.t_trailindex)-> {_21 = Option'0.C_Some a} (! bb9) ]
             ]

        | bb9 = bb11
        | bb11 = s0
          [ s0 = Option'0.some <TrailIndex'0.t_trailindex> {_21}
              (fun (r0'0:TrailIndex'0.t_trailindex) ->  [ &__creusot_proc_iter_elem <- r0'0 ] s1)
          | s1 =
            [ &_26 <- [%#strail7] Snapshot.new (Seq.(++) (Snapshot.inner produced) (Seq.singleton __creusot_proc_iter_elem)) ]

            s2
          | s2 = bb12 ]

        | bb12 = s0
          [ s0 =  [ &produced <- _26 ]
            (any [ any_ (_any:Snapshot.snap_ty (Seq.seq (TrailIndex'0.t_trailindex)))-> (!  [ &_26 <- _any ] s1) ] )
          | s1 =  [ &ix <- __creusot_proc_iter_elem ] s2
          | s2 = {[@expl:assertion] [%#strail8] forall i : int . 0 <= i /\ i < Seq.length (Snapshot.inner produced)
             -> index_logic'0 assignments i = index_logic'1 produced i}
            s3
          | s3 =  [ &_31 <- [%#strail9] Snapshot.new (abs_just_snoc'0 self (Snapshot.inner other) ix) ] s4
          | s4 = bb13 ]

        | bb13 = s0
          [ s0 =  [ &just <- [%#strail10] Snapshot.new (abstract_justification'0 self (Snapshot.inner other)) ] s1
          | s1 = bb14 ]

        | bb14 = s0
          [ s0 = {[@expl:assertion] [%#strail11] set_level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (Snapshot.inner just)
            = UIntSize.to_int max}
            s1
          | s1 = TrailIndex'0.t_trailindex {ix}
              (fun (r0'0:usize) (r1'0:usize) -> UIntSize.ge {r0'0} {max} (fun (_ret':bool) ->  [ &_38 <- _ret' ] s2))
          | s2 = any [ br0 -> {_38 = false} (! bb17) | br1 -> {_38} (! bb15) ]  ]

        | bb15 = s0
          [ s0 = TrailIndex'0.t_trailindex {ix} (fun (r0'0:usize) (r1'0:usize) ->  [ &max <- r0'0 ] s1)
          | s1 = {[@expl:assertion] [%#strail12] level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'2 self ix)
            = UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)}
            s2
          | s2 =
            [ &_44 <- [%#strail13] Snapshot.new (set_level_max'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (Snapshot.inner just) (index_logic'2 self ix)) ]

            s3
          | s3 = bb16 ]

        | bb16 = bb19
        | bb17 = s0
          [ s0 = {[@expl:assertion] [%#strail14] Cdsat_Trail_TrailIndex_Type.trailindex_0 ix < max} s1
          | s1 =
            [ &_48 <- [%#strail15] Snapshot.new (set_level_min'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (Snapshot.inner just) (index_logic'2 self ix)) ]

            s2
          | s2 = bb18 ]

        | bb18 = bb19
        | bb19 = s0 [ s0 =  [ &_50 <- [%#strail16] Snapshot.new (Seq.snoc (Snapshot.inner other) ix) ] s1 | s1 = bb20 ]
        | bb20 = s0
          [ s0 =  [ &other <- _50 ]
            (any [ any_ (_any:Snapshot.snap_ty (Seq.seq (TrailIndex'0.t_trailindex)))-> (!  [ &_50 <- _any ] s1) ] )
          | s1 = {[@expl:assertion] [%#strail17] Seq.(==) (Snapshot.inner other) (Seq.to_owned (Snapshot.inner produced))}
            s2
          | s2 = bb5 ]
           ]
         ]

    | bb8 = {[%#strail4] false} any
    | bb10 = s0
      [ s0 = {[@expl:assertion] [%#strail18] Seq.(==) (Snapshot.inner other) (shallow_model'0 assignments)} s1
      | s1 =  [ &_0 <- max ] s2
      | s2 = return' {_0} ]
       ]
    )
    [ & _0 : usize = any_l ()
    | & self : Trail'0.t_trail = self
    | & assignments : slice (TrailIndex'0.t_trailindex) = assignments
    | & max : usize = any_l ()
    | & other : Snapshot.snap_ty (Seq.seq (TrailIndex'0.t_trailindex)) = any_l ()
    | & iter : Iter'0.t_iter (TrailIndex'0.t_trailindex) = any_l ()
    | & iter_old : Snapshot.snap_ty (Iter'0.t_iter (TrailIndex'0.t_trailindex)) = any_l ()
    | & produced : Snapshot.snap_ty (Seq.seq (TrailIndex'0.t_trailindex)) = any_l ()
    | & _21 : Option'0.t_option (TrailIndex'0.t_trailindex) = any_l ()
    | & _22 : borrowed (Iter'0.t_iter (TrailIndex'0.t_trailindex)) = any_l ()
    | & _23 : borrowed (Iter'0.t_iter (TrailIndex'0.t_trailindex)) = any_l ()
    | & __creusot_proc_iter_elem : TrailIndex'0.t_trailindex = any_l ()
    | & _26 : Snapshot.snap_ty (Seq.seq (TrailIndex'0.t_trailindex)) = any_l ()
    | & ix : TrailIndex'0.t_trailindex = any_l ()
    | & _31 : Snapshot.snap_ty () = any_l ()
    | & just : Snapshot.snap_ty (Fset.fset (Term'0.t_term, Value'0.t_value)) = any_l ()
    | & _38 : bool = any_l ()
    | & _44 : Snapshot.snap_ty () = any_l ()
    | & _48 : Snapshot.snap_ty () = any_l ()
    | & _50 : Snapshot.snap_ty (Seq.seq (TrailIndex'0.t_trailindex)) = any_l () ]

    [ return' (result:usize)-> {[@expl:postcondition] [%#strail21] set_level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (abstract_justification'0 self (shallow_model'0 assignments))
      = UIntSize.to_int result}
      (! return' {result}) ]

end
module Cdsat_Heap_ConflictHeap_Type
  use Alloc_Alloc_Global_Type as Global'0

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use Alloc_Vec_Vec_Type as Vec'0

  type t_conflictheap  =
    | C_ConflictHeap (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function any_l (_ : 'b) : 'a

  let rec t_conflictheap (input:t_conflictheap) (ret  (field_0:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)))= any
    [ good (field_0:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> {C_ConflictHeap field_0 = input}
      (! ret {field_0})
    | bad (field_0:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> {C_ConflictHeap field_0 <> input}
      {false}
      any ]


  function conflictheap_0 (self : t_conflictheap) : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) =
    match self with
      | C_ConflictHeap a -> a
      end
end
module Core_Mem_ManuallyDrop_ManuallyDrop_Type
  type t_manuallydrop 't =
    | C_ManuallyDrop 't

  function any_l (_ : 'b) : 'a

  let rec t_manuallydrop < 't > (input:t_manuallydrop 't) (ret  (value:'t))= any
    [ good (value:'t)-> {C_ManuallyDrop value = input} (! ret {value})
    | bad (value:'t)-> {C_ManuallyDrop value <> input} {false} any ]

end
module Alloc_Vec_IntoIter_IntoIter_Type
  use prelude.prelude.Opaque

  use Core_Mem_ManuallyDrop_ManuallyDrop_Type as ManuallyDrop'0

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  use Core_Marker_PhantomData_Type as PhantomData'0

  use Core_Ptr_NonNull_NonNull_Type as NonNull'0

  type t_intoiter 't 'a =
    | C_IntoIter (NonNull'0.t_nonnull 't) (PhantomData'0.t_phantomdata 't) usize (ManuallyDrop'0.t_manuallydrop 'a) (NonNull'0.t_nonnull 't) opaque_ptr

  function any_l (_ : 'b) : 'a

  let rec t_intoiter < 't > < 'a > (input:t_intoiter 't 'a) (ret  (buf:NonNull'0.t_nonnull 't) (phantom:PhantomData'0.t_phantomdata 't) (cap:usize) (alloc:ManuallyDrop'0.t_manuallydrop 'a) (ptr:NonNull'0.t_nonnull 't) (end':opaque_ptr))= any
    [ good (buf:NonNull'0.t_nonnull 't) (phantom:PhantomData'0.t_phantomdata 't) (cap:usize) (alloc:ManuallyDrop'0.t_manuallydrop 'a) (ptr:NonNull'0.t_nonnull 't) (end':opaque_ptr)-> {C_IntoIter buf phantom cap alloc ptr end'
      = input}
      (! ret {buf} {phantom} {cap} {alloc} {ptr} {end'})
    | bad (buf:NonNull'0.t_nonnull 't) (phantom:PhantomData'0.t_phantomdata 't) (cap:usize) (alloc:ManuallyDrop'0.t_manuallydrop 'a) (ptr:NonNull'0.t_nonnull 't) (end':opaque_ptr)-> {C_IntoIter buf phantom cap alloc ptr end'
      <> input}
      {false}
      any ]

end
module Cdsat_Heap_ToSet_Impl
  type t

  let%span sheap0 = "/Users/xavier/Code/cdsat/src/heap.rs" 96 13 96 14

  let%span sheap1 = "/Users/xavier/Code/cdsat/src/heap.rs" 94 0 94 61

  let%span sheap2 = "/Users/xavier/Code/cdsat/src/heap.rs" 96 28 96 35

  let%span sheap3 = "/Users/xavier/Code/cdsat/src/heap.rs" 95 10 95 17

  let%span span4 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span5 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span6 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 129 8 129 78

  use set.Fset

  predicate invariant'2 (self : Fset.fset t)

  predicate inv'2 (_x : Fset.fset t)

  axiom inv'2 : forall x : Fset.fset t . inv'2 x = true

  predicate invariant'1 (self : t)

  predicate inv'1 (_x : t)

  axiom inv'1 : forall x : t . inv'1 x = true

  use seq.Seq

  predicate invariant'0 (self : Seq.seq t)

  predicate inv'0 (_x : Seq.seq t)

  axiom inv'0 : forall x : Seq.seq t . inv'0 x = true

  use set.Fset

  function insert'0 [@inline:trivial] (self : Fset.fset t) (e : t) : Fset.fset t =
    [%#span4] Fset.add e self

  use seq.Seq

  use prelude.seq_ext.SeqExt

  use prelude.prelude.Int

  use set.Fset

  use seq.Seq

  use seq.Seq

  use set.Fset

  predicate contains'1 [@inline:trivial] (self : Fset.fset t) (e : t) =
    [%#span5] Fset.mem e self

  predicate contains'0 (self : Seq.seq t) (e : t) =
    [%#span6] exists i : int . 0 <= i /\ i < Seq.length self /\ Seq.get self i = e

  constant s  : Seq.seq t

  function to_set [#"/Users/xavier/Code/cdsat/src/heap.rs" 96 0 96 35] (s : Seq.seq t) : Fset.fset t

  goal vc_to_set : ([%#sheap0] inv'0 s)
   -> (if s = (Seq.empty : Seq.seq t) then
    let result = Fset.empty : Fset.fset t in ([%#sheap2] inv'2 result)
    && ([%#sheap1] forall x : t . inv'1 x  -> contains'0 s x = contains'1 result x)
  else
    (([%#sheap0] inv'0 (SeqExt.subsequence s 1 (Seq.length s)))
    /\ 0 <= ([%#sheap3] Seq.length s)
    /\ ([%#sheap3] Seq.length (SeqExt.subsequence s 1 (Seq.length s))) < ([%#sheap3] Seq.length s))
    /\ (([%#sheap2] inv'2 (to_set (SeqExt.subsequence s 1 (Seq.length s))))
    && ([%#sheap1] forall x : t . inv'1 x
     -> contains'0 (SeqExt.subsequence s 1 (Seq.length s)) x
    = contains'1 (to_set (SeqExt.subsequence s 1 (Seq.length s))) x)
     -> (let result = insert'0 (to_set (SeqExt.subsequence s 1 (Seq.length s))) (Seq.get s 0) in ([%#sheap2] inv'2 result)
    && ([%#sheap1] forall x : t . inv'1 x  -> contains'0 s x = contains'1 result x)))
  )
end
module Cdsat_Heap_Impl2_ShallowModel_Impl
  let%span sheap0 = "/Users/xavier/Code/cdsat/src/heap.rs" 88 21 88 25

  let%span sheap1 = "/Users/xavier/Code/cdsat/src/heap.rs" 87 4 87 71

  let%span svec2 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span svec3 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span svec4 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span sheap5 = "/Users/xavier/Code/cdsat/src/heap.rs" 96 13 96 14

  let%span sheap6 = "/Users/xavier/Code/cdsat/src/heap.rs" 94 0 94 61

  let%span sheap7 = "/Users/xavier/Code/cdsat/src/heap.rs" 96 28 96 35

  let%span sheap8 = "/Users/xavier/Code/cdsat/src/heap.rs" 95 10 95 17

  let%span span9 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span10 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  let%span span11 = "/Users/xavier/Code/cdsat/src/trail.rs" 146 14 146 59

  let%span span12 = "/Users/xavier/Code/cdsat/src/trail.rs" 140 15 140 48

  let%span span13 = "/Users/xavier/Code/cdsat/src/trail.rs" 141 14 141 44

  let%span span14 = "/Users/xavier/Code/cdsat/src/trail.rs" 134 15 134 45

  let%span span15 = "/Users/xavier/Code/cdsat/src/trail.rs" 135 14 135 47

  let%span span16 = "/Users/xavier/Code/cdsat/src/trail.rs" 127 15 127 32

  let%span span17 = "/Users/xavier/Code/cdsat/src/trail.rs" 128 15 128 32

  let%span span18 = "/Users/xavier/Code/cdsat/src/trail.rs" 129 14 129 31

  let%span span19 = "/Users/xavier/Code/cdsat/src/trail.rs" 122 14 122 45

  let%span span20 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 41 20 41 56

  let%span span21 = "/Users/xavier/Code/cdsat/src/trail.rs" 117 14 117 64

  let%span span22 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 31 20 31 53

  let%span span23 = "/Users/xavier/Code/cdsat/src/trail.rs" 112 14 112 61

  let%span span24 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 21 20 21 53

  let%span span25 = "/Users/xavier/Code/cdsat/src/trail.rs" 107 14 107 61

  let%span span26 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 11 20 11 56

  let%span span27 = "/Users/xavier/Code/cdsat/src/trail.rs" 102 14 102 64

  let%span span28 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 14 70 15

  let%span span29 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 23 70 24

  let%span span30 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 69 14 69 59

  let%span span31 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 64 15 64 48

  let%span span32 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 16 66 17

  let%span span33 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 25 66 26

  let%span span34 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 65 14 65 44

  let%span span35 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 59 15 59 45

  let%span span36 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 16 61 17

  let%span span37 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 25 61 26

  let%span span38 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 60 14 60 47

  let%span span39 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 53 15 53 32

  let%span span40 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 54 15 54 32

  let%span span41 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 13 56 14

  let%span span42 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 22 56 23

  let%span span43 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 31 56 32

  let%span span44 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 55 14 55 31

  let%span span45 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 50 12 50 13

  let%span span46 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 49 14 49 45

  let%span span47 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 18 46 19

  let%span span48 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 27 46 28

  let%span span49 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 45 14 45 64

  let%span span50 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 18 36 19

  let%span span51 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 27 36 28

  let%span span52 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 35 14 35 61

  let%span span53 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 18 26 19

  let%span span54 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 27 26 28

  let%span span55 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 25 14 25 61

  let%span span56 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 18 16 19

  let%span span57 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 27 16 28

  let%span span58 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 15 14 15 64

  let%span span59 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span60 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span61 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span62 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 138 8 140 9

  let%span span63 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 149 8 149 40

  let%span span64 = "/Users/xavier/Code/cdsat/src/trail.rs" 829 4 829 98

  let%span span65 = "/Users/xavier/Code/cdsat/src/heap.rs" 10 4 10 16

  let%span span66 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span67 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span68 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 129 8 129 78

  let%span span69 = "/Users/xavier/Code/cdsat/src/heap.rs" 93 0 93 8

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function eq_cmp'2 (_1 : usize) (_2 : usize) : ()

  function antisym2'2 (_1 : usize) (_2 : usize) : ()

  function antisym1'2 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'2 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'2 (_1 : usize) : ()

  function cmp_gt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'2 (_1 : usize) (_2 : usize) : ()

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span9] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span10] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  function eq_cmp'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 147 4 147 31] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom eq_cmp'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span11] (x = y)
  = (cmp_log'0 x y = Ordering'0.C_Equal)

  function antisym2'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 142 4 142 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom antisym2'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span12] cmp_log'0 x y
  = Ordering'0.C_Greater)  -> ([%#span13] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 136 4 136 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom antisym1'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span14] cmp_log'0 x y
  = Ordering'0.C_Less)  -> ([%#span15] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 130 4 130 52] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span16] cmp_log'0 x y
  = o)  -> ([%#span17] cmp_log'0 y z = o)  -> ([%#span18] cmp_log'0 x z = o)

  function refl'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 123 4 123 20] (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'1_spec : forall x : TrailIndex'0.t_trailindex . [%#span19] cmp_log'0 x x = Ordering'0.C_Equal

  function gt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span20] cmp_log'0 self o = Ordering'0.C_Greater

  function cmp_gt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 118 4 118 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_gt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span21] gt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Greater)

  function ge_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span22] cmp_log'0 self o <> Ordering'0.C_Less

  function cmp_ge_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 113 4 113 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_ge_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span23] ge_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Less)

  function lt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span24] cmp_log'0 self o = Ordering'0.C_Less

  function cmp_lt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 108 4 108 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_lt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span25] lt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Less)

  function le_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span26] cmp_log'0 self o <> Ordering'0.C_Greater

  function cmp_le_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 103 4 103 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_le_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span27] le_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Greater)

  predicate inv'3 (_x : TrailIndex'0.t_trailindex)

  function eq_cmp'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom eq_cmp'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span28] inv'3 x)
   -> ([%#span29] inv'3 y)  -> ([%#span30] (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal))

  function antisym2'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym2'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span31] cmp_log'0 x y
  = Ordering'0.C_Greater)
   -> ([%#span32] inv'3 x)  -> ([%#span33] inv'3 y)  -> ([%#span34] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym1'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span35] cmp_log'0 x y
  = Ordering'0.C_Less)
   -> ([%#span36] inv'3 x)  -> ([%#span37] inv'3 y)  -> ([%#span38] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span39] cmp_log'0 x y
  = o)
   -> ([%#span40] cmp_log'0 y z = o)
   -> ([%#span41] inv'3 x)  -> ([%#span42] inv'3 y)  -> ([%#span43] inv'3 z)  -> ([%#span44] cmp_log'0 x z = o)

  function refl'0 (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'0_spec : forall x : TrailIndex'0.t_trailindex . ([%#span45] inv'3 x)
   -> ([%#span46] cmp_log'0 x x = Ordering'0.C_Equal)

  function cmp_gt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_gt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span47] inv'3 x)
   -> ([%#span48] inv'3 y)  -> ([%#span49] gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater))

  function cmp_ge_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_ge_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span50] inv'3 x)
   -> ([%#span51] inv'3 y)  -> ([%#span52] ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less))

  function cmp_lt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_lt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span53] inv'3 x)
   -> ([%#span54] inv'3 y)  -> ([%#span55] lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less))

  function cmp_le_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_le_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span56] inv'3 x)
   -> ([%#span57] inv'3 y)  -> ([%#span58] le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater))

  use set.Fset

  predicate invariant'4 (self : Fset.fset (TrailIndex'0.t_trailindex)) =
    [%#span59] true

  predicate inv'4 (_x : Fset.fset (TrailIndex'0.t_trailindex))

  axiom inv'4 : forall x : Fset.fset (TrailIndex'0.t_trailindex) . inv'4 x = true

  predicate invariant'3 (self : TrailIndex'0.t_trailindex) =
    [%#span59] true

  axiom inv'3 : forall x : TrailIndex'0.t_trailindex . inv'3 x = true

  use seq.Seq

  predicate invariant'2 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span59] true

  predicate inv'2 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'2 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'2 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  constant max'0 : usize = [%#span60] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'1 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function shallow_model'0 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom shallow_model'0_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#svec2] inv'1 self)
   -> ([%#svec4] inv'2 (shallow_model'0 self))
  && ([%#svec3] Seq.length (shallow_model'0 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'1 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span61] inv'2 (shallow_model'0 self)

  axiom inv'1 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'1 x = true

  use seq.Seq

  predicate sorted_range'0 (self : Seq.seq (TrailIndex'0.t_trailindex)) (l : int) (u : int) =
    [%#span62] forall j : int . forall i : int . l <= i /\ i <= j /\ j < u
     -> le_log'0 (Seq.get self i) (Seq.get self j)

  predicate sorted'0 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span63] sorted_range'0 self 0 (Seq.length self)

  predicate seq_unique'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 828 0 828 46] (s : Seq.seq (TrailIndex'0.t_trailindex))

   =
    [%#span64] forall j : int . forall i : int . 0 <= i /\ i <= j /\ j < Seq.length s
     -> i <> j  -> Seq.get s i <> Seq.get s j

  use Cdsat_Heap_ConflictHeap_Type as Cdsat_Heap_ConflictHeap_Type

  use Cdsat_Heap_ConflictHeap_Type as ConflictHeap'0

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/heap.rs" 12 4 12 30] (self : ConflictHeap'0.t_conflictheap) =
    [%#span65] seq_unique'0 (shallow_model'0 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self))
    /\ sorted'0 (shallow_model'0 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self))

  predicate inv'0 (_x : ConflictHeap'0.t_conflictheap)

  axiom inv'0 : forall x : ConflictHeap'0.t_conflictheap . inv'0 x
  = (invariant'0 x
  /\ match x with
    | ConflictHeap'0.C_ConflictHeap a_0 -> true
    end)

  use set.Fset

  function insert'0 [@inline:trivial] (self : Fset.fset (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) : Fset.fset (TrailIndex'0.t_trailindex)

   =
    [%#span66] Fset.add e self

  use prelude.seq_ext.SeqExt

  use set.Fset

  use seq.Seq

  use set.Fset

  predicate contains'1 [@inline:trivial] (self : Fset.fset (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex)
   =
    [%#span67] Fset.mem e self

  predicate contains'0 (self : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) =
    [%#span68] exists i : int . 0 <= i /\ i < Seq.length self /\ Seq.get self i = e

  function to_set'0 [#"/Users/xavier/Code/cdsat/src/heap.rs" 96 0 96 35] (s : Seq.seq (TrailIndex'0.t_trailindex)) : Fset.fset (TrailIndex'0.t_trailindex)


  axiom to_set'0_def : forall s : Seq.seq (TrailIndex'0.t_trailindex) . to_set'0 s
  = ([%#span69] if s = (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) then
    Fset.empty  : Fset.fset (TrailIndex'0.t_trailindex)
  else
    insert'0 (to_set'0 (SeqExt.subsequence s 1 (Seq.length s))) (Seq.get s 0)
  )

  axiom to_set'0_spec : forall s : Seq.seq (TrailIndex'0.t_trailindex) . ([%#sheap5] inv'2 s)
   -> ([%#sheap7] inv'4 (to_set'0 s))
  && ([%#sheap6] forall x : TrailIndex'0.t_trailindex . inv'3 x  -> contains'0 s x = contains'1 (to_set'0 s) x)

  constant self  : ConflictHeap'0.t_conflictheap

  function shallow_model [#"/Users/xavier/Code/cdsat/src/heap.rs" 88 4 88 50] (self : ConflictHeap'0.t_conflictheap) : Fset.fset (TrailIndex'0.t_trailindex)


  goal vc_shallow_model : ([%#sheap0] inv'0 self)
   -> ([%#svec2] inv'1 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self))
  /\ (([%#svec4] inv'2 (shallow_model'0 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self)))
  && ([%#svec3] Seq.length (shallow_model'0 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self))
  <= UIntSize.to_int (max'0 : usize))
   -> ([%#sheap5] inv'2 (shallow_model'0 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self)))
  /\ (([%#sheap7] inv'4 (to_set'0 (shallow_model'0 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self))))
  && ([%#sheap6] forall x : TrailIndex'0.t_trailindex . inv'3 x
   -> contains'0 (shallow_model'0 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self)) x
  = contains'1 (to_set'0 (shallow_model'0 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self))) x)
   -> ([%#sheap1] forall x : TrailIndex'0.t_trailindex . contains'0 (shallow_model'0 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self)) x
  = contains'1 (to_set'0 (shallow_model'0 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self))) x)))
end
module Cdsat_Theory_Conflict_Type
  use Cdsat_Theory_Value_Type as Value'0

  use Cdsat_Theory_Term_Type as Term'0

  use set.Fset

  use Cdsat_Theory_Trail_Type as Trail'0

  type t_conflict  =
    | C_Conflict (Trail'0.t_trail) (Fset.fset (Term'0.t_term, Value'0.t_value))

  function any_l (_ : 'b) : 'a

  let rec t_conflict (input:t_conflict) (ret  (field_0:Trail'0.t_trail) (field_1:Fset.fset (Term'0.t_term, Value'0.t_value)))= any
    [ good (field_0:Trail'0.t_trail) (field_1:Fset.fset (Term'0.t_term, Value'0.t_value))-> {C_Conflict field_0 field_1
      = input}
      (! ret {field_0} {field_1})
    | bad (field_0:Trail'0.t_trail) (field_1:Fset.fset (Term'0.t_term, Value'0.t_value))-> {C_Conflict field_0 field_1
      <> input}
      {false}
      any ]


  function conflict_1 (self : t_conflict) : Fset.fset (Term'0.t_term, Value'0.t_value) =
    match self with
      | C_Conflict _ a -> a
      end

  function conflict_0 (self : t_conflict) : Trail'0.t_trail =
    match self with
      | C_Conflict a _ -> a
      end
end
module Cdsat_Trail_IxToAbs_Impl
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 780 0 780 79

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 781 0 781 102

  let%span strail2 = "/Users/xavier/Code/cdsat/src/trail.rs" 779 10 779 17

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span4 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span5 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span6 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span7 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span8 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span9 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span10 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span11 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span12 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span13 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span14 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span15 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span16 = "/Users/xavier/Code/cdsat/src/term.rs" 195 8 225 9

  let%span span17 = "/Users/xavier/Code/cdsat/src/term.rs" 180 8 180 25

  let%span span18 = "/Users/xavier/Code/cdsat/src/trail.rs" 726 8 726 61

  let%span span19 = "/Users/xavier/Code/cdsat/src/trail.rs" 646 8 648 9

  use Cdsat_Trail_Assignment_Type as Assignment'0

  use seq.Seq

  predicate invariant'3 (self : Seq.seq (Assignment'0.t_assignment)) =
    [%#span3] true

  predicate inv'3 (_x : Seq.seq (Assignment'0.t_assignment))

  axiom inv'3 : forall x : Seq.seq (Assignment'0.t_assignment) . inv'3 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  constant max'0 : usize = [%#span4] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'2 (_x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

  function shallow_model'1 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) : Seq.seq (Assignment'0.t_assignment)


  axiom shallow_model'1_spec : forall self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . ([%#span5] inv'2 self)
   -> ([%#span7] inv'3 (shallow_model'1 self))
  && ([%#span6] Seq.length (shallow_model'1 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'2 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span8] inv'3 (shallow_model'1 self)

  axiom inv'2 : forall x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . inv'2 x = true

  predicate invariant'1 (self : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span3] true

  predicate inv'1 (_x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'1 : forall x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'1 x = true

  use seq.Seq

  predicate inv'0 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  function shallow_model'0 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))


  axiom shallow_model'0_spec : forall self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . ([%#span5] inv'0 self)
   -> ([%#span7] inv'1 (shallow_model'0 self))
  && ([%#span6] Seq.length (shallow_model'0 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'0 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span8] inv'1 (shallow_model'0 self)

  axiom inv'0 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'0 x
  = true

  use set.Fset

  use Cdsat_Theory_Value_Type as Value'0

  use Cdsat_Theory_Term_Type as Term'0

  use set.Fset

  function insert'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span9] Fset.add e self

  use set.Fset

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  function remove'0 [@inline:trivial] (self : Fset.fset (TrailIndex'0.t_trailindex)) (a : TrailIndex'0.t_trailindex) : Fset.fset (TrailIndex'0.t_trailindex)

   =
    [%#span10] Fset.remove a self

  use set.Fset

  use set.Fset

  use set.Fset

  use Cdsat_Trail_Trail_Type as Trail'0

  use set.Fset

  use set.Fset

  predicate contains'1 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span11] Fset.mem e self

  use prelude.prelude.Borrow

  use Cdsat_Term_Value_Type as Value'1

  use Cdsat_Term_Term_Type as Term'1

  use prelude.prelude.Real

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  function deep_model'4 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span12] match self with
      | Value'1.C_Bool b -> Value'0.C_Bool b
      | Value'1.C_Rat br -> Value'0.C_Rat (deep_model'4 br)
      end

  function shallow_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span13] deep_model'1 self

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  use Cdsat_Theory_Sort_Type as Sort'1

  use Cdsat_Term_Sort_Type as Sort'0

  use Cdsat_Theory_Var_Type as Var'0

  function deep_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'0.t_sort) : Sort'1.t_sort =
    [%#span14] match self with
      | Sort'0.C_Boolean -> Sort'1.C_Boolean
      | Sort'0.C_Rational -> Sort'1.C_Rational
      end

  function deep_model'2 (self : usize) : int =
    [%#span15] UIntSize.to_int self

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 193 4 193 44] (self : Term'1.t_term) : Term'0.t_term =
    [%#span16] match self with
      | Term'1.C_Variable v s -> Term'0.C_Variable (Var'0.C_Var (deep_model'2 v) (deep_model'3 s))
      | Term'1.C_Value v -> Term'0.C_Value (deep_model'1 v)
      | Term'1.C_Plus l r -> Term'0.C_Plus (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Eq l r -> Term'0.C_Eq (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Conj l r -> Term'0.C_Conj (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Disj l r -> Term'0.C_Disj (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Neg t -> Term'0.C_Neg (deep_model'0 t)
      | Term'1.C_Impl l r -> Term'0.C_Disj (Term'0.C_Neg (deep_model'0 l)) (deep_model'0 r)
      | Term'1.C_Times l r -> Term'0.C_Plus (Term'0.C_Value (Value'0.C_Rat (deep_model'4 l))) (deep_model'0 r)
      | Term'1.C_Lt l r -> Term'0.C_Eq (deep_model'0 l) (deep_model'0 r)
      end

  function shallow_model'2 [#"/Users/xavier/Code/cdsat/src/term.rs" 179 4 179 50] (self : Term'1.t_term) : Term'0.t_term
   =
    [%#span17] deep_model'0 self

  function term_value'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 725 4 725 61] (self : Assignment'0.t_assignment) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span18] (shallow_model'2 (Cdsat_Trail_Assignment_Type.assignment_term self), shallow_model'3 (Cdsat_Trail_Assignment_Type.assignment_val self))

  use seq.Seq

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  use seq.Seq

  use Cdsat_Trail_Trail_Type as Cdsat_Trail_Trail_Type

  function index_logic'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 645 4 645 77] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span19] term_value'0 (Seq.get (shallow_model'1 (Seq.get (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)))) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)))

  use set.Fset

  predicate contains'0 [@inline:trivial] (self : Fset.fset (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex)
   =
    [%#span11] Fset.mem e self

  constant t  : Trail'0.t_trail

  constant s  : Fset.fset (TrailIndex'0.t_trailindex)

  function ix_to_abs [#"/Users/xavier/Code/cdsat/src/trail.rs" 782 0 782 93] (t : Trail'0.t_trail) (s : Fset.fset (TrailIndex'0.t_trailindex)) : Fset.fset (Term'0.t_term, Value'0.t_value)


  goal vc_ix_to_abs : if s = (Fset.empty : Fset.fset (TrailIndex'0.t_trailindex)) then
    let result = Fset.empty : Fset.fset (Term'0.t_term, Value'0.t_value) in ([%#strail1] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 result a
     -> (exists ix : TrailIndex'0.t_trailindex . a = index_logic'0 t ix /\ contains'0 s ix))
    && ([%#strail0] forall ix : TrailIndex'0.t_trailindex . contains'0 s ix  -> contains'1 result (index_logic'0 t ix))
  else
    let a = Fset.pick s in (0 <= ([%#strail2] Fset.cardinal s)
    /\ ([%#strail2] Fset.cardinal (remove'0 s a)) < ([%#strail2] Fset.cardinal s))
    /\ (([%#strail1] forall a' : (Term'0.t_term, Value'0.t_value) . contains'1 (ix_to_abs t (remove'0 s a)) a'
     -> (exists ix : TrailIndex'0.t_trailindex . a' = index_logic'0 t ix /\ contains'0 (remove'0 s a) ix))
    && ([%#strail0] forall ix : TrailIndex'0.t_trailindex . contains'0 (remove'0 s a) ix
     -> contains'1 (ix_to_abs t (remove'0 s a)) (index_logic'0 t ix))
     -> (let result = insert'0 (ix_to_abs t (remove'0 s a)) (index_logic'0 t a) in ([%#strail1] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 result a
     -> (exists ix : TrailIndex'0.t_trailindex . a = index_logic'0 t ix /\ contains'0 s ix))
    && ([%#strail0] forall ix : TrailIndex'0.t_trailindex . contains'0 s ix
     -> contains'1 result (index_logic'0 t ix))))

end
module Cdsat_Trail_SetMax_Impl
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 834 11 834 24

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 836 10 836 28

  let%span strail2 = "/Users/xavier/Code/cdsat/src/trail.rs" 837 0 837 56

  let%span strail3 = "/Users/xavier/Code/cdsat/src/trail.rs" 835 10 835 17

  let%span span4 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span5 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span6 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  let%span span7 = "/Users/xavier/Code/cdsat/src/trail.rs" 146 14 146 59

  let%span span8 = "/Users/xavier/Code/cdsat/src/trail.rs" 144 4 144 10

  let%span span9 = "/Users/xavier/Code/cdsat/src/trail.rs" 140 15 140 48

  let%span span10 = "/Users/xavier/Code/cdsat/src/trail.rs" 141 14 141 44

  let%span span11 = "/Users/xavier/Code/cdsat/src/trail.rs" 138 4 138 10

  let%span span12 = "/Users/xavier/Code/cdsat/src/trail.rs" 134 15 134 45

  let%span span13 = "/Users/xavier/Code/cdsat/src/trail.rs" 135 14 135 47

  let%span span14 = "/Users/xavier/Code/cdsat/src/trail.rs" 132 4 132 10

  let%span span15 = "/Users/xavier/Code/cdsat/src/trail.rs" 127 15 127 32

  let%span span16 = "/Users/xavier/Code/cdsat/src/trail.rs" 128 15 128 32

  let%span span17 = "/Users/xavier/Code/cdsat/src/trail.rs" 129 14 129 31

  let%span span18 = "/Users/xavier/Code/cdsat/src/trail.rs" 125 4 125 10

  let%span span19 = "/Users/xavier/Code/cdsat/src/trail.rs" 122 14 122 45

  let%span span20 = "/Users/xavier/Code/cdsat/src/trail.rs" 120 4 120 10

  let%span span21 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 41 20 41 56

  let%span span22 = "/Users/xavier/Code/cdsat/src/trail.rs" 117 14 117 64

  let%span span23 = "/Users/xavier/Code/cdsat/src/trail.rs" 115 4 115 10

  let%span span24 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 31 20 31 53

  let%span span25 = "/Users/xavier/Code/cdsat/src/trail.rs" 112 14 112 61

  let%span span26 = "/Users/xavier/Code/cdsat/src/trail.rs" 110 4 110 10

  let%span span27 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 21 20 21 53

  let%span span28 = "/Users/xavier/Code/cdsat/src/trail.rs" 107 14 107 61

  let%span span29 = "/Users/xavier/Code/cdsat/src/trail.rs" 105 4 105 10

  let%span span30 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 11 20 11 56

  let%span span31 = "/Users/xavier/Code/cdsat/src/trail.rs" 102 14 102 64

  let%span span32 = "/Users/xavier/Code/cdsat/src/trail.rs" 100 4 100 10

  let%span span33 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 14 70 15

  let%span span34 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 23 70 24

  let%span span35 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 69 14 69 59

  let%span span36 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 64 15 64 48

  let%span span37 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 16 66 17

  let%span span38 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 25 66 26

  let%span span39 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 65 14 65 44

  let%span span40 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 59 15 59 45

  let%span span41 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 16 61 17

  let%span span42 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 25 61 26

  let%span span43 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 60 14 60 47

  let%span span44 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 53 15 53 32

  let%span span45 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 54 15 54 32

  let%span span46 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 13 56 14

  let%span span47 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 22 56 23

  let%span span48 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 31 56 32

  let%span span49 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 55 14 55 31

  let%span span50 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 50 12 50 13

  let%span span51 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 49 14 49 45

  let%span span52 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 18 46 19

  let%span span53 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 27 46 28

  let%span span54 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 45 14 45 64

  let%span span55 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 18 36 19

  let%span span56 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 27 36 28

  let%span span57 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 35 14 35 61

  let%span span58 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 18 26 19

  let%span span59 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 27 26 28

  let%span span60 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 25 14 25 61

  let%span span61 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 18 16 19

  let%span span62 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 27 16 28

  let%span span63 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 15 14 15 64

  let%span span64 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span65 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function eq_cmp'2 (_1 : usize) (_2 : usize) : ()

  function antisym2'2 (_1 : usize) (_2 : usize) : ()

  function antisym1'2 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'2 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'2 (_1 : usize) : ()

  function cmp_gt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'2 (_1 : usize) (_2 : usize) : ()

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  predicate invariant'0 (self : TrailIndex'0.t_trailindex) =
    [%#span4] true

  predicate inv'0 (_x : TrailIndex'0.t_trailindex)

  axiom inv'0 : forall x : TrailIndex'0.t_trailindex . inv'0 x = true

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span5] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span6] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  function eq_cmp'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 147 4 147 31] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span8] ()

  axiom eq_cmp'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span7] (x = y)
  = (cmp_log'0 x y = Ordering'0.C_Equal)

  function antisym2'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 142 4 142 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span11] ()

  axiom antisym2'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span9] cmp_log'0 x y
  = Ordering'0.C_Greater)  -> ([%#span10] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 136 4 136 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span14] ()

  axiom antisym1'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span12] cmp_log'0 x y
  = Ordering'0.C_Less)  -> ([%#span13] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 130 4 130 52] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()

   =
    [%#span18] ()

  axiom trans'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span15] cmp_log'0 x y
  = o)  -> ([%#span16] cmp_log'0 y z = o)  -> ([%#span17] cmp_log'0 x z = o)

  function refl'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 123 4 123 20] (x : TrailIndex'0.t_trailindex) : () =
    [%#span20] ()

  axiom refl'1_spec : forall x : TrailIndex'0.t_trailindex . [%#span19] cmp_log'0 x x = Ordering'0.C_Equal

  function gt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span21] cmp_log'0 self o = Ordering'0.C_Greater

  function cmp_gt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 118 4 118 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span23] ()

  axiom cmp_gt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span22] gt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Greater)

  function ge_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span24] cmp_log'0 self o <> Ordering'0.C_Less

  function cmp_ge_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 113 4 113 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span26] ()

  axiom cmp_ge_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span25] ge_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Less)

  function lt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span27] cmp_log'0 self o = Ordering'0.C_Less

  function cmp_lt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 108 4 108 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span29] ()

  axiom cmp_lt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span28] lt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Less)

  function le_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span30] cmp_log'0 self o <> Ordering'0.C_Greater

  function cmp_le_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 103 4 103 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span32] ()

  axiom cmp_le_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span31] le_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Greater)

  function eq_cmp'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom eq_cmp'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span33] inv'0 x)
   -> ([%#span34] inv'0 y)  -> ([%#span35] (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal))

  function antisym2'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym2'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span36] cmp_log'0 x y
  = Ordering'0.C_Greater)
   -> ([%#span37] inv'0 x)  -> ([%#span38] inv'0 y)  -> ([%#span39] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym1'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span40] cmp_log'0 x y
  = Ordering'0.C_Less)
   -> ([%#span41] inv'0 x)  -> ([%#span42] inv'0 y)  -> ([%#span43] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span44] cmp_log'0 x y
  = o)
   -> ([%#span45] cmp_log'0 y z = o)
   -> ([%#span46] inv'0 x)  -> ([%#span47] inv'0 y)  -> ([%#span48] inv'0 z)  -> ([%#span49] cmp_log'0 x z = o)

  function refl'0 (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'0_spec : forall x : TrailIndex'0.t_trailindex . ([%#span50] inv'0 x)
   -> ([%#span51] cmp_log'0 x x = Ordering'0.C_Equal)

  function cmp_gt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_gt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span52] inv'0 x)
   -> ([%#span53] inv'0 y)  -> ([%#span54] gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater))

  function cmp_ge_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_ge_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span55] inv'0 x)
   -> ([%#span56] inv'0 y)  -> ([%#span57] ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less))

  function cmp_lt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_lt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span58] inv'0 x)
   -> ([%#span59] inv'0 y)  -> ([%#span60] lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less))

  function cmp_le_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_le_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span61] inv'0 x)
   -> ([%#span62] inv'0 y)  -> ([%#span63] le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater))

  use set.Fset

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (TrailIndex'0.t_trailindex)) (a : TrailIndex'0.t_trailindex) : Fset.fset (TrailIndex'0.t_trailindex)

   =
    [%#span64] Fset.remove a self

  use set.Fset

  use set.Fset

  use set.Fset

  predicate contains'0 [@inline:trivial] (self : Fset.fset (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex)
   =
    [%#span65] Fset.mem e self

  use set.Fset

  constant s  : Fset.fset (TrailIndex'0.t_trailindex)

  function set_max [#"/Users/xavier/Code/cdsat/src/trail.rs" 838 0 838 56] (s : Fset.fset (TrailIndex'0.t_trailindex)) : TrailIndex'0.t_trailindex


  goal vc_set_max : ([%#strail0] not Fset.is_empty s)
   -> (let x = Fset.pick s in let s_1 = remove'0 s x in if Fset.is_empty s_1 then
    let result = x in ([%#strail2] forall o : TrailIndex'0.t_trailindex . contains'0 s o  -> le_log'0 o result)
    && ([%#strail1] contains'0 s result)
  else
    (([%#strail0] not Fset.is_empty s_1)
    /\ 0 <= ([%#strail3] Fset.cardinal s) /\ ([%#strail3] Fset.cardinal s_1) < ([%#strail3] Fset.cardinal s))
    /\ (([%#strail2] forall o : TrailIndex'0.t_trailindex . contains'0 s_1 o  -> le_log'0 o (set_max s_1))
    && ([%#strail1] contains'0 s_1 (set_max s_1))
     -> (let rec' = set_max s_1 in if ge_log'0 x rec' then
      let result = x in ([%#strail2] forall o : TrailIndex'0.t_trailindex . contains'0 s o  -> le_log'0 o result)
      && ([%#strail1] contains'0 s result)
    else
      let result = rec' in ([%#strail2] forall o : TrailIndex'0.t_trailindex . contains'0 s o  -> le_log'0 o result)
      && ([%#strail1] contains'0 s result)
    ))
  )
end
module Cdsat_Trail_IxToAbsLevel_Impl
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 856 11 856 24

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 858 0 858 57

  let%span strail2 = "/Users/xavier/Code/cdsat/src/trail.rs" 859 0 859 90

  let%span strail3 = "/Users/xavier/Code/cdsat/src/trail.rs" 860 0 860 68

  let%span strail4 = "/Users/xavier/Code/cdsat/src/trail.rs" 857 10 857 17

  let%span strail5 = "/Users/xavier/Code/cdsat/src/trail.rs" 834 11 834 24

  let%span strail6 = "/Users/xavier/Code/cdsat/src/trail.rs" 836 10 836 28

  let%span strail7 = "/Users/xavier/Code/cdsat/src/trail.rs" 837 0 837 56

  let%span strail8 = "/Users/xavier/Code/cdsat/src/trail.rs" 835 10 835 17

  let%span strail9 = "/Users/xavier/Code/cdsat/src/trail.rs" 780 0 780 79

  let%span strail10 = "/Users/xavier/Code/cdsat/src/trail.rs" 781 0 781 102

  let%span strail11 = "/Users/xavier/Code/cdsat/src/trail.rs" 779 10 779 17

  let%span strail12 = "/Users/xavier/Code/cdsat/src/trail.rs" 854 0 854 8

  let%span stheory13 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span stheory14 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span strail15 = "/Users/xavier/Code/cdsat/src/trail.rs" 854 0 854 8

  let%span span16 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span17 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span18 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span19 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span20 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span21 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span22 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span23 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span24 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span25 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  let%span span26 = "/Users/xavier/Code/cdsat/src/trail.rs" 146 14 146 59

  let%span span27 = "/Users/xavier/Code/cdsat/src/trail.rs" 144 4 144 10

  let%span span28 = "/Users/xavier/Code/cdsat/src/trail.rs" 140 15 140 48

  let%span span29 = "/Users/xavier/Code/cdsat/src/trail.rs" 141 14 141 44

  let%span span30 = "/Users/xavier/Code/cdsat/src/trail.rs" 138 4 138 10

  let%span span31 = "/Users/xavier/Code/cdsat/src/trail.rs" 134 15 134 45

  let%span span32 = "/Users/xavier/Code/cdsat/src/trail.rs" 135 14 135 47

  let%span span33 = "/Users/xavier/Code/cdsat/src/trail.rs" 132 4 132 10

  let%span span34 = "/Users/xavier/Code/cdsat/src/trail.rs" 127 15 127 32

  let%span span35 = "/Users/xavier/Code/cdsat/src/trail.rs" 128 15 128 32

  let%span span36 = "/Users/xavier/Code/cdsat/src/trail.rs" 129 14 129 31

  let%span span37 = "/Users/xavier/Code/cdsat/src/trail.rs" 125 4 125 10

  let%span span38 = "/Users/xavier/Code/cdsat/src/trail.rs" 122 14 122 45

  let%span span39 = "/Users/xavier/Code/cdsat/src/trail.rs" 120 4 120 10

  let%span span40 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 41 20 41 56

  let%span span41 = "/Users/xavier/Code/cdsat/src/trail.rs" 117 14 117 64

  let%span span42 = "/Users/xavier/Code/cdsat/src/trail.rs" 115 4 115 10

  let%span span43 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 31 20 31 53

  let%span span44 = "/Users/xavier/Code/cdsat/src/trail.rs" 112 14 112 61

  let%span span45 = "/Users/xavier/Code/cdsat/src/trail.rs" 110 4 110 10

  let%span span46 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 21 20 21 53

  let%span span47 = "/Users/xavier/Code/cdsat/src/trail.rs" 107 14 107 61

  let%span span48 = "/Users/xavier/Code/cdsat/src/trail.rs" 105 4 105 10

  let%span span49 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 11 20 11 56

  let%span span50 = "/Users/xavier/Code/cdsat/src/trail.rs" 102 14 102 64

  let%span span51 = "/Users/xavier/Code/cdsat/src/trail.rs" 100 4 100 10

  let%span span52 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 14 70 15

  let%span span53 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 23 70 24

  let%span span54 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 69 14 69 59

  let%span span55 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 64 15 64 48

  let%span span56 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 16 66 17

  let%span span57 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 25 66 26

  let%span span58 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 65 14 65 44

  let%span span59 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 59 15 59 45

  let%span span60 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 16 61 17

  let%span span61 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 25 61 26

  let%span span62 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 60 14 60 47

  let%span span63 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 53 15 53 32

  let%span span64 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 54 15 54 32

  let%span span65 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 13 56 14

  let%span span66 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 22 56 23

  let%span span67 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 31 56 32

  let%span span68 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 55 14 55 31

  let%span span69 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 50 12 50 13

  let%span span70 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 49 14 49 45

  let%span span71 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 18 46 19

  let%span span72 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 27 46 28

  let%span span73 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 45 14 45 64

  let%span span74 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 18 36 19

  let%span span75 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 27 36 28

  let%span span76 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 35 14 35 61

  let%span span77 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 18 26 19

  let%span span78 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 27 26 28

  let%span span79 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 25 14 25 61

  let%span span80 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 18 16 19

  let%span span81 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 27 16 28

  let%span span82 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 15 14 15 64

  let%span span83 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span84 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span85 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span86 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span87 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span88 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span89 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span90 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span91 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span92 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span93 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span94 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span95 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span96 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span97 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span98 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span99 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span100 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span101 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span102 = "/Users/xavier/Code/cdsat/src/term.rs" 195 8 225 9

  let%span span103 = "/Users/xavier/Code/cdsat/src/term.rs" 180 8 180 25

  let%span span104 = "/Users/xavier/Code/cdsat/src/trail.rs" 726 8 726 61

  let%span span105 = "/Users/xavier/Code/cdsat/src/trail.rs" 646 8 648 9

  let%span span106 = "/Users/xavier/Code/cdsat/src/trail.rs" 179 4 179 12

  let%span span107 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span108 = "/Users/xavier/Code/cdsat/src/trail.rs" 832 0 832 8

  let%span span109 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span110 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span111 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span112 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span113 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span114 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span115 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span116 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span117 = "/Users/xavier/Code/cdsat/src/trail.rs" 777 0 777 8

  let%span span118 = "/Users/xavier/Code/cdsat/src/trail.rs" 291 12 291 92

  let%span span119 = "/Users/xavier/Code/cdsat/src/theory.rs" 31 8 54 9

  let%span span120 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 129 8 129 78

  let%span span121 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 13 814 14

  let%span span122 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 24 814 25

  let%span span123 = "/Users/xavier/Code/cdsat/src/trail.rs" 809 0 809 73

  let%span span124 = "/Users/xavier/Code/cdsat/src/trail.rs" 810 0 810 63

  let%span span125 = "/Users/xavier/Code/cdsat/src/trail.rs" 811 0 811 55

  let%span span126 = "/Users/xavier/Code/cdsat/src/trail.rs" 812 0 812 52

  let%span span127 = "/Users/xavier/Code/cdsat/src/trail.rs" 813 10 813 33

  let%span span128 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 33 814 39

  let%span span129 = "/Users/xavier/Code/cdsat/src/trail.rs" 808 10 808 17

  let%span span130 = "/Users/xavier/Code/cdsat/src/trail.rs" 807 0 807 8

  let%span span131 = "/Users/xavier/Code/cdsat/src/trail.rs" 313 4 313 82

  let%span span132 = "/Users/xavier/Code/cdsat/src/trail.rs" 314 14 314 40

  let%span span133 = "/Users/xavier/Code/cdsat/src/trail.rs" 315 4 315 115

  let%span span134 = "/Users/xavier/Code/cdsat/src/trail.rs" 316 4 316 115

  let%span span135 = "/Users/xavier/Code/cdsat/src/trail.rs" 317 4 317 101

  let%span span136 = "/Users/xavier/Code/cdsat/src/trail.rs" 312 14 312 24

  let%span span137 = "/Users/xavier/Code/cdsat/src/trail.rs" 310 4 310 12

  let%span span138 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span139 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span140 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span141 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span142 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span143 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span144 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span145 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span146 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span147 = "/Users/xavier/Code/cdsat/src/theory.rs" 616 15 616 27

  let%span span148 = "/Users/xavier/Code/cdsat/src/theory.rs" 617 15 617 32

  let%span span149 = "/Users/xavier/Code/cdsat/src/theory.rs" 618 4 618 90

  let%span span150 = "/Users/xavier/Code/cdsat/src/theory.rs" 512 8 515 9

  let%span span151 = "/Users/xavier/Code/cdsat/src/theory.rs" 522 8 525 9

  let%span span152 = "/Users/xavier/Code/cdsat/src/theory.rs" 206 8 206 84

  let%span span153 = "/Users/xavier/Code/cdsat/src/theory.rs" 502 8 505 9

  let%span span154 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span155 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span156 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span157 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span158 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span159 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span160 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span161 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span162 = "/Users/xavier/Code/cdsat/src/theory.rs" 484 15 484 31

  let%span span163 = "/Users/xavier/Code/cdsat/src/theory.rs" 485 15 485 35

  let%span span164 = "/Users/xavier/Code/cdsat/src/theory.rs" 486 15 486 27

  let%span span165 = "/Users/xavier/Code/cdsat/src/theory.rs" 487 4 487 54

  let%span span166 = "/Users/xavier/Code/cdsat/src/theory.rs" 488 4 488 58

  let%span span167 = "/Users/xavier/Code/cdsat/src/theory.rs" 489 4 489 61

  let%span span168 = "/Users/xavier/Code/cdsat/src/trail.rs" 268 8 272 9

  let%span span169 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 31 8 31 32

  let%span span170 = "/Users/xavier/Code/cdsat/src/trail.rs" 547 4 547 12

  let%span span171 = "/Users/xavier/Code/cdsat/src/trail.rs" 254 8 263 9

  let%span span172 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 20 8 20 31

  let%span span173 = "/Users/xavier/Code/cdsat/src/trail.rs" 279 12 283 13

  let%span span174 = "/Users/xavier/Code/cdsat/src/trail.rs" 238 8 248 9

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use seq.Seq

  predicate invariant'10 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span16] true

  predicate inv'7 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'7 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'7 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  constant max'0 : usize = [%#span17] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'6 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function shallow_model'4 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom shallow_model'4_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span18] inv'6 self)
   -> ([%#span20] inv'7 (shallow_model'4 self))
  && ([%#span19] Seq.length (shallow_model'4 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'9 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span21] inv'7 (shallow_model'4 self)

  axiom inv'6 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'6 x = true

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span22] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'8 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span23] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'5 (_x : Model'0.t_model)

  axiom inv'5 : forall x : Model'0.t_model . inv'5 x
  = (invariant'8 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  function eq_cmp'2 (_1 : usize) (_2 : usize) : ()

  function antisym2'2 (_1 : usize) (_2 : usize) : ()

  function antisym1'2 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'2 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'2 (_1 : usize) : ()

  function cmp_gt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'2 (_1 : usize) (_2 : usize) : ()

  predicate invariant'7 (self : TrailIndex'0.t_trailindex) =
    [%#span16] true

  predicate inv'4 (_x : TrailIndex'0.t_trailindex)

  axiom inv'4 : forall x : TrailIndex'0.t_trailindex . inv'4 x = true

  use Cdsat_Trail_Assignment_Type as Assignment'0

  predicate invariant'6 (self : Seq.seq (Assignment'0.t_assignment)) =
    [%#span16] true

  predicate inv'3 (_x : Seq.seq (Assignment'0.t_assignment))

  axiom inv'3 : forall x : Seq.seq (Assignment'0.t_assignment) . inv'3 x = true

  use seq.Seq

  predicate inv'2 (_x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

  function shallow_model'1 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) : Seq.seq (Assignment'0.t_assignment)


  axiom shallow_model'1_spec : forall self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . ([%#span18] inv'2 self)
   -> ([%#span20] inv'3 (shallow_model'1 self))
  && ([%#span19] Seq.length (shallow_model'1 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'5 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span21] inv'3 (shallow_model'1 self)

  axiom inv'2 : forall x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . inv'2 x = true

  predicate invariant'4 (self : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span16] true

  predicate inv'1 (_x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'1 : forall x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'1 x = true

  use seq.Seq

  predicate inv'0 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  function shallow_model'0 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))


  axiom shallow_model'0_spec : forall self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . ([%#span18] inv'0 self)
   -> ([%#span20] inv'1 (shallow_model'0 self))
  && ([%#span19] Seq.length (shallow_model'0 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'3 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span21] inv'1 (shallow_model'0 self)

  axiom inv'0 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'0 x
  = true

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span24] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span25] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  function eq_cmp'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 147 4 147 31] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span27] ()

  axiom eq_cmp'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span26] (x = y)
  = (cmp_log'0 x y = Ordering'0.C_Equal)

  function antisym2'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 142 4 142 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span30] ()

  axiom antisym2'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span28] cmp_log'0 x y
  = Ordering'0.C_Greater)  -> ([%#span29] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 136 4 136 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span33] ()

  axiom antisym1'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span31] cmp_log'0 x y
  = Ordering'0.C_Less)  -> ([%#span32] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 130 4 130 52] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()

   =
    [%#span37] ()

  axiom trans'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span34] cmp_log'0 x y
  = o)  -> ([%#span35] cmp_log'0 y z = o)  -> ([%#span36] cmp_log'0 x z = o)

  function refl'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 123 4 123 20] (x : TrailIndex'0.t_trailindex) : () =
    [%#span39] ()

  axiom refl'1_spec : forall x : TrailIndex'0.t_trailindex . [%#span38] cmp_log'0 x x = Ordering'0.C_Equal

  function gt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span40] cmp_log'0 self o = Ordering'0.C_Greater

  function cmp_gt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 118 4 118 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span42] ()

  axiom cmp_gt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span41] gt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Greater)

  function ge_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span43] cmp_log'0 self o <> Ordering'0.C_Less

  function cmp_ge_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 113 4 113 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span45] ()

  axiom cmp_ge_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span44] ge_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Less)

  function lt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span46] cmp_log'0 self o = Ordering'0.C_Less

  function cmp_lt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 108 4 108 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span48] ()

  axiom cmp_lt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span47] lt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Less)

  function le_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span49] cmp_log'0 self o <> Ordering'0.C_Greater

  function cmp_le_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 103 4 103 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span51] ()

  axiom cmp_le_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span50] le_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Greater)

  function eq_cmp'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom eq_cmp'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span52] inv'4 x)
   -> ([%#span53] inv'4 y)  -> ([%#span54] (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal))

  function antisym2'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym2'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span55] cmp_log'0 x y
  = Ordering'0.C_Greater)
   -> ([%#span56] inv'4 x)  -> ([%#span57] inv'4 y)  -> ([%#span58] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym1'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span59] cmp_log'0 x y
  = Ordering'0.C_Less)
   -> ([%#span60] inv'4 x)  -> ([%#span61] inv'4 y)  -> ([%#span62] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span63] cmp_log'0 x y
  = o)
   -> ([%#span64] cmp_log'0 y z = o)
   -> ([%#span65] inv'4 x)  -> ([%#span66] inv'4 y)  -> ([%#span67] inv'4 z)  -> ([%#span68] cmp_log'0 x z = o)

  function refl'0 (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'0_spec : forall x : TrailIndex'0.t_trailindex . ([%#span69] inv'4 x)
   -> ([%#span70] cmp_log'0 x x = Ordering'0.C_Equal)

  function cmp_gt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_gt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span71] inv'4 x)
   -> ([%#span72] inv'4 y)  -> ([%#span73] gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater))

  function cmp_ge_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_ge_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span74] inv'4 x)
   -> ([%#span75] inv'4 y)  -> ([%#span76] ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less))

  function cmp_lt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_lt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span77] inv'4 x)
   -> ([%#span78] inv'4 y)  -> ([%#span79] lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less))

  function cmp_le_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_le_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span80] inv'4 x)
   -> ([%#span81] inv'4 y)  -> ([%#span82] le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater))

  use Cdsat_Theory_Assign_Type as Assign'0

  use Cdsat_Theory_Trail_Type as Trail'1

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'1.t_trail) : int

  axiom len'0_spec : forall self : Trail'1.t_trail . [%#span83] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'1.t_trail) : int =
    [%#span86] match self with
      | Trail'1.C_Empty -> 0
      | Trail'1.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'1.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'1.t_trail . ([%#span85] level'0 self <= len'0 self)
  && ([%#span84] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'1.t_trail) =
    [%#span87] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  use prelude.prelude.Int

  use Cdsat_Theory_Term_Type as Term'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span88] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span89] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'1.t_trail) =
    [%#span90] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'2 a
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span91] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span95] match self with
      | Trail'1.C_Empty -> Option'0.C_None
      | Trail'1.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span94] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span93] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span92] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span96] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#stheory13] invariant_nonneg'0 self)
   -> ([%#stheory14] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  use prelude.prelude.Snapshot

  use prelude.prelude.Borrow

  use set.Fset

  use set.Fset

  predicate contains'2 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span97] Fset.mem e self

  use Cdsat_Term_Value_Type as Value'1

  use Cdsat_Term_Term_Type as Term'1

  use prelude.prelude.Real

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  function deep_model'4 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span98] match self with
      | Value'1.C_Bool b -> Value'0.C_Bool b
      | Value'1.C_Rat br -> Value'0.C_Rat (deep_model'4 br)
      end

  function shallow_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span99] deep_model'1 self

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  use Cdsat_Term_Sort_Type as Sort'1

  function deep_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'1.t_sort) : Sort'0.t_sort =
    [%#span100] match self with
      | Sort'1.C_Boolean -> Sort'0.C_Boolean
      | Sort'1.C_Rational -> Sort'0.C_Rational
      end

  function deep_model'2 (self : usize) : int =
    [%#span101] UIntSize.to_int self

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 193 4 193 44] (self : Term'1.t_term) : Term'0.t_term =
    [%#span102] match self with
      | Term'1.C_Variable v s -> Term'0.C_Variable (Var'0.C_Var (deep_model'2 v) (deep_model'3 s))
      | Term'1.C_Value v -> Term'0.C_Value (deep_model'1 v)
      | Term'1.C_Plus l r -> Term'0.C_Plus (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Eq l r -> Term'0.C_Eq (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Conj l r -> Term'0.C_Conj (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Disj l r -> Term'0.C_Disj (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Neg t -> Term'0.C_Neg (deep_model'0 t)
      | Term'1.C_Impl l r -> Term'0.C_Disj (Term'0.C_Neg (deep_model'0 l)) (deep_model'0 r)
      | Term'1.C_Times l r -> Term'0.C_Plus (Term'0.C_Value (Value'0.C_Rat (deep_model'4 l))) (deep_model'0 r)
      | Term'1.C_Lt l r -> Term'0.C_Eq (deep_model'0 l) (deep_model'0 r)
      end

  function shallow_model'2 [#"/Users/xavier/Code/cdsat/src/term.rs" 179 4 179 50] (self : Term'1.t_term) : Term'0.t_term
   =
    [%#span103] deep_model'0 self

  function term_value'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 725 4 725 61] (self : Assignment'0.t_assignment) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span104] (shallow_model'2 (Cdsat_Trail_Assignment_Type.assignment_term self), shallow_model'3 (Cdsat_Trail_Assignment_Type.assignment_val self))

  use seq.Seq

  use seq.Seq

  use Cdsat_Trail_Trail_Type as Cdsat_Trail_Trail_Type

  use Cdsat_Trail_Trail_Type as Trail'0

  function index_logic'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 645 4 645 77] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span105] term_value'0 (Seq.get (shallow_model'1 (Seq.get (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)))) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)))

  use set.Fset

  function level_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 180 4 180 33] (self : TrailIndex'0.t_trailindex) : int
   =
    [%#span106] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 self)

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (TrailIndex'0.t_trailindex)) (a : TrailIndex'0.t_trailindex) : Fset.fset (TrailIndex'0.t_trailindex)

   =
    [%#span107] Fset.remove a self

  use set.Fset

  use set.Fset

  predicate contains'0 [@inline:trivial] (self : Fset.fset (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex)
   =
    [%#span97] Fset.mem e self

  use set.Fset

  function set_max'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 838 0 838 56] (s : Fset.fset (TrailIndex'0.t_trailindex)) : TrailIndex'0.t_trailindex


  axiom set_max'0_def : forall s : Fset.fset (TrailIndex'0.t_trailindex) . set_max'0 s
  = ([%#span108] let x = Fset.pick s in let s = remove'0 s x in if Fset.is_empty s then
    x
  else
    let rec' = set_max'0 s in if ge_log'0 x rec' then x else rec'
  )

  axiom set_max'0_spec : forall s : Fset.fset (TrailIndex'0.t_trailindex) . ([%#strail5] not Fset.is_empty s)
   -> ([%#strail7] forall o : TrailIndex'0.t_trailindex . contains'0 s o  -> le_log'0 o (set_max'0 s))
  && ([%#strail6] contains'0 s (set_max'0 s))

  use set.Fset

  function remove'1 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span107] Fset.remove a self

  use set.Fset

  use set.Fset

  use set.Fset

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'1.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_spec : forall self : Trail'1.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#span109] invariant_nonneg'0 self)
   -> ([%#span114] set_level'0 self s <= level'0 self)
  && ([%#span113] set_level'0 self s >= 0)
  && ([%#span112] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#span111] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'2 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span110] forall i : (Term'0.t_term, Value'0.t_value) . contains'2 s i
   -> level_of'0 self i <= set_level'0 self s)

  use set.Fset

  function insert'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span116] Fset.add e self

  use set.Fset

  function ix_to_abs'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 782 0 782 93] (t : Trail'0.t_trail) (s : Fset.fset (TrailIndex'0.t_trailindex)) : Fset.fset (Term'0.t_term, Value'0.t_value)


  axiom ix_to_abs'0_def : forall t : Trail'0.t_trail, s : Fset.fset (TrailIndex'0.t_trailindex) . ix_to_abs'0 t s
  = ([%#span117] if s = (Fset.empty  : Fset.fset (TrailIndex'0.t_trailindex)) then
    Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)
  else
    let a = Fset.pick s in insert'0 (ix_to_abs'0 t (remove'0 s a)) (index_logic'0 t a)
  )

  axiom ix_to_abs'0_spec : forall t : Trail'0.t_trail, s : Fset.fset (TrailIndex'0.t_trailindex) . ([%#strail10] forall a : (Term'0.t_term, Value'0.t_value) . contains'2 (ix_to_abs'0 t s) a
   -> (exists ix : TrailIndex'0.t_trailindex . a = index_logic'0 t ix /\ contains'0 s ix))
  && ([%#strail9] forall ix : TrailIndex'0.t_trailindex . contains'0 s ix
   -> contains'2 (ix_to_abs'0 t s) (index_logic'0 t ix))

  use prelude.prelude.Snapshot

  predicate contains'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 289 4 289 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex)

   =
    [%#span118] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)
    < Seq.length (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self))
    /\ UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)
    < Seq.length (shallow_model'1 (Seq.get (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))))

  function well_sorted'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 30 4 30 36] (self : Term'0.t_term) : bool =
    [%#span119] match self with
      | Term'0.C_Variable v -> true
      | Term'0.C_Value v -> true
      | Term'0.C_Plus l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Rational
      | Term'0.C_Eq l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r
      | Term'0.C_Conj l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Boolean
      | Term'0.C_Disj l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Boolean
      | Term'0.C_Neg t -> well_sorted'0 t /\ sort'0 t = Sort'0.C_Boolean
      end

  use seq.Seq

  use prelude.seq_ext.SeqExt

  use seq.Seq

  use seq.Seq

  predicate contains'4 (self : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) =
    [%#span120] exists i : int . 0 <= i /\ i < Seq.length self /\ Seq.get self i = e

  function remove'2 [#"/Users/xavier/Code/cdsat/src/trail.rs" 814 0 814 39] (s : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom remove'2_def : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . remove'2 s e
  = ([%#span130] if s = (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) then
    Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)
  else
    if Seq.get s (Seq.length s - 1) = e then
      remove'2 (SeqExt.subsequence s 0 (Seq.length s - 1)) e
    else
      Seq.snoc (remove'2 (SeqExt.subsequence s 0 (Seq.length s - 1)) e) (Seq.get s (Seq.length s - 1))

  )

  axiom remove'2_spec : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . ([%#span121] inv'7 s)
   -> ([%#span122] inv'4 e)
   -> ([%#span128] inv'7 (remove'2 s e))
  && ([%#span127] Seq.length (remove'2 s e) <= Seq.length s)
  && ([%#span126] contains'4 s e  -> Seq.length (remove'2 s e) < Seq.length s)
  && ([%#span125] forall t : TrailIndex'0.t_trailindex . inv'4 t  -> contains'4 (remove'2 s e) t  -> t <> e)
  && ([%#span124] forall t : TrailIndex'0.t_trailindex . inv'4 t  -> contains'4 (remove'2 s e) t  -> contains'4 s t)
  && ([%#span123] forall t : TrailIndex'0.t_trailindex . inv'4 t
   -> contains'4 s t  -> e <> t  -> contains'4 (remove'2 s e) t)

  function abstract_justification'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 318 4 321 44] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) : Fset.fset (Term'0.t_term, Value'0.t_value)


  axiom abstract_justification'0_def : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . abstract_justification'0 self just
  = ([%#span137] if Seq.length just > 0 then
    let set = abstract_justification'0 self (remove'2 just (Seq.get just 0)) in let a = index_logic'0 self (Seq.get just 0) in insert'0 set a
  else
    Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)
  )

  axiom abstract_justification'0_spec : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span131] forall i : int . 0
  <= i
  /\ i < Seq.length just  -> contains'1 self (Seq.get just i))
   -> ([%#span135] forall i : int . 0 <= i /\ i < Seq.length just
   -> contains'2 (abstract_justification'0 self just) (index_logic'0 self (Seq.get just i)))
  && ([%#span134] forall a : (Term'0.t_term, Value'0.t_value) . contains'2 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'4 just ix /\ a = index_logic'0 self ix))
  && ([%#span133] forall a : (Term'0.t_term, Value'0.t_value) . contains'2 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'1 self ix /\ a = index_logic'0 self ix))
  && ([%#span132] Fset.cardinal (abstract_justification'0 self just) <= Seq.length just)

  function from_int'0 (_1 : int) : Real.real

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span140] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span138] inv'5 self)
   -> ([%#span139] invariant'8 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span141] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span142] forall a : (Term'0.t_term, Value'0.t_value) . contains'2 v a  -> satisfies'0 self a

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span143] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'5 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate contains'3 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span145] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'3_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span144] invariant_assign'0 self
   -> contains'3 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'1.t_trail)
   =
    [%#span146] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a _ tl -> sound'0 tl /\ justified_sound'0 a
      end

  function find_justified'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 619 4 619 46] (self : Trail'1.t_trail) (kv : (Term'0.t_term, Value'0.t_value)) : ()


  axiom find_justified'0_spec : forall self : Trail'1.t_trail, kv : (Term'0.t_term, Value'0.t_value) . ([%#span147] sound'0 self)
   -> ([%#span148] contains'3 self kv)
   -> ([%#span149] forall l : int . forall a : Assign'0.t_assign . find'0 self kv = Option'0.C_Some (a, l)
   -> justified_sound'0 a)

  predicate is_decision'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 511 4 511 54] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span150] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Decision _ _, _) -> true
      | _ -> false
      end

  predicate is_input'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 521 4 521 51] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span151] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Input _ _, _) -> true
      | _ -> false
      end

  predicate entails'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 205 4 205 74] (self : Model'0.t_model) (j : Fset.fset (Term'0.t_term, Value'0.t_value)) (c : (Term'0.t_term, Value'0.t_value))

   =
    [%#span152] invariant'8 self  -> satisfy_set'0 self j  -> satisfies'0 self c

  predicate is_justified'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 501 4 501 55] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span153] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified _ _ _, _) -> true
      | _ -> false
      end

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span154] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span157] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span155] is_bool'0 self)
   -> ([%#span156] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'1.t_trail) =
    [%#span158] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> let ap = to_pair'0 a in not contains'3 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'3 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'1.t_trail) =
    [%#span159] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'2 j a  -> contains'3 tl a
        | _ -> true
        end
      end

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'1.t_trail) =
    [%#span160] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'1.t_trail) =
    [%#span161] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function justification'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 490 4 490 71] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)


  axiom justification'0_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span162] invariant'1 self)
   -> ([%#span163] is_justified'0 self d)
   -> ([%#span164] sound'0 self)
   -> ([%#span167] is_decision'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#span166] is_input'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#span165] forall m : Model'0.t_model . inv'5 m  -> entails'0 m (justification'0 self d) d)

  predicate justified_correct'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 267 4 267 78] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) (j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

   =
    [%#span168] (forall i : TrailIndex'0.t_trailindex . contains'4 (shallow_model'4 j) i
     -> lt_log'0 i ix /\ contains'1 self i)
    /\ is_justified'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ justification'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    = abstract_justification'0 self (shallow_model'4 j)

  use Cdsat_Trail_Reason_Type as Reason'0

  function index_logic'3 [@inline:trivial] (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (ix : usize) : Assignment'0.t_assignment

   =
    [%#span169] Seq.get (shallow_model'1 self) (UIntSize.to_int ix)

  function index_logic'2 [@inline:trivial] (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (ix : usize) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span169] Seq.get (shallow_model'0 self) (UIntSize.to_int ix)

  function reason'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 549 4 549 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : Reason'0.t_reason

   =
    [%#span170] Cdsat_Trail_Assignment_Type.assignment_reason (index_logic'3 (index_logic'2 (Cdsat_Trail_Trail_Type.trail_assignments self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)) (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix))

  predicate justified_is_justified'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 253 4 253 47] (self : Trail'0.t_trail) =
    [%#span171] forall ix : TrailIndex'0.t_trailindex . contains'1 self ix
     -> (let reason = reason'0 self ix in (reason = Reason'0.C_Decision)
    = is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ (reason = Reason'0.C_Input)
    = is_input'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ (forall j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . reason = Reason'0.C_Justified j
     -> justified_correct'0 self ix j))

  function index_logic'1 [@inline:trivial] (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (ix : int) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span172] Seq.get (shallow_model'0 self) ix

  predicate abstract_relation'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 277 4 277 42] (self : Trail'0.t_trail) =
    [%#span173] (forall ix : TrailIndex'0.t_trailindex . contains'1 self ix
     -> contains'3 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix))
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'1 self ix
     -> level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    = UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))
    /\ (forall a : (Term'0.t_term, Value'0.t_value) . contains'3 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
     -> (exists ix : TrailIndex'0.t_trailindex . contains'1 self ix
    /\ level_log'0 ix = level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
    /\ index_logic'0 self ix = a))

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 237 4 237 34] (self : Trail'0.t_trail) =
    [%#span174] abstract_relation'0 self
    /\ sound'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    /\ invariant'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    /\ level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    = UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self)
    /\ UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self)
    = Seq.length (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) - 1
    /\ (forall i : int . 0 <= i /\ i < Seq.length (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self))
     -> Seq.length (shallow_model'1 (index_logic'1 (Cdsat_Trail_Trail_Type.trail_assignments self) i)) > 0)
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'1 self ix
     -> (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix) = 0)
    = is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix))
    /\ (forall j : TrailIndex'0.t_trailindex . forall i : TrailIndex'0.t_trailindex . contains'1 self i
     -> contains'1 self j  -> i <> j  -> index_logic'0 self i <> index_logic'0 self j)
    /\ justified_is_justified'0 self
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'1 self ix
     -> well_sorted'0 (let (a, _) = index_logic'0 self ix in a))

  constant t  : Trail'0.t_trail

  constant s  : Fset.fset (TrailIndex'0.t_trailindex)

  function ix_to_abs_level [#"/Users/xavier/Code/cdsat/src/trail.rs" 861 0 861 60] (t : Trail'0.t_trail) (s : Fset.fset (TrailIndex'0.t_trailindex)) : ()


  goal vc_ix_to_abs_level : ([%#strail1] forall i : TrailIndex'0.t_trailindex . contains'0 s i  -> contains'1 t i)
   -> ([%#strail0] invariant'0 t)
   -> (if Fset.is_empty s then
    ([%#strail3] Fset.is_empty s
     -> set_level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost t)) (ix_to_abs'0 t s) = 0)
    && ([%#strail2] not Fset.is_empty s
     -> set_level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost t)) (ix_to_abs'0 t s)
    = level_log'0 (set_max'0 s))
  else
    ([%#strail5] not Fset.is_empty s)
    /\ (([%#strail7] forall o : TrailIndex'0.t_trailindex . contains'0 s o  -> le_log'0 o (set_max'0 s))
    && ([%#strail6] contains'0 s (set_max'0 s))
     -> (let max_elem = set_max'0 s in let max_asgn = index_logic'0 t max_elem in ([%#strail10] forall a : (Term'0.t_term, Value'0.t_value) . contains'2 (ix_to_abs'0 t s) a
     -> (exists ix : TrailIndex'0.t_trailindex . a = index_logic'0 t ix /\ contains'0 s ix))
    && ([%#strail9] forall ix : TrailIndex'0.t_trailindex . contains'0 s ix
     -> contains'2 (ix_to_abs'0 t s) (index_logic'0 t ix))
     -> (let ghost_set = ix_to_abs'0 t s in ([%#strail12] forall i : TrailIndex'0.t_trailindex . contains'0 s i
     -> level_log'0 i <= level_log'0 max_elem)
    && (let _ = () in let _ = () in (forall a : (Term'0.t_term, Value'0.t_value) . if contains'2 ghost_set a then
      ([%#stheory13] invariant_nonneg'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost t)))
      /\ (([%#stheory14] level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost t)) a >= 0
      /\ level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost t)) a
      <= level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost t)))
       -> ([%#stheory13] invariant_nonneg'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost t))))
    else
      true
    )
    /\ ([%#strail15] forall a : (Term'0.t_term, Value'0.t_value) . contains'2 ghost_set a
     -> level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost t)) a
    <= level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost t)) max_asgn)
    && (let _ = () in let _ = () in ([%#strail3] Fset.is_empty s
     -> set_level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost t)) (ix_to_abs'0 t s) = 0)
    && ([%#strail2] not Fset.is_empty s
     -> set_level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost t)) (ix_to_abs'0 t s)
    = level_log'0 (set_max'0 s)))))))
  )
end
module Cdsat_Theory_Impl5_JustifiedIsBool_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 803 15 803 38

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 804 15 804 35

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 805 4 805 29

  let%span span3 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span4 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span5 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span6 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span7 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span8 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span9 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span10 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span11 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span12 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span13 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span14 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span15 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span16 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span17 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 502 8 505 9

  use Cdsat_Theory_Assign_Type as Assign'0

  use Cdsat_Theory_Value_Type as Value'0

  use Cdsat_Theory_Term_Type as Term'0

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span3] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Cdsat_Theory_Trail_Type as Trail'0

  use Cdsat_Theory_Sort_Type as Sort'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span4] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span5] sort'0 self = Sort'0.C_Boolean

  use prelude.prelude.Int

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span6] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'0 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span7] match self with
      | Assign'0.C_Decision t v -> sort'1 t = sort'0 v
      | Assign'0.C_Justified _ t v -> sort'1 t = sort'0 v /\ sort'1 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'1 t = sort'0 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span8] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'0 a
      end

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span10] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span9] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span13] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span12] level'0 self <= len'0 self)
  && ([%#span11] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span14] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span18] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span17] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'1 (let (a, _) = d in a) = sort'0 (let (_, a) = d in a)))
  && ([%#span16] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span15] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  predicate is_justified'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 501 4 501 55] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span19] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified _ _ _, _) -> true
      | _ -> false
      end

  constant self  : Trail'0.t_trail

  constant d  : (Term'0.t_term, Value'0.t_value)

  function justified_is_bool [#"/Users/xavier/Code/cdsat/src/theory.rs" 806 4 806 52] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : ()


  goal vc_justified_is_bool : ([%#stheory1] is_justified'0 self d)
   -> ([%#stheory0] invariant_assign'0 self)
   -> match self with
    | Trail'0.C_Empty -> [%#stheory2] is_bool'0 (let (_, a) = d in a)
    | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then
      [%#stheory2] is_bool'0 (let (_, a) = d in a)
    else
      (([%#stheory1] is_justified'0 tl d) && ([%#stheory0] invariant_assign'0 tl))
      /\ (([%#stheory2] is_bool'0 (let (_, a) = d in a))
       -> (let _ = justified_is_bool tl d in [%#stheory2] is_bool'0 (let (_, a) = d in a)))

    end
end
module Cdsat_Theory_Impl5_JustificationContains_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 655 15 655 31

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 656 15 656 36

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 657 4 657 126

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 658 14 658 73

  let%span span4 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span5 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span6 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span7 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span8 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span9 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span10 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span11 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span12 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span13 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span14 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span15 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span16 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span17 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span20 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span21 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span22 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span23 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span24 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span25 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span26 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span28 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span29 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span30 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span31 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span32 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  let%span span33 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span34 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span35 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span36 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span37 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span38 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span39 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span40 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span41 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span42 = "/Users/xavier/Code/cdsat/src/theory.rs" 616 15 616 27

  let%span span43 = "/Users/xavier/Code/cdsat/src/theory.rs" 617 15 617 32

  let%span span44 = "/Users/xavier/Code/cdsat/src/theory.rs" 618 4 618 90

  let%span span45 = "/Users/xavier/Code/cdsat/src/theory.rs" 620 8 629 9

  let%span span46 = "/Users/xavier/Code/cdsat/src/theory.rs" 512 8 515 9

  let%span span47 = "/Users/xavier/Code/cdsat/src/theory.rs" 522 8 525 9

  let%span span48 = "/Users/xavier/Code/cdsat/src/theory.rs" 206 8 206 84

  let%span span49 = "/Users/xavier/Code/cdsat/src/theory.rs" 502 8 505 9

  let%span span50 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span51 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span52 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span53 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span54 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span55 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span56 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span57 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span58 = "/Users/xavier/Code/cdsat/src/theory.rs" 484 15 484 31

  let%span span59 = "/Users/xavier/Code/cdsat/src/theory.rs" 485 15 485 35

  let%span span60 = "/Users/xavier/Code/cdsat/src/theory.rs" 486 15 486 27

  let%span span61 = "/Users/xavier/Code/cdsat/src/theory.rs" 487 4 487 54

  let%span span62 = "/Users/xavier/Code/cdsat/src/theory.rs" 488 4 488 58

  let%span span63 = "/Users/xavier/Code/cdsat/src/theory.rs" 489 4 489 61

  let%span span64 = "/Users/xavier/Code/cdsat/src/theory.rs" 491 8 491 30

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span4] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span5] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k = v
     -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'2 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use Cdsat_Theory_Assign_Type as Assign'0

  use Cdsat_Theory_Term_Type as Term'0

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span6] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Cdsat_Theory_Trail_Type as Trail'0

  use set.Fset

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span7] Fset.remove a self

  use set.Fset

  use set.Fset

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span9] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span8] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span12] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span11] level'0 self <= len'0 self)
  && ([%#span10] level'0 self >= 0)

  use set.Fset

  use prelude.prelude.Int

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span13] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span14] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span15] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'1 a
      end

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span16] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span20] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span19] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span18] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span17] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span23] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span21] invariant_nonneg'0 self)
   -> ([%#span22] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  use set.Fset

  predicate contains'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span24] Fset.mem e self

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span32] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#span25] invariant_nonneg'0 self)
   -> ([%#span30] set_level'0 self s <= level'0 self)
  && ([%#span29] set_level'0 self s >= 0)
  && ([%#span28] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#span27] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span26] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate contains'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span34] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'1_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span33] invariant_assign'0 self
   -> contains'1 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span37] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span35] inv'0 self)
   -> ([%#span36] invariant'2 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span38] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span39] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 v a  -> satisfies'0 self a

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span40] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'0 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'0.t_trail)
   =
    [%#span41] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a _ tl -> sound'0 tl /\ justified_sound'0 a
      end

  function find_justified'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 619 4 619 46] (self : Trail'0.t_trail) (kv : (Term'0.t_term, Value'0.t_value)) : ()

   =
    [%#span45] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = kv then () else find_justified'0 tl kv
      end

  axiom find_justified'0_spec : forall self : Trail'0.t_trail, kv : (Term'0.t_term, Value'0.t_value) . ([%#span42] sound'0 self)
   -> ([%#span43] contains'1 self kv)
   -> ([%#span44] forall l : int . forall a : Assign'0.t_assign . find'0 self kv = Option'0.C_Some (a, l)
   -> justified_sound'0 a)

  predicate is_decision'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 511 4 511 54] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span46] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Decision _ _, _) -> true
      | _ -> false
      end

  predicate is_input'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 521 4 521 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span47] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Input _ _, _) -> true
      | _ -> false
      end

  predicate entails'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 205 4 205 74] (self : Model'0.t_model) (j : Fset.fset (Term'0.t_term, Value'0.t_value)) (c : (Term'0.t_term, Value'0.t_value))

   =
    [%#span48] invariant'2 self  -> satisfy_set'0 self j  -> satisfies'0 self c

  predicate is_justified'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 501 4 501 55] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span49] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified _ _ _, _) -> true
      | _ -> false
      end

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span50] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span53] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span51] is_bool'0 self)
   -> ([%#span52] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span54] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'1 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'1 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'0.t_trail) =
    [%#span55] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'0 j a  -> contains'1 tl a
        | _ -> true
        end
      end

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'0.t_trail) =
    [%#span56] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'0.t_trail) =
    [%#span57] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function justification'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 490 4 490 71] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span64] let _ = find_justified'0 self d in match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified j _ _, _) -> j
      | _ -> Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)
      end

  axiom justification'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span58] invariant'0 self)
   -> ([%#span59] is_justified'0 self d)
   -> ([%#span60] sound'0 self)
   -> ([%#span63] is_decision'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#span62] is_input'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#span61] forall m : Model'0.t_model . inv'0 m  -> entails'0 m (justification'0 self d) d)

  constant self  : Trail'0.t_trail

  constant kv  : (Term'0.t_term, Value'0.t_value)

  function justification_contains [#"/Users/xavier/Code/cdsat/src/theory.rs" 659 4 659 58] (self : Trail'0.t_trail) (kv : (Term'0.t_term, Value'0.t_value)) : ()


  goal vc_justification_contains : ([%#stheory1] is_justified'0 self kv)
   -> ([%#stheory0] invariant'0 self)
   -> match self with
    | Trail'0.C_Empty -> ([%#stheory3] set_level'0 self (justification'0 self kv) = level_of'0 self kv)
    && ([%#stheory2] forall e : (Term'0.t_term, Value'0.t_value) . contains'0 (justification'0 self kv) e
     -> contains'1 self e /\ level_of'0 self e <= level_of'0 self kv)
    | Trail'0.C_Assign a l tl -> if to_pair'0 a = kv then
      ([%#stheory3] set_level'0 self (justification'0 self kv) = level_of'0 self kv)
      && ([%#stheory2] forall e : (Term'0.t_term, Value'0.t_value) . contains'0 (justification'0 self kv) e
       -> contains'1 self e /\ level_of'0 self e <= level_of'0 self kv)
    else
      (([%#stheory1] is_justified'0 tl kv) && ([%#stheory0] invariant'0 tl))
      /\ (([%#stheory3] set_level'0 tl (justification'0 tl kv) = level_of'0 tl kv)
      && ([%#stheory2] forall e : (Term'0.t_term, Value'0.t_value) . contains'0 (justification'0 tl kv) e
       -> contains'1 tl e /\ level_of'0 tl e <= level_of'0 tl kv)
       -> ([%#stheory3] set_level'0 self (justification'0 self kv) = level_of'0 self kv)
      && ([%#stheory2] forall e : (Term'0.t_term, Value'0.t_value) . contains'0 (justification'0 self kv) e
       -> contains'1 self e /\ level_of'0 self e <= level_of'0 self kv))

    end
end
module Cdsat_Theory_Impl4_ResolveSound_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 211 4 211 61

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 212 15 212 39

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 213 15 213 32

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 216 8 216 12

  let%span stheory4 = "/Users/xavier/Code/cdsat/src/theory.rs" 214 14 214 60

  let%span span5 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span6 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span7 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span8 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span9 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span10 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span11 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span12 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span13 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span14 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span5] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span6] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k = v
     -> Cdsat_Theory_Var_Type.var_1 k = sort'0 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'0 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use Cdsat_Theory_Term_Type as Term'0

  use set.Fset

  use set.Fset

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span7] Fset.remove a self

  use set.Fset

  predicate contains'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span8] Fset.mem e self

  use prelude.prelude.Real

  use prelude.prelude.Int

  function from_int'0 (_1 : int) : Real.real

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span9] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'0 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span12] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span10] inv'0 self)
   -> ([%#span11] invariant'0 self  -> sort'0 (interp'0 self t) = sort'1 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span13] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span14] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 v a  -> satisfies'0 self a

  constant self  : Model'0.t_model

  constant cflct  : Fset.fset (Term'0.t_term, Value'0.t_value)

  constant just  : Fset.fset (Term'0.t_term, Value'0.t_value)

  constant a  : (Term'0.t_term, Value'0.t_value)

  function resolve_sound [#"/Users/xavier/Code/cdsat/src/theory.rs" 215 4 220 5] (self : Model'0.t_model) (cflct : Fset.fset (Term'0.t_term, Value'0.t_value)) (just : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : ()


  goal vc_resolve_sound : ([%#stheory3] inv'0 self)
   -> ([%#stheory2] contains'0 cflct a)
   -> ([%#stheory1] not satisfy_set'0 self cflct)
   -> ([%#stheory0] satisfy_set'0 self just  -> satisfies'0 self a)
   -> ([%#stheory4] not satisfy_set'0 self (Fset.union (remove'0 cflct a) just))
end
module Cdsat_Theory_Impl7_Resolvef_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 1020 15 1020 31

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 1021 15 1021 27

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 1022 4 1022 39

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 1023 4 1023 35

  let%span stheory4 = "/Users/xavier/Code/cdsat/src/theory.rs" 1024 4 1028 6

  let%span stheory5 = "/Users/xavier/Code/cdsat/src/theory.rs" 1029 14 1029 32

  let%span stheory6 = "/Users/xavier/Code/cdsat/src/theory.rs" 1030 14 1030 28

  let%span stheory7 = "/Users/xavier/Code/cdsat/src/theory.rs" 1031 14 1031 44

  let%span stheory8 = "/Users/xavier/Code/cdsat/src/theory.rs" 484 15 484 31

  let%span stheory9 = "/Users/xavier/Code/cdsat/src/theory.rs" 485 15 485 35

  let%span stheory10 = "/Users/xavier/Code/cdsat/src/theory.rs" 486 15 486 27

  let%span stheory11 = "/Users/xavier/Code/cdsat/src/theory.rs" 487 4 487 54

  let%span stheory12 = "/Users/xavier/Code/cdsat/src/theory.rs" 488 4 488 58

  let%span stheory13 = "/Users/xavier/Code/cdsat/src/theory.rs" 489 4 489 61

  let%span stheory14 = "/Users/xavier/Code/cdsat/src/theory.rs" 655 15 655 31

  let%span stheory15 = "/Users/xavier/Code/cdsat/src/theory.rs" 656 15 656 36

  let%span stheory16 = "/Users/xavier/Code/cdsat/src/theory.rs" 657 4 657 126

  let%span stheory17 = "/Users/xavier/Code/cdsat/src/theory.rs" 658 14 658 73

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span20 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span21 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span22 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span23 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span24 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span25 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span26 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span28 = "/Users/xavier/Code/cdsat/src/theory.rs" 211 4 211 61

  let%span span29 = "/Users/xavier/Code/cdsat/src/theory.rs" 212 15 212 39

  let%span span30 = "/Users/xavier/Code/cdsat/src/theory.rs" 213 15 213 32

  let%span span31 = "/Users/xavier/Code/cdsat/src/theory.rs" 216 8 216 12

  let%span span32 = "/Users/xavier/Code/cdsat/src/theory.rs" 214 14 214 60

  let%span span33 = "/Users/xavier/Code/cdsat/src/theory.rs" 209 4 209 12

  let%span span34 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span35 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span36 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span37 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span38 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span39 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span40 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span41 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span42 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span43 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span44 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span45 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span46 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span47 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span48 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span49 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span50 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span51 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span52 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span53 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span54 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span55 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span56 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span57 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span58 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span59 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  let%span span60 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span61 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span62 = "/Users/xavier/Code/cdsat/src/theory.rs" 616 15 616 27

  let%span span63 = "/Users/xavier/Code/cdsat/src/theory.rs" 617 15 617 32

  let%span span64 = "/Users/xavier/Code/cdsat/src/theory.rs" 618 4 618 90

  let%span span65 = "/Users/xavier/Code/cdsat/src/theory.rs" 620 8 629 9

  let%span span66 = "/Users/xavier/Code/cdsat/src/theory.rs" 512 8 515 9

  let%span span67 = "/Users/xavier/Code/cdsat/src/theory.rs" 522 8 525 9

  let%span span68 = "/Users/xavier/Code/cdsat/src/theory.rs" 206 8 206 84

  let%span span69 = "/Users/xavier/Code/cdsat/src/theory.rs" 502 8 505 9

  let%span span70 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span71 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span72 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span73 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span74 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span75 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span76 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span77 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span78 = "/Users/xavier/Code/cdsat/src/theory.rs" 491 8 491 30

  let%span span79 = "/Users/xavier/Code/cdsat/src/theory.rs" 660 8 669 9

  let%span span80 = "/Users/xavier/Code/cdsat/src/theory.rs" 999 4 999 12

  let%span span81 = "/Users/xavier/Code/cdsat/src/theory.rs" 996 8 996 91

  let%span span82 = "/Users/xavier/Code/cdsat/src/theory.rs" 989 8 989 131

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span18] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span19] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'0 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'2 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use set.Fset

  use set.Fset

  use Cdsat_Theory_Term_Type as Term'0

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span20] Fset.remove a self

  use set.Fset

  predicate contains'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span21] Fset.mem e self

  use prelude.prelude.Real

  use prelude.prelude.Int

  function from_int'0 (_1 : int) : Real.real

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span22] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'0 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span25] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span23] inv'0 self)
   -> ([%#span24] invariant'2 self  -> sort'0 (interp'0 self t) = sort'1 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span26] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span27] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 v a  -> satisfies'0 self a

  function resolve_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 215 4 220 5] (self : Model'0.t_model) (cflct : Fset.fset (Term'0.t_term, Value'0.t_value)) (just : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : ()

   =
    [%#span33] ()

  axiom resolve_sound'0_spec : forall self : Model'0.t_model, cflct : Fset.fset (Term'0.t_term, Value'0.t_value), just : Fset.fset (Term'0.t_term, Value'0.t_value), a : (Term'0.t_term, Value'0.t_value) . ([%#span28] satisfy_set'0 self just
   -> satisfies'0 self a)
   -> ([%#span29] not satisfy_set'0 self cflct)
   -> ([%#span30] contains'0 cflct a)
   -> ([%#span31] inv'0 self)  -> ([%#span32] not satisfy_set'0 self (Fset.union (remove'0 cflct a) just))

  use prelude.prelude.Int

  use Cdsat_Theory_Trail_Type as Trail'0

  use Cdsat_Theory_Assign_Type as Assign'0

  predicate invariant'3 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span34] match self with
      | Assign'0.C_Decision t v -> sort'1 t = sort'0 v
      | Assign'0.C_Justified _ t v -> sort'1 t = sort'0 v /\ sort'1 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'1 t = sort'0 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span35] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'3 a
      end

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span37] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span36] len'0 self >= 0

  function level'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span40] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'1 tl
      | Trail'0.C_Assign _ _ tl -> level'1 tl
      end

  axiom level'1_spec : forall self : Trail'0.t_trail . ([%#span39] level'1 self <= len'0 self)
  && ([%#span38] level'1 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span41] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'1 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span42] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span46] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span45] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'1 (let (a, _) = d in a) = sort'0 (let (_, a) = d in a)))
  && ([%#span44] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'1 self))
  && ([%#span43] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  predicate contains'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span48] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'1_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span47] invariant_assign'0 self
   -> contains'1 self d = true  -> sort'1 (let (a, _) = d in a) = sort'0 (let (_, a) = d in a)

  use set.Fset

  use set.Fset

  use set.Fset

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span51] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span49] invariant_nonneg'0 self)
   -> ([%#span50] level_of'0 self d >= 0 /\ level_of'0 self d <= level'1 self)

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span59] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#span52] invariant_nonneg'0 self)
   -> ([%#span57] set_level'0 self s <= level'1 self)
  && ([%#span56] set_level'0 self s >= 0)
  && ([%#span55] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#span54] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span53] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span60] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'0 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate sound'1 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'0.t_trail)
   =
    [%#span61] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a _ tl -> sound'1 tl /\ justified_sound'0 a
      end

  function find_justified'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 619 4 619 46] (self : Trail'0.t_trail) (kv : (Term'0.t_term, Value'0.t_value)) : ()

   =
    [%#span65] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = kv then () else find_justified'0 tl kv
      end

  axiom find_justified'0_spec : forall self : Trail'0.t_trail, kv : (Term'0.t_term, Value'0.t_value) . ([%#span62] sound'1 self)
   -> ([%#span63] contains'1 self kv)
   -> ([%#span64] forall l : int . forall a : Assign'0.t_assign . find'0 self kv = Option'0.C_Some (a, l)
   -> justified_sound'0 a)

  predicate is_decision'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 511 4 511 54] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span66] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Decision _ _, _) -> true
      | _ -> false
      end

  predicate is_input'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 521 4 521 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span67] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Input _ _, _) -> true
      | _ -> false
      end

  predicate entails'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 205 4 205 74] (self : Model'0.t_model) (j : Fset.fset (Term'0.t_term, Value'0.t_value)) (c : (Term'0.t_term, Value'0.t_value))

   =
    [%#span68] invariant'2 self  -> satisfy_set'0 self j  -> satisfies'0 self c

  predicate is_justified'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 501 4 501 55] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span69] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified _ _ _, _) -> true
      | _ -> false
      end

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span70] sort'0 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span73] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span71] is_bool'0 self)
   -> ([%#span72] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span74] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'1 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'1 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'0.t_trail) =
    [%#span75] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'0 j a  -> contains'1 tl a
        | _ -> true
        end
      end

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'0.t_trail) =
    [%#span76] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'1 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'0.t_trail) =
    [%#span77] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function justification'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 490 4 490 71] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span78] let _ = find_justified'0 self d in match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified j _ _, _) -> j
      | _ -> Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)
      end

  axiom justification'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#stheory8] invariant'1 self)
   -> ([%#stheory9] is_justified'0 self d)
   -> ([%#stheory10] sound'1 self)
   -> ([%#stheory13] is_decision'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#stheory12] is_input'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#stheory11] forall m : Model'0.t_model . inv'0 m  -> entails'0 m (justification'0 self d) d)

  function justification_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 659 4 659 58] (self : Trail'0.t_trail) (kv : (Term'0.t_term, Value'0.t_value)) : ()

   =
    [%#span79] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = kv then () else justification_contains'0 tl kv
      end

  axiom justification_contains'0_spec : forall self : Trail'0.t_trail, kv : (Term'0.t_term, Value'0.t_value) . ([%#stheory14] invariant'1 self)
   -> ([%#stheory15] is_justified'0 self kv)
   -> ([%#stheory17] set_level'0 self (justification'0 self kv) = level_of'0 self kv)
  && ([%#stheory16] forall e : (Term'0.t_term, Value'0.t_value) . contains'0 (justification'0 self kv) e
   -> contains'1 self e /\ level_of'0 self e <= level_of'0 self kv)

  use Cdsat_Theory_Conflict_Type as Conflict'0

  use Cdsat_Theory_Conflict_Type as Cdsat_Theory_Conflict_Type

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 1001 4 1001 29] (self : Conflict'0.t_conflict) : int =
    [%#span80] set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Conflict_Type.conflict_1 self)

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 995 4 995 30] (self : Conflict'0.t_conflict)

   =
    [%#span81] sound'1 (Cdsat_Theory_Conflict_Type.conflict_0 self)
    /\ (forall m : Model'0.t_model . inv'0 m  -> satisfy_set'0 m (Cdsat_Theory_Conflict_Type.conflict_1 self)  -> false)

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 988 4 988 34] (self : Conflict'0.t_conflict) =
    [%#span82] set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Conflict_Type.conflict_1 self) > 0
    /\ invariant'1 (Cdsat_Theory_Conflict_Type.conflict_0 self)
    /\ (forall a : (Term'0.t_term, Value'0.t_value) . contains'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) a
     -> contains'1 (Cdsat_Theory_Conflict_Type.conflict_0 self) a)

  constant self  : Conflict'0.t_conflict

  constant a  : (Term'0.t_term, Value'0.t_value)

  function resolvef [#"/Users/xavier/Code/cdsat/src/theory.rs" 1032 4 1032 51] (self : Conflict'0.t_conflict) (a : (Term'0.t_term, Value'0.t_value)) : Conflict'0.t_conflict


  goal vc_resolvef : ([%#stheory4] forall j : (Term'0.t_term, Value'0.t_value) . contains'0 (justification'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a) j
   -> not is_bool'0 (let (_, a) = j in a)
   -> is_decision'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) j
   -> level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) j
  < set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Conflict_Type.conflict_1 self))
   -> ([%#stheory3] contains'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) a)
   -> ([%#stheory2] is_justified'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a)
   -> ([%#stheory1] sound'0 self)
   -> ([%#stheory0] invariant'0 self)
   -> (([%#stheory10] sound'1 (Cdsat_Theory_Conflict_Type.conflict_0 self))
  && ([%#stheory9] is_justified'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a)
  && ([%#stheory8] invariant'1 (Cdsat_Theory_Conflict_Type.conflict_0 self)))
  /\ (([%#stheory13] is_decision'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a
   -> justification'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a
  = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#stheory12] is_input'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a
   -> justification'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a
  = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#stheory11] forall m : Model'0.t_model . inv'0 m
   -> entails'0 m (justification'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a) a)
   -> (let just = justification'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a in (([%#stheory15] is_justified'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a)
  && ([%#stheory14] invariant'1 (Cdsat_Theory_Conflict_Type.conflict_0 self)))
  /\ (([%#stheory17] set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (justification'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a)
  = level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a)
  && ([%#stheory16] forall e : (Term'0.t_term, Value'0.t_value) . contains'0 (justification'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a) e
   -> contains'1 (Cdsat_Theory_Conflict_Type.conflict_0 self) e
  /\ level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e
  <= level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a)
   -> (let _ = justification_contains'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a in let _ = resolve_sound'0 in let result = Conflict'0.C_Conflict (Cdsat_Theory_Conflict_Type.conflict_0 self) (Fset.union (remove'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) a) just) in ([%#stheory7] level'0 result
  = level'0 self)
  && ([%#stheory6] sound'0 result) && ([%#stheory5] invariant'0 result)))))
end
module Cdsat_Theory_Normal_Type
  use Cdsat_Theory_Trail_Type as Trail'0

  type t_normal  =
    | C_Normal (Trail'0.t_trail)

  function any_l (_ : 'b) : 'a

  let rec t_normal (input:t_normal) (ret  (field_0:Trail'0.t_trail))= any
    [ good (field_0:Trail'0.t_trail)-> {C_Normal field_0 = input} (! ret {field_0})
    | bad (field_0:Trail'0.t_trail)-> {C_Normal field_0 <> input} {false} any ]


  function normal_0 (self : t_normal) : Trail'0.t_trail =
    match self with
      | C_Normal a -> a
      end
end
module Cdsat_Theory_Impl5_RestrictSound_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 702 15 702 27

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 703 14 703 42

  let%span span2 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span3 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span4 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span5 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span6 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span7 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span8 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span9 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span10 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span11 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span12 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span13 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span14 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span15 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span16 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span17 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span20 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span21 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span22 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span23 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span24 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span25 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span26 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span28 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span29 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span30 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span31 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span32 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span33 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span34 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span35 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span36 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span37 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span38 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  let%span span39 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span40 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span41 = "/Users/xavier/Code/cdsat/src/theory.rs" 738 15 738 31

  let%span span42 = "/Users/xavier/Code/cdsat/src/theory.rs" 739 4 739 83

  let%span span43 = "/Users/xavier/Code/cdsat/src/theory.rs" 741 8 746 9

  let%span span44 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span45 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span46 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span47 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span48 = "/Users/xavier/Code/cdsat/src/theory.rs" 675 8 675 71

  let%span span49 = "/Users/xavier/Code/cdsat/src/theory.rs" 548 15 548 31

  let%span span50 = "/Users/xavier/Code/cdsat/src/theory.rs" 550 15 550 25

  let%span span51 = "/Users/xavier/Code/cdsat/src/theory.rs" 549 14 549 32

  let%span span52 = "/Users/xavier/Code/cdsat/src/theory.rs" 551 4 551 141

  let%span span53 = "/Users/xavier/Code/cdsat/src/theory.rs" 552 4 552 142

  let%span span54 = "/Users/xavier/Code/cdsat/src/theory.rs" 553 4 553 56

  let%span span55 = "/Users/xavier/Code/cdsat/src/theory.rs" 554 4 554 71

  let%span span56 = "/Users/xavier/Code/cdsat/src/theory.rs" 555 4 555 77

  let%span span57 = "/Users/xavier/Code/cdsat/src/theory.rs" 556 14 556 126

  let%span span58 = "/Users/xavier/Code/cdsat/src/theory.rs" 557 14 557 40

  let%span span59 = "/Users/xavier/Code/cdsat/src/theory.rs" 559 8 570 9

  let%span span60 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span61 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span62 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span2] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span3] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k = v
     -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'2 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use prelude.prelude.Int

  use Cdsat_Theory_Trail_Type as Trail'0

  use Cdsat_Theory_Assign_Type as Assign'0

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span5] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span4] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span8] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span7] level'0 self <= len'0 self)
  && ([%#span6] level'0 self >= 0)

  use prelude.prelude.Int

  use Cdsat_Theory_Term_Type as Term'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span9] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span10] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span11] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'1 a
      end

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span12] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span13] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span17] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span16] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span15] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span14] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span20] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span18] invariant_nonneg'0 self)
   -> ([%#span19] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span22] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span21] invariant_assign'0 self
   -> contains'0 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span23] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span26] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span24] is_bool'0 self)
   -> ([%#span25] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span27] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'0 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'0 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  use set.Fset

  use set.Fset

  predicate contains'1 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span28] Fset.mem e self

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'0.t_trail) =
    [%#span29] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'1 j a  -> contains'0 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span30] Fset.remove a self

  use set.Fset

  use set.Fset

  use set.Fset

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span38] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#span31] invariant_nonneg'0 self)
   -> ([%#span36] set_level'0 self s <= level'0 self)
  && ([%#span35] set_level'0 self s >= 0)
  && ([%#span34] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#span33] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'1 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span32] forall i : (Term'0.t_term, Value'0.t_value) . contains'1 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'0.t_trail) =
    [%#span39] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'0.t_trail) =
    [%#span40] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function count_bounds'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 740 4 740 35] (self : Trail'0.t_trail) : () =
    [%#span43] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign (Assign'0.C_Input _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Justified _ _ _) _ tl -> count_bounds'0 tl
      end

  axiom count_bounds'0_spec : forall self : Trail'0.t_trail . ([%#span41] invariant'0 self)
   -> ([%#span42] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a  -> level_of'0 self a <= level'0 self)

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span46] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span44] inv'0 self)
   -> ([%#span45] invariant'2 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span47] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  predicate satisfied_by'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 674 4 674 47] (self : Trail'0.t_trail) (m : Model'0.t_model)

   =
    [%#span48] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a  -> satisfies'0 m a

  function restrict'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 558 4 558 45] (self : Trail'0.t_trail) (level : int) : Trail'0.t_trail

   =
    [%#span59] match self with
      | Trail'0.C_Empty -> Trail'0.C_Empty
      | Trail'0.C_Assign a l tl -> let tl = restrict'0 tl level in let _ = count_bounds'0 tl in if l <= level then
        Trail'0.C_Assign a l tl
      else
        tl

      end

  axiom restrict'0_spec : forall self : Trail'0.t_trail, level : int . ([%#span49] invariant'0 self)
   -> ([%#span50] level >= 0)
   -> ([%#span58] len'0 (restrict'0 self level) <= len'0 self)
  && ([%#span57] (level'0 self >= level  -> level'0 (restrict'0 self level) = level)
  /\ (level'0 self < level  -> level'0 (restrict'0 self level) = level'0 self))
  && ([%#span56] forall m : Model'0.t_model . inv'0 m
   -> satisfied_by'0 self m  -> satisfied_by'0 (restrict'0 self level) m)
  && ([%#span55] forall a : (Term'0.t_term, Value'0.t_value) . not contains'0 self a
   -> not contains'0 (restrict'0 self level) a)
  && ([%#span54] level >= level'0 self  -> restrict'0 self level = self)
  && ([%#span53] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 (restrict'0 self level) a
   -> contains'0 self a
  /\ level_of'0 (restrict'0 self level) a <= level /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span52] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a
   -> level_of'0 self a <= level
   -> contains'0 (restrict'0 self level) a /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span51] invariant'0 (restrict'0 self level))

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span60] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 v a  -> satisfies'0 self a

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span61] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'0 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'0.t_trail)
   =
    [%#span62] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a _ tl -> sound'0 tl /\ justified_sound'0 a
      end

  constant self  : Trail'0.t_trail

  constant level  : int

  function restrict_sound [#"/Users/xavier/Code/cdsat/src/theory.rs" 704 4 704 43] (self : Trail'0.t_trail) (level : int) : ()


  goal vc_restrict_sound : ([%#stheory0] sound'0 self)
   -> match self with
    | Trail'0.C_Empty -> [%#stheory1] sound'0 (restrict'0 self level)
    | Trail'0.C_Assign a l tl -> ([%#stheory0] sound'0 tl)
    /\ (([%#stheory1] sound'0 (restrict'0 tl level))
     -> (let _ = restrict_sound tl level in [%#stheory1] sound'0 (restrict'0 self level)))
    end
end
module Cdsat_Theory_Impl5_TrailPlausible_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 784 15 784 31

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 785 15 785 31

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 786 4 786 30

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 787 14 787 49

  let%span span4 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span5 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span6 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span7 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span8 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span9 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span10 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span11 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span12 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span13 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span14 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span15 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span16 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span17 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span20 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span21 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span22 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span23 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span24 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span25 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span26 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span28 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span29 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span30 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span31 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span32 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span33 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span34 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span35 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span36 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span37 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span38 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span39 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  let%span span40 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span41 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  use Cdsat_Theory_Assign_Type as Assign'0

  use Cdsat_Theory_Value_Type as Value'0

  use Cdsat_Theory_Term_Type as Term'0

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span4] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Cdsat_Theory_Trail_Type as Trail'0

  use Cdsat_Theory_Sort_Type as Sort'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span5] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span6] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span9] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span7] is_bool'0 self)
   -> ([%#span8] is_bool'0 (negate'0 self))

  use prelude.prelude.Int

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span10] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span11] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span12] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'1 a
      end

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span14] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span13] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span17] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span16] level'0 self <= len'0 self)
  && ([%#span15] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span18] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span22] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span21] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span20] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span19] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span24] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span23] invariant_assign'0 self
   -> contains'0 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span25] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'0 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'0 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  use set.Fset

  use set.Fset

  predicate contains'1 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span26] Fset.mem e self

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'0.t_trail) =
    [%#span27] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'1 j a  -> contains'0 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span28] Fset.remove a self

  use set.Fset

  use set.Fset

  use set.Fset

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span31] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span29] invariant_nonneg'0 self)
   -> ([%#span30] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span39] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#span32] invariant_nonneg'0 self)
   -> ([%#span37] set_level'0 self s <= level'0 self)
  && ([%#span36] set_level'0 self s >= 0)
  && ([%#span35] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#span34] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'1 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span33] forall i : (Term'0.t_term, Value'0.t_value) . contains'1 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'0.t_trail) =
    [%#span40] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'0.t_trail) =
    [%#span41] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  constant self  : Trail'0.t_trail

  constant d  : (Term'0.t_term, Value'0.t_value)

  function trail_plausible [#"/Users/xavier/Code/cdsat/src/theory.rs" 788 4 788 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : ()


  goal vc_trail_plausible : ([%#stheory2] is_bool'0 (let (_, a) = d in a))
   -> ([%#stheory1] contains'0 self d)
   -> ([%#stheory0] invariant'0 self)
   -> match self with
    | Trail'0.C_Empty -> [%#stheory3] not contains'0 self ((let (a, _) = d in a), negate'0 (let (_, a) = d in a))
    | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then
      [%#stheory3] not contains'0 self ((let (a, _) = d in a), negate'0 (let (_, a) = d in a))
    else
      (([%#stheory2] is_bool'0 (let (_, a) = d in a))
      && ([%#stheory1] contains'0 tl d) && ([%#stheory0] invariant'0 tl))
      /\ (([%#stheory3] not contains'0 tl ((let (a, _) = d in a), negate'0 (let (_, a) = d in a)))
       -> (let _ = trail_plausible tl d in [%#stheory3] not contains'0 self ((let (a, _) = d in a), negate'0 (let (_, a) = d in a))))

    end
end
module Cdsat_Theory_Impl5_RestrictIdempotent_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 771 15 771 31

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 772 15 772 33

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 773 15 773 23

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 774 14 774 65

  let%span span4 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span5 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span6 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span7 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span8 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span9 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span10 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span11 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span12 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span13 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span14 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span15 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span16 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span17 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span20 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span21 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span22 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span23 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span24 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span25 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span26 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span28 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span29 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span30 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span31 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span32 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span33 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span34 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span35 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span36 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span37 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span38 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span39 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span40 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  let%span span41 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span42 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span43 = "/Users/xavier/Code/cdsat/src/theory.rs" 738 15 738 31

  let%span span44 = "/Users/xavier/Code/cdsat/src/theory.rs" 739 4 739 83

  let%span span45 = "/Users/xavier/Code/cdsat/src/theory.rs" 741 8 746 9

  let%span span46 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span47 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span48 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span49 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span50 = "/Users/xavier/Code/cdsat/src/theory.rs" 675 8 675 71

  let%span span51 = "/Users/xavier/Code/cdsat/src/theory.rs" 548 15 548 31

  let%span span52 = "/Users/xavier/Code/cdsat/src/theory.rs" 550 15 550 25

  let%span span53 = "/Users/xavier/Code/cdsat/src/theory.rs" 549 14 549 32

  let%span span54 = "/Users/xavier/Code/cdsat/src/theory.rs" 551 4 551 141

  let%span span55 = "/Users/xavier/Code/cdsat/src/theory.rs" 552 4 552 142

  let%span span56 = "/Users/xavier/Code/cdsat/src/theory.rs" 553 4 553 56

  let%span span57 = "/Users/xavier/Code/cdsat/src/theory.rs" 554 4 554 71

  let%span span58 = "/Users/xavier/Code/cdsat/src/theory.rs" 555 4 555 77

  let%span span59 = "/Users/xavier/Code/cdsat/src/theory.rs" 556 14 556 126

  let%span span60 = "/Users/xavier/Code/cdsat/src/theory.rs" 557 14 557 40

  let%span span61 = "/Users/xavier/Code/cdsat/src/theory.rs" 559 8 570 9

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span4] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span5] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k = v
     -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'2 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use Cdsat_Theory_Trail_Type as Trail'0

  use Cdsat_Theory_Assign_Type as Assign'0

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span7] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span6] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span10] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span9] level'0 self <= len'0 self)
  && ([%#span8] level'0 self >= 0)

  use prelude.prelude.Int

  use Cdsat_Theory_Term_Type as Term'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span11] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span12] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span13] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'1 a
      end

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span14] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span15] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span19] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span18] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span17] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span16] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span22] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span20] invariant_nonneg'0 self)
   -> ([%#span21] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span24] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span23] invariant_assign'0 self
   -> contains'0 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span25] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span28] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span26] is_bool'0 self)
   -> ([%#span27] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span29] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'0 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'0 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  use set.Fset

  use set.Fset

  predicate contains'1 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span30] Fset.mem e self

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'0.t_trail) =
    [%#span31] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'1 j a  -> contains'0 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span32] Fset.remove a self

  use set.Fset

  use set.Fset

  use set.Fset

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span40] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#span33] invariant_nonneg'0 self)
   -> ([%#span38] set_level'0 self s <= level'0 self)
  && ([%#span37] set_level'0 self s >= 0)
  && ([%#span36] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#span35] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'1 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span34] forall i : (Term'0.t_term, Value'0.t_value) . contains'1 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'0.t_trail) =
    [%#span41] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'0.t_trail) =
    [%#span42] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function count_bounds'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 740 4 740 35] (self : Trail'0.t_trail) : () =
    [%#span45] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign (Assign'0.C_Input _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Justified _ _ _) _ tl -> count_bounds'0 tl
      end

  axiom count_bounds'0_spec : forall self : Trail'0.t_trail . ([%#span43] invariant'0 self)
   -> ([%#span44] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a  -> level_of'0 self a <= level'0 self)

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span48] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span46] inv'0 self)
   -> ([%#span47] invariant'2 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span49] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  predicate satisfied_by'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 674 4 674 47] (self : Trail'0.t_trail) (m : Model'0.t_model)

   =
    [%#span50] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a  -> satisfies'0 m a

  function restrict'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 558 4 558 45] (self : Trail'0.t_trail) (level : int) : Trail'0.t_trail

   =
    [%#span61] match self with
      | Trail'0.C_Empty -> Trail'0.C_Empty
      | Trail'0.C_Assign a l tl -> let tl = restrict'0 tl level in let _ = count_bounds'0 tl in if l <= level then
        Trail'0.C_Assign a l tl
      else
        tl

      end

  axiom restrict'0_spec : forall self : Trail'0.t_trail, level : int . ([%#span51] invariant'0 self)
   -> ([%#span52] level >= 0)
   -> ([%#span60] len'0 (restrict'0 self level) <= len'0 self)
  && ([%#span59] (level'0 self >= level  -> level'0 (restrict'0 self level) = level)
  /\ (level'0 self < level  -> level'0 (restrict'0 self level) = level'0 self))
  && ([%#span58] forall m : Model'0.t_model . inv'0 m
   -> satisfied_by'0 self m  -> satisfied_by'0 (restrict'0 self level) m)
  && ([%#span57] forall a : (Term'0.t_term, Value'0.t_value) . not contains'0 self a
   -> not contains'0 (restrict'0 self level) a)
  && ([%#span56] level >= level'0 self  -> restrict'0 self level = self)
  && ([%#span55] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 (restrict'0 self level) a
   -> contains'0 self a
  /\ level_of'0 (restrict'0 self level) a <= level /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span54] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a
   -> level_of'0 self a <= level
   -> contains'0 (restrict'0 self level) a /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span53] invariant'0 (restrict'0 self level))

  constant self  : Trail'0.t_trail

  constant l1  : int

  constant l2  : int

  function restrict_idempotent [#"/Users/xavier/Code/cdsat/src/theory.rs" 775 4 775 54] (self : Trail'0.t_trail) (l1 : int) (l2 : int) : ()


  goal vc_restrict_idempotent : ([%#stheory2] l1 <= l2)
   -> ([%#stheory1] l1 >= 0 /\ l2 >= 0)
   -> ([%#stheory0] invariant'0 self)
   -> match self with
    | Trail'0.C_Empty -> [%#stheory3] restrict'0 self l1 = restrict'0 (restrict'0 self l2) l1
    | Trail'0.C_Assign _ _ tl -> (([%#stheory2] l1 <= l2)
    && ([%#stheory1] l1 >= 0 /\ l2 >= 0) && ([%#stheory0] invariant'0 tl))
    /\ (([%#stheory3] restrict'0 tl l1 = restrict'0 (restrict'0 tl l2) l1)
     -> ([%#stheory3] restrict'0 self l1 = restrict'0 (restrict'0 self l2) l1))
    end
end
module Cdsat_Theory_Impl1_NegateInvolutive_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 107 15 107 29

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 108 14 108 44

  let%span span2 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span3 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span4 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span5 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span6 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  use Cdsat_Theory_Value_Type as Value'0

  use Cdsat_Theory_Sort_Type as Sort'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span2] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span3] sort'0 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span6] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span4] is_bool'0 self)
   -> ([%#span5] is_bool'0 (negate'0 self))

  constant self  : Value'0.t_value

  function negate_involutive [#"/Users/xavier/Code/cdsat/src/theory.rs" 109 4 109 34] (self : Value'0.t_value) : ()

  goal vc_negate_involutive : ([%#stheory0] is_bool'0 self)  -> ([%#stheory1] negate'0 (negate'0 self) = self)
end
module Cdsat_Theory_Impl4_Lemma_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 225 15 225 40

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 226 15 226 40

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 227 15 227 31

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 229 17 229 21

  let%span stheory4 = "/Users/xavier/Code/cdsat/src/theory.rs" 228 14 228 71

  let%span stheory5 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span stheory6 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span7 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span8 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span9 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span10 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span11 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span12 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span13 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span14 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span15 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span7] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span8] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k = v
     -> Cdsat_Theory_Var_Type.var_1 k = sort'0 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'0 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use prelude.prelude.Real

  use prelude.prelude.Int

  function from_int'0 (_1 : int) : Real.real

  use Cdsat_Theory_Term_Type as Term'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span9] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'0 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span10] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#stheory5] inv'0 self)
   -> ([%#stheory6] invariant'0 self  -> sort'0 (interp'0 self t) = sort'1 t)

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span11] sort'0 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span14] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span12] is_bool'0 self)
   -> ([%#span13] is_bool'0 (negate'0 self))

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span15] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  constant self  : Model'0.t_model

  constant t  : Term'0.t_term

  constant v  : Value'0.t_value

  function lemma' [#"/Users/xavier/Code/cdsat/src/theory.rs" 229 4 229 41] (self : Model'0.t_model) (t : Term'0.t_term) (v : Value'0.t_value) : ()


  goal vc_lemma' : ([%#stheory3] inv'0 self)
   -> ([%#stheory2] invariant'0 self)
   -> ([%#stheory1] sort'1 t = Sort'0.C_Boolean)
   -> ([%#stheory0] sort'0 v = Sort'0.C_Boolean)
   -> ([%#stheory5] inv'0 self)
  /\ (([%#stheory6] invariant'0 self  -> sort'0 (interp'0 self t) = sort'1 t)
   -> match interp'0 self t with
    | Value'0.C_Bool _ -> [%#stheory4] satisfies'0 self (t, v) \/ satisfies'0 self (t, negate'0 v)
    | _ -> [%#stheory4] satisfies'0 self (t, v) \/ satisfies'0 self (t, negate'0 v)
    end)
end
module Cdsat_Theory_Impl7_LearnJustified_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 1007 15 1007 31

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 1008 15 1008 27

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 1009 4 1009 37

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 1010 4 1010 51

  let%span stheory4 = "/Users/xavier/Code/cdsat/src/theory.rs" 1011 4 1011 108

  let%span span5 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span6 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span7 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span8 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span9 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span10 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span11 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span12 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span13 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span14 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span15 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span16 = "/Users/xavier/Code/cdsat/src/theory.rs" 225 15 225 40

  let%span span17 = "/Users/xavier/Code/cdsat/src/theory.rs" 226 15 226 40

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 227 15 227 31

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 229 17 229 21

  let%span span20 = "/Users/xavier/Code/cdsat/src/theory.rs" 228 14 228 71

  let%span span21 = "/Users/xavier/Code/cdsat/src/theory.rs" 230 8 233 9

  let%span span22 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span23 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span24 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span25 = "/Users/xavier/Code/cdsat/src/theory.rs" 60 8 60 36

  let%span span26 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span28 = "/Users/xavier/Code/cdsat/src/theory.rs" 996 8 996 91

  let%span span29 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span30 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span31 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span32 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span33 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span34 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span35 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span36 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span37 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span38 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span39 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span40 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span41 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span42 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span43 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span44 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span45 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span46 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span47 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span48 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span49 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span50 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span51 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span52 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span53 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span54 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span55 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span56 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  let%span span57 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span58 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span59 = "/Users/xavier/Code/cdsat/src/theory.rs" 989 8 989 131

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span5] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span6] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k = v
     -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'2 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use prelude.prelude.Real

  use prelude.prelude.Int

  function from_int'0 (_1 : int) : Real.real

  use Cdsat_Theory_Term_Type as Term'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span7] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span10] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span8] inv'0 self)
   -> ([%#span9] invariant'2 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate is_bool'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span11] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span14] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span12] is_bool'1 self)
   -> ([%#span13] is_bool'1 (negate'0 self))

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span15] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  function lemma'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 229 4 229 41] (self : Model'0.t_model) (t : Term'0.t_term) (v : Value'0.t_value) : ()

   =
    [%#span21] match interp'0 self t with
      | Value'0.C_Bool _ -> ()
      | _ -> ()
      end

  axiom lemma'0_spec : forall self : Model'0.t_model, t : Term'0.t_term, v : Value'0.t_value . ([%#span16] sort'1 v
  = Sort'0.C_Boolean)
   -> ([%#span17] sort'0 t = Sort'0.C_Boolean)
   -> ([%#span18] invariant'2 self)
   -> ([%#span19] inv'0 self)  -> ([%#span20] satisfies'0 self (t, v) \/ satisfies'0 self (t, negate'0 v))

  use Cdsat_Theory_Conflict_Type as Conflict'0

  use set.Fset

  use set.Fset

  predicate contains'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span22] Fset.mem e self

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span23] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 v a  -> satisfies'0 self a

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span24] Fset.remove a self

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 59 4 59 32] (self : Term'0.t_term) =
    [%#span25] sort'0 self = Sort'0.C_Boolean

  use Cdsat_Theory_Conflict_Type as Cdsat_Theory_Conflict_Type

  use Cdsat_Theory_Trail_Type as Trail'0

  use Cdsat_Theory_Assign_Type as Assign'0

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span26] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'0 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate sound'1 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'0.t_trail)
   =
    [%#span27] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a _ tl -> sound'1 tl /\ justified_sound'0 a
      end

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 995 4 995 30] (self : Conflict'0.t_conflict)

   =
    [%#span28] sound'1 (Cdsat_Theory_Conflict_Type.conflict_0 self)
    /\ (forall m : Model'0.t_model . inv'0 m  -> satisfy_set'0 m (Cdsat_Theory_Conflict_Type.conflict_1 self)  -> false)

  use prelude.prelude.Int

  predicate invariant'3 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span29] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span30] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'3 a
      end

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span32] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span31] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span35] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span34] level'0 self <= len'0 self)
  && ([%#span33] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span36] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span37] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span41] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span40] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span39] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span38] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  predicate contains'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span43] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'1_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span42] invariant_assign'0 self
   -> contains'1 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span44] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'1 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'1 (let (_, a) = ap in a) then
        not contains'1 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'0.t_trail) =
    [%#span45] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'0 j a  -> contains'1 tl a
        | _ -> true
        end
      end

  use set.Fset

  use set.Fset

  use set.Fset

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span48] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span46] invariant_nonneg'0 self)
   -> ([%#span47] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span56] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#span49] invariant_nonneg'0 self)
   -> ([%#span54] set_level'0 self s <= level'0 self)
  && ([%#span53] set_level'0 self s >= 0)
  && ([%#span52] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#span51] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span50] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'0.t_trail) =
    [%#span57] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'0.t_trail) =
    [%#span58] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 988 4 988 34] (self : Conflict'0.t_conflict) =
    [%#span59] set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Conflict_Type.conflict_1 self) > 0
    /\ invariant'1 (Cdsat_Theory_Conflict_Type.conflict_0 self)
    /\ (forall a : (Term'0.t_term, Value'0.t_value) . contains'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) a
     -> contains'1 (Cdsat_Theory_Conflict_Type.conflict_0 self) a)

  constant self  : Conflict'0.t_conflict

  constant ass  : (Term'0.t_term, Value'0.t_value)

  function learn_justified [#"/Users/xavier/Code/cdsat/src/theory.rs" 1012 4 1012 52] (self : Conflict'0.t_conflict) (ass : (Term'0.t_term, Value'0.t_value)) : ()


  goal vc_learn_justified : ([%#stheory3] is_bool'0 (let (a, _) = ass in a) /\ is_bool'1 (let (_, a) = ass in a))
   -> ([%#stheory2] contains'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) ass)
   -> ([%#stheory1] sound'0 self)
   -> ([%#stheory0] invariant'0 self)
   -> (let _ = lemma'0 in [%#stheory4] forall m : Model'0.t_model . inv'0 m
   -> satisfy_set'0 m (remove'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) ass)
   -> satisfies'0 m ((let (a, _) = ass in a), negate'0 (let (_, a) = ass in a)))
end
module Cdsat_Theory_Impl7_Backjump2_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 1101 15 1101 31

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 1102 15 1102 27

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 1103 4 1103 35

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 1104 4 1104 47

  let%span stheory4 = "/Users/xavier/Code/cdsat/src/theory.rs" 1105 4 1105 103

  let%span stheory5 = "/Users/xavier/Code/cdsat/src/theory.rs" 1106 4 1106 36

  let%span stheory6 = "/Users/xavier/Code/cdsat/src/theory.rs" 1107 14 1107 28

  let%span stheory7 = "/Users/xavier/Code/cdsat/src/theory.rs" 1108 4 1108 38

  let%span stheory8 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span stheory9 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span stheory10 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span stheory11 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span stheory12 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span stheory13 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span stheory14 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span stheory15 = "/Users/xavier/Code/cdsat/src/theory.rs" 548 15 548 31

  let%span stheory16 = "/Users/xavier/Code/cdsat/src/theory.rs" 550 15 550 25

  let%span stheory17 = "/Users/xavier/Code/cdsat/src/theory.rs" 549 14 549 32

  let%span stheory18 = "/Users/xavier/Code/cdsat/src/theory.rs" 551 4 551 141

  let%span stheory19 = "/Users/xavier/Code/cdsat/src/theory.rs" 552 4 552 142

  let%span stheory20 = "/Users/xavier/Code/cdsat/src/theory.rs" 553 4 553 56

  let%span stheory21 = "/Users/xavier/Code/cdsat/src/theory.rs" 554 4 554 71

  let%span stheory22 = "/Users/xavier/Code/cdsat/src/theory.rs" 555 4 555 77

  let%span stheory23 = "/Users/xavier/Code/cdsat/src/theory.rs" 556 14 556 126

  let%span stheory24 = "/Users/xavier/Code/cdsat/src/theory.rs" 557 14 557 40

  let%span stheory25 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span stheory26 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span28 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span29 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span30 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span31 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span32 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span33 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span34 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span35 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span36 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span37 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span38 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span39 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span40 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span41 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span42 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span43 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span44 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span45 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span46 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span47 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span48 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span49 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span50 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span51 = "/Users/xavier/Code/cdsat/src/theory.rs" 675 8 675 71

  let%span span52 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span53 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span54 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span55 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span56 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span57 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span58 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span59 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  let%span span60 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span61 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span62 = "/Users/xavier/Code/cdsat/src/theory.rs" 738 15 738 31

  let%span span63 = "/Users/xavier/Code/cdsat/src/theory.rs" 739 4 739 83

  let%span span64 = "/Users/xavier/Code/cdsat/src/theory.rs" 741 8 746 9

  let%span span65 = "/Users/xavier/Code/cdsat/src/theory.rs" 559 8 570 9

  let%span span66 = "/Users/xavier/Code/cdsat/src/theory.rs" 225 15 225 40

  let%span span67 = "/Users/xavier/Code/cdsat/src/theory.rs" 226 15 226 40

  let%span span68 = "/Users/xavier/Code/cdsat/src/theory.rs" 227 15 227 31

  let%span span69 = "/Users/xavier/Code/cdsat/src/theory.rs" 229 17 229 21

  let%span span70 = "/Users/xavier/Code/cdsat/src/theory.rs" 228 14 228 71

  let%span span71 = "/Users/xavier/Code/cdsat/src/theory.rs" 230 8 233 9

  let%span span72 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span73 = "/Users/xavier/Code/cdsat/src/theory.rs" 60 8 60 36

  let%span span74 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span75 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span76 = "/Users/xavier/Code/cdsat/src/theory.rs" 996 8 996 91

  let%span span77 = "/Users/xavier/Code/cdsat/src/theory.rs" 989 8 989 131

  let%span span78 = "/Users/xavier/Code/cdsat/src/theory.rs" 1007 15 1007 31

  let%span span79 = "/Users/xavier/Code/cdsat/src/theory.rs" 1008 15 1008 27

  let%span span80 = "/Users/xavier/Code/cdsat/src/theory.rs" 1009 4 1009 37

  let%span span81 = "/Users/xavier/Code/cdsat/src/theory.rs" 1010 4 1010 51

  let%span span82 = "/Users/xavier/Code/cdsat/src/theory.rs" 1011 4 1011 108

  let%span span83 = "/Users/xavier/Code/cdsat/src/theory.rs" 1005 4 1005 12

  let%span span84 = "/Users/xavier/Code/cdsat/src/theory.rs" 107 15 107 29

  let%span span85 = "/Users/xavier/Code/cdsat/src/theory.rs" 108 14 108 44

  let%span span86 = "/Users/xavier/Code/cdsat/src/theory.rs" 105 4 105 12

  let%span span87 = "/Users/xavier/Code/cdsat/src/theory.rs" 771 15 771 31

  let%span span88 = "/Users/xavier/Code/cdsat/src/theory.rs" 772 15 772 33

  let%span span89 = "/Users/xavier/Code/cdsat/src/theory.rs" 773 15 773 23

  let%span span90 = "/Users/xavier/Code/cdsat/src/theory.rs" 774 14 774 65

  let%span span91 = "/Users/xavier/Code/cdsat/src/theory.rs" 776 8 779 9

  let%span span92 = "/Users/xavier/Code/cdsat/src/theory.rs" 784 15 784 31

  let%span span93 = "/Users/xavier/Code/cdsat/src/theory.rs" 785 15 785 31

  let%span span94 = "/Users/xavier/Code/cdsat/src/theory.rs" 786 4 786 30

  let%span span95 = "/Users/xavier/Code/cdsat/src/theory.rs" 787 14 787 49

  let%span span96 = "/Users/xavier/Code/cdsat/src/theory.rs" 789 8 798 9

  let%span span97 = "/Users/xavier/Code/cdsat/src/theory.rs" 702 15 702 27

  let%span span98 = "/Users/xavier/Code/cdsat/src/theory.rs" 703 14 703 42

  let%span span99 = "/Users/xavier/Code/cdsat/src/theory.rs" 705 8 710 9

  let%span span100 = "/Users/xavier/Code/cdsat/src/theory.rs" 682 8 682 82

  let%span span101 = "/Users/xavier/Code/cdsat/src/theory.rs" 693 4 693 55

  let%span span102 = "/Users/xavier/Code/cdsat/src/theory.rs" 695 8 695 108

  let%span span103 = "/Users/xavier/Code/cdsat/src/theory.rs" 823 4 823 16

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span27] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'3 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span28] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'0 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'3 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use Cdsat_Theory_Assign_Type as Assign'0

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span29] sort'0 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span30] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#stheory25] is_bool'0 self)
   -> ([%#stheory26] is_bool'0 (negate'0 self))

  use Cdsat_Theory_Trail_Type as Trail'0

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span32] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span31] len'0 self >= 0

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  use Cdsat_Theory_Term_Type as Term'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span33] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'0 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span36] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span34] inv'0 self)
   -> ([%#span35] invariant'3 self  -> sort'0 (interp'0 self t) = sort'1 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span37] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  use prelude.prelude.Int

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span38] match self with
      | Assign'0.C_Decision t v -> sort'1 t = sort'0 v
      | Assign'0.C_Justified _ t v -> sort'1 t = sort'0 v /\ sort'1 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'1 t = sort'0 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span39] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'2 a
      end

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span42] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span41] level'0 self <= len'0 self)
  && ([%#span40] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span43] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span44] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span48] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span47] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'1 (let (a, _) = d in a) = sort'0 (let (_, a) = d in a)))
  && ([%#span46] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span45] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  predicate contains'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span50] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'1_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span49] invariant_assign'0 self
   -> contains'1 self d = true  -> sort'1 (let (a, _) = d in a) = sort'0 (let (_, a) = d in a)

  predicate satisfied_by'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 674 4 674 47] (self : Trail'0.t_trail) (m : Model'0.t_model)

   =
    [%#span51] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 self a  -> satisfies'0 m a

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span54] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span52] invariant_nonneg'0 self)
   -> ([%#span53] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span55] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'1 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'1 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  use set.Fset

  use set.Fset

  predicate contains'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span56] Fset.mem e self

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'0.t_trail) =
    [%#span57] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'0 j a  -> contains'1 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span58] Fset.remove a self

  use set.Fset

  use set.Fset

  use set.Fset

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span59] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#stheory8] invariant_nonneg'0 self)
   -> ([%#stheory13] set_level'0 self s <= level'0 self)
  && ([%#stheory12] set_level'0 self s >= 0)
  && ([%#stheory11] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#stheory10] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#stheory9] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'0.t_trail) =
    [%#span60] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'0.t_trail) =
    [%#span61] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function count_bounds'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 740 4 740 35] (self : Trail'0.t_trail) : () =
    [%#span64] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign (Assign'0.C_Input _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Justified _ _ _) _ tl -> count_bounds'0 tl
      end

  axiom count_bounds'0_spec : forall self : Trail'0.t_trail . ([%#span62] invariant'1 self)
   -> ([%#span63] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 self a  -> level_of'0 self a <= level'0 self)

  function restrict'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 558 4 558 45] (self : Trail'0.t_trail) (level : int) : Trail'0.t_trail

   =
    [%#span65] match self with
      | Trail'0.C_Empty -> Trail'0.C_Empty
      | Trail'0.C_Assign a l tl -> let tl = restrict'0 tl level in let _ = count_bounds'0 tl in if l <= level then
        Trail'0.C_Assign a l tl
      else
        tl

      end

  axiom restrict'0_spec : forall self : Trail'0.t_trail, level : int . ([%#stheory15] invariant'1 self)
   -> ([%#stheory16] level >= 0)
   -> ([%#stheory24] len'0 (restrict'0 self level) <= len'0 self)
  && ([%#stheory23] (level'0 self >= level  -> level'0 (restrict'0 self level) = level)
  /\ (level'0 self < level  -> level'0 (restrict'0 self level) = level'0 self))
  && ([%#stheory22] forall m : Model'0.t_model . inv'0 m
   -> satisfied_by'0 self m  -> satisfied_by'0 (restrict'0 self level) m)
  && ([%#stheory21] forall a : (Term'0.t_term, Value'0.t_value) . not contains'1 self a
   -> not contains'1 (restrict'0 self level) a)
  && ([%#stheory20] level >= level'0 self  -> restrict'0 self level = self)
  && ([%#stheory19] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (restrict'0 self level) a
   -> contains'1 self a
  /\ level_of'0 (restrict'0 self level) a <= level /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#stheory18] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 self a
   -> level_of'0 self a <= level
   -> contains'1 (restrict'0 self level) a /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#stheory17] invariant'1 (restrict'0 self level))

  function lemma'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 229 4 229 41] (self : Model'0.t_model) (t : Term'0.t_term) (v : Value'0.t_value) : ()

   =
    [%#span71] match interp'0 self t with
      | Value'0.C_Bool _ -> ()
      | _ -> ()
      end

  axiom lemma'0_spec : forall self : Model'0.t_model, t : Term'0.t_term, v : Value'0.t_value . ([%#span66] sort'0 v
  = Sort'0.C_Boolean)
   -> ([%#span67] sort'1 t = Sort'0.C_Boolean)
   -> ([%#span68] invariant'3 self)
   -> ([%#span69] inv'0 self)  -> ([%#span70] satisfies'0 self (t, v) \/ satisfies'0 self (t, negate'0 v))

  use Cdsat_Theory_Conflict_Type as Conflict'0

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span72] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 v a  -> satisfies'0 self a

  predicate is_bool'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 59 4 59 32] (self : Term'0.t_term) =
    [%#span73] sort'1 self = Sort'0.C_Boolean

  use Cdsat_Theory_Conflict_Type as Cdsat_Theory_Conflict_Type

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span74] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'0 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate sound'2 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'0.t_trail)
   =
    [%#span75] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a _ tl -> sound'2 tl /\ justified_sound'0 a
      end

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 995 4 995 30] (self : Conflict'0.t_conflict)

   =
    [%#span76] sound'2 (Cdsat_Theory_Conflict_Type.conflict_0 self)
    /\ (forall m : Model'0.t_model . inv'0 m  -> satisfy_set'0 m (Cdsat_Theory_Conflict_Type.conflict_1 self)  -> false)

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 988 4 988 34] (self : Conflict'0.t_conflict) =
    [%#span77] set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Conflict_Type.conflict_1 self) > 0
    /\ invariant'1 (Cdsat_Theory_Conflict_Type.conflict_0 self)
    /\ (forall a : (Term'0.t_term, Value'0.t_value) . contains'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) a
     -> contains'1 (Cdsat_Theory_Conflict_Type.conflict_0 self) a)

  function learn_justified'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 1012 4 1012 52] (self : Conflict'0.t_conflict) (ass : (Term'0.t_term, Value'0.t_value)) : ()

   =
    [%#span83] let _ = () in ()

  axiom learn_justified'0_spec : forall self : Conflict'0.t_conflict, ass : (Term'0.t_term, Value'0.t_value) . ([%#span78] invariant'0 self)
   -> ([%#span79] sound'0 self)
   -> ([%#span80] contains'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) ass)
   -> ([%#span81] is_bool'1 (let (a, _) = ass in a) /\ is_bool'0 (let (_, a) = ass in a))
   -> ([%#span82] forall m : Model'0.t_model . inv'0 m
   -> satisfy_set'0 m (remove'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) ass)
   -> satisfies'0 m ((let (a, _) = ass in a), negate'0 (let (_, a) = ass in a)))

  function negate_involutive'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 109 4 109 34] (self : Value'0.t_value) : () =
    [%#span86] ()

  axiom negate_involutive'0_spec : forall self : Value'0.t_value . ([%#span84] is_bool'0 self)
   -> ([%#span85] negate'0 (negate'0 self) = self)

  function restrict_idempotent'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 775 4 775 54] (self : Trail'0.t_trail) (l1 : int) (l2 : int) : ()

   =
    [%#span91] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign _ _ tl -> restrict_idempotent'0 tl l1 l2
      end

  axiom restrict_idempotent'0_spec : forall self : Trail'0.t_trail, l1 : int, l2 : int . ([%#span87] invariant'1 self)
   -> ([%#span88] l1 >= 0 /\ l2 >= 0)
   -> ([%#span89] l1 <= l2)  -> ([%#span90] restrict'0 self l1 = restrict'0 (restrict'0 self l2) l1)

  function trail_plausible'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 788 4 788 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : ()

   =
    [%#span96] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then () else let _ = trail_plausible'0 tl d in ()
      end

  axiom trail_plausible'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span92] invariant'1 self)
   -> ([%#span93] contains'1 self d)
   -> ([%#span94] is_bool'0 (let (_, a) = d in a))
   -> ([%#span95] not contains'1 self ((let (a, _) = d in a), negate'0 (let (_, a) = d in a)))

  function restrict_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 704 4 704 43] (self : Trail'0.t_trail) (level : int) : ()

   =
    [%#span99] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign a l tl -> let _ = restrict_sound'0 tl level in ()
      end

  axiom restrict_sound'0_spec : forall self : Trail'0.t_trail, level : int . ([%#span97] sound'2 self)
   -> ([%#span98] sound'2 (restrict'0 self level))

  use Cdsat_Theory_Normal_Type as Normal'0

  predicate unsat'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 681 4 681 30] (self : Trail'0.t_trail) =
    [%#span100] forall m : Model'0.t_model . inv'0 m  -> satisfied_by'0 (restrict'0 self 0) m  -> false

  predicate impls'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 694 4 694 41] (self : Trail'0.t_trail) (rhs : Trail'0.t_trail)

   =
    [%#span102] forall m : Model'0.t_model . inv'0 m
     -> satisfied_by'0 (restrict'0 self 0) m  -> satisfied_by'0 (restrict'0 rhs 0) m

  axiom impls'0_spec : forall self : Trail'0.t_trail, rhs : Trail'0.t_trail . [%#span101] impls'0 self rhs
   -> unsat'0 rhs  -> unsat'0 self

  use Cdsat_Theory_Normal_Type as Cdsat_Theory_Normal_Type

  predicate sound'1 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 826 4 826 30] (self : Normal'0.t_normal)

   =
    [%#span103] sound'2 (Cdsat_Theory_Normal_Type.normal_0 self)

  constant self  : Conflict'0.t_conflict

  constant l  : (Term'0.t_term, Value'0.t_value)

  function backjump2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 1110 4 1110 54] (self : Conflict'0.t_conflict) (l : (Term'0.t_term, Value'0.t_value)) : Normal'0.t_normal


  goal vc_backjump2 : ([%#stheory4] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) a
   -> level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a
  < level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) l
  \/ a = l)
   -> ([%#stheory3] is_bool'0 (let (_, a) = l in a) /\ is_bool'1 (let (a, _) = l in a))
   -> ([%#stheory2] contains'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) l)
   -> ([%#stheory1] sound'0 self)
   -> ([%#stheory0] invariant'0 self)
   -> (let e = remove'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) l in let _ = restrict_sound'0 in let _ = trail_plausible'0 in let _ = restrict_idempotent'0 in let _ = negate_involutive'0 in let _ = learn_justified'0 in ([%#stheory8] invariant_nonneg'0 (Cdsat_Theory_Conflict_Type.conflict_0 self))
  /\ (([%#stheory13] set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e
  <= level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self))
  && ([%#stheory12] set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e >= 0)
  && ([%#stheory11] e = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e = 0)
  && ([%#stheory10] e <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 e i
  /\ level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) i
  = set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e))
  && ([%#stheory9] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 e i
   -> level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) i
  <= set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e)
   -> (([%#stheory16] set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e >= 0)
  && ([%#stheory15] invariant'1 (Cdsat_Theory_Conflict_Type.conflict_0 self)))
  /\ (([%#stheory24] len'0 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e))
  <= len'0 (Cdsat_Theory_Conflict_Type.conflict_0 self))
  && ([%#stheory23] (level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self)
  >= set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e
   -> level'0 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e))
  = set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e)
  /\ (level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) < set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e
   -> level'0 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e))
  = level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self)))
  && ([%#stheory22] forall m : Model'0.t_model . inv'0 m
   -> satisfied_by'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) m
   -> satisfied_by'0 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e)) m)
  && ([%#stheory21] forall a : (Term'0.t_term, Value'0.t_value) . not contains'1 (Cdsat_Theory_Conflict_Type.conflict_0 self) a
   -> not contains'1 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e)) a)
  && ([%#stheory20] set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e
  >= level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self)
   -> restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e)
  = Cdsat_Theory_Conflict_Type.conflict_0 self)
  && ([%#stheory19] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e)) a
   -> contains'1 (Cdsat_Theory_Conflict_Type.conflict_0 self) a
  /\ level_of'0 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e)) a
  <= set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e
  /\ level_of'0 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e)) a
  = level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a)
  && ([%#stheory18] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (Cdsat_Theory_Conflict_Type.conflict_0 self) a
   -> level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a
  <= set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e
   -> contains'1 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e)) a
  /\ level_of'0 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e)) a
  = level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a)
  && ([%#stheory17] invariant'1 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e)))
   -> (let restricted = restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e) in ([%#stheory25] is_bool'0 (let (_, a) = l in a))
  /\ (([%#stheory26] is_bool'0 (negate'0 (let (_, a) = l in a)))
   -> ([%#stheory8] invariant_nonneg'0 restricted)
  /\ (([%#stheory13] set_level'0 restricted e <= level'0 restricted)
  && ([%#stheory12] set_level'0 restricted e >= 0)
  && ([%#stheory11] e = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 restricted e = 0)
  && ([%#stheory10] e <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 e i
  /\ level_of'0 restricted i = set_level'0 restricted e))
  && ([%#stheory9] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 e i
   -> level_of'0 restricted i <= set_level'0 restricted e)
   -> (let result = Normal'0.C_Normal (Trail'0.C_Assign (Assign'0.C_Justified e (let (a, _) = l in a) (negate'0 (let (_, a) = l in a))) (set_level'0 restricted e) restricted) in ([%#stheory7] impls'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Normal_Type.normal_0 result))
  && ([%#stheory6] sound'1 result) && ([%#stheory5] invariant'1 (Cdsat_Theory_Normal_Type.normal_0 result)))))))))
end
module Cdsat_Concrete_SetRemove_Impl
  type t

  let%span sconcrete0 = "/Users/xavier/Code/cdsat/src/concrete.rs" 286 17 286 18

  let%span sconcrete1 = "/Users/xavier/Code/cdsat/src/concrete.rs" 286 29 286 30

  let%span sconcrete2 = "/Users/xavier/Code/cdsat/src/concrete.rs" 285 0 285 78

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span4 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  predicate invariant'1 (self : t)

  predicate inv'1 (_x : t)

  axiom inv'1 : forall x : t . inv'1 x = true

  use set.Fset

  predicate invariant'0 (self : Fset.fset t)

  predicate inv'0 (_x : Fset.fset t)

  axiom inv'0 : forall x : Fset.fset t . inv'0 x = true

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset t) (a : t) : Fset.fset t =
    [%#span3] Fset.remove a self

  use set.Fset

  predicate contains'0 [@inline:trivial] (self : Fset.fset t) (e : t) =
    [%#span4] Fset.mem e self

  constant s  : Fset.fset t

  constant a  : t

  function set_remove [#"/Users/xavier/Code/cdsat/src/concrete.rs" 286 0 286 34] (s : Fset.fset t) (a : t) : ()

  goal vc_set_remove : ([%#sconcrete1] inv'1 a)
   -> ([%#sconcrete0] inv'0 s)
   -> ([%#sconcrete2] forall x : t . inv'1 x  -> a <> x  -> contains'0 s x  -> contains'0 (remove'0 s a) x)
end
module Cdsat_Trail_Impl9_AbsJustEquiv_Impl
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 540 4 540 136

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 541 14 541 85

  let%span strail2 = "/Users/xavier/Code/cdsat/src/trail.rs" 313 4 313 82

  let%span strail3 = "/Users/xavier/Code/cdsat/src/trail.rs" 314 14 314 40

  let%span strail4 = "/Users/xavier/Code/cdsat/src/trail.rs" 315 4 315 115

  let%span strail5 = "/Users/xavier/Code/cdsat/src/trail.rs" 316 4 316 115

  let%span strail6 = "/Users/xavier/Code/cdsat/src/trail.rs" 317 4 317 101

  let%span strail7 = "/Users/xavier/Code/cdsat/src/trail.rs" 312 14 312 24

  let%span sfset8 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 105 18 105 22

  let%span sfset9 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 105 24 105 29

  let%span sfset10 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 104 4 104 40

  let%span span11 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span12 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span13 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span14 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span15 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span16 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span17 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span18 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 109 8 111 9

  let%span span19 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span20 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 129 8 129 78

  let%span span21 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 13 814 14

  let%span span22 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 24 814 25

  let%span span23 = "/Users/xavier/Code/cdsat/src/trail.rs" 809 0 809 73

  let%span span24 = "/Users/xavier/Code/cdsat/src/trail.rs" 810 0 810 63

  let%span span25 = "/Users/xavier/Code/cdsat/src/trail.rs" 811 0 811 55

  let%span span26 = "/Users/xavier/Code/cdsat/src/trail.rs" 812 0 812 52

  let%span span27 = "/Users/xavier/Code/cdsat/src/trail.rs" 813 10 813 33

  let%span span28 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 33 814 39

  let%span span29 = "/Users/xavier/Code/cdsat/src/trail.rs" 808 10 808 17

  let%span span30 = "/Users/xavier/Code/cdsat/src/trail.rs" 807 0 807 8

  let%span span31 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span32 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span33 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span34 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span35 = "/Users/xavier/Code/cdsat/src/term.rs" 195 8 225 9

  let%span span36 = "/Users/xavier/Code/cdsat/src/term.rs" 180 8 180 25

  let%span span37 = "/Users/xavier/Code/cdsat/src/trail.rs" 726 8 726 61

  let%span span38 = "/Users/xavier/Code/cdsat/src/trail.rs" 646 8 648 9

  let%span span39 = "/Users/xavier/Code/cdsat/src/trail.rs" 291 12 291 92

  let%span span40 = "/Users/xavier/Code/cdsat/src/trail.rs" 310 4 310 12

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  predicate invariant'7 (self : TrailIndex'0.t_trailindex) =
    [%#span11] true

  predicate inv'7 (_x : TrailIndex'0.t_trailindex)

  axiom inv'7 : forall x : TrailIndex'0.t_trailindex . inv'7 x = true

  use seq.Seq

  predicate invariant'6 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span11] true

  predicate inv'6 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'6 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'6 x = true

  use Cdsat_Trail_Assignment_Type as Assignment'0

  predicate invariant'5 (self : Seq.seq (Assignment'0.t_assignment)) =
    [%#span11] true

  predicate inv'5 (_x : Seq.seq (Assignment'0.t_assignment))

  axiom inv'5 : forall x : Seq.seq (Assignment'0.t_assignment) . inv'5 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  constant max'0 : usize = [%#span12] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'4 (_x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

  function shallow_model'1 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) : Seq.seq (Assignment'0.t_assignment)


  axiom shallow_model'1_spec : forall self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . ([%#span13] inv'4 self)
   -> ([%#span15] inv'5 (shallow_model'1 self))
  && ([%#span14] Seq.length (shallow_model'1 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'4 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span16] inv'5 (shallow_model'1 self)

  axiom inv'4 : forall x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . inv'4 x = true

  predicate invariant'3 (self : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span11] true

  predicate inv'3 (_x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'3 : forall x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'3 x = true

  use seq.Seq

  predicate inv'2 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  function shallow_model'0 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))


  axiom shallow_model'0_spec : forall self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . ([%#span13] inv'2 self)
   -> ([%#span15] inv'3 (shallow_model'0 self))
  && ([%#span14] Seq.length (shallow_model'0 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'2 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span16] inv'3 (shallow_model'0 self)

  axiom inv'2 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'2 x
  = true

  use Cdsat_Theory_Value_Type as Value'0

  use Cdsat_Theory_Term_Type as Term'0

  predicate invariant'1 (self : (Term'0.t_term, Value'0.t_value)) =
    [%#span11] true

  predicate inv'1 (_x : (Term'0.t_term, Value'0.t_value))

  axiom inv'1 : forall x : (Term'0.t_term, Value'0.t_value) . inv'1 x = true

  use set.Fset

  predicate invariant'0 (self : Fset.fset (Term'0.t_term, Value'0.t_value)) =
    [%#span11] true

  predicate inv'0 (_x : Fset.fset (Term'0.t_term, Value'0.t_value))

  axiom inv'0 : forall x : Fset.fset (Term'0.t_term, Value'0.t_value) . inv'0 x = true

  use set.Fset

  predicate contains'2 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span17] Fset.mem e self

  predicate ext_eq'0 (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (other : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span18] forall e : (Term'0.t_term, Value'0.t_value) . inv'1 e  -> contains'2 self e = contains'2 other e

  axiom ext_eq'0_spec : forall self : Fset.fset (Term'0.t_term, Value'0.t_value), other : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#sfset8] inv'0 self)
   -> ([%#sfset9] inv'0 other)  -> ([%#sfset10] ext_eq'0 self other  -> self = other)

  use prelude.prelude.Borrow

  use set.Fset

  use seq.Seq

  use seq.Seq

  use Cdsat_Trail_Trail_Type as Trail'0

  use set.Fset

  use set.Fset

  function insert'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span19] Fset.add e self

  use seq.Seq

  use prelude.seq_ext.SeqExt

  use seq.Seq

  predicate contains'0 (self : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) =
    [%#span20] exists i : int . 0 <= i /\ i < Seq.length self /\ Seq.get self i = e

  function remove'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 814 0 814 39] (s : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom remove'0_def : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . remove'0 s e
  = ([%#span30] if s = (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) then
    Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)
  else
    if Seq.get s (Seq.length s - 1) = e then
      remove'0 (SeqExt.subsequence s 0 (Seq.length s - 1)) e
    else
      Seq.snoc (remove'0 (SeqExt.subsequence s 0 (Seq.length s - 1)) e) (Seq.get s (Seq.length s - 1))

  )

  axiom remove'0_spec : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . ([%#span21] inv'6 s)
   -> ([%#span22] inv'7 e)
   -> ([%#span28] inv'6 (remove'0 s e))
  && ([%#span27] Seq.length (remove'0 s e) <= Seq.length s)
  && ([%#span26] contains'0 s e  -> Seq.length (remove'0 s e) < Seq.length s)
  && ([%#span25] forall t : TrailIndex'0.t_trailindex . inv'7 t  -> contains'0 (remove'0 s e) t  -> t <> e)
  && ([%#span24] forall t : TrailIndex'0.t_trailindex . inv'7 t  -> contains'0 (remove'0 s e) t  -> contains'0 s t)
  && ([%#span23] forall t : TrailIndex'0.t_trailindex . inv'7 t
   -> contains'0 s t  -> e <> t  -> contains'0 (remove'0 s e) t)

  use Cdsat_Term_Value_Type as Value'1

  use Cdsat_Term_Term_Type as Term'1

  use prelude.prelude.Real

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  function deep_model'4 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span31] match self with
      | Value'1.C_Bool b -> Value'0.C_Bool b
      | Value'1.C_Rat br -> Value'0.C_Rat (deep_model'4 br)
      end

  function shallow_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span32] deep_model'1 self

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  use Cdsat_Theory_Sort_Type as Sort'1

  use Cdsat_Term_Sort_Type as Sort'0

  use Cdsat_Theory_Var_Type as Var'0

  function deep_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'0.t_sort) : Sort'1.t_sort =
    [%#span33] match self with
      | Sort'0.C_Boolean -> Sort'1.C_Boolean
      | Sort'0.C_Rational -> Sort'1.C_Rational
      end

  function deep_model'2 (self : usize) : int =
    [%#span34] UIntSize.to_int self

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 193 4 193 44] (self : Term'1.t_term) : Term'0.t_term =
    [%#span35] match self with
      | Term'1.C_Variable v s -> Term'0.C_Variable (Var'0.C_Var (deep_model'2 v) (deep_model'3 s))
      | Term'1.C_Value v -> Term'0.C_Value (deep_model'1 v)
      | Term'1.C_Plus l r -> Term'0.C_Plus (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Eq l r -> Term'0.C_Eq (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Conj l r -> Term'0.C_Conj (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Disj l r -> Term'0.C_Disj (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Neg t -> Term'0.C_Neg (deep_model'0 t)
      | Term'1.C_Impl l r -> Term'0.C_Disj (Term'0.C_Neg (deep_model'0 l)) (deep_model'0 r)
      | Term'1.C_Times l r -> Term'0.C_Plus (Term'0.C_Value (Value'0.C_Rat (deep_model'4 l))) (deep_model'0 r)
      | Term'1.C_Lt l r -> Term'0.C_Eq (deep_model'0 l) (deep_model'0 r)
      end

  function shallow_model'2 [#"/Users/xavier/Code/cdsat/src/term.rs" 179 4 179 50] (self : Term'1.t_term) : Term'0.t_term
   =
    [%#span36] deep_model'0 self

  function term_value'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 725 4 725 61] (self : Assignment'0.t_assignment) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span37] (shallow_model'2 (Cdsat_Trail_Assignment_Type.assignment_term self), shallow_model'3 (Cdsat_Trail_Assignment_Type.assignment_val self))

  use seq.Seq

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  use seq.Seq

  use Cdsat_Trail_Trail_Type as Cdsat_Trail_Trail_Type

  function index_logic'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 645 4 645 77] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span38] term_value'0 (Seq.get (shallow_model'1 (Seq.get (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)))) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)))

  predicate contains'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 289 4 289 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex)

   =
    [%#span39] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)
    < Seq.length (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self))
    /\ UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)
    < Seq.length (shallow_model'1 (Seq.get (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))))

  function abstract_justification'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 318 4 321 44] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) : Fset.fset (Term'0.t_term, Value'0.t_value)


  axiom abstract_justification'0_def : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . abstract_justification'0 self just
  = ([%#span40] if Seq.length just > 0 then
    let set = abstract_justification'0 self (remove'0 just (Seq.get just 0)) in let a = index_logic'0 self (Seq.get just 0) in insert'0 set a
  else
    Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)
  )

  axiom abstract_justification'0_spec : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . ([%#strail2] forall i : int . 0
  <= i
  /\ i < Seq.length just  -> contains'1 self (Seq.get just i))
   -> ([%#strail6] forall i : int . 0 <= i /\ i < Seq.length just
   -> contains'2 (abstract_justification'0 self just) (index_logic'0 self (Seq.get just i)))
  && ([%#strail5] forall a : (Term'0.t_term, Value'0.t_value) . contains'2 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'0 just ix /\ a = index_logic'0 self ix))
  && ([%#strail4] forall a : (Term'0.t_term, Value'0.t_value) . contains'2 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'1 self ix /\ a = index_logic'0 self ix))
  && ([%#strail3] Fset.cardinal (abstract_justification'0 self just) <= Seq.length just)

  constant self  : Trail'0.t_trail

  constant other  : Trail'0.t_trail

  constant just  : Seq.seq (TrailIndex'0.t_trailindex)

  function abs_just_equiv [#"/Users/xavier/Code/cdsat/src/trail.rs" 542 4 542 67] (self : Trail'0.t_trail) (other : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) : ()


  goal vc_abs_just_equiv : ([%#strail0] forall j : TrailIndex'0.t_trailindex . contains'0 just j
   -> contains'1 self j /\ contains'1 other j /\ index_logic'0 self j = index_logic'0 other j)
   -> ([%#strail2] forall i : int . 0 <= i /\ i < Seq.length just  -> contains'1 self (Seq.get just i))
  /\ (([%#strail6] forall i : int . 0 <= i /\ i < Seq.length just
   -> contains'2 (abstract_justification'0 self just) (index_logic'0 self (Seq.get just i)))
  && ([%#strail5] forall a : (Term'0.t_term, Value'0.t_value) . contains'2 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'0 just ix /\ a = index_logic'0 self ix))
  && ([%#strail4] forall a : (Term'0.t_term, Value'0.t_value) . contains'2 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'1 self ix /\ a = index_logic'0 self ix))
  && ([%#strail3] Fset.cardinal (abstract_justification'0 self just) <= Seq.length just)
   -> ([%#strail2] forall i : int . 0 <= i /\ i < Seq.length just  -> contains'1 other (Seq.get just i))
  /\ (([%#strail6] forall i : int . 0 <= i /\ i < Seq.length just
   -> contains'2 (abstract_justification'0 other just) (index_logic'0 other (Seq.get just i)))
  && ([%#strail5] forall a : (Term'0.t_term, Value'0.t_value) . contains'2 (abstract_justification'0 other just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'0 just ix /\ a = index_logic'0 other ix))
  && ([%#strail4] forall a : (Term'0.t_term, Value'0.t_value) . contains'2 (abstract_justification'0 other just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'1 other ix /\ a = index_logic'0 other ix))
  && ([%#strail3] Fset.cardinal (abstract_justification'0 other just) <= Seq.length just)
   -> (([%#sfset9] inv'0 (abstract_justification'0 other just))
  && ([%#sfset8] inv'0 (abstract_justification'0 self just)))
  /\ (([%#sfset10] ext_eq'0 (abstract_justification'0 self just) (abstract_justification'0 other just)
   -> abstract_justification'0 self just = abstract_justification'0 other just)
   -> ext_eq'0 (abstract_justification'0 self just) (abstract_justification'0 other just)
  && (let _ = () in let _ = () in [%#strail1] abstract_justification'0 self just
  = abstract_justification'0 other just))))
end
module Cdsat_Heap_Impl1_New
  let%span sheap0 = "/Users/xavier/Code/cdsat/src/heap.rs" 20 21 20 31

  let%span sheap1 = "/Users/xavier/Code/cdsat/src/heap.rs" 18 14 18 36

  let%span sheap2 = "/Users/xavier/Code/cdsat/src/heap.rs" 19 27 19 31

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span4 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  let%span span5 = "/Users/xavier/Code/cdsat/src/trail.rs" 146 14 146 59

  let%span span6 = "/Users/xavier/Code/cdsat/src/trail.rs" 140 15 140 48

  let%span span7 = "/Users/xavier/Code/cdsat/src/trail.rs" 141 14 141 44

  let%span span8 = "/Users/xavier/Code/cdsat/src/trail.rs" 134 15 134 45

  let%span span9 = "/Users/xavier/Code/cdsat/src/trail.rs" 135 14 135 47

  let%span span10 = "/Users/xavier/Code/cdsat/src/trail.rs" 127 15 127 32

  let%span span11 = "/Users/xavier/Code/cdsat/src/trail.rs" 128 15 128 32

  let%span span12 = "/Users/xavier/Code/cdsat/src/trail.rs" 129 14 129 31

  let%span span13 = "/Users/xavier/Code/cdsat/src/trail.rs" 122 14 122 45

  let%span span14 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 41 20 41 56

  let%span span15 = "/Users/xavier/Code/cdsat/src/trail.rs" 117 14 117 64

  let%span span16 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 31 20 31 53

  let%span span17 = "/Users/xavier/Code/cdsat/src/trail.rs" 112 14 112 61

  let%span span18 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 21 20 21 53

  let%span span19 = "/Users/xavier/Code/cdsat/src/trail.rs" 107 14 107 61

  let%span span20 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 11 20 11 56

  let%span span21 = "/Users/xavier/Code/cdsat/src/trail.rs" 102 14 102 64

  let%span span22 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 14 70 15

  let%span span23 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 23 70 24

  let%span span24 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 69 14 69 59

  let%span span25 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 64 15 64 48

  let%span span26 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 16 66 17

  let%span span27 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 25 66 26

  let%span span28 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 65 14 65 44

  let%span span29 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 59 15 59 45

  let%span span30 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 16 61 17

  let%span span31 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 25 61 26

  let%span span32 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 60 14 60 47

  let%span span33 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 53 15 53 32

  let%span span34 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 54 15 54 32

  let%span span35 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 13 56 14

  let%span span36 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 22 56 23

  let%span span37 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 31 56 32

  let%span span38 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 55 14 55 31

  let%span span39 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 50 12 50 13

  let%span span40 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 49 14 49 45

  let%span span41 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 18 46 19

  let%span span42 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 27 46 28

  let%span span43 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 45 14 45 64

  let%span span44 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 18 36 19

  let%span span45 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 27 36 28

  let%span span46 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 35 14 35 61

  let%span span47 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 18 26 19

  let%span span48 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 27 26 28

  let%span span49 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 25 14 25 61

  let%span span50 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 18 16 19

  let%span span51 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 27 16 28

  let%span span52 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 15 14 15 64

  let%span span53 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span54 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span55 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span56 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span57 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span58 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span59 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 138 8 140 9

  let%span span60 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 149 8 149 40

  let%span span61 = "/Users/xavier/Code/cdsat/src/trail.rs" 829 4 829 98

  let%span span62 = "/Users/xavier/Code/cdsat/src/heap.rs" 10 4 10 16

  let%span span63 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span64 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span65 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 129 8 129 78

  let%span span66 = "/Users/xavier/Code/cdsat/src/heap.rs" 96 13 96 14

  let%span span67 = "/Users/xavier/Code/cdsat/src/heap.rs" 94 0 94 61

  let%span span68 = "/Users/xavier/Code/cdsat/src/heap.rs" 96 28 96 35

  let%span span69 = "/Users/xavier/Code/cdsat/src/heap.rs" 95 10 95 17

  let%span span70 = "/Users/xavier/Code/cdsat/src/heap.rs" 93 0 93 8

  let%span span71 = "/Users/xavier/Code/cdsat/src/heap.rs" 88 21 88 25

  let%span span72 = "/Users/xavier/Code/cdsat/src/heap.rs" 87 4 87 71

  let%span span73 = "/Users/xavier/Code/cdsat/src/heap.rs" 89 8 89 38

  let%span span74 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 69 26 69 44

  let%span span75 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 422 4 422 30

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function eq_cmp'2 (_1 : usize) (_2 : usize) : ()

  function antisym2'2 (_1 : usize) (_2 : usize) : ()

  function antisym1'2 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'2 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'2 (_1 : usize) : ()

  function cmp_gt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'2 (_1 : usize) (_2 : usize) : ()

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span3] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span4] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  function eq_cmp'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 147 4 147 31] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom eq_cmp'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span5] (x = y)
  = (cmp_log'0 x y = Ordering'0.C_Equal)

  function antisym2'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 142 4 142 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom antisym2'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span6] cmp_log'0 x y
  = Ordering'0.C_Greater)  -> ([%#span7] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 136 4 136 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom antisym1'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span8] cmp_log'0 x y
  = Ordering'0.C_Less)  -> ([%#span9] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 130 4 130 52] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span10] cmp_log'0 x y
  = o)  -> ([%#span11] cmp_log'0 y z = o)  -> ([%#span12] cmp_log'0 x z = o)

  function refl'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 123 4 123 20] (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'1_spec : forall x : TrailIndex'0.t_trailindex . [%#span13] cmp_log'0 x x = Ordering'0.C_Equal

  function gt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span14] cmp_log'0 self o = Ordering'0.C_Greater

  function cmp_gt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 118 4 118 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_gt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span15] gt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Greater)

  function ge_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span16] cmp_log'0 self o <> Ordering'0.C_Less

  function cmp_ge_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 113 4 113 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_ge_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span17] ge_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Less)

  function lt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span18] cmp_log'0 self o = Ordering'0.C_Less

  function cmp_lt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 108 4 108 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_lt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span19] lt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Less)

  function le_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span20] cmp_log'0 self o <> Ordering'0.C_Greater

  function cmp_le_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 103 4 103 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_le_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span21] le_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Greater)

  predicate inv'3 (_x : TrailIndex'0.t_trailindex)

  function eq_cmp'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom eq_cmp'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span22] inv'3 x)
   -> ([%#span23] inv'3 y)  -> ([%#span24] (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal))

  function antisym2'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym2'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span25] cmp_log'0 x y
  = Ordering'0.C_Greater)
   -> ([%#span26] inv'3 x)  -> ([%#span27] inv'3 y)  -> ([%#span28] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym1'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span29] cmp_log'0 x y
  = Ordering'0.C_Less)
   -> ([%#span30] inv'3 x)  -> ([%#span31] inv'3 y)  -> ([%#span32] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span33] cmp_log'0 x y
  = o)
   -> ([%#span34] cmp_log'0 y z = o)
   -> ([%#span35] inv'3 x)  -> ([%#span36] inv'3 y)  -> ([%#span37] inv'3 z)  -> ([%#span38] cmp_log'0 x z = o)

  function refl'0 (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'0_spec : forall x : TrailIndex'0.t_trailindex . ([%#span39] inv'3 x)
   -> ([%#span40] cmp_log'0 x x = Ordering'0.C_Equal)

  function cmp_gt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_gt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span41] inv'3 x)
   -> ([%#span42] inv'3 y)  -> ([%#span43] gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater))

  function cmp_ge_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_ge_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span44] inv'3 x)
   -> ([%#span45] inv'3 y)  -> ([%#span46] ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less))

  function cmp_lt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_lt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span47] inv'3 x)
   -> ([%#span48] inv'3 y)  -> ([%#span49] lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less))

  function cmp_le_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_le_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span50] inv'3 x)
   -> ([%#span51] inv'3 y)  -> ([%#span52] le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater))

  use set.Fset

  predicate invariant'4 (self : Fset.fset (TrailIndex'0.t_trailindex)) =
    [%#span53] true

  predicate inv'4 (_x : Fset.fset (TrailIndex'0.t_trailindex))

  axiom inv'4 : forall x : Fset.fset (TrailIndex'0.t_trailindex) . inv'4 x = true

  predicate invariant'3 (self : TrailIndex'0.t_trailindex) =
    [%#span53] true

  axiom inv'3 : forall x : TrailIndex'0.t_trailindex . inv'3 x = true

  use seq.Seq

  predicate invariant'2 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span53] true

  predicate inv'2 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'2 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'2 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  constant max'0 : usize = [%#span54] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'1 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function shallow_model'1 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom shallow_model'1_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span55] inv'1 self)
   -> ([%#span57] inv'2 (shallow_model'1 self))
  && ([%#span56] Seq.length (shallow_model'1 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'1 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span58] inv'2 (shallow_model'1 self)

  axiom inv'1 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'1 x = true

  use seq.Seq

  predicate sorted_range'0 (self : Seq.seq (TrailIndex'0.t_trailindex)) (l : int) (u : int) =
    [%#span59] forall j : int . forall i : int . l <= i /\ i <= j /\ j < u
     -> le_log'0 (Seq.get self i) (Seq.get self j)

  predicate sorted'0 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span60] sorted_range'0 self 0 (Seq.length self)

  predicate seq_unique'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 828 0 828 46] (s : Seq.seq (TrailIndex'0.t_trailindex))

   =
    [%#span61] forall j : int . forall i : int . 0 <= i /\ i <= j /\ j < Seq.length s
     -> i <> j  -> Seq.get s i <> Seq.get s j

  use Cdsat_Heap_ConflictHeap_Type as Cdsat_Heap_ConflictHeap_Type

  use Cdsat_Heap_ConflictHeap_Type as ConflictHeap'0

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/heap.rs" 12 4 12 30] (self : ConflictHeap'0.t_conflictheap) =
    [%#span62] seq_unique'0 (shallow_model'1 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self))
    /\ sorted'0 (shallow_model'1 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self))

  predicate inv'0 (_x : ConflictHeap'0.t_conflictheap)

  axiom inv'0 : forall x : ConflictHeap'0.t_conflictheap . inv'0 x
  = (invariant'0 x
  /\ match x with
    | ConflictHeap'0.C_ConflictHeap a_0 -> true
    end)

  use set.Fset

  use set.Fset

  function insert'0 [@inline:trivial] (self : Fset.fset (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) : Fset.fset (TrailIndex'0.t_trailindex)

   =
    [%#span63] Fset.add e self

  use prelude.seq_ext.SeqExt

  use seq.Seq

  use set.Fset

  predicate contains'1 [@inline:trivial] (self : Fset.fset (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex)
   =
    [%#span64] Fset.mem e self

  predicate contains'0 (self : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) =
    [%#span65] exists i : int . 0 <= i /\ i < Seq.length self /\ Seq.get self i = e

  function to_set'0 [#"/Users/xavier/Code/cdsat/src/heap.rs" 96 0 96 35] (s : Seq.seq (TrailIndex'0.t_trailindex)) : Fset.fset (TrailIndex'0.t_trailindex)


  axiom to_set'0_def : forall s : Seq.seq (TrailIndex'0.t_trailindex) . to_set'0 s
  = ([%#span70] if s = (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) then
    Fset.empty  : Fset.fset (TrailIndex'0.t_trailindex)
  else
    insert'0 (to_set'0 (SeqExt.subsequence s 1 (Seq.length s))) (Seq.get s 0)
  )

  axiom to_set'0_spec : forall s : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span66] inv'2 s)
   -> ([%#span68] inv'4 (to_set'0 s))
  && ([%#span67] forall x : TrailIndex'0.t_trailindex . inv'3 x  -> contains'0 s x = contains'1 (to_set'0 s) x)

  function shallow_model'0 [#"/Users/xavier/Code/cdsat/src/heap.rs" 88 4 88 50] (self : ConflictHeap'0.t_conflictheap) : Fset.fset (TrailIndex'0.t_trailindex)

   =
    [%#span73] to_set'0 (shallow_model'1 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self))

  axiom shallow_model'0_spec : forall self : ConflictHeap'0.t_conflictheap . ([%#span71] inv'0 self)
   -> ([%#span72] forall x : TrailIndex'0.t_trailindex . contains'0 (shallow_model'1 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self)) x
  = contains'1 (shallow_model'0 self) x)

  use prelude.prelude.Intrinsic

  let rec new'0 (_1:()) (return'  (ret:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)))= any
    [ return' (result:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> {[%#span75] inv'1 result}
      {[%#span74] Seq.length (shallow_model'1 result) = 0}
      (! return' {result}) ]


  let rec new (_1:()) (return'  (ret:ConflictHeap'0.t_conflictheap))= (! bb0
    [ bb0 = s0
      [ s0 = new'0 {[%#sheap0] ()}
          (fun (_ret':Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->  [ &_2 <- _ret' ] s1)
      | s1 = bb1 ]

    | bb1 = s0
      [ s0 =  [ &_0 <- ConflictHeap'0.C_ConflictHeap _2 ]
        (any [ any_ (_any:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> (!  [ &_2 <- _any ] s1) ] )
      | s1 = bb2 ]

    | bb2 = return' {_0} ]
    )
    [ & _0 : ConflictHeap'0.t_conflictheap = any_l ()
    | & _2 : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) = any_l () ]

    [ return' (result:ConflictHeap'0.t_conflictheap)-> {[@expl:postcondition] [%#sheap2] inv'0 result}
      {[@expl:postcondition] [%#sheap1] shallow_model'0 result = (Fset.empty  : Fset.fset (TrailIndex'0.t_trailindex))}
      (! return' {result}) ]

end
module Cdsat_Trail_Impl22_Eq
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 67 22 67 38

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 66 16 66 25

  let%span span2 = "/Users/xavier/Code/cdsat/src/trail.rs" 168 8 168 12

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 81 8 81 28

  let%span span4 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span5 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/cmp.rs" 11 26 11 75

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  function deep_model'2 [#"/Users/xavier/Code/cdsat/src/trail.rs" 167 4 167 44] (self : TrailIndex'0.t_trailindex) : TrailIndex'0.t_trailindex

   =
    [%#span2] self

  use prelude.prelude.Borrow

  function deep_model'0 (self : TrailIndex'0.t_trailindex) : TrailIndex'0.t_trailindex =
    [%#span3] deep_model'2 self

  use prelude.prelude.Intrinsic

  use prelude.prelude.Int

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  use prelude.prelude.UIntSize

  function deep_model'3 (self : usize) : int =
    [%#span4] UIntSize.to_int self

  function deep_model'1 (self : usize) : int =
    [%#span3] deep_model'3 self

  let rec eq'0 (self:usize) (other:usize) (return'  (ret:bool))= any
    [ return' (result:bool)-> {[%#span5] result = (deep_model'1 self = deep_model'1 other)} (! return' {result}) ]


  let rec eq (self:TrailIndex'0.t_trailindex) (rhs:TrailIndex'0.t_trailindex) (return'  (ret:bool))= (! bb0
    [ bb0 = s0
      [ s0 = TrailIndex'0.t_trailindex {rhs} (fun (r0'0:usize) (r1'0:usize) ->  [ &_7 <- r0'0 ] s1)
      | s1 = TrailIndex'0.t_trailindex {self}
          (fun (r0'1:usize) (r1'1:usize) -> eq'0 {r0'1} {_7} (fun (_ret':bool) ->  [ &_4 <- _ret' ] s2))
      | s2 = bb1 ]

    | bb1 = any [ br0 -> {_4 = false} (! bb3) | br1 -> {_4} (! bb2) ]
    | bb2 = s0
      [ s0 = TrailIndex'0.t_trailindex {rhs} (fun (r0'0:usize) (r1'0:usize) ->  [ &_10 <- r1'0 ] s1)
      | s1 = TrailIndex'0.t_trailindex {self}
          (fun (r0'1:usize) (r1'1:usize) -> eq'0 {r1'1} {_10} (fun (_ret':bool) ->  [ &_0 <- _ret' ] s2))
      | s2 = bb4 ]

    | bb4 = bb5
    | bb3 = s0 [ s0 =  [ &_0 <- [%#strail0] false ] s1 | s1 = bb5 ]
    | bb5 = return' {_0} ]
    )
    [ & _0 : bool = any_l ()
    | & self : TrailIndex'0.t_trailindex = self
    | & rhs : TrailIndex'0.t_trailindex = rhs
    | & _4 : bool = any_l ()
    | & _7 : usize = any_l ()
    | & _10 : usize = any_l () ]

    [ return' (result:bool)-> {[@expl:postcondition] [%#strail1] result = (deep_model'0 self = deep_model'0 rhs)}
      (! return' {result}) ]

end
module Cdsat_Heap_Impl1_Insert
  meta "compute_max_steps" 1_000_000
  let%span sheap0 = "/Users/xavier/Code/cdsat/src/heap.rs" 26 18 26 38

  let%span sheap1 = "/Users/xavier/Code/cdsat/src/heap.rs" 27 20 27 21

  let%span sheap2 = "/Users/xavier/Code/cdsat/src/heap.rs" 28 8 28 71

  let%span sheap3 = "/Users/xavier/Code/cdsat/src/heap.rs" 41 17 41 18

  let%span sheap4 = "/Users/xavier/Code/cdsat/src/heap.rs" 32 16 32 83

  let%span sheap5 = "/Users/xavier/Code/cdsat/src/heap.rs" 33 16 33 93

  let%span sheap6 = "/Users/xavier/Code/cdsat/src/heap.rs" 34 16 34 59

  let%span sheap7 = "/Users/xavier/Code/cdsat/src/heap.rs" 36 23 36 27

  let%span sheap8 = "/Users/xavier/Code/cdsat/src/heap.rs" 38 23 38 28

  let%span sheap9 = "/Users/xavier/Code/cdsat/src/heap.rs" 43 8 43 43

  let%span sheap10 = "/Users/xavier/Code/cdsat/src/heap.rs" 44 8 44 41

  let%span sheap11 = "/Users/xavier/Code/cdsat/src/heap.rs" 46 8 46 79

  let%span sheap12 = "/Users/xavier/Code/cdsat/src/heap.rs" 47 8 47 75

  let%span sheap13 = "/Users/xavier/Code/cdsat/src/heap.rs" 48 8 48 85

  let%span sheap14 = "/Users/xavier/Code/cdsat/src/heap.rs" 49 8 49 51

  let%span sheap15 = "/Users/xavier/Code/cdsat/src/heap.rs" 50 8 50 12

  let%span sheap16 = "/Users/xavier/Code/cdsat/src/heap.rs" 25 30 25 34

  let%span sheap17 = "/Users/xavier/Code/cdsat/src/heap.rs" 24 14 24 43

  let%span span18 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span19 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  let%span span20 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 11 20 11 56

  let%span span21 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 138 8 140 9

  let%span span22 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 149 8 149 40

  let%span span23 = "/Users/xavier/Code/cdsat/src/trail.rs" 829 4 829 98

  let%span span24 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span25 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span26 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span27 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span28 = "/Users/xavier/Code/cdsat/src/heap.rs" 10 4 10 16

  let%span span29 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span30 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span31 = "/Users/xavier/Code/cdsat/src/trail.rs" 146 14 146 59

  let%span span32 = "/Users/xavier/Code/cdsat/src/trail.rs" 140 15 140 48

  let%span span33 = "/Users/xavier/Code/cdsat/src/trail.rs" 141 14 141 44

  let%span span34 = "/Users/xavier/Code/cdsat/src/trail.rs" 134 15 134 45

  let%span span35 = "/Users/xavier/Code/cdsat/src/trail.rs" 135 14 135 47

  let%span span36 = "/Users/xavier/Code/cdsat/src/trail.rs" 127 15 127 32

  let%span span37 = "/Users/xavier/Code/cdsat/src/trail.rs" 128 15 128 32

  let%span span38 = "/Users/xavier/Code/cdsat/src/trail.rs" 129 14 129 31

  let%span span39 = "/Users/xavier/Code/cdsat/src/trail.rs" 122 14 122 45

  let%span span40 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 41 20 41 56

  let%span span41 = "/Users/xavier/Code/cdsat/src/trail.rs" 117 14 117 64

  let%span span42 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 31 20 31 53

  let%span span43 = "/Users/xavier/Code/cdsat/src/trail.rs" 112 14 112 61

  let%span span44 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 21 20 21 53

  let%span span45 = "/Users/xavier/Code/cdsat/src/trail.rs" 107 14 107 61

  let%span span46 = "/Users/xavier/Code/cdsat/src/trail.rs" 102 14 102 64

  let%span span47 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 14 70 15

  let%span span48 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 23 70 24

  let%span span49 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 69 14 69 59

  let%span span50 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 64 15 64 48

  let%span span51 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 16 66 17

  let%span span52 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 25 66 26

  let%span span53 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 65 14 65 44

  let%span span54 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 59 15 59 45

  let%span span55 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 16 61 17

  let%span span56 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 25 61 26

  let%span span57 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 60 14 60 47

  let%span span58 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 53 15 53 32

  let%span span59 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 54 15 54 32

  let%span span60 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 13 56 14

  let%span span61 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 22 56 23

  let%span span62 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 31 56 32

  let%span span63 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 55 14 55 31

  let%span span64 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 50 12 50 13

  let%span span65 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 49 14 49 45

  let%span span66 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 18 46 19

  let%span span67 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 27 46 28

  let%span span68 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 45 14 45 64

  let%span span69 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 18 36 19

  let%span span70 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 27 36 28

  let%span span71 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 35 14 35 61

  let%span span72 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 18 26 19

  let%span span73 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 27 26 28

  let%span span74 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 25 14 25 61

  let%span span75 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 18 16 19

  let%span span76 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 27 16 28

  let%span span77 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 15 14 15 64

  let%span span78 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span79 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span80 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 129 8 129 78

  let%span span81 = "/Users/xavier/Code/cdsat/src/heap.rs" 96 13 96 14

  let%span span82 = "/Users/xavier/Code/cdsat/src/heap.rs" 94 0 94 61

  let%span span83 = "/Users/xavier/Code/cdsat/src/heap.rs" 96 28 96 35

  let%span span84 = "/Users/xavier/Code/cdsat/src/heap.rs" 95 10 95 17

  let%span span85 = "/Users/xavier/Code/cdsat/src/heap.rs" 93 0 93 8

  let%span span86 = "/Users/xavier/Code/cdsat/src/heap.rs" 88 21 88 25

  let%span span87 = "/Users/xavier/Code/cdsat/src/heap.rs" 87 4 87 71

  let%span span88 = "/Users/xavier/Code/cdsat/src/heap.rs" 89 8 89 38

  let%span span89 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 108 8 108 31

  let%span span90 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 1993 21 1993 25

  let%span span91 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 1993 27 1993 32

  let%span span92 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 82 26 82 51

  let%span span93 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 105 18 105 22

  let%span span94 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 105 24 105 29

  let%span span95 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 104 4 104 40

  let%span span96 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 109 8 111 9

  let%span span97 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 90 8 90 31

  let%span span98 = "/Users/xavier/Code/creusot/creusot-contracts/src/snapshot.rs" 28 20 28 48

  let%span span99 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 26 20 26 34

  let%span span100 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 20 8 20 31

  let%span span101 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 1562 23 1562 27

  let%span span102 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 1562 43 1562 50

  let%span span103 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 102 26 102 59

  let%span span104 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 103 16 103 89

  let%span span105 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 104 26 104 52

  let%span span106 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 105 16 105 105

  let%span span107 = "/Users/xavier/Code/cdsat/src/trail.rs" 168 8 168 12

  let%span span108 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 81 8 81 28

  let%span span109 = "/Users/xavier/Code/cdsat/src/trail.rs" 66 16 66 25

  let%span span110 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/cmp.rs" 1179 11 1179 15

  let%span span111 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/cmp.rs" 1179 17 1179 22

  let%span span112 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/cmp.rs" 33 26 33 76

  let%span span113 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 122 20 122 37

  let%span span114 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 115 20 115 37

  let%span span115 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 156 27 156 46

  let%span span116 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2906 14 2906 18

  let%span span117 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2906 20 2906 25

  let%span span118 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 157 26 157 54

  let%span span119 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2906 4 2906 46

  let%span span120 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2255 16 2255 20

  let%span span121 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 78 26 78 48

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function eq_cmp'2 (_1 : usize) (_2 : usize) : ()

  function antisym2'2 (_1 : usize) (_2 : usize) : ()

  function antisym1'2 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'2 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'2 (_1 : usize) : ()

  function cmp_gt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'2 (_1 : usize) (_2 : usize) : ()

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use seq.Seq

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span18] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span19] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  function le_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span20] cmp_log'0 self o <> Ordering'0.C_Greater

  use seq.Seq

  predicate sorted_range'0 (self : Seq.seq (TrailIndex'0.t_trailindex)) (l : int) (u : int) =
    [%#span21] forall j : int . forall i : int . l <= i /\ i <= j /\ j < u
     -> le_log'0 (Seq.get self i) (Seq.get self j)

  use seq.Seq

  predicate sorted'0 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span22] sorted_range'0 self 0 (Seq.length self)

  predicate seq_unique'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 828 0 828 46] (s : Seq.seq (TrailIndex'0.t_trailindex))

   =
    [%#span23] forall j : int . forall i : int . 0 <= i /\ i <= j /\ j < Seq.length s
     -> i <> j  -> Seq.get s i <> Seq.get s j

  predicate inv'8 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  use prelude.prelude.UIntSize

  constant max'0 : usize = [%#span24] (18446744073709551615 : usize)

  predicate inv'7 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function shallow_model'2 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom shallow_model'2_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span25] inv'7 self)
   -> ([%#span27] inv'8 (shallow_model'2 self))
  && ([%#span26] Seq.length (shallow_model'2 self) <= UIntSize.to_int (max'0 : usize))

  use Cdsat_Heap_ConflictHeap_Type as Cdsat_Heap_ConflictHeap_Type

  use Cdsat_Heap_ConflictHeap_Type as ConflictHeap'0

  predicate invariant'9 [#"/Users/xavier/Code/cdsat/src/heap.rs" 12 4 12 30] (self : ConflictHeap'0.t_conflictheap) =
    [%#span28] seq_unique'0 (shallow_model'2 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self))
    /\ sorted'0 (shallow_model'2 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self))

  predicate inv'9 (_x : ConflictHeap'0.t_conflictheap)

  axiom inv'9 : forall x : ConflictHeap'0.t_conflictheap . inv'9 x
  = (invariant'9 x
  /\ match x with
    | ConflictHeap'0.C_ConflictHeap a_0 -> true
    end)

  predicate invariant'8 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span29] true

  axiom inv'8 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'8 x = true

  predicate invariant'7 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span30] inv'8 (shallow_model'2 self)

  axiom inv'7 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'7 x = true

  use set.Fset

  predicate invariant'6 (self : Fset.fset (TrailIndex'0.t_trailindex)) =
    [%#span29] true

  predicate inv'6 (_x : Fset.fset (TrailIndex'0.t_trailindex))

  axiom inv'6 : forall x : Fset.fset (TrailIndex'0.t_trailindex) . inv'6 x = true

  predicate invariant'5 (self : TrailIndex'0.t_trailindex) =
    [%#span29] true

  predicate inv'5 (_x : TrailIndex'0.t_trailindex)

  axiom inv'5 : forall x : TrailIndex'0.t_trailindex . inv'5 x = true

  use prelude.prelude.Borrow

  predicate invariant'4 (self : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) =
    [%#span29] true

  predicate inv'4 (_x : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)))

  axiom inv'4 : forall x : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) . inv'4 x = true

  predicate invariant'3 (self : TrailIndex'0.t_trailindex) =
    [%#span29] true

  predicate inv'3 (_x : TrailIndex'0.t_trailindex)

  axiom inv'3 : forall x : TrailIndex'0.t_trailindex . inv'3 x = true

  predicate invariant'2 (self : usize) =
    [%#span29] true

  predicate inv'2 (_x : usize)

  axiom inv'2 : forall x : usize . inv'2 x = true

  predicate invariant'1 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span29] true

  predicate inv'1 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  axiom inv'1 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'1 x = true

  function eq_cmp'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 147 4 147 31] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom eq_cmp'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span31] (x = y)
  = (cmp_log'0 x y = Ordering'0.C_Equal)

  function antisym2'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 142 4 142 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom antisym2'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span32] cmp_log'0 x y
  = Ordering'0.C_Greater)  -> ([%#span33] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 136 4 136 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom antisym1'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span34] cmp_log'0 x y
  = Ordering'0.C_Less)  -> ([%#span35] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 130 4 130 52] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span36] cmp_log'0 x y
  = o)  -> ([%#span37] cmp_log'0 y z = o)  -> ([%#span38] cmp_log'0 x z = o)

  function refl'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 123 4 123 20] (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'1_spec : forall x : TrailIndex'0.t_trailindex . [%#span39] cmp_log'0 x x = Ordering'0.C_Equal

  function gt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span40] cmp_log'0 self o = Ordering'0.C_Greater

  function cmp_gt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 118 4 118 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_gt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span41] gt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Greater)

  function ge_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span42] cmp_log'0 self o <> Ordering'0.C_Less

  function cmp_ge_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 113 4 113 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_ge_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span43] ge_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Less)

  function lt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span44] cmp_log'0 self o = Ordering'0.C_Less

  function cmp_lt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 108 4 108 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_lt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span45] lt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Less)

  function cmp_le_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 103 4 103 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_le_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span46] le_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Greater)

  predicate invariant'0 (self : borrowed (ConflictHeap'0.t_conflictheap)) =
    [%#span29] true

  predicate inv'0 (_x : borrowed (ConflictHeap'0.t_conflictheap))

  axiom inv'0 : forall x : borrowed (ConflictHeap'0.t_conflictheap) . inv'0 x = (inv'9 x.current /\ inv'9 x.final)

  function eq_cmp'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom eq_cmp'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span47] inv'5 x)
   -> ([%#span48] inv'5 y)  -> ([%#span49] (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal))

  function antisym2'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym2'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span50] cmp_log'0 x y
  = Ordering'0.C_Greater)
   -> ([%#span51] inv'5 x)  -> ([%#span52] inv'5 y)  -> ([%#span53] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym1'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span54] cmp_log'0 x y
  = Ordering'0.C_Less)
   -> ([%#span55] inv'5 x)  -> ([%#span56] inv'5 y)  -> ([%#span57] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span58] cmp_log'0 x y
  = o)
   -> ([%#span59] cmp_log'0 y z = o)
   -> ([%#span60] inv'5 x)  -> ([%#span61] inv'5 y)  -> ([%#span62] inv'5 z)  -> ([%#span63] cmp_log'0 x z = o)

  function refl'0 (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'0_spec : forall x : TrailIndex'0.t_trailindex . ([%#span64] inv'5 x)
   -> ([%#span65] cmp_log'0 x x = Ordering'0.C_Equal)

  function cmp_gt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_gt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span66] inv'5 x)
   -> ([%#span67] inv'5 y)  -> ([%#span68] gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater))

  function cmp_ge_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_ge_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span69] inv'5 x)
   -> ([%#span70] inv'5 y)  -> ([%#span71] ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less))

  function cmp_lt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_lt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span72] inv'5 x)
   -> ([%#span73] inv'5 y)  -> ([%#span74] lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less))

  function cmp_le_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_le_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span75] inv'5 x)
   -> ([%#span76] inv'5 y)  -> ([%#span77] le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater))

  use set.Fset

  function insert'1 [@inline:trivial] (self : Fset.fset (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) : Fset.fset (TrailIndex'0.t_trailindex)

   =
    [%#span78] Fset.add e self

  use prelude.seq_ext.SeqExt

  use set.Fset

  use seq.Seq

  use set.Fset

  predicate contains'0 [@inline:trivial] (self : Fset.fset (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex)
   =
    [%#span79] Fset.mem e self

  predicate contains'1 (self : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) =
    [%#span80] exists i : int . 0 <= i /\ i < Seq.length self /\ Seq.get self i = e

  function to_set'0 [#"/Users/xavier/Code/cdsat/src/heap.rs" 96 0 96 35] (s : Seq.seq (TrailIndex'0.t_trailindex)) : Fset.fset (TrailIndex'0.t_trailindex)


  axiom to_set'0_def : forall s : Seq.seq (TrailIndex'0.t_trailindex) . to_set'0 s
  = ([%#span85] if s = (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) then
    Fset.empty  : Fset.fset (TrailIndex'0.t_trailindex)
  else
    insert'1 (to_set'0 (SeqExt.subsequence s 1 (Seq.length s))) (Seq.get s 0)
  )

  axiom to_set'0_spec : forall s : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span81] inv'8 s)
   -> ([%#span83] inv'6 (to_set'0 s))
  && ([%#span82] forall x : TrailIndex'0.t_trailindex . inv'5 x  -> contains'1 s x = contains'0 (to_set'0 s) x)

  function shallow_model'3 [#"/Users/xavier/Code/cdsat/src/heap.rs" 88 4 88 50] (self : ConflictHeap'0.t_conflictheap) : Fset.fset (TrailIndex'0.t_trailindex)

   =
    [%#span88] to_set'0 (shallow_model'2 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self))

  axiom shallow_model'3_spec : forall self : ConflictHeap'0.t_conflictheap . ([%#span86] inv'9 self)
   -> ([%#span87] forall x : TrailIndex'0.t_trailindex . contains'1 (shallow_model'2 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self)) x
  = contains'0 (shallow_model'3 self) x)

  use prelude.prelude.Snapshot

  use prelude.prelude.Intrinsic

  use prelude.prelude.Snapshot

  use seq.Seq

  function shallow_model'5 (self : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) : Seq.seq (TrailIndex'0.t_trailindex)

   =
    [%#span89] shallow_model'2 self.current

  let rec push'0 (self:borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) (value:TrailIndex'0.t_trailindex) (return'  (ret:()))= {[@expl:precondition] [%#span91] inv'5 value}
    {[@expl:precondition] [%#span90] inv'4 self}
    any
    [ return' (result:())-> {[%#span92] shallow_model'2 self.final = Seq.snoc (shallow_model'5 self) value}
      (! return' {result}) ]


  predicate ext_eq'0 (self : Fset.fset (TrailIndex'0.t_trailindex)) (other : Fset.fset (TrailIndex'0.t_trailindex)) =
    [%#span96] forall e : TrailIndex'0.t_trailindex . inv'5 e  -> contains'0 self e = contains'0 other e

  axiom ext_eq'0_spec : forall self : Fset.fset (TrailIndex'0.t_trailindex), other : Fset.fset (TrailIndex'0.t_trailindex) . ([%#span93] inv'6 self)
   -> ([%#span94] inv'6 other)  -> ([%#span95] ext_eq'0 self other  -> self = other)

  function shallow_model'1 (self : borrowed (ConflictHeap'0.t_conflictheap)) : Fset.fset (TrailIndex'0.t_trailindex) =
    [%#span89] shallow_model'3 self.current

  function shallow_model'6 (self : ConflictHeap'0.t_conflictheap) : Fset.fset (TrailIndex'0.t_trailindex) =
    [%#span97] shallow_model'3 self

  function shallow_model'0 (self : Snapshot.snap_ty (ConflictHeap'0.t_conflictheap)) : Fset.fset (TrailIndex'0.t_trailindex)

   =
    [%#span98] shallow_model'6 (Snapshot.inner self)

  predicate resolve'0 (self : borrowed (ConflictHeap'0.t_conflictheap)) =
    [%#span99] self.final = self.current

  function index_logic'0 [@inline:trivial] (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) (ix : int) : TrailIndex'0.t_trailindex

   =
    [%#span100] Seq.get (shallow_model'2 self) ix

  let rec insert'0 (self:borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) (index:usize) (element:TrailIndex'0.t_trailindex) (return'  (ret:()))= {[@expl:precondition] [%#span102] inv'5 element}
    {[@expl:precondition] [%#span101] inv'4 self}
    any
    [ return' (result:())-> {[%#span106] forall i : int . UIntSize.to_int index < i
      /\ i < Seq.length (shallow_model'2 self.final)
       -> index_logic'0 self.final i = index_logic'0 self.current (i - 1)}
      {[%#span105] index_logic'0 self.final (UIntSize.to_int index) = element}
      {[%#span104] forall i : int . 0 <= i /\ i < UIntSize.to_int index
       -> index_logic'0 self.final i = index_logic'0 self.current i}
      {[%#span103] Seq.length (shallow_model'2 self.final) = Seq.length (shallow_model'5 self) + 1}
      (! return' {result}) ]


  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 167 4 167 44] (self : TrailIndex'0.t_trailindex) : TrailIndex'0.t_trailindex

   =
    [%#span107] self

  function deep_model'0 (self : TrailIndex'0.t_trailindex) : TrailIndex'0.t_trailindex =
    [%#span108] deep_model'1 self

  let rec eq'0 (self:TrailIndex'0.t_trailindex) (rhs:TrailIndex'0.t_trailindex) (return'  (ret:bool))= any
    [ return' (result:bool)-> {[%#span109] result = (deep_model'0 self = deep_model'0 rhs)} (! return' {result}) ]


  let rec lt'0 (self:TrailIndex'0.t_trailindex) (other:TrailIndex'0.t_trailindex) (return'  (ret:bool))= {[@expl:precondition] [%#span111] inv'3 other}
    {[@expl:precondition] [%#span110] inv'3 self}
    any
    [ return' (result:bool)-> {[%#span112] result = lt_log'0 (deep_model'0 self) (deep_model'0 other)}
      (! return' {result}) ]


  use prelude.prelude.Slice

  predicate has_value'0 [@inline:trivial] (self : usize) (seq : Seq.seq (TrailIndex'0.t_trailindex)) (out : TrailIndex'0.t_trailindex)

   =
    [%#span113] Seq.get seq (UIntSize.to_int self) = out

  predicate in_bounds'0 [@inline:trivial] (self : usize) (seq : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span114] UIntSize.to_int self < Seq.length seq

  function shallow_model'4 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)

   =
    [%#span97] shallow_model'2 self

  let rec index'0 (self:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) (index:usize) (return'  (ret:TrailIndex'0.t_trailindex))= {[@expl:precondition] [%#span117] inv'2 index}
    {[@expl:precondition] [%#span116] inv'1 self}
    {[@expl:precondition] [%#span115] in_bounds'0 index (shallow_model'4 self)}
    any
    [ return' (result:TrailIndex'0.t_trailindex)-> {[%#span119] inv'3 result}
      {[%#span118] has_value'0 index (shallow_model'4 self) result}
      (! return' {result}) ]


  let rec len'0 (self:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) (return'  (ret:usize))= {[@expl:precondition] [%#span120] inv'1 self}
    any
    [ return' (result:usize)-> {[%#span121] UIntSize.to_int result = Seq.length (shallow_model'4 self)}
      (! return' {result}) ]


  use prelude.prelude.Snapshot

  let rec insert (self:borrowed (ConflictHeap'0.t_conflictheap)) (e:TrailIndex'0.t_trailindex) (return'  (ret:bool))= {[%#sheap16] inv'0 self}
    (! bb0
    [ bb0 = s0 [ s0 =  [ &old' <- [%#sheap0] Snapshot.new self.current ] s1 | s1 = bb1 ]
    | bb1 = s0 [ s0 =  [ &i <- [%#sheap1] (0 : usize) ] s1 | s1 = bb2 ]
    | bb2 = bb2
      [ bb2 = {[@expl:loop invariant] [%#sheap2] forall j : int . 0 <= j /\ j < UIntSize.to_int i
         -> lt_log'0 (index_logic'0 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self.current) j) e}
        (! s0) [ s0 = bb3 ]
        [ bb3 = s0
          [ s0 = ConflictHeap'0.t_conflictheap {self.current}
              (fun (r0'0:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->
                len'0 {r0'0} (fun (_ret':usize) ->  [ &_12 <- _ret' ] s1))
          | s1 = bb4 ]

        | bb4 = s0
          [ s0 = UIntSize.lt {i} {_12}
              (fun (_ret':bool) ->  [ &_10 <- _ret' ] (any [ any_ (_any:usize)-> (!  [ &_12 <- _any ] s1) ] ))
          | s1 = any [ br0 -> {_10 = false} (! bb15) | br1 -> {_10} (! bb5) ]  ]

        | bb5 = s0
          [ s0 = ConflictHeap'0.t_conflictheap {self.current}
              (fun (r0'0:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->
                index'0 {r0'0} {i} (fun (_ret':TrailIndex'0.t_trailindex) ->  [ &_18 <- _ret' ] s1))
          | s1 = bb6 ]

        | bb6 = s0 [ s0 = lt'0 {e} {_18} (fun (_ret':bool) ->  [ &_15 <- _ret' ] s1) | s1 = bb7 ]
        | bb7 = any [ br0 -> {_15 = false} (! bb10) | br1 -> {_15} (! bb8) ]
        | bb10 = s0
          [ s0 = ConflictHeap'0.t_conflictheap {self.current}
              (fun (r0'0:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->
                index'0 {r0'0} {i} (fun (_ret':TrailIndex'0.t_trailindex) ->  [ &_35 <- _ret' ] s1))
          | s1 = bb11 ]

        | bb11 = s0 [ s0 = eq'0 {e} {_35} (fun (_ret':bool) ->  [ &_32 <- _ret' ] s1) | s1 = bb12 ]
        | bb12 = any [ br0 -> {_32 = false} (! bb14) | br1 -> {_32} (! bb13) ]
        | bb14 = s0
          [ s0 = UIntSize.add {i} {[%#sheap3] (1 : usize)} (fun (_ret':usize) ->  [ &i <- _ret' ] s1) | s1 = bb2 ]
           ]
         ]

    | bb8 = s0
      [ s0 = ConflictHeap'0.t_conflictheap {self.current}
          (fun (r0'0:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->
            Borrow.borrow_final
              <Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)>
              {r0'0}
              {Borrow.inherit_id (Borrow.get_id self) 1}
              (fun (_ret':borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) ->
                 [ &_23 <- _ret' ]
                ConflictHeap'0.t_conflictheap {self.current}
                  (fun (l_0'0:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->
                     [ &self <- { self with current = ConflictHeap'0.C_ConflictHeap _23.final ; } ]
                    s1)))
      | s1 = insert'0 {_23} {i} {e} (fun (_ret':()) ->  [ &_22 <- _ret' ] s2)
      | s2 = bb9 ]

    | bb9 = s0
      [ s0 = {[@expl:type invariant] inv'0 self} s1
      | s1 = -{resolve'0 self}- s2
      | s2 = {[@expl:assertion] [%#sheap4] forall a : TrailIndex'0.t_trailindex . contains'0 (shallow_model'0 old') a
         -> contains'0 (shallow_model'1 self) a}
        s3
      | s3 = {[@expl:assertion] [%#sheap5] forall a : TrailIndex'0.t_trailindex . contains'0 (shallow_model'1 self) a
         -> contains'0 (shallow_model'0 old') a \/ a = e}
        s4
      | s4 = {[@expl:assertion] [%#sheap6] ext_eq'0 (shallow_model'1 self) (insert'1 (shallow_model'0 old') e)} s5
      | s5 =  [ &_0 <- [%#sheap7] true ] s6
      | s6 = bb17 ]

    | bb13 = s0
      [ s0 = {[@expl:type invariant] inv'0 self} s1
      | s1 = -{resolve'0 self}- s2
      | s2 =  [ &_0 <- [%#sheap8] false ] s3
      | s3 = bb17 ]

    | bb17 = bb18
    | bb15 = s0
      [ s0 = {[@expl:assertion] [%#sheap9] not contains'1 (shallow_model'2 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self.current)) e}
        s1
      | s1 = {[@expl:assertion] [%#sheap10] not contains'0 (shallow_model'1 self) e} s2
      | s2 = ConflictHeap'0.t_conflictheap {self.current}
          (fun (r0'0:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->
            Borrow.borrow_final
              <Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)>
              {r0'0}
              {Borrow.inherit_id (Borrow.get_id self) 1}
              (fun (_ret':borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) ->
                 [ &_47 <- _ret' ]
                ConflictHeap'0.t_conflictheap {self.current}
                  (fun (l_0'0:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->
                     [ &self <- { self with current = ConflictHeap'0.C_ConflictHeap _47.final ; } ]
                    s3)))
      | s3 = push'0 {_47} {e} (fun (_ret':()) ->  [ &_46 <- _ret' ] s4)
      | s4 = bb16 ]

    | bb16 = s0
      [ s0 = {[@expl:type invariant] inv'0 self} s1
      | s1 = -{resolve'0 self}- s2
      | s2 = {[@expl:assertion] [%#sheap11] forall a : TrailIndex'0.t_trailindex . contains'1 (shallow_model'2 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 (Snapshot.inner old'))) a
         -> contains'1 (shallow_model'2 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self.current)) a}
        s3
      | s3 = {[@expl:assertion] [%#sheap12] forall a : TrailIndex'0.t_trailindex . contains'0 (shallow_model'0 old') a
         -> contains'0 (shallow_model'1 self) a}
        s4
      | s4 = {[@expl:assertion] [%#sheap13] forall a : TrailIndex'0.t_trailindex . contains'0 (shallow_model'1 self) a
         -> contains'0 (shallow_model'0 old') a \/ a = e}
        s5
      | s5 = {[@expl:assertion] [%#sheap14] ext_eq'0 (shallow_model'1 self) (insert'1 (shallow_model'0 old') e)} s6
      | s6 =  [ &_0 <- [%#sheap15] true ] s7
      | s7 = bb18 ]

    | bb18 = return' {_0} ]
    )
    [ & _0 : bool = any_l ()
    | & self : borrowed (ConflictHeap'0.t_conflictheap) = self
    | & e : TrailIndex'0.t_trailindex = e
    | & old' : Snapshot.snap_ty (ConflictHeap'0.t_conflictheap) = any_l ()
    | & i : usize = any_l ()
    | & _10 : bool = any_l ()
    | & _12 : usize = any_l ()
    | & _15 : bool = any_l ()
    | & _18 : TrailIndex'0.t_trailindex = any_l ()
    | & _22 : () = any_l ()
    | & _23 : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) = any_l ()
    | & _32 : bool = any_l ()
    | & _35 : TrailIndex'0.t_trailindex = any_l ()
    | & _46 : () = any_l ()
    | & _47 : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) = any_l () ]

    [ return' (result:bool)-> {[@expl:postcondition] [%#sheap17] shallow_model'3 self.final
      = insert'1 (shallow_model'1 self) e}
      (! return' {result}) ]

end
module Cdsat_Heap_Impl1_Last
  let%span sheap0 = "/Users/xavier/Code/cdsat/src/heap.rs" 59 27 59 28

  let%span sheap1 = "/Users/xavier/Code/cdsat/src/heap.rs" 62 34 62 35

  let%span sheap2 = "/Users/xavier/Code/cdsat/src/heap.rs" 58 24 58 28

  let%span sheap3 = "/Users/xavier/Code/cdsat/src/heap.rs" 54 8 57 9

  let%span span4 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span5 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span6 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span7 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span8 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span9 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span10 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span11 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  let%span span12 = "/Users/xavier/Code/cdsat/src/trail.rs" 146 14 146 59

  let%span span13 = "/Users/xavier/Code/cdsat/src/trail.rs" 140 15 140 48

  let%span span14 = "/Users/xavier/Code/cdsat/src/trail.rs" 141 14 141 44

  let%span span15 = "/Users/xavier/Code/cdsat/src/trail.rs" 134 15 134 45

  let%span span16 = "/Users/xavier/Code/cdsat/src/trail.rs" 135 14 135 47

  let%span span17 = "/Users/xavier/Code/cdsat/src/trail.rs" 127 15 127 32

  let%span span18 = "/Users/xavier/Code/cdsat/src/trail.rs" 128 15 128 32

  let%span span19 = "/Users/xavier/Code/cdsat/src/trail.rs" 129 14 129 31

  let%span span20 = "/Users/xavier/Code/cdsat/src/trail.rs" 122 14 122 45

  let%span span21 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 41 20 41 56

  let%span span22 = "/Users/xavier/Code/cdsat/src/trail.rs" 117 14 117 64

  let%span span23 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 31 20 31 53

  let%span span24 = "/Users/xavier/Code/cdsat/src/trail.rs" 112 14 112 61

  let%span span25 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 21 20 21 53

  let%span span26 = "/Users/xavier/Code/cdsat/src/trail.rs" 107 14 107 61

  let%span span27 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 11 20 11 56

  let%span span28 = "/Users/xavier/Code/cdsat/src/trail.rs" 102 14 102 64

  let%span span29 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 138 8 140 9

  let%span span30 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 149 8 149 40

  let%span span31 = "/Users/xavier/Code/cdsat/src/trail.rs" 829 4 829 98

  let%span span32 = "/Users/xavier/Code/cdsat/src/heap.rs" 10 4 10 16

  let%span span33 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 14 70 15

  let%span span34 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 23 70 24

  let%span span35 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 69 14 69 59

  let%span span36 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 64 15 64 48

  let%span span37 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 16 66 17

  let%span span38 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 25 66 26

  let%span span39 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 65 14 65 44

  let%span span40 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 59 15 59 45

  let%span span41 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 16 61 17

  let%span span42 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 25 61 26

  let%span span43 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 60 14 60 47

  let%span span44 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 53 15 53 32

  let%span span45 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 54 15 54 32

  let%span span46 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 13 56 14

  let%span span47 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 22 56 23

  let%span span48 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 31 56 32

  let%span span49 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 55 14 55 31

  let%span span50 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 50 12 50 13

  let%span span51 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 49 14 49 45

  let%span span52 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 18 46 19

  let%span span53 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 27 46 28

  let%span span54 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 45 14 45 64

  let%span span55 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 18 36 19

  let%span span56 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 27 36 28

  let%span span57 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 35 14 35 61

  let%span span58 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 18 26 19

  let%span span59 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 27 26 28

  let%span span60 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 25 14 25 61

  let%span span61 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 18 16 19

  let%span span62 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 27 16 28

  let%span span63 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 15 14 15 64

  let%span span64 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span65 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span66 = "/Users/xavier/Code/cdsat/src/trail.rs" 834 11 834 24

  let%span span67 = "/Users/xavier/Code/cdsat/src/trail.rs" 836 10 836 28

  let%span span68 = "/Users/xavier/Code/cdsat/src/trail.rs" 837 0 837 56

  let%span span69 = "/Users/xavier/Code/cdsat/src/trail.rs" 835 10 835 17

  let%span span70 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span71 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 129 8 129 78

  let%span span72 = "/Users/xavier/Code/cdsat/src/heap.rs" 96 13 96 14

  let%span span73 = "/Users/xavier/Code/cdsat/src/heap.rs" 94 0 94 61

  let%span span74 = "/Users/xavier/Code/cdsat/src/heap.rs" 96 28 96 35

  let%span span75 = "/Users/xavier/Code/cdsat/src/heap.rs" 95 10 95 17

  let%span span76 = "/Users/xavier/Code/cdsat/src/heap.rs" 93 0 93 8

  let%span span77 = "/Users/xavier/Code/cdsat/src/heap.rs" 88 21 88 25

  let%span span78 = "/Users/xavier/Code/cdsat/src/heap.rs" 87 4 87 71

  let%span span79 = "/Users/xavier/Code/cdsat/src/heap.rs" 89 8 89 38

  let%span span80 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 90 8 90 31

  let%span span81 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 122 20 122 37

  let%span span82 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 115 20 115 37

  let%span span83 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 19 21 19 25

  let%span span84 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 17 14 17 41

  let%span span85 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 18 14 18 42

  let%span span86 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 19 4 19 50

  let%span span87 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/slice/mod.rs" 617 19 617 23

  let%span span88 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/slice/mod.rs" 617 25 617 30

  let%span span89 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 255 8 255 102

  let%span span90 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 256 18 256 55

  let%span span91 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/slice/mod.rs" 617 4 619 28

  let%span span92 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2816 14 2816 18

  let%span span93 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 163 26 163 42

  let%span span94 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2816 4 2816 27

  let%span span95 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2255 16 2255 20

  let%span span96 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 78 26 78 48

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function eq_cmp'2 (_1 : usize) (_2 : usize) : ()

  function antisym2'2 (_1 : usize) (_2 : usize) : ()

  function antisym1'2 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'2 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'2 (_1 : usize) : ()

  function cmp_gt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'2 (_1 : usize) (_2 : usize) : ()

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use set.Fset

  predicate invariant'11 (self : Fset.fset (TrailIndex'0.t_trailindex)) =
    [%#span4] true

  predicate inv'11 (_x : Fset.fset (TrailIndex'0.t_trailindex))

  axiom inv'11 : forall x : Fset.fset (TrailIndex'0.t_trailindex) . inv'11 x = true

  predicate invariant'10 (self : TrailIndex'0.t_trailindex) =
    [%#span4] true

  predicate inv'10 (_x : TrailIndex'0.t_trailindex)

  axiom inv'10 : forall x : TrailIndex'0.t_trailindex . inv'10 x = true

  use prelude.prelude.Slice

  predicate invariant'9 (self : slice (TrailIndex'0.t_trailindex)) =
    [%#span4] true

  predicate inv'9 (_x : slice (TrailIndex'0.t_trailindex))

  axiom inv'9 : forall x : slice (TrailIndex'0.t_trailindex) . inv'9 x = true

  use seq.Seq

  predicate invariant'8 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span4] true

  predicate inv'8 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'8 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'8 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  constant max'0 : usize = [%#span5] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'7 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function shallow_model'4 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom shallow_model'4_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span6] inv'7 self)
   -> ([%#span8] inv'8 (shallow_model'4 self))
  && ([%#span7] Seq.length (shallow_model'4 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'7 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span9] inv'8 (shallow_model'4 self)

  axiom inv'7 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'7 x = true

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span10] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span11] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  function eq_cmp'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 147 4 147 31] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom eq_cmp'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span12] (x = y)
  = (cmp_log'0 x y = Ordering'0.C_Equal)

  function antisym2'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 142 4 142 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom antisym2'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span13] cmp_log'0 x y
  = Ordering'0.C_Greater)  -> ([%#span14] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 136 4 136 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom antisym1'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span15] cmp_log'0 x y
  = Ordering'0.C_Less)  -> ([%#span16] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 130 4 130 52] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span17] cmp_log'0 x y
  = o)  -> ([%#span18] cmp_log'0 y z = o)  -> ([%#span19] cmp_log'0 x z = o)

  function refl'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 123 4 123 20] (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'1_spec : forall x : TrailIndex'0.t_trailindex . [%#span20] cmp_log'0 x x = Ordering'0.C_Equal

  function gt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span21] cmp_log'0 self o = Ordering'0.C_Greater

  function cmp_gt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 118 4 118 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_gt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span22] gt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Greater)

  function ge_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span23] cmp_log'0 self o <> Ordering'0.C_Less

  function cmp_ge_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 113 4 113 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_ge_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span24] ge_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Less)

  function lt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span25] cmp_log'0 self o = Ordering'0.C_Less

  function cmp_lt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 108 4 108 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_lt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span26] lt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Less)

  function le_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span27] cmp_log'0 self o <> Ordering'0.C_Greater

  function cmp_le_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 103 4 103 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_le_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span28] le_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Greater)

  use seq.Seq

  predicate sorted_range'0 (self : Seq.seq (TrailIndex'0.t_trailindex)) (l : int) (u : int) =
    [%#span29] forall j : int . forall i : int . l <= i /\ i <= j /\ j < u
     -> le_log'0 (Seq.get self i) (Seq.get self j)

  predicate sorted'0 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span30] sorted_range'0 self 0 (Seq.length self)

  predicate seq_unique'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 828 0 828 46] (s : Seq.seq (TrailIndex'0.t_trailindex))

   =
    [%#span31] forall j : int . forall i : int . 0 <= i /\ i <= j /\ j < Seq.length s
     -> i <> j  -> Seq.get s i <> Seq.get s j

  use Cdsat_Heap_ConflictHeap_Type as Cdsat_Heap_ConflictHeap_Type

  use Cdsat_Heap_ConflictHeap_Type as ConflictHeap'0

  predicate invariant'6 [#"/Users/xavier/Code/cdsat/src/heap.rs" 12 4 12 30] (self : ConflictHeap'0.t_conflictheap) =
    [%#span32] seq_unique'0 (shallow_model'4 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self))
    /\ sorted'0 (shallow_model'4 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self))

  predicate inv'6 (_x : ConflictHeap'0.t_conflictheap)

  axiom inv'6 : forall x : ConflictHeap'0.t_conflictheap . inv'6 x
  = (invariant'6 x
  /\ match x with
    | ConflictHeap'0.C_ConflictHeap a_0 -> true
    end)

  function eq_cmp'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom eq_cmp'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span33] inv'10 x)
   -> ([%#span34] inv'10 y)  -> ([%#span35] (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal))

  function antisym2'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym2'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span36] cmp_log'0 x y
  = Ordering'0.C_Greater)
   -> ([%#span37] inv'10 x)  -> ([%#span38] inv'10 y)  -> ([%#span39] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym1'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span40] cmp_log'0 x y
  = Ordering'0.C_Less)
   -> ([%#span41] inv'10 x)  -> ([%#span42] inv'10 y)  -> ([%#span43] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span44] cmp_log'0 x y
  = o)
   -> ([%#span45] cmp_log'0 y z = o)
   -> ([%#span46] inv'10 x)  -> ([%#span47] inv'10 y)  -> ([%#span48] inv'10 z)  -> ([%#span49] cmp_log'0 x z = o)

  function refl'0 (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'0_spec : forall x : TrailIndex'0.t_trailindex . ([%#span50] inv'10 x)
   -> ([%#span51] cmp_log'0 x x = Ordering'0.C_Equal)

  function cmp_gt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_gt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span52] inv'10 x)
   -> ([%#span53] inv'10 y)  -> ([%#span54] gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater))

  function cmp_ge_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_ge_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span55] inv'10 x)
   -> ([%#span56] inv'10 y)  -> ([%#span57] ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less))

  function cmp_lt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_lt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span58] inv'10 x)
   -> ([%#span59] inv'10 y)  -> ([%#span60] lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less))

  function cmp_le_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_le_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span61] inv'10 x)
   -> ([%#span62] inv'10 y)  -> ([%#span63] le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater))

  use Core_Option_Option_Type as Option'0

  predicate invariant'5 (self : Option'0.t_option (TrailIndex'0.t_trailindex)) =
    [%#span4] true

  predicate inv'5 (_x : Option'0.t_option (TrailIndex'0.t_trailindex))

  axiom inv'5 : forall x : Option'0.t_option (TrailIndex'0.t_trailindex) . inv'5 x = true

  predicate invariant'4 (self : TrailIndex'0.t_trailindex) =
    [%#span4] true

  predicate inv'4 (_x : TrailIndex'0.t_trailindex)

  axiom inv'4 : forall x : TrailIndex'0.t_trailindex . inv'4 x = true

  predicate invariant'3 (self : usize) =
    [%#span4] true

  predicate inv'3 (_x : usize)

  axiom inv'3 : forall x : usize . inv'3 x = true

  predicate invariant'2 (self : slice (TrailIndex'0.t_trailindex)) =
    [%#span4] true

  predicate inv'2 (_x : slice (TrailIndex'0.t_trailindex))

  axiom inv'2 : forall x : slice (TrailIndex'0.t_trailindex) . inv'2 x = true

  predicate invariant'1 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span4] true

  predicate inv'1 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  axiom inv'1 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'1 x = true

  predicate invariant'0 (self : ConflictHeap'0.t_conflictheap) =
    [%#span4] true

  use prelude.prelude.Borrow

  predicate inv'0 (_x : ConflictHeap'0.t_conflictheap)

  axiom inv'0 : forall x : ConflictHeap'0.t_conflictheap . inv'0 x = inv'6 x

  use set.Fset

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (TrailIndex'0.t_trailindex)) (a : TrailIndex'0.t_trailindex) : Fset.fset (TrailIndex'0.t_trailindex)

   =
    [%#span64] Fset.remove a self

  use set.Fset

  use set.Fset

  use set.Fset

  predicate contains'0 [@inline:trivial] (self : Fset.fset (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex)
   =
    [%#span65] Fset.mem e self

  use set.Fset

  function set_max'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 838 0 838 56] (s : Fset.fset (TrailIndex'0.t_trailindex)) : TrailIndex'0.t_trailindex


  axiom set_max'0_spec : forall s : Fset.fset (TrailIndex'0.t_trailindex) . ([%#span66] not Fset.is_empty s)
   -> ([%#span68] forall o : TrailIndex'0.t_trailindex . contains'0 s o  -> le_log'0 o (set_max'0 s))
  && ([%#span67] contains'0 s (set_max'0 s))

  use set.Fset

  function insert'0 [@inline:trivial] (self : Fset.fset (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) : Fset.fset (TrailIndex'0.t_trailindex)

   =
    [%#span70] Fset.add e self

  use prelude.seq_ext.SeqExt

  use seq.Seq

  predicate contains'1 (self : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) =
    [%#span71] exists i : int . 0 <= i /\ i < Seq.length self /\ Seq.get self i = e

  function to_set'0 [#"/Users/xavier/Code/cdsat/src/heap.rs" 96 0 96 35] (s : Seq.seq (TrailIndex'0.t_trailindex)) : Fset.fset (TrailIndex'0.t_trailindex)


  axiom to_set'0_def : forall s : Seq.seq (TrailIndex'0.t_trailindex) . to_set'0 s
  = ([%#span76] if s = (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) then
    Fset.empty  : Fset.fset (TrailIndex'0.t_trailindex)
  else
    insert'0 (to_set'0 (SeqExt.subsequence s 1 (Seq.length s))) (Seq.get s 0)
  )

  axiom to_set'0_spec : forall s : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span72] inv'8 s)
   -> ([%#span74] inv'11 (to_set'0 s))
  && ([%#span73] forall x : TrailIndex'0.t_trailindex . inv'10 x  -> contains'1 s x = contains'0 (to_set'0 s) x)

  function shallow_model'3 [#"/Users/xavier/Code/cdsat/src/heap.rs" 88 4 88 50] (self : ConflictHeap'0.t_conflictheap) : Fset.fset (TrailIndex'0.t_trailindex)

   =
    [%#span79] to_set'0 (shallow_model'4 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self))

  axiom shallow_model'3_spec : forall self : ConflictHeap'0.t_conflictheap . ([%#span77] inv'6 self)
   -> ([%#span78] forall x : TrailIndex'0.t_trailindex . contains'1 (shallow_model'4 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self)) x
  = contains'0 (shallow_model'3 self) x)

  function shallow_model'0 (self : ConflictHeap'0.t_conflictheap) : Fset.fset (TrailIndex'0.t_trailindex) =
    [%#span80] shallow_model'3 self

  use prelude.prelude.Intrinsic

  predicate has_value'0 [@inline:trivial] (self : usize) (seq : Seq.seq (TrailIndex'0.t_trailindex)) (out : TrailIndex'0.t_trailindex)

   =
    [%#span81] Seq.get seq (UIntSize.to_int self) = out

  predicate in_bounds'0 [@inline:trivial] (self : usize) (seq : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span82] UIntSize.to_int self < Seq.length seq

  use prelude.prelude.Slice

  function shallow_model'5 (self : slice (TrailIndex'0.t_trailindex)) : Seq.seq (TrailIndex'0.t_trailindex)

  axiom shallow_model'5_spec : forall self : slice (TrailIndex'0.t_trailindex) . ([%#span83] inv'9 self)
   -> ([%#span86] inv'8 (shallow_model'5 self))
  && ([%#span85] shallow_model'5 self = Slice.id self)
  && ([%#span84] Seq.length (shallow_model'5 self) <= UIntSize.to_int (max'0 : usize))

  function shallow_model'2 (self : slice (TrailIndex'0.t_trailindex)) : Seq.seq (TrailIndex'0.t_trailindex) =
    [%#span80] shallow_model'5 self

  let rec get'0 (self:slice (TrailIndex'0.t_trailindex)) (index:usize) (return'  (ret:Option'0.t_option (TrailIndex'0.t_trailindex)))= {[@expl:precondition] [%#span88] inv'3 index}
    {[@expl:precondition] [%#span87] inv'2 self}
    any
    [ return' (result:Option'0.t_option (TrailIndex'0.t_trailindex))-> {[%#span91] inv'5 result}
      {[%#span90] in_bounds'0 index (shallow_model'2 self) \/ result = Option'0.C_None}
      {[%#span89] in_bounds'0 index (shallow_model'2 self)
       -> (exists r : TrailIndex'0.t_trailindex . inv'4 r
      /\ result = Option'0.C_Some r /\ has_value'0 index (shallow_model'2 self) r)}
      (! return' {result}) ]


  function shallow_model'1 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)

   =
    [%#span80] shallow_model'4 self

  let rec deref'0 (self:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) (return'  (ret:slice (TrailIndex'0.t_trailindex)))= {[@expl:precondition] [%#span92] inv'1 self}
    any
    [ return' (result:slice (TrailIndex'0.t_trailindex))-> {[%#span94] inv'2 result}
      {[%#span93] shallow_model'2 result = shallow_model'1 self}
      (! return' {result}) ]


  let rec len'0 (self:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) (return'  (ret:usize))= {[@expl:precondition] [%#span95] inv'1 self}
    any
    [ return' (result:usize)-> {[%#span96] UIntSize.to_int result = Seq.length (shallow_model'1 self)}
      (! return' {result}) ]


  let rec last (self:ConflictHeap'0.t_conflictheap) (return'  (ret:Option'0.t_option (TrailIndex'0.t_trailindex)))= {[%#sheap2] inv'0 self}
    (! bb0
    [ bb0 = s0
      [ s0 = ConflictHeap'0.t_conflictheap {self}
          (fun (r0'0:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->
            len'0 {r0'0} (fun (_ret':usize) ->  [ &_5 <- _ret' ] s1))
      | s1 = bb1 ]

    | bb1 = s0
      [ s0 = UIntSize.eq {_5} {[%#sheap0] (0 : usize)}
          (fun (_ret':bool) ->  [ &_4 <- _ret' ] (any [ any_ (_any:usize)-> (!  [ &_5 <- _any ] s1) ] ))
      | s1 = any [ br0 -> {_4 = false} (! bb3) | br1 -> {_4} (! bb2) ]  ]

    | bb2 = s0 [ s0 =  [ &_0 <- Option'0.C_None ] s1 | s1 = bb7 ]
    | bb3 = s0
      [ s0 = ConflictHeap'0.t_conflictheap {self}
          (fun (r0'0:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->
            deref'0 {r0'0} (fun (_ret':slice (TrailIndex'0.t_trailindex)) ->  [ &_9 <- _ret' ] s1))
      | s1 = bb4 ]

    | bb4 = s0
      [ s0 = ConflictHeap'0.t_conflictheap {self}
          (fun (r0'0:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->
            len'0 {r0'0} (fun (_ret':usize) ->  [ &_12 <- _ret' ] s1))
      | s1 = bb5 ]

    | bb5 = s0
      [ s0 = UIntSize.sub {_12} {[%#sheap1] (1 : usize)}
          (fun (_ret':usize) ->  [ &_11 <- _ret' ] (any [ any_ (_any:usize)-> (!  [ &_12 <- _any ] s1) ] ))
      | s1 = get'0 {_9} {_11} (fun (_ret':Option'0.t_option (TrailIndex'0.t_trailindex)) ->  [ &_0 <- _ret' ] s2)
      | s2 = bb6 ]

    | bb6 = bb7
    | bb7 = return' {_0} ]
    )
    [ & _0 : Option'0.t_option (TrailIndex'0.t_trailindex) = any_l ()
    | & self : ConflictHeap'0.t_conflictheap = self
    | & _4 : bool = any_l ()
    | & _5 : usize = any_l ()
    | & _9 : slice (TrailIndex'0.t_trailindex) = any_l ()
    | & _11 : usize = any_l ()
    | & _12 : usize = any_l () ]

    [ return' (result:Option'0.t_option (TrailIndex'0.t_trailindex))-> {[@expl:postcondition] [%#sheap3] match result with
        | Option'0.C_Some a -> contains'0 (shallow_model'0 self) a /\ set_max'0 (shallow_model'0 self) = a
        | Option'0.C_None -> shallow_model'0 self = (Fset.empty  : Fset.fset (TrailIndex'0.t_trailindex))
        end}
      (! return' {result}) ]

end
module Cdsat_Trail_Impl8_Level
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 173 14 173 30

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  use prelude.prelude.Borrow

  use prelude.prelude.Intrinsic

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  let rec level (self:TrailIndex'0.t_trailindex) (return'  (ret:usize))= (! bb0
    [ bb0 = s0
      [ s0 = TrailIndex'0.t_trailindex {self} (fun (r0'0:usize) (r1'0:usize) ->  [ &_0 <- r0'0 ] s1)
      | s1 = return' {_0} ]
       ]
    ) [ & _0 : usize = any_l () | & self : TrailIndex'0.t_trailindex = self ]
    [ return' (result:usize)-> {[@expl:postcondition] [%#strail0] result
      = Cdsat_Trail_TrailIndex_Type.trailindex_0 self}
      (! return' {result}) ]

end
module Cdsat_Heap_Impl1_PopLast
  let%span sheap0 = "/Users/xavier/Code/cdsat/src/heap.rs" 70 32 70 36

  let%span sheap1 = "/Users/xavier/Code/cdsat/src/heap.rs" 65 14 65 58

  let%span sheap2 = "/Users/xavier/Code/cdsat/src/heap.rs" 66 4 69 6

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span4 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span5 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span6 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span7 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span8 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span9 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span10 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  let%span span11 = "/Users/xavier/Code/cdsat/src/trail.rs" 146 14 146 59

  let%span span12 = "/Users/xavier/Code/cdsat/src/trail.rs" 140 15 140 48

  let%span span13 = "/Users/xavier/Code/cdsat/src/trail.rs" 141 14 141 44

  let%span span14 = "/Users/xavier/Code/cdsat/src/trail.rs" 134 15 134 45

  let%span span15 = "/Users/xavier/Code/cdsat/src/trail.rs" 135 14 135 47

  let%span span16 = "/Users/xavier/Code/cdsat/src/trail.rs" 127 15 127 32

  let%span span17 = "/Users/xavier/Code/cdsat/src/trail.rs" 128 15 128 32

  let%span span18 = "/Users/xavier/Code/cdsat/src/trail.rs" 129 14 129 31

  let%span span19 = "/Users/xavier/Code/cdsat/src/trail.rs" 122 14 122 45

  let%span span20 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 41 20 41 56

  let%span span21 = "/Users/xavier/Code/cdsat/src/trail.rs" 117 14 117 64

  let%span span22 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 31 20 31 53

  let%span span23 = "/Users/xavier/Code/cdsat/src/trail.rs" 112 14 112 61

  let%span span24 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 21 20 21 53

  let%span span25 = "/Users/xavier/Code/cdsat/src/trail.rs" 107 14 107 61

  let%span span26 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 11 20 11 56

  let%span span27 = "/Users/xavier/Code/cdsat/src/trail.rs" 102 14 102 64

  let%span span28 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 138 8 140 9

  let%span span29 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 149 8 149 40

  let%span span30 = "/Users/xavier/Code/cdsat/src/trail.rs" 829 4 829 98

  let%span span31 = "/Users/xavier/Code/cdsat/src/heap.rs" 10 4 10 16

  let%span span32 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 14 70 15

  let%span span33 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 23 70 24

  let%span span34 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 69 14 69 59

  let%span span35 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 64 15 64 48

  let%span span36 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 16 66 17

  let%span span37 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 25 66 26

  let%span span38 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 65 14 65 44

  let%span span39 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 59 15 59 45

  let%span span40 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 16 61 17

  let%span span41 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 25 61 26

  let%span span42 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 60 14 60 47

  let%span span43 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 53 15 53 32

  let%span span44 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 54 15 54 32

  let%span span45 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 13 56 14

  let%span span46 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 22 56 23

  let%span span47 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 31 56 32

  let%span span48 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 55 14 55 31

  let%span span49 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 50 12 50 13

  let%span span50 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 49 14 49 45

  let%span span51 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 18 46 19

  let%span span52 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 27 46 28

  let%span span53 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 45 14 45 64

  let%span span54 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 18 36 19

  let%span span55 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 27 36 28

  let%span span56 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 35 14 35 61

  let%span span57 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 18 26 19

  let%span span58 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 27 26 28

  let%span span59 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 25 14 25 61

  let%span span60 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 18 16 19

  let%span span61 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 27 16 28

  let%span span62 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 15 14 15 64

  let%span span63 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span64 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span65 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span66 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 129 8 129 78

  let%span span67 = "/Users/xavier/Code/cdsat/src/heap.rs" 96 13 96 14

  let%span span68 = "/Users/xavier/Code/cdsat/src/heap.rs" 94 0 94 61

  let%span span69 = "/Users/xavier/Code/cdsat/src/heap.rs" 96 28 96 35

  let%span span70 = "/Users/xavier/Code/cdsat/src/heap.rs" 95 10 95 17

  let%span span71 = "/Users/xavier/Code/cdsat/src/heap.rs" 93 0 93 8

  let%span span72 = "/Users/xavier/Code/cdsat/src/heap.rs" 88 21 88 25

  let%span span73 = "/Users/xavier/Code/cdsat/src/heap.rs" 87 4 87 71

  let%span span74 = "/Users/xavier/Code/cdsat/src/heap.rs" 89 8 89 38

  let%span span75 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 108 8 108 31

  let%span span76 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 26 20 26 34

  let%span span77 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2078 20 2078 24

  let%span span78 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 86 26 91 17

  let%span span79 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2078 4 2078 38

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function eq_cmp'2 (_1 : usize) (_2 : usize) : ()

  function antisym2'2 (_1 : usize) (_2 : usize) : ()

  function antisym1'2 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'2 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'2 (_1 : usize) : ()

  function cmp_gt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'2 (_1 : usize) (_2 : usize) : ()

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use set.Fset

  predicate invariant'7 (self : Fset.fset (TrailIndex'0.t_trailindex)) =
    [%#span3] true

  predicate inv'7 (_x : Fset.fset (TrailIndex'0.t_trailindex))

  axiom inv'7 : forall x : Fset.fset (TrailIndex'0.t_trailindex) . inv'7 x = true

  predicate invariant'6 (self : TrailIndex'0.t_trailindex) =
    [%#span3] true

  predicate inv'6 (_x : TrailIndex'0.t_trailindex)

  axiom inv'6 : forall x : TrailIndex'0.t_trailindex . inv'6 x = true

  use seq.Seq

  predicate invariant'5 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span3] true

  predicate inv'5 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'5 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'5 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  constant max'0 : usize = [%#span4] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'4 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function shallow_model'2 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom shallow_model'2_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span5] inv'4 self)
   -> ([%#span7] inv'5 (shallow_model'2 self))
  && ([%#span6] Seq.length (shallow_model'2 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'4 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span8] inv'5 (shallow_model'2 self)

  axiom inv'4 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'4 x = true

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span9] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span10] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  function eq_cmp'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 147 4 147 31] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom eq_cmp'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span11] (x = y)
  = (cmp_log'0 x y = Ordering'0.C_Equal)

  function antisym2'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 142 4 142 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom antisym2'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span12] cmp_log'0 x y
  = Ordering'0.C_Greater)  -> ([%#span13] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 136 4 136 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom antisym1'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span14] cmp_log'0 x y
  = Ordering'0.C_Less)  -> ([%#span15] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 130 4 130 52] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span16] cmp_log'0 x y
  = o)  -> ([%#span17] cmp_log'0 y z = o)  -> ([%#span18] cmp_log'0 x z = o)

  function refl'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 123 4 123 20] (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'1_spec : forall x : TrailIndex'0.t_trailindex . [%#span19] cmp_log'0 x x = Ordering'0.C_Equal

  function gt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span20] cmp_log'0 self o = Ordering'0.C_Greater

  function cmp_gt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 118 4 118 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_gt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span21] gt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Greater)

  function ge_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span22] cmp_log'0 self o <> Ordering'0.C_Less

  function cmp_ge_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 113 4 113 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_ge_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span23] ge_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Less)

  function lt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span24] cmp_log'0 self o = Ordering'0.C_Less

  function cmp_lt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 108 4 108 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_lt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span25] lt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Less)

  function le_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span26] cmp_log'0 self o <> Ordering'0.C_Greater

  function cmp_le_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 103 4 103 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_le_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span27] le_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Greater)

  use seq.Seq

  predicate sorted_range'0 (self : Seq.seq (TrailIndex'0.t_trailindex)) (l : int) (u : int) =
    [%#span28] forall j : int . forall i : int . l <= i /\ i <= j /\ j < u
     -> le_log'0 (Seq.get self i) (Seq.get self j)

  predicate sorted'0 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span29] sorted_range'0 self 0 (Seq.length self)

  predicate seq_unique'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 828 0 828 46] (s : Seq.seq (TrailIndex'0.t_trailindex))

   =
    [%#span30] forall j : int . forall i : int . 0 <= i /\ i <= j /\ j < Seq.length s
     -> i <> j  -> Seq.get s i <> Seq.get s j

  use Cdsat_Heap_ConflictHeap_Type as Cdsat_Heap_ConflictHeap_Type

  use Cdsat_Heap_ConflictHeap_Type as ConflictHeap'0

  predicate invariant'3 [#"/Users/xavier/Code/cdsat/src/heap.rs" 12 4 12 30] (self : ConflictHeap'0.t_conflictheap) =
    [%#span31] seq_unique'0 (shallow_model'2 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self))
    /\ sorted'0 (shallow_model'2 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self))

  predicate inv'3 (_x : ConflictHeap'0.t_conflictheap)

  axiom inv'3 : forall x : ConflictHeap'0.t_conflictheap . inv'3 x
  = (invariant'3 x
  /\ match x with
    | ConflictHeap'0.C_ConflictHeap a_0 -> true
    end)

  use Core_Option_Option_Type as Option'0

  predicate invariant'2 (self : Option'0.t_option (TrailIndex'0.t_trailindex)) =
    [%#span3] true

  predicate inv'2 (_x : Option'0.t_option (TrailIndex'0.t_trailindex))

  axiom inv'2 : forall x : Option'0.t_option (TrailIndex'0.t_trailindex) . inv'2 x = true

  use prelude.prelude.Borrow

  predicate invariant'1 (self : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) =
    [%#span3] true

  predicate inv'1 (_x : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)))

  axiom inv'1 : forall x : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) . inv'1 x = true

  function eq_cmp'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom eq_cmp'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span32] inv'6 x)
   -> ([%#span33] inv'6 y)  -> ([%#span34] (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal))

  function antisym2'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym2'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span35] cmp_log'0 x y
  = Ordering'0.C_Greater)
   -> ([%#span36] inv'6 x)  -> ([%#span37] inv'6 y)  -> ([%#span38] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym1'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span39] cmp_log'0 x y
  = Ordering'0.C_Less)
   -> ([%#span40] inv'6 x)  -> ([%#span41] inv'6 y)  -> ([%#span42] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span43] cmp_log'0 x y
  = o)
   -> ([%#span44] cmp_log'0 y z = o)
   -> ([%#span45] inv'6 x)  -> ([%#span46] inv'6 y)  -> ([%#span47] inv'6 z)  -> ([%#span48] cmp_log'0 x z = o)

  function refl'0 (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'0_spec : forall x : TrailIndex'0.t_trailindex . ([%#span49] inv'6 x)
   -> ([%#span50] cmp_log'0 x x = Ordering'0.C_Equal)

  function cmp_gt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_gt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span51] inv'6 x)
   -> ([%#span52] inv'6 y)  -> ([%#span53] gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater))

  function cmp_ge_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_ge_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span54] inv'6 x)
   -> ([%#span55] inv'6 y)  -> ([%#span56] ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less))

  function cmp_lt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_lt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span57] inv'6 x)
   -> ([%#span58] inv'6 y)  -> ([%#span59] lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less))

  function cmp_le_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_le_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span60] inv'6 x)
   -> ([%#span61] inv'6 y)  -> ([%#span62] le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater))

  predicate invariant'0 (self : borrowed (ConflictHeap'0.t_conflictheap)) =
    [%#span3] true

  predicate inv'0 (_x : borrowed (ConflictHeap'0.t_conflictheap))

  axiom inv'0 : forall x : borrowed (ConflictHeap'0.t_conflictheap) . inv'0 x = (inv'3 x.current /\ inv'3 x.final)

  use set.Fset

  predicate contains'0 [@inline:trivial] (self : Fset.fset (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex)
   =
    [%#span63] Fset.mem e self

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (TrailIndex'0.t_trailindex)) (a : TrailIndex'0.t_trailindex) : Fset.fset (TrailIndex'0.t_trailindex)

   =
    [%#span64] Fset.remove a self

  use set.Fset

  function insert'0 [@inline:trivial] (self : Fset.fset (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) : Fset.fset (TrailIndex'0.t_trailindex)

   =
    [%#span65] Fset.add e self

  use prelude.seq_ext.SeqExt

  use set.Fset

  use seq.Seq

  predicate contains'1 (self : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) =
    [%#span66] exists i : int . 0 <= i /\ i < Seq.length self /\ Seq.get self i = e

  function to_set'0 [#"/Users/xavier/Code/cdsat/src/heap.rs" 96 0 96 35] (s : Seq.seq (TrailIndex'0.t_trailindex)) : Fset.fset (TrailIndex'0.t_trailindex)


  axiom to_set'0_def : forall s : Seq.seq (TrailIndex'0.t_trailindex) . to_set'0 s
  = ([%#span71] if s = (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) then
    Fset.empty  : Fset.fset (TrailIndex'0.t_trailindex)
  else
    insert'0 (to_set'0 (SeqExt.subsequence s 1 (Seq.length s))) (Seq.get s 0)
  )

  axiom to_set'0_spec : forall s : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span67] inv'5 s)
   -> ([%#span69] inv'7 (to_set'0 s))
  && ([%#span68] forall x : TrailIndex'0.t_trailindex . inv'6 x  -> contains'1 s x = contains'0 (to_set'0 s) x)

  function shallow_model'1 [#"/Users/xavier/Code/cdsat/src/heap.rs" 88 4 88 50] (self : ConflictHeap'0.t_conflictheap) : Fset.fset (TrailIndex'0.t_trailindex)

   =
    [%#span74] to_set'0 (shallow_model'2 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self))

  axiom shallow_model'1_spec : forall self : ConflictHeap'0.t_conflictheap . ([%#span72] inv'3 self)
   -> ([%#span73] forall x : TrailIndex'0.t_trailindex . contains'1 (shallow_model'2 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self)) x
  = contains'0 (shallow_model'1 self) x)

  function shallow_model'0 (self : borrowed (ConflictHeap'0.t_conflictheap)) : Fset.fset (TrailIndex'0.t_trailindex) =
    [%#span75] shallow_model'1 self.current

  use prelude.prelude.Intrinsic

  predicate resolve'0 (self : borrowed (ConflictHeap'0.t_conflictheap)) =
    [%#span76] self.final = self.current

  use seq.Seq

  function shallow_model'3 (self : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) : Seq.seq (TrailIndex'0.t_trailindex)

   =
    [%#span75] shallow_model'2 self.current

  let rec pop'0 (self:borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) (return'  (ret:Option'0.t_option (TrailIndex'0.t_trailindex)))= {[@expl:precondition] [%#span77] inv'1 self}
    any
    [ return' (result:Option'0.t_option (TrailIndex'0.t_trailindex))-> {[%#span79] inv'2 result}
      {[%#span78] match result with
        | Option'0.C_Some t -> shallow_model'2 self.final
        = SeqExt.subsequence (shallow_model'3 self) 0 (Seq.length (shallow_model'3 self) - 1)
        /\ shallow_model'3 self = Seq.snoc (shallow_model'2 self.final) t
        | Option'0.C_None -> self.current = self.final /\ Seq.length (shallow_model'3 self) = 0
        end}
      (! return' {result}) ]


  let rec pop_last (self:borrowed (ConflictHeap'0.t_conflictheap)) (return'  (ret:Option'0.t_option (TrailIndex'0.t_trailindex)))= {[%#sheap0] inv'0 self}
    (! bb0
    [ bb0 = s0
      [ s0 = ConflictHeap'0.t_conflictheap {self.current}
          (fun (r0'0:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->
            Borrow.borrow_final
              <Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)>
              {r0'0}
              {Borrow.inherit_id (Borrow.get_id self) 1}
              (fun (_ret':borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) ->
                 [ &_4 <- _ret' ]
                ConflictHeap'0.t_conflictheap {self.current}
                  (fun (l_0'0:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->
                     [ &self <- { self with current = ConflictHeap'0.C_ConflictHeap _4.final ; } ]
                    s1)))
      | s1 = pop'0 {_4} (fun (_ret':Option'0.t_option (TrailIndex'0.t_trailindex)) ->  [ &_0 <- _ret' ] s2)
      | s2 = bb1 ]

    | bb1 = s0 [ s0 = {[@expl:type invariant] inv'0 self} s1 | s1 = -{resolve'0 self}- s2 | s2 = return' {_0} ]  ]
    )
    [ & _0 : Option'0.t_option (TrailIndex'0.t_trailindex) = any_l ()
    | & self : borrowed (ConflictHeap'0.t_conflictheap) = self
    | & _4 : borrowed (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) = any_l () ]

    [ return' (result:Option'0.t_option (TrailIndex'0.t_trailindex))-> {[@expl:postcondition] [%#sheap2] forall a : TrailIndex'0.t_trailindex . result
      = Option'0.C_Some a
       -> shallow_model'1 self.final = remove'0 (shallow_model'0 self) a
      /\ contains'0 (shallow_model'0 self) a
      /\ (forall other : TrailIndex'0.t_trailindex . contains'0 (shallow_model'1 self.final) other
       -> le_log'0 other a)}
      {[@expl:postcondition] [%#sheap1] (shallow_model'0 self = (Fset.empty  : Fset.fset (TrailIndex'0.t_trailindex)))
      = (result = Option'0.C_None)}
      (! return' {result}) ]

end
module Cdsat_Trail_Impl17_Clone
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 48 9 48 14

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span2 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span4 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span5 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span6 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span7 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2836 14 2836 18

  let%span span8 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/clone.rs" 7 0 20 1

  let%span span9 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2836 4 2836 27

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use seq.Seq

  predicate invariant'2 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span1] true

  predicate inv'2 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'2 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'2 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  constant max'0 : usize = [%#span2] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'1 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function shallow_model'0 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom shallow_model'0_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span3] inv'1 self)
   -> ([%#span5] inv'2 (shallow_model'0 self))
  && ([%#span4] Seq.length (shallow_model'0 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'1 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span6] inv'2 (shallow_model'0 self)

  axiom inv'1 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'1 x = true

  predicate invariant'0 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span1] true

  predicate inv'0 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  axiom inv'0 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'0 x = true

  use prelude.prelude.Borrow

  use prelude.prelude.Intrinsic

  let rec clone'0 (self:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) (return'  (ret:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)))= {[@expl:precondition] [%#span7] inv'0 self}
    any
    [ return' (result:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> {[%#span9] inv'1 result}
      {[%#span8] result = self}
      (! return' {result}) ]


  use Cdsat_Trail_Reason_Type as Reason'0

  let rec clone' (self:Reason'0.t_reason) (return'  (ret:Reason'0.t_reason))= (! bb0
    [ bb0 = any
      [ br0 (a:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> {self = Reason'0.C_Justified a} (! bb2)
      | br1 -> {self = Reason'0.C_Decision } (! bb3)
      | br2 -> {self = Reason'0.C_Input } (! bb4) ]

    | bb1 = {[%#strail0] false} any
    | bb4 = s0 [ s0 =  [ &_0 <- Reason'0.C_Input ] s1 | s1 = bb9 ]
    | bb3 = bb8
    | bb8 = s0 [ s0 =  [ &_0 <- Reason'0.C_Decision ] s1 | s1 = bb9 ]
    | bb2 = bb5
    | bb5 = s0
      [ s0 = Reason'0.justified {self}
          (fun (r0'0:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->  [ &v0_1 <- r0'0 ] s1)
      | s1 =  [ &_7 <- v0_1 ] s2
      | s2 = clone'0 {_7}
          (fun (_ret':Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->  [ &_5 <- _ret' ] s3)
      | s3 = bb6 ]

    | bb6 = s0
      [ s0 =  [ &_0 <- Reason'0.C_Justified _5 ]
        (any [ any_ (_any:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> (!  [ &_5 <- _any ] s1) ] )
      | s1 = bb7 ]

    | bb7 = bb9
    | bb9 = return' {_0} ]
    )
    [ & _0 : Reason'0.t_reason = any_l ()
    | & self : Reason'0.t_reason = self
    | & v0_1 : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) = any_l ()
    | & _5 : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) = any_l ()
    | & _7 : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) = any_l () ]
     [ return' (result:Reason'0.t_reason)-> {[@expl:postcondition] [%#strail0] result = self} (! return' {result}) ]
end
module Cdsat_Trail_Impl13_Clone
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 16 9 16 14

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/clone.rs" 7 0 20 1

  let%span span2 = "/Users/xavier/Code/cdsat/src/trail.rs" 48 9 48 14

  let%span span3 = "/Users/xavier/Code/cdsat/src/term.rs" 230 9 230 14

  let%span span4 = "/Users/xavier/Code/cdsat/src/term.rs" 33 9 33 14

  use prelude.prelude.Borrow

  use prelude.prelude.Intrinsic

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  let rec clone'3 (self:usize) (return'  (ret:usize))= any
    [ return' (result:usize)-> {[%#span1] result = self} (! return' {result}) ]


  use Cdsat_Trail_Reason_Type as Reason'0

  let rec clone'2 (self:Reason'0.t_reason) (return'  (ret:Reason'0.t_reason))= any
    [ return' (result:Reason'0.t_reason)-> {[%#span2] result = self} (! return' {result}) ]


  use Cdsat_Term_Value_Type as Value'0

  let rec clone'1 (self:Value'0.t_value) (return'  (ret:Value'0.t_value))= any
    [ return' (result:Value'0.t_value)-> {[%#span3] result = self} (! return' {result}) ]


  use Cdsat_Term_Term_Type as Term'0

  let rec clone'0 (self:Term'0.t_term) (return'  (ret:Term'0.t_term))= any
    [ return' (result:Term'0.t_term)-> {[%#span4] result = self} (! return' {result}) ]


  use Cdsat_Trail_Assignment_Type as Assignment'0

  let rec clone' (self:Assignment'0.t_assignment) (return'  (ret:Assignment'0.t_assignment))= (! bb0
    [ bb0 = s0
      [ s0 = Assignment'0.t_assignment {self}
          (fun (rterm'0:Term'0.t_term) (rval'0:Value'0.t_value) (rreason'0:Reason'0.t_reason) (rlevel'0:usize) ->
             [ &_5 <- rterm'0 ]
            s1)
      | s1 = clone'0 {_5} (fun (_ret':Term'0.t_term) ->  [ &_3 <- _ret' ] s2)
      | s2 = bb1 ]

    | bb1 = s0
      [ s0 = Assignment'0.t_assignment {self}
          (fun (rterm'0:Term'0.t_term) (rval'0:Value'0.t_value) (rreason'0:Reason'0.t_reason) (rlevel'0:usize) ->
             [ &_8 <- rval'0 ]
            s1)
      | s1 = clone'1 {_8} (fun (_ret':Value'0.t_value) ->  [ &_6 <- _ret' ] s2)
      | s2 = bb2 ]

    | bb2 = s0
      [ s0 = Assignment'0.t_assignment {self}
          (fun (rterm'0:Term'0.t_term) (rval'0:Value'0.t_value) (rreason'0:Reason'0.t_reason) (rlevel'0:usize) ->
             [ &_11 <- rreason'0 ]
            s1)
      | s1 = clone'2 {_11} (fun (_ret':Reason'0.t_reason) ->  [ &_9 <- _ret' ] s2)
      | s2 = bb3 ]

    | bb3 = s0
      [ s0 = Assignment'0.t_assignment {self}
          (fun (rterm'0:Term'0.t_term) (rval'0:Value'0.t_value) (rreason'0:Reason'0.t_reason) (rlevel'0:usize) ->
             [ &_14 <- rlevel'0 ]
            s1)
      | s1 = clone'3 {_14} (fun (_ret':usize) ->  [ &_12 <- _ret' ] s2)
      | s2 = bb4 ]

    | bb4 = s0
      [ s0 =  [ &_0 <- Assignment'0.C_Assignment _3 _6 _9 _12 ]
        (any
        [ any_ (_any:Term'0.t_term)-> (!  [ &_3 <- _any ]
          (any
          [ any_ (_any:Value'0.t_value)-> (!  [ &_6 <- _any ]
            (any
            [ any_ (_any:Reason'0.t_reason)-> (!  [ &_9 <- _any ]
              (any [ any_ (_any:usize)-> (!  [ &_12 <- _any ] s1) ] )) ]
            )) ]
          )) ]
        )
      | s1 = bb5 ]

    | bb5 = bb6
    | bb6 = bb7
    | bb7 = return' {_0} ]
    )
    [ & _0 : Assignment'0.t_assignment = any_l ()
    | & self : Assignment'0.t_assignment = self
    | & _3 : Term'0.t_term = any_l ()
    | & _5 : Term'0.t_term = any_l ()
    | & _6 : Value'0.t_value = any_l ()
    | & _8 : Value'0.t_value = any_l ()
    | & _9 : Reason'0.t_reason = any_l ()
    | & _11 : Reason'0.t_reason = any_l ()
    | & _12 : usize = any_l ()
    | & _14 : usize = any_l () ]

    [ return' (result:Assignment'0.t_assignment)-> {[@expl:postcondition] [%#strail0] result = self}
      (! return' {result}) ]

end
module Cdsat_Term_Impl8_IsBool
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 300 14 300 18

  let%span sterm1 = "/Users/xavier/Code/cdsat/src/term.rs" 302 29 302 34

  let%span sterm2 = "/Users/xavier/Code/cdsat/src/term.rs" 301 30 301 34

  let%span sterm3 = "/Users/xavier/Code/cdsat/src/term.rs" 298 14 298 41

  let%span span4 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span5 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span6 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span7 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span8 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 90 8 90 31

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'1

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'1.t_value) : Sort'0.t_sort =
    [%#span4] match self with
      | Value'1.C_Bool _ -> Sort'0.C_Boolean
      | Value'1.C_Rat _ -> Sort'0.C_Rational
      end

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'1.t_value) =
    [%#span5] sort'0 self = Sort'0.C_Boolean

  use prelude.prelude.Real

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  function deep_model'1 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  use Cdsat_Term_Value_Type as Value'0

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span6] match self with
      | Value'0.C_Bool b -> Value'1.C_Bool b
      | Value'0.C_Rat br -> Value'1.C_Rat (deep_model'1 br)
      end

  function shallow_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span7] deep_model'0 self

  use prelude.prelude.Borrow

  function shallow_model'0 (self : Value'0.t_value) : Value'1.t_value =
    [%#span8] shallow_model'1 self

  use prelude.prelude.Intrinsic

  let rec is_bool (self:Value'0.t_value) (return'  (ret:bool))= (! bb0
    [ bb0 = any
      [ br0 (a:bool)-> {self = Value'0.C_Bool a} (! bb2)
      | br1 (a:Ratio'0.t_ratio (BigInt'0.t_bigint))-> {self = Value'0.C_Rat a} (! bb3) ]

    | bb1 = {[%#sterm0] false} any
    | bb3 = s0 [ s0 =  [ &_0 <- [%#sterm1] false ] s1 | s1 = bb5 ]
    | bb2 = bb4
    | bb4 = s0 [ s0 =  [ &_0 <- [%#sterm2] true ] s1 | s1 = bb5 ]
    | bb5 = return' {_0} ]
    ) [ & _0 : bool = any_l () | & self : Value'0.t_value = self ]
    [ return' (result:bool)-> {[@expl:postcondition] [%#sterm3] result = is_bool'0 (shallow_model'0 self)}
      (! return' {result}) ]

end
module Cdsat_Trail_Impl12_IsBool
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 734 14 734 45

  let%span span1 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span2 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span3 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span4 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span5 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 90 8 90 31

  let%span span6 = "/Users/xavier/Code/cdsat/src/term.rs" 298 14 298 41

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'1

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'1.t_value) : Sort'0.t_sort =
    [%#span1] match self with
      | Value'1.C_Bool _ -> Sort'0.C_Boolean
      | Value'1.C_Rat _ -> Sort'0.C_Rational
      end

  predicate is_bool'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'1.t_value) =
    [%#span2] sort'0 self = Sort'0.C_Boolean

  use prelude.prelude.Real

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  function deep_model'1 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  use Cdsat_Term_Value_Type as Value'0

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span3] match self with
      | Value'0.C_Bool b -> Value'1.C_Bool b
      | Value'0.C_Rat br -> Value'1.C_Rat (deep_model'1 br)
      end

  function shallow_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span4] deep_model'0 self

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  use prelude.prelude.Borrow

  use prelude.prelude.Intrinsic

  function shallow_model'1 (self : Value'0.t_value) : Value'1.t_value =
    [%#span5] shallow_model'0 self

  let rec is_bool'0 (self:Value'0.t_value) (return'  (ret:bool))= any
    [ return' (result:bool)-> {[%#span6] result = is_bool'1 (shallow_model'1 self)} (! return' {result}) ]


  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  use Cdsat_Trail_Reason_Type as Reason'0

  use Cdsat_Term_Term_Type as Term'0

  use Cdsat_Trail_Assignment_Type as Assignment'0

  let rec is_bool (self:Assignment'0.t_assignment) (return'  (ret:bool))= (! bb0
    [ bb0 = s0
      [ s0 = Assignment'0.t_assignment {self}
          (fun (rterm'0:Term'0.t_term) (rval'0:Value'0.t_value) (rreason'0:Reason'0.t_reason) (rlevel'0:usize) ->
            is_bool'0 {rval'0} (fun (_ret':bool) ->  [ &_0 <- _ret' ] s1))
      | s1 = bb1 ]

    | bb1 = return' {_0} ]
    ) [ & _0 : bool = any_l () | & self : Assignment'0.t_assignment = self ]
    [ return' (result:bool)-> {[@expl:postcondition] [%#strail0] result
      = is_bool'1 (shallow_model'0 (Cdsat_Trail_Assignment_Type.assignment_val self))}
      (! return' {result}) ]

end
module Cdsat_Trail_Impl12_IsFirstOrder
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 745 14 745 45

  let%span span1 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span2 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span3 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span4 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span5 = "/Users/xavier/Code/cdsat/src/trail.rs" 734 14 734 45

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'1

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'1.t_value) : Sort'0.t_sort =
    [%#span1] match self with
      | Value'1.C_Bool _ -> Sort'0.C_Boolean
      | Value'1.C_Rat _ -> Sort'0.C_Rational
      end

  predicate is_bool'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'1.t_value) =
    [%#span2] sort'0 self = Sort'0.C_Boolean

  use prelude.prelude.Real

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  function deep_model'1 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  use Cdsat_Term_Value_Type as Value'0

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span3] match self with
      | Value'0.C_Bool b -> Value'1.C_Bool b
      | Value'0.C_Rat br -> Value'1.C_Rat (deep_model'1 br)
      end

  function shallow_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span4] deep_model'0 self

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  use Cdsat_Trail_Assignment_Type as Assignment'0

  use prelude.prelude.Borrow

  use prelude.prelude.Intrinsic

  let rec is_bool'0 (self:Assignment'0.t_assignment) (return'  (ret:bool))= any
    [ return' (result:bool)-> {[%#span5] result
      = is_bool'1 (shallow_model'0 (Cdsat_Trail_Assignment_Type.assignment_val self))}
      (! return' {result}) ]


  let rec is_first_order (self:Assignment'0.t_assignment) (return'  (ret:bool))= (! bb0
    [ bb0 = s0 [ s0 = is_bool'0 {self} (fun (_ret':bool) ->  [ &_3 <- _ret' ] s1) | s1 = bb1 ]
    | bb1 = s0 [ s0 =  [ &_0 <- not _3 ] (any [ any_ (_any:bool)-> (!  [ &_3 <- _any ] s1) ] ) | s1 = return' {_0} ]  ]
    ) [ & _0 : bool = any_l () | & self : Assignment'0.t_assignment = self | & _3 : bool = any_l () ]
    [ return' (result:bool)-> {[@expl:postcondition] [%#strail0] result
      <> is_bool'1 (shallow_model'0 (Cdsat_Trail_Assignment_Type.assignment_val self))}
      (! return' {result}) ]

end
module Cdsat_Trail_ReasonDeepModel_Type
  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use seq.Seq

  type t_reasondeepmodel  =
    | C_Justified (Seq.seq (TrailIndex'0.t_trailindex))
    | C_Decision
    | C_Input

  function any_l (_ : 'b) : 'a

  let rec justified (input:t_reasondeepmodel) (ret  (field_0:Seq.seq (TrailIndex'0.t_trailindex)))= any
    [ good (field_0:Seq.seq (TrailIndex'0.t_trailindex))-> {C_Justified field_0 = input} (! ret {field_0})
    | bad (field_0:Seq.seq (TrailIndex'0.t_trailindex))-> {C_Justified field_0 <> input} {false} any ]


  let rec decision (input:t_reasondeepmodel) (ret  )= any
    [ good -> {C_Decision  = input} (! ret) | bad -> {C_Decision  <> input} {false} any ]


  let rec input (input:t_reasondeepmodel) (ret  )= any
    [ good -> {C_Input  = input} (! ret) | bad -> {C_Input  <> input} {false} any ]

end
module Cdsat_Trail_Impl18_Eq
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 48 16 48 25

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span2 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span4 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span5 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span6 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span7 = "/Users/xavier/Code/cdsat/src/trail.rs" 168 8 168 12

  let%span span8 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 20 8 20 31

  let%span span9 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 33 18 33 22

  let%span span10 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 30 14 30 56

  let%span span11 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 31 4 32 53

  let%span span12 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 33 4 33 44

  let%span span13 = "/Users/xavier/Code/cdsat/src/trail.rs" 48 31 48 40

  let%span span14 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 81 8 81 28

  let%span span15 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/partial_eq.rs" 16 19 16 23

  let%span span16 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/partial_eq.rs" 16 25 16 30

  let%span span17 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/cmp.rs" 11 26 11 75

  let%span span18 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 46 8 46 12

  let%span span19 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 17 8 17 60

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use seq.Seq

  predicate invariant'2 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span1] true

  predicate inv'2 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'2 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'2 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  constant max'0 : usize = [%#span2] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'1 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function shallow_model'0 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom shallow_model'0_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span3] inv'1 self)
   -> ([%#span5] inv'2 (shallow_model'0 self))
  && ([%#span4] Seq.length (shallow_model'0 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'1 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span6] inv'2 (shallow_model'0 self)

  axiom inv'1 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'1 x = true

  predicate invariant'0 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span1] true

  predicate inv'0 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  axiom inv'0 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'0 x = true

  function deep_model'4 [#"/Users/xavier/Code/cdsat/src/trail.rs" 167 4 167 44] (self : TrailIndex'0.t_trailindex) : TrailIndex'0.t_trailindex

   =
    [%#span7] self

  use seq.Seq

  function index_logic'0 [@inline:trivial] (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) (ix : int) : TrailIndex'0.t_trailindex

   =
    [%#span8] Seq.get (shallow_model'0 self) ix

  function deep_model'3 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom deep_model'3_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span9] inv'1 self)
   -> ([%#span12] inv'2 (deep_model'3 self))
  && ([%#span11] forall i : int . 0 <= i /\ i < Seq.length (shallow_model'0 self)
   -> Seq.get (deep_model'3 self) i = deep_model'4 (index_logic'0 self i))
  && ([%#span10] Seq.length (shallow_model'0 self) = Seq.length (deep_model'3 self))

  use Cdsat_Trail_ReasonDeepModel_Type as ReasonDeepModel'0

  use Cdsat_Trail_Reason_Type as Reason'0

  function deep_model'2 [#"/Users/xavier/Code/cdsat/src/trail.rs" 48 31 48 40] (self : Reason'0.t_reason) : ReasonDeepModel'0.t_reasondeepmodel

   =
    [%#span13] match self with
      | Reason'0.C_Justified v0_1 -> ReasonDeepModel'0.C_Justified (deep_model'3 v0_1)
      | Reason'0.C_Decision -> ReasonDeepModel'0.C_Decision
      | Reason'0.C_Input -> ReasonDeepModel'0.C_Input
      end

  use prelude.prelude.Borrow

  function deep_model'0 (self : Reason'0.t_reason) : ReasonDeepModel'0.t_reasondeepmodel =
    [%#span14] deep_model'2 self

  use prelude.prelude.Intrinsic

  function deep_model'1 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)

   =
    [%#span14] deep_model'3 self

  let rec eq'0 (self:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) (other:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) (return'  (ret:bool))= {[@expl:precondition] [%#span16] inv'0 other}
    {[@expl:precondition] [%#span15] inv'0 self}
    any [ return' (result:bool)-> {[%#span17] result = (deep_model'1 self = deep_model'1 other)} (! return' {result}) ]

  predicate resolve'1 (self : Reason'0.t_reason) =
    [%#span18] true

  predicate resolve'0 (self : (Reason'0.t_reason, Reason'0.t_reason)) =
    [%#span19] resolve'1 (let (a, _) = self in a) /\ resolve'1 (let (_, a) = self in a)

  let rec eq (self:Reason'0.t_reason) (rhs:Reason'0.t_reason) (return'  (ret:bool))= (! bb0
    [ bb0 = s0
      [ s0 =  [ &_4 <- (self, rhs) ] s1
      | s1 = any
        [ br0 (a:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> {(let (r'0, _) = _4 in r'0)
          = Reason'0.C_Justified a}
          (! bb2)
        | br1 -> {(let (r'0, _) = _4 in r'0) = Reason'0.C_Decision } (! bb4)
        | br2 -> {(let (r'0, _) = _4 in r'0) = Reason'0.C_Input } (! bb6) ]
         ]

    | bb17 = s0 [ s0 = -{resolve'0 _4}- s1 | s1 = bb1 ]
    | bb6 = s0
      [ s0 = -{resolve'0 _4}- s1
      | s1 = any
        [ br0 (a:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> {(let (_, r'0) = _4 in r'0)
          = Reason'0.C_Justified a}
          (! bb1)
        | br1 -> {(let (_, r'0) = _4 in r'0) = Reason'0.C_Decision } (! bb1)
        | br2 -> {(let (_, r'0) = _4 in r'0) = Reason'0.C_Input } (! bb7) ]
         ]

    | bb7 = bb14
    | bb14 = s0 [ s0 =  [ &_0 <- [%#strail0] true ] s1 | s1 = bb15 ]
    | bb4 = any
      [ br0 (a:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> {(let (_, r'0) = _4 in r'0)
        = Reason'0.C_Justified a}
        (! bb19)
      | br1 -> {(let (_, r'0) = _4 in r'0) = Reason'0.C_Decision } (! bb5)
      | br2 -> {(let (_, r'0) = _4 in r'0) = Reason'0.C_Input } (! bb19) ]

    | bb19 = s0 [ s0 = -{resolve'0 _4}- s1 | s1 = bb1 ]
    | bb5 = bb13
    | bb13 = s0 [ s0 = -{resolve'0 _4}- s1 | s1 =  [ &_0 <- [%#strail0] true ] s2 | s2 = bb15 ]
    | bb2 = any
      [ br0 (a:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> {(let (_, r'0) = _4 in r'0)
        = Reason'0.C_Justified a}
        (! bb3)
      | br1 -> {(let (_, r'0) = _4 in r'0) = Reason'0.C_Decision } (! bb18)
      | br2 -> {(let (_, r'0) = _4 in r'0) = Reason'0.C_Input } (! bb18) ]

    | bb18 = s0 [ s0 = -{resolve'0 _4}- s1 | s1 = bb1 ]
    | bb1 = s0 [ s0 =  [ &_0 <- [%#strail0] false ] s1 | s1 = bb15 ]
    | bb3 = bb8
    | bb8 = s0
      [ s0 = Reason'0.justified {let (r'0, _) = _4 in r'0}
          (fun (r0'0:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->  [ &v0_1 <- r0'0 ] s1)
      | s1 = Reason'0.justified {let (_, r'1) = _4 in r'1}
          (fun (r0'1:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->  [ &v0_2 <- r0'1 ] s2)
      | s2 = -{resolve'0 _4}- s3
      | s3 = eq'0 {v0_1} {v0_2} (fun (_ret':bool) ->  [ &_13 <- _ret' ] s4)
      | s4 = bb9 ]

    | bb9 = any [ br0 -> {_13 = false} (! bb11) | br1 -> {_13} (! bb10) ]
    | bb10 = s0 [ s0 =  [ &_0 <- [%#strail0] true ] s1 | s1 = bb12 ]
    | bb11 = s0 [ s0 =  [ &_0 <- [%#strail0] false ] s1 | s1 = bb12 ]
    | bb12 = bb15
    | bb15 = return' {_0} ]
    )
    [ & _0 : bool = any_l ()
    | & self : Reason'0.t_reason = self
    | & rhs : Reason'0.t_reason = rhs
    | & _4 : (Reason'0.t_reason, Reason'0.t_reason) = any_l ()
    | & v0_1 : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) = any_l ()
    | & v0_2 : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) = any_l ()
    | & _13 : bool = any_l () ]

    [ return' (result:bool)-> {[@expl:postcondition] [%#strail0] result = (deep_model'0 self = deep_model'0 rhs)}
      (! return' {result}) ]

end
module Cdsat_Trail_Impl12_IsDecision
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 755 14 755 57

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span2 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span4 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span5 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span6 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span7 = "/Users/xavier/Code/cdsat/src/trail.rs" 168 8 168 12

  let%span span8 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 20 8 20 31

  let%span span9 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 33 18 33 22

  let%span span10 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 30 14 30 56

  let%span span11 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 31 4 32 53

  let%span span12 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 33 4 33 44

  let%span span13 = "/Users/xavier/Code/cdsat/src/trail.rs" 48 31 48 40

  let%span span14 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 81 8 81 28

  let%span span15 = "/Users/xavier/Code/cdsat/src/trail.rs" 48 16 48 25

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use seq.Seq

  predicate invariant'1 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span1] true

  predicate inv'1 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'1 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'1 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  constant max'0 : usize = [%#span2] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'0 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function shallow_model'0 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom shallow_model'0_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span3] inv'0 self)
   -> ([%#span5] inv'1 (shallow_model'0 self))
  && ([%#span4] Seq.length (shallow_model'0 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'0 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span6] inv'1 (shallow_model'0 self)

  axiom inv'0 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'0 x = true

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  use prelude.prelude.Intrinsic

  use Cdsat_Trail_ReasonDeepModel_Type as ReasonDeepModel'0

  use Cdsat_Trail_Reason_Type as Reason'0

  use prelude.prelude.Borrow

  function deep_model'3 [#"/Users/xavier/Code/cdsat/src/trail.rs" 167 4 167 44] (self : TrailIndex'0.t_trailindex) : TrailIndex'0.t_trailindex

   =
    [%#span7] self

  use seq.Seq

  function index_logic'0 [@inline:trivial] (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) (ix : int) : TrailIndex'0.t_trailindex

   =
    [%#span8] Seq.get (shallow_model'0 self) ix

  function deep_model'2 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom deep_model'2_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span9] inv'0 self)
   -> ([%#span12] inv'1 (deep_model'2 self))
  && ([%#span11] forall i : int . 0 <= i /\ i < Seq.length (shallow_model'0 self)
   -> Seq.get (deep_model'2 self) i = deep_model'3 (index_logic'0 self i))
  && ([%#span10] Seq.length (shallow_model'0 self) = Seq.length (deep_model'2 self))

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 48 31 48 40] (self : Reason'0.t_reason) : ReasonDeepModel'0.t_reasondeepmodel

   =
    [%#span13] match self with
      | Reason'0.C_Justified v0_1 -> ReasonDeepModel'0.C_Justified (deep_model'2 v0_1)
      | Reason'0.C_Decision -> ReasonDeepModel'0.C_Decision
      | Reason'0.C_Input -> ReasonDeepModel'0.C_Input
      end

  function deep_model'0 (self : Reason'0.t_reason) : ReasonDeepModel'0.t_reasondeepmodel =
    [%#span14] deep_model'1 self

  let rec eq'0 (self:Reason'0.t_reason) (rhs:Reason'0.t_reason) (return'  (ret:bool))= any
    [ return' (result:bool)-> {[%#span15] result = (deep_model'0 self = deep_model'0 rhs)} (! return' {result}) ]


  use Cdsat_Term_Value_Type as Value'0

  use Cdsat_Term_Term_Type as Term'0

  use Cdsat_Trail_Assignment_Type as Assignment'0

  let rec promoted0 (return'  (ret:Reason'0.t_reason))= bb0
    [ bb0 = s0 [ s0 =  [ &_1 <- Reason'0.C_Decision ] s1 | s1 =  [ &_0 <- _1 ] s2 | s2 = return' {_0} ]  ]
     [ & _0 : Reason'0.t_reason = any_l () | & _1 : Reason'0.t_reason = any_l () ]
    [ return' (result:Reason'0.t_reason)-> return' {result} ]


  let rec is_decision (self:Assignment'0.t_assignment) (return'  (ret:bool))= (! bb0
    [ bb0 = s0
      [ s0 = promoted0 (fun (pr0:Reason'0.t_reason) ->  [ &_6 <- pr0 ] s1)
      | s1 = Assignment'0.t_assignment {self}
          (fun (rterm'0:Term'0.t_term) (rval'0:Value'0.t_value) (rreason'0:Reason'0.t_reason) (rlevel'0:usize) ->
            eq'0 {rreason'0} {_6} (fun (_ret':bool) ->  [ &_0 <- _ret' ] s2))
      | s2 = bb1 ]

    | bb1 = return' {_0} ]
    ) [ & _0 : bool = any_l () | & self : Assignment'0.t_assignment = self | & _6 : Reason'0.t_reason = any_l () ]
    [ return' (result:bool)-> {[@expl:postcondition] [%#strail0] result
      = (Cdsat_Trail_Assignment_Type.assignment_reason self = Reason'0.C_Decision)}
      (! return' {result}) ]

end
module Cdsat_Theory_Impl5_IsInputInv_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 530 15 530 31

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 531 15 531 31

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 532 14 532 35

  let%span span3 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span4 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span5 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span6 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span7 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span8 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span9 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span10 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span11 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span12 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span13 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span14 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span15 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span16 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span17 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span20 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span21 = "/Users/xavier/Code/cdsat/src/theory.rs" 522 8 525 9

  let%span span22 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span23 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span24 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span25 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span26 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span28 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span29 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span30 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span31 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span32 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span33 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span34 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span35 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span36 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span37 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span38 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span39 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  let%span span40 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span41 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  use Cdsat_Theory_Assign_Type as Assign'0

  use Cdsat_Theory_Value_Type as Value'0

  use Cdsat_Theory_Term_Type as Term'0

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span3] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Cdsat_Theory_Trail_Type as Trail'0

  use prelude.prelude.Int

  use Cdsat_Theory_Sort_Type as Sort'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span4] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span5] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span6] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span7] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'1 a
      end

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span9] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span8] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span12] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span11] level'0 self <= len'0 self)
  && ([%#span10] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span13] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span17] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span16] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span15] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span14] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span20] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span18] invariant_nonneg'0 self)
   -> ([%#span19] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  predicate is_input'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 521 4 521 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span21] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Input _ _, _) -> true
      | _ -> false
      end

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span22] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span25] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span23] is_bool'0 self)
   -> ([%#span24] is_bool'0 (negate'0 self))

  predicate contains'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span27] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'1_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span26] invariant_assign'0 self
   -> contains'1 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span28] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'1 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'1 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  use set.Fset

  use set.Fset

  predicate contains'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span29] Fset.mem e self

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'0.t_trail) =
    [%#span30] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'0 j a  -> contains'1 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span31] Fset.remove a self

  use set.Fset

  use set.Fset

  use set.Fset

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span39] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#span32] invariant_nonneg'0 self)
   -> ([%#span37] set_level'0 self s <= level'0 self)
  && ([%#span36] set_level'0 self s >= 0)
  && ([%#span35] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#span34] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span33] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'0.t_trail) =
    [%#span40] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'0.t_trail) =
    [%#span41] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  constant self  : Trail'0.t_trail

  constant d  : (Term'0.t_term, Value'0.t_value)

  function is_input_inv [#"/Users/xavier/Code/cdsat/src/theory.rs" 533 4 533 47] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : ()


  goal vc_is_input_inv : ([%#stheory1] is_input'0 self d)
   -> ([%#stheory0] invariant'0 self)
   -> match self with
    | Trail'0.C_Empty -> [%#stheory2] level_of'0 self d = 0
    | Trail'0.C_Assign a _ tl -> if to_pair'0 a = d then
      [%#stheory2] level_of'0 self d = 0
    else
      (([%#stheory1] is_input'0 tl d) && ([%#stheory0] invariant'0 tl))
      /\ (([%#stheory2] level_of'0 tl d = 0)  -> ([%#stheory2] level_of'0 self d = 0))

    end
end
module Cdsat_Trail_Impl9_Justification
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 461 14 461 29

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 467 29 467 39

  let%span strail2 = "/Users/xavier/Code/cdsat/src/trail.rs" 466 32 466 42

  let%span strail3 = "/Users/xavier/Code/cdsat/src/trail.rs" 463 16 463 91

  let%span strail4 = "/Users/xavier/Code/cdsat/src/trail.rs" 454 15 454 31

  let%span strail5 = "/Users/xavier/Code/cdsat/src/trail.rs" 455 15 455 31

  let%span strail6 = "/Users/xavier/Code/cdsat/src/trail.rs" 456 4 456 61

  let%span strail7 = "/Users/xavier/Code/cdsat/src/trail.rs" 457 4 457 86

  let%span strail8 = "/Users/xavier/Code/cdsat/src/trail.rs" 458 14 458 99

  let%span strail9 = "/Users/xavier/Code/cdsat/src/trail.rs" 459 4 459 105

  let%span span10 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span11 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  let%span span12 = "/Users/xavier/Code/cdsat/src/trail.rs" 146 14 146 59

  let%span span13 = "/Users/xavier/Code/cdsat/src/trail.rs" 144 4 144 10

  let%span span14 = "/Users/xavier/Code/cdsat/src/trail.rs" 140 15 140 48

  let%span span15 = "/Users/xavier/Code/cdsat/src/trail.rs" 141 14 141 44

  let%span span16 = "/Users/xavier/Code/cdsat/src/trail.rs" 138 4 138 10

  let%span span17 = "/Users/xavier/Code/cdsat/src/trail.rs" 134 15 134 45

  let%span span18 = "/Users/xavier/Code/cdsat/src/trail.rs" 135 14 135 47

  let%span span19 = "/Users/xavier/Code/cdsat/src/trail.rs" 132 4 132 10

  let%span span20 = "/Users/xavier/Code/cdsat/src/trail.rs" 127 15 127 32

  let%span span21 = "/Users/xavier/Code/cdsat/src/trail.rs" 128 15 128 32

  let%span span22 = "/Users/xavier/Code/cdsat/src/trail.rs" 129 14 129 31

  let%span span23 = "/Users/xavier/Code/cdsat/src/trail.rs" 125 4 125 10

  let%span span24 = "/Users/xavier/Code/cdsat/src/trail.rs" 122 14 122 45

  let%span span25 = "/Users/xavier/Code/cdsat/src/trail.rs" 120 4 120 10

  let%span span26 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 41 20 41 56

  let%span span27 = "/Users/xavier/Code/cdsat/src/trail.rs" 117 14 117 64

  let%span span28 = "/Users/xavier/Code/cdsat/src/trail.rs" 115 4 115 10

  let%span span29 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 31 20 31 53

  let%span span30 = "/Users/xavier/Code/cdsat/src/trail.rs" 112 14 112 61

  let%span span31 = "/Users/xavier/Code/cdsat/src/trail.rs" 110 4 110 10

  let%span span32 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 21 20 21 53

  let%span span33 = "/Users/xavier/Code/cdsat/src/trail.rs" 107 14 107 61

  let%span span34 = "/Users/xavier/Code/cdsat/src/trail.rs" 105 4 105 10

  let%span span35 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 11 20 11 56

  let%span span36 = "/Users/xavier/Code/cdsat/src/trail.rs" 102 14 102 64

  let%span span37 = "/Users/xavier/Code/cdsat/src/trail.rs" 100 4 100 10

  let%span span38 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 14 70 15

  let%span span39 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 23 70 24

  let%span span40 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 69 14 69 59

  let%span span41 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 64 15 64 48

  let%span span42 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 16 66 17

  let%span span43 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 25 66 26

  let%span span44 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 65 14 65 44

  let%span span45 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 59 15 59 45

  let%span span46 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 16 61 17

  let%span span47 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 25 61 26

  let%span span48 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 60 14 60 47

  let%span span49 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 53 15 53 32

  let%span span50 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 54 15 54 32

  let%span span51 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 13 56 14

  let%span span52 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 22 56 23

  let%span span53 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 31 56 32

  let%span span54 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 55 14 55 31

  let%span span55 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 50 12 50 13

  let%span span56 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 49 14 49 45

  let%span span57 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 18 46 19

  let%span span58 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 27 46 28

  let%span span59 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 45 14 45 64

  let%span span60 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 18 36 19

  let%span span61 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 27 36 28

  let%span span62 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 35 14 35 61

  let%span span63 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 18 26 19

  let%span span64 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 27 26 28

  let%span span65 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 25 14 25 61

  let%span span66 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 18 16 19

  let%span span67 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 27 16 28

  let%span span68 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 15 14 15 64

  let%span span69 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span70 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span71 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span72 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span73 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span74 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span75 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span76 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span77 = "/Users/xavier/Code/cdsat/src/trail.rs" 179 4 179 12

  let%span span78 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span79 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span80 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span81 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span82 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span83 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span84 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span85 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span86 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span87 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span88 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span89 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span90 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span91 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span92 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span93 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span94 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span95 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span96 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span97 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span98 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span99 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span100 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span101 = "/Users/xavier/Code/cdsat/src/theory.rs" 616 15 616 27

  let%span span102 = "/Users/xavier/Code/cdsat/src/theory.rs" 617 15 617 32

  let%span span103 = "/Users/xavier/Code/cdsat/src/theory.rs" 618 4 618 90

  let%span span104 = "/Users/xavier/Code/cdsat/src/theory.rs" 512 8 515 9

  let%span span105 = "/Users/xavier/Code/cdsat/src/theory.rs" 522 8 525 9

  let%span span106 = "/Users/xavier/Code/cdsat/src/theory.rs" 206 8 206 84

  let%span span107 = "/Users/xavier/Code/cdsat/src/theory.rs" 502 8 505 9

  let%span span108 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span109 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span110 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span111 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span112 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span113 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span114 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span115 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span116 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span117 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span118 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span119 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span120 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span121 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span122 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span123 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span124 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span125 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span126 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span127 = "/Users/xavier/Code/cdsat/src/theory.rs" 484 15 484 31

  let%span span128 = "/Users/xavier/Code/cdsat/src/theory.rs" 485 15 485 35

  let%span span129 = "/Users/xavier/Code/cdsat/src/theory.rs" 486 15 486 27

  let%span span130 = "/Users/xavier/Code/cdsat/src/theory.rs" 487 4 487 54

  let%span span131 = "/Users/xavier/Code/cdsat/src/theory.rs" 488 4 488 58

  let%span span132 = "/Users/xavier/Code/cdsat/src/theory.rs" 489 4 489 61

  let%span span133 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span134 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 129 8 129 78

  let%span span135 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 13 814 14

  let%span span136 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 24 814 25

  let%span span137 = "/Users/xavier/Code/cdsat/src/trail.rs" 809 0 809 73

  let%span span138 = "/Users/xavier/Code/cdsat/src/trail.rs" 810 0 810 63

  let%span span139 = "/Users/xavier/Code/cdsat/src/trail.rs" 811 0 811 55

  let%span span140 = "/Users/xavier/Code/cdsat/src/trail.rs" 812 0 812 52

  let%span span141 = "/Users/xavier/Code/cdsat/src/trail.rs" 813 10 813 33

  let%span span142 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 33 814 39

  let%span span143 = "/Users/xavier/Code/cdsat/src/trail.rs" 808 10 808 17

  let%span span144 = "/Users/xavier/Code/cdsat/src/trail.rs" 807 0 807 8

  let%span span145 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span146 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span147 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span148 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span149 = "/Users/xavier/Code/cdsat/src/term.rs" 195 8 225 9

  let%span span150 = "/Users/xavier/Code/cdsat/src/term.rs" 180 8 180 25

  let%span span151 = "/Users/xavier/Code/cdsat/src/trail.rs" 726 8 726 61

  let%span span152 = "/Users/xavier/Code/cdsat/src/trail.rs" 646 8 648 9

  let%span span153 = "/Users/xavier/Code/cdsat/src/trail.rs" 291 12 291 92

  let%span span154 = "/Users/xavier/Code/cdsat/src/trail.rs" 313 4 313 82

  let%span span155 = "/Users/xavier/Code/cdsat/src/trail.rs" 314 14 314 40

  let%span span156 = "/Users/xavier/Code/cdsat/src/trail.rs" 315 4 315 115

  let%span span157 = "/Users/xavier/Code/cdsat/src/trail.rs" 316 4 316 115

  let%span span158 = "/Users/xavier/Code/cdsat/src/trail.rs" 317 4 317 101

  let%span span159 = "/Users/xavier/Code/cdsat/src/trail.rs" 312 14 312 24

  let%span span160 = "/Users/xavier/Code/cdsat/src/trail.rs" 310 4 310 12

  let%span span161 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 20 8 20 31

  let%span span162 = "/Users/xavier/Code/cdsat/src/theory.rs" 31 8 54 9

  let%span span163 = "/Users/xavier/Code/cdsat/src/trail.rs" 268 8 272 9

  let%span span164 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 31 8 31 32

  let%span span165 = "/Users/xavier/Code/cdsat/src/trail.rs" 547 4 547 12

  let%span span166 = "/Users/xavier/Code/cdsat/src/trail.rs" 254 8 263 9

  let%span span167 = "/Users/xavier/Code/cdsat/src/trail.rs" 279 12 283 13

  let%span span168 = "/Users/xavier/Code/cdsat/src/trail.rs" 238 8 248 9

  let%span span169 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2836 14 2836 18

  let%span span170 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/clone.rs" 7 0 20 1

  let%span span171 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2836 4 2836 27

  let%span span172 = "/Users/xavier/Code/cdsat/src/theory.rs" 655 15 655 31

  let%span span173 = "/Users/xavier/Code/cdsat/src/theory.rs" 656 15 656 36

  let%span span174 = "/Users/xavier/Code/cdsat/src/theory.rs" 657 4 657 126

  let%span span175 = "/Users/xavier/Code/cdsat/src/theory.rs" 658 14 658 73

  let%span span176 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 69 26 69 44

  let%span span177 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 422 4 422 30

  let%span span178 = "/Users/xavier/Code/cdsat/src/trail.rs" 715 15 715 35

  let%span span179 = "/Users/xavier/Code/cdsat/src/trail.rs" 716 14 716 67

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function eq_cmp'2 (_1 : usize) (_2 : usize) : ()

  function antisym2'2 (_1 : usize) (_2 : usize) : ()

  function antisym1'2 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'2 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'2 (_1 : usize) : ()

  function cmp_gt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'2 (_1 : usize) (_2 : usize) : ()

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span10] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span11] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  function eq_cmp'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 147 4 147 31] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span13] ()

  axiom eq_cmp'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span12] (x = y)
  = (cmp_log'0 x y = Ordering'0.C_Equal)

  function antisym2'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 142 4 142 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span16] ()

  axiom antisym2'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span14] cmp_log'0 x y
  = Ordering'0.C_Greater)  -> ([%#span15] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 136 4 136 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span19] ()

  axiom antisym1'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span17] cmp_log'0 x y
  = Ordering'0.C_Less)  -> ([%#span18] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 130 4 130 52] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()

   =
    [%#span23] ()

  axiom trans'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span20] cmp_log'0 x y
  = o)  -> ([%#span21] cmp_log'0 y z = o)  -> ([%#span22] cmp_log'0 x z = o)

  function refl'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 123 4 123 20] (x : TrailIndex'0.t_trailindex) : () =
    [%#span25] ()

  axiom refl'1_spec : forall x : TrailIndex'0.t_trailindex . [%#span24] cmp_log'0 x x = Ordering'0.C_Equal

  function gt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span26] cmp_log'0 self o = Ordering'0.C_Greater

  function cmp_gt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 118 4 118 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span28] ()

  axiom cmp_gt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span27] gt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Greater)

  function ge_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span29] cmp_log'0 self o <> Ordering'0.C_Less

  function cmp_ge_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 113 4 113 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span31] ()

  axiom cmp_ge_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span30] ge_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Less)

  function lt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span32] cmp_log'0 self o = Ordering'0.C_Less

  function cmp_lt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 108 4 108 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span34] ()

  axiom cmp_lt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span33] lt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Less)

  function le_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span35] cmp_log'0 self o <> Ordering'0.C_Greater

  function cmp_le_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 103 4 103 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span37] ()

  axiom cmp_le_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span36] le_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Greater)

  predicate inv'8 (_x : TrailIndex'0.t_trailindex)

  function eq_cmp'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom eq_cmp'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span38] inv'8 x)
   -> ([%#span39] inv'8 y)  -> ([%#span40] (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal))

  function antisym2'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym2'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span41] cmp_log'0 x y
  = Ordering'0.C_Greater)
   -> ([%#span42] inv'8 x)  -> ([%#span43] inv'8 y)  -> ([%#span44] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym1'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span45] cmp_log'0 x y
  = Ordering'0.C_Less)
   -> ([%#span46] inv'8 x)  -> ([%#span47] inv'8 y)  -> ([%#span48] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span49] cmp_log'0 x y
  = o)
   -> ([%#span50] cmp_log'0 y z = o)
   -> ([%#span51] inv'8 x)  -> ([%#span52] inv'8 y)  -> ([%#span53] inv'8 z)  -> ([%#span54] cmp_log'0 x z = o)

  function refl'0 (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'0_spec : forall x : TrailIndex'0.t_trailindex . ([%#span55] inv'8 x)
   -> ([%#span56] cmp_log'0 x x = Ordering'0.C_Equal)

  function cmp_gt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_gt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span57] inv'8 x)
   -> ([%#span58] inv'8 y)  -> ([%#span59] gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater))

  function cmp_ge_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_ge_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span60] inv'8 x)
   -> ([%#span61] inv'8 y)  -> ([%#span62] ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less))

  function cmp_lt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_lt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span63] inv'8 x)
   -> ([%#span64] inv'8 y)  -> ([%#span65] lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less))

  function cmp_le_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_le_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span66] inv'8 x)
   -> ([%#span67] inv'8 y)  -> ([%#span68] le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater))

  predicate invariant'11 (self : TrailIndex'0.t_trailindex) =
    [%#span69] true

  axiom inv'8 : forall x : TrailIndex'0.t_trailindex . inv'8 x = true

  use Cdsat_Trail_Assignment_Type as Assignment'0

  use seq.Seq

  predicate invariant'10 (self : Seq.seq (Assignment'0.t_assignment)) =
    [%#span69] true

  predicate inv'7 (_x : Seq.seq (Assignment'0.t_assignment))

  axiom inv'7 : forall x : Seq.seq (Assignment'0.t_assignment) . inv'7 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  constant max'0 : usize = [%#span70] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'6 (_x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

  function shallow_model'2 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) : Seq.seq (Assignment'0.t_assignment)


  axiom shallow_model'2_spec : forall self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . ([%#span71] inv'6 self)
   -> ([%#span73] inv'7 (shallow_model'2 self))
  && ([%#span72] Seq.length (shallow_model'2 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'9 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span74] inv'7 (shallow_model'2 self)

  axiom inv'6 : forall x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . inv'6 x = true

  predicate invariant'8 (self : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span69] true

  predicate inv'5 (_x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'5 : forall x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'5 x = true

  use seq.Seq

  predicate inv'4 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  function shallow_model'1 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))


  axiom shallow_model'1_spec : forall self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . ([%#span71] inv'4 self)
   -> ([%#span73] inv'5 (shallow_model'1 self))
  && ([%#span72] Seq.length (shallow_model'1 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'7 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span74] inv'5 (shallow_model'1 self)

  axiom inv'4 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'4 x
  = true

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'1

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'1.t_value) : Sort'0.t_sort =
    [%#span75] match self with
      | Value'1.C_Bool _ -> Sort'0.C_Boolean
      | Value'1.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span76] forall v : Value'1.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'3 (_x : Model'0.t_model)

  axiom inv'3 : forall x : Model'0.t_model . inv'3 x
  = (invariant'2 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  predicate invariant'6 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span69] true

  predicate inv'2 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'2 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'2 x = true

  predicate invariant'5 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span69] true

  predicate inv'1 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  axiom inv'1 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'1 x = true

  use seq.Seq

  predicate inv'0 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function shallow_model'0 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom shallow_model'0_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span71] inv'0 self)
   -> ([%#span73] inv'2 (shallow_model'0 self))
  && ([%#span72] Seq.length (shallow_model'0 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'3 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span74] inv'2 (shallow_model'0 self)

  axiom inv'0 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'0 x = true

  function level_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 180 4 180 33] (self : TrailIndex'0.t_trailindex) : int
   =
    [%#span77] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 self)

  use seq.Seq

  use prelude.prelude.Int

  use Cdsat_Theory_Term_Type as Term'1

  use Cdsat_Theory_Trail_Type as Trail'1

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'1.t_term) : Sort'0.t_sort =
    [%#span78] match self with
      | Term'1.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'1.C_Value v -> sort'1 v
      | Term'1.C_Plus _ _ -> Sort'0.C_Rational
      | Term'1.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'1.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'1.C_Neg _ -> Sort'0.C_Boolean
      | Term'1.C_Disj _ _ -> Sort'0.C_Boolean
      end

  use Cdsat_Theory_Assign_Type as Assign'0

  predicate invariant'4 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span79] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'1.t_trail) =
    [%#span80] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'4 a
      end

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'1.t_trail) : int

  axiom len'0_spec : forall self : Trail'1.t_trail . [%#span81] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'1.t_trail) : int =
    [%#span84] match self with
      | Trail'1.C_Empty -> 0
      | Trail'1.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'1.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'1.t_trail . ([%#span83] level'0 self <= len'0 self)
  && ([%#span82] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'1.t_trail) =
    [%#span85] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'1.t_term, Value'1.t_value)

   =
    [%#span86] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span90] match self with
      | Trail'1.C_Empty -> Option'0.C_None
      | Trail'1.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'1.t_trail, d : (Term'1.t_term, Value'1.t_value) . ([%#span89] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span88] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span87] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  use set.Fset

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'1.t_term) : Value'1.t_value

   =
    [%#span93] match t with
      | Term'1.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'1.C_Value v -> v
      | Term'1.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'1.C_Rat r1, Value'1.C_Rat r2) -> Value'1.C_Rat r1
        | _ -> Value'1.C_Rat (from_int'0 (- 1))
        end
      | Term'1.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'1.C_Bool b1, Value'1.C_Bool b2) -> Value'1.C_Bool (b1 /\ b2)
        | _ -> Value'1.C_Bool false
        end
      | Term'1.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'1.C_Bool b1, Value'1.C_Bool b2) -> Value'1.C_Bool (b1 \/ b2)
        | _ -> Value'1.C_Bool false
        end
      | Term'1.C_Eq l r -> Value'1.C_Bool (interp'0 self l = interp'0 self r)
      | Term'1.C_Neg t -> match interp'0 self t with
        | Value'1.C_Bool b -> Value'1.C_Bool (not b)
        | _ -> Value'1.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'1.t_term . ([%#span91] inv'3 self)
   -> ([%#span92] invariant'2 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'1.t_term, Value'1.t_value))

   =
    [%#span94] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  use set.Fset

  predicate contains'1 [@inline:trivial] (self : Fset.fset (Term'1.t_term, Value'1.t_value)) (e : (Term'1.t_term, Value'1.t_value))

   =
    [%#span95] Fset.mem e self

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'1.t_term, Value'1.t_value))

   =
    [%#span96] forall a : (Term'1.t_term, Value'1.t_value) . contains'1 v a  -> satisfies'0 self a

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span97] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'3 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate contains'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value))

   =
    [%#span99] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'2_spec : forall self : Trail'1.t_trail, d : (Term'1.t_term, Value'1.t_value) . [%#span98] invariant_assign'0 self
   -> contains'2 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'1.t_trail)
   =
    [%#span100] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a _ tl -> sound'0 tl /\ justified_sound'0 a
      end

  function find_justified'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 619 4 619 46] (self : Trail'1.t_trail) (kv : (Term'1.t_term, Value'1.t_value)) : ()


  axiom find_justified'0_spec : forall self : Trail'1.t_trail, kv : (Term'1.t_term, Value'1.t_value) . ([%#span101] sound'0 self)
   -> ([%#span102] contains'2 self kv)
   -> ([%#span103] forall l : int . forall a : Assign'0.t_assign . find'0 self kv = Option'0.C_Some (a, l)
   -> justified_sound'0 a)

  predicate is_decision'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 511 4 511 54] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value))

   =
    [%#span104] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Decision _ _, _) -> true
      | _ -> false
      end

  use set.Fset

  predicate is_input'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 521 4 521 51] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value))

   =
    [%#span105] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Input _ _, _) -> true
      | _ -> false
      end

  predicate entails'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 205 4 205 74] (self : Model'0.t_model) (j : Fset.fset (Term'1.t_term, Value'1.t_value)) (c : (Term'1.t_term, Value'1.t_value))

   =
    [%#span106] invariant'2 self  -> satisfy_set'0 self j  -> satisfies'0 self c

  predicate is_justified'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 501 4 501 55] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value))

   =
    [%#span107] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified _ _ _, _) -> true
      | _ -> false
      end

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'1.t_value) =
    [%#span108] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'1.t_value) : Value'1.t_value =
    [%#span111] match self with
      | Value'1.C_Bool b -> Value'1.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'1.t_value . ([%#span109] is_bool'0 self)
   -> ([%#span110] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'1.t_trail) =
    [%#span112] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> let ap = to_pair'0 a in not contains'2 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'2 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'1.t_trail) =
    [%#span113] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'1.t_term, Value'1.t_value) . contains'1 j a  -> contains'2 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'1 [@inline:trivial] (self : Fset.fset (Term'1.t_term, Value'1.t_value)) (a : (Term'1.t_term, Value'1.t_value)) : Fset.fset (Term'1.t_term, Value'1.t_value)

   =
    [%#span114] Fset.remove a self

  use set.Fset

  use set.Fset

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value)) : int

   =
    [%#span117] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'1.t_trail, d : (Term'1.t_term, Value'1.t_value) . ([%#span115] invariant_nonneg'0 self)
   -> ([%#span116] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'1.t_trail) (s : Fset.fset (Term'1.t_term, Value'1.t_value)) : int


  axiom set_level'0_spec : forall self : Trail'1.t_trail, s : Fset.fset (Term'1.t_term, Value'1.t_value) . ([%#span118] invariant_nonneg'0 self)
   -> ([%#span123] set_level'0 self s <= level'0 self)
  && ([%#span122] set_level'0 self s >= 0)
  && ([%#span121] s = (Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value))  -> set_level'0 self s = 0)
  && ([%#span120] s <> (Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value))
   -> (exists i : (Term'1.t_term, Value'1.t_value) . contains'1 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span119] forall i : (Term'1.t_term, Value'1.t_value) . contains'1 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'1.t_trail) =
    [%#span125] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'1.t_trail) =
    [%#span126] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function justification'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 490 4 490 71] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value)) : Fset.fset (Term'1.t_term, Value'1.t_value)


  axiom justification'0_spec : forall self : Trail'1.t_trail, d : (Term'1.t_term, Value'1.t_value) . ([%#span127] invariant'1 self)
   -> ([%#span128] is_justified'0 self d)
   -> ([%#span129] sound'0 self)
   -> ([%#span132] is_decision'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value)))
  && ([%#span131] is_input'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value)))
  && ([%#span130] forall m : Model'0.t_model . inv'3 m  -> entails'0 m (justification'0 self d) d)

  use set.Fset

  function insert'0 [@inline:trivial] (self : Fset.fset (Term'1.t_term, Value'1.t_value)) (e : (Term'1.t_term, Value'1.t_value)) : Fset.fset (Term'1.t_term, Value'1.t_value)

   =
    [%#span133] Fset.add e self

  use seq.Seq

  use prelude.seq_ext.SeqExt

  use seq.Seq

  predicate contains'3 (self : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) =
    [%#span134] exists i : int . 0 <= i /\ i < Seq.length self /\ Seq.get self i = e

  function remove'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 814 0 814 39] (s : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom remove'0_def : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . remove'0 s e
  = ([%#span144] if s = (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) then
    Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)
  else
    if Seq.get s (Seq.length s - 1) = e then
      remove'0 (SeqExt.subsequence s 0 (Seq.length s - 1)) e
    else
      Seq.snoc (remove'0 (SeqExt.subsequence s 0 (Seq.length s - 1)) e) (Seq.get s (Seq.length s - 1))

  )

  axiom remove'0_spec : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . ([%#span135] inv'2 s)
   -> ([%#span136] inv'8 e)
   -> ([%#span142] inv'2 (remove'0 s e))
  && ([%#span141] Seq.length (remove'0 s e) <= Seq.length s)
  && ([%#span140] contains'3 s e  -> Seq.length (remove'0 s e) < Seq.length s)
  && ([%#span139] forall t : TrailIndex'0.t_trailindex . inv'8 t  -> contains'3 (remove'0 s e) t  -> t <> e)
  && ([%#span138] forall t : TrailIndex'0.t_trailindex . inv'8 t  -> contains'3 (remove'0 s e) t  -> contains'3 s t)
  && ([%#span137] forall t : TrailIndex'0.t_trailindex . inv'8 t
   -> contains'3 s t  -> e <> t  -> contains'3 (remove'0 s e) t)

  use Cdsat_Trail_Trail_Type as Trail'0

  use prelude.prelude.Borrow

  use Cdsat_Term_Value_Type as Value'0

  use Cdsat_Term_Term_Type as Term'0

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  function deep_model'4 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span145] match self with
      | Value'0.C_Bool b -> Value'1.C_Bool b
      | Value'0.C_Rat br -> Value'1.C_Rat (deep_model'4 br)
      end

  function shallow_model'4 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span146] deep_model'1 self

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  use Cdsat_Term_Sort_Type as Sort'1

  function deep_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'1.t_sort) : Sort'0.t_sort =
    [%#span147] match self with
      | Sort'1.C_Boolean -> Sort'0.C_Boolean
      | Sort'1.C_Rational -> Sort'0.C_Rational
      end

  function deep_model'2 (self : usize) : int =
    [%#span148] UIntSize.to_int self

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 193 4 193 44] (self : Term'0.t_term) : Term'1.t_term =
    [%#span149] match self with
      | Term'0.C_Variable v s -> Term'1.C_Variable (Var'0.C_Var (deep_model'2 v) (deep_model'3 s))
      | Term'0.C_Value v -> Term'1.C_Value (deep_model'1 v)
      | Term'0.C_Plus l r -> Term'1.C_Plus (deep_model'0 l) (deep_model'0 r)
      | Term'0.C_Eq l r -> Term'1.C_Eq (deep_model'0 l) (deep_model'0 r)
      | Term'0.C_Conj l r -> Term'1.C_Conj (deep_model'0 l) (deep_model'0 r)
      | Term'0.C_Disj l r -> Term'1.C_Disj (deep_model'0 l) (deep_model'0 r)
      | Term'0.C_Neg t -> Term'1.C_Neg (deep_model'0 t)
      | Term'0.C_Impl l r -> Term'1.C_Disj (Term'1.C_Neg (deep_model'0 l)) (deep_model'0 r)
      | Term'0.C_Times l r -> Term'1.C_Plus (Term'1.C_Value (Value'1.C_Rat (deep_model'4 l))) (deep_model'0 r)
      | Term'0.C_Lt l r -> Term'1.C_Eq (deep_model'0 l) (deep_model'0 r)
      end

  function shallow_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 179 4 179 50] (self : Term'0.t_term) : Term'1.t_term
   =
    [%#span150] deep_model'0 self

  function term_value'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 725 4 725 61] (self : Assignment'0.t_assignment) : (Term'1.t_term, Value'1.t_value)

   =
    [%#span151] (shallow_model'3 (Cdsat_Trail_Assignment_Type.assignment_term self), shallow_model'4 (Cdsat_Trail_Assignment_Type.assignment_val self))

  use seq.Seq

  use seq.Seq

  use Cdsat_Trail_Trail_Type as Cdsat_Trail_Trail_Type

  function index_logic'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 645 4 645 77] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : (Term'1.t_term, Value'1.t_value)

   =
    [%#span152] term_value'0 (Seq.get (shallow_model'2 (Seq.get (shallow_model'1 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)))) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)))

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 289 4 289 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex)

   =
    [%#span153] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)
    < Seq.length (shallow_model'1 (Cdsat_Trail_Trail_Type.trail_assignments self))
    /\ UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)
    < Seq.length (shallow_model'2 (Seq.get (shallow_model'1 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))))

  function abstract_justification'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 318 4 321 44] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) : Fset.fset (Term'1.t_term, Value'1.t_value)


  axiom abstract_justification'0_def : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . abstract_justification'0 self just
  = ([%#span160] if Seq.length just > 0 then
    let set = abstract_justification'0 self (remove'0 just (Seq.get just 0)) in let a = index_logic'0 self (Seq.get just 0) in insert'0 set a
  else
    Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value)
  )

  axiom abstract_justification'0_spec : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span154] forall i : int . 0
  <= i
  /\ i < Seq.length just  -> contains'0 self (Seq.get just i))
   -> ([%#span158] forall i : int . 0 <= i /\ i < Seq.length just
   -> contains'1 (abstract_justification'0 self just) (index_logic'0 self (Seq.get just i)))
  && ([%#span157] forall a : (Term'1.t_term, Value'1.t_value) . contains'1 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'3 just ix /\ a = index_logic'0 self ix))
  && ([%#span156] forall a : (Term'1.t_term, Value'1.t_value) . contains'1 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'0 self ix /\ a = index_logic'0 self ix))
  && ([%#span155] Fset.cardinal (abstract_justification'0 self just) <= Seq.length just)

  function index_logic'1 [@inline:trivial] (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) (ix : int) : TrailIndex'0.t_trailindex

   =
    [%#span161] Seq.get (shallow_model'0 self) ix

  function well_sorted'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 30 4 30 36] (self : Term'1.t_term) : bool =
    [%#span162] match self with
      | Term'1.C_Variable v -> true
      | Term'1.C_Value v -> true
      | Term'1.C_Plus l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Rational
      | Term'1.C_Eq l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r
      | Term'1.C_Conj l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Boolean
      | Term'1.C_Disj l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Boolean
      | Term'1.C_Neg t -> well_sorted'0 t /\ sort'0 t = Sort'0.C_Boolean
      end

  use prelude.prelude.Snapshot

  predicate justified_correct'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 267 4 267 78] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) (j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

   =
    [%#span163] (forall i : TrailIndex'0.t_trailindex . contains'3 (shallow_model'0 j) i
     -> lt_log'0 i ix /\ contains'0 self i)
    /\ is_justified'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ justification'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    = abstract_justification'0 self (shallow_model'0 j)

  use Cdsat_Trail_Reason_Type as Reason'0

  function index_logic'4 [@inline:trivial] (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (ix : usize) : Assignment'0.t_assignment

   =
    [%#span164] Seq.get (shallow_model'2 self) (UIntSize.to_int ix)

  function index_logic'3 [@inline:trivial] (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (ix : usize) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span164] Seq.get (shallow_model'1 self) (UIntSize.to_int ix)

  function reason'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 549 4 549 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : Reason'0.t_reason

   =
    [%#span165] Cdsat_Trail_Assignment_Type.assignment_reason (index_logic'4 (index_logic'3 (Cdsat_Trail_Trail_Type.trail_assignments self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)) (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix))

  predicate justified_is_justified'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 253 4 253 47] (self : Trail'0.t_trail) =
    [%#span166] forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> (let reason = reason'0 self ix in (reason = Reason'0.C_Decision)
    = is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ (reason = Reason'0.C_Input)
    = is_input'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ (forall j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . reason = Reason'0.C_Justified j
     -> justified_correct'0 self ix j))

  function index_logic'2 [@inline:trivial] (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (ix : int) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span161] Seq.get (shallow_model'1 self) ix

  predicate abstract_relation'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 277 4 277 42] (self : Trail'0.t_trail) =
    [%#span167] (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> contains'2 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix))
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    = UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))
    /\ (forall a : (Term'1.t_term, Value'1.t_value) . contains'2 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
     -> (exists ix : TrailIndex'0.t_trailindex . contains'0 self ix
    /\ level_log'0 ix = level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
    /\ index_logic'0 self ix = a))

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 237 4 237 34] (self : Trail'0.t_trail) =
    [%#span168] abstract_relation'0 self
    /\ sound'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    /\ invariant'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    /\ level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    = UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self)
    /\ UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self)
    = Seq.length (shallow_model'1 (Cdsat_Trail_Trail_Type.trail_assignments self)) - 1
    /\ (forall i : int . 0 <= i /\ i < Seq.length (shallow_model'1 (Cdsat_Trail_Trail_Type.trail_assignments self))
     -> Seq.length (shallow_model'2 (index_logic'2 (Cdsat_Trail_Trail_Type.trail_assignments self) i)) > 0)
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix) = 0)
    = is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix))
    /\ (forall j : TrailIndex'0.t_trailindex . forall i : TrailIndex'0.t_trailindex . contains'0 self i
     -> contains'0 self j  -> i <> j  -> index_logic'0 self i <> index_logic'0 self j)
    /\ justified_is_justified'0 self
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> well_sorted'0 (let (a, _) = index_logic'0 self ix in a))

  use prelude.prelude.Intrinsic

  let rec clone'0 (self:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) (return'  (ret:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)))= {[@expl:precondition] [%#span169] inv'1 self}
    any
    [ return' (result:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> {[%#span171] inv'0 result}
      {[%#span170] result = self}
      (! return' {result}) ]


  function justification_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 659 4 659 58] (self : Trail'1.t_trail) (kv : (Term'1.t_term, Value'1.t_value)) : ()


  axiom justification_contains'0_spec : forall self : Trail'1.t_trail, kv : (Term'1.t_term, Value'1.t_value) . ([%#span172] invariant'1 self)
   -> ([%#span173] is_justified'0 self kv)
   -> ([%#span175] set_level'0 self (justification'0 self kv) = level_of'0 self kv)
  && ([%#span174] forall e : (Term'1.t_term, Value'1.t_value) . contains'1 (justification'0 self kv) e
   -> contains'2 self e /\ level_of'0 self e <= level_of'0 self kv)

  let rec new'0 (_1:()) (return'  (ret:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)))= any
    [ return' (result:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> {[%#span177] inv'0 result}
      {[%#span176] Seq.length (shallow_model'0 result) = 0}
      (! return' {result}) ]


  let rec index'0 (self:Trail'0.t_trail) (index:TrailIndex'0.t_trailindex) (return'  (ret:Assignment'0.t_assignment))= {[@expl:precondition] [%#span178] contains'0 self index}
    any
    [ return' (result:Assignment'0.t_assignment)-> {[%#span179] result
      = Seq.get (shallow_model'2 (Seq.get (shallow_model'1 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 index)))) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 index))}
      (! return' {result}) ]


  let rec justification (self:Trail'0.t_trail) (a:TrailIndex'0.t_trailindex) (return'  (ret:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)))= {[%#strail6] is_justified'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self a)}
    {[%#strail5] contains'0 self a}
    {[%#strail4] invariant'0 self}
    (! bb0
    [ bb0 = s0 [ s0 = index'0 {self} {a} (fun (_ret':Assignment'0.t_assignment) ->  [ &_10 <- _ret' ] s1) | s1 = bb1 ]
    | bb1 = s0
      [ s0 = Assignment'0.t_assignment {_10}
          (fun (rterm'0:Term'0.t_term) (rval'0:Value'0.t_value) (rreason'0:Reason'0.t_reason) (rlevel'0:usize) ->
             [ &_9 <- rreason'0 ]
            s1)
      | s1 = any
        [ br0 (a:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> {_9 = Reason'0.C_Justified a} (! bb3)
        | br1 -> {_9 = Reason'0.C_Decision } (! bb4)
        | br2 -> {_9 = Reason'0.C_Input } (! bb5) ]
         ]

    | bb2 = {[%#strail0] false} any
    | bb5 = s0
      [ s0 = new'0 {[%#strail1] ()}
          (fun (_ret':Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->  [ &_0 <- _ret' ] s1)
      | s1 = bb9 ]

    | bb4 = bb8
    | bb8 = s0
      [ s0 = new'0 {[%#strail2] ()}
          (fun (_ret':Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->  [ &_0 <- _ret' ] s1)
      | s1 = bb9 ]

    | bb3 = bb6
    | bb6 = s0
      [ s0 = Reason'0.justified {_9}
          (fun (r0'0:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->  [ &v <- r0'0 ] s1)
      | s1 = {[@expl:assertion] [%#strail3] let _ = justification_contains'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self a) in true}
        s2
      | s2 = clone'0 {v}
          (fun (_ret':Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->  [ &_0 <- _ret' ] s3)
      | s3 = bb7 ]

    | bb7 = bb9
    | bb9 = return' {_0} ]
    )
    [ & _0 : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) = any_l ()
    | & self : Trail'0.t_trail = self
    | & a : TrailIndex'0.t_trailindex = a
    | & _9 : Reason'0.t_reason = any_l ()
    | & _10 : Assignment'0.t_assignment = any_l ()
    | & v : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) = any_l () ]

    [ return' (result:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> {[@expl:postcondition] [%#strail9] forall i : int . 0
      <= i
      /\ i < Seq.length (shallow_model'0 result)  -> level_log'0 (Seq.get (shallow_model'0 result) i) <= level_log'0 a}
      {[@expl:postcondition] [%#strail8] abstract_justification'0 self (shallow_model'0 result)
      = justification'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self a)}
      {[@expl:postcondition] [%#strail7] forall i : int . 0 <= i /\ i < Seq.length (shallow_model'0 result)
       -> contains'0 self (index_logic'1 result i)}
      (! return' {result}) ]

end
module Cdsat_Heap_Impl1_IntoVec
  let%span sheap0 = "/Users/xavier/Code/cdsat/src/heap.rs" 77 27 77 31

  let%span sheap1 = "/Users/xavier/Code/cdsat/src/heap.rs" 74 4 74 70

  let%span sheap2 = "/Users/xavier/Code/cdsat/src/heap.rs" 75 4 75 88

  let%span sheap3 = "/Users/xavier/Code/cdsat/src/heap.rs" 76 14 76 33

  let%span span4 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span5 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  let%span span6 = "/Users/xavier/Code/cdsat/src/trail.rs" 146 14 146 59

  let%span span7 = "/Users/xavier/Code/cdsat/src/trail.rs" 140 15 140 48

  let%span span8 = "/Users/xavier/Code/cdsat/src/trail.rs" 141 14 141 44

  let%span span9 = "/Users/xavier/Code/cdsat/src/trail.rs" 134 15 134 45

  let%span span10 = "/Users/xavier/Code/cdsat/src/trail.rs" 135 14 135 47

  let%span span11 = "/Users/xavier/Code/cdsat/src/trail.rs" 127 15 127 32

  let%span span12 = "/Users/xavier/Code/cdsat/src/trail.rs" 128 15 128 32

  let%span span13 = "/Users/xavier/Code/cdsat/src/trail.rs" 129 14 129 31

  let%span span14 = "/Users/xavier/Code/cdsat/src/trail.rs" 122 14 122 45

  let%span span15 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 41 20 41 56

  let%span span16 = "/Users/xavier/Code/cdsat/src/trail.rs" 117 14 117 64

  let%span span17 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 31 20 31 53

  let%span span18 = "/Users/xavier/Code/cdsat/src/trail.rs" 112 14 112 61

  let%span span19 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 21 20 21 53

  let%span span20 = "/Users/xavier/Code/cdsat/src/trail.rs" 107 14 107 61

  let%span span21 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 11 20 11 56

  let%span span22 = "/Users/xavier/Code/cdsat/src/trail.rs" 102 14 102 64

  let%span span23 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 14 70 15

  let%span span24 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 23 70 24

  let%span span25 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 69 14 69 59

  let%span span26 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 64 15 64 48

  let%span span27 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 16 66 17

  let%span span28 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 25 66 26

  let%span span29 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 65 14 65 44

  let%span span30 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 59 15 59 45

  let%span span31 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 16 61 17

  let%span span32 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 25 61 26

  let%span span33 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 60 14 60 47

  let%span span34 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 53 15 53 32

  let%span span35 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 54 15 54 32

  let%span span36 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 13 56 14

  let%span span37 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 22 56 23

  let%span span38 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 31 56 32

  let%span span39 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 55 14 55 31

  let%span span40 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 50 12 50 13

  let%span span41 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 49 14 49 45

  let%span span42 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 18 46 19

  let%span span43 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 27 46 28

  let%span span44 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 45 14 45 64

  let%span span45 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 18 36 19

  let%span span46 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 27 36 28

  let%span span47 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 35 14 35 61

  let%span span48 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 18 26 19

  let%span span49 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 27 26 28

  let%span span50 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 25 14 25 61

  let%span span51 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 18 16 19

  let%span span52 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 27 16 28

  let%span span53 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 15 14 15 64

  let%span span54 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span55 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span56 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span57 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span58 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span59 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span60 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 138 8 140 9

  let%span span61 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 149 8 149 40

  let%span span62 = "/Users/xavier/Code/cdsat/src/trail.rs" 829 4 829 98

  let%span span63 = "/Users/xavier/Code/cdsat/src/heap.rs" 10 4 10 16

  let%span span64 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 129 8 129 78

  let%span span65 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span66 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span67 = "/Users/xavier/Code/cdsat/src/heap.rs" 96 13 96 14

  let%span span68 = "/Users/xavier/Code/cdsat/src/heap.rs" 94 0 94 61

  let%span span69 = "/Users/xavier/Code/cdsat/src/heap.rs" 96 28 96 35

  let%span span70 = "/Users/xavier/Code/cdsat/src/heap.rs" 95 10 95 17

  let%span span71 = "/Users/xavier/Code/cdsat/src/heap.rs" 93 0 93 8

  let%span span72 = "/Users/xavier/Code/cdsat/src/heap.rs" 88 21 88 25

  let%span span73 = "/Users/xavier/Code/cdsat/src/heap.rs" 87 4 87 71

  let%span span74 = "/Users/xavier/Code/cdsat/src/heap.rs" 89 8 89 38

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function eq_cmp'2 (_1 : usize) (_2 : usize) : ()

  function antisym2'2 (_1 : usize) (_2 : usize) : ()

  function antisym1'2 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'2 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'2 (_1 : usize) : ()

  function cmp_gt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'2 (_1 : usize) (_2 : usize) : ()

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span4] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span5] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  function eq_cmp'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 147 4 147 31] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom eq_cmp'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span6] (x = y)
  = (cmp_log'0 x y = Ordering'0.C_Equal)

  function antisym2'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 142 4 142 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom antisym2'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span7] cmp_log'0 x y
  = Ordering'0.C_Greater)  -> ([%#span8] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 136 4 136 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom antisym1'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span9] cmp_log'0 x y
  = Ordering'0.C_Less)  -> ([%#span10] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 130 4 130 52] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span11] cmp_log'0 x y
  = o)  -> ([%#span12] cmp_log'0 y z = o)  -> ([%#span13] cmp_log'0 x z = o)

  function refl'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 123 4 123 20] (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'1_spec : forall x : TrailIndex'0.t_trailindex . [%#span14] cmp_log'0 x x = Ordering'0.C_Equal

  function gt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span15] cmp_log'0 self o = Ordering'0.C_Greater

  function cmp_gt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 118 4 118 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_gt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span16] gt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Greater)

  function ge_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span17] cmp_log'0 self o <> Ordering'0.C_Less

  function cmp_ge_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 113 4 113 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_ge_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span18] ge_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Less)

  function lt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span19] cmp_log'0 self o = Ordering'0.C_Less

  function cmp_lt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 108 4 108 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_lt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span20] lt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Less)

  function le_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span21] cmp_log'0 self o <> Ordering'0.C_Greater

  function cmp_le_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 103 4 103 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_le_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span22] le_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Greater)

  predicate inv'3 (_x : TrailIndex'0.t_trailindex)

  function eq_cmp'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom eq_cmp'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span23] inv'3 x)
   -> ([%#span24] inv'3 y)  -> ([%#span25] (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal))

  function antisym2'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym2'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span26] cmp_log'0 x y
  = Ordering'0.C_Greater)
   -> ([%#span27] inv'3 x)  -> ([%#span28] inv'3 y)  -> ([%#span29] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym1'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span30] cmp_log'0 x y
  = Ordering'0.C_Less)
   -> ([%#span31] inv'3 x)  -> ([%#span32] inv'3 y)  -> ([%#span33] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span34] cmp_log'0 x y
  = o)
   -> ([%#span35] cmp_log'0 y z = o)
   -> ([%#span36] inv'3 x)  -> ([%#span37] inv'3 y)  -> ([%#span38] inv'3 z)  -> ([%#span39] cmp_log'0 x z = o)

  function refl'0 (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'0_spec : forall x : TrailIndex'0.t_trailindex . ([%#span40] inv'3 x)
   -> ([%#span41] cmp_log'0 x x = Ordering'0.C_Equal)

  function cmp_gt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_gt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span42] inv'3 x)
   -> ([%#span43] inv'3 y)  -> ([%#span44] gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater))

  function cmp_ge_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_ge_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span45] inv'3 x)
   -> ([%#span46] inv'3 y)  -> ([%#span47] ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less))

  function cmp_lt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_lt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span48] inv'3 x)
   -> ([%#span49] inv'3 y)  -> ([%#span50] lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less))

  function cmp_le_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_le_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span51] inv'3 x)
   -> ([%#span52] inv'3 y)  -> ([%#span53] le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater))

  use set.Fset

  predicate invariant'4 (self : Fset.fset (TrailIndex'0.t_trailindex)) =
    [%#span54] true

  predicate inv'4 (_x : Fset.fset (TrailIndex'0.t_trailindex))

  axiom inv'4 : forall x : Fset.fset (TrailIndex'0.t_trailindex) . inv'4 x = true

  predicate invariant'3 (self : TrailIndex'0.t_trailindex) =
    [%#span54] true

  axiom inv'3 : forall x : TrailIndex'0.t_trailindex . inv'3 x = true

  use seq.Seq

  predicate invariant'2 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span54] true

  predicate inv'2 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'2 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'2 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  constant max'0 : usize = [%#span55] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'1 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function shallow_model'1 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom shallow_model'1_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span56] inv'1 self)
   -> ([%#span58] inv'2 (shallow_model'1 self))
  && ([%#span57] Seq.length (shallow_model'1 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'1 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span59] inv'2 (shallow_model'1 self)

  axiom inv'1 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'1 x = true

  use seq.Seq

  predicate sorted_range'0 (self : Seq.seq (TrailIndex'0.t_trailindex)) (l : int) (u : int) =
    [%#span60] forall j : int . forall i : int . l <= i /\ i <= j /\ j < u
     -> le_log'0 (Seq.get self i) (Seq.get self j)

  predicate sorted'0 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span61] sorted_range'0 self 0 (Seq.length self)

  predicate seq_unique'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 828 0 828 46] (s : Seq.seq (TrailIndex'0.t_trailindex))

   =
    [%#span62] forall j : int . forall i : int . 0 <= i /\ i <= j /\ j < Seq.length s
     -> i <> j  -> Seq.get s i <> Seq.get s j

  use Cdsat_Heap_ConflictHeap_Type as Cdsat_Heap_ConflictHeap_Type

  use Cdsat_Heap_ConflictHeap_Type as ConflictHeap'0

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/heap.rs" 12 4 12 30] (self : ConflictHeap'0.t_conflictheap) =
    [%#span63] seq_unique'0 (shallow_model'1 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self))
    /\ sorted'0 (shallow_model'1 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self))

  predicate inv'0 (_x : ConflictHeap'0.t_conflictheap)

  axiom inv'0 : forall x : ConflictHeap'0.t_conflictheap . inv'0 x
  = (invariant'0 x
  /\ match x with
    | ConflictHeap'0.C_ConflictHeap a_0 -> true
    end)

  predicate contains'1 (self : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) =
    [%#span64] exists i : int . 0 <= i /\ i < Seq.length self /\ Seq.get self i = e

  use set.Fset

  predicate contains'0 [@inline:trivial] (self : Fset.fset (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex)
   =
    [%#span65] Fset.mem e self

  use set.Fset

  function insert'0 [@inline:trivial] (self : Fset.fset (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) : Fset.fset (TrailIndex'0.t_trailindex)

   =
    [%#span66] Fset.add e self

  use prelude.seq_ext.SeqExt

  use set.Fset

  use seq.Seq

  function to_set'0 [#"/Users/xavier/Code/cdsat/src/heap.rs" 96 0 96 35] (s : Seq.seq (TrailIndex'0.t_trailindex)) : Fset.fset (TrailIndex'0.t_trailindex)


  axiom to_set'0_def : forall s : Seq.seq (TrailIndex'0.t_trailindex) . to_set'0 s
  = ([%#span71] if s = (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) then
    Fset.empty  : Fset.fset (TrailIndex'0.t_trailindex)
  else
    insert'0 (to_set'0 (SeqExt.subsequence s 1 (Seq.length s))) (Seq.get s 0)
  )

  axiom to_set'0_spec : forall s : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span67] inv'2 s)
   -> ([%#span69] inv'4 (to_set'0 s))
  && ([%#span68] forall x : TrailIndex'0.t_trailindex . inv'3 x  -> contains'1 s x = contains'0 (to_set'0 s) x)

  function shallow_model'0 [#"/Users/xavier/Code/cdsat/src/heap.rs" 88 4 88 50] (self : ConflictHeap'0.t_conflictheap) : Fset.fset (TrailIndex'0.t_trailindex)

   =
    [%#span74] to_set'0 (shallow_model'1 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self))

  axiom shallow_model'0_spec : forall self : ConflictHeap'0.t_conflictheap . ([%#span72] inv'0 self)
   -> ([%#span73] forall x : TrailIndex'0.t_trailindex . contains'1 (shallow_model'1 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self)) x
  = contains'0 (shallow_model'0 self) x)

  use prelude.prelude.Intrinsic

  let rec into_vec (self:ConflictHeap'0.t_conflictheap) (return'  (ret:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)))= {[%#sheap0] inv'0 self}
    (! bb0
    [ bb0 = bb1
    | bb1 = bb2
    | bb2 = s0
      [ s0 = ConflictHeap'0.t_conflictheap {self}
          (fun (r0'0:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->
             [ &_0 <- r0'0 ]
            (any
            [ any_ (_any:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> (! ConflictHeap'0.t_conflictheap
                {self}
                (fun (l_0'0:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->
                   [ &self <- ConflictHeap'0.C_ConflictHeap _any ]
                  s1)) ]
            ))
      | s1 = bb3 ]

    | bb3 = return' {_0} ]
    )
    [ & _0 : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) = any_l ()
    | & self : ConflictHeap'0.t_conflictheap = self ]

    [ return' (result:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> {[@expl:postcondition] [%#sheap3] seq_unique'0 (shallow_model'1 result)}
      {[@expl:postcondition] [%#sheap2] forall i : int . 0 <= i /\ i < Seq.length (shallow_model'1 result)
       -> contains'0 (shallow_model'0 self) (Seq.get (shallow_model'1 result) i)}
      {[@expl:postcondition] [%#sheap1] forall e : TrailIndex'0.t_trailindex . contains'0 (shallow_model'0 self) e
      = contains'1 (shallow_model'1 result) e}
      (! return' {result}) ]

end
module Cdsat_Theory_Impl5_RestrictFind_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 575 15 575 31

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 576 15 576 25

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 577 15 577 47

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 578 14 578 58

  let%span span4 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span5 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span6 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span7 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span8 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span9 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span10 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span11 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span12 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span13 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span14 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span15 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span16 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span17 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span20 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span21 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span22 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span23 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span24 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span25 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span26 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span28 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span29 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span30 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span31 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span32 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span33 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span34 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span35 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span36 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span37 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span38 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span39 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span40 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  let%span span41 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span42 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span43 = "/Users/xavier/Code/cdsat/src/theory.rs" 738 15 738 31

  let%span span44 = "/Users/xavier/Code/cdsat/src/theory.rs" 739 4 739 83

  let%span span45 = "/Users/xavier/Code/cdsat/src/theory.rs" 741 8 746 9

  let%span span46 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span47 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span48 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span49 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span50 = "/Users/xavier/Code/cdsat/src/theory.rs" 675 8 675 71

  let%span span51 = "/Users/xavier/Code/cdsat/src/theory.rs" 548 15 548 31

  let%span span52 = "/Users/xavier/Code/cdsat/src/theory.rs" 550 15 550 25

  let%span span53 = "/Users/xavier/Code/cdsat/src/theory.rs" 549 14 549 32

  let%span span54 = "/Users/xavier/Code/cdsat/src/theory.rs" 551 4 551 141

  let%span span55 = "/Users/xavier/Code/cdsat/src/theory.rs" 552 4 552 142

  let%span span56 = "/Users/xavier/Code/cdsat/src/theory.rs" 553 4 553 56

  let%span span57 = "/Users/xavier/Code/cdsat/src/theory.rs" 554 4 554 71

  let%span span58 = "/Users/xavier/Code/cdsat/src/theory.rs" 555 4 555 77

  let%span span59 = "/Users/xavier/Code/cdsat/src/theory.rs" 556 14 556 126

  let%span span60 = "/Users/xavier/Code/cdsat/src/theory.rs" 557 14 557 40

  let%span span61 = "/Users/xavier/Code/cdsat/src/theory.rs" 559 8 570 9

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span4] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span5] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k = v
     -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'2 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use Cdsat_Theory_Assign_Type as Assign'0

  use Cdsat_Theory_Term_Type as Term'0

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span6] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Cdsat_Theory_Trail_Type as Trail'0

  use prelude.prelude.Int

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span7] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span8] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span9] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'1 a
      end

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span11] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span10] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span14] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span13] level'0 self <= len'0 self)
  && ([%#span12] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span15] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span19] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span18] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span17] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span16] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span21] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span20] invariant_assign'0 self
   -> contains'0 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span24] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span22] invariant_nonneg'0 self)
   -> ([%#span23] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span25] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span28] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span26] is_bool'0 self)
   -> ([%#span27] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span29] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'0 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'0 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  use set.Fset

  use set.Fset

  predicate contains'1 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span30] Fset.mem e self

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'0.t_trail) =
    [%#span31] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'1 j a  -> contains'0 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span32] Fset.remove a self

  use set.Fset

  use set.Fset

  use set.Fset

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span40] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#span33] invariant_nonneg'0 self)
   -> ([%#span38] set_level'0 self s <= level'0 self)
  && ([%#span37] set_level'0 self s >= 0)
  && ([%#span36] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#span35] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'1 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span34] forall i : (Term'0.t_term, Value'0.t_value) . contains'1 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'0.t_trail) =
    [%#span41] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'0.t_trail) =
    [%#span42] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function count_bounds'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 740 4 740 35] (self : Trail'0.t_trail) : () =
    [%#span45] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign (Assign'0.C_Input _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Justified _ _ _) _ tl -> count_bounds'0 tl
      end

  axiom count_bounds'0_spec : forall self : Trail'0.t_trail . ([%#span43] invariant'0 self)
   -> ([%#span44] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a  -> level_of'0 self a <= level'0 self)

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span48] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span46] inv'0 self)
   -> ([%#span47] invariant'2 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span49] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  predicate satisfied_by'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 674 4 674 47] (self : Trail'0.t_trail) (m : Model'0.t_model)

   =
    [%#span50] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a  -> satisfies'0 m a

  function restrict'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 558 4 558 45] (self : Trail'0.t_trail) (level : int) : Trail'0.t_trail

   =
    [%#span61] match self with
      | Trail'0.C_Empty -> Trail'0.C_Empty
      | Trail'0.C_Assign a l tl -> let tl = restrict'0 tl level in let _ = count_bounds'0 tl in if l <= level then
        Trail'0.C_Assign a l tl
      else
        tl

      end

  axiom restrict'0_spec : forall self : Trail'0.t_trail, level : int . ([%#span51] invariant'0 self)
   -> ([%#span52] level >= 0)
   -> ([%#span60] len'0 (restrict'0 self level) <= len'0 self)
  && ([%#span59] (level'0 self >= level  -> level'0 (restrict'0 self level) = level)
  /\ (level'0 self < level  -> level'0 (restrict'0 self level) = level'0 self))
  && ([%#span58] forall m : Model'0.t_model . inv'0 m
   -> satisfied_by'0 self m  -> satisfied_by'0 (restrict'0 self level) m)
  && ([%#span57] forall a : (Term'0.t_term, Value'0.t_value) . not contains'0 self a
   -> not contains'0 (restrict'0 self level) a)
  && ([%#span56] level >= level'0 self  -> restrict'0 self level = self)
  && ([%#span55] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 (restrict'0 self level) a
   -> contains'0 self a
  /\ level_of'0 (restrict'0 self level) a <= level /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span54] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a
   -> level_of'0 self a <= level
   -> contains'0 (restrict'0 self level) a /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span53] invariant'0 (restrict'0 self level))

  constant self  : Trail'0.t_trail

  constant level  : int

  constant d  : (Term'0.t_term, Value'0.t_value)

  function restrict_find [#"/Users/xavier/Code/cdsat/src/theory.rs" 579 4 579 60] (self : Trail'0.t_trail) (level : int) (d : (Term'0.t_term, Value'0.t_value)) : ()


  goal vc_restrict_find : ([%#stheory2] contains'0 (restrict'0 self level) d)
   -> ([%#stheory1] level >= 0)
   -> ([%#stheory0] invariant'0 self)
   -> match self with
    | Trail'0.C_Empty -> [%#stheory3] find'0 (restrict'0 self level) d = find'0 self d
    | Trail'0.C_Assign a _ tl -> if to_pair'0 a = d then
      [%#stheory3] find'0 (restrict'0 self level) d = find'0 self d
    else
      (([%#stheory2] contains'0 (restrict'0 tl level) d) && ([%#stheory1] level >= 0) && ([%#stheory0] invariant'0 tl))
      /\ (([%#stheory3] find'0 (restrict'0 tl level) d = find'0 tl d)
       -> ([%#stheory3] find'0 (restrict'0 self level) d = find'0 self d))

    end
end
module Cdsat_Theory_Impl5_RestrictKindUnchanged_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 715 15 715 31

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 716 15 716 25

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 717 15 717 47

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 718 14 718 74

  let%span stheory4 = "/Users/xavier/Code/cdsat/src/theory.rs" 719 14 719 76

  let%span stheory5 = "/Users/xavier/Code/cdsat/src/theory.rs" 720 14 720 72

  let%span stheory6 = "/Users/xavier/Code/cdsat/src/theory.rs" 721 14 721 66

  let%span stheory7 = "/Users/xavier/Code/cdsat/src/theory.rs" 575 15 575 31

  let%span stheory8 = "/Users/xavier/Code/cdsat/src/theory.rs" 576 15 576 25

  let%span stheory9 = "/Users/xavier/Code/cdsat/src/theory.rs" 577 15 577 47

  let%span stheory10 = "/Users/xavier/Code/cdsat/src/theory.rs" 578 14 578 58

  let%span span11 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span12 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span13 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span14 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span15 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span16 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span17 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span20 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span21 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span22 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span23 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span24 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span25 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span26 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span28 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span29 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span30 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span31 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span32 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span33 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span34 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span35 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span36 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span37 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span38 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span39 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span40 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span41 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span42 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span43 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span44 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span45 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span46 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span47 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  let%span span48 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span49 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span50 = "/Users/xavier/Code/cdsat/src/theory.rs" 738 15 738 31

  let%span span51 = "/Users/xavier/Code/cdsat/src/theory.rs" 739 4 739 83

  let%span span52 = "/Users/xavier/Code/cdsat/src/theory.rs" 741 8 746 9

  let%span span53 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span54 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span55 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span56 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span57 = "/Users/xavier/Code/cdsat/src/theory.rs" 675 8 675 71

  let%span span58 = "/Users/xavier/Code/cdsat/src/theory.rs" 548 15 548 31

  let%span span59 = "/Users/xavier/Code/cdsat/src/theory.rs" 550 15 550 25

  let%span span60 = "/Users/xavier/Code/cdsat/src/theory.rs" 549 14 549 32

  let%span span61 = "/Users/xavier/Code/cdsat/src/theory.rs" 551 4 551 141

  let%span span62 = "/Users/xavier/Code/cdsat/src/theory.rs" 552 4 552 142

  let%span span63 = "/Users/xavier/Code/cdsat/src/theory.rs" 553 4 553 56

  let%span span64 = "/Users/xavier/Code/cdsat/src/theory.rs" 554 4 554 71

  let%span span65 = "/Users/xavier/Code/cdsat/src/theory.rs" 555 4 555 77

  let%span span66 = "/Users/xavier/Code/cdsat/src/theory.rs" 556 14 556 126

  let%span span67 = "/Users/xavier/Code/cdsat/src/theory.rs" 557 14 557 40

  let%span span68 = "/Users/xavier/Code/cdsat/src/theory.rs" 559 8 570 9

  let%span span69 = "/Users/xavier/Code/cdsat/src/theory.rs" 580 8 589 9

  let%span span70 = "/Users/xavier/Code/cdsat/src/theory.rs" 522 8 525 9

  let%span span71 = "/Users/xavier/Code/cdsat/src/theory.rs" 512 8 515 9

  let%span span72 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span73 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span74 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span75 = "/Users/xavier/Code/cdsat/src/theory.rs" 616 15 616 27

  let%span span76 = "/Users/xavier/Code/cdsat/src/theory.rs" 617 15 617 32

  let%span span77 = "/Users/xavier/Code/cdsat/src/theory.rs" 618 4 618 90

  let%span span78 = "/Users/xavier/Code/cdsat/src/theory.rs" 620 8 629 9

  let%span span79 = "/Users/xavier/Code/cdsat/src/theory.rs" 206 8 206 84

  let%span span80 = "/Users/xavier/Code/cdsat/src/theory.rs" 502 8 505 9

  let%span span81 = "/Users/xavier/Code/cdsat/src/theory.rs" 484 15 484 31

  let%span span82 = "/Users/xavier/Code/cdsat/src/theory.rs" 485 15 485 35

  let%span span83 = "/Users/xavier/Code/cdsat/src/theory.rs" 486 15 486 27

  let%span span84 = "/Users/xavier/Code/cdsat/src/theory.rs" 487 4 487 54

  let%span span85 = "/Users/xavier/Code/cdsat/src/theory.rs" 488 4 488 58

  let%span span86 = "/Users/xavier/Code/cdsat/src/theory.rs" 489 4 489 61

  let%span span87 = "/Users/xavier/Code/cdsat/src/theory.rs" 491 8 491 30

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span11] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span12] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'2 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use Cdsat_Theory_Assign_Type as Assign'0

  use Cdsat_Theory_Term_Type as Term'0

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span13] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use prelude.prelude.Int

  use Cdsat_Theory_Trail_Type as Trail'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span14] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span15] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span16] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'1 a
      end

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span18] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span17] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span21] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span20] level'0 self <= len'0 self)
  && ([%#span19] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span22] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span26] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span25] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span24] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span23] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span28] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span27] invariant_assign'0 self
   -> contains'0 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span31] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span29] invariant_nonneg'0 self)
   -> ([%#span30] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span32] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span35] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span33] is_bool'0 self)
   -> ([%#span34] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span36] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'0 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'0 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  use set.Fset

  use set.Fset

  predicate contains'1 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span37] Fset.mem e self

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'0.t_trail) =
    [%#span38] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'1 j a  -> contains'0 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span39] Fset.remove a self

  use set.Fset

  use set.Fset

  use set.Fset

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span47] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#span40] invariant_nonneg'0 self)
   -> ([%#span45] set_level'0 self s <= level'0 self)
  && ([%#span44] set_level'0 self s >= 0)
  && ([%#span43] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#span42] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'1 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span41] forall i : (Term'0.t_term, Value'0.t_value) . contains'1 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'0.t_trail) =
    [%#span48] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'0.t_trail) =
    [%#span49] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function count_bounds'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 740 4 740 35] (self : Trail'0.t_trail) : () =
    [%#span52] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign (Assign'0.C_Input _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Justified _ _ _) _ tl -> count_bounds'0 tl
      end

  axiom count_bounds'0_spec : forall self : Trail'0.t_trail . ([%#span50] invariant'0 self)
   -> ([%#span51] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a  -> level_of'0 self a <= level'0 self)

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span55] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span53] inv'0 self)
   -> ([%#span54] invariant'2 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span56] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  predicate satisfied_by'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 674 4 674 47] (self : Trail'0.t_trail) (m : Model'0.t_model)

   =
    [%#span57] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a  -> satisfies'0 m a

  function restrict'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 558 4 558 45] (self : Trail'0.t_trail) (level : int) : Trail'0.t_trail

   =
    [%#span68] match self with
      | Trail'0.C_Empty -> Trail'0.C_Empty
      | Trail'0.C_Assign a l tl -> let tl = restrict'0 tl level in let _ = count_bounds'0 tl in if l <= level then
        Trail'0.C_Assign a l tl
      else
        tl

      end

  axiom restrict'0_spec : forall self : Trail'0.t_trail, level : int . ([%#span58] invariant'0 self)
   -> ([%#span59] level >= 0)
   -> ([%#span67] len'0 (restrict'0 self level) <= len'0 self)
  && ([%#span66] (level'0 self >= level  -> level'0 (restrict'0 self level) = level)
  /\ (level'0 self < level  -> level'0 (restrict'0 self level) = level'0 self))
  && ([%#span65] forall m : Model'0.t_model . inv'0 m
   -> satisfied_by'0 self m  -> satisfied_by'0 (restrict'0 self level) m)
  && ([%#span64] forall a : (Term'0.t_term, Value'0.t_value) . not contains'0 self a
   -> not contains'0 (restrict'0 self level) a)
  && ([%#span63] level >= level'0 self  -> restrict'0 self level = self)
  && ([%#span62] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 (restrict'0 self level) a
   -> contains'0 self a
  /\ level_of'0 (restrict'0 self level) a <= level /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span61] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a
   -> level_of'0 self a <= level
   -> contains'0 (restrict'0 self level) a /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span60] invariant'0 (restrict'0 self level))

  function restrict_find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 579 4 579 60] (self : Trail'0.t_trail) (level : int) (d : (Term'0.t_term, Value'0.t_value)) : ()

   =
    [%#span69] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign a _ tl -> if to_pair'0 a = d then () else restrict_find'0 tl level d
      end

  axiom restrict_find'0_spec : forall self : Trail'0.t_trail, level : int, d : (Term'0.t_term, Value'0.t_value) . ([%#stheory7] invariant'0 self)
   -> ([%#stheory8] level >= 0)
   -> ([%#stheory9] contains'0 (restrict'0 self level) d)
   -> ([%#stheory10] find'0 (restrict'0 self level) d = find'0 self d)

  predicate is_input'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 521 4 521 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span70] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Input _ _, _) -> true
      | _ -> false
      end

  predicate is_decision'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 511 4 511 54] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span71] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Decision _ _, _) -> true
      | _ -> false
      end

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span72] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 v a  -> satisfies'0 self a

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span73] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'0 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'0.t_trail)
   =
    [%#span74] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a _ tl -> sound'0 tl /\ justified_sound'0 a
      end

  function find_justified'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 619 4 619 46] (self : Trail'0.t_trail) (kv : (Term'0.t_term, Value'0.t_value)) : ()

   =
    [%#span78] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = kv then () else find_justified'0 tl kv
      end

  axiom find_justified'0_spec : forall self : Trail'0.t_trail, kv : (Term'0.t_term, Value'0.t_value) . ([%#span75] sound'0 self)
   -> ([%#span76] contains'0 self kv)
   -> ([%#span77] forall l : int . forall a : Assign'0.t_assign . find'0 self kv = Option'0.C_Some (a, l)
   -> justified_sound'0 a)

  predicate entails'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 205 4 205 74] (self : Model'0.t_model) (j : Fset.fset (Term'0.t_term, Value'0.t_value)) (c : (Term'0.t_term, Value'0.t_value))

   =
    [%#span79] invariant'2 self  -> satisfy_set'0 self j  -> satisfies'0 self c

  predicate is_justified'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 501 4 501 55] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span80] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified _ _ _, _) -> true
      | _ -> false
      end

  function justification'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 490 4 490 71] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span87] let _ = find_justified'0 self d in match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified j _ _, _) -> j
      | _ -> Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)
      end

  axiom justification'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span81] invariant'0 self)
   -> ([%#span82] is_justified'0 self d)
   -> ([%#span83] sound'0 self)
   -> ([%#span86] is_decision'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#span85] is_input'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#span84] forall m : Model'0.t_model . inv'0 m  -> entails'0 m (justification'0 self d) d)

  constant self  : Trail'0.t_trail

  constant level  : int

  constant d  : (Term'0.t_term, Value'0.t_value)

  function restrict_kind_unchanged [#"/Users/xavier/Code/cdsat/src/theory.rs" 722 4 722 70] (self : Trail'0.t_trail) (level : int) (d : (Term'0.t_term, Value'0.t_value)) : ()


  goal vc_restrict_kind_unchanged : ([%#stheory2] contains'0 (restrict'0 self level) d)
   -> ([%#stheory1] level >= 0)
   -> ([%#stheory0] invariant'0 self)
   -> (([%#stheory9] contains'0 (restrict'0 self level) d)
  && ([%#stheory8] level >= 0) && ([%#stheory7] invariant'0 self))
  /\ (([%#stheory10] find'0 (restrict'0 self level) d = find'0 self d)
   -> (let _ = restrict_find'0 self level d in match self with
    | Trail'0.C_Empty -> ([%#stheory6] is_input'0 self d = is_input'0 (restrict'0 self level) d)
    && ([%#stheory5] is_decision'0 self d = is_decision'0 (restrict'0 self level) d)
    && ([%#stheory4] justification'0 self d = justification'0 (restrict'0 self level) d)
    && ([%#stheory3] is_justified'0 self d = is_justified'0 (restrict'0 self level) d)
    | Trail'0.C_Assign a _ tl -> if to_pair'0 a = d then
      ([%#stheory6] is_input'0 self d = is_input'0 (restrict'0 self level) d)
      && ([%#stheory5] is_decision'0 self d = is_decision'0 (restrict'0 self level) d)
      && ([%#stheory4] justification'0 self d = justification'0 (restrict'0 self level) d)
      && ([%#stheory3] is_justified'0 self d = is_justified'0 (restrict'0 self level) d)
    else
      (([%#stheory2] contains'0 (restrict'0 tl level) d) && ([%#stheory1] level >= 0) && ([%#stheory0] invariant'0 tl))
      /\ (([%#stheory6] is_input'0 tl d = is_input'0 (restrict'0 tl level) d)
      && ([%#stheory5] is_decision'0 tl d = is_decision'0 (restrict'0 tl level) d)
      && ([%#stheory4] justification'0 tl d = justification'0 (restrict'0 tl level) d)
      && ([%#stheory3] is_justified'0 tl d = is_justified'0 (restrict'0 tl level) d)
       -> (let _ = restrict_kind_unchanged tl level d in ([%#stheory6] is_input'0 self d
      = is_input'0 (restrict'0 self level) d)
      && ([%#stheory5] is_decision'0 self d = is_decision'0 (restrict'0 self level) d)
      && ([%#stheory4] justification'0 self d = justification'0 (restrict'0 self level) d)
      && ([%#stheory3] is_justified'0 self d = is_justified'0 (restrict'0 self level) d)))

    end))
end
module Cdsat_Trail_Impl9_ReasonsDontChange_Impl
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 554 15 554 31

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 555 4 555 69

  let%span strail2 = "/Users/xavier/Code/cdsat/src/trail.rs" 556 15 556 64

  let%span strail3 = "/Users/xavier/Code/cdsat/src/trail.rs" 557 15 557 50

  let%span strail4 = "/Users/xavier/Code/cdsat/src/trail.rs" 558 4 558 72

  let%span strail5 = "/Users/xavier/Code/cdsat/src/trail.rs" 559 4 559 99

  let%span strail6 = "/Users/xavier/Code/cdsat/src/trail.rs" 560 4 560 90

  let%span strail7 = "/Users/xavier/Code/cdsat/src/trail.rs" 561 14 561 44

  let%span strail8 = "/Users/xavier/Code/cdsat/src/trail.rs" 553 4 553 12

  let%span stheory9 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span strail10 = "/Users/xavier/Code/cdsat/src/trail.rs" 553 4 553 12

  let%span strail11 = "/Users/xavier/Code/cdsat/src/trail.rs" 553 4 553 12

  let%span strail12 = "/Users/xavier/Code/cdsat/src/trail.rs" 553 4 553 12

  let%span stheory13 = "/Users/xavier/Code/cdsat/src/theory.rs" 484 15 484 31

  let%span stheory14 = "/Users/xavier/Code/cdsat/src/theory.rs" 485 15 485 35

  let%span stheory15 = "/Users/xavier/Code/cdsat/src/theory.rs" 486 15 486 27

  let%span stheory16 = "/Users/xavier/Code/cdsat/src/theory.rs" 487 4 487 54

  let%span stheory17 = "/Users/xavier/Code/cdsat/src/theory.rs" 488 4 488 58

  let%span stheory18 = "/Users/xavier/Code/cdsat/src/theory.rs" 489 4 489 61

  let%span strail19 = "/Users/xavier/Code/cdsat/src/trail.rs" 553 4 553 12

  let%span stheory20 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span stheory21 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span strail22 = "/Users/xavier/Code/cdsat/src/trail.rs" 553 4 553 12

  let%span svec23 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span svec24 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span svec25 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span strail26 = "/Users/xavier/Code/cdsat/src/trail.rs" 553 4 553 12

  let%span span27 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span28 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span29 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span30 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span31 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  let%span span32 = "/Users/xavier/Code/cdsat/src/trail.rs" 146 14 146 59

  let%span span33 = "/Users/xavier/Code/cdsat/src/trail.rs" 144 4 144 10

  let%span span34 = "/Users/xavier/Code/cdsat/src/trail.rs" 140 15 140 48

  let%span span35 = "/Users/xavier/Code/cdsat/src/trail.rs" 141 14 141 44

  let%span span36 = "/Users/xavier/Code/cdsat/src/trail.rs" 138 4 138 10

  let%span span37 = "/Users/xavier/Code/cdsat/src/trail.rs" 134 15 134 45

  let%span span38 = "/Users/xavier/Code/cdsat/src/trail.rs" 135 14 135 47

  let%span span39 = "/Users/xavier/Code/cdsat/src/trail.rs" 132 4 132 10

  let%span span40 = "/Users/xavier/Code/cdsat/src/trail.rs" 127 15 127 32

  let%span span41 = "/Users/xavier/Code/cdsat/src/trail.rs" 128 15 128 32

  let%span span42 = "/Users/xavier/Code/cdsat/src/trail.rs" 129 14 129 31

  let%span span43 = "/Users/xavier/Code/cdsat/src/trail.rs" 125 4 125 10

  let%span span44 = "/Users/xavier/Code/cdsat/src/trail.rs" 122 14 122 45

  let%span span45 = "/Users/xavier/Code/cdsat/src/trail.rs" 120 4 120 10

  let%span span46 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 41 20 41 56

  let%span span47 = "/Users/xavier/Code/cdsat/src/trail.rs" 117 14 117 64

  let%span span48 = "/Users/xavier/Code/cdsat/src/trail.rs" 115 4 115 10

  let%span span49 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 31 20 31 53

  let%span span50 = "/Users/xavier/Code/cdsat/src/trail.rs" 112 14 112 61

  let%span span51 = "/Users/xavier/Code/cdsat/src/trail.rs" 110 4 110 10

  let%span span52 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 21 20 21 53

  let%span span53 = "/Users/xavier/Code/cdsat/src/trail.rs" 107 14 107 61

  let%span span54 = "/Users/xavier/Code/cdsat/src/trail.rs" 105 4 105 10

  let%span span55 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 11 20 11 56

  let%span span56 = "/Users/xavier/Code/cdsat/src/trail.rs" 102 14 102 64

  let%span span57 = "/Users/xavier/Code/cdsat/src/trail.rs" 100 4 100 10

  let%span span58 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 14 70 15

  let%span span59 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 23 70 24

  let%span span60 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 69 14 69 59

  let%span span61 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 64 15 64 48

  let%span span62 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 16 66 17

  let%span span63 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 25 66 26

  let%span span64 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 65 14 65 44

  let%span span65 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 59 15 59 45

  let%span span66 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 16 61 17

  let%span span67 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 25 61 26

  let%span span68 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 60 14 60 47

  let%span span69 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 53 15 53 32

  let%span span70 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 54 15 54 32

  let%span span71 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 13 56 14

  let%span span72 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 22 56 23

  let%span span73 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 31 56 32

  let%span span74 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 55 14 55 31

  let%span span75 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 50 12 50 13

  let%span span76 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 49 14 49 45

  let%span span77 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 18 46 19

  let%span span78 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 27 46 28

  let%span span79 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 45 14 45 64

  let%span span80 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 18 36 19

  let%span span81 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 27 36 28

  let%span span82 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 35 14 35 61

  let%span span83 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 18 26 19

  let%span span84 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 27 26 28

  let%span span85 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 25 14 25 61

  let%span span86 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 18 16 19

  let%span span87 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 27 16 28

  let%span span88 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 15 14 15 64

  let%span span89 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span90 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span91 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 129 8 129 78

  let%span span92 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span93 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span94 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span95 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span96 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span97 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span98 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span99 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span100 = "/Users/xavier/Code/cdsat/src/theory.rs" 206 8 206 84

  let%span span101 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span102 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span103 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span104 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span105 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span106 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span107 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span108 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span109 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span110 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span111 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span112 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span113 = "/Users/xavier/Code/cdsat/src/theory.rs" 616 15 616 27

  let%span span114 = "/Users/xavier/Code/cdsat/src/theory.rs" 617 15 617 32

  let%span span115 = "/Users/xavier/Code/cdsat/src/theory.rs" 618 4 618 90

  let%span span116 = "/Users/xavier/Code/cdsat/src/theory.rs" 512 8 515 9

  let%span span117 = "/Users/xavier/Code/cdsat/src/theory.rs" 522 8 525 9

  let%span span118 = "/Users/xavier/Code/cdsat/src/theory.rs" 502 8 505 9

  let%span span119 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span120 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span121 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span122 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span123 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span124 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span125 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span126 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span127 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span128 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span129 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span130 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span131 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span132 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span133 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span134 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span135 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span136 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span137 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span138 = "/Users/xavier/Code/cdsat/src/trail.rs" 179 4 179 12

  let%span span139 = "/Users/xavier/Code/cdsat/src/theory.rs" 738 15 738 31

  let%span span140 = "/Users/xavier/Code/cdsat/src/theory.rs" 739 4 739 83

  let%span span141 = "/Users/xavier/Code/cdsat/src/theory.rs" 675 8 675 71

  let%span span142 = "/Users/xavier/Code/cdsat/src/theory.rs" 548 15 548 31

  let%span span143 = "/Users/xavier/Code/cdsat/src/theory.rs" 550 15 550 25

  let%span span144 = "/Users/xavier/Code/cdsat/src/theory.rs" 549 14 549 32

  let%span span145 = "/Users/xavier/Code/cdsat/src/theory.rs" 551 4 551 141

  let%span span146 = "/Users/xavier/Code/cdsat/src/theory.rs" 552 4 552 142

  let%span span147 = "/Users/xavier/Code/cdsat/src/theory.rs" 553 4 553 56

  let%span span148 = "/Users/xavier/Code/cdsat/src/theory.rs" 554 4 554 71

  let%span span149 = "/Users/xavier/Code/cdsat/src/theory.rs" 555 4 555 77

  let%span span150 = "/Users/xavier/Code/cdsat/src/theory.rs" 556 14 556 126

  let%span span151 = "/Users/xavier/Code/cdsat/src/theory.rs" 557 14 557 40

  let%span span152 = "/Users/xavier/Code/cdsat/src/theory.rs" 575 15 575 31

  let%span span153 = "/Users/xavier/Code/cdsat/src/theory.rs" 576 15 576 25

  let%span span154 = "/Users/xavier/Code/cdsat/src/theory.rs" 577 15 577 47

  let%span span155 = "/Users/xavier/Code/cdsat/src/theory.rs" 578 14 578 58

  let%span span156 = "/Users/xavier/Code/cdsat/src/theory.rs" 715 15 715 31

  let%span span157 = "/Users/xavier/Code/cdsat/src/theory.rs" 716 15 716 25

  let%span span158 = "/Users/xavier/Code/cdsat/src/theory.rs" 717 15 717 47

  let%span span159 = "/Users/xavier/Code/cdsat/src/theory.rs" 718 14 718 74

  let%span span160 = "/Users/xavier/Code/cdsat/src/theory.rs" 719 14 719 76

  let%span span161 = "/Users/xavier/Code/cdsat/src/theory.rs" 720 14 720 72

  let%span span162 = "/Users/xavier/Code/cdsat/src/theory.rs" 721 14 721 66

  let%span span163 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span164 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 13 814 14

  let%span span165 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 24 814 25

  let%span span166 = "/Users/xavier/Code/cdsat/src/trail.rs" 809 0 809 73

  let%span span167 = "/Users/xavier/Code/cdsat/src/trail.rs" 810 0 810 63

  let%span span168 = "/Users/xavier/Code/cdsat/src/trail.rs" 811 0 811 55

  let%span span169 = "/Users/xavier/Code/cdsat/src/trail.rs" 812 0 812 52

  let%span span170 = "/Users/xavier/Code/cdsat/src/trail.rs" 813 10 813 33

  let%span span171 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 33 814 39

  let%span span172 = "/Users/xavier/Code/cdsat/src/trail.rs" 808 10 808 17

  let%span span173 = "/Users/xavier/Code/cdsat/src/trail.rs" 807 0 807 8

  let%span span174 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span175 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span176 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span177 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span178 = "/Users/xavier/Code/cdsat/src/term.rs" 195 8 225 9

  let%span span179 = "/Users/xavier/Code/cdsat/src/term.rs" 180 8 180 25

  let%span span180 = "/Users/xavier/Code/cdsat/src/trail.rs" 726 8 726 61

  let%span span181 = "/Users/xavier/Code/cdsat/src/trail.rs" 646 8 648 9

  let%span span182 = "/Users/xavier/Code/cdsat/src/trail.rs" 291 12 291 92

  let%span span183 = "/Users/xavier/Code/cdsat/src/trail.rs" 313 4 313 82

  let%span span184 = "/Users/xavier/Code/cdsat/src/trail.rs" 314 14 314 40

  let%span span185 = "/Users/xavier/Code/cdsat/src/trail.rs" 315 4 315 115

  let%span span186 = "/Users/xavier/Code/cdsat/src/trail.rs" 316 4 316 115

  let%span span187 = "/Users/xavier/Code/cdsat/src/trail.rs" 317 4 317 101

  let%span span188 = "/Users/xavier/Code/cdsat/src/trail.rs" 312 14 312 24

  let%span span189 = "/Users/xavier/Code/cdsat/src/trail.rs" 310 4 310 12

  let%span span190 = "/Users/xavier/Code/cdsat/src/trail.rs" 268 8 272 9

  let%span span191 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 31 8 31 32

  let%span span192 = "/Users/xavier/Code/cdsat/src/trail.rs" 547 4 547 12

  let%span span193 = "/Users/xavier/Code/cdsat/src/trail.rs" 254 8 263 9

  let%span span194 = "/Users/xavier/Code/cdsat/src/trail.rs" 279 12 283 13

  let%span span195 = "/Users/xavier/Code/cdsat/src/theory.rs" 31 8 54 9

  let%span span196 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 20 8 20 31

  let%span span197 = "/Users/xavier/Code/cdsat/src/trail.rs" 238 8 248 9

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function eq_cmp'2 (_1 : usize) (_2 : usize) : ()

  function antisym2'2 (_1 : usize) (_2 : usize) : ()

  function antisym1'2 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'2 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'2 (_1 : usize) : ()

  function cmp_gt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'2 (_1 : usize) (_2 : usize) : ()

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  predicate invariant'10 (self : TrailIndex'0.t_trailindex) =
    [%#span27] true

  predicate inv'7 (_x : TrailIndex'0.t_trailindex)

  axiom inv'7 : forall x : TrailIndex'0.t_trailindex . inv'7 x = true

  use Cdsat_Trail_Assignment_Type as Assignment'0

  use seq.Seq

  predicate invariant'9 (self : Seq.seq (Assignment'0.t_assignment)) =
    [%#span27] true

  predicate inv'6 (_x : Seq.seq (Assignment'0.t_assignment))

  axiom inv'6 : forall x : Seq.seq (Assignment'0.t_assignment) . inv'6 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  constant max'0 : usize = [%#span28] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'5 (_x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

  function shallow_model'2 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) : Seq.seq (Assignment'0.t_assignment)


  axiom shallow_model'2_spec : forall self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . ([%#svec23] inv'5 self)
   -> ([%#svec25] inv'6 (shallow_model'2 self))
  && ([%#svec24] Seq.length (shallow_model'2 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'8 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span29] inv'6 (shallow_model'2 self)

  axiom inv'5 : forall x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . inv'5 x = true

  predicate invariant'7 (self : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span27] true

  predicate inv'4 (_x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'4 : forall x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'4 x = true

  use seq.Seq

  predicate inv'3 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  function shallow_model'1 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))


  axiom shallow_model'1_spec : forall self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . ([%#svec23] inv'3 self)
   -> ([%#svec25] inv'4 (shallow_model'1 self))
  && ([%#svec24] Seq.length (shallow_model'1 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'6 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span29] inv'4 (shallow_model'1 self)

  axiom inv'3 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'3 x
  = true

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span30] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span31] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  function eq_cmp'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 147 4 147 31] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span33] ()

  axiom eq_cmp'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span32] (x = y)
  = (cmp_log'0 x y = Ordering'0.C_Equal)

  function antisym2'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 142 4 142 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span36] ()

  axiom antisym2'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span34] cmp_log'0 x y
  = Ordering'0.C_Greater)  -> ([%#span35] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 136 4 136 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span39] ()

  axiom antisym1'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span37] cmp_log'0 x y
  = Ordering'0.C_Less)  -> ([%#span38] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 130 4 130 52] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()

   =
    [%#span43] ()

  axiom trans'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span40] cmp_log'0 x y
  = o)  -> ([%#span41] cmp_log'0 y z = o)  -> ([%#span42] cmp_log'0 x z = o)

  function refl'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 123 4 123 20] (x : TrailIndex'0.t_trailindex) : () =
    [%#span45] ()

  axiom refl'1_spec : forall x : TrailIndex'0.t_trailindex . [%#span44] cmp_log'0 x x = Ordering'0.C_Equal

  function gt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span46] cmp_log'0 self o = Ordering'0.C_Greater

  function cmp_gt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 118 4 118 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span48] ()

  axiom cmp_gt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span47] gt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Greater)

  function ge_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span49] cmp_log'0 self o <> Ordering'0.C_Less

  function cmp_ge_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 113 4 113 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span51] ()

  axiom cmp_ge_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span50] ge_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Less)

  function lt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span52] cmp_log'0 self o = Ordering'0.C_Less

  function cmp_lt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 108 4 108 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span54] ()

  axiom cmp_lt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span53] lt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Less)

  function le_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span55] cmp_log'0 self o <> Ordering'0.C_Greater

  function cmp_le_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 103 4 103 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span57] ()

  axiom cmp_le_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span56] le_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Greater)

  function eq_cmp'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom eq_cmp'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span58] inv'7 x)
   -> ([%#span59] inv'7 y)  -> ([%#span60] (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal))

  function antisym2'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym2'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span61] cmp_log'0 x y
  = Ordering'0.C_Greater)
   -> ([%#span62] inv'7 x)  -> ([%#span63] inv'7 y)  -> ([%#span64] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym1'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span65] cmp_log'0 x y
  = Ordering'0.C_Less)
   -> ([%#span66] inv'7 x)  -> ([%#span67] inv'7 y)  -> ([%#span68] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span69] cmp_log'0 x y
  = o)
   -> ([%#span70] cmp_log'0 y z = o)
   -> ([%#span71] inv'7 x)  -> ([%#span72] inv'7 y)  -> ([%#span73] inv'7 z)  -> ([%#span74] cmp_log'0 x z = o)

  function refl'0 (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'0_spec : forall x : TrailIndex'0.t_trailindex . ([%#span75] inv'7 x)
   -> ([%#span76] cmp_log'0 x x = Ordering'0.C_Equal)

  function cmp_gt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_gt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span77] inv'7 x)
   -> ([%#span78] inv'7 y)  -> ([%#span79] gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater))

  function cmp_ge_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_ge_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span80] inv'7 x)
   -> ([%#span81] inv'7 y)  -> ([%#span82] ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less))

  function cmp_lt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_lt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span83] inv'7 x)
   -> ([%#span84] inv'7 y)  -> ([%#span85] lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less))

  function cmp_le_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_le_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span86] inv'7 x)
   -> ([%#span87] inv'7 y)  -> ([%#span88] le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater))

  predicate invariant'5 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span27] true

  predicate inv'2 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'2 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'2 x = true

  use seq.Seq

  predicate inv'1 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function shallow_model'0 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom shallow_model'0_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#svec23] inv'1 self)
   -> ([%#svec25] inv'2 (shallow_model'0 self))
  && ([%#svec24] Seq.length (shallow_model'0 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'4 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span29] inv'2 (shallow_model'0 self)

  axiom inv'1 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'1 x = true

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span89] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'3 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span90] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'3 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use seq.Seq

  predicate contains'2 (self : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) =
    [%#span91] exists i : int . 0 <= i /\ i < Seq.length self /\ Seq.get self i = e

  use Cdsat_Trail_Reason_Type as Reason'0

  use Cdsat_Theory_Trail_Type as Trail'1

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'1.t_trail) : int

  axiom len'0_spec : forall self : Trail'1.t_trail . [%#span92] len'0 self >= 0

  use Cdsat_Theory_Term_Type as Term'0

  use set.Fset

  use set.Fset

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span93] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span96] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span94] inv'0 self)
   -> ([%#span95] invariant'3 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span97] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  use set.Fset

  predicate contains'3 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span98] Fset.mem e self

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span99] forall a : (Term'0.t_term, Value'0.t_value) . contains'3 v a  -> satisfies'0 self a

  predicate entails'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 205 4 205 74] (self : Model'0.t_model) (j : Fset.fset (Term'0.t_term, Value'0.t_value)) (c : (Term'0.t_term, Value'0.t_value))

   =
    [%#span100] invariant'3 self  -> satisfy_set'0 self j  -> satisfies'0 self c

  use Cdsat_Theory_Assign_Type as Assign'0

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span101] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'0 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'1.t_trail)
   =
    [%#span102] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a _ tl -> sound'0 tl /\ justified_sound'0 a
      end

  use prelude.prelude.Int

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span103] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'1.t_trail) =
    [%#span104] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'2 a
      end

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'1.t_trail) : int =
    [%#span105] match self with
      | Trail'1.C_Empty -> 0
      | Trail'1.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'1.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'1.t_trail . ([%#stheory21] level'0 self <= len'0 self)
  && ([%#stheory20] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'1.t_trail) =
    [%#span106] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span107] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span111] match self with
      | Trail'1.C_Empty -> Option'0.C_None
      | Trail'1.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span110] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span109] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span108] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  predicate contains'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span112] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'1_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#stheory9] invariant_assign'0 self
   -> contains'1 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  function find_justified'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 619 4 619 46] (self : Trail'1.t_trail) (kv : (Term'0.t_term, Value'0.t_value)) : ()


  axiom find_justified'0_spec : forall self : Trail'1.t_trail, kv : (Term'0.t_term, Value'0.t_value) . ([%#span113] sound'0 self)
   -> ([%#span114] contains'1 self kv)
   -> ([%#span115] forall l : int . forall a : Assign'0.t_assign . find'0 self kv = Option'0.C_Some (a, l)
   -> justified_sound'0 a)

  predicate is_decision'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 511 4 511 54] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span116] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Decision _ _, _) -> true
      | _ -> false
      end

  predicate is_input'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 521 4 521 51] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span117] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Input _ _, _) -> true
      | _ -> false
      end

  predicate is_justified'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 501 4 501 55] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span118] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified _ _ _, _) -> true
      | _ -> false
      end

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span119] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span122] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span120] is_bool'0 self)
   -> ([%#span121] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'1.t_trail) =
    [%#span123] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> let ap = to_pair'0 a in not contains'1 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'1 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'1.t_trail) =
    [%#span124] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'3 j a  -> contains'1 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span125] Fset.remove a self

  use set.Fset

  use set.Fset

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span128] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span126] invariant_nonneg'0 self)
   -> ([%#span127] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'1.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_spec : forall self : Trail'1.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#span129] invariant_nonneg'0 self)
   -> ([%#span134] set_level'0 self s <= level'0 self)
  && ([%#span133] set_level'0 self s >= 0)
  && ([%#span132] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#span131] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'3 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span130] forall i : (Term'0.t_term, Value'0.t_value) . contains'3 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'1.t_trail) =
    [%#span136] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'1.t_trail) =
    [%#span137] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function justification'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 490 4 490 71] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)


  axiom justification'0_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#stheory13] invariant'1 self)
   -> ([%#stheory14] is_justified'0 self d)
   -> ([%#stheory15] sound'0 self)
   -> ([%#stheory18] is_decision'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#stheory17] is_input'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#stheory16] forall m : Model'0.t_model . inv'0 m  -> entails'0 m (justification'0 self d) d)

  use prelude.prelude.Snapshot

  use prelude.prelude.Borrow

  function level_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 180 4 180 33] (self : TrailIndex'0.t_trailindex) : int
   =
    [%#span138] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 self)

  function count_bounds'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 740 4 740 35] (self : Trail'1.t_trail) : ()

  axiom count_bounds'0_spec : forall self : Trail'1.t_trail . ([%#span139] invariant'1 self)
   -> ([%#span140] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 self a
   -> level_of'0 self a <= level'0 self)

  predicate satisfied_by'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 674 4 674 47] (self : Trail'1.t_trail) (m : Model'0.t_model)

   =
    [%#span141] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 self a  -> satisfies'0 m a

  function restrict'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 558 4 558 45] (self : Trail'1.t_trail) (level : int) : Trail'1.t_trail


  axiom restrict'0_spec : forall self : Trail'1.t_trail, level : int . ([%#span142] invariant'1 self)
   -> ([%#span143] level >= 0)
   -> ([%#span151] len'0 (restrict'0 self level) <= len'0 self)
  && ([%#span150] (level'0 self >= level  -> level'0 (restrict'0 self level) = level)
  /\ (level'0 self < level  -> level'0 (restrict'0 self level) = level'0 self))
  && ([%#span149] forall m : Model'0.t_model . inv'0 m
   -> satisfied_by'0 self m  -> satisfied_by'0 (restrict'0 self level) m)
  && ([%#span148] forall a : (Term'0.t_term, Value'0.t_value) . not contains'1 self a
   -> not contains'1 (restrict'0 self level) a)
  && ([%#span147] level >= level'0 self  -> restrict'0 self level = self)
  && ([%#span146] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (restrict'0 self level) a
   -> contains'1 self a
  /\ level_of'0 (restrict'0 self level) a <= level /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span145] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 self a
   -> level_of'0 self a <= level
   -> contains'1 (restrict'0 self level) a /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span144] invariant'1 (restrict'0 self level))

  function restrict_find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 579 4 579 60] (self : Trail'1.t_trail) (level : int) (d : (Term'0.t_term, Value'0.t_value)) : ()


  axiom restrict_find'0_spec : forall self : Trail'1.t_trail, level : int, d : (Term'0.t_term, Value'0.t_value) . ([%#span152] invariant'1 self)
   -> ([%#span153] level >= 0)
   -> ([%#span154] contains'1 (restrict'0 self level) d)
   -> ([%#span155] find'0 (restrict'0 self level) d = find'0 self d)

  function restrict_kind_unchanged'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 722 4 722 70] (self : Trail'1.t_trail) (level : int) (d : (Term'0.t_term, Value'0.t_value)) : ()


  axiom restrict_kind_unchanged'0_spec : forall self : Trail'1.t_trail, level : int, d : (Term'0.t_term, Value'0.t_value) . ([%#span156] invariant'1 self)
   -> ([%#span157] level >= 0)
   -> ([%#span158] contains'1 (restrict'0 self level) d)
   -> ([%#span162] is_input'0 self d = is_input'0 (restrict'0 self level) d)
  && ([%#span161] is_decision'0 self d = is_decision'0 (restrict'0 self level) d)
  && ([%#span160] justification'0 self d = justification'0 (restrict'0 self level) d)
  && ([%#span159] is_justified'0 self d = is_justified'0 (restrict'0 self level) d)

  use Cdsat_Trail_Trail_Type as Trail'0

  use set.Fset

  function insert'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span163] Fset.add e self

  use seq.Seq

  use prelude.seq_ext.SeqExt

  use seq.Seq

  function remove'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 814 0 814 39] (s : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom remove'1_def : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . remove'1 s e
  = ([%#span173] if s = (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) then
    Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)
  else
    if Seq.get s (Seq.length s - 1) = e then
      remove'1 (SeqExt.subsequence s 0 (Seq.length s - 1)) e
    else
      Seq.snoc (remove'1 (SeqExt.subsequence s 0 (Seq.length s - 1)) e) (Seq.get s (Seq.length s - 1))

  )

  axiom remove'1_spec : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . ([%#span164] inv'2 s)
   -> ([%#span165] inv'7 e)
   -> ([%#span171] inv'2 (remove'1 s e))
  && ([%#span170] Seq.length (remove'1 s e) <= Seq.length s)
  && ([%#span169] contains'2 s e  -> Seq.length (remove'1 s e) < Seq.length s)
  && ([%#span168] forall t : TrailIndex'0.t_trailindex . inv'7 t  -> contains'2 (remove'1 s e) t  -> t <> e)
  && ([%#span167] forall t : TrailIndex'0.t_trailindex . inv'7 t  -> contains'2 (remove'1 s e) t  -> contains'2 s t)
  && ([%#span166] forall t : TrailIndex'0.t_trailindex . inv'7 t
   -> contains'2 s t  -> e <> t  -> contains'2 (remove'1 s e) t)

  use Cdsat_Term_Value_Type as Value'1

  use Cdsat_Term_Term_Type as Term'1

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  function deep_model'4 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span174] match self with
      | Value'1.C_Bool b -> Value'0.C_Bool b
      | Value'1.C_Rat br -> Value'0.C_Rat (deep_model'4 br)
      end

  function shallow_model'4 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span175] deep_model'1 self

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  use Cdsat_Term_Sort_Type as Sort'1

  function deep_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'1.t_sort) : Sort'0.t_sort =
    [%#span176] match self with
      | Sort'1.C_Boolean -> Sort'0.C_Boolean
      | Sort'1.C_Rational -> Sort'0.C_Rational
      end

  function deep_model'2 (self : usize) : int =
    [%#span177] UIntSize.to_int self

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 193 4 193 44] (self : Term'1.t_term) : Term'0.t_term =
    [%#span178] match self with
      | Term'1.C_Variable v s -> Term'0.C_Variable (Var'0.C_Var (deep_model'2 v) (deep_model'3 s))
      | Term'1.C_Value v -> Term'0.C_Value (deep_model'1 v)
      | Term'1.C_Plus l r -> Term'0.C_Plus (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Eq l r -> Term'0.C_Eq (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Conj l r -> Term'0.C_Conj (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Disj l r -> Term'0.C_Disj (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Neg t -> Term'0.C_Neg (deep_model'0 t)
      | Term'1.C_Impl l r -> Term'0.C_Disj (Term'0.C_Neg (deep_model'0 l)) (deep_model'0 r)
      | Term'1.C_Times l r -> Term'0.C_Plus (Term'0.C_Value (Value'0.C_Rat (deep_model'4 l))) (deep_model'0 r)
      | Term'1.C_Lt l r -> Term'0.C_Eq (deep_model'0 l) (deep_model'0 r)
      end

  function shallow_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 179 4 179 50] (self : Term'1.t_term) : Term'0.t_term
   =
    [%#span179] deep_model'0 self

  function term_value'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 725 4 725 61] (self : Assignment'0.t_assignment) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span180] (shallow_model'3 (Cdsat_Trail_Assignment_Type.assignment_term self), shallow_model'4 (Cdsat_Trail_Assignment_Type.assignment_val self))

  use seq.Seq

  use seq.Seq

  use Cdsat_Trail_Trail_Type as Cdsat_Trail_Trail_Type

  function index_logic'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 645 4 645 77] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span181] term_value'0 (Seq.get (shallow_model'2 (Seq.get (shallow_model'1 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)))) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)))

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 289 4 289 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex)

   =
    [%#span182] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)
    < Seq.length (shallow_model'1 (Cdsat_Trail_Trail_Type.trail_assignments self))
    /\ UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)
    < Seq.length (shallow_model'2 (Seq.get (shallow_model'1 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))))

  function abstract_justification'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 318 4 321 44] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) : Fset.fset (Term'0.t_term, Value'0.t_value)


  axiom abstract_justification'0_def : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . abstract_justification'0 self just
  = ([%#span189] if Seq.length just > 0 then
    let set = abstract_justification'0 self (remove'1 just (Seq.get just 0)) in let a = index_logic'0 self (Seq.get just 0) in insert'0 set a
  else
    Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)
  )

  axiom abstract_justification'0_spec : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span183] forall i : int . 0
  <= i
  /\ i < Seq.length just  -> contains'0 self (Seq.get just i))
   -> ([%#span187] forall i : int . 0 <= i /\ i < Seq.length just
   -> contains'3 (abstract_justification'0 self just) (index_logic'0 self (Seq.get just i)))
  && ([%#span186] forall a : (Term'0.t_term, Value'0.t_value) . contains'3 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'2 just ix /\ a = index_logic'0 self ix))
  && ([%#span185] forall a : (Term'0.t_term, Value'0.t_value) . contains'3 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'0 self ix /\ a = index_logic'0 self ix))
  && ([%#span184] Fset.cardinal (abstract_justification'0 self just) <= Seq.length just)

  use prelude.prelude.Snapshot

  predicate justified_correct'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 267 4 267 78] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) (j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

   =
    [%#span190] (forall i : TrailIndex'0.t_trailindex . contains'2 (shallow_model'0 j) i
     -> lt_log'0 i ix /\ contains'0 self i)
    /\ is_justified'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ justification'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    = abstract_justification'0 self (shallow_model'0 j)

  function index_logic'3 [@inline:trivial] (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (ix : usize) : Assignment'0.t_assignment

   =
    [%#span191] Seq.get (shallow_model'2 self) (UIntSize.to_int ix)

  function index_logic'2 [@inline:trivial] (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (ix : usize) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span191] Seq.get (shallow_model'1 self) (UIntSize.to_int ix)

  function reason'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 549 4 549 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : Reason'0.t_reason

   =
    [%#span192] Cdsat_Trail_Assignment_Type.assignment_reason (index_logic'3 (index_logic'2 (Cdsat_Trail_Trail_Type.trail_assignments self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)) (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix))

  predicate justified_is_justified'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 253 4 253 47] (self : Trail'0.t_trail) =
    [%#span193] forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> (let reason = reason'0 self ix in (reason = Reason'0.C_Decision)
    = is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ (reason = Reason'0.C_Input)
    = is_input'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ (forall j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . reason = Reason'0.C_Justified j
     -> justified_correct'0 self ix j))

  predicate abstract_relation'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 277 4 277 42] (self : Trail'0.t_trail) =
    [%#span194] (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> contains'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix))
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    = UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))
    /\ (forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
     -> (exists ix : TrailIndex'0.t_trailindex . contains'0 self ix
    /\ level_log'0 ix = level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
    /\ index_logic'0 self ix = a))

  function well_sorted'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 30 4 30 36] (self : Term'0.t_term) : bool =
    [%#span195] match self with
      | Term'0.C_Variable v -> true
      | Term'0.C_Value v -> true
      | Term'0.C_Plus l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Rational
      | Term'0.C_Eq l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r
      | Term'0.C_Conj l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Boolean
      | Term'0.C_Disj l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Boolean
      | Term'0.C_Neg t -> well_sorted'0 t /\ sort'0 t = Sort'0.C_Boolean
      end

  function index_logic'1 [@inline:trivial] (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (ix : int) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span196] Seq.get (shallow_model'1 self) ix

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 237 4 237 34] (self : Trail'0.t_trail) =
    [%#span197] abstract_relation'0 self
    /\ sound'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    /\ invariant'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    /\ level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    = UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self)
    /\ UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self)
    = Seq.length (shallow_model'1 (Cdsat_Trail_Trail_Type.trail_assignments self)) - 1
    /\ (forall i : int . 0 <= i /\ i < Seq.length (shallow_model'1 (Cdsat_Trail_Trail_Type.trail_assignments self))
     -> Seq.length (shallow_model'2 (index_logic'1 (Cdsat_Trail_Trail_Type.trail_assignments self) i)) > 0)
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix) = 0)
    = is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix))
    /\ (forall j : TrailIndex'0.t_trailindex . forall i : TrailIndex'0.t_trailindex . contains'0 self i
     -> contains'0 self j  -> i <> j  -> index_logic'0 self i <> index_logic'0 self j)
    /\ justified_is_justified'0 self
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> well_sorted'0 (let (a, _) = index_logic'0 self ix in a))

  constant self  : Trail'0.t_trail

  constant other  : Trail'0.t_trail

  function reasons_dont_change [#"/Users/xavier/Code/cdsat/src/trail.rs" 562 4 562 45] (self : Trail'0.t_trail) (other : Trail'0.t_trail) : ()


  goal vc_reasons_dont_change : ([%#strail6] forall ix : TrailIndex'0.t_trailindex . contains'0 other ix
   -> reason'0 self ix = reason'0 other ix)
   -> ([%#strail5] forall ix : TrailIndex'0.t_trailindex . contains'0 other ix
   -> index_logic'0 self ix = index_logic'0 other ix)
   -> ([%#strail4] forall ix : TrailIndex'0.t_trailindex . contains'0 other ix  -> contains'0 self ix)
   -> ([%#strail3] level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost other))
  = UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level other))
   -> ([%#strail2] restrict'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level other))
  = Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost other))
   -> ([%#strail1] abstract_relation'0 other /\ invariant'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost other)))
   -> ([%#strail0] invariant'0 self)
   -> (let _ = restrict_kind_unchanged'0 in ([%#strail8] forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
   -> level_log'0 ix <= UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level other)  -> contains'0 other ix)
  && (let _ = () in let _ = () in ([%#strail10] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost other)) a
   -> is_justified'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
  = is_justified'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost other)) a)
  && (let _ = () in let _ = () in ([%#strail11] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost other)) a
   -> is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
  = is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost other)) a)
  && (let _ = () in let _ = () in ([%#strail12] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost other)) a
   -> is_input'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
  = is_input'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost other)) a)
  && (let _ = () in let _ = () in (forall a : (Term'0.t_term, Value'0.t_value) . ([%#stheory9] invariant_assign'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost other))
   -> contains'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost other)) a = true
   -> sort'0 (let (a, _) = a in a) = sort'1 (let (_, a) = a in a))
   -> (if contains'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost other)) a then
    (([%#stheory15] sound'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)))
    && ([%#stheory14] is_justified'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a)
    && ([%#stheory13] invariant'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))))
    /\ (([%#stheory18] is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
     -> justification'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
    = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
    && ([%#stheory17] is_input'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
     -> justification'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
    = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
    && ([%#stheory16] forall m : Model'0.t_model . inv'0 m
     -> entails'0 m (justification'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a) a)
     -> ([%#stheory15] sound'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost other)))
    && ([%#stheory14] is_justified'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost other)) a)
    && ([%#stheory13] invariant'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost other))))
  else
    true
  ))
  /\ ([%#strail19] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost other)) a
   -> justification'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
  = justification'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost other)) a)
  && (let _ = () in let _ = () in ([%#strail22] forall ix : TrailIndex'0.t_trailindex . contains'0 other ix
   -> level_log'0 ix <= level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost other)))
  && (let _ = () in let _ = () in (forall j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . forall ix : TrailIndex'0.t_trailindex . if contains'0 other ix then
    if reason'0 other ix = Reason'0.C_Justified j then
      forall i : TrailIndex'0.t_trailindex . [%#svec23] inv'1 j
    else
      true

  else
    true
  )
  /\ ([%#strail26] forall j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . forall ix : TrailIndex'0.t_trailindex . contains'0 other ix
   -> reason'0 other ix = Reason'0.C_Justified j
   -> (forall i : TrailIndex'0.t_trailindex . contains'2 (shallow_model'0 j) i  -> lt_log'0 i ix /\ contains'0 other i))
  && (let _ = () in let _ = () in [%#strail7] justified_is_justified'0 other))))))))
end
module Cdsat_Trail_Impl9_Restrict
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 586 38 586 56

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 590 20 590 66

  let%span strail2 = "/Users/xavier/Code/cdsat/src/trail.rs" 591 20 591 39

  let%span strail3 = "/Users/xavier/Code/cdsat/src/trail.rs" 590 8 590 68

  let%span strail4 = "/Users/xavier/Code/cdsat/src/trail.rs" 595 20 595 36

  let%span strail5 = "/Users/xavier/Code/cdsat/src/trail.rs" 597 31 597 76

  let%span strail6 = "/Users/xavier/Code/cdsat/src/trail.rs" 598 31 598 80

  let%span strail7 = "/Users/xavier/Code/cdsat/src/trail.rs" 599 31 599 71

  let%span strail8 = "/Users/xavier/Code/cdsat/src/trail.rs" 604 12 604 80

  let%span strail9 = "/Users/xavier/Code/cdsat/src/trail.rs" 606 26 606 27

  let%span strail10 = "/Users/xavier/Code/cdsat/src/trail.rs" 607 25 607 86

  let%span strail11 = "/Users/xavier/Code/cdsat/src/trail.rs" 609 26 609 50

  let%span strail12 = "/Users/xavier/Code/cdsat/src/trail.rs" 610 12 610 53

  let%span strail13 = "/Users/xavier/Code/cdsat/src/trail.rs" 579 4 579 40

  let%span strail14 = "/Users/xavier/Code/cdsat/src/trail.rs" 580 15 580 36

  let%span strail15 = "/Users/xavier/Code/cdsat/src/trail.rs" 581 14 581 59

  let%span strail16 = "/Users/xavier/Code/cdsat/src/trail.rs" 583 4 583 111

  let%span strail17 = "/Users/xavier/Code/cdsat/src/trail.rs" 584 4 584 112

  let%span span18 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span19 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span20 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  let%span span21 = "/Users/xavier/Code/cdsat/src/trail.rs" 146 14 146 59

  let%span span22 = "/Users/xavier/Code/cdsat/src/trail.rs" 144 4 144 10

  let%span span23 = "/Users/xavier/Code/cdsat/src/trail.rs" 140 15 140 48

  let%span span24 = "/Users/xavier/Code/cdsat/src/trail.rs" 141 14 141 44

  let%span span25 = "/Users/xavier/Code/cdsat/src/trail.rs" 138 4 138 10

  let%span span26 = "/Users/xavier/Code/cdsat/src/trail.rs" 134 15 134 45

  let%span span27 = "/Users/xavier/Code/cdsat/src/trail.rs" 135 14 135 47

  let%span span28 = "/Users/xavier/Code/cdsat/src/trail.rs" 132 4 132 10

  let%span span29 = "/Users/xavier/Code/cdsat/src/trail.rs" 127 15 127 32

  let%span span30 = "/Users/xavier/Code/cdsat/src/trail.rs" 128 15 128 32

  let%span span31 = "/Users/xavier/Code/cdsat/src/trail.rs" 129 14 129 31

  let%span span32 = "/Users/xavier/Code/cdsat/src/trail.rs" 125 4 125 10

  let%span span33 = "/Users/xavier/Code/cdsat/src/trail.rs" 122 14 122 45

  let%span span34 = "/Users/xavier/Code/cdsat/src/trail.rs" 120 4 120 10

  let%span span35 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 41 20 41 56

  let%span span36 = "/Users/xavier/Code/cdsat/src/trail.rs" 117 14 117 64

  let%span span37 = "/Users/xavier/Code/cdsat/src/trail.rs" 115 4 115 10

  let%span span38 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 31 20 31 53

  let%span span39 = "/Users/xavier/Code/cdsat/src/trail.rs" 112 14 112 61

  let%span span40 = "/Users/xavier/Code/cdsat/src/trail.rs" 110 4 110 10

  let%span span41 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 21 20 21 53

  let%span span42 = "/Users/xavier/Code/cdsat/src/trail.rs" 107 14 107 61

  let%span span43 = "/Users/xavier/Code/cdsat/src/trail.rs" 105 4 105 10

  let%span span44 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 11 20 11 56

  let%span span45 = "/Users/xavier/Code/cdsat/src/trail.rs" 102 14 102 64

  let%span span46 = "/Users/xavier/Code/cdsat/src/trail.rs" 100 4 100 10

  let%span span47 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span48 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span49 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span50 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span51 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span52 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 14 70 15

  let%span span53 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 23 70 24

  let%span span54 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 69 14 69 59

  let%span span55 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 64 15 64 48

  let%span span56 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 16 66 17

  let%span span57 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 25 66 26

  let%span span58 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 65 14 65 44

  let%span span59 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 59 15 59 45

  let%span span60 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 16 61 17

  let%span span61 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 25 61 26

  let%span span62 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 60 14 60 47

  let%span span63 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 53 15 53 32

  let%span span64 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 54 15 54 32

  let%span span65 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 13 56 14

  let%span span66 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 22 56 23

  let%span span67 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 31 56 32

  let%span span68 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 55 14 55 31

  let%span span69 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 50 12 50 13

  let%span span70 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 49 14 49 45

  let%span span71 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 18 46 19

  let%span span72 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 27 46 28

  let%span span73 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 45 14 45 64

  let%span span74 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 18 36 19

  let%span span75 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 27 36 28

  let%span span76 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 35 14 35 61

  let%span span77 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 18 26 19

  let%span span78 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 27 26 28

  let%span span79 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 25 14 25 61

  let%span span80 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 18 16 19

  let%span span81 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 27 16 28

  let%span span82 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 15 14 15 64

  let%span span83 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span84 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span85 = "/Users/xavier/Code/cdsat/src/trail.rs" 179 4 179 12

  let%span span86 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 26 20 26 34

  let%span span87 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 129 8 129 78

  let%span span88 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span89 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span90 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span91 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span92 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span93 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span94 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span95 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span96 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span97 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span98 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span99 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span100 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span101 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span102 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span103 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span104 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span105 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span106 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span107 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span108 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span109 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span110 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span111 = "/Users/xavier/Code/cdsat/src/theory.rs" 616 15 616 27

  let%span span112 = "/Users/xavier/Code/cdsat/src/theory.rs" 617 15 617 32

  let%span span113 = "/Users/xavier/Code/cdsat/src/theory.rs" 618 4 618 90

  let%span span114 = "/Users/xavier/Code/cdsat/src/theory.rs" 512 8 515 9

  let%span span115 = "/Users/xavier/Code/cdsat/src/theory.rs" 522 8 525 9

  let%span span116 = "/Users/xavier/Code/cdsat/src/theory.rs" 206 8 206 84

  let%span span117 = "/Users/xavier/Code/cdsat/src/theory.rs" 502 8 505 9

  let%span span118 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span119 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span120 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span121 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span122 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span123 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span124 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span125 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span126 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span127 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span128 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span129 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span130 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span131 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span132 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span133 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span134 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span135 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span136 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span137 = "/Users/xavier/Code/cdsat/src/theory.rs" 484 15 484 31

  let%span span138 = "/Users/xavier/Code/cdsat/src/theory.rs" 485 15 485 35

  let%span span139 = "/Users/xavier/Code/cdsat/src/theory.rs" 486 15 486 27

  let%span span140 = "/Users/xavier/Code/cdsat/src/theory.rs" 487 4 487 54

  let%span span141 = "/Users/xavier/Code/cdsat/src/theory.rs" 488 4 488 58

  let%span span142 = "/Users/xavier/Code/cdsat/src/theory.rs" 489 4 489 61

  let%span span143 = "/Users/xavier/Code/cdsat/src/theory.rs" 738 15 738 31

  let%span span144 = "/Users/xavier/Code/cdsat/src/theory.rs" 739 4 739 83

  let%span span145 = "/Users/xavier/Code/cdsat/src/theory.rs" 675 8 675 71

  let%span span146 = "/Users/xavier/Code/cdsat/src/theory.rs" 548 15 548 31

  let%span span147 = "/Users/xavier/Code/cdsat/src/theory.rs" 550 15 550 25

  let%span span148 = "/Users/xavier/Code/cdsat/src/theory.rs" 549 14 549 32

  let%span span149 = "/Users/xavier/Code/cdsat/src/theory.rs" 551 4 551 141

  let%span span150 = "/Users/xavier/Code/cdsat/src/theory.rs" 552 4 552 142

  let%span span151 = "/Users/xavier/Code/cdsat/src/theory.rs" 553 4 553 56

  let%span span152 = "/Users/xavier/Code/cdsat/src/theory.rs" 554 4 554 71

  let%span span153 = "/Users/xavier/Code/cdsat/src/theory.rs" 555 4 555 77

  let%span span154 = "/Users/xavier/Code/cdsat/src/theory.rs" 556 14 556 126

  let%span span155 = "/Users/xavier/Code/cdsat/src/theory.rs" 557 14 557 40

  let%span span156 = "/Users/xavier/Code/cdsat/src/theory.rs" 575 15 575 31

  let%span span157 = "/Users/xavier/Code/cdsat/src/theory.rs" 576 15 576 25

  let%span span158 = "/Users/xavier/Code/cdsat/src/theory.rs" 577 15 577 47

  let%span span159 = "/Users/xavier/Code/cdsat/src/theory.rs" 578 14 578 58

  let%span span160 = "/Users/xavier/Code/cdsat/src/theory.rs" 715 15 715 31

  let%span span161 = "/Users/xavier/Code/cdsat/src/theory.rs" 716 15 716 25

  let%span span162 = "/Users/xavier/Code/cdsat/src/theory.rs" 717 15 717 47

  let%span span163 = "/Users/xavier/Code/cdsat/src/theory.rs" 718 14 718 74

  let%span span164 = "/Users/xavier/Code/cdsat/src/theory.rs" 719 14 719 76

  let%span span165 = "/Users/xavier/Code/cdsat/src/theory.rs" 720 14 720 72

  let%span span166 = "/Users/xavier/Code/cdsat/src/theory.rs" 721 14 721 66

  let%span span167 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span168 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 13 814 14

  let%span span169 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 24 814 25

  let%span span170 = "/Users/xavier/Code/cdsat/src/trail.rs" 809 0 809 73

  let%span span171 = "/Users/xavier/Code/cdsat/src/trail.rs" 810 0 810 63

  let%span span172 = "/Users/xavier/Code/cdsat/src/trail.rs" 811 0 811 55

  let%span span173 = "/Users/xavier/Code/cdsat/src/trail.rs" 812 0 812 52

  let%span span174 = "/Users/xavier/Code/cdsat/src/trail.rs" 813 10 813 33

  let%span span175 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 33 814 39

  let%span span176 = "/Users/xavier/Code/cdsat/src/trail.rs" 808 10 808 17

  let%span span177 = "/Users/xavier/Code/cdsat/src/trail.rs" 807 0 807 8

  let%span span178 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span179 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span180 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span181 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span182 = "/Users/xavier/Code/cdsat/src/term.rs" 195 8 225 9

  let%span span183 = "/Users/xavier/Code/cdsat/src/term.rs" 180 8 180 25

  let%span span184 = "/Users/xavier/Code/cdsat/src/trail.rs" 726 8 726 61

  let%span span185 = "/Users/xavier/Code/cdsat/src/trail.rs" 646 8 648 9

  let%span span186 = "/Users/xavier/Code/cdsat/src/trail.rs" 291 12 291 92

  let%span span187 = "/Users/xavier/Code/cdsat/src/trail.rs" 313 4 313 82

  let%span span188 = "/Users/xavier/Code/cdsat/src/trail.rs" 314 14 314 40

  let%span span189 = "/Users/xavier/Code/cdsat/src/trail.rs" 315 4 315 115

  let%span span190 = "/Users/xavier/Code/cdsat/src/trail.rs" 316 4 316 115

  let%span span191 = "/Users/xavier/Code/cdsat/src/trail.rs" 317 4 317 101

  let%span span192 = "/Users/xavier/Code/cdsat/src/trail.rs" 312 14 312 24

  let%span span193 = "/Users/xavier/Code/cdsat/src/trail.rs" 310 4 310 12

  let%span span194 = "/Users/xavier/Code/cdsat/src/trail.rs" 268 8 272 9

  let%span span195 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 31 8 31 32

  let%span span196 = "/Users/xavier/Code/cdsat/src/trail.rs" 547 4 547 12

  let%span span197 = "/Users/xavier/Code/cdsat/src/trail.rs" 254 8 263 9

  let%span span198 = "/Users/xavier/Code/cdsat/src/trail.rs" 279 12 283 13

  let%span span199 = "/Users/xavier/Code/cdsat/src/theory.rs" 31 8 54 9

  let%span span200 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 20 8 20 31

  let%span span201 = "/Users/xavier/Code/cdsat/src/trail.rs" 238 8 248 9

  let%span span202 = "/Users/xavier/Code/cdsat/src/trail.rs" 554 15 554 31

  let%span span203 = "/Users/xavier/Code/cdsat/src/trail.rs" 555 4 555 69

  let%span span204 = "/Users/xavier/Code/cdsat/src/trail.rs" 556 15 556 64

  let%span span205 = "/Users/xavier/Code/cdsat/src/trail.rs" 557 15 557 50

  let%span span206 = "/Users/xavier/Code/cdsat/src/trail.rs" 558 4 558 72

  let%span span207 = "/Users/xavier/Code/cdsat/src/trail.rs" 559 4 559 99

  let%span span208 = "/Users/xavier/Code/cdsat/src/trail.rs" 560 4 560 90

  let%span span209 = "/Users/xavier/Code/cdsat/src/trail.rs" 561 14 561 44

  let%span span210 = "/Users/xavier/Code/cdsat/src/trail.rs" 553 4 553 12

  let%span span211 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 46 8 46 12

  let%span span212 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 51 8 51 85

  let%span span213 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/option.rs" 29 0 140 1

  let%span span214 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/option.rs" 929 24 929 28

  let%span span215 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/option.rs" 929 4 929 34

  let%span span216 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 108 8 108 31

  let%span span217 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2078 20 2078 24

  let%span span218 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 86 26 91 17

  let%span span219 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2078 4 2078 38

  let%span span220 = "/Users/xavier/Code/cdsat/src/theory.rs" 702 15 702 27

  let%span span221 = "/Users/xavier/Code/cdsat/src/theory.rs" 703 14 703 42

  let%span span222 = "/Users/xavier/Code/cdsat/src/theory.rs" 771 15 771 31

  let%span span223 = "/Users/xavier/Code/cdsat/src/theory.rs" 772 15 772 33

  let%span span224 = "/Users/xavier/Code/cdsat/src/theory.rs" 773 15 773 23

  let%span span225 = "/Users/xavier/Code/cdsat/src/theory.rs" 774 14 774 65

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function eq_cmp'2 (_1 : usize) (_2 : usize) : ()

  function antisym2'2 (_1 : usize) (_2 : usize) : ()

  function antisym1'2 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'2 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'2 (_1 : usize) : ()

  function cmp_gt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'2 (_1 : usize) (_2 : usize) : ()

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  predicate invariant'12 (self : TrailIndex'0.t_trailindex) =
    [%#span18] true

  predicate inv'9 (_x : TrailIndex'0.t_trailindex)

  axiom inv'9 : forall x : TrailIndex'0.t_trailindex . inv'9 x = true

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span19] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span20] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  function eq_cmp'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 147 4 147 31] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span22] ()

  axiom eq_cmp'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span21] (x = y)
  = (cmp_log'0 x y = Ordering'0.C_Equal)

  function antisym2'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 142 4 142 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span25] ()

  axiom antisym2'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span23] cmp_log'0 x y
  = Ordering'0.C_Greater)  -> ([%#span24] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 136 4 136 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span28] ()

  axiom antisym1'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span26] cmp_log'0 x y
  = Ordering'0.C_Less)  -> ([%#span27] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 130 4 130 52] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()

   =
    [%#span32] ()

  axiom trans'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span29] cmp_log'0 x y
  = o)  -> ([%#span30] cmp_log'0 y z = o)  -> ([%#span31] cmp_log'0 x z = o)

  function refl'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 123 4 123 20] (x : TrailIndex'0.t_trailindex) : () =
    [%#span34] ()

  axiom refl'1_spec : forall x : TrailIndex'0.t_trailindex . [%#span33] cmp_log'0 x x = Ordering'0.C_Equal

  function gt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span35] cmp_log'0 self o = Ordering'0.C_Greater

  function cmp_gt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 118 4 118 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span37] ()

  axiom cmp_gt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span36] gt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Greater)

  function ge_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span38] cmp_log'0 self o <> Ordering'0.C_Less

  function cmp_ge_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 113 4 113 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span40] ()

  axiom cmp_ge_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span39] ge_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Less)

  function lt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span41] cmp_log'0 self o = Ordering'0.C_Less

  function cmp_lt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 108 4 108 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span43] ()

  axiom cmp_lt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span42] lt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Less)

  function le_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span44] cmp_log'0 self o <> Ordering'0.C_Greater

  function cmp_le_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 103 4 103 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span46] ()

  axiom cmp_le_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span45] le_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Greater)

  use seq.Seq

  predicate invariant'11 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span18] true

  predicate inv'8 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'8 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'8 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  constant max'0 : usize = [%#span47] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'7 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function shallow_model'3 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom shallow_model'3_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span48] inv'7 self)
   -> ([%#span50] inv'8 (shallow_model'3 self))
  && ([%#span49] Seq.length (shallow_model'3 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'10 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span51] inv'8 (shallow_model'3 self)

  axiom inv'7 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'7 x = true

  use Cdsat_Trail_Assignment_Type as Assignment'0

  predicate invariant'9 (self : Seq.seq (Assignment'0.t_assignment)) =
    [%#span18] true

  predicate inv'6 (_x : Seq.seq (Assignment'0.t_assignment))

  axiom inv'6 : forall x : Seq.seq (Assignment'0.t_assignment) . inv'6 x = true

  predicate invariant'8 (self : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span18] true

  predicate inv'5 (_x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'5 : forall x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'5 x = true

  use seq.Seq

  predicate inv'4 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  function shallow_model'0 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))


  axiom shallow_model'0_spec : forall self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . ([%#span48] inv'4 self)
   -> ([%#span50] inv'5 (shallow_model'0 self))
  && ([%#span49] Seq.length (shallow_model'0 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'7 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span51] inv'5 (shallow_model'0 self)

  axiom inv'4 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'4 x
  = true

  function eq_cmp'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom eq_cmp'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span52] inv'9 x)
   -> ([%#span53] inv'9 y)  -> ([%#span54] (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal))

  function antisym2'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym2'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span55] cmp_log'0 x y
  = Ordering'0.C_Greater)
   -> ([%#span56] inv'9 x)  -> ([%#span57] inv'9 y)  -> ([%#span58] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym1'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span59] cmp_log'0 x y
  = Ordering'0.C_Less)
   -> ([%#span60] inv'9 x)  -> ([%#span61] inv'9 y)  -> ([%#span62] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span63] cmp_log'0 x y
  = o)
   -> ([%#span64] cmp_log'0 y z = o)
   -> ([%#span65] inv'9 x)  -> ([%#span66] inv'9 y)  -> ([%#span67] inv'9 z)  -> ([%#span68] cmp_log'0 x z = o)

  function refl'0 (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'0_spec : forall x : TrailIndex'0.t_trailindex . ([%#span69] inv'9 x)
   -> ([%#span70] cmp_log'0 x x = Ordering'0.C_Equal)

  function cmp_gt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_gt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span71] inv'9 x)
   -> ([%#span72] inv'9 y)  -> ([%#span73] gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater))

  function cmp_ge_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_ge_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span74] inv'9 x)
   -> ([%#span75] inv'9 y)  -> ([%#span76] ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less))

  function cmp_lt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_lt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span77] inv'9 x)
   -> ([%#span78] inv'9 y)  -> ([%#span79] lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less))

  function cmp_le_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_le_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span80] inv'9 x)
   -> ([%#span81] inv'9 y)  -> ([%#span82] le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater))

  use seq.Seq

  predicate inv'3 (_x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

  function shallow_model'1 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) : Seq.seq (Assignment'0.t_assignment)


  axiom shallow_model'1_spec : forall self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . ([%#span48] inv'3 self)
   -> ([%#span50] inv'6 (shallow_model'1 self))
  && ([%#span49] Seq.length (shallow_model'1 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'6 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span51] inv'6 (shallow_model'1 self)

  axiom inv'3 : forall x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . inv'3 x = true

  use Core_Option_Option_Type as Option'0

  predicate invariant'5 (self : Option'0.t_option (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span18] true

  predicate inv'2 (_x : Option'0.t_option (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'2 : forall x : Option'0.t_option (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'2 x
  = true

  use prelude.prelude.Borrow

  predicate invariant'4 (self : borrowed (Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)))

   =
    [%#span18] true

  predicate inv'1 (_x : borrowed (Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)))


  axiom inv'1 : forall x : borrowed (Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) . inv'1 x
  = true

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span83] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'3 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span84] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'3 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  function level_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 180 4 180 33] (self : TrailIndex'0.t_trailindex) : int
   =
    [%#span85] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 self)

  use prelude.prelude.Snapshot

  use Cdsat_Trail_Trail_Type as Trail'0

  use prelude.prelude.Intrinsic

  predicate resolve'1 (self : borrowed (Trail'0.t_trail)) =
    [%#span86] self.final = self.current

  use prelude.prelude.Snapshot

  use Cdsat_Theory_Term_Type as Term'0

  use set.Fset

  use Cdsat_Theory_Trail_Type as Trail'1

  use seq.Seq

  predicate contains'2 (self : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) =
    [%#span87] exists i : int . 0 <= i /\ i < Seq.length self /\ Seq.get self i = e

  use Cdsat_Trail_Reason_Type as Reason'0

  use prelude.prelude.Int

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span88] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  use Cdsat_Theory_Assign_Type as Assign'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span89] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'1.t_trail) =
    [%#span90] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'2 a
      end

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'1.t_trail) : int

  axiom len'0_spec : forall self : Trail'1.t_trail . [%#span91] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'1.t_trail) : int =
    [%#span94] match self with
      | Trail'1.C_Empty -> 0
      | Trail'1.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'1.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'1.t_trail . ([%#span93] level'0 self <= len'0 self)
  && ([%#span92] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'1.t_trail) =
    [%#span95] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span96] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span100] match self with
      | Trail'1.C_Empty -> Option'0.C_None
      | Trail'1.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span99] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span98] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span97] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span103] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span101] inv'0 self)
   -> ([%#span102] invariant'3 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span104] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  use set.Fset

  predicate contains'3 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span105] Fset.mem e self

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span106] forall a : (Term'0.t_term, Value'0.t_value) . contains'3 v a  -> satisfies'0 self a

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span107] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'0 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate contains'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span109] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'1_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span108] invariant_assign'0 self
   -> contains'1 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'1.t_trail)
   =
    [%#span110] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a _ tl -> sound'0 tl /\ justified_sound'0 a
      end

  function find_justified'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 619 4 619 46] (self : Trail'1.t_trail) (kv : (Term'0.t_term, Value'0.t_value)) : ()


  axiom find_justified'0_spec : forall self : Trail'1.t_trail, kv : (Term'0.t_term, Value'0.t_value) . ([%#span111] sound'0 self)
   -> ([%#span112] contains'1 self kv)
   -> ([%#span113] forall l : int . forall a : Assign'0.t_assign . find'0 self kv = Option'0.C_Some (a, l)
   -> justified_sound'0 a)

  predicate is_decision'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 511 4 511 54] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span114] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Decision _ _, _) -> true
      | _ -> false
      end

  use set.Fset

  predicate is_input'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 521 4 521 51] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span115] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Input _ _, _) -> true
      | _ -> false
      end

  predicate entails'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 205 4 205 74] (self : Model'0.t_model) (j : Fset.fset (Term'0.t_term, Value'0.t_value)) (c : (Term'0.t_term, Value'0.t_value))

   =
    [%#span116] invariant'3 self  -> satisfy_set'0 self j  -> satisfies'0 self c

  predicate is_justified'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 501 4 501 55] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span117] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified _ _ _, _) -> true
      | _ -> false
      end

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span118] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span121] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span119] is_bool'0 self)
   -> ([%#span120] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'1.t_trail) =
    [%#span122] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> let ap = to_pair'0 a in not contains'1 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'1 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'1.t_trail) =
    [%#span123] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'3 j a  -> contains'1 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span124] Fset.remove a self

  use set.Fset

  use set.Fset

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span127] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span125] invariant_nonneg'0 self)
   -> ([%#span126] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'1.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_spec : forall self : Trail'1.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#span128] invariant_nonneg'0 self)
   -> ([%#span133] set_level'0 self s <= level'0 self)
  && ([%#span132] set_level'0 self s >= 0)
  && ([%#span131] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#span130] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'3 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span129] forall i : (Term'0.t_term, Value'0.t_value) . contains'3 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'1.t_trail) =
    [%#span135] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'1.t_trail) =
    [%#span136] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function justification'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 490 4 490 71] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)


  axiom justification'0_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span137] invariant'1 self)
   -> ([%#span138] is_justified'0 self d)
   -> ([%#span139] sound'0 self)
   -> ([%#span142] is_decision'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#span141] is_input'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#span140] forall m : Model'0.t_model . inv'0 m  -> entails'0 m (justification'0 self d) d)

  function count_bounds'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 740 4 740 35] (self : Trail'1.t_trail) : ()

  axiom count_bounds'0_spec : forall self : Trail'1.t_trail . ([%#span143] invariant'1 self)
   -> ([%#span144] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 self a
   -> level_of'0 self a <= level'0 self)

  predicate satisfied_by'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 674 4 674 47] (self : Trail'1.t_trail) (m : Model'0.t_model)

   =
    [%#span145] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 self a  -> satisfies'0 m a

  function restrict'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 558 4 558 45] (self : Trail'1.t_trail) (level : int) : Trail'1.t_trail


  axiom restrict'0_spec : forall self : Trail'1.t_trail, level : int . ([%#span146] invariant'1 self)
   -> ([%#span147] level >= 0)
   -> ([%#span155] len'0 (restrict'0 self level) <= len'0 self)
  && ([%#span154] (level'0 self >= level  -> level'0 (restrict'0 self level) = level)
  /\ (level'0 self < level  -> level'0 (restrict'0 self level) = level'0 self))
  && ([%#span153] forall m : Model'0.t_model . inv'0 m
   -> satisfied_by'0 self m  -> satisfied_by'0 (restrict'0 self level) m)
  && ([%#span152] forall a : (Term'0.t_term, Value'0.t_value) . not contains'1 self a
   -> not contains'1 (restrict'0 self level) a)
  && ([%#span151] level >= level'0 self  -> restrict'0 self level = self)
  && ([%#span150] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (restrict'0 self level) a
   -> contains'1 self a
  /\ level_of'0 (restrict'0 self level) a <= level /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span149] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 self a
   -> level_of'0 self a <= level
   -> contains'1 (restrict'0 self level) a /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span148] invariant'1 (restrict'0 self level))

  function restrict_find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 579 4 579 60] (self : Trail'1.t_trail) (level : int) (d : (Term'0.t_term, Value'0.t_value)) : ()


  axiom restrict_find'0_spec : forall self : Trail'1.t_trail, level : int, d : (Term'0.t_term, Value'0.t_value) . ([%#span156] invariant'1 self)
   -> ([%#span157] level >= 0)
   -> ([%#span158] contains'1 (restrict'0 self level) d)
   -> ([%#span159] find'0 (restrict'0 self level) d = find'0 self d)

  function restrict_kind_unchanged'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 722 4 722 70] (self : Trail'1.t_trail) (level : int) (d : (Term'0.t_term, Value'0.t_value)) : ()


  axiom restrict_kind_unchanged'0_spec : forall self : Trail'1.t_trail, level : int, d : (Term'0.t_term, Value'0.t_value) . ([%#span160] invariant'1 self)
   -> ([%#span161] level >= 0)
   -> ([%#span162] contains'1 (restrict'0 self level) d)
   -> ([%#span166] is_input'0 self d = is_input'0 (restrict'0 self level) d)
  && ([%#span165] is_decision'0 self d = is_decision'0 (restrict'0 self level) d)
  && ([%#span164] justification'0 self d = justification'0 (restrict'0 self level) d)
  && ([%#span163] is_justified'0 self d = is_justified'0 (restrict'0 self level) d)

  use set.Fset

  function insert'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span167] Fset.add e self

  use seq.Seq

  use prelude.seq_ext.SeqExt

  use seq.Seq

  function remove'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 814 0 814 39] (s : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom remove'1_def : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . remove'1 s e
  = ([%#span177] if s = (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) then
    Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)
  else
    if Seq.get s (Seq.length s - 1) = e then
      remove'1 (SeqExt.subsequence s 0 (Seq.length s - 1)) e
    else
      Seq.snoc (remove'1 (SeqExt.subsequence s 0 (Seq.length s - 1)) e) (Seq.get s (Seq.length s - 1))

  )

  axiom remove'1_spec : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . ([%#span168] inv'8 s)
   -> ([%#span169] inv'9 e)
   -> ([%#span175] inv'8 (remove'1 s e))
  && ([%#span174] Seq.length (remove'1 s e) <= Seq.length s)
  && ([%#span173] contains'2 s e  -> Seq.length (remove'1 s e) < Seq.length s)
  && ([%#span172] forall t : TrailIndex'0.t_trailindex . inv'9 t  -> contains'2 (remove'1 s e) t  -> t <> e)
  && ([%#span171] forall t : TrailIndex'0.t_trailindex . inv'9 t  -> contains'2 (remove'1 s e) t  -> contains'2 s t)
  && ([%#span170] forall t : TrailIndex'0.t_trailindex . inv'9 t
   -> contains'2 s t  -> e <> t  -> contains'2 (remove'1 s e) t)

  use Cdsat_Term_Value_Type as Value'1

  use Cdsat_Term_Term_Type as Term'1

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  function deep_model'4 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span178] match self with
      | Value'1.C_Bool b -> Value'0.C_Bool b
      | Value'1.C_Rat br -> Value'0.C_Rat (deep_model'4 br)
      end

  function shallow_model'5 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span179] deep_model'1 self

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  use Cdsat_Term_Sort_Type as Sort'1

  function deep_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'1.t_sort) : Sort'0.t_sort =
    [%#span180] match self with
      | Sort'1.C_Boolean -> Sort'0.C_Boolean
      | Sort'1.C_Rational -> Sort'0.C_Rational
      end

  function deep_model'2 (self : usize) : int =
    [%#span181] UIntSize.to_int self

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 193 4 193 44] (self : Term'1.t_term) : Term'0.t_term =
    [%#span182] match self with
      | Term'1.C_Variable v s -> Term'0.C_Variable (Var'0.C_Var (deep_model'2 v) (deep_model'3 s))
      | Term'1.C_Value v -> Term'0.C_Value (deep_model'1 v)
      | Term'1.C_Plus l r -> Term'0.C_Plus (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Eq l r -> Term'0.C_Eq (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Conj l r -> Term'0.C_Conj (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Disj l r -> Term'0.C_Disj (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Neg t -> Term'0.C_Neg (deep_model'0 t)
      | Term'1.C_Impl l r -> Term'0.C_Disj (Term'0.C_Neg (deep_model'0 l)) (deep_model'0 r)
      | Term'1.C_Times l r -> Term'0.C_Plus (Term'0.C_Value (Value'0.C_Rat (deep_model'4 l))) (deep_model'0 r)
      | Term'1.C_Lt l r -> Term'0.C_Eq (deep_model'0 l) (deep_model'0 r)
      end

  function shallow_model'4 [#"/Users/xavier/Code/cdsat/src/term.rs" 179 4 179 50] (self : Term'1.t_term) : Term'0.t_term
   =
    [%#span183] deep_model'0 self

  function term_value'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 725 4 725 61] (self : Assignment'0.t_assignment) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span184] (shallow_model'4 (Cdsat_Trail_Assignment_Type.assignment_term self), shallow_model'5 (Cdsat_Trail_Assignment_Type.assignment_val self))

  use seq.Seq

  use seq.Seq

  use Cdsat_Trail_Trail_Type as Cdsat_Trail_Trail_Type

  function index_logic'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 645 4 645 77] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span185] term_value'0 (Seq.get (shallow_model'1 (Seq.get (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)))) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)))

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 289 4 289 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex)

   =
    [%#span186] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)
    < Seq.length (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self))
    /\ UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)
    < Seq.length (shallow_model'1 (Seq.get (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))))

  function abstract_justification'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 318 4 321 44] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) : Fset.fset (Term'0.t_term, Value'0.t_value)


  axiom abstract_justification'0_def : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . abstract_justification'0 self just
  = ([%#span193] if Seq.length just > 0 then
    let set = abstract_justification'0 self (remove'1 just (Seq.get just 0)) in let a = index_logic'0 self (Seq.get just 0) in insert'0 set a
  else
    Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)
  )

  axiom abstract_justification'0_spec : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span187] forall i : int . 0
  <= i
  /\ i < Seq.length just  -> contains'0 self (Seq.get just i))
   -> ([%#span191] forall i : int . 0 <= i /\ i < Seq.length just
   -> contains'3 (abstract_justification'0 self just) (index_logic'0 self (Seq.get just i)))
  && ([%#span190] forall a : (Term'0.t_term, Value'0.t_value) . contains'3 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'2 just ix /\ a = index_logic'0 self ix))
  && ([%#span189] forall a : (Term'0.t_term, Value'0.t_value) . contains'3 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'0 self ix /\ a = index_logic'0 self ix))
  && ([%#span188] Fset.cardinal (abstract_justification'0 self just) <= Seq.length just)

  use prelude.prelude.Snapshot

  predicate justified_correct'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 267 4 267 78] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) (j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

   =
    [%#span194] (forall i : TrailIndex'0.t_trailindex . contains'2 (shallow_model'3 j) i
     -> lt_log'0 i ix /\ contains'0 self i)
    /\ is_justified'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ justification'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    = abstract_justification'0 self (shallow_model'3 j)

  function index_logic'2 [@inline:trivial] (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (ix : usize) : Assignment'0.t_assignment

   =
    [%#span195] Seq.get (shallow_model'1 self) (UIntSize.to_int ix)

  function index_logic'1 [@inline:trivial] (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (ix : usize) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span195] Seq.get (shallow_model'0 self) (UIntSize.to_int ix)

  function reason'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 549 4 549 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : Reason'0.t_reason

   =
    [%#span196] Cdsat_Trail_Assignment_Type.assignment_reason (index_logic'2 (index_logic'1 (Cdsat_Trail_Trail_Type.trail_assignments self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)) (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix))

  predicate justified_is_justified'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 253 4 253 47] (self : Trail'0.t_trail) =
    [%#span197] forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> (let reason = reason'0 self ix in (reason = Reason'0.C_Decision)
    = is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ (reason = Reason'0.C_Input)
    = is_input'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ (forall j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . reason = Reason'0.C_Justified j
     -> justified_correct'0 self ix j))

  predicate abstract_relation'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 277 4 277 42] (self : Trail'0.t_trail) =
    [%#span198] (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> contains'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix))
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    = UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))
    /\ (forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
     -> (exists ix : TrailIndex'0.t_trailindex . contains'0 self ix
    /\ level_log'0 ix = level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
    /\ index_logic'0 self ix = a))

  function well_sorted'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 30 4 30 36] (self : Term'0.t_term) : bool =
    [%#span199] match self with
      | Term'0.C_Variable v -> true
      | Term'0.C_Value v -> true
      | Term'0.C_Plus l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Rational
      | Term'0.C_Eq l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r
      | Term'0.C_Conj l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Boolean
      | Term'0.C_Disj l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Boolean
      | Term'0.C_Neg t -> well_sorted'0 t /\ sort'0 t = Sort'0.C_Boolean
      end

  function index_logic'3 [@inline:trivial] (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (ix : int) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span200] Seq.get (shallow_model'0 self) ix

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 237 4 237 34] (self : Trail'0.t_trail) =
    [%#span201] abstract_relation'0 self
    /\ sound'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    /\ invariant'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    /\ level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    = UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self)
    /\ UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self)
    = Seq.length (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) - 1
    /\ (forall i : int . 0 <= i /\ i < Seq.length (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self))
     -> Seq.length (shallow_model'1 (index_logic'3 (Cdsat_Trail_Trail_Type.trail_assignments self) i)) > 0)
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix) = 0)
    = is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix))
    /\ (forall j : TrailIndex'0.t_trailindex . forall i : TrailIndex'0.t_trailindex . contains'0 self i
     -> contains'0 self j  -> i <> j  -> index_logic'0 self i <> index_logic'0 self j)
    /\ justified_is_justified'0 self
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> well_sorted'0 (let (a, _) = index_logic'0 self ix in a))

  function reasons_dont_change'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 562 4 562 45] (self : Trail'0.t_trail) (other : Trail'0.t_trail) : ()


  axiom reasons_dont_change'0_spec : forall self : Trail'0.t_trail, other : Trail'0.t_trail . ([%#span202] invariant'0 self)
   -> ([%#span203] abstract_relation'0 other /\ invariant'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost other)))
   -> ([%#span204] restrict'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level other))
  = Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost other))
   -> ([%#span205] level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost other))
  = UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level other))
   -> ([%#span206] forall ix : TrailIndex'0.t_trailindex . contains'0 other ix  -> contains'0 self ix)
   -> ([%#span207] forall ix : TrailIndex'0.t_trailindex . contains'0 other ix
   -> index_logic'0 self ix = index_logic'0 other ix)
   -> ([%#span208] forall ix : TrailIndex'0.t_trailindex . contains'0 other ix  -> reason'0 self ix = reason'0 other ix)
   -> ([%#span209] justified_is_justified'0 other)

  use prelude.prelude.Snapshot

  predicate resolve'2 (self : Assignment'0.t_assignment) =
    [%#span211] true

  function index_logic'4 [@inline:trivial] (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (ix : int) : Assignment'0.t_assignment

   =
    [%#span200] Seq.get (shallow_model'1 self) ix

  predicate resolve'0 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span212] forall i : int . 0 <= i /\ i < Seq.length (shallow_model'1 self)  -> resolve'2 (index_logic'4 self i)

  let rec unwrap'0 (self:Option'0.t_option (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) (return'  (ret:Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))= {[@expl:precondition] [%#span214] inv'2 self}
    {[@expl:precondition] [%#span213] self <> Option'0.C_None}
    any
    [ return' (result:Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))-> {[%#span215] inv'3 result}
      {[%#span213] Option'0.C_Some result = self}
      (! return' {result}) ]


  use seq.Seq

  use prelude.seq_ext.SeqExt

  function shallow_model'2 (self : borrowed (Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

   =
    [%#span216] shallow_model'0 self.current

  let rec pop'0 (self:borrowed (Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))) (return'  (ret:Option'0.t_option (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))))= {[@expl:precondition] [%#span217] inv'1 self}
    any
    [ return' (result:Option'0.t_option (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))-> {[%#span219] inv'2 result}
      {[%#span218] match result with
        | Option'0.C_Some t -> shallow_model'0 self.final
        = SeqExt.subsequence (shallow_model'2 self) 0 (Seq.length (shallow_model'2 self) - 1)
        /\ shallow_model'2 self = Seq.snoc (shallow_model'0 self.final) t
        | Option'0.C_None -> self.current = self.final /\ Seq.length (shallow_model'2 self) = 0
        end}
      (! return' {result}) ]


  use prelude.prelude.Snapshot

  function restrict_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 704 4 704 43] (self : Trail'1.t_trail) (level : int) : ()


  axiom restrict_sound'0_spec : forall self : Trail'1.t_trail, level : int . ([%#span220] sound'0 self)
   -> ([%#span221] sound'0 (restrict'0 self level))

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  function restrict_idempotent'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 775 4 775 54] (self : Trail'1.t_trail) (l1 : int) (l2 : int) : ()


  axiom restrict_idempotent'0_spec : forall self : Trail'1.t_trail, l1 : int, l2 : int . ([%#span222] invariant'1 self)
   -> ([%#span223] l1 >= 0 /\ l2 >= 0)
   -> ([%#span224] l1 <= l2)  -> ([%#span225] restrict'0 self l1 = restrict'0 (restrict'0 self l2) l1)

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  let rec restrict (self:borrowed (Trail'0.t_trail)) (level:usize) (return'  (ret:()))= {[%#strail14] UIntSize.to_int level
    <= UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self.current)}
    {[%#strail13] invariant'0 self.current}
    (! bb0
    [ bb0 = s0 [ s0 =  [ &old' <- [%#strail0] Snapshot.new self ] s1 | s1 = bb1 ]
    | bb1 = s0 [ s0 =  [ &old_2_0 <- Snapshot.new self ] s1 | s1 = bb2 ]
    | bb2 = bb2
      [ bb2 = {[@expl:loop invariant] (Snapshot.inner old_2_0).final = self.final}
        {[@expl:loop invariant] [%#strail4] invariant'0 self.current}
        {[@expl:loop invariant] [%#strail3] forall ix : TrailIndex'0.t_trailindex . contains'0 self.current ix
         -> reason'0 self.current ix = reason'0 (Snapshot.inner old').current ix}
        {[@expl:loop invariant] [%#strail3] forall ix : TrailIndex'0.t_trailindex . contains'0 self.current ix
         -> index_logic'0 (Snapshot.inner old').current ix = index_logic'0 self.current ix}
        {[@expl:loop invariant] [%#strail2] Cdsat_Trail_Trail_Type.trail_level self.current >= level}
        {[@expl:loop invariant] [%#strail1] Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self.current)
        = restrict'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost (Snapshot.inner old').current)) (UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self.current))}
        (! s0) [ s0 = bb3 ]
        [ bb3 = s0
          [ s0 = Trail'0.t_trail {self.current}
              (fun (rassignments'0:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (rlevel'0:usize) (rghost'0:Snapshot.snap_ty (Trail'1.t_trail)) (rnum_assign'0:usize) ->
                UIntSize.lt {level} {rlevel'0} (fun (_ret':bool) ->  [ &_17 <- _ret' ] s1))
          | s1 = any [ br0 -> {_17 = false} (! bb13) | br1 -> {_17} (! bb4) ]  ]

        | bb4 = s0 [ s0 =  [ &_20 <- [%#strail5] Snapshot.new () ] s1 | s1 = bb5 ]
        | bb5 = s0 [ s0 =  [ &_22 <- [%#strail6] Snapshot.new () ] s1 | s1 = bb6 ]
        | bb6 = s0 [ s0 =  [ &_24 <- [%#strail7] Snapshot.new () ] s1 | s1 = bb7 ]
        | bb7 = s0
          [ s0 = Trail'0.t_trail {self.current}
              (fun (rassignments'0:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (rlevel'0:usize) (rghost'0:Snapshot.snap_ty (Trail'1.t_trail)) (rnum_assign'0:usize) ->
                Borrow.borrow_mut
                  <Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)>
                  {rassignments'0}
                  (fun (_ret':borrowed (Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))) ->
                     [ &_28 <- _ret' ]
                    Trail'0.t_trail {self.current}
                      (fun (l_assignments'0:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (l_level'0:usize) (l_ghost'0:Snapshot.snap_ty (Trail'1.t_trail)) (l_num_assign'0:usize) ->

                        [ &self <- { self with current = Trail'0.C_Trail _28.final l_level'0 l_ghost'0 l_num_assign'0 ; } ]

                        s1)))
          | s1 = pop'0 {_28}
              (fun (_ret':Option'0.t_option (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) ->
                 [ &_27 <- _ret' ]
                s2)
          | s2 = bb8 ]

        | bb8 = s0
          [ s0 = unwrap'0 {_27}
              (fun (_ret':Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) ->  [ &_26 <- _ret' ] s1)
          | s1 = bb9 ]

        | bb9 = s0 [ s0 = -{resolve'0 _26}- s1 | s1 = bb10 ]
        | bb10 = s0
          [ s0 = {[@expl:assertion] [%#strail8] forall ix : TrailIndex'0.t_trailindex . contains'0 self.current ix
             -> contains'0 (Snapshot.inner old').current ix}
            s1
          | s1 = Trail'0.t_trail {self.current}
              (fun (rassignments'0:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (rlevel'0:usize) (rghost'0:Snapshot.snap_ty (Trail'1.t_trail)) (rnum_assign'0:usize) ->
                UIntSize.sub {rlevel'0} {[%#strail9] (1 : usize)}
                  (fun (_ret':usize) ->
                    Trail'0.t_trail {self.current}
                      (fun (l_assignments'0:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (l_level'0:usize) (l_ghost'0:Snapshot.snap_ty (Trail'1.t_trail)) (l_num_assign'0:usize) ->

                        [ &self <- { self with current = Trail'0.C_Trail l_assignments'0 _ret' l_ghost'0 l_num_assign'0 ; } ]

                        s2)))
          | s2 =
            [ &_31 <- [%#strail10] Snapshot.new (restrict'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self.current)) (UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self.current))) ]

            s3
          | s3 = bb11 ]

        | bb11 = s0
          [ s0 = Trail'0.t_trail {self.current}
              (fun (l_assignments'0:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (l_level'0:usize) (l_ghost'0:Snapshot.snap_ty (Trail'1.t_trail)) (l_num_assign'0:usize) ->
                 [ &self <- { self with current = Trail'0.C_Trail l_assignments'0 l_level'0 _31 l_num_assign'0 ; } ]
                (any [ any_ (_any:Snapshot.snap_ty (Trail'1.t_trail))-> (!  [ &_31 <- _any ] s1) ] ))
          | s1 = {[@expl:assertion] [%#strail11] abstract_relation'0 self.current} s2
          | s2 =
            [ &_35 <- [%#strail12] Snapshot.new (reasons_dont_change'0 (Snapshot.inner old').current self.current) ]

            s3
          | s3 = bb12 ]

        | bb12 = bb2 ]
         ]

    | bb13 = s0 [ s0 = -{resolve'1 self}- s1 | s1 = return' {_0} ]  ]
    )
    [ & _0 : () = any_l ()
    | & self : borrowed (Trail'0.t_trail) = self
    | & level : usize = level
    | & old' : Snapshot.snap_ty (borrowed (Trail'0.t_trail)) = any_l ()
    | & _17 : bool = any_l ()
    | & _20 : Snapshot.snap_ty () = any_l ()
    | & _22 : Snapshot.snap_ty () = any_l ()
    | & _24 : Snapshot.snap_ty () = any_l ()
    | & _26 : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) = any_l ()
    | & _27 : Option'0.t_option (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) = any_l ()
    | & _28 : borrowed (Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) = any_l ()
    | & _31 : Snapshot.snap_ty (Trail'1.t_trail) = any_l ()
    | & _35 : Snapshot.snap_ty () = any_l ()
    | & old_2_0 : Snapshot.snap_ty (borrowed (Trail'0.t_trail)) = any_l () ]

    [ return' (result:())-> {[@expl:postcondition] [%#strail17] forall ix : TrailIndex'0.t_trailindex . contains'0 self.final ix
       -> index_logic'0 self.current ix = index_logic'0 self.final ix}
      {[@expl:postcondition] [%#strail16] forall ix : TrailIndex'0.t_trailindex . level_log'0 ix
      <= UIntSize.to_int level  -> contains'0 self.current ix  -> contains'0 self.final ix}
      {[@expl:postcondition] [%#strail15] Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self.final)
      = restrict'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self.current)) (UIntSize.to_int level)}
      {[@expl:postcondition] [%#strail13] invariant'0 self.final}
      (! return' {result}) ]

end
module Cdsat_Theory_Impl6_Deducef_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 887 15 887 35

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 888 15 888 27

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 889 15 889 26

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 890 4 890 40

  let%span stheory4 = "/Users/xavier/Code/cdsat/src/theory.rs" 891 4 891 71

  let%span stheory5 = "/Users/xavier/Code/cdsat/src/theory.rs" 892 4 892 58

  let%span stheory6 = "/Users/xavier/Code/cdsat/src/theory.rs" 893 4 893 36

  let%span stheory7 = "/Users/xavier/Code/cdsat/src/theory.rs" 894 14 894 28

  let%span stheory8 = "/Users/xavier/Code/cdsat/src/theory.rs" 895 4 895 38

  let%span stheory9 = "/Users/xavier/Code/cdsat/src/theory.rs" 738 15 738 31

  let%span stheory10 = "/Users/xavier/Code/cdsat/src/theory.rs" 739 4 739 83

  let%span stheory11 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span stheory12 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span stheory13 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span stheory14 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span stheory15 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span stheory16 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span stheory17 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span20 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span21 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span22 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span23 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span24 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span25 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span26 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span28 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span29 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span30 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span31 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span32 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span33 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span34 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span35 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span36 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span37 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span38 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span39 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  let%span span40 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span41 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span42 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span43 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span44 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span45 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span46 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span47 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span48 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span49 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span50 = "/Users/xavier/Code/cdsat/src/theory.rs" 741 8 746 9

  let%span span51 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span52 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span53 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span54 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span55 = "/Users/xavier/Code/cdsat/src/theory.rs" 675 8 675 71

  let%span span56 = "/Users/xavier/Code/cdsat/src/theory.rs" 548 15 548 31

  let%span span57 = "/Users/xavier/Code/cdsat/src/theory.rs" 550 15 550 25

  let%span span58 = "/Users/xavier/Code/cdsat/src/theory.rs" 549 14 549 32

  let%span span59 = "/Users/xavier/Code/cdsat/src/theory.rs" 551 4 551 141

  let%span span60 = "/Users/xavier/Code/cdsat/src/theory.rs" 552 4 552 142

  let%span span61 = "/Users/xavier/Code/cdsat/src/theory.rs" 553 4 553 56

  let%span span62 = "/Users/xavier/Code/cdsat/src/theory.rs" 554 4 554 71

  let%span span63 = "/Users/xavier/Code/cdsat/src/theory.rs" 555 4 555 77

  let%span span64 = "/Users/xavier/Code/cdsat/src/theory.rs" 556 14 556 126

  let%span span65 = "/Users/xavier/Code/cdsat/src/theory.rs" 557 14 557 40

  let%span span66 = "/Users/xavier/Code/cdsat/src/theory.rs" 559 8 570 9

  let%span span67 = "/Users/xavier/Code/cdsat/src/theory.rs" 682 8 682 82

  let%span span68 = "/Users/xavier/Code/cdsat/src/theory.rs" 693 4 693 55

  let%span span69 = "/Users/xavier/Code/cdsat/src/theory.rs" 695 8 695 108

  let%span span70 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span71 = "/Users/xavier/Code/cdsat/src/theory.rs" 206 8 206 84

  let%span span72 = "/Users/xavier/Code/cdsat/src/theory.rs" 398 8 400 79

  let%span span73 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span74 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span75 = "/Users/xavier/Code/cdsat/src/theory.rs" 823 4 823 16

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span18] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span19] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'0 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'1 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use set.Fset

  use set.Fset

  use Cdsat_Theory_Assign_Type as Assign'0

  use Cdsat_Theory_Trail_Type as Trail'0

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span21] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span20] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span24] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span23] level'0 self <= len'0 self)
  && ([%#span22] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span25] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  use set.Fset

  use Cdsat_Theory_Term_Type as Term'0

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span26] Fset.remove a self

  use set.Fset

  use prelude.prelude.Int

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span27] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'0 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span28] match self with
      | Assign'0.C_Decision t v -> sort'1 t = sort'0 v
      | Assign'0.C_Justified _ t v -> sort'1 t = sort'0 v /\ sort'1 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'1 t = sort'0 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span29] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'2 a
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span30] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span34] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span33] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'1 (let (a, _) = d in a) = sort'0 (let (_, a) = d in a)))
  && ([%#span32] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span31] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span37] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span35] invariant_nonneg'0 self)
   -> ([%#span36] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  use set.Fset

  predicate contains'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span38] Fset.mem e self

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span39] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#stheory11] invariant_nonneg'0 self)
   -> ([%#stheory16] set_level'0 self s <= level'0 self)
  && ([%#stheory15] set_level'0 self s >= 0)
  && ([%#stheory14] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#stheory13] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#stheory12] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate contains'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span41] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'1_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span40] invariant_assign'0 self
   -> contains'1 self d = true  -> sort'1 (let (a, _) = d in a) = sort'0 (let (_, a) = d in a)

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span42] sort'0 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span45] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span43] is_bool'0 self)
   -> ([%#span44] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span46] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'1 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'1 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'0.t_trail) =
    [%#span47] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'0 j a  -> contains'1 tl a
        | _ -> true
        end
      end

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'0.t_trail) =
    [%#span48] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'0.t_trail) =
    [%#span49] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function count_bounds'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 740 4 740 35] (self : Trail'0.t_trail) : () =
    [%#span50] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign (Assign'0.C_Input _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Justified _ _ _) _ tl -> count_bounds'0 tl
      end

  axiom count_bounds'0_spec : forall self : Trail'0.t_trail . ([%#stheory9] invariant'0 self)
   -> ([%#stheory10] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 self a
   -> level_of'0 self a <= level'0 self)

  use Cdsat_Theory_Normal_Type as Normal'0

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span53] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span51] inv'0 self)
   -> ([%#span52] invariant'1 self  -> sort'0 (interp'0 self t) = sort'1 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span54] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  predicate satisfied_by'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 674 4 674 47] (self : Trail'0.t_trail) (m : Model'0.t_model)

   =
    [%#span55] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 self a  -> satisfies'0 m a

  function restrict'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 558 4 558 45] (self : Trail'0.t_trail) (level : int) : Trail'0.t_trail

   =
    [%#span66] match self with
      | Trail'0.C_Empty -> Trail'0.C_Empty
      | Trail'0.C_Assign a l tl -> let tl = restrict'0 tl level in let _ = count_bounds'0 tl in if l <= level then
        Trail'0.C_Assign a l tl
      else
        tl

      end

  axiom restrict'0_spec : forall self : Trail'0.t_trail, level : int . ([%#span56] invariant'0 self)
   -> ([%#span57] level >= 0)
   -> ([%#span65] len'0 (restrict'0 self level) <= len'0 self)
  && ([%#span64] (level'0 self >= level  -> level'0 (restrict'0 self level) = level)
  /\ (level'0 self < level  -> level'0 (restrict'0 self level) = level'0 self))
  && ([%#span63] forall m : Model'0.t_model . inv'0 m
   -> satisfied_by'0 self m  -> satisfied_by'0 (restrict'0 self level) m)
  && ([%#span62] forall a : (Term'0.t_term, Value'0.t_value) . not contains'1 self a
   -> not contains'1 (restrict'0 self level) a)
  && ([%#span61] level >= level'0 self  -> restrict'0 self level = self)
  && ([%#span60] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (restrict'0 self level) a
   -> contains'1 self a
  /\ level_of'0 (restrict'0 self level) a <= level /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span59] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 self a
   -> level_of'0 self a <= level
   -> contains'1 (restrict'0 self level) a /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span58] invariant'0 (restrict'0 self level))

  predicate unsat'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 681 4 681 30] (self : Trail'0.t_trail) =
    [%#span67] forall m : Model'0.t_model . inv'0 m  -> satisfied_by'0 (restrict'0 self 0) m  -> false

  predicate impls'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 694 4 694 41] (self : Trail'0.t_trail) (rhs : Trail'0.t_trail)

   =
    [%#span69] forall m : Model'0.t_model . inv'0 m
     -> satisfied_by'0 (restrict'0 self 0) m  -> satisfied_by'0 (restrict'0 rhs 0) m

  axiom impls'0_spec : forall self : Trail'0.t_trail, rhs : Trail'0.t_trail . [%#span68] impls'0 self rhs
   -> unsat'0 rhs  -> unsat'0 self

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span70] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 v a  -> satisfies'0 self a

  predicate entails'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 205 4 205 74] (self : Model'0.t_model) (j : Fset.fset (Term'0.t_term, Value'0.t_value)) (c : (Term'0.t_term, Value'0.t_value))

   =
    [%#span71] invariant'1 self  -> satisfy_set'0 self j  -> satisfies'0 self c

  predicate acceptable'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 397 4 397 56] (self : Trail'0.t_trail) (t : Term'0.t_term) (val' : Value'0.t_value)

   =
    [%#span72] not contains'1 self (t, val')
    /\ sort'1 t = sort'0 val' /\ (is_bool'0 val'  -> not contains'1 self (t, negate'0 val'))

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span73] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'0 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate sound'1 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'0.t_trail)
   =
    [%#span74] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a _ tl -> sound'1 tl /\ justified_sound'0 a
      end

  use Cdsat_Theory_Normal_Type as Cdsat_Theory_Normal_Type

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 826 4 826 30] (self : Normal'0.t_normal)

   =
    [%#span75] sound'1 (Cdsat_Theory_Normal_Type.normal_0 self)

  constant self  : Normal'0.t_normal

  constant just  : Fset.fset (Term'0.t_term, Value'0.t_value)

  constant t  : Term'0.t_term

  constant v  : Value'0.t_value

  function deducef [#"/Users/xavier/Code/cdsat/src/theory.rs" 896 4 896 78] (self : Normal'0.t_normal) (just : Fset.fset (Term'0.t_term, Value'0.t_value)) (t : Term'0.t_term) (v : Value'0.t_value) : Normal'0.t_normal


  goal vc_deducef : ([%#stheory5] forall m : Model'0.t_model . inv'0 m  -> entails'0 m just (t, v))
   -> ([%#stheory4] forall j : (Term'0.t_term, Value'0.t_value) . contains'0 just j
   -> contains'1 (Cdsat_Theory_Normal_Type.normal_0 self) j)
   -> ([%#stheory3] acceptable'0 (Cdsat_Theory_Normal_Type.normal_0 self) t v)
   -> ([%#stheory2] is_bool'0 v)
   -> ([%#stheory1] sound'0 self)
   -> ([%#stheory0] invariant'0 (Cdsat_Theory_Normal_Type.normal_0 self))
   -> ([%#stheory9] invariant'0 (Cdsat_Theory_Normal_Type.normal_0 self))
  /\ (([%#stheory10] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (Cdsat_Theory_Normal_Type.normal_0 self) a
   -> level_of'0 (Cdsat_Theory_Normal_Type.normal_0 self) a <= level'0 (Cdsat_Theory_Normal_Type.normal_0 self))
   -> (let _ = count_bounds'0 (Cdsat_Theory_Normal_Type.normal_0 self) in ([%#stheory11] invariant_nonneg'0 (Cdsat_Theory_Normal_Type.normal_0 self))
  /\ (([%#stheory16] set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) just
  <= level'0 (Cdsat_Theory_Normal_Type.normal_0 self))
  && ([%#stheory15] set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) just >= 0)
  && ([%#stheory14] just = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) just = 0)
  && ([%#stheory13] just <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 just i
  /\ level_of'0 (Cdsat_Theory_Normal_Type.normal_0 self) i = set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) just))
  && ([%#stheory12] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 just i
   -> level_of'0 (Cdsat_Theory_Normal_Type.normal_0 self) i
  <= set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) just)
   -> (let result = Normal'0.C_Normal (Trail'0.C_Assign (Assign'0.C_Justified just t v) (set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) just) (Cdsat_Theory_Normal_Type.normal_0 self)) in ([%#stheory8] impls'0 (Cdsat_Theory_Normal_Type.normal_0 self) (Cdsat_Theory_Normal_Type.normal_0 result))
  && ([%#stheory7] sound'0 result) && ([%#stheory6] invariant'0 (Cdsat_Theory_Normal_Type.normal_0 result))))))
end
module Cdsat_Theory_Impl5_AddJustified_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 447 15 447 31

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 448 4 448 68

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 449 15 449 36

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 450 15 450 40

  let%span stheory4 = "/Users/xavier/Code/cdsat/src/theory.rs" 451 4 451 78

  let%span stheory5 = "/Users/xavier/Code/cdsat/src/theory.rs" 452 4 452 81

  let%span stheory6 = "/Users/xavier/Code/cdsat/src/theory.rs" 453 14 453 58

  let%span stheory7 = "/Users/xavier/Code/cdsat/src/theory.rs" 454 14 454 81

  let%span stheory8 = "/Users/xavier/Code/cdsat/src/theory.rs" 455 14 455 63

  let%span stheory9 = "/Users/xavier/Code/cdsat/src/theory.rs" 456 4 456 84

  let%span stheory10 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span stheory11 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span stheory12 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span stheory13 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span stheory14 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span stheory15 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span stheory16 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span17 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span20 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span21 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span22 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span23 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span24 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span25 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span26 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span28 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span29 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span30 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span31 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span32 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span33 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span34 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span35 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span36 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span37 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span38 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  let%span span39 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span40 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span41 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span42 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span43 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span44 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span45 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span46 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span47 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span48 = "/Users/xavier/Code/cdsat/src/theory.rs" 616 15 616 27

  let%span span49 = "/Users/xavier/Code/cdsat/src/theory.rs" 617 15 617 32

  let%span span50 = "/Users/xavier/Code/cdsat/src/theory.rs" 618 4 618 90

  let%span span51 = "/Users/xavier/Code/cdsat/src/theory.rs" 620 8 629 9

  let%span span52 = "/Users/xavier/Code/cdsat/src/theory.rs" 512 8 515 9

  let%span span53 = "/Users/xavier/Code/cdsat/src/theory.rs" 522 8 525 9

  let%span span54 = "/Users/xavier/Code/cdsat/src/theory.rs" 206 8 206 84

  let%span span55 = "/Users/xavier/Code/cdsat/src/theory.rs" 502 8 505 9

  let%span span56 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span57 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span58 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span59 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span60 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span61 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span62 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span63 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span64 = "/Users/xavier/Code/cdsat/src/theory.rs" 484 15 484 31

  let%span span65 = "/Users/xavier/Code/cdsat/src/theory.rs" 485 15 485 35

  let%span span66 = "/Users/xavier/Code/cdsat/src/theory.rs" 486 15 486 27

  let%span span67 = "/Users/xavier/Code/cdsat/src/theory.rs" 487 4 487 54

  let%span span68 = "/Users/xavier/Code/cdsat/src/theory.rs" 488 4 488 58

  let%span span69 = "/Users/xavier/Code/cdsat/src/theory.rs" 489 4 489 61

  let%span span70 = "/Users/xavier/Code/cdsat/src/theory.rs" 491 8 491 30

  let%span span71 = "/Users/xavier/Code/cdsat/src/theory.rs" 398 8 400 79

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span17] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span18] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'0 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'2 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use set.Fset

  use Cdsat_Theory_Assign_Type as Assign'0

  use Cdsat_Theory_Trail_Type as Trail'0

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span20] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span19] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span23] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span22] level'0 self <= len'0 self)
  && ([%#span21] level'0 self >= 0)

  use set.Fset

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span24] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  use Cdsat_Theory_Term_Type as Term'0

  use set.Fset

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span25] Fset.remove a self

  use set.Fset

  use prelude.prelude.Int

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span26] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'0 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span27] match self with
      | Assign'0.C_Decision t v -> sort'1 t = sort'0 v
      | Assign'0.C_Justified _ t v -> sort'1 t = sort'0 v /\ sort'1 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'1 t = sort'0 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span28] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'1 a
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span29] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span33] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span32] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'1 (let (a, _) = d in a) = sort'0 (let (_, a) = d in a)))
  && ([%#span31] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span30] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span36] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span34] invariant_nonneg'0 self)
   -> ([%#span35] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  use set.Fset

  predicate contains'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span37] Fset.mem e self

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span38] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#stheory10] invariant_nonneg'0 self)
   -> ([%#stheory15] set_level'0 self s <= level'0 self)
  && ([%#stheory14] set_level'0 self s >= 0)
  && ([%#stheory13] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#stheory12] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#stheory11] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 s i
   -> level_of'0 self i <= set_level'0 self s)

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span41] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span39] inv'0 self)
   -> ([%#span40] invariant'2 self  -> sort'0 (interp'0 self t) = sort'1 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span42] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span43] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 v a  -> satisfies'0 self a

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span44] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'0 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate contains'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span46] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'1_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span45] invariant_assign'0 self
   -> contains'1 self d = true  -> sort'1 (let (a, _) = d in a) = sort'0 (let (_, a) = d in a)

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'0.t_trail)
   =
    [%#span47] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a _ tl -> sound'0 tl /\ justified_sound'0 a
      end

  function find_justified'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 619 4 619 46] (self : Trail'0.t_trail) (kv : (Term'0.t_term, Value'0.t_value)) : ()

   =
    [%#span51] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = kv then () else find_justified'0 tl kv
      end

  axiom find_justified'0_spec : forall self : Trail'0.t_trail, kv : (Term'0.t_term, Value'0.t_value) . ([%#span48] sound'0 self)
   -> ([%#span49] contains'1 self kv)
   -> ([%#span50] forall l : int . forall a : Assign'0.t_assign . find'0 self kv = Option'0.C_Some (a, l)
   -> justified_sound'0 a)

  predicate is_decision'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 511 4 511 54] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span52] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Decision _ _, _) -> true
      | _ -> false
      end

  predicate is_input'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 521 4 521 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span53] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Input _ _, _) -> true
      | _ -> false
      end

  predicate entails'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 205 4 205 74] (self : Model'0.t_model) (j : Fset.fset (Term'0.t_term, Value'0.t_value)) (c : (Term'0.t_term, Value'0.t_value))

   =
    [%#span54] invariant'2 self  -> satisfy_set'0 self j  -> satisfies'0 self c

  predicate is_justified'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 501 4 501 55] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span55] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified _ _ _, _) -> true
      | _ -> false
      end

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span56] sort'0 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span59] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span57] is_bool'0 self)
   -> ([%#span58] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span60] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'1 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'1 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'0.t_trail) =
    [%#span61] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'0 j a  -> contains'1 tl a
        | _ -> true
        end
      end

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'0.t_trail) =
    [%#span62] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'0.t_trail) =
    [%#span63] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function justification'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 490 4 490 71] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span70] let _ = find_justified'0 self d in match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified j _ _, _) -> j
      | _ -> Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)
      end

  axiom justification'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span64] invariant'0 self)
   -> ([%#span65] is_justified'0 self d)
   -> ([%#span66] sound'0 self)
   -> ([%#span69] is_decision'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#span68] is_input'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#span67] forall m : Model'0.t_model . inv'0 m  -> entails'0 m (justification'0 self d) d)

  predicate acceptable'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 397 4 397 56] (self : Trail'0.t_trail) (t : Term'0.t_term) (val' : Value'0.t_value)

   =
    [%#span71] not contains'1 self (t, val')
    /\ sort'1 t = sort'0 val' /\ (is_bool'0 val'  -> not contains'1 self (t, negate'0 val'))

  constant self  : Trail'0.t_trail

  constant just  : Fset.fset (Term'0.t_term, Value'0.t_value)

  constant t  : Term'0.t_term

  constant v  : Value'0.t_value

  function add_justified [#"/Users/xavier/Code/cdsat/src/theory.rs" 457 4 457 84] (self : Trail'0.t_trail) (just : Fset.fset (Term'0.t_term, Value'0.t_value)) (t : Term'0.t_term) (v : Value'0.t_value) : Trail'0.t_trail


  goal vc_add_justified : ([%#stheory4] forall m : Model'0.t_model . inv'0 m
   -> satisfy_set'0 m just  -> satisfies'0 m (t, v))
   -> ([%#stheory3] sort'0 v = Sort'0.C_Boolean)
   -> ([%#stheory2] acceptable'0 self t v)
   -> ([%#stheory1] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 just a  -> contains'1 self a)
   -> ([%#stheory0] invariant'0 self)
   -> ([%#stheory10] invariant_nonneg'0 self)
  /\ (([%#stheory15] set_level'0 self just <= level'0 self)
  && ([%#stheory14] set_level'0 self just >= 0)
  && ([%#stheory13] just = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self just = 0)
  && ([%#stheory12] just <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 just i /\ level_of'0 self i = set_level'0 self just))
  && ([%#stheory11] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 just i
   -> level_of'0 self i <= set_level'0 self just)
   -> (let result = Trail'0.C_Assign (Assign'0.C_Justified just t v) (set_level'0 self just) self in ([%#stheory9] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 result a
   -> contains'1 self a \/ a = (t, v))
  && ([%#stheory8] level_of'0 result (t, v) = set_level'0 result just)
  && ([%#stheory7] is_justified'0 result (t, v) /\ justification'0 result (t, v) = just)
  && ([%#stheory6] invariant'0 result /\ contains'1 result (t, v))
  && ([%#stheory5] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 self a
   -> find'0 self a = find'0 result a)))
end
module Cdsat_Theory_Impl5_JustStable_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 646 15 646 26

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 647 15 647 32

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 648 15 648 29

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 649 15 649 36

  let%span stheory4 = "/Users/xavier/Code/cdsat/src/theory.rs" 650 14 650 59

  let%span span5 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span6 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span7 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span8 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span9 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span10 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span11 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span12 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span13 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span14 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span15 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span16 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span17 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span20 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span21 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span22 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span23 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span24 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span25 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span26 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span28 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span29 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span30 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span31 = "/Users/xavier/Code/cdsat/src/theory.rs" 616 15 616 27

  let%span span32 = "/Users/xavier/Code/cdsat/src/theory.rs" 617 15 617 32

  let%span span33 = "/Users/xavier/Code/cdsat/src/theory.rs" 618 4 618 90

  let%span span34 = "/Users/xavier/Code/cdsat/src/theory.rs" 620 8 629 9

  let%span span35 = "/Users/xavier/Code/cdsat/src/theory.rs" 512 8 515 9

  let%span span36 = "/Users/xavier/Code/cdsat/src/theory.rs" 522 8 525 9

  let%span span37 = "/Users/xavier/Code/cdsat/src/theory.rs" 206 8 206 84

  let%span span38 = "/Users/xavier/Code/cdsat/src/theory.rs" 502 8 505 9

  let%span span39 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span40 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span41 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span42 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span43 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span44 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span45 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span46 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span47 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span48 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span49 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span50 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span51 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span52 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span53 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span54 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span55 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span56 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  let%span span57 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span58 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span59 = "/Users/xavier/Code/cdsat/src/theory.rs" 484 15 484 31

  let%span span60 = "/Users/xavier/Code/cdsat/src/theory.rs" 485 15 485 35

  let%span span61 = "/Users/xavier/Code/cdsat/src/theory.rs" 486 15 486 27

  let%span span62 = "/Users/xavier/Code/cdsat/src/theory.rs" 487 4 487 54

  let%span span63 = "/Users/xavier/Code/cdsat/src/theory.rs" 488 4 488 58

  let%span span64 = "/Users/xavier/Code/cdsat/src/theory.rs" 489 4 489 61

  let%span span65 = "/Users/xavier/Code/cdsat/src/theory.rs" 491 8 491 30

  let%span span66 = "/Users/xavier/Code/cdsat/src/theory.rs" 635 8 641 9

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span5] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span6] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k = v
     -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'2 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use Cdsat_Theory_Term_Type as Term'0

  use Cdsat_Theory_Trail_Type as Trail'0

  use prelude.prelude.Int

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span7] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  use Cdsat_Theory_Assign_Type as Assign'0

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span8] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span9] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'1 a
      end

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span11] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span10] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span14] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span13] level'0 self <= len'0 self)
  && ([%#span12] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span15] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span16] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span20] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span19] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span18] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span17] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  use set.Fset

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span23] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span21] inv'0 self)
   -> ([%#span22] invariant'2 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span24] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  use set.Fset

  predicate contains'1 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span25] Fset.mem e self

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span26] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 v a  -> satisfies'0 self a

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span27] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'0 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span29] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span28] invariant_assign'0 self
   -> contains'0 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'0.t_trail)
   =
    [%#span30] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a _ tl -> sound'0 tl /\ justified_sound'0 a
      end

  function find_justified'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 619 4 619 46] (self : Trail'0.t_trail) (kv : (Term'0.t_term, Value'0.t_value)) : ()

   =
    [%#span34] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = kv then () else find_justified'0 tl kv
      end

  axiom find_justified'0_spec : forall self : Trail'0.t_trail, kv : (Term'0.t_term, Value'0.t_value) . ([%#span31] sound'0 self)
   -> ([%#span32] contains'0 self kv)
   -> ([%#span33] forall l : int . forall a : Assign'0.t_assign . find'0 self kv = Option'0.C_Some (a, l)
   -> justified_sound'0 a)

  predicate is_decision'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 511 4 511 54] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span35] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Decision _ _, _) -> true
      | _ -> false
      end

  use set.Fset

  predicate is_input'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 521 4 521 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span36] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Input _ _, _) -> true
      | _ -> false
      end

  predicate entails'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 205 4 205 74] (self : Model'0.t_model) (j : Fset.fset (Term'0.t_term, Value'0.t_value)) (c : (Term'0.t_term, Value'0.t_value))

   =
    [%#span37] invariant'2 self  -> satisfy_set'0 self j  -> satisfies'0 self c

  predicate is_justified'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 501 4 501 55] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span38] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified _ _ _, _) -> true
      | _ -> false
      end

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span39] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span42] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span40] is_bool'0 self)
   -> ([%#span41] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span43] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'0 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'0 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'0.t_trail) =
    [%#span44] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'1 j a  -> contains'0 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span45] Fset.remove a self

  use set.Fset

  use set.Fset

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span48] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span46] invariant_nonneg'0 self)
   -> ([%#span47] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span56] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#span49] invariant_nonneg'0 self)
   -> ([%#span54] set_level'0 self s <= level'0 self)
  && ([%#span53] set_level'0 self s >= 0)
  && ([%#span52] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#span51] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'1 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span50] forall i : (Term'0.t_term, Value'0.t_value) . contains'1 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'0.t_trail) =
    [%#span57] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'0.t_trail) =
    [%#span58] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function justification'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 490 4 490 71] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span65] let _ = find_justified'0 self d in match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified j _ _, _) -> j
      | _ -> Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)
      end

  axiom justification'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span59] invariant'0 self)
   -> ([%#span60] is_justified'0 self d)
   -> ([%#span61] sound'0 self)
   -> ([%#span64] is_decision'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#span63] is_input'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#span62] forall m : Model'0.t_model . inv'0 m  -> entails'0 m (justification'0 self d) d)

  predicate ext'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 634 4 634 37] (self : Trail'0.t_trail) (o : Trail'0.t_trail)

   =
    [%#span66] if level'0 self <= level'0 o then
      forall kv : (Term'0.t_term, Value'0.t_value) . contains'0 self kv  -> find'0 self kv = find'0 o kv
    else
      forall kv : (Term'0.t_term, Value'0.t_value) . contains'0 o kv  -> find'0 o kv = find'0 self kv


  constant self  : Trail'0.t_trail

  constant o  : Trail'0.t_trail

  constant kv  : (Term'0.t_term, Value'0.t_value)

  function just_stable [#"/Users/xavier/Code/cdsat/src/theory.rs" 651 4 651 56] (self : Trail'0.t_trail) (o : Trail'0.t_trail) (kv : (Term'0.t_term, Value'0.t_value)) : ()


  goal vc_just_stable : ([%#stheory3] is_justified'0 self kv)
   -> ([%#stheory2] contains'0 o kv)
   -> ([%#stheory1] contains'0 self kv)
   -> ([%#stheory0] ext'0 self o)  -> ([%#stheory4] justification'0 self kv = justification'0 o kv)
end
module Cdsat_Trail_Impl9_AddJustified
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 493 8 493 97

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 498 31 498 53

  let%span strail2 = "/Users/xavier/Code/cdsat/src/trail.rs" 500 12 500 79

  let%span strail3 = "/Users/xavier/Code/cdsat/src/trail.rs" 502 22 502 59

  let%span strail4 = "/Users/xavier/Code/cdsat/src/trail.rs" 504 27 504 126

  let%span strail5 = "/Users/xavier/Code/cdsat/src/trail.rs" 506 29 506 47

  let%span strail6 = "/Users/xavier/Code/cdsat/src/trail.rs" 509 12 509 99

  let%span strail7 = "/Users/xavier/Code/cdsat/src/trail.rs" 512 27 512 83

  let%span strail8 = "/Users/xavier/Code/cdsat/src/trail.rs" 514 22 514 55

  let%span strail9 = "/Users/xavier/Code/cdsat/src/trail.rs" 519 8 519 75

  let%span strail10 = "/Users/xavier/Code/cdsat/src/trail.rs" 520 8 520 70

  let%span strail11 = "/Users/xavier/Code/cdsat/src/trail.rs" 522 22 522 28

  let%span strail12 = "/Users/xavier/Code/cdsat/src/trail.rs" 527 28 527 75

  let%span strail13 = "/Users/xavier/Code/cdsat/src/trail.rs" 528 27 528 67

  let%span strail14 = "/Users/xavier/Code/cdsat/src/trail.rs" 529 8 529 92

  let%span strail15 = "/Users/xavier/Code/cdsat/src/trail.rs" 530 8 530 102

  let%span strail16 = "/Users/xavier/Code/cdsat/src/trail.rs" 532 8 532 88

  let%span strail17 = "/Users/xavier/Code/cdsat/src/trail.rs" 533 8 533 49

  let%span strail18 = "/Users/xavier/Code/cdsat/src/trail.rs" 534 22 534 51

  let%span strail19 = "/Users/xavier/Code/cdsat/src/trail.rs" 535 22 535 46

  let%span strail20 = "/Users/xavier/Code/cdsat/src/trail.rs" 484 4 484 40

  let%span strail21 = "/Users/xavier/Code/cdsat/src/trail.rs" 485 4 485 36

  let%span strail22 = "/Users/xavier/Code/cdsat/src/trail.rs" 486 15 486 31

  let%span strail23 = "/Users/xavier/Code/cdsat/src/trail.rs" 487 4 487 73

  let%span strail24 = "/Users/xavier/Code/cdsat/src/trail.rs" 488 4 488 51

  let%span strail25 = "/Users/xavier/Code/cdsat/src/trail.rs" 489 4 489 128

  let%span strail26 = "/Users/xavier/Code/cdsat/src/trail.rs" 490 4 490 48

  let%span span27 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span28 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span29 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span30 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span31 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span32 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span33 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span34 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  let%span span35 = "/Users/xavier/Code/cdsat/src/trail.rs" 146 14 146 59

  let%span span36 = "/Users/xavier/Code/cdsat/src/trail.rs" 144 4 144 10

  let%span span37 = "/Users/xavier/Code/cdsat/src/trail.rs" 140 15 140 48

  let%span span38 = "/Users/xavier/Code/cdsat/src/trail.rs" 141 14 141 44

  let%span span39 = "/Users/xavier/Code/cdsat/src/trail.rs" 138 4 138 10

  let%span span40 = "/Users/xavier/Code/cdsat/src/trail.rs" 134 15 134 45

  let%span span41 = "/Users/xavier/Code/cdsat/src/trail.rs" 135 14 135 47

  let%span span42 = "/Users/xavier/Code/cdsat/src/trail.rs" 132 4 132 10

  let%span span43 = "/Users/xavier/Code/cdsat/src/trail.rs" 127 15 127 32

  let%span span44 = "/Users/xavier/Code/cdsat/src/trail.rs" 128 15 128 32

  let%span span45 = "/Users/xavier/Code/cdsat/src/trail.rs" 129 14 129 31

  let%span span46 = "/Users/xavier/Code/cdsat/src/trail.rs" 125 4 125 10

  let%span span47 = "/Users/xavier/Code/cdsat/src/trail.rs" 122 14 122 45

  let%span span48 = "/Users/xavier/Code/cdsat/src/trail.rs" 120 4 120 10

  let%span span49 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 41 20 41 56

  let%span span50 = "/Users/xavier/Code/cdsat/src/trail.rs" 117 14 117 64

  let%span span51 = "/Users/xavier/Code/cdsat/src/trail.rs" 115 4 115 10

  let%span span52 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 31 20 31 53

  let%span span53 = "/Users/xavier/Code/cdsat/src/trail.rs" 112 14 112 61

  let%span span54 = "/Users/xavier/Code/cdsat/src/trail.rs" 110 4 110 10

  let%span span55 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 21 20 21 53

  let%span span56 = "/Users/xavier/Code/cdsat/src/trail.rs" 107 14 107 61

  let%span span57 = "/Users/xavier/Code/cdsat/src/trail.rs" 105 4 105 10

  let%span span58 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 11 20 11 56

  let%span span59 = "/Users/xavier/Code/cdsat/src/trail.rs" 102 14 102 64

  let%span span60 = "/Users/xavier/Code/cdsat/src/trail.rs" 100 4 100 10

  let%span span61 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span62 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span63 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 14 70 15

  let%span span64 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 23 70 24

  let%span span65 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 69 14 69 59

  let%span span66 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 64 15 64 48

  let%span span67 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 16 66 17

  let%span span68 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 25 66 26

  let%span span69 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 65 14 65 44

  let%span span70 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 59 15 59 45

  let%span span71 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 16 61 17

  let%span span72 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 25 61 26

  let%span span73 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 60 14 60 47

  let%span span74 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 53 15 53 32

  let%span span75 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 54 15 54 32

  let%span span76 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 13 56 14

  let%span span77 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 22 56 23

  let%span span78 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 31 56 32

  let%span span79 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 55 14 55 31

  let%span span80 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 50 12 50 13

  let%span span81 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 49 14 49 45

  let%span span82 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 18 46 19

  let%span span83 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 27 46 28

  let%span span84 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 45 14 45 64

  let%span span85 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 18 36 19

  let%span span86 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 27 36 28

  let%span span87 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 35 14 35 61

  let%span span88 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 18 26 19

  let%span span89 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 27 26 28

  let%span span90 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 25 14 25 61

  let%span span91 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 18 16 19

  let%span span92 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 27 16 28

  let%span span93 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 15 14 15 64

  let%span span94 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span95 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span96 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span97 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span98 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span99 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span100 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span101 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span102 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span103 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span104 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span105 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span106 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span107 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span108 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span109 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span110 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span111 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span112 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span113 = "/Users/xavier/Code/cdsat/src/theory.rs" 675 8 675 71

  let%span span114 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span115 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span116 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span117 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span118 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span119 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span120 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span121 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span122 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span123 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span124 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span125 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span126 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span127 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span128 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span129 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span130 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span131 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span132 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span133 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span134 = "/Users/xavier/Code/cdsat/src/theory.rs" 738 15 738 31

  let%span span135 = "/Users/xavier/Code/cdsat/src/theory.rs" 739 4 739 83

  let%span span136 = "/Users/xavier/Code/cdsat/src/theory.rs" 548 15 548 31

  let%span span137 = "/Users/xavier/Code/cdsat/src/theory.rs" 550 15 550 25

  let%span span138 = "/Users/xavier/Code/cdsat/src/theory.rs" 549 14 549 32

  let%span span139 = "/Users/xavier/Code/cdsat/src/theory.rs" 551 4 551 141

  let%span span140 = "/Users/xavier/Code/cdsat/src/theory.rs" 552 4 552 142

  let%span span141 = "/Users/xavier/Code/cdsat/src/theory.rs" 553 4 553 56

  let%span span142 = "/Users/xavier/Code/cdsat/src/theory.rs" 554 4 554 71

  let%span span143 = "/Users/xavier/Code/cdsat/src/theory.rs" 555 4 555 77

  let%span span144 = "/Users/xavier/Code/cdsat/src/theory.rs" 556 14 556 126

  let%span span145 = "/Users/xavier/Code/cdsat/src/theory.rs" 557 14 557 40

  let%span span146 = "/Users/xavier/Code/cdsat/src/theory.rs" 682 8 682 82

  let%span span147 = "/Users/xavier/Code/cdsat/src/theory.rs" 693 4 693 55

  let%span span148 = "/Users/xavier/Code/cdsat/src/theory.rs" 695 8 695 108

  let%span span149 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span150 = "/Users/xavier/Code/cdsat/src/theory.rs" 398 8 400 79

  let%span span151 = "/Users/xavier/Code/cdsat/src/theory.rs" 31 8 54 9

  let%span span152 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span153 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 129 8 129 78

  let%span span154 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 13 814 14

  let%span span155 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 24 814 25

  let%span span156 = "/Users/xavier/Code/cdsat/src/trail.rs" 809 0 809 73

  let%span span157 = "/Users/xavier/Code/cdsat/src/trail.rs" 810 0 810 63

  let%span span158 = "/Users/xavier/Code/cdsat/src/trail.rs" 811 0 811 55

  let%span span159 = "/Users/xavier/Code/cdsat/src/trail.rs" 812 0 812 52

  let%span span160 = "/Users/xavier/Code/cdsat/src/trail.rs" 813 10 813 33

  let%span span161 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 33 814 39

  let%span span162 = "/Users/xavier/Code/cdsat/src/trail.rs" 808 10 808 17

  let%span span163 = "/Users/xavier/Code/cdsat/src/trail.rs" 807 0 807 8

  let%span span164 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span165 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span166 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span167 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span168 = "/Users/xavier/Code/cdsat/src/term.rs" 195 8 225 9

  let%span span169 = "/Users/xavier/Code/cdsat/src/term.rs" 180 8 180 25

  let%span span170 = "/Users/xavier/Code/cdsat/src/trail.rs" 726 8 726 61

  let%span span171 = "/Users/xavier/Code/cdsat/src/trail.rs" 646 8 648 9

  let%span span172 = "/Users/xavier/Code/cdsat/src/trail.rs" 291 12 291 92

  let%span span173 = "/Users/xavier/Code/cdsat/src/trail.rs" 313 4 313 82

  let%span span174 = "/Users/xavier/Code/cdsat/src/trail.rs" 314 14 314 40

  let%span span175 = "/Users/xavier/Code/cdsat/src/trail.rs" 315 4 315 115

  let%span span176 = "/Users/xavier/Code/cdsat/src/trail.rs" 316 4 316 115

  let%span span177 = "/Users/xavier/Code/cdsat/src/trail.rs" 317 4 317 101

  let%span span178 = "/Users/xavier/Code/cdsat/src/trail.rs" 312 14 312 24

  let%span span179 = "/Users/xavier/Code/cdsat/src/trail.rs" 310 4 310 12

  let%span span180 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span181 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span182 = "/Users/xavier/Code/cdsat/src/theory.rs" 616 15 616 27

  let%span span183 = "/Users/xavier/Code/cdsat/src/theory.rs" 617 15 617 32

  let%span span184 = "/Users/xavier/Code/cdsat/src/theory.rs" 618 4 618 90

  let%span span185 = "/Users/xavier/Code/cdsat/src/theory.rs" 512 8 515 9

  let%span span186 = "/Users/xavier/Code/cdsat/src/theory.rs" 522 8 525 9

  let%span span187 = "/Users/xavier/Code/cdsat/src/theory.rs" 206 8 206 84

  let%span span188 = "/Users/xavier/Code/cdsat/src/theory.rs" 502 8 505 9

  let%span span189 = "/Users/xavier/Code/cdsat/src/theory.rs" 484 15 484 31

  let%span span190 = "/Users/xavier/Code/cdsat/src/theory.rs" 485 15 485 35

  let%span span191 = "/Users/xavier/Code/cdsat/src/theory.rs" 486 15 486 27

  let%span span192 = "/Users/xavier/Code/cdsat/src/theory.rs" 487 4 487 54

  let%span span193 = "/Users/xavier/Code/cdsat/src/theory.rs" 488 4 488 58

  let%span span194 = "/Users/xavier/Code/cdsat/src/theory.rs" 489 4 489 61

  let%span span195 = "/Users/xavier/Code/cdsat/src/trail.rs" 268 8 272 9

  let%span span196 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 31 8 31 32

  let%span span197 = "/Users/xavier/Code/cdsat/src/trail.rs" 547 4 547 12

  let%span span198 = "/Users/xavier/Code/cdsat/src/trail.rs" 254 8 263 9

  let%span span199 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 20 8 20 31

  let%span span200 = "/Users/xavier/Code/cdsat/src/trail.rs" 179 4 179 12

  let%span span201 = "/Users/xavier/Code/cdsat/src/trail.rs" 279 12 283 13

  let%span span202 = "/Users/xavier/Code/cdsat/src/trail.rs" 238 8 248 9

  let%span span203 = "/Users/xavier/Code/cdsat/src/theory.rs" 635 8 641 9

  let%span span204 = "/Users/xavier/Code/cdsat/src/theory.rs" 646 15 646 26

  let%span span205 = "/Users/xavier/Code/cdsat/src/theory.rs" 647 15 647 32

  let%span span206 = "/Users/xavier/Code/cdsat/src/theory.rs" 648 15 648 29

  let%span span207 = "/Users/xavier/Code/cdsat/src/theory.rs" 649 15 649 36

  let%span span208 = "/Users/xavier/Code/cdsat/src/theory.rs" 650 14 650 59

  let%span span209 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 105 18 105 22

  let%span span210 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 105 24 105 29

  let%span span211 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 104 4 104 40

  let%span span212 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 109 8 111 9

  let%span span213 = "/Users/xavier/Code/cdsat/src/trail.rs" 540 4 540 136

  let%span span214 = "/Users/xavier/Code/cdsat/src/trail.rs" 541 14 541 85

  let%span span215 = "/Users/xavier/Code/cdsat/src/trail.rs" 538 4 538 12

  let%span span216 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 26 20 26 34

  let%span span217 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 108 8 108 31

  let%span span218 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 1993 21 1993 25

  let%span span219 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 1993 27 1993 32

  let%span span220 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 82 26 82 51

  let%span span221 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 129 8 129 96

  let%span span222 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 122 20 122 37

  let%span span223 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 115 20 115 37

  let%span span224 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 146 27 146 46

  let%span span225 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2918 22 2918 26

  let%span span226 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2918 28 2918 33

  let%span span227 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 147 26 147 54

  let%span span228 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 148 26 148 57

  let%span span229 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 149 26 149 62

  let%span span230 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 150 26 150 55

  let%span span231 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2918 4 2918 58

  let%span span232 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 90 8 90 31

  let%span span233 = "/Users/xavier/Code/creusot/creusot-contracts/src/snapshot.rs" 28 20 28 48

  let%span span234 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2255 16 2255 20

  let%span span235 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 78 26 78 48

  let%span span236 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 156 27 156 46

  let%span span237 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2906 14 2906 18

  let%span span238 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2906 20 2906 25

  let%span span239 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 157 26 157 54

  let%span span240 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2906 4 2906 46

  let%span span241 = "/Users/xavier/Code/cdsat/src/theory.rs" 447 15 447 31

  let%span span242 = "/Users/xavier/Code/cdsat/src/theory.rs" 448 4 448 68

  let%span span243 = "/Users/xavier/Code/cdsat/src/theory.rs" 449 15 449 36

  let%span span244 = "/Users/xavier/Code/cdsat/src/theory.rs" 450 15 450 40

  let%span span245 = "/Users/xavier/Code/cdsat/src/theory.rs" 451 4 451 78

  let%span span246 = "/Users/xavier/Code/cdsat/src/theory.rs" 452 4 452 81

  let%span span247 = "/Users/xavier/Code/cdsat/src/theory.rs" 453 14 453 58

  let%span span248 = "/Users/xavier/Code/cdsat/src/theory.rs" 454 14 454 81

  let%span span249 = "/Users/xavier/Code/cdsat/src/theory.rs" 455 14 455 63

  let%span span250 = "/Users/xavier/Code/cdsat/src/theory.rs" 456 4 456 84

  let%span span251 = "/Users/xavier/Code/cdsat/src/theory.rs" 458 8 458 90

  let%span span252 = "/Users/xavier/Code/cdsat/src/theory.rs" 823 4 823 16

  let%span span253 = "/Users/xavier/Code/cdsat/src/theory.rs" 887 15 887 35

  let%span span254 = "/Users/xavier/Code/cdsat/src/theory.rs" 888 15 888 27

  let%span span255 = "/Users/xavier/Code/cdsat/src/theory.rs" 889 15 889 26

  let%span span256 = "/Users/xavier/Code/cdsat/src/theory.rs" 890 4 890 40

  let%span span257 = "/Users/xavier/Code/cdsat/src/theory.rs" 891 4 891 71

  let%span span258 = "/Users/xavier/Code/cdsat/src/theory.rs" 892 4 892 58

  let%span span259 = "/Users/xavier/Code/cdsat/src/theory.rs" 893 4 893 36

  let%span span260 = "/Users/xavier/Code/cdsat/src/theory.rs" 894 14 894 28

  let%span span261 = "/Users/xavier/Code/cdsat/src/theory.rs" 895 4 895 38

  let%span span262 = "/Users/xavier/Code/cdsat/src/theory.rs" 885 4 885 12

  let%span span263 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 19 21 19 25

  let%span span264 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 17 14 17 41

  let%span span265 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 18 14 18 42

  let%span span266 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 19 4 19 50

  let%span span267 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 43 8 43 31

  let%span span268 = "/Users/xavier/Code/cdsat/src/trail.rs" 614 15 614 31

  let%span span269 = "/Users/xavier/Code/cdsat/src/trail.rs" 615 4 615 97

  let%span span270 = "/Users/xavier/Code/cdsat/src/trail.rs" 616 14 616 88

  let%span span271 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2816 14 2816 18

  let%span span272 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 163 26 163 42

  let%span span273 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2816 4 2816 27

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use prelude.prelude.Slice

  predicate invariant'21 (self : slice (TrailIndex'0.t_trailindex)) =
    [%#span27] true

  predicate inv'18 (_x : slice (TrailIndex'0.t_trailindex))

  axiom inv'18 : forall x : slice (TrailIndex'0.t_trailindex) . inv'18 x = true

  use Cdsat_Theory_Value_Type as Value'1

  use Cdsat_Theory_Term_Type as Term'1

  predicate invariant'20 (self : (Term'1.t_term, Value'1.t_value)) =
    [%#span27] true

  predicate inv'17 (_x : (Term'1.t_term, Value'1.t_value))

  axiom inv'17 : forall x : (Term'1.t_term, Value'1.t_value) . inv'17 x = true

  use set.Fset

  predicate invariant'19 (self : Fset.fset (Term'1.t_term, Value'1.t_value)) =
    [%#span27] true

  predicate inv'16 (_x : Fset.fset (Term'1.t_term, Value'1.t_value))

  axiom inv'16 : forall x : Fset.fset (Term'1.t_term, Value'1.t_value) . inv'16 x = true

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function eq_cmp'2 (_1 : usize) (_2 : usize) : ()

  function antisym2'2 (_1 : usize) (_2 : usize) : ()

  function antisym1'2 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'2 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'2 (_1 : usize) : ()

  function cmp_gt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'2 (_1 : usize) (_2 : usize) : ()

  predicate invariant'18 (self : TrailIndex'0.t_trailindex) =
    [%#span27] true

  predicate inv'15 (_x : TrailIndex'0.t_trailindex)

  axiom inv'15 : forall x : TrailIndex'0.t_trailindex . inv'15 x = true

  use Cdsat_Trail_Assignment_Type as Assignment'0

  use seq.Seq

  predicate invariant'17 (self : Seq.seq (Assignment'0.t_assignment)) =
    [%#span27] true

  predicate inv'14 (_x : Seq.seq (Assignment'0.t_assignment))

  axiom inv'14 : forall x : Seq.seq (Assignment'0.t_assignment) . inv'14 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  constant max'0 : usize = [%#span28] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'13 (_x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

  function shallow_model'7 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) : Seq.seq (Assignment'0.t_assignment)


  axiom shallow_model'7_spec : forall self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . ([%#span29] inv'13 self)
   -> ([%#span31] inv'14 (shallow_model'7 self))
  && ([%#span30] Seq.length (shallow_model'7 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'16 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span32] inv'14 (shallow_model'7 self)

  axiom inv'13 : forall x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . inv'13 x = true

  predicate invariant'15 (self : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span27] true

  predicate inv'12 (_x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'12 : forall x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'12 x = true

  use seq.Seq

  predicate inv'11 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  function shallow_model'6 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))


  axiom shallow_model'6_spec : forall self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . ([%#span29] inv'11 self)
   -> ([%#span31] inv'12 (shallow_model'6 self))
  && ([%#span30] Seq.length (shallow_model'6 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'14 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span32] inv'12 (shallow_model'6 self)

  axiom inv'11 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'11 x
  = true

  predicate invariant'13 (self : Assignment'0.t_assignment) =
    [%#span27] true

  predicate inv'10 (_x : Assignment'0.t_assignment)

  axiom inv'10 : forall x : Assignment'0.t_assignment . inv'10 x = true

  use prelude.prelude.Borrow

  predicate invariant'12 (self : borrowed (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span27] true

  predicate inv'9 (_x : borrowed (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'9 : forall x : borrowed (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'9 x = true

  predicate invariant'11 (self : borrowed (Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)))

   =
    [%#span27] true

  predicate inv'8 (_x : borrowed (Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)))


  axiom inv'8 : forall x : borrowed (Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) . inv'8 x
  = true

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span33] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span34] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  function eq_cmp'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 147 4 147 31] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span36] ()

  axiom eq_cmp'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span35] (x = y)
  = (cmp_log'0 x y = Ordering'0.C_Equal)

  function antisym2'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 142 4 142 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span39] ()

  axiom antisym2'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span37] cmp_log'0 x y
  = Ordering'0.C_Greater)  -> ([%#span38] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 136 4 136 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span42] ()

  axiom antisym1'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span40] cmp_log'0 x y
  = Ordering'0.C_Less)  -> ([%#span41] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 130 4 130 52] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()

   =
    [%#span46] ()

  axiom trans'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span43] cmp_log'0 x y
  = o)  -> ([%#span44] cmp_log'0 y z = o)  -> ([%#span45] cmp_log'0 x z = o)

  function refl'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 123 4 123 20] (x : TrailIndex'0.t_trailindex) : () =
    [%#span48] ()

  axiom refl'1_spec : forall x : TrailIndex'0.t_trailindex . [%#span47] cmp_log'0 x x = Ordering'0.C_Equal

  function gt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span49] cmp_log'0 self o = Ordering'0.C_Greater

  function cmp_gt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 118 4 118 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span51] ()

  axiom cmp_gt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span50] gt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Greater)

  function ge_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span52] cmp_log'0 self o <> Ordering'0.C_Less

  function cmp_ge_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 113 4 113 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span54] ()

  axiom cmp_ge_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span53] ge_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Less)

  function lt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span55] cmp_log'0 self o = Ordering'0.C_Less

  function cmp_lt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 108 4 108 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span57] ()

  axiom cmp_lt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span56] lt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Less)

  function le_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span58] cmp_log'0 self o <> Ordering'0.C_Greater

  function cmp_le_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 103 4 103 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span60] ()

  axiom cmp_le_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span59] le_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Greater)

  predicate invariant'10 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span27] true

  predicate inv'7 (_x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

  axiom inv'7 : forall x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . inv'7 x = true

  predicate invariant'9 (self : usize) =
    [%#span27] true

  predicate inv'6 (_x : usize)

  axiom inv'6 : forall x : usize . inv'6 x = true

  predicate invariant'8 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span27] true

  predicate inv'5 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  axiom inv'5 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'5 x
  = true

  predicate invariant'6 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span27] true

  predicate inv'4 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'4 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'4 x = true

  use seq.Seq

  predicate inv'3 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function shallow_model'2 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom shallow_model'2_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span29] inv'3 self)
   -> ([%#span31] inv'4 (shallow_model'2 self))
  && ([%#span30] Seq.length (shallow_model'2 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'5 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span32] inv'4 (shallow_model'2 self)

  axiom inv'3 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'3 x = true

  predicate invariant'4 (self : slice (TrailIndex'0.t_trailindex)) =
    [%#span27] true

  predicate inv'2 (_x : slice (TrailIndex'0.t_trailindex))

  axiom inv'2 : forall x : slice (TrailIndex'0.t_trailindex) . inv'2 x = true

  predicate invariant'3 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span27] true

  predicate inv'1 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  axiom inv'1 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'1 x = true

  use Cdsat_Theory_Sort_Type as Sort'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'1.t_value) : Sort'0.t_sort =
    [%#span61] match self with
      | Value'1.C_Bool _ -> Sort'0.C_Boolean
      | Value'1.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span62] forall v : Value'1.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'0 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'2 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  function eq_cmp'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom eq_cmp'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span63] inv'15 x)
   -> ([%#span64] inv'15 y)  -> ([%#span65] (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal))

  function antisym2'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym2'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span66] cmp_log'0 x y
  = Ordering'0.C_Greater)
   -> ([%#span67] inv'15 x)  -> ([%#span68] inv'15 y)  -> ([%#span69] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym1'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span70] cmp_log'0 x y
  = Ordering'0.C_Less)
   -> ([%#span71] inv'15 x)  -> ([%#span72] inv'15 y)  -> ([%#span73] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span74] cmp_log'0 x y
  = o)
   -> ([%#span75] cmp_log'0 y z = o)
   -> ([%#span76] inv'15 x)  -> ([%#span77] inv'15 y)  -> ([%#span78] inv'15 z)  -> ([%#span79] cmp_log'0 x z = o)

  function refl'0 (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'0_spec : forall x : TrailIndex'0.t_trailindex . ([%#span80] inv'15 x)
   -> ([%#span81] cmp_log'0 x x = Ordering'0.C_Equal)

  function cmp_gt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_gt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span82] inv'15 x)
   -> ([%#span83] inv'15 y)  -> ([%#span84] gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater))

  function cmp_ge_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_ge_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span85] inv'15 x)
   -> ([%#span86] inv'15 y)  -> ([%#span87] ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less))

  function cmp_lt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_lt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span88] inv'15 x)
   -> ([%#span89] inv'15 y)  -> ([%#span90] lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less))

  function cmp_le_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_le_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span91] inv'15 x)
   -> ([%#span92] inv'15 y)  -> ([%#span93] le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater))

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'1.t_term) : Sort'0.t_sort =
    [%#span94] match self with
      | Term'1.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'1.C_Value v -> sort'0 v
      | Term'1.C_Plus _ _ -> Sort'0.C_Rational
      | Term'1.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'1.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'1.C_Neg _ -> Sort'0.C_Boolean
      | Term'1.C_Disj _ _ -> Sort'0.C_Boolean
      end

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'1.t_term) : Value'1.t_value

   =
    [%#span97] match t with
      | Term'1.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'1.C_Value v -> v
      | Term'1.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'1.C_Rat r1, Value'1.C_Rat r2) -> Value'1.C_Rat r1
        | _ -> Value'1.C_Rat (from_int'0 (- 1))
        end
      | Term'1.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'1.C_Bool b1, Value'1.C_Bool b2) -> Value'1.C_Bool (b1 /\ b2)
        | _ -> Value'1.C_Bool false
        end
      | Term'1.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'1.C_Bool b1, Value'1.C_Bool b2) -> Value'1.C_Bool (b1 \/ b2)
        | _ -> Value'1.C_Bool false
        end
      | Term'1.C_Eq l r -> Value'1.C_Bool (interp'0 self l = interp'0 self r)
      | Term'1.C_Neg t -> match interp'0 self t with
        | Value'1.C_Bool b -> Value'1.C_Bool (not b)
        | _ -> Value'1.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'1.t_term . ([%#span95] inv'0 self)
   -> ([%#span96] invariant'2 self  -> sort'0 (interp'0 self t) = sort'1 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'1.t_term, Value'1.t_value))

   =
    [%#span98] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  use prelude.prelude.Int

  use Cdsat_Theory_Trail_Type as Trail'1

  use Cdsat_Theory_Assign_Type as Assign'0

  predicate invariant'7 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span99] match self with
      | Assign'0.C_Decision t v -> sort'1 t = sort'0 v
      | Assign'0.C_Justified _ t v -> sort'1 t = sort'0 v /\ sort'1 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'1 t = sort'0 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'1.t_trail) =
    [%#span100] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'7 a
      end

  function len'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'1.t_trail) : int

  axiom len'1_spec : forall self : Trail'1.t_trail . [%#span101] len'1 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'1.t_trail) : int =
    [%#span104] match self with
      | Trail'1.C_Empty -> 0
      | Trail'1.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'1.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'1.t_trail . ([%#span103] level'0 self <= len'1 self)
  && ([%#span102] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'1.t_trail) =
    [%#span105] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'1.t_term, Value'1.t_value)

   =
    [%#span106] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span110] match self with
      | Trail'1.C_Empty -> Option'0.C_None
      | Trail'1.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'1.t_trail, d : (Term'1.t_term, Value'1.t_value) . ([%#span109] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'1 (let (a, _) = d in a) = sort'0 (let (_, a) = d in a)))
  && ([%#span108] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span107] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  predicate contains'3 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value))

   =
    [%#span112] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'3_spec : forall self : Trail'1.t_trail, d : (Term'1.t_term, Value'1.t_value) . [%#span111] invariant_assign'0 self
   -> contains'3 self d = true  -> sort'1 (let (a, _) = d in a) = sort'0 (let (_, a) = d in a)

  predicate satisfied_by'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 674 4 674 47] (self : Trail'1.t_trail) (m : Model'0.t_model)

   =
    [%#span113] forall a : (Term'1.t_term, Value'1.t_value) . contains'3 self a  -> satisfies'0 m a

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value)) : int

   =
    [%#span116] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'1.t_trail, d : (Term'1.t_term, Value'1.t_value) . ([%#span114] invariant_nonneg'0 self)
   -> ([%#span115] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'1.t_value) =
    [%#span117] sort'0 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'1.t_value) : Value'1.t_value =
    [%#span120] match self with
      | Value'1.C_Bool b -> Value'1.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'1.t_value . ([%#span118] is_bool'0 self)
   -> ([%#span119] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'1.t_trail) =
    [%#span121] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> let ap = to_pair'0 a in not contains'3 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'3 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  use set.Fset

  predicate contains'2 [@inline:trivial] (self : Fset.fset (Term'1.t_term, Value'1.t_value)) (e : (Term'1.t_term, Value'1.t_value))

   =
    [%#span122] Fset.mem e self

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'1.t_trail) =
    [%#span123] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'1.t_term, Value'1.t_value) . contains'2 j a  -> contains'3 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'1 [@inline:trivial] (self : Fset.fset (Term'1.t_term, Value'1.t_value)) (a : (Term'1.t_term, Value'1.t_value)) : Fset.fset (Term'1.t_term, Value'1.t_value)

   =
    [%#span124] Fset.remove a self

  use set.Fset

  use set.Fset

  use set.Fset

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'1.t_trail) (s : Fset.fset (Term'1.t_term, Value'1.t_value)) : int


  axiom set_level'0_spec : forall self : Trail'1.t_trail, s : Fset.fset (Term'1.t_term, Value'1.t_value) . ([%#span125] invariant_nonneg'0 self)
   -> ([%#span130] set_level'0 self s <= level'0 self)
  && ([%#span129] set_level'0 self s >= 0)
  && ([%#span128] s = (Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value))  -> set_level'0 self s = 0)
  && ([%#span127] s <> (Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value))
   -> (exists i : (Term'1.t_term, Value'1.t_value) . contains'2 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span126] forall i : (Term'1.t_term, Value'1.t_value) . contains'2 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'1.t_trail) =
    [%#span132] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'1.t_trail) =
    [%#span133] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function count_bounds'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 740 4 740 35] (self : Trail'1.t_trail) : ()

  axiom count_bounds'0_spec : forall self : Trail'1.t_trail . ([%#span134] invariant'1 self)
   -> ([%#span135] forall a : (Term'1.t_term, Value'1.t_value) . contains'3 self a
   -> level_of'0 self a <= level'0 self)

  function restrict'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 558 4 558 45] (self : Trail'1.t_trail) (level : int) : Trail'1.t_trail


  axiom restrict'0_spec : forall self : Trail'1.t_trail, level : int . ([%#span136] invariant'1 self)
   -> ([%#span137] level >= 0)
   -> ([%#span145] len'1 (restrict'0 self level) <= len'1 self)
  && ([%#span144] (level'0 self >= level  -> level'0 (restrict'0 self level) = level)
  /\ (level'0 self < level  -> level'0 (restrict'0 self level) = level'0 self))
  && ([%#span143] forall m : Model'0.t_model . inv'0 m
   -> satisfied_by'0 self m  -> satisfied_by'0 (restrict'0 self level) m)
  && ([%#span142] forall a : (Term'1.t_term, Value'1.t_value) . not contains'3 self a
   -> not contains'3 (restrict'0 self level) a)
  && ([%#span141] level >= level'0 self  -> restrict'0 self level = self)
  && ([%#span140] forall a : (Term'1.t_term, Value'1.t_value) . contains'3 (restrict'0 self level) a
   -> contains'3 self a
  /\ level_of'0 (restrict'0 self level) a <= level /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span139] forall a : (Term'1.t_term, Value'1.t_value) . contains'3 self a
   -> level_of'0 self a <= level
   -> contains'3 (restrict'0 self level) a /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span138] invariant'1 (restrict'0 self level))

  predicate unsat'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 681 4 681 30] (self : Trail'1.t_trail) =
    [%#span146] forall m : Model'0.t_model . inv'0 m  -> satisfied_by'0 (restrict'0 self 0) m  -> false

  predicate impls'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 694 4 694 41] (self : Trail'1.t_trail) (rhs : Trail'1.t_trail)

   =
    [%#span148] forall m : Model'0.t_model . inv'0 m
     -> satisfied_by'0 (restrict'0 self 0) m  -> satisfied_by'0 (restrict'0 rhs 0) m

  axiom impls'0_spec : forall self : Trail'1.t_trail, rhs : Trail'1.t_trail . [%#span147] impls'0 self rhs
   -> unsat'0 rhs  -> unsat'0 self

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'1.t_term, Value'1.t_value))

   =
    [%#span149] forall a : (Term'1.t_term, Value'1.t_value) . contains'2 v a  -> satisfies'0 self a

  predicate acceptable'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 397 4 397 56] (self : Trail'1.t_trail) (t : Term'1.t_term) (val' : Value'1.t_value)

   =
    [%#span150] not contains'3 self (t, val')
    /\ sort'1 t = sort'0 val' /\ (is_bool'0 val'  -> not contains'3 self (t, negate'0 val'))

  function well_sorted'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 30 4 30 36] (self : Term'1.t_term) : bool =
    [%#span151] match self with
      | Term'1.C_Variable v -> true
      | Term'1.C_Value v -> true
      | Term'1.C_Plus l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'1 l = sort'1 r /\ sort'1 r = Sort'0.C_Rational
      | Term'1.C_Eq l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'1 l = sort'1 r
      | Term'1.C_Conj l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'1 l = sort'1 r /\ sort'1 r = Sort'0.C_Boolean
      | Term'1.C_Disj l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'1 l = sort'1 r /\ sort'1 r = Sort'0.C_Boolean
      | Term'1.C_Neg t -> well_sorted'0 t /\ sort'1 t = Sort'0.C_Boolean
      end

  use set.Fset

  function insert'0 [@inline:trivial] (self : Fset.fset (Term'1.t_term, Value'1.t_value)) (e : (Term'1.t_term, Value'1.t_value)) : Fset.fset (Term'1.t_term, Value'1.t_value)

   =
    [%#span152] Fset.add e self

  use seq.Seq

  use prelude.seq_ext.SeqExt

  use seq.Seq

  use seq.Seq

  predicate contains'1 (self : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) =
    [%#span153] exists i : int . 0 <= i /\ i < Seq.length self /\ Seq.get self i = e

  function remove'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 814 0 814 39] (s : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom remove'0_def : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . remove'0 s e
  = ([%#span163] if s = (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) then
    Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)
  else
    if Seq.get s (Seq.length s - 1) = e then
      remove'0 (SeqExt.subsequence s 0 (Seq.length s - 1)) e
    else
      Seq.snoc (remove'0 (SeqExt.subsequence s 0 (Seq.length s - 1)) e) (Seq.get s (Seq.length s - 1))

  )

  axiom remove'0_spec : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . ([%#span154] inv'4 s)
   -> ([%#span155] inv'15 e)
   -> ([%#span161] inv'4 (remove'0 s e))
  && ([%#span160] Seq.length (remove'0 s e) <= Seq.length s)
  && ([%#span159] contains'1 s e  -> Seq.length (remove'0 s e) < Seq.length s)
  && ([%#span158] forall t : TrailIndex'0.t_trailindex . inv'15 t  -> contains'1 (remove'0 s e) t  -> t <> e)
  && ([%#span157] forall t : TrailIndex'0.t_trailindex . inv'15 t  -> contains'1 (remove'0 s e) t  -> contains'1 s t)
  && ([%#span156] forall t : TrailIndex'0.t_trailindex . inv'15 t
   -> contains'1 s t  -> e <> t  -> contains'1 (remove'0 s e) t)

  use Cdsat_Trail_Trail_Type as Trail'0

  use Cdsat_Term_Value_Type as Value'0

  use Cdsat_Term_Term_Type as Term'0

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  function deep_model'4 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span164] match self with
      | Value'0.C_Bool b -> Value'1.C_Bool b
      | Value'0.C_Rat br -> Value'1.C_Rat (deep_model'4 br)
      end

  function shallow_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span165] deep_model'1 self

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  use Cdsat_Term_Sort_Type as Sort'1

  function deep_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'1.t_sort) : Sort'0.t_sort =
    [%#span166] match self with
      | Sort'1.C_Boolean -> Sort'0.C_Boolean
      | Sort'1.C_Rational -> Sort'0.C_Rational
      end

  function deep_model'2 (self : usize) : int =
    [%#span167] UIntSize.to_int self

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 193 4 193 44] (self : Term'0.t_term) : Term'1.t_term =
    [%#span168] match self with
      | Term'0.C_Variable v s -> Term'1.C_Variable (Var'0.C_Var (deep_model'2 v) (deep_model'3 s))
      | Term'0.C_Value v -> Term'1.C_Value (deep_model'1 v)
      | Term'0.C_Plus l r -> Term'1.C_Plus (deep_model'0 l) (deep_model'0 r)
      | Term'0.C_Eq l r -> Term'1.C_Eq (deep_model'0 l) (deep_model'0 r)
      | Term'0.C_Conj l r -> Term'1.C_Conj (deep_model'0 l) (deep_model'0 r)
      | Term'0.C_Disj l r -> Term'1.C_Disj (deep_model'0 l) (deep_model'0 r)
      | Term'0.C_Neg t -> Term'1.C_Neg (deep_model'0 t)
      | Term'0.C_Impl l r -> Term'1.C_Disj (Term'1.C_Neg (deep_model'0 l)) (deep_model'0 r)
      | Term'0.C_Times l r -> Term'1.C_Plus (Term'1.C_Value (Value'1.C_Rat (deep_model'4 l))) (deep_model'0 r)
      | Term'0.C_Lt l r -> Term'1.C_Eq (deep_model'0 l) (deep_model'0 r)
      end

  function shallow_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 179 4 179 50] (self : Term'0.t_term) : Term'1.t_term
   =
    [%#span169] deep_model'0 self

  function term_value'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 725 4 725 61] (self : Assignment'0.t_assignment) : (Term'1.t_term, Value'1.t_value)

   =
    [%#span170] (shallow_model'0 (Cdsat_Trail_Assignment_Type.assignment_term self), shallow_model'1 (Cdsat_Trail_Assignment_Type.assignment_val self))

  use seq.Seq

  use seq.Seq

  use Cdsat_Trail_Trail_Type as Cdsat_Trail_Trail_Type

  function index_logic'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 645 4 645 77] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : (Term'1.t_term, Value'1.t_value)

   =
    [%#span171] term_value'0 (Seq.get (shallow_model'7 (Seq.get (shallow_model'6 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)))) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)))

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 289 4 289 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex)

   =
    [%#span172] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)
    < Seq.length (shallow_model'6 (Cdsat_Trail_Trail_Type.trail_assignments self))
    /\ UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)
    < Seq.length (shallow_model'7 (Seq.get (shallow_model'6 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))))

  function abstract_justification'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 318 4 321 44] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) : Fset.fset (Term'1.t_term, Value'1.t_value)


  axiom abstract_justification'0_def : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . abstract_justification'0 self just
  = ([%#span179] if Seq.length just > 0 then
    let set = abstract_justification'0 self (remove'0 just (Seq.get just 0)) in let a = index_logic'0 self (Seq.get just 0) in insert'0 set a
  else
    Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value)
  )

  axiom abstract_justification'0_spec : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span173] forall i : int . 0
  <= i
  /\ i < Seq.length just  -> contains'0 self (Seq.get just i))
   -> ([%#span177] forall i : int . 0 <= i /\ i < Seq.length just
   -> contains'2 (abstract_justification'0 self just) (index_logic'0 self (Seq.get just i)))
  && ([%#span176] forall a : (Term'1.t_term, Value'1.t_value) . contains'2 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'1 just ix /\ a = index_logic'0 self ix))
  && ([%#span175] forall a : (Term'1.t_term, Value'1.t_value) . contains'2 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'0 self ix /\ a = index_logic'0 self ix))
  && ([%#span174] Fset.cardinal (abstract_justification'0 self just) <= Seq.length just)

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span180] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'0 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate sound'1 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'1.t_trail)
   =
    [%#span181] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a _ tl -> sound'1 tl /\ justified_sound'0 a
      end

  function find_justified'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 619 4 619 46] (self : Trail'1.t_trail) (kv : (Term'1.t_term, Value'1.t_value)) : ()


  axiom find_justified'0_spec : forall self : Trail'1.t_trail, kv : (Term'1.t_term, Value'1.t_value) . ([%#span182] sound'1 self)
   -> ([%#span183] contains'3 self kv)
   -> ([%#span184] forall l : int . forall a : Assign'0.t_assign . find'0 self kv = Option'0.C_Some (a, l)
   -> justified_sound'0 a)

  predicate is_decision'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 511 4 511 54] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value))

   =
    [%#span185] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Decision _ _, _) -> true
      | _ -> false
      end

  predicate is_input'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 521 4 521 51] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value))

   =
    [%#span186] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Input _ _, _) -> true
      | _ -> false
      end

  predicate entails'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 205 4 205 74] (self : Model'0.t_model) (j : Fset.fset (Term'1.t_term, Value'1.t_value)) (c : (Term'1.t_term, Value'1.t_value))

   =
    [%#span187] invariant'2 self  -> satisfy_set'0 self j  -> satisfies'0 self c

  predicate is_justified'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 501 4 501 55] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value))

   =
    [%#span188] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified _ _ _, _) -> true
      | _ -> false
      end

  function justification'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 490 4 490 71] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value)) : Fset.fset (Term'1.t_term, Value'1.t_value)


  axiom justification'0_spec : forall self : Trail'1.t_trail, d : (Term'1.t_term, Value'1.t_value) . ([%#span189] invariant'1 self)
   -> ([%#span190] is_justified'0 self d)
   -> ([%#span191] sound'1 self)
   -> ([%#span194] is_decision'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value)))
  && ([%#span193] is_input'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value)))
  && ([%#span192] forall m : Model'0.t_model . inv'0 m  -> entails'0 m (justification'0 self d) d)

  use prelude.prelude.Snapshot

  predicate justified_correct'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 267 4 267 78] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) (j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

   =
    [%#span195] (forall i : TrailIndex'0.t_trailindex . contains'1 (shallow_model'2 j) i
     -> lt_log'0 i ix /\ contains'0 self i)
    /\ is_justified'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ justification'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    = abstract_justification'0 self (shallow_model'2 j)

  use Cdsat_Trail_Reason_Type as Reason'0

  function index_logic'3 [@inline:trivial] (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (ix : usize) : Assignment'0.t_assignment

   =
    [%#span196] Seq.get (shallow_model'7 self) (UIntSize.to_int ix)

  function index_logic'2 [@inline:trivial] (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (ix : usize) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span196] Seq.get (shallow_model'6 self) (UIntSize.to_int ix)

  function reason'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 549 4 549 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : Reason'0.t_reason

   =
    [%#span197] Cdsat_Trail_Assignment_Type.assignment_reason (index_logic'3 (index_logic'2 (Cdsat_Trail_Trail_Type.trail_assignments self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)) (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix))

  predicate justified_is_justified'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 253 4 253 47] (self : Trail'0.t_trail) =
    [%#span198] forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> (let reason = reason'0 self ix in (reason = Reason'0.C_Decision)
    = is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ (reason = Reason'0.C_Input)
    = is_input'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ (forall j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . reason = Reason'0.C_Justified j
     -> justified_correct'0 self ix j))

  function index_logic'4 [@inline:trivial] (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (ix : int) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span199] Seq.get (shallow_model'6 self) ix

  function level_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 180 4 180 33] (self : TrailIndex'0.t_trailindex) : int
   =
    [%#span200] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 self)

  predicate abstract_relation'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 277 4 277 42] (self : Trail'0.t_trail) =
    [%#span201] (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> contains'3 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix))
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    = UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))
    /\ (forall a : (Term'1.t_term, Value'1.t_value) . contains'3 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
     -> (exists ix : TrailIndex'0.t_trailindex . contains'0 self ix
    /\ level_log'0 ix = level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
    /\ index_logic'0 self ix = a))

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 237 4 237 34] (self : Trail'0.t_trail) =
    [%#span202] abstract_relation'0 self
    /\ sound'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    /\ invariant'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    /\ level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    = UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self)
    /\ UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self)
    = Seq.length (shallow_model'6 (Cdsat_Trail_Trail_Type.trail_assignments self)) - 1
    /\ (forall i : int . 0 <= i /\ i < Seq.length (shallow_model'6 (Cdsat_Trail_Trail_Type.trail_assignments self))
     -> Seq.length (shallow_model'7 (index_logic'4 (Cdsat_Trail_Trail_Type.trail_assignments self) i)) > 0)
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix) = 0)
    = is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix))
    /\ (forall j : TrailIndex'0.t_trailindex . forall i : TrailIndex'0.t_trailindex . contains'0 self i
     -> contains'0 self j  -> i <> j  -> index_logic'0 self i <> index_logic'0 self j)
    /\ justified_is_justified'0 self
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> well_sorted'0 (let (a, _) = index_logic'0 self ix in a))

  use prelude.prelude.Snapshot

  use Cdsat_Theory_Normal_Type as Normal'0

  use prelude.prelude.Intrinsic

  predicate ext'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 634 4 634 37] (self : Trail'1.t_trail) (o : Trail'1.t_trail)

   =
    [%#span203] if level'0 self <= level'0 o then
      forall kv : (Term'1.t_term, Value'1.t_value) . contains'3 self kv  -> find'0 self kv = find'0 o kv
    else
      forall kv : (Term'1.t_term, Value'1.t_value) . contains'3 o kv  -> find'0 o kv = find'0 self kv


  use prelude.prelude.Snapshot

  function just_stable'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 651 4 651 56] (self : Trail'1.t_trail) (o : Trail'1.t_trail) (kv : (Term'1.t_term, Value'1.t_value)) : ()


  axiom just_stable'0_spec : forall self : Trail'1.t_trail, o : Trail'1.t_trail, kv : (Term'1.t_term, Value'1.t_value) . ([%#span204] ext'0 self o)
   -> ([%#span205] contains'3 self kv)
   -> ([%#span206] contains'3 o kv)
   -> ([%#span207] is_justified'0 self kv)  -> ([%#span208] justification'0 self kv = justification'0 o kv)

  use prelude.prelude.Snapshot

  predicate ext_eq'0 (self : Fset.fset (Term'1.t_term, Value'1.t_value)) (other : Fset.fset (Term'1.t_term, Value'1.t_value))

   =
    [%#span212] forall e : (Term'1.t_term, Value'1.t_value) . inv'17 e  -> contains'2 self e = contains'2 other e

  axiom ext_eq'0_spec : forall self : Fset.fset (Term'1.t_term, Value'1.t_value), other : Fset.fset (Term'1.t_term, Value'1.t_value) . ([%#span209] inv'16 self)
   -> ([%#span210] inv'16 other)  -> ([%#span211] ext_eq'0 self other  -> self = other)

  function abs_just_equiv'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 542 4 542 67] (self : Trail'0.t_trail) (other : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) : ()


  axiom abs_just_equiv'0_spec : forall self : Trail'0.t_trail, other : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span213] forall j : TrailIndex'0.t_trailindex . contains'1 just j
   -> contains'0 self j /\ contains'0 other j /\ index_logic'0 self j = index_logic'0 other j)
   -> ([%#span214] abstract_justification'0 self just = abstract_justification'0 other just)

  use prelude.prelude.Snapshot

  predicate resolve'1 (self : borrowed (Trail'0.t_trail)) =
    [%#span216] self.final = self.current

  predicate resolve'0 (self : borrowed (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span216] self.final = self.current

  use seq.Seq

  function shallow_model'11 (self : borrowed (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) : Seq.seq (Assignment'0.t_assignment)

   =
    [%#span217] shallow_model'7 self.current

  let rec push'0 (self:borrowed (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) (value:Assignment'0.t_assignment) (return'  (ret:()))= {[@expl:precondition] [%#span219] inv'10 value}
    {[@expl:precondition] [%#span218] inv'9 self}
    any
    [ return' (result:())-> {[%#span220] shallow_model'7 self.final = Seq.snoc (shallow_model'11 self) value}
      (! return' {result}) ]


  predicate resolve_elswhere'0 [@inline:trivial] (self : usize) (old' : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) (fin : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

   =
    [%#span221] forall i : int . 0 <= i /\ i <> UIntSize.to_int self /\ i < Seq.length old'
     -> Seq.get old' i = Seq.get fin i

  predicate has_value'0 [@inline:trivial] (self : usize) (seq : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) (out : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

   =
    [%#span222] Seq.get seq (UIntSize.to_int self) = out

  predicate in_bounds'0 [@inline:trivial] (self : usize) (seq : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

   =
    [%#span223] UIntSize.to_int self < Seq.length seq

  function shallow_model'10 (self : borrowed (Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

   =
    [%#span217] shallow_model'6 self.current

  let rec index_mut'0 (self:borrowed (Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))) (index:usize) (return'  (ret:borrowed (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))))= {[@expl:precondition] [%#span226] inv'6 index}
    {[@expl:precondition] [%#span225] inv'8 self}
    {[@expl:precondition] [%#span224] in_bounds'0 index (shallow_model'10 self)}
    any
    [ return' (result:borrowed (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))-> {[%#span231] inv'9 result}
      {[%#span230] Seq.length (shallow_model'6 self.final) = Seq.length (shallow_model'10 self)}
      {[%#span229] resolve_elswhere'0 index (shallow_model'10 self) (shallow_model'6 self.final)}
      {[%#span228] has_value'0 index (shallow_model'6 self.final) result.final}
      {[%#span227] has_value'0 index (shallow_model'10 self) result.current}
      (! return' {result}) ]


  function shallow_model'5 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)

   =
    [%#span232] shallow_model'2 self

  use prelude.prelude.Snapshot

  function shallow_model'3 (self : Snapshot.snap_ty (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) : Seq.seq (TrailIndex'0.t_trailindex)

   =
    [%#span233] shallow_model'5 (Snapshot.inner self)

  function shallow_model'9 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) : Seq.seq (Assignment'0.t_assignment)

   =
    [%#span232] shallow_model'7 self

  let rec len'0 (self:Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (return'  (ret:usize))= {[@expl:precondition] [%#span234] inv'7 self}
    any
    [ return' (result:usize)-> {[%#span235] UIntSize.to_int result = Seq.length (shallow_model'9 self)}
      (! return' {result}) ]


  function shallow_model'8 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

   =
    [%#span232] shallow_model'6 self

  let rec index'0 (self:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (index:usize) (return'  (ret:Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))= {[@expl:precondition] [%#span238] inv'6 index}
    {[@expl:precondition] [%#span237] inv'5 self}
    {[@expl:precondition] [%#span236] in_bounds'0 index (shallow_model'8 self)}
    any
    [ return' (result:Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))-> {[%#span240] inv'7 result}
      {[%#span239] has_value'0 index (shallow_model'8 self) result}
      (! return' {result}) ]


  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  function add_justified'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 457 4 457 84] (self : Trail'1.t_trail) (just : Fset.fset (Term'1.t_term, Value'1.t_value)) (t : Term'1.t_term) (v : Value'1.t_value) : Trail'1.t_trail

   =
    [%#span251] Trail'1.C_Assign (Assign'0.C_Justified just t v) (set_level'0 self just) self

  axiom add_justified'0_spec : forall self : Trail'1.t_trail, just : Fset.fset (Term'1.t_term, Value'1.t_value), t : Term'1.t_term, v : Value'1.t_value . ([%#span241] invariant'1 self)
   -> ([%#span242] forall a : (Term'1.t_term, Value'1.t_value) . contains'2 just a  -> contains'3 self a)
   -> ([%#span243] acceptable'0 self t v)
   -> ([%#span244] sort'0 v = Sort'0.C_Boolean)
   -> ([%#span245] forall m : Model'0.t_model . inv'0 m  -> satisfy_set'0 m just  -> satisfies'0 m (t, v))
   -> ([%#span250] forall a : (Term'1.t_term, Value'1.t_value) . contains'3 (add_justified'0 self just t v) a
   -> contains'3 self a \/ a = (t, v))
  && ([%#span249] level_of'0 (add_justified'0 self just t v) (t, v) = set_level'0 (add_justified'0 self just t v) just)
  && ([%#span248] is_justified'0 (add_justified'0 self just t v) (t, v)
  /\ justification'0 (add_justified'0 self just t v) (t, v) = just)
  && ([%#span247] invariant'1 (add_justified'0 self just t v) /\ contains'3 (add_justified'0 self just t v) (t, v))
  && ([%#span246] forall a : (Term'1.t_term, Value'1.t_value) . contains'3 self a
   -> find'0 self a = find'0 (add_justified'0 self just t v) a)

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  use Cdsat_Theory_Normal_Type as Cdsat_Theory_Normal_Type

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 826 4 826 30] (self : Normal'0.t_normal)

   =
    [%#span252] sound'1 (Cdsat_Theory_Normal_Type.normal_0 self)

  function deducef'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 896 4 896 78] (self : Normal'0.t_normal) (just : Fset.fset (Term'1.t_term, Value'1.t_value)) (t : Term'1.t_term) (v : Value'1.t_value) : Normal'0.t_normal

   =
    [%#span262] let _ = count_bounds'0 (Cdsat_Theory_Normal_Type.normal_0 self) in Normal'0.C_Normal (Trail'1.C_Assign (Assign'0.C_Justified just t v) (set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) just) (Cdsat_Theory_Normal_Type.normal_0 self))

  axiom deducef'0_spec : forall self : Normal'0.t_normal, just : Fset.fset (Term'1.t_term, Value'1.t_value), t : Term'1.t_term, v : Value'1.t_value . ([%#span253] invariant'1 (Cdsat_Theory_Normal_Type.normal_0 self))
   -> ([%#span254] sound'0 self)
   -> ([%#span255] is_bool'0 v)
   -> ([%#span256] acceptable'0 (Cdsat_Theory_Normal_Type.normal_0 self) t v)
   -> ([%#span257] forall j : (Term'1.t_term, Value'1.t_value) . contains'2 just j
   -> contains'3 (Cdsat_Theory_Normal_Type.normal_0 self) j)
   -> ([%#span258] forall m : Model'0.t_model . inv'0 m  -> entails'0 m just (t, v))
   -> ([%#span261] impls'0 (Cdsat_Theory_Normal_Type.normal_0 self) (Cdsat_Theory_Normal_Type.normal_0 (deducef'0 self just t v)))
  && ([%#span260] sound'0 (deducef'0 self just t v))
  && ([%#span259] invariant'1 (Cdsat_Theory_Normal_Type.normal_0 (deducef'0 self just t v)))

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  use prelude.prelude.Slice

  function shallow_model'12 (self : slice (TrailIndex'0.t_trailindex)) : Seq.seq (TrailIndex'0.t_trailindex)

  axiom shallow_model'12_spec : forall self : slice (TrailIndex'0.t_trailindex) . ([%#span263] inv'18 self)
   -> ([%#span266] inv'4 (shallow_model'12 self))
  && ([%#span265] shallow_model'12 self = Slice.id self)
  && ([%#span264] Seq.length (shallow_model'12 self) <= UIntSize.to_int (max'0 : usize))

  function index_logic'1 [@inline:trivial] (self : slice (TrailIndex'0.t_trailindex)) (ix : int) : TrailIndex'0.t_trailindex

   =
    [%#span267] Seq.get (shallow_model'12 self) ix

  function shallow_model'4 (self : slice (TrailIndex'0.t_trailindex)) : Seq.seq (TrailIndex'0.t_trailindex) =
    [%#span232] shallow_model'12 self

  let rec max_level'0 (self:Trail'0.t_trail) (assignments:slice (TrailIndex'0.t_trailindex)) (return'  (ret:usize))= {[@expl:precondition] [%#span269] forall i : int . 0
    <= i
    /\ i < Seq.length (shallow_model'4 assignments)  -> contains'0 self (index_logic'1 assignments i)}
    {[@expl:precondition] [%#span268] invariant'0 self}
    any
    [ return' (result:usize)-> {[%#span270] set_level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (abstract_justification'0 self (shallow_model'4 assignments))
      = UIntSize.to_int result}
      (! return' {result}) ]


  let rec log_justified'0 (self:Trail'0.t_trail) (just:slice (TrailIndex'0.t_trailindex)) (term:Term'0.t_term) (val':Value'0.t_value) (return'  (ret:()))= any
    [ return' (result:())-> (! return' {result}) ]


  let rec deref'0 (self:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) (return'  (ret:slice (TrailIndex'0.t_trailindex)))= {[@expl:precondition] [%#span271] inv'1 self}
    any
    [ return' (result:slice (TrailIndex'0.t_trailindex))-> {[%#span273] inv'2 result}
      {[%#span272] shallow_model'4 result = shallow_model'5 self}
      (! return' {result}) ]


  let rec add_justified (self:borrowed (Trail'0.t_trail)) (into_vec:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) (term:Term'0.t_term) (val':Value'0.t_value) (return'  (ret:()))= {[%#strail25] forall m : Model'0.t_model . inv'0 m
     -> satisfy_set'0 m (abstract_justification'0 self.current (shallow_model'2 into_vec))
     -> satisfies'0 m (shallow_model'0 term, shallow_model'1 val')}
    {[%#strail24] acceptable'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self.current)) (shallow_model'0 term) (shallow_model'1 val')}
    {[%#strail23] forall i : TrailIndex'0.t_trailindex . contains'1 (shallow_model'2 into_vec) i
     -> contains'0 self.current i}
    {[%#strail22] is_bool'0 (shallow_model'1 val')}
    {[%#strail21] well_sorted'0 (shallow_model'0 term)}
    {[%#strail20] invariant'0 self.current}
    (! bb0
    [ bb0 = bb1
    | bb1 = bb2
    | bb2 = bb3
    | bb3 = bb4
    | bb4 = bb5
    | bb5 = s0
      [ s0 =  [ &_18 <- into_vec ] s1
      | s1 = deref'0 {_18} (fun (_ret':slice (TrailIndex'0.t_trailindex)) ->  [ &_16 <- _ret' ] s2)
      | s2 = bb6 ]

    | bb6 = s0
      [ s0 =  [ &_20 <- term ] s1
      | s1 =  [ &_22 <- val' ] s2
      | s2 = log_justified'0 {self.current} {_16} {_20} {_22} (fun (_ret':()) ->  [ &_13 <- _ret' ] s3)
      | s3 = bb7 ]

    | bb7 = s0
      [ s0 = {[@expl:assertion] [%#strail0] forall ix : TrailIndex'0.t_trailindex . contains'0 self.current ix
         -> index_logic'0 self.current ix <> (shallow_model'0 term, shallow_model'1 val')}
        s1
      | s1 = bb8 ]

    | bb8 = s0
      [ s0 =  [ &_30 <- into_vec ] s1
      | s1 = deref'0 {_30} (fun (_ret':slice (TrailIndex'0.t_trailindex)) ->  [ &_28 <- _ret' ] s2)
      | s2 = bb9 ]

    | bb9 = s0 [ s0 = max_level'0 {self.current} {_28} (fun (_ret':usize) ->  [ &level <- _ret' ] s1) | s1 = bb10 ]
    | bb10 = s0 [ s0 =  [ &g_vec <- [%#strail1] Snapshot.new into_vec ] s1 | s1 = bb11 ]
    | bb11 = s0
      [ s0 =  [ &just <- [%#strail2] Snapshot.new (abstract_justification'0 self.current (shallow_model'2 into_vec)) ]
        s1
      | s1 = bb12 ]

    | bb12 = s0
      [ s0 = {[@expl:assertion] [%#strail3] UIntSize.to_int level
        = set_level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self.current)) (Snapshot.inner just)}
        s1
      | s1 =
        [ &_37 <- [%#strail4] Snapshot.new (deducef'0 (Normal'0.C_Normal (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self.current))) (Snapshot.inner just) (shallow_model'0 term) (shallow_model'1 val')) ]

        s2
      | s2 = bb13 ]

    | bb13 = s0 [ s0 =  [ &old' <- [%#strail5] Snapshot.new self ] s1 | s1 = bb14 ]
    | bb14 = s0
      [ s0 =
        [ &_41 <- [%#strail6] Snapshot.new (add_justified'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self.current)) (Snapshot.inner just) (shallow_model'0 term) (shallow_model'1 val')) ]

        s1
      | s1 = bb15 ]

    | bb15 = s0
      [ s0 = Trail'0.t_trail {self.current}
          (fun (l_assignments'0:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (l_level'0:usize) (l_ghost'0:Snapshot.snap_ty (Trail'1.t_trail)) (l_num_assign'0:usize) ->
             [ &self <- { self with current = Trail'0.C_Trail l_assignments'0 l_level'0 _41 l_num_assign'0 ; } ]
            (any [ any_ (_any:Snapshot.snap_ty (Trail'1.t_trail))-> (!  [ &_41 <- _any ] s1) ] ))
      | s1 =  [ &v <- [%#strail7] Snapshot.new (shallow_model'0 term, shallow_model'1 val') ] s2
      | s2 = bb16 ]

    | bb16 = s0
      [ s0 = {[@expl:assertion] [%#strail8] level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self.current)) (Snapshot.inner v)
        = UIntSize.to_int level}
        s1
      | s1 =  [ &_50 <- Reason'0.C_Justified into_vec ]
        (any
        [ any_ (_any:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> (!  [ &into_vec <- _any ] s2) ]
        )
      | s2 = bb17 ]

    | bb17 = s0
      [ s0 =  [ &a <- Assignment'0.C_Assignment term val' _50 level ]
        (any
        [ any_ (_any:Term'0.t_term)-> (!  [ &term <- _any ]
          (any
          [ any_ (_any:Value'0.t_value)-> (!  [ &val' <- _any ]
            (any [ any_ (_any:Reason'0.t_reason)-> (!  [ &_50 <- _any ] s1) ] )) ]
          )) ]
        )
      | s1 = bb18 ]

    | bb18 = bb19
    | bb19 = bb20
    | bb20 = s0
      [ s0 = Trail'0.t_trail {self.current}
          (fun (rassignments'0:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (rlevel'0:usize) (rghost'0:Snapshot.snap_ty (Trail'1.t_trail)) (rnum_assign'0:usize) ->
            index'0 {rassignments'0} {level}
              (fun (_ret':Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) ->  [ &_55 <- _ret' ] s1))
      | s1 = bb21 ]

    | bb21 = s0 [ s0 = len'0 {_55} (fun (_ret':usize) ->  [ &x <- _ret' ] s1) | s1 = bb22 ]
    | bb22 = s0
      [ s0 =  [ &new_ix <- TrailIndex'0.C_TrailIndex level x ] s1
      | s1 = {[@expl:assertion] [%#strail9] forall i : TrailIndex'0.t_trailindex . contains'1 (shallow_model'3 g_vec) i
         -> Cdsat_Trail_TrailIndex_Type.trailindex_0 i <= Cdsat_Trail_TrailIndex_Type.trailindex_0 new_ix}
        s2
      | s2 = {[@expl:assertion] [%#strail10] forall i : TrailIndex'0.t_trailindex . contains'1 (shallow_model'3 g_vec) i
         -> lt_log'0 i new_ix}
        s3
      | s3 = {[@expl:assertion] [%#strail11] UIntSize.to_int x > 0} s4
      | s4 = Trail'0.t_trail {self.current}
          (fun (rassignments'0:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (rlevel'0:usize) (rghost'0:Snapshot.snap_ty (Trail'1.t_trail)) (rnum_assign'0:usize) ->
            Borrow.borrow_final
              <Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)>
              {rassignments'0}
              {Borrow.inherit_id (Borrow.get_id self) 1}
              (fun (_ret':borrowed (Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))) ->
                 [ &_70 <- _ret' ]
                Trail'0.t_trail {self.current}
                  (fun (l_assignments'0:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (l_level'0:usize) (l_ghost'0:Snapshot.snap_ty (Trail'1.t_trail)) (l_num_assign'0:usize) ->

                    [ &self <- { self with current = Trail'0.C_Trail _70.final l_level'0 l_ghost'0 l_num_assign'0 ; } ]

                    s5)))
      | s5 = index_mut'0 {_70} {level}
          (fun (_ret':borrowed (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) ->  [ &_69 <- _ret' ] s6)
      | s6 = bb23 ]

    | bb23 = s0
      [ s0 = Borrow.borrow_final
          <Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)>
          {_69.current}
          {Borrow.get_id _69}
          (fun (_ret':borrowed (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) ->
             [ &_68 <- _ret' ]
             [ &_69 <- { _69 with current = _68.final ; } ]
            s1)
      | s1 = push'0 {_68} {a} (fun (_ret':()) ->  [ &_67 <- _ret' ] s2)
      | s2 = bb24 ]

    | bb24 = s0
      [ s0 = -{resolve'0 _69}- s1
      | s1 = -{resolve'1 self}- s2
      | s2 =
        [ &_73 <- [%#strail12] Snapshot.new (abs_just_equiv'0 self.current (Snapshot.inner old').current (shallow_model'3 g_vec)) ]

        s3
      | s3 = bb25 ]

    | bb25 = s0 [ s0 =  [ &_75 <- [%#strail13] Snapshot.new () ] s1 | s1 = bb26 ]
    | bb26 = s0
      [ s0 = {[@expl:assertion] [%#strail14] forall ix : TrailIndex'0.t_trailindex . contains'0 (Snapshot.inner old').current ix
         -> reason'0 self.current ix = reason'0 (Snapshot.inner old').current ix}
        s1
      | s1 = {[@expl:assertion] [%#strail15] forall ix : TrailIndex'0.t_trailindex . contains'0 (Snapshot.inner old').current ix
         -> index_logic'0 (Snapshot.inner old').current ix = index_logic'0 self.current ix}
        s2
      | s2 = {[@expl:assertion] [%#strail16] forall j : TrailIndex'0.t_trailindex . contains'0 self.current j
         -> j = new_ix \/ contains'0 (Snapshot.inner old').current j}
        s3
      | s3 = {[@expl:assertion] [%#strail17] ext'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost (Snapshot.inner old').current)) (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self.current))}
        s4
      | s4 = {[@expl:assertion] [%#strail18] justified_is_justified'0 self.current} s5
      | s5 = {[@expl:assertion] [%#strail19] abstract_relation'0 self.current} s6
      | s6 = bb27 ]

    | bb27 = bb28
    | bb28 = bb29
    | bb29 = bb30
    | bb30 = return' {_0} ]
    )
    [ & _0 : () = any_l ()
    | & self : borrowed (Trail'0.t_trail) = self
    | & into_vec : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) = into_vec
    | & term : Term'0.t_term = term
    | & val' : Value'0.t_value = val'
    | & _13 : () = any_l ()
    | & _16 : slice (TrailIndex'0.t_trailindex) = any_l ()
    | & _18 : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) = any_l ()
    | & _20 : Term'0.t_term = any_l ()
    | & _22 : Value'0.t_value = any_l ()
    | & level : usize = any_l ()
    | & _28 : slice (TrailIndex'0.t_trailindex) = any_l ()
    | & _30 : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) = any_l ()
    | & g_vec : Snapshot.snap_ty (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) = any_l ()
    | & just : Snapshot.snap_ty (Fset.fset (Term'1.t_term, Value'1.t_value)) = any_l ()
    | & _37 : Snapshot.snap_ty (Normal'0.t_normal) = any_l ()
    | & old' : Snapshot.snap_ty (borrowed (Trail'0.t_trail)) = any_l ()
    | & _41 : Snapshot.snap_ty (Trail'1.t_trail) = any_l ()
    | & v : Snapshot.snap_ty (Term'1.t_term, Value'1.t_value) = any_l ()
    | & a : Assignment'0.t_assignment = any_l ()
    | & _50 : Reason'0.t_reason = any_l ()
    | & x : usize = any_l ()
    | & _55 : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) = any_l ()
    | & new_ix : TrailIndex'0.t_trailindex = any_l ()
    | & _67 : () = any_l ()
    | & _68 : borrowed (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) = any_l ()
    | & _69 : borrowed (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) = any_l ()
    | & _70 : borrowed (Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) = any_l ()
    | & _73 : Snapshot.snap_ty () = any_l ()
    | & _75 : Snapshot.snap_ty () = any_l () ]

    [ return' (result:())-> {[@expl:postcondition] [%#strail26] impls'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self.current)) (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self.final))}
      {[@expl:postcondition] [%#strail20] invariant'0 self.final}
      (! return' {result}) ]

end
module Cdsat_Theory_Impl6_Decidef_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 847 15 847 35

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 848 15 848 27

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 849 4 849 42

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 850 4 850 36

  let%span stheory4 = "/Users/xavier/Code/cdsat/src/theory.rs" 851 14 851 28

  let%span stheory5 = "/Users/xavier/Code/cdsat/src/theory.rs" 852 4 852 38

  let%span stheory6 = "/Users/xavier/Code/cdsat/src/theory.rs" 853 4 853 90

  let%span stheory7 = "/Users/xavier/Code/cdsat/src/theory.rs" 854 4 854 73

  let%span stheory8 = "/Users/xavier/Code/cdsat/src/theory.rs" 855 4 855 43

  let%span stheory9 = "/Users/xavier/Code/cdsat/src/theory.rs" 856 4 856 82

  let%span stheory10 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span stheory11 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span12 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span13 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span14 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span15 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span16 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span17 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span20 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span21 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span22 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span23 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span24 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span25 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span26 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span28 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span29 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span30 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span31 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span32 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span33 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span34 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span35 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span36 = "/Users/xavier/Code/cdsat/src/theory.rs" 616 15 616 27

  let%span span37 = "/Users/xavier/Code/cdsat/src/theory.rs" 617 15 617 32

  let%span span38 = "/Users/xavier/Code/cdsat/src/theory.rs" 618 4 618 90

  let%span span39 = "/Users/xavier/Code/cdsat/src/theory.rs" 620 8 629 9

  let%span span40 = "/Users/xavier/Code/cdsat/src/theory.rs" 512 8 515 9

  let%span span41 = "/Users/xavier/Code/cdsat/src/theory.rs" 522 8 525 9

  let%span span42 = "/Users/xavier/Code/cdsat/src/theory.rs" 206 8 206 84

  let%span span43 = "/Users/xavier/Code/cdsat/src/theory.rs" 502 8 505 9

  let%span span44 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span45 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span46 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span47 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span48 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span49 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span50 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span51 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span52 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span53 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span54 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span55 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span56 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span57 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span58 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span59 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span60 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span61 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  let%span span62 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span63 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span64 = "/Users/xavier/Code/cdsat/src/theory.rs" 484 15 484 31

  let%span span65 = "/Users/xavier/Code/cdsat/src/theory.rs" 485 15 485 35

  let%span span66 = "/Users/xavier/Code/cdsat/src/theory.rs" 486 15 486 27

  let%span span67 = "/Users/xavier/Code/cdsat/src/theory.rs" 487 4 487 54

  let%span span68 = "/Users/xavier/Code/cdsat/src/theory.rs" 488 4 488 58

  let%span span69 = "/Users/xavier/Code/cdsat/src/theory.rs" 489 4 489 61

  let%span span70 = "/Users/xavier/Code/cdsat/src/theory.rs" 491 8 491 30

  let%span span71 = "/Users/xavier/Code/cdsat/src/theory.rs" 675 8 675 71

  let%span span72 = "/Users/xavier/Code/cdsat/src/theory.rs" 738 15 738 31

  let%span span73 = "/Users/xavier/Code/cdsat/src/theory.rs" 739 4 739 83

  let%span span74 = "/Users/xavier/Code/cdsat/src/theory.rs" 741 8 746 9

  let%span span75 = "/Users/xavier/Code/cdsat/src/theory.rs" 548 15 548 31

  let%span span76 = "/Users/xavier/Code/cdsat/src/theory.rs" 550 15 550 25

  let%span span77 = "/Users/xavier/Code/cdsat/src/theory.rs" 549 14 549 32

  let%span span78 = "/Users/xavier/Code/cdsat/src/theory.rs" 551 4 551 141

  let%span span79 = "/Users/xavier/Code/cdsat/src/theory.rs" 552 4 552 142

  let%span span80 = "/Users/xavier/Code/cdsat/src/theory.rs" 553 4 553 56

  let%span span81 = "/Users/xavier/Code/cdsat/src/theory.rs" 554 4 554 71

  let%span span82 = "/Users/xavier/Code/cdsat/src/theory.rs" 555 4 555 77

  let%span span83 = "/Users/xavier/Code/cdsat/src/theory.rs" 556 14 556 126

  let%span span84 = "/Users/xavier/Code/cdsat/src/theory.rs" 557 14 557 40

  let%span span85 = "/Users/xavier/Code/cdsat/src/theory.rs" 559 8 570 9

  let%span span86 = "/Users/xavier/Code/cdsat/src/theory.rs" 682 8 682 82

  let%span span87 = "/Users/xavier/Code/cdsat/src/theory.rs" 693 4 693 55

  let%span span88 = "/Users/xavier/Code/cdsat/src/theory.rs" 695 8 695 108

  let%span span89 = "/Users/xavier/Code/cdsat/src/theory.rs" 398 8 400 79

  let%span span90 = "/Users/xavier/Code/cdsat/src/theory.rs" 823 4 823 16

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span12] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span13] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'2 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use Cdsat_Theory_Trail_Type as Trail'0

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span15] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span14] len'0 self >= 0

  use Cdsat_Theory_Assign_Type as Assign'0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span16] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#stheory11] level'0 self <= len'0 self)
  && ([%#stheory10] level'0 self >= 0)

  use Cdsat_Theory_Normal_Type as Normal'0

  use prelude.prelude.Int

  use Cdsat_Theory_Term_Type as Term'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span17] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span18] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span19] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'1 a
      end

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span20] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span21] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span25] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span24] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span23] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span22] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  use set.Fset

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span28] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span26] inv'0 self)
   -> ([%#span27] invariant'2 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span29] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  use set.Fset

  predicate contains'1 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span30] Fset.mem e self

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span31] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 v a  -> satisfies'0 self a

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span32] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'0 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span34] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span33] invariant_assign'0 self
   -> contains'0 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  predicate sound'1 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'0.t_trail)
   =
    [%#span35] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a _ tl -> sound'1 tl /\ justified_sound'0 a
      end

  function find_justified'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 619 4 619 46] (self : Trail'0.t_trail) (kv : (Term'0.t_term, Value'0.t_value)) : ()

   =
    [%#span39] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = kv then () else find_justified'0 tl kv
      end

  axiom find_justified'0_spec : forall self : Trail'0.t_trail, kv : (Term'0.t_term, Value'0.t_value) . ([%#span36] sound'1 self)
   -> ([%#span37] contains'0 self kv)
   -> ([%#span38] forall l : int . forall a : Assign'0.t_assign . find'0 self kv = Option'0.C_Some (a, l)
   -> justified_sound'0 a)

  predicate is_decision'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 511 4 511 54] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span40] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Decision _ _, _) -> true
      | _ -> false
      end

  use set.Fset

  predicate is_input'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 521 4 521 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span41] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Input _ _, _) -> true
      | _ -> false
      end

  predicate entails'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 205 4 205 74] (self : Model'0.t_model) (j : Fset.fset (Term'0.t_term, Value'0.t_value)) (c : (Term'0.t_term, Value'0.t_value))

   =
    [%#span42] invariant'2 self  -> satisfy_set'0 self j  -> satisfies'0 self c

  predicate is_justified'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 501 4 501 55] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span43] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified _ _ _, _) -> true
      | _ -> false
      end

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span44] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span47] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span45] is_bool'0 self)
   -> ([%#span46] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span48] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'0 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'0 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'0.t_trail) =
    [%#span49] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'1 j a  -> contains'0 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span50] Fset.remove a self

  use set.Fset

  use set.Fset

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span53] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span51] invariant_nonneg'0 self)
   -> ([%#span52] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span61] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#span54] invariant_nonneg'0 self)
   -> ([%#span59] set_level'0 self s <= level'0 self)
  && ([%#span58] set_level'0 self s >= 0)
  && ([%#span57] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#span56] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'1 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span55] forall i : (Term'0.t_term, Value'0.t_value) . contains'1 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'0.t_trail) =
    [%#span62] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'0.t_trail) =
    [%#span63] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function justification'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 490 4 490 71] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span70] let _ = find_justified'0 self d in match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified j _ _, _) -> j
      | _ -> Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)
      end

  axiom justification'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span64] invariant'0 self)
   -> ([%#span65] is_justified'0 self d)
   -> ([%#span66] sound'1 self)
   -> ([%#span69] is_decision'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#span68] is_input'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#span67] forall m : Model'0.t_model . inv'0 m  -> entails'0 m (justification'0 self d) d)

  predicate satisfied_by'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 674 4 674 47] (self : Trail'0.t_trail) (m : Model'0.t_model)

   =
    [%#span71] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a  -> satisfies'0 m a

  function count_bounds'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 740 4 740 35] (self : Trail'0.t_trail) : () =
    [%#span74] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign (Assign'0.C_Input _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Justified _ _ _) _ tl -> count_bounds'0 tl
      end

  axiom count_bounds'0_spec : forall self : Trail'0.t_trail . ([%#span72] invariant'0 self)
   -> ([%#span73] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a  -> level_of'0 self a <= level'0 self)

  function restrict'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 558 4 558 45] (self : Trail'0.t_trail) (level : int) : Trail'0.t_trail

   =
    [%#span85] match self with
      | Trail'0.C_Empty -> Trail'0.C_Empty
      | Trail'0.C_Assign a l tl -> let tl = restrict'0 tl level in let _ = count_bounds'0 tl in if l <= level then
        Trail'0.C_Assign a l tl
      else
        tl

      end

  axiom restrict'0_spec : forall self : Trail'0.t_trail, level : int . ([%#span75] invariant'0 self)
   -> ([%#span76] level >= 0)
   -> ([%#span84] len'0 (restrict'0 self level) <= len'0 self)
  && ([%#span83] (level'0 self >= level  -> level'0 (restrict'0 self level) = level)
  /\ (level'0 self < level  -> level'0 (restrict'0 self level) = level'0 self))
  && ([%#span82] forall m : Model'0.t_model . inv'0 m
   -> satisfied_by'0 self m  -> satisfied_by'0 (restrict'0 self level) m)
  && ([%#span81] forall a : (Term'0.t_term, Value'0.t_value) . not contains'0 self a
   -> not contains'0 (restrict'0 self level) a)
  && ([%#span80] level >= level'0 self  -> restrict'0 self level = self)
  && ([%#span79] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 (restrict'0 self level) a
   -> contains'0 self a
  /\ level_of'0 (restrict'0 self level) a <= level /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span78] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a
   -> level_of'0 self a <= level
   -> contains'0 (restrict'0 self level) a /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span77] invariant'0 (restrict'0 self level))

  predicate unsat'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 681 4 681 30] (self : Trail'0.t_trail) =
    [%#span86] forall m : Model'0.t_model . inv'0 m  -> satisfied_by'0 (restrict'0 self 0) m  -> false

  predicate impls'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 694 4 694 41] (self : Trail'0.t_trail) (rhs : Trail'0.t_trail)

   =
    [%#span88] forall m : Model'0.t_model . inv'0 m
     -> satisfied_by'0 (restrict'0 self 0) m  -> satisfied_by'0 (restrict'0 rhs 0) m

  axiom impls'0_spec : forall self : Trail'0.t_trail, rhs : Trail'0.t_trail . [%#span87] impls'0 self rhs
   -> unsat'0 rhs  -> unsat'0 self

  predicate acceptable'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 397 4 397 56] (self : Trail'0.t_trail) (t : Term'0.t_term) (val' : Value'0.t_value)

   =
    [%#span89] not contains'0 self (t, val')
    /\ sort'0 t = sort'1 val' /\ (is_bool'0 val'  -> not contains'0 self (t, negate'0 val'))

  use Cdsat_Theory_Normal_Type as Cdsat_Theory_Normal_Type

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 826 4 826 30] (self : Normal'0.t_normal)

   =
    [%#span90] sound'1 (Cdsat_Theory_Normal_Type.normal_0 self)

  constant self  : Normal'0.t_normal

  constant t  : Term'0.t_term

  constant val'  : Value'0.t_value

  function decidef [#"/Users/xavier/Code/cdsat/src/theory.rs" 857 4 857 54] (self : Normal'0.t_normal) (t : Term'0.t_term) (val' : Value'0.t_value) : Normal'0.t_normal


  goal vc_decidef : ([%#stheory2] acceptable'0 (Cdsat_Theory_Normal_Type.normal_0 self) t val')
   -> ([%#stheory1] sound'0 self)
   -> ([%#stheory0] invariant'0 (Cdsat_Theory_Normal_Type.normal_0 self))
   -> ([%#stheory11] level'0 (Cdsat_Theory_Normal_Type.normal_0 self) <= len'0 (Cdsat_Theory_Normal_Type.normal_0 self))
  && ([%#stheory10] level'0 (Cdsat_Theory_Normal_Type.normal_0 self) >= 0)
   -> (let result = Normal'0.C_Normal (Trail'0.C_Assign (Assign'0.C_Decision t val') (level'0 (Cdsat_Theory_Normal_Type.normal_0 self)
  + 1) (Cdsat_Theory_Normal_Type.normal_0 self)) in ([%#stheory9] forall a : (Term'0.t_term, Value'0.t_value) . justification'0 (Cdsat_Theory_Normal_Type.normal_0 self) a
  = justification'0 (Cdsat_Theory_Normal_Type.normal_0 result) a)
  && ([%#stheory8] contains'0 (Cdsat_Theory_Normal_Type.normal_0 result) (t, val'))
  && ([%#stheory7] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 (Cdsat_Theory_Normal_Type.normal_0 self) a
   -> contains'0 (Cdsat_Theory_Normal_Type.normal_0 result) a)
  && ([%#stheory6] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 (Cdsat_Theory_Normal_Type.normal_0 result) a
   -> contains'0 (Cdsat_Theory_Normal_Type.normal_0 self) a \/ a = (t, val'))
  && ([%#stheory5] impls'0 (Cdsat_Theory_Normal_Type.normal_0 self) (Cdsat_Theory_Normal_Type.normal_0 result))
  && ([%#stheory4] sound'0 result) && ([%#stheory3] invariant'0 (Cdsat_Theory_Normal_Type.normal_0 result)))
end
module Cdsat_Trail_Impl9_AddDecision
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 406 18 406 38

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 408 22 408 23

  let%span strail2 = "/Users/xavier/Code/cdsat/src/trail.rs" 409 17 409 73

  let%span strail3 = "/Users/xavier/Code/cdsat/src/trail.rs" 410 21 410 84

  let%span strail4 = "/Users/xavier/Code/cdsat/src/trail.rs" 413 8 413 92

  let%span strail5 = "/Users/xavier/Code/cdsat/src/trail.rs" 414 8 414 102

  let%span strail6 = "/Users/xavier/Code/cdsat/src/trail.rs" 415 8 415 42

  let%span strail7 = "/Users/xavier/Code/cdsat/src/trail.rs" 416 44 416 45

  let%span strail8 = "/Users/xavier/Code/cdsat/src/trail.rs" 417 22 417 41

  let%span strail9 = "/Users/xavier/Code/cdsat/src/trail.rs" 418 27 418 67

  let%span strail10 = "/Users/xavier/Code/cdsat/src/trail.rs" 419 22 419 46

  let%span strail11 = "/Users/xavier/Code/cdsat/src/trail.rs" 420 22 420 51

  let%span strail12 = "/Users/xavier/Code/cdsat/src/trail.rs" 399 4 399 36

  let%span strail13 = "/Users/xavier/Code/cdsat/src/trail.rs" 400 15 400 31

  let%span strail14 = "/Users/xavier/Code/cdsat/src/trail.rs" 402 4 402 51

  let%span strail15 = "/Users/xavier/Code/cdsat/src/trail.rs" 401 14 401 33

  let%span strail16 = "/Users/xavier/Code/cdsat/src/trail.rs" 403 4 403 48

  let%span span17 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span18 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  let%span span19 = "/Users/xavier/Code/cdsat/src/trail.rs" 146 14 146 59

  let%span span20 = "/Users/xavier/Code/cdsat/src/trail.rs" 144 4 144 10

  let%span span21 = "/Users/xavier/Code/cdsat/src/trail.rs" 140 15 140 48

  let%span span22 = "/Users/xavier/Code/cdsat/src/trail.rs" 141 14 141 44

  let%span span23 = "/Users/xavier/Code/cdsat/src/trail.rs" 138 4 138 10

  let%span span24 = "/Users/xavier/Code/cdsat/src/trail.rs" 134 15 134 45

  let%span span25 = "/Users/xavier/Code/cdsat/src/trail.rs" 135 14 135 47

  let%span span26 = "/Users/xavier/Code/cdsat/src/trail.rs" 132 4 132 10

  let%span span27 = "/Users/xavier/Code/cdsat/src/trail.rs" 127 15 127 32

  let%span span28 = "/Users/xavier/Code/cdsat/src/trail.rs" 128 15 128 32

  let%span span29 = "/Users/xavier/Code/cdsat/src/trail.rs" 129 14 129 31

  let%span span30 = "/Users/xavier/Code/cdsat/src/trail.rs" 125 4 125 10

  let%span span31 = "/Users/xavier/Code/cdsat/src/trail.rs" 122 14 122 45

  let%span span32 = "/Users/xavier/Code/cdsat/src/trail.rs" 120 4 120 10

  let%span span33 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 41 20 41 56

  let%span span34 = "/Users/xavier/Code/cdsat/src/trail.rs" 117 14 117 64

  let%span span35 = "/Users/xavier/Code/cdsat/src/trail.rs" 115 4 115 10

  let%span span36 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 31 20 31 53

  let%span span37 = "/Users/xavier/Code/cdsat/src/trail.rs" 112 14 112 61

  let%span span38 = "/Users/xavier/Code/cdsat/src/trail.rs" 110 4 110 10

  let%span span39 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 21 20 21 53

  let%span span40 = "/Users/xavier/Code/cdsat/src/trail.rs" 107 14 107 61

  let%span span41 = "/Users/xavier/Code/cdsat/src/trail.rs" 105 4 105 10

  let%span span42 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 11 20 11 56

  let%span span43 = "/Users/xavier/Code/cdsat/src/trail.rs" 102 14 102 64

  let%span span44 = "/Users/xavier/Code/cdsat/src/trail.rs" 100 4 100 10

  let%span span45 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span46 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span47 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span48 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span49 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span50 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span51 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 14 70 15

  let%span span52 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 23 70 24

  let%span span53 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 69 14 69 59

  let%span span54 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 64 15 64 48

  let%span span55 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 16 66 17

  let%span span56 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 25 66 26

  let%span span57 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 65 14 65 44

  let%span span58 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 59 15 59 45

  let%span span59 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 16 61 17

  let%span span60 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 25 61 26

  let%span span61 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 60 14 60 47

  let%span span62 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 53 15 53 32

  let%span span63 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 54 15 54 32

  let%span span64 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 13 56 14

  let%span span65 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 22 56 23

  let%span span66 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 31 56 32

  let%span span67 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 55 14 55 31

  let%span span68 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 50 12 50 13

  let%span span69 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 49 14 49 45

  let%span span70 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 18 46 19

  let%span span71 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 27 46 28

  let%span span72 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 45 14 45 64

  let%span span73 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 18 36 19

  let%span span74 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 27 36 28

  let%span span75 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 35 14 35 61

  let%span span76 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 18 26 19

  let%span span77 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 27 26 28

  let%span span78 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 25 14 25 61

  let%span span79 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 18 16 19

  let%span span80 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 27 16 28

  let%span span81 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 15 14 15 64

  let%span span82 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span83 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span84 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span85 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span86 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span87 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span88 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span89 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span90 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span91 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span92 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span93 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span94 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span95 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span96 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span97 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span98 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span99 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span100 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span101 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span102 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span103 = "/Users/xavier/Code/cdsat/src/theory.rs" 675 8 675 71

  let%span span104 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span105 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span106 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span107 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span108 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span109 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span110 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span111 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span112 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span113 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span114 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span115 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span116 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span117 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span118 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span119 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span120 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span121 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span122 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span123 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span124 = "/Users/xavier/Code/cdsat/src/theory.rs" 738 15 738 31

  let%span span125 = "/Users/xavier/Code/cdsat/src/theory.rs" 739 4 739 83

  let%span span126 = "/Users/xavier/Code/cdsat/src/theory.rs" 548 15 548 31

  let%span span127 = "/Users/xavier/Code/cdsat/src/theory.rs" 550 15 550 25

  let%span span128 = "/Users/xavier/Code/cdsat/src/theory.rs" 549 14 549 32

  let%span span129 = "/Users/xavier/Code/cdsat/src/theory.rs" 551 4 551 141

  let%span span130 = "/Users/xavier/Code/cdsat/src/theory.rs" 552 4 552 142

  let%span span131 = "/Users/xavier/Code/cdsat/src/theory.rs" 553 4 553 56

  let%span span132 = "/Users/xavier/Code/cdsat/src/theory.rs" 554 4 554 71

  let%span span133 = "/Users/xavier/Code/cdsat/src/theory.rs" 555 4 555 77

  let%span span134 = "/Users/xavier/Code/cdsat/src/theory.rs" 556 14 556 126

  let%span span135 = "/Users/xavier/Code/cdsat/src/theory.rs" 557 14 557 40

  let%span span136 = "/Users/xavier/Code/cdsat/src/theory.rs" 682 8 682 82

  let%span span137 = "/Users/xavier/Code/cdsat/src/theory.rs" 693 4 693 55

  let%span span138 = "/Users/xavier/Code/cdsat/src/theory.rs" 695 8 695 108

  let%span span139 = "/Users/xavier/Code/cdsat/src/theory.rs" 398 8 400 79

  let%span span140 = "/Users/xavier/Code/cdsat/src/theory.rs" 31 8 54 9

  let%span span141 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span142 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 129 8 129 78

  let%span span143 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 13 814 14

  let%span span144 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 24 814 25

  let%span span145 = "/Users/xavier/Code/cdsat/src/trail.rs" 809 0 809 73

  let%span span146 = "/Users/xavier/Code/cdsat/src/trail.rs" 810 0 810 63

  let%span span147 = "/Users/xavier/Code/cdsat/src/trail.rs" 811 0 811 55

  let%span span148 = "/Users/xavier/Code/cdsat/src/trail.rs" 812 0 812 52

  let%span span149 = "/Users/xavier/Code/cdsat/src/trail.rs" 813 10 813 33

  let%span span150 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 33 814 39

  let%span span151 = "/Users/xavier/Code/cdsat/src/trail.rs" 808 10 808 17

  let%span span152 = "/Users/xavier/Code/cdsat/src/trail.rs" 807 0 807 8

  let%span span153 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span154 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span155 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span156 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span157 = "/Users/xavier/Code/cdsat/src/term.rs" 195 8 225 9

  let%span span158 = "/Users/xavier/Code/cdsat/src/term.rs" 180 8 180 25

  let%span span159 = "/Users/xavier/Code/cdsat/src/trail.rs" 726 8 726 61

  let%span span160 = "/Users/xavier/Code/cdsat/src/trail.rs" 646 8 648 9

  let%span span161 = "/Users/xavier/Code/cdsat/src/trail.rs" 291 12 291 92

  let%span span162 = "/Users/xavier/Code/cdsat/src/trail.rs" 313 4 313 82

  let%span span163 = "/Users/xavier/Code/cdsat/src/trail.rs" 314 14 314 40

  let%span span164 = "/Users/xavier/Code/cdsat/src/trail.rs" 315 4 315 115

  let%span span165 = "/Users/xavier/Code/cdsat/src/trail.rs" 316 4 316 115

  let%span span166 = "/Users/xavier/Code/cdsat/src/trail.rs" 317 4 317 101

  let%span span167 = "/Users/xavier/Code/cdsat/src/trail.rs" 312 14 312 24

  let%span span168 = "/Users/xavier/Code/cdsat/src/trail.rs" 310 4 310 12

  let%span span169 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span170 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span171 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span172 = "/Users/xavier/Code/cdsat/src/theory.rs" 616 15 616 27

  let%span span173 = "/Users/xavier/Code/cdsat/src/theory.rs" 617 15 617 32

  let%span span174 = "/Users/xavier/Code/cdsat/src/theory.rs" 618 4 618 90

  let%span span175 = "/Users/xavier/Code/cdsat/src/theory.rs" 512 8 515 9

  let%span span176 = "/Users/xavier/Code/cdsat/src/theory.rs" 522 8 525 9

  let%span span177 = "/Users/xavier/Code/cdsat/src/theory.rs" 206 8 206 84

  let%span span178 = "/Users/xavier/Code/cdsat/src/theory.rs" 502 8 505 9

  let%span span179 = "/Users/xavier/Code/cdsat/src/theory.rs" 484 15 484 31

  let%span span180 = "/Users/xavier/Code/cdsat/src/theory.rs" 485 15 485 35

  let%span span181 = "/Users/xavier/Code/cdsat/src/theory.rs" 486 15 486 27

  let%span span182 = "/Users/xavier/Code/cdsat/src/theory.rs" 487 4 487 54

  let%span span183 = "/Users/xavier/Code/cdsat/src/theory.rs" 488 4 488 58

  let%span span184 = "/Users/xavier/Code/cdsat/src/theory.rs" 489 4 489 61

  let%span span185 = "/Users/xavier/Code/cdsat/src/trail.rs" 268 8 272 9

  let%span span186 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 31 8 31 32

  let%span span187 = "/Users/xavier/Code/cdsat/src/trail.rs" 547 4 547 12

  let%span span188 = "/Users/xavier/Code/cdsat/src/trail.rs" 254 8 263 9

  let%span span189 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 20 8 20 31

  let%span span190 = "/Users/xavier/Code/cdsat/src/trail.rs" 179 4 179 12

  let%span span191 = "/Users/xavier/Code/cdsat/src/trail.rs" 279 12 283 13

  let%span span192 = "/Users/xavier/Code/cdsat/src/trail.rs" 238 8 248 9

  let%span span193 = "/Users/xavier/Code/cdsat/src/theory.rs" 635 8 641 9

  let%span span194 = "/Users/xavier/Code/cdsat/src/theory.rs" 646 15 646 26

  let%span span195 = "/Users/xavier/Code/cdsat/src/theory.rs" 647 15 647 32

  let%span span196 = "/Users/xavier/Code/cdsat/src/theory.rs" 648 15 648 29

  let%span span197 = "/Users/xavier/Code/cdsat/src/theory.rs" 649 15 649 36

  let%span span198 = "/Users/xavier/Code/cdsat/src/theory.rs" 650 14 650 59

  let%span span199 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 26 20 26 34

  let%span span200 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 105 18 105 22

  let%span span201 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 105 24 105 29

  let%span span202 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 104 4 104 40

  let%span span203 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 109 8 111 9

  let%span span204 = "/Users/xavier/Code/cdsat/src/trail.rs" 540 4 540 136

  let%span span205 = "/Users/xavier/Code/cdsat/src/trail.rs" 541 14 541 85

  let%span span206 = "/Users/xavier/Code/cdsat/src/trail.rs" 538 4 538 12

  let%span span207 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 108 8 108 31

  let%span span208 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 1993 21 1993 25

  let%span span209 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 1993 27 1993 32

  let%span span210 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 82 26 82 51

  let%span span211 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 19 21 19 25

  let%span span212 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 17 14 17 41

  let%span span213 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 18 14 18 42

  let%span span214 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 19 4 19 50

  let%span span215 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/boxed.rs" 20 8 20 31

  let%span span216 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/slice.rs" 461 34 461 38

  let%span span217 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 325 18 325 35

  let%span span218 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/slice.rs" 461 4 461 66

  let%span span219 = "/Users/xavier/Code/cdsat/src/theory.rs" 823 4 823 16

  let%span span220 = "/Users/xavier/Code/cdsat/src/theory.rs" 847 15 847 35

  let%span span221 = "/Users/xavier/Code/cdsat/src/theory.rs" 848 15 848 27

  let%span span222 = "/Users/xavier/Code/cdsat/src/theory.rs" 849 4 849 42

  let%span span223 = "/Users/xavier/Code/cdsat/src/theory.rs" 850 4 850 36

  let%span span224 = "/Users/xavier/Code/cdsat/src/theory.rs" 851 14 851 28

  let%span span225 = "/Users/xavier/Code/cdsat/src/theory.rs" 852 4 852 38

  let%span span226 = "/Users/xavier/Code/cdsat/src/theory.rs" 853 4 853 90

  let%span span227 = "/Users/xavier/Code/cdsat/src/theory.rs" 854 4 854 73

  let%span span228 = "/Users/xavier/Code/cdsat/src/theory.rs" 855 4 855 43

  let%span span229 = "/Users/xavier/Code/cdsat/src/theory.rs" 856 4 856 82

  let%span span230 = "/Users/xavier/Code/cdsat/src/theory.rs" 858 7 858 92

  let%span span231 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 90 8 90 31

  let%span span232 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2255 16 2255 20

  let%span span233 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 78 26 78 48

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function eq_cmp'2 (_1 : usize) (_2 : usize) : ()

  function antisym2'2 (_1 : usize) (_2 : usize) : ()

  function antisym1'2 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'2 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'2 (_1 : usize) : ()

  function cmp_gt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'2 (_1 : usize) (_2 : usize) : ()

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span17] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span18] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  function eq_cmp'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 147 4 147 31] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span20] ()

  axiom eq_cmp'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span19] (x = y)
  = (cmp_log'0 x y = Ordering'0.C_Equal)

  function antisym2'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 142 4 142 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span23] ()

  axiom antisym2'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span21] cmp_log'0 x y
  = Ordering'0.C_Greater)  -> ([%#span22] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 136 4 136 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span26] ()

  axiom antisym1'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span24] cmp_log'0 x y
  = Ordering'0.C_Less)  -> ([%#span25] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 130 4 130 52] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()

   =
    [%#span30] ()

  axiom trans'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span27] cmp_log'0 x y
  = o)  -> ([%#span28] cmp_log'0 y z = o)  -> ([%#span29] cmp_log'0 x z = o)

  function refl'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 123 4 123 20] (x : TrailIndex'0.t_trailindex) : () =
    [%#span32] ()

  axiom refl'1_spec : forall x : TrailIndex'0.t_trailindex . [%#span31] cmp_log'0 x x = Ordering'0.C_Equal

  function gt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span33] cmp_log'0 self o = Ordering'0.C_Greater

  function cmp_gt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 118 4 118 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span35] ()

  axiom cmp_gt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span34] gt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Greater)

  function ge_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span36] cmp_log'0 self o <> Ordering'0.C_Less

  function cmp_ge_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 113 4 113 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span38] ()

  axiom cmp_ge_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span37] ge_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Less)

  function lt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span39] cmp_log'0 self o = Ordering'0.C_Less

  function cmp_lt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 108 4 108 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span41] ()

  axiom cmp_lt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span40] lt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Less)

  function le_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span42] cmp_log'0 self o <> Ordering'0.C_Greater

  function cmp_le_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 103 4 103 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span44] ()

  axiom cmp_le_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span43] le_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Greater)

  use seq.Seq

  predicate inv'11 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  constant max'0 : usize = [%#span45] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'13 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function shallow_model'8 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom shallow_model'8_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span46] inv'13 self)
   -> ([%#span48] inv'11 (shallow_model'8 self))
  && ([%#span47] Seq.length (shallow_model'8 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'16 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span49] inv'11 (shallow_model'8 self)

  axiom inv'13 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'13 x = true

  predicate invariant'15 (self : TrailIndex'0.t_trailindex) =
    [%#span50] true

  predicate inv'12 (_x : TrailIndex'0.t_trailindex)

  axiom inv'12 : forall x : TrailIndex'0.t_trailindex . inv'12 x = true

  predicate invariant'14 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span50] true

  axiom inv'11 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'11 x = true

  use Cdsat_Trail_Assignment_Type as Assignment'0

  use prelude.prelude.Slice

  predicate invariant'13 (self : slice (Assignment'0.t_assignment)) =
    [%#span50] true

  predicate inv'10 (_x : slice (Assignment'0.t_assignment))

  axiom inv'10 : forall x : slice (Assignment'0.t_assignment) . inv'10 x = true

  function eq_cmp'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom eq_cmp'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span51] inv'12 x)
   -> ([%#span52] inv'12 y)  -> ([%#span53] (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal))

  function antisym2'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym2'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span54] cmp_log'0 x y
  = Ordering'0.C_Greater)
   -> ([%#span55] inv'12 x)  -> ([%#span56] inv'12 y)  -> ([%#span57] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym1'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span58] cmp_log'0 x y
  = Ordering'0.C_Less)
   -> ([%#span59] inv'12 x)  -> ([%#span60] inv'12 y)  -> ([%#span61] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span62] cmp_log'0 x y
  = o)
   -> ([%#span63] cmp_log'0 y z = o)
   -> ([%#span64] inv'12 x)  -> ([%#span65] inv'12 y)  -> ([%#span66] inv'12 z)  -> ([%#span67] cmp_log'0 x z = o)

  function refl'0 (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'0_spec : forall x : TrailIndex'0.t_trailindex . ([%#span68] inv'12 x)
   -> ([%#span69] cmp_log'0 x x = Ordering'0.C_Equal)

  function cmp_gt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_gt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span70] inv'12 x)
   -> ([%#span71] inv'12 y)  -> ([%#span72] gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater))

  function cmp_ge_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_ge_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span73] inv'12 x)
   -> ([%#span74] inv'12 y)  -> ([%#span75] ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less))

  function cmp_lt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_lt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span76] inv'12 x)
   -> ([%#span77] inv'12 y)  -> ([%#span78] lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less))

  function cmp_le_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_le_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span79] inv'12 x)
   -> ([%#span80] inv'12 y)  -> ([%#span81] le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater))

  use Cdsat_Theory_Value_Type as Value'1

  use Cdsat_Theory_Term_Type as Term'1

  predicate invariant'12 (self : (Term'1.t_term, Value'1.t_value)) =
    [%#span50] true

  predicate inv'9 (_x : (Term'1.t_term, Value'1.t_value))

  axiom inv'9 : forall x : (Term'1.t_term, Value'1.t_value) . inv'9 x = true

  use set.Fset

  predicate invariant'11 (self : Fset.fset (Term'1.t_term, Value'1.t_value)) =
    [%#span50] true

  predicate inv'8 (_x : Fset.fset (Term'1.t_term, Value'1.t_value))

  axiom inv'8 : forall x : Fset.fset (Term'1.t_term, Value'1.t_value) . inv'8 x = true

  predicate invariant'10 (self : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span50] true

  predicate inv'7 (_x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'7 : forall x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'7 x = true

  use seq.Seq

  predicate inv'6 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  function shallow_model'5 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))


  axiom shallow_model'5_spec : forall self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . ([%#span46] inv'6 self)
   -> ([%#span48] inv'7 (shallow_model'5 self))
  && ([%#span47] Seq.length (shallow_model'5 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'9 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span49] inv'7 (shallow_model'5 self)

  axiom inv'6 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'6 x
  = true

  predicate invariant'8 (self : Seq.seq (Assignment'0.t_assignment)) =
    [%#span50] true

  predicate inv'5 (_x : Seq.seq (Assignment'0.t_assignment))

  axiom inv'5 : forall x : Seq.seq (Assignment'0.t_assignment) . inv'5 x = true

  use Cdsat_Theory_Sort_Type as Sort'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'1.t_value) : Sort'0.t_sort =
    [%#span82] match self with
      | Value'1.C_Bool _ -> Sort'0.C_Boolean
      | Value'1.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'4 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span83] forall v : Value'1.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'4 (_x : Model'0.t_model)

  axiom inv'4 : forall x : Model'0.t_model . inv'4 x
  = (invariant'4 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use prelude.prelude.Borrow

  predicate invariant'7 (self : borrowed (Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)))

   =
    [%#span50] true

  predicate inv'3 (_x : borrowed (Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)))


  axiom inv'3 : forall x : borrowed (Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) . inv'3 x
  = true

  use seq.Seq

  predicate inv'2 (_x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

  function shallow_model'3 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) : Seq.seq (Assignment'0.t_assignment)


  axiom shallow_model'3_spec : forall self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . ([%#span46] inv'2 self)
   -> ([%#span48] inv'5 (shallow_model'3 self))
  && ([%#span47] Seq.length (shallow_model'3 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'6 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span49] inv'5 (shallow_model'3 self)

  axiom inv'2 : forall x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . inv'2 x = true

  predicate invariant'5 (self : slice (Assignment'0.t_assignment)) =
    [%#span50] true

  predicate inv'1 (_x : slice (Assignment'0.t_assignment))

  axiom inv'1 : forall x : slice (Assignment'0.t_assignment) . inv'1 x = true

  predicate invariant'2 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span50] true

  predicate inv'0 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  axiom inv'0 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'0 x
  = true

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'1.t_term) : Sort'0.t_sort =
    [%#span84] match self with
      | Term'1.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'1.C_Value v -> sort'1 v
      | Term'1.C_Plus _ _ -> Sort'0.C_Rational
      | Term'1.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'1.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'1.C_Neg _ -> Sort'0.C_Boolean
      | Term'1.C_Disj _ _ -> Sort'0.C_Boolean
      end

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'1.t_term) : Value'1.t_value

   =
    [%#span87] match t with
      | Term'1.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'1.C_Value v -> v
      | Term'1.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'1.C_Rat r1, Value'1.C_Rat r2) -> Value'1.C_Rat r1
        | _ -> Value'1.C_Rat (from_int'0 (- 1))
        end
      | Term'1.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'1.C_Bool b1, Value'1.C_Bool b2) -> Value'1.C_Bool (b1 /\ b2)
        | _ -> Value'1.C_Bool false
        end
      | Term'1.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'1.C_Bool b1, Value'1.C_Bool b2) -> Value'1.C_Bool (b1 \/ b2)
        | _ -> Value'1.C_Bool false
        end
      | Term'1.C_Eq l r -> Value'1.C_Bool (interp'0 self l = interp'0 self r)
      | Term'1.C_Neg t -> match interp'0 self t with
        | Value'1.C_Bool b -> Value'1.C_Bool (not b)
        | _ -> Value'1.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'1.t_term . ([%#span85] inv'4 self)
   -> ([%#span86] invariant'4 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'1.t_term, Value'1.t_value))

   =
    [%#span88] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  use prelude.prelude.Int

  use Cdsat_Theory_Trail_Type as Trail'1

  use Cdsat_Theory_Assign_Type as Assign'0

  predicate invariant'3 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span89] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'1.t_trail) =
    [%#span90] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'3 a
      end

  function len'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'1.t_trail) : int

  axiom len'1_spec : forall self : Trail'1.t_trail . [%#span91] len'1 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'1.t_trail) : int =
    [%#span94] match self with
      | Trail'1.C_Empty -> 0
      | Trail'1.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'1.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'1.t_trail . ([%#span93] level'0 self <= len'1 self)
  && ([%#span92] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'1.t_trail) =
    [%#span95] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'1.t_term, Value'1.t_value)

   =
    [%#span96] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span100] match self with
      | Trail'1.C_Empty -> Option'0.C_None
      | Trail'1.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'1.t_trail, d : (Term'1.t_term, Value'1.t_value) . ([%#span99] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span98] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span97] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  predicate contains'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value))

   =
    [%#span102] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'1_spec : forall self : Trail'1.t_trail, d : (Term'1.t_term, Value'1.t_value) . [%#span101] invariant_assign'0 self
   -> contains'1 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  predicate satisfied_by'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 674 4 674 47] (self : Trail'1.t_trail) (m : Model'0.t_model)

   =
    [%#span103] forall a : (Term'1.t_term, Value'1.t_value) . contains'1 self a  -> satisfies'0 m a

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value)) : int

   =
    [%#span106] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'1.t_trail, d : (Term'1.t_term, Value'1.t_value) . ([%#span104] invariant_nonneg'0 self)
   -> ([%#span105] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'1.t_value) =
    [%#span107] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'1.t_value) : Value'1.t_value =
    [%#span110] match self with
      | Value'1.C_Bool b -> Value'1.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'1.t_value . ([%#span108] is_bool'0 self)
   -> ([%#span109] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'1.t_trail) =
    [%#span111] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> let ap = to_pair'0 a in not contains'1 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'1 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  use set.Fset

  predicate contains'3 [@inline:trivial] (self : Fset.fset (Term'1.t_term, Value'1.t_value)) (e : (Term'1.t_term, Value'1.t_value))

   =
    [%#span112] Fset.mem e self

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'1.t_trail) =
    [%#span113] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'1.t_term, Value'1.t_value) . contains'3 j a  -> contains'1 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'1 [@inline:trivial] (self : Fset.fset (Term'1.t_term, Value'1.t_value)) (a : (Term'1.t_term, Value'1.t_value)) : Fset.fset (Term'1.t_term, Value'1.t_value)

   =
    [%#span114] Fset.remove a self

  use set.Fset

  use set.Fset

  use set.Fset

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'1.t_trail) (s : Fset.fset (Term'1.t_term, Value'1.t_value)) : int


  axiom set_level'0_spec : forall self : Trail'1.t_trail, s : Fset.fset (Term'1.t_term, Value'1.t_value) . ([%#span115] invariant_nonneg'0 self)
   -> ([%#span120] set_level'0 self s <= level'0 self)
  && ([%#span119] set_level'0 self s >= 0)
  && ([%#span118] s = (Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value))  -> set_level'0 self s = 0)
  && ([%#span117] s <> (Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value))
   -> (exists i : (Term'1.t_term, Value'1.t_value) . contains'3 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span116] forall i : (Term'1.t_term, Value'1.t_value) . contains'3 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'1.t_trail) =
    [%#span122] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'1.t_trail) =
    [%#span123] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function count_bounds'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 740 4 740 35] (self : Trail'1.t_trail) : ()

  axiom count_bounds'0_spec : forall self : Trail'1.t_trail . ([%#span124] invariant'1 self)
   -> ([%#span125] forall a : (Term'1.t_term, Value'1.t_value) . contains'1 self a
   -> level_of'0 self a <= level'0 self)

  function restrict'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 558 4 558 45] (self : Trail'1.t_trail) (level : int) : Trail'1.t_trail


  axiom restrict'0_spec : forall self : Trail'1.t_trail, level : int . ([%#span126] invariant'1 self)
   -> ([%#span127] level >= 0)
   -> ([%#span135] len'1 (restrict'0 self level) <= len'1 self)
  && ([%#span134] (level'0 self >= level  -> level'0 (restrict'0 self level) = level)
  /\ (level'0 self < level  -> level'0 (restrict'0 self level) = level'0 self))
  && ([%#span133] forall m : Model'0.t_model . inv'4 m
   -> satisfied_by'0 self m  -> satisfied_by'0 (restrict'0 self level) m)
  && ([%#span132] forall a : (Term'1.t_term, Value'1.t_value) . not contains'1 self a
   -> not contains'1 (restrict'0 self level) a)
  && ([%#span131] level >= level'0 self  -> restrict'0 self level = self)
  && ([%#span130] forall a : (Term'1.t_term, Value'1.t_value) . contains'1 (restrict'0 self level) a
   -> contains'1 self a
  /\ level_of'0 (restrict'0 self level) a <= level /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span129] forall a : (Term'1.t_term, Value'1.t_value) . contains'1 self a
   -> level_of'0 self a <= level
   -> contains'1 (restrict'0 self level) a /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span128] invariant'1 (restrict'0 self level))

  predicate unsat'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 681 4 681 30] (self : Trail'1.t_trail) =
    [%#span136] forall m : Model'0.t_model . inv'4 m  -> satisfied_by'0 (restrict'0 self 0) m  -> false

  predicate impls'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 694 4 694 41] (self : Trail'1.t_trail) (rhs : Trail'1.t_trail)

   =
    [%#span138] forall m : Model'0.t_model . inv'4 m
     -> satisfied_by'0 (restrict'0 self 0) m  -> satisfied_by'0 (restrict'0 rhs 0) m

  axiom impls'0_spec : forall self : Trail'1.t_trail, rhs : Trail'1.t_trail . [%#span137] impls'0 self rhs
   -> unsat'0 rhs  -> unsat'0 self

  predicate acceptable'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 397 4 397 56] (self : Trail'1.t_trail) (t : Term'1.t_term) (val' : Value'1.t_value)

   =
    [%#span139] not contains'1 self (t, val')
    /\ sort'0 t = sort'1 val' /\ (is_bool'0 val'  -> not contains'1 self (t, negate'0 val'))

  function well_sorted'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 30 4 30 36] (self : Term'1.t_term) : bool =
    [%#span140] match self with
      | Term'1.C_Variable v -> true
      | Term'1.C_Value v -> true
      | Term'1.C_Plus l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Rational
      | Term'1.C_Eq l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r
      | Term'1.C_Conj l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Boolean
      | Term'1.C_Disj l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Boolean
      | Term'1.C_Neg t -> well_sorted'0 t /\ sort'0 t = Sort'0.C_Boolean
      end

  use set.Fset

  function insert'0 [@inline:trivial] (self : Fset.fset (Term'1.t_term, Value'1.t_value)) (e : (Term'1.t_term, Value'1.t_value)) : Fset.fset (Term'1.t_term, Value'1.t_value)

   =
    [%#span141] Fset.add e self

  use seq.Seq

  use prelude.seq_ext.SeqExt

  use seq.Seq

  use seq.Seq

  predicate contains'2 (self : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) =
    [%#span142] exists i : int . 0 <= i /\ i < Seq.length self /\ Seq.get self i = e

  function remove'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 814 0 814 39] (s : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom remove'0_def : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . remove'0 s e
  = ([%#span152] if s = (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) then
    Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)
  else
    if Seq.get s (Seq.length s - 1) = e then
      remove'0 (SeqExt.subsequence s 0 (Seq.length s - 1)) e
    else
      Seq.snoc (remove'0 (SeqExt.subsequence s 0 (Seq.length s - 1)) e) (Seq.get s (Seq.length s - 1))

  )

  axiom remove'0_spec : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . ([%#span143] inv'11 s)
   -> ([%#span144] inv'12 e)
   -> ([%#span150] inv'11 (remove'0 s e))
  && ([%#span149] Seq.length (remove'0 s e) <= Seq.length s)
  && ([%#span148] contains'2 s e  -> Seq.length (remove'0 s e) < Seq.length s)
  && ([%#span147] forall t : TrailIndex'0.t_trailindex . inv'12 t  -> contains'2 (remove'0 s e) t  -> t <> e)
  && ([%#span146] forall t : TrailIndex'0.t_trailindex . inv'12 t  -> contains'2 (remove'0 s e) t  -> contains'2 s t)
  && ([%#span145] forall t : TrailIndex'0.t_trailindex . inv'12 t
   -> contains'2 s t  -> e <> t  -> contains'2 (remove'0 s e) t)

  use Cdsat_Trail_Trail_Type as Trail'0

  use Cdsat_Term_Value_Type as Value'0

  use Cdsat_Term_Term_Type as Term'0

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  function deep_model'4 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span153] match self with
      | Value'0.C_Bool b -> Value'1.C_Bool b
      | Value'0.C_Rat br -> Value'1.C_Rat (deep_model'4 br)
      end

  function shallow_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span154] deep_model'1 self

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  use Cdsat_Term_Sort_Type as Sort'1

  function deep_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'1.t_sort) : Sort'0.t_sort =
    [%#span155] match self with
      | Sort'1.C_Boolean -> Sort'0.C_Boolean
      | Sort'1.C_Rational -> Sort'0.C_Rational
      end

  function deep_model'2 (self : usize) : int =
    [%#span156] UIntSize.to_int self

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 193 4 193 44] (self : Term'0.t_term) : Term'1.t_term =
    [%#span157] match self with
      | Term'0.C_Variable v s -> Term'1.C_Variable (Var'0.C_Var (deep_model'2 v) (deep_model'3 s))
      | Term'0.C_Value v -> Term'1.C_Value (deep_model'1 v)
      | Term'0.C_Plus l r -> Term'1.C_Plus (deep_model'0 l) (deep_model'0 r)
      | Term'0.C_Eq l r -> Term'1.C_Eq (deep_model'0 l) (deep_model'0 r)
      | Term'0.C_Conj l r -> Term'1.C_Conj (deep_model'0 l) (deep_model'0 r)
      | Term'0.C_Disj l r -> Term'1.C_Disj (deep_model'0 l) (deep_model'0 r)
      | Term'0.C_Neg t -> Term'1.C_Neg (deep_model'0 t)
      | Term'0.C_Impl l r -> Term'1.C_Disj (Term'1.C_Neg (deep_model'0 l)) (deep_model'0 r)
      | Term'0.C_Times l r -> Term'1.C_Plus (Term'1.C_Value (Value'1.C_Rat (deep_model'4 l))) (deep_model'0 r)
      | Term'0.C_Lt l r -> Term'1.C_Eq (deep_model'0 l) (deep_model'0 r)
      end

  function shallow_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 179 4 179 50] (self : Term'0.t_term) : Term'1.t_term
   =
    [%#span158] deep_model'0 self

  function term_value'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 725 4 725 61] (self : Assignment'0.t_assignment) : (Term'1.t_term, Value'1.t_value)

   =
    [%#span159] (shallow_model'0 (Cdsat_Trail_Assignment_Type.assignment_term self), shallow_model'1 (Cdsat_Trail_Assignment_Type.assignment_val self))

  use seq.Seq

  use seq.Seq

  use Cdsat_Trail_Trail_Type as Cdsat_Trail_Trail_Type

  function index_logic'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 645 4 645 77] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : (Term'1.t_term, Value'1.t_value)

   =
    [%#span160] term_value'0 (Seq.get (shallow_model'3 (Seq.get (shallow_model'5 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)))) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)))

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 289 4 289 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex)

   =
    [%#span161] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)
    < Seq.length (shallow_model'5 (Cdsat_Trail_Trail_Type.trail_assignments self))
    /\ UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)
    < Seq.length (shallow_model'3 (Seq.get (shallow_model'5 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))))

  function abstract_justification'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 318 4 321 44] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) : Fset.fset (Term'1.t_term, Value'1.t_value)


  axiom abstract_justification'0_def : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . abstract_justification'0 self just
  = ([%#span168] if Seq.length just > 0 then
    let set = abstract_justification'0 self (remove'0 just (Seq.get just 0)) in let a = index_logic'0 self (Seq.get just 0) in insert'0 set a
  else
    Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value)
  )

  axiom abstract_justification'0_spec : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span162] forall i : int . 0
  <= i
  /\ i < Seq.length just  -> contains'0 self (Seq.get just i))
   -> ([%#span166] forall i : int . 0 <= i /\ i < Seq.length just
   -> contains'3 (abstract_justification'0 self just) (index_logic'0 self (Seq.get just i)))
  && ([%#span165] forall a : (Term'1.t_term, Value'1.t_value) . contains'3 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'2 just ix /\ a = index_logic'0 self ix))
  && ([%#span164] forall a : (Term'1.t_term, Value'1.t_value) . contains'3 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'0 self ix /\ a = index_logic'0 self ix))
  && ([%#span163] Fset.cardinal (abstract_justification'0 self just) <= Seq.length just)

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'1.t_term, Value'1.t_value))

   =
    [%#span169] forall a : (Term'1.t_term, Value'1.t_value) . contains'3 v a  -> satisfies'0 self a

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span170] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'4 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate sound'1 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'1.t_trail)
   =
    [%#span171] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a _ tl -> sound'1 tl /\ justified_sound'0 a
      end

  function find_justified'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 619 4 619 46] (self : Trail'1.t_trail) (kv : (Term'1.t_term, Value'1.t_value)) : ()


  axiom find_justified'0_spec : forall self : Trail'1.t_trail, kv : (Term'1.t_term, Value'1.t_value) . ([%#span172] sound'1 self)
   -> ([%#span173] contains'1 self kv)
   -> ([%#span174] forall l : int . forall a : Assign'0.t_assign . find'0 self kv = Option'0.C_Some (a, l)
   -> justified_sound'0 a)

  predicate is_decision'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 511 4 511 54] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value))

   =
    [%#span175] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Decision _ _, _) -> true
      | _ -> false
      end

  predicate is_input'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 521 4 521 51] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value))

   =
    [%#span176] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Input _ _, _) -> true
      | _ -> false
      end

  predicate entails'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 205 4 205 74] (self : Model'0.t_model) (j : Fset.fset (Term'1.t_term, Value'1.t_value)) (c : (Term'1.t_term, Value'1.t_value))

   =
    [%#span177] invariant'4 self  -> satisfy_set'0 self j  -> satisfies'0 self c

  predicate is_justified'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 501 4 501 55] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value))

   =
    [%#span178] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified _ _ _, _) -> true
      | _ -> false
      end

  function justification'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 490 4 490 71] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value)) : Fset.fset (Term'1.t_term, Value'1.t_value)


  axiom justification'0_spec : forall self : Trail'1.t_trail, d : (Term'1.t_term, Value'1.t_value) . ([%#span179] invariant'1 self)
   -> ([%#span180] is_justified'0 self d)
   -> ([%#span181] sound'1 self)
   -> ([%#span184] is_decision'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value)))
  && ([%#span183] is_input'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value)))
  && ([%#span182] forall m : Model'0.t_model . inv'4 m  -> entails'0 m (justification'0 self d) d)

  use prelude.prelude.Snapshot

  predicate justified_correct'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 267 4 267 78] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) (j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

   =
    [%#span185] (forall i : TrailIndex'0.t_trailindex . contains'2 (shallow_model'8 j) i
     -> lt_log'0 i ix /\ contains'0 self i)
    /\ is_justified'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ justification'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    = abstract_justification'0 self (shallow_model'8 j)

  use Cdsat_Trail_Reason_Type as Reason'0

  function index_logic'2 [@inline:trivial] (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (ix : usize) : Assignment'0.t_assignment

   =
    [%#span186] Seq.get (shallow_model'3 self) (UIntSize.to_int ix)

  function index_logic'1 [@inline:trivial] (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (ix : usize) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span186] Seq.get (shallow_model'5 self) (UIntSize.to_int ix)

  function reason'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 549 4 549 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : Reason'0.t_reason

   =
    [%#span187] Cdsat_Trail_Assignment_Type.assignment_reason (index_logic'2 (index_logic'1 (Cdsat_Trail_Trail_Type.trail_assignments self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)) (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix))

  predicate justified_is_justified'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 253 4 253 47] (self : Trail'0.t_trail) =
    [%#span188] forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> (let reason = reason'0 self ix in (reason = Reason'0.C_Decision)
    = is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ (reason = Reason'0.C_Input)
    = is_input'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ (forall j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . reason = Reason'0.C_Justified j
     -> justified_correct'0 self ix j))

  function index_logic'3 [@inline:trivial] (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (ix : int) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span189] Seq.get (shallow_model'5 self) ix

  function level_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 180 4 180 33] (self : TrailIndex'0.t_trailindex) : int
   =
    [%#span190] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 self)

  predicate abstract_relation'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 277 4 277 42] (self : Trail'0.t_trail) =
    [%#span191] (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> contains'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix))
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    = UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))
    /\ (forall a : (Term'1.t_term, Value'1.t_value) . contains'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
     -> (exists ix : TrailIndex'0.t_trailindex . contains'0 self ix
    /\ level_log'0 ix = level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
    /\ index_logic'0 self ix = a))

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 237 4 237 34] (self : Trail'0.t_trail) =
    [%#span192] abstract_relation'0 self
    /\ sound'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    /\ invariant'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    /\ level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    = UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self)
    /\ UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self)
    = Seq.length (shallow_model'5 (Cdsat_Trail_Trail_Type.trail_assignments self)) - 1
    /\ (forall i : int . 0 <= i /\ i < Seq.length (shallow_model'5 (Cdsat_Trail_Trail_Type.trail_assignments self))
     -> Seq.length (shallow_model'3 (index_logic'3 (Cdsat_Trail_Trail_Type.trail_assignments self) i)) > 0)
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix) = 0)
    = is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix))
    /\ (forall j : TrailIndex'0.t_trailindex . forall i : TrailIndex'0.t_trailindex . contains'0 self i
     -> contains'0 self j  -> i <> j  -> index_logic'0 self i <> index_logic'0 self j)
    /\ justified_is_justified'0 self
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> well_sorted'0 (let (a, _) = index_logic'0 self ix in a))

  use prelude.prelude.Snapshot

  use prelude.prelude.Intrinsic

  use prelude.prelude.Snapshot

  predicate ext'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 634 4 634 37] (self : Trail'1.t_trail) (o : Trail'1.t_trail)

   =
    [%#span193] if level'0 self <= level'0 o then
      forall kv : (Term'1.t_term, Value'1.t_value) . contains'1 self kv  -> find'0 self kv = find'0 o kv
    else
      forall kv : (Term'1.t_term, Value'1.t_value) . contains'1 o kv  -> find'0 o kv = find'0 self kv


  function just_stable'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 651 4 651 56] (self : Trail'1.t_trail) (o : Trail'1.t_trail) (kv : (Term'1.t_term, Value'1.t_value)) : ()


  axiom just_stable'0_spec : forall self : Trail'1.t_trail, o : Trail'1.t_trail, kv : (Term'1.t_term, Value'1.t_value) . ([%#span194] ext'0 self o)
   -> ([%#span195] contains'1 self kv)
   -> ([%#span196] contains'1 o kv)
   -> ([%#span197] is_justified'0 self kv)  -> ([%#span198] justification'0 self kv = justification'0 o kv)

  use prelude.prelude.Snapshot

  predicate resolve'0 (self : borrowed (Trail'0.t_trail)) =
    [%#span199] self.final = self.current

  use prelude.prelude.Snapshot

  predicate ext_eq'0 (self : Fset.fset (Term'1.t_term, Value'1.t_value)) (other : Fset.fset (Term'1.t_term, Value'1.t_value))

   =
    [%#span203] forall e : (Term'1.t_term, Value'1.t_value) . inv'9 e  -> contains'3 self e = contains'3 other e

  axiom ext_eq'0_spec : forall self : Fset.fset (Term'1.t_term, Value'1.t_value), other : Fset.fset (Term'1.t_term, Value'1.t_value) . ([%#span200] inv'8 self)
   -> ([%#span201] inv'8 other)  -> ([%#span202] ext_eq'0 self other  -> self = other)

  function abs_just_equiv'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 542 4 542 67] (self : Trail'0.t_trail) (other : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) : ()


  axiom abs_just_equiv'0_spec : forall self : Trail'0.t_trail, other : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span204] forall j : TrailIndex'0.t_trailindex . contains'2 just j
   -> contains'0 self j /\ contains'0 other j /\ index_logic'0 self j = index_logic'0 other j)
   -> ([%#span205] abstract_justification'0 self just = abstract_justification'0 other just)

  use prelude.prelude.Snapshot

  use seq.Seq

  function shallow_model'6 (self : borrowed (Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

   =
    [%#span207] shallow_model'5 self.current

  let rec push'0 (self:borrowed (Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))) (value:Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (return'  (ret:()))= {[@expl:precondition] [%#span209] inv'2 value}
    {[@expl:precondition] [%#span208] inv'3 self}
    any
    [ return' (result:())-> {[%#span210] shallow_model'5 self.final = Seq.snoc (shallow_model'6 self) value}
      (! return' {result}) ]


  use prelude.prelude.Slice

  function shallow_model'7 (self : slice (Assignment'0.t_assignment)) : Seq.seq (Assignment'0.t_assignment)

  axiom shallow_model'7_spec : forall self : slice (Assignment'0.t_assignment) . ([%#span211] inv'10 self)
   -> ([%#span214] inv'5 (shallow_model'7 self))
  && ([%#span213] shallow_model'7 self = Slice.id self)
  && ([%#span212] Seq.length (shallow_model'7 self) <= UIntSize.to_int (max'0 : usize))

  function shallow_model'4 (self : slice (Assignment'0.t_assignment)) : Seq.seq (Assignment'0.t_assignment) =
    [%#span215] shallow_model'7 self

  let rec into_vec'0 (self:slice (Assignment'0.t_assignment)) (return'  (ret:Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))= {[@expl:precondition] [%#span216] inv'1 self}
    any
    [ return' (result:Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))-> {[%#span218] inv'2 result}
      {[%#span217] shallow_model'3 result = shallow_model'4 self}
      (! return' {result}) ]


  use prelude.prelude.Snapshot

  use Cdsat_Theory_Normal_Type as Cdsat_Theory_Normal_Type

  use Cdsat_Theory_Normal_Type as Normal'0

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 826 4 826 30] (self : Normal'0.t_normal)

   =
    [%#span219] sound'1 (Cdsat_Theory_Normal_Type.normal_0 self)

  function decidef'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 857 4 857 54] (self : Normal'0.t_normal) (t : Term'1.t_term) (val' : Value'1.t_value) : Normal'0.t_normal

   =
    [%#span230] Normal'0.C_Normal (Trail'1.C_Assign (Assign'0.C_Decision t val') (level'0 (Cdsat_Theory_Normal_Type.normal_0 self)
    + 1) (Cdsat_Theory_Normal_Type.normal_0 self))

  axiom decidef'0_spec : forall self : Normal'0.t_normal, t : Term'1.t_term, val' : Value'1.t_value . ([%#span220] invariant'1 (Cdsat_Theory_Normal_Type.normal_0 self))
   -> ([%#span221] sound'0 self)
   -> ([%#span222] acceptable'0 (Cdsat_Theory_Normal_Type.normal_0 self) t val')
   -> ([%#span229] forall a : (Term'1.t_term, Value'1.t_value) . justification'0 (Cdsat_Theory_Normal_Type.normal_0 self) a
  = justification'0 (Cdsat_Theory_Normal_Type.normal_0 (decidef'0 self t val')) a)
  && ([%#span228] contains'1 (Cdsat_Theory_Normal_Type.normal_0 (decidef'0 self t val')) (t, val'))
  && ([%#span227] forall a : (Term'1.t_term, Value'1.t_value) . contains'1 (Cdsat_Theory_Normal_Type.normal_0 self) a
   -> contains'1 (Cdsat_Theory_Normal_Type.normal_0 (decidef'0 self t val')) a)
  && ([%#span226] forall a : (Term'1.t_term, Value'1.t_value) . contains'1 (Cdsat_Theory_Normal_Type.normal_0 (decidef'0 self t val')) a
   -> contains'1 (Cdsat_Theory_Normal_Type.normal_0 self) a \/ a = (t, val'))
  && ([%#span225] impls'0 (Cdsat_Theory_Normal_Type.normal_0 self) (Cdsat_Theory_Normal_Type.normal_0 (decidef'0 self t val')))
  && ([%#span224] sound'0 (decidef'0 self t val'))
  && ([%#span223] invariant'1 (Cdsat_Theory_Normal_Type.normal_0 (decidef'0 self t val')))

  use prelude.prelude.Snapshot

  function shallow_model'2 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

   =
    [%#span231] shallow_model'5 self

  let rec len'0 (self:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (return'  (ret:usize))= {[@expl:precondition] [%#span232] inv'0 self}
    any
    [ return' (result:usize)-> {[%#span233] UIntSize.to_int result = Seq.length (shallow_model'2 self)}
      (! return' {result}) ]


  use prelude.prelude.Snapshot

  let rec add_decision (self:borrowed (Trail'0.t_trail)) (term:Term'0.t_term) (val':Value'0.t_value) (return'  (ret:()))= {[%#strail14] acceptable'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self.current)) (shallow_model'0 term) (shallow_model'1 val')}
    {[%#strail13] invariant'0 self.current}
    {[%#strail12] well_sorted'0 (shallow_model'0 term)}
    (! bb0
    [ bb0 = bb1
    | bb1 = bb2
    | bb2 = s0 [ s0 =  [ &old' <- [%#strail0] Snapshot.new self.current ] s1 | s1 = bb3 ]
    | bb3 = s0
      [ s0 = Trail'0.t_trail {self.current}
          (fun (rassignments'0:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (rlevel'0:usize) (rghost'0:Snapshot.snap_ty (Trail'1.t_trail)) (rnum_assign'0:usize) ->
            len'0 {rassignments'0} (fun (_ret':usize) ->  [ &_11 <- _ret' ] s1))
      | s1 = bb4 ]

    | bb4 = s0
      [ s0 = Trail'0.t_trail {self.current}
          (fun (rassignments'0:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (rlevel'0:usize) (rghost'0:Snapshot.snap_ty (Trail'1.t_trail)) (rnum_assign'0:usize) ->
            UIntSize.add {rlevel'0} {[%#strail1] (1 : usize)}
              (fun (_ret':usize) ->
                Trail'0.t_trail {self.current}
                  (fun (l_assignments'0:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (l_level'0:usize) (l_ghost'0:Snapshot.snap_ty (Trail'1.t_trail)) (l_num_assign'0:usize) ->

                    [ &self <- { self with current = Trail'0.C_Trail l_assignments'0 _ret' l_ghost'0 l_num_assign'0 ; } ]

                    s1)))
      | s1 =  [ &kv <- [%#strail2] Snapshot.new (shallow_model'0 term, shallow_model'1 val') ] s2
      | s2 = bb5 ]

    | bb5 = s0
      [ s0 =
        [ &_15 <- [%#strail3] Snapshot.new (Cdsat_Theory_Normal_Type.normal_0 (decidef'0 (Normal'0.C_Normal (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self.current))) (shallow_model'0 term) (shallow_model'1 val'))) ]

        s1
      | s1 = bb6 ]

    | bb6 = s0
      [ s0 = Trail'0.t_trail {self.current}
          (fun (l_assignments'0:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (l_level'0:usize) (l_ghost'0:Snapshot.snap_ty (Trail'1.t_trail)) (l_num_assign'0:usize) ->
             [ &self <- { self with current = Trail'0.C_Trail l_assignments'0 l_level'0 _15 l_num_assign'0 ; } ]
            (any [ any_ (_any:Snapshot.snap_ty (Trail'1.t_trail))-> (!  [ &_15 <- _any ] s1) ] ))
      | s1 =  [ &_20 <- Reason'0.C_Decision ] s2
      | s2 = Trail'0.t_trail {self.current}
          (fun (rassignments'0:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (rlevel'0:usize) (rghost'0:Snapshot.snap_ty (Trail'1.t_trail)) (rnum_assign'0:usize) ->
             [ &assign <- Assignment'0.C_Assignment term val' _20 rlevel'0 ]
            (any
            [ any_ (_any:Term'0.t_term)-> (!  [ &term <- _any ]
              (any
              [ any_ (_any:Value'0.t_value)-> (!  [ &val' <- _any ]
                (any [ any_ (_any:Reason'0.t_reason)-> (!  [ &_20 <- _any ] s3) ] )) ]
              )) ]
            ))
      | s3 = bb7 ]

    | bb7 = bb8
    | bb8 = bb9
    | bb9 = s0
      [ s0 = Trail'0.t_trail {self.current}
          (fun (rassignments'0:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (rlevel'0:usize) (rghost'0:Snapshot.snap_ty (Trail'1.t_trail)) (rnum_assign'0:usize) ->
            Borrow.borrow_final
              <Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)>
              {rassignments'0}
              {Borrow.inherit_id (Borrow.get_id self) 1}
              (fun (_ret':borrowed (Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))) ->
                 [ &_23 <- _ret' ]
                Trail'0.t_trail {self.current}
                  (fun (l_assignments'0:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (l_level'0:usize) (l_ghost'0:Snapshot.snap_ty (Trail'1.t_trail)) (l_num_assign'0:usize) ->

                    [ &self <- { self with current = Trail'0.C_Trail _23.final l_level'0 l_ghost'0 l_num_assign'0 ; } ]

                    s1)))
      | s1 = any
        [ any_ (__arr_temp:array (Assignment'0.t_assignment))-> (! -{Seq.get __arr_temp.elts 0 = assign
          /\ Seq.length __arr_temp.elts = 1}-
           [ &_27 <- __arr_temp ]
          (any [ any_ (_any:Assignment'0.t_assignment)-> (!  [ &assign <- _any ] s2) ] )) ]

      | s2 = bb10 ]

    | bb10 = bb11
    | bb11 = bb12
    | bb12 = s0
      [ s0 = into_vec'0 {_27}
          (fun (_ret':Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) ->  [ &_24 <- _ret' ] s1)
      | s1 = bb13 ]

    | bb13 = s0 [ s0 = push'0 {_23} {_24} (fun (_ret':()) ->  [ &_22 <- _ret' ] s1) | s1 = bb14 ]
    | bb14 = s0
      [ s0 = {[@expl:assertion] [%#strail4] forall ix : TrailIndex'0.t_trailindex . contains'0 (Snapshot.inner old') ix
         -> reason'0 self.current ix = reason'0 (Snapshot.inner old') ix}
        s1
      | s1 = {[@expl:assertion] [%#strail5] forall ix : TrailIndex'0.t_trailindex . contains'0 (Snapshot.inner old') ix
         -> index_logic'0 (Snapshot.inner old') ix = index_logic'0 self.current ix}
        s2
      | s2 =  [ &_33 <- [%#strail6] Snapshot.new () ] s3
      | s3 = bb15 ]

    | bb15 = s0
      [ s0 = -{resolve'0 self}- s1
      | s1 = Trail'0.t_trail {self.current}
          (fun (rassignments'0:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (rlevel'0:usize) (rghost'0:Snapshot.snap_ty (Trail'1.t_trail)) (rnum_assign'0:usize) ->
             [ &new_ix <- TrailIndex'0.C_TrailIndex rlevel'0 ([%#strail7] (0 : usize)) ]
            s2)
      | s2 = {[@expl:assertion] [%#strail8] index_logic'0 self.current new_ix = Snapshot.inner kv} s3
      | s3 =  [ &_39 <- [%#strail9] Snapshot.new () ] s4
      | s4 = bb16 ]

    | bb16 = s0
      [ s0 = {[@expl:assertion] [%#strail10] abstract_relation'0 self.current} s1
      | s1 = {[@expl:assertion] [%#strail11] justified_is_justified'0 self.current} s2
      | s2 = bb17 ]

    | bb17 = bb18
    | bb18 = bb19
    | bb19 = return' {_0} ]
    )
    [ & _0 : () = any_l ()
    | & self : borrowed (Trail'0.t_trail) = self
    | & term : Term'0.t_term = term
    | & val' : Value'0.t_value = val'
    | & old' : Snapshot.snap_ty (Trail'0.t_trail) = any_l ()
    | & _11 : usize = any_l ()
    | & kv : Snapshot.snap_ty (Term'1.t_term, Value'1.t_value) = any_l ()
    | & _15 : Snapshot.snap_ty (Trail'1.t_trail) = any_l ()
    | & assign : Assignment'0.t_assignment = any_l ()
    | & _20 : Reason'0.t_reason = any_l ()
    | & _22 : () = any_l ()
    | & _23 : borrowed (Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) = any_l ()
    | & _24 : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) = any_l ()
    | & _27 : array (Assignment'0.t_assignment) = any_l ()
    | & _33 : Snapshot.snap_ty () = any_l ()
    | & new_ix : TrailIndex'0.t_trailindex = any_l ()
    | & _39 : Snapshot.snap_ty () = any_l () ]

    [ return' (result:())-> {[@expl:postcondition] [%#strail16] impls'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self.current)) (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self.final))}
      {[@expl:postcondition] [%#strail15] invariant'0 self.final}
      (! return' {result}) ]

end
module Cdsat_Concrete_Impl0_ResolveConflict
  let%span sconcrete0 = "/Users/xavier/Code/cdsat/src/concrete.rs" 127 37 127 56

  let%span sconcrete1 = "/Users/xavier/Code/cdsat/src/concrete.rs" 128 52 128 74

  let%span sconcrete2 = "/Users/xavier/Code/cdsat/src/concrete.rs" 129 44 129 63

  let%span sconcrete3 = "/Users/xavier/Code/cdsat/src/concrete.rs" 131 8 131 77

  let%span sconcrete4 = "/Users/xavier/Code/cdsat/src/concrete.rs" 131 8 131 77

  let%span sconcrete5 = "/Users/xavier/Code/cdsat/src/concrete.rs" 131 8 131 77

  let%span sconcrete6 = "/Users/xavier/Code/cdsat/src/concrete.rs" 132 20 132 59

  let%span sconcrete7 = "/Users/xavier/Code/cdsat/src/concrete.rs" 131 8 131 77

  let%span sconcrete8 = "/Users/xavier/Code/cdsat/src/concrete.rs" 138 12 138 103

  let%span sconcrete9 = "/Users/xavier/Code/cdsat/src/concrete.rs" 144 8 144 67

  let%span sconcrete10 = "/Users/xavier/Code/cdsat/src/concrete.rs" 146 8 146 78

  let%span sconcrete11 = "/Users/xavier/Code/cdsat/src/concrete.rs" 147 20 147 37

  let%span sconcrete12 = "/Users/xavier/Code/cdsat/src/concrete.rs" 148 20 148 59

  let%span sconcrete13 = "/Users/xavier/Code/cdsat/src/concrete.rs" 152 20 152 133

  let%span sconcrete14 = "/Users/xavier/Code/cdsat/src/concrete.rs" 158 20 158 79

  let%span sconcrete15 = "/Users/xavier/Code/cdsat/src/concrete.rs" 159 20 159 103

  let%span sconcrete16 = "/Users/xavier/Code/cdsat/src/concrete.rs" 162 24 162 25

  let%span sconcrete17 = "/Users/xavier/Code/cdsat/src/concrete.rs" 166 12 166 70

  let%span sconcrete18 = "/Users/xavier/Code/cdsat/src/concrete.rs" 167 12 167 94

  let%span sconcrete19 = "/Users/xavier/Code/cdsat/src/concrete.rs" 168 26 168 44

  let%span sconcrete20 = "/Users/xavier/Code/cdsat/src/concrete.rs" 169 26 169 85

  let%span sconcrete21 = "/Users/xavier/Code/cdsat/src/concrete.rs" 170 26 170 54

  let%span sconcrete22 = "/Users/xavier/Code/cdsat/src/concrete.rs" 173 12 173 90

  let%span sconcrete23 = "/Users/xavier/Code/cdsat/src/concrete.rs" 175 26 175 44

  let%span sconcrete24 = "/Users/xavier/Code/cdsat/src/concrete.rs" 222 26 222 61

  let%span sconcrete25 = "/Users/xavier/Code/cdsat/src/concrete.rs" 223 12 223 50

  let%span sconcrete26 = "/Users/xavier/Code/cdsat/src/concrete.rs" 224 12 224 59

  let%span sconcrete27 = "/Users/xavier/Code/cdsat/src/concrete.rs" 225 12 225 62

  let%span sconcrete28 = "/Users/xavier/Code/cdsat/src/concrete.rs" 226 12 226 62

  let%span sconcrete29 = "/Users/xavier/Code/cdsat/src/concrete.rs" 227 12 227 64

  let%span sconcrete30 = "/Users/xavier/Code/cdsat/src/concrete.rs" 230 29 230 47

  let%span sconcrete31 = "/Users/xavier/Code/cdsat/src/concrete.rs" 233 27 233 75

  let%span sconcrete32 = "/Users/xavier/Code/cdsat/src/concrete.rs" 234 12 236 14

  let%span sconcrete33 = "/Users/xavier/Code/cdsat/src/concrete.rs" 234 12 236 14

  let%span sconcrete34 = "/Users/xavier/Code/cdsat/src/concrete.rs" 234 12 236 14

  let%span sconcrete35 = "/Users/xavier/Code/cdsat/src/concrete.rs" 234 12 236 14

  let%span sconcrete36 = "/Users/xavier/Code/cdsat/src/concrete.rs" 243 16 243 57

  let%span sconcrete37 = "/Users/xavier/Code/cdsat/src/concrete.rs" 255 38 255 91

  let%span sconcrete38 = "/Users/xavier/Code/cdsat/src/concrete.rs" 263 24 263 72

  let%span sconcrete39 = "/Users/xavier/Code/cdsat/src/concrete.rs" 265 49 265 67

  let%span sconcrete40 = "/Users/xavier/Code/cdsat/src/concrete.rs" 268 12 268 108

  let%span sconcrete41 = "/Users/xavier/Code/cdsat/src/concrete.rs" 268 12 268 108

  let%span sconcrete42 = "/Users/xavier/Code/cdsat/src/concrete.rs" 268 12 268 108

  let%span sconcrete43 = "/Users/xavier/Code/cdsat/src/concrete.rs" 271 24 271 63

  let%span sconcrete44 = "/Users/xavier/Code/cdsat/src/concrete.rs" 268 12 268 108

  let%span sconcrete45 = "/Users/xavier/Code/cdsat/src/concrete.rs" 155 34 155 45

  let%span sconcrete46 = "/Users/xavier/Code/cdsat/src/concrete.rs" 180 30 180 79

  let%span sconcrete47 = "/Users/xavier/Code/cdsat/src/concrete.rs" 182 24 182 68

  let%span sconcrete48 = "/Users/xavier/Code/cdsat/src/concrete.rs" 184 28 184 46

  let%span sconcrete49 = "/Users/xavier/Code/cdsat/src/concrete.rs" 187 26 187 90

  let%span sconcrete50 = "/Users/xavier/Code/cdsat/src/concrete.rs" 188 16 188 57

  let%span sconcrete51 = "/Users/xavier/Code/cdsat/src/concrete.rs" 190 16 190 102

  let%span sconcrete52 = "/Users/xavier/Code/cdsat/src/concrete.rs" 191 30 191 71

  let%span sconcrete53 = "/Users/xavier/Code/cdsat/src/concrete.rs" 193 32 193 51

  let%span sconcrete54 = "/Users/xavier/Code/cdsat/src/concrete.rs" 197 16 197 81

  let%span sconcrete55 = "/Users/xavier/Code/cdsat/src/concrete.rs" 200 16 200 57

  let%span sconcrete56 = "/Users/xavier/Code/cdsat/src/concrete.rs" 201 16 201 70

  let%span sconcrete57 = "/Users/xavier/Code/cdsat/src/concrete.rs" 216 44 216 45

  let%span sconcrete58 = "/Users/xavier/Code/cdsat/src/concrete.rs" 250 52 250 53

  let%span sconcrete59 = "/Users/xavier/Code/cdsat/src/concrete.rs" 254 24 254 57

  let%span sconcrete60 = "/Users/xavier/Code/cdsat/src/concrete.rs" 244 16 244 50

  let%span sconcrete61 = "/Users/xavier/Code/cdsat/src/concrete.rs" 115 4 115 41

  let%span sconcrete62 = "/Users/xavier/Code/cdsat/src/concrete.rs" 116 15 116 36

  let%span sconcrete63 = "/Users/xavier/Code/cdsat/src/concrete.rs" 117 4 117 99

  let%span sconcrete64 = "/Users/xavier/Code/cdsat/src/concrete.rs" 118 4 122 7

  let%span sconcrete65 = "/Users/xavier/Code/cdsat/src/concrete.rs" 123 4 123 126

  let%span sconcrete66 = "/Users/xavier/Code/cdsat/src/concrete.rs" 124 14 124 34

  let%span sconcrete67 = "/Users/xavier/Code/cdsat/src/concrete.rs" 125 4 125 53

  let%span span68 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span69 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span70 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span71 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span72 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span73 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span74 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span75 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  let%span span76 = "/Users/xavier/Code/cdsat/src/trail.rs" 146 14 146 59

  let%span span77 = "/Users/xavier/Code/cdsat/src/trail.rs" 140 15 140 48

  let%span span78 = "/Users/xavier/Code/cdsat/src/trail.rs" 141 14 141 44

  let%span span79 = "/Users/xavier/Code/cdsat/src/trail.rs" 134 15 134 45

  let%span span80 = "/Users/xavier/Code/cdsat/src/trail.rs" 135 14 135 47

  let%span span81 = "/Users/xavier/Code/cdsat/src/trail.rs" 127 15 127 32

  let%span span82 = "/Users/xavier/Code/cdsat/src/trail.rs" 128 15 128 32

  let%span span83 = "/Users/xavier/Code/cdsat/src/trail.rs" 129 14 129 31

  let%span span84 = "/Users/xavier/Code/cdsat/src/trail.rs" 122 14 122 45

  let%span span85 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 41 20 41 56

  let%span span86 = "/Users/xavier/Code/cdsat/src/trail.rs" 117 14 117 64

  let%span span87 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 31 20 31 53

  let%span span88 = "/Users/xavier/Code/cdsat/src/trail.rs" 112 14 112 61

  let%span span89 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 21 20 21 53

  let%span span90 = "/Users/xavier/Code/cdsat/src/trail.rs" 107 14 107 61

  let%span span91 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 11 20 11 56

  let%span span92 = "/Users/xavier/Code/cdsat/src/trail.rs" 102 14 102 64

  let%span span93 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span94 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span95 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 19 21 19 25

  let%span span96 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 17 14 17 41

  let%span span97 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 18 14 18 42

  let%span span98 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 19 4 19 50

  let%span span99 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 43 8 43 31

  let%span span100 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 90 8 90 31

  let%span span101 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 91 19 91 23

  let%span span102 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 89 14 89 41

  let%span span103 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 90 4 90 82

  let%span span104 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 91 4 91 35

  let%span span105 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 399 12 399 66

  let%span span106 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 410 15 410 32

  let%span span107 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 411 15 411 32

  let%span span108 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 413 31 413 33

  let%span span109 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 413 61 413 63

  let%span span110 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 412 14 412 42

  let%span span111 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 408 4 408 10

  let%span span112 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 405 14 405 45

  let%span span113 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 403 4 403 10

  let%span span114 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 14 70 15

  let%span span115 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 23 70 24

  let%span span116 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 69 14 69 59

  let%span span117 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 64 15 64 48

  let%span span118 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 16 66 17

  let%span span119 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 25 66 26

  let%span span120 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 65 14 65 44

  let%span span121 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 59 15 59 45

  let%span span122 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 16 61 17

  let%span span123 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 25 61 26

  let%span span124 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 60 14 60 47

  let%span span125 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 53 15 53 32

  let%span span126 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 54 15 54 32

  let%span span127 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 13 56 14

  let%span span128 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 22 56 23

  let%span span129 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 31 56 32

  let%span span130 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 55 14 55 31

  let%span span131 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 50 12 50 13

  let%span span132 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 49 14 49 45

  let%span span133 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 18 46 19

  let%span span134 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 27 46 28

  let%span span135 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 45 14 45 64

  let%span span136 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 18 36 19

  let%span span137 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 27 36 28

  let%span span138 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 35 14 35 61

  let%span span139 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 18 26 19

  let%span span140 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 27 26 28

  let%span span141 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 25 14 25 61

  let%span span142 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 18 16 19

  let%span span143 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 27 16 28

  let%span span144 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 15 14 15 64

  let%span span145 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 138 8 140 9

  let%span span146 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 149 8 149 40

  let%span span147 = "/Users/xavier/Code/cdsat/src/trail.rs" 829 4 829 98

  let%span span148 = "/Users/xavier/Code/cdsat/src/heap.rs" 10 4 10 16

  let%span span149 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 254 12 254 41

  let%span span150 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 265 15 265 32

  let%span span151 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 266 15 266 32

  let%span span152 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 268 22 268 23

  let%span span153 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 268 31 268 33

  let%span span154 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 268 43 268 44

  let%span span155 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 268 52 268 54

  let%span span156 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 268 64 268 65

  let%span span157 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 267 14 267 42

  let%span span158 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 263 4 263 10

  let%span span159 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 261 21 261 25

  let%span span160 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 260 14 260 45

  let%span span161 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 258 4 258 10

  let%span span162 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span163 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span164 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span165 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span166 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span167 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span168 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span169 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span170 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span171 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span172 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span173 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span174 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span175 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span176 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span177 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span178 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span179 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span180 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span181 = "/Users/xavier/Code/cdsat/src/theory.rs" 675 8 675 71

  let%span span182 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span183 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span184 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span185 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span186 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span187 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span188 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span189 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span190 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span191 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span192 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span193 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span194 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span195 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span196 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span197 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span198 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span199 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span200 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span201 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span202 = "/Users/xavier/Code/cdsat/src/theory.rs" 738 15 738 31

  let%span span203 = "/Users/xavier/Code/cdsat/src/theory.rs" 739 4 739 83

  let%span span204 = "/Users/xavier/Code/cdsat/src/theory.rs" 548 15 548 31

  let%span span205 = "/Users/xavier/Code/cdsat/src/theory.rs" 550 15 550 25

  let%span span206 = "/Users/xavier/Code/cdsat/src/theory.rs" 549 14 549 32

  let%span span207 = "/Users/xavier/Code/cdsat/src/theory.rs" 551 4 551 141

  let%span span208 = "/Users/xavier/Code/cdsat/src/theory.rs" 552 4 552 142

  let%span span209 = "/Users/xavier/Code/cdsat/src/theory.rs" 553 4 553 56

  let%span span210 = "/Users/xavier/Code/cdsat/src/theory.rs" 554 4 554 71

  let%span span211 = "/Users/xavier/Code/cdsat/src/theory.rs" 555 4 555 77

  let%span span212 = "/Users/xavier/Code/cdsat/src/theory.rs" 556 14 556 126

  let%span span213 = "/Users/xavier/Code/cdsat/src/theory.rs" 557 14 557 40

  let%span span214 = "/Users/xavier/Code/cdsat/src/theory.rs" 682 8 682 82

  let%span span215 = "/Users/xavier/Code/cdsat/src/theory.rs" 693 4 693 55

  let%span span216 = "/Users/xavier/Code/cdsat/src/theory.rs" 695 8 695 108

  let%span span217 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span218 = "/Users/xavier/Code/cdsat/src/theory.rs" 398 8 400 79

  let%span span219 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span220 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span221 = "/Users/xavier/Code/cdsat/src/theory.rs" 31 8 54 9

  let%span span222 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span223 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 129 8 129 78

  let%span span224 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 13 814 14

  let%span span225 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 24 814 25

  let%span span226 = "/Users/xavier/Code/cdsat/src/trail.rs" 809 0 809 73

  let%span span227 = "/Users/xavier/Code/cdsat/src/trail.rs" 810 0 810 63

  let%span span228 = "/Users/xavier/Code/cdsat/src/trail.rs" 811 0 811 55

  let%span span229 = "/Users/xavier/Code/cdsat/src/trail.rs" 812 0 812 52

  let%span span230 = "/Users/xavier/Code/cdsat/src/trail.rs" 813 10 813 33

  let%span span231 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 33 814 39

  let%span span232 = "/Users/xavier/Code/cdsat/src/trail.rs" 808 10 808 17

  let%span span233 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span234 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span235 = "/Users/xavier/Code/cdsat/src/term.rs" 195 8 225 9

  let%span span236 = "/Users/xavier/Code/cdsat/src/term.rs" 180 8 180 25

  let%span span237 = "/Users/xavier/Code/cdsat/src/trail.rs" 726 8 726 61

  let%span span238 = "/Users/xavier/Code/cdsat/src/trail.rs" 646 8 648 9

  let%span span239 = "/Users/xavier/Code/cdsat/src/trail.rs" 291 12 291 92

  let%span span240 = "/Users/xavier/Code/cdsat/src/trail.rs" 313 4 313 82

  let%span span241 = "/Users/xavier/Code/cdsat/src/trail.rs" 314 14 314 40

  let%span span242 = "/Users/xavier/Code/cdsat/src/trail.rs" 315 4 315 115

  let%span span243 = "/Users/xavier/Code/cdsat/src/trail.rs" 316 4 316 115

  let%span span244 = "/Users/xavier/Code/cdsat/src/trail.rs" 317 4 317 101

  let%span span245 = "/Users/xavier/Code/cdsat/src/trail.rs" 312 14 312 24

  let%span span246 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span247 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span248 = "/Users/xavier/Code/cdsat/src/theory.rs" 616 15 616 27

  let%span span249 = "/Users/xavier/Code/cdsat/src/theory.rs" 617 15 617 32

  let%span span250 = "/Users/xavier/Code/cdsat/src/theory.rs" 618 4 618 90

  let%span span251 = "/Users/xavier/Code/cdsat/src/theory.rs" 512 8 515 9

  let%span span252 = "/Users/xavier/Code/cdsat/src/theory.rs" 522 8 525 9

  let%span span253 = "/Users/xavier/Code/cdsat/src/theory.rs" 206 8 206 84

  let%span span254 = "/Users/xavier/Code/cdsat/src/theory.rs" 502 8 505 9

  let%span span255 = "/Users/xavier/Code/cdsat/src/theory.rs" 484 15 484 31

  let%span span256 = "/Users/xavier/Code/cdsat/src/theory.rs" 485 15 485 35

  let%span span257 = "/Users/xavier/Code/cdsat/src/theory.rs" 486 15 486 27

  let%span span258 = "/Users/xavier/Code/cdsat/src/theory.rs" 487 4 487 54

  let%span span259 = "/Users/xavier/Code/cdsat/src/theory.rs" 488 4 488 58

  let%span span260 = "/Users/xavier/Code/cdsat/src/theory.rs" 489 4 489 61

  let%span span261 = "/Users/xavier/Code/cdsat/src/trail.rs" 268 8 272 9

  let%span span262 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 31 8 31 32

  let%span span263 = "/Users/xavier/Code/cdsat/src/trail.rs" 547 4 547 12

  let%span span264 = "/Users/xavier/Code/cdsat/src/trail.rs" 254 8 263 9

  let%span span265 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 20 8 20 31

  let%span span266 = "/Users/xavier/Code/cdsat/src/trail.rs" 179 4 179 12

  let%span span267 = "/Users/xavier/Code/cdsat/src/trail.rs" 279 12 283 13

  let%span span268 = "/Users/xavier/Code/cdsat/src/trail.rs" 238 8 248 9

  let%span span269 = "/Users/xavier/Code/cdsat/src/trail.rs" 399 4 399 36

  let%span span270 = "/Users/xavier/Code/cdsat/src/trail.rs" 400 15 400 31

  let%span span271 = "/Users/xavier/Code/cdsat/src/trail.rs" 402 4 402 51

  let%span span272 = "/Users/xavier/Code/cdsat/src/trail.rs" 401 14 401 33

  let%span span273 = "/Users/xavier/Code/cdsat/src/trail.rs" 403 4 403 48

  let%span span274 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 46 8 46 12

  let%span span275 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 51 8 51 85

  let%span span276 = "/Users/xavier/Code/cdsat/src/trail.rs" 484 4 484 40

  let%span span277 = "/Users/xavier/Code/cdsat/src/trail.rs" 485 4 485 36

  let%span span278 = "/Users/xavier/Code/cdsat/src/trail.rs" 486 15 486 31

  let%span span279 = "/Users/xavier/Code/cdsat/src/trail.rs" 487 4 487 73

  let%span span280 = "/Users/xavier/Code/cdsat/src/trail.rs" 488 4 488 51

  let%span span281 = "/Users/xavier/Code/cdsat/src/trail.rs" 489 4 489 128

  let%span span282 = "/Users/xavier/Code/cdsat/src/trail.rs" 490 4 490 48

  let%span span283 = "/Users/xavier/Code/cdsat/src/term.rs" 306 15 306 32

  let%span span284 = "/Users/xavier/Code/cdsat/src/term.rs" 307 14 307 41

  let%span span285 = "/Users/xavier/Code/cdsat/src/theory.rs" 225 15 225 40

  let%span span286 = "/Users/xavier/Code/cdsat/src/theory.rs" 226 15 226 40

  let%span span287 = "/Users/xavier/Code/cdsat/src/theory.rs" 227 15 227 31

  let%span span288 = "/Users/xavier/Code/cdsat/src/theory.rs" 229 17 229 21

  let%span span289 = "/Users/xavier/Code/cdsat/src/theory.rs" 228 14 228 71

  let%span span290 = "/Users/xavier/Code/cdsat/src/theory.rs" 60 8 60 36

  let%span span291 = "/Users/xavier/Code/cdsat/src/theory.rs" 996 8 996 91

  let%span span292 = "/Users/xavier/Code/cdsat/src/theory.rs" 989 8 989 131

  let%span span293 = "/Users/xavier/Code/cdsat/src/theory.rs" 1007 15 1007 31

  let%span span294 = "/Users/xavier/Code/cdsat/src/theory.rs" 1008 15 1008 27

  let%span span295 = "/Users/xavier/Code/cdsat/src/theory.rs" 1009 4 1009 37

  let%span span296 = "/Users/xavier/Code/cdsat/src/theory.rs" 1010 4 1010 51

  let%span span297 = "/Users/xavier/Code/cdsat/src/theory.rs" 1011 4 1011 108

  let%span span298 = "/Users/xavier/Code/cdsat/src/theory.rs" 1005 4 1005 12

  let%span span299 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 105 18 105 22

  let%span span300 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 105 24 105 29

  let%span span301 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 104 4 104 40

  let%span span302 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 109 8 111 9

  let%span span303 = "/Users/xavier/Code/cdsat/src/trail.rs" 540 4 540 136

  let%span span304 = "/Users/xavier/Code/cdsat/src/trail.rs" 541 14 541 85

  let%span span305 = "/Users/xavier/Code/cdsat/src/trail.rs" 579 4 579 40

  let%span span306 = "/Users/xavier/Code/cdsat/src/trail.rs" 580 15 580 36

  let%span span307 = "/Users/xavier/Code/cdsat/src/trail.rs" 581 14 581 59

  let%span span308 = "/Users/xavier/Code/cdsat/src/trail.rs" 583 4 583 111

  let%span span309 = "/Users/xavier/Code/cdsat/src/trail.rs" 584 4 584 112

  let%span span310 = "/Users/xavier/Code/cdsat/src/concrete.rs" 286 17 286 18

  let%span span311 = "/Users/xavier/Code/cdsat/src/concrete.rs" 286 29 286 30

  let%span span312 = "/Users/xavier/Code/cdsat/src/concrete.rs" 285 0 285 78

  let%span span313 = "/Users/xavier/Code/cdsat/src/concrete.rs" 283 0 283 8

  let%span span314 = "/Users/xavier/Code/cdsat/src/heap.rs" 96 13 96 14

  let%span span315 = "/Users/xavier/Code/cdsat/src/heap.rs" 94 0 94 61

  let%span span316 = "/Users/xavier/Code/cdsat/src/heap.rs" 96 28 96 35

  let%span span317 = "/Users/xavier/Code/cdsat/src/heap.rs" 95 10 95 17

  let%span span318 = "/Users/xavier/Code/cdsat/src/heap.rs" 88 21 88 25

  let%span span319 = "/Users/xavier/Code/cdsat/src/heap.rs" 87 4 87 71

  let%span span320 = "/Users/xavier/Code/cdsat/src/heap.rs" 77 27 77 31

  let%span span321 = "/Users/xavier/Code/cdsat/src/heap.rs" 74 4 74 70

  let%span span322 = "/Users/xavier/Code/cdsat/src/heap.rs" 75 4 75 88

  let%span span323 = "/Users/xavier/Code/cdsat/src/heap.rs" 76 14 76 33

  let%span span324 = "/Users/xavier/Code/cdsat/src/theory.rs" 107 15 107 29

  let%span span325 = "/Users/xavier/Code/cdsat/src/theory.rs" 108 14 108 44

  let%span span326 = "/Users/xavier/Code/cdsat/src/theory.rs" 771 15 771 31

  let%span span327 = "/Users/xavier/Code/cdsat/src/theory.rs" 772 15 772 33

  let%span span328 = "/Users/xavier/Code/cdsat/src/theory.rs" 773 15 773 23

  let%span span329 = "/Users/xavier/Code/cdsat/src/theory.rs" 774 14 774 65

  let%span span330 = "/Users/xavier/Code/cdsat/src/theory.rs" 784 15 784 31

  let%span span331 = "/Users/xavier/Code/cdsat/src/theory.rs" 785 15 785 31

  let%span span332 = "/Users/xavier/Code/cdsat/src/theory.rs" 786 4 786 30

  let%span span333 = "/Users/xavier/Code/cdsat/src/theory.rs" 787 14 787 49

  let%span span334 = "/Users/xavier/Code/cdsat/src/theory.rs" 702 15 702 27

  let%span span335 = "/Users/xavier/Code/cdsat/src/theory.rs" 703 14 703 42

  let%span span336 = "/Users/xavier/Code/cdsat/src/theory.rs" 823 4 823 16

  let%span span337 = "/Users/xavier/Code/cdsat/src/theory.rs" 1101 15 1101 31

  let%span span338 = "/Users/xavier/Code/cdsat/src/theory.rs" 1102 15 1102 27

  let%span span339 = "/Users/xavier/Code/cdsat/src/theory.rs" 1103 4 1103 35

  let%span span340 = "/Users/xavier/Code/cdsat/src/theory.rs" 1104 4 1104 47

  let%span span341 = "/Users/xavier/Code/cdsat/src/theory.rs" 1105 4 1105 103

  let%span span342 = "/Users/xavier/Code/cdsat/src/theory.rs" 1106 4 1106 36

  let%span span343 = "/Users/xavier/Code/cdsat/src/theory.rs" 1107 14 1107 28

  let%span span344 = "/Users/xavier/Code/cdsat/src/theory.rs" 1108 4 1108 38

  let%span span345 = "/Users/xavier/Code/cdsat/src/theory.rs" 1099 4 1099 12

  let%span span346 = "/Users/xavier/Code/creusot/creusot-contracts/src/snapshot.rs" 28 20 28 48

  let%span span347 = "/Users/xavier/Code/cdsat/src/theory.rs" 211 4 211 61

  let%span span348 = "/Users/xavier/Code/cdsat/src/theory.rs" 212 15 212 39

  let%span span349 = "/Users/xavier/Code/cdsat/src/theory.rs" 213 15 213 32

  let%span span350 = "/Users/xavier/Code/cdsat/src/theory.rs" 216 8 216 12

  let%span span351 = "/Users/xavier/Code/cdsat/src/theory.rs" 214 14 214 60

  let%span span352 = "/Users/xavier/Code/cdsat/src/theory.rs" 655 15 655 31

  let%span span353 = "/Users/xavier/Code/cdsat/src/theory.rs" 656 15 656 36

  let%span span354 = "/Users/xavier/Code/cdsat/src/theory.rs" 657 4 657 126

  let%span span355 = "/Users/xavier/Code/cdsat/src/theory.rs" 658 14 658 73

  let%span span356 = "/Users/xavier/Code/cdsat/src/theory.rs" 999 4 999 12

  let%span span357 = "/Users/xavier/Code/cdsat/src/theory.rs" 1020 15 1020 31

  let%span span358 = "/Users/xavier/Code/cdsat/src/theory.rs" 1021 15 1021 27

  let%span span359 = "/Users/xavier/Code/cdsat/src/theory.rs" 1022 4 1022 39

  let%span span360 = "/Users/xavier/Code/cdsat/src/theory.rs" 1023 4 1023 35

  let%span span361 = "/Users/xavier/Code/cdsat/src/theory.rs" 1024 4 1028 6

  let%span span362 = "/Users/xavier/Code/cdsat/src/theory.rs" 1029 14 1029 32

  let%span span363 = "/Users/xavier/Code/cdsat/src/theory.rs" 1030 14 1030 28

  let%span span364 = "/Users/xavier/Code/cdsat/src/theory.rs" 1031 14 1031 44

  let%span span365 = "/Users/xavier/Code/cdsat/src/theory.rs" 1018 4 1018 12

  let%span span366 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 26 20 26 34

  let%span span367 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 108 8 108 31

  let%span span368 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 392 20 392 61

  let%span span369 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/iter.rs" 95 26 98 17

  let%span span370 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/slice/iter/macros.rs" 154 12 154 47

  let%span span371 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 87 8 87 33

  let%span span372 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/iter.rs" 80 8 80 19

  let%span span373 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/iter.rs" 74 20 74 24

  let%span span374 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/iter.rs" 89 0 175 1

  let%span span375 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/iter/traits/collect.rs" 354 17 354 21

  let%span span376 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/iter/traits/collect.rs" 354 4 354 27

  let%span span377 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/slice/mod.rs" 1034 17 1034 21

  let%span span378 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 238 0 347 1

  let%span span379 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2816 14 2816 18

  let%span span380 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 163 26 163 42

  let%span span381 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2816 4 2816 27

  let%span span382 = "/Users/xavier/Code/cdsat/src/trail.rs" 454 15 454 31

  let%span span383 = "/Users/xavier/Code/cdsat/src/trail.rs" 455 15 455 31

  let%span span384 = "/Users/xavier/Code/cdsat/src/trail.rs" 456 4 456 61

  let%span span385 = "/Users/xavier/Code/cdsat/src/trail.rs" 457 4 457 86

  let%span span386 = "/Users/xavier/Code/cdsat/src/trail.rs" 458 14 458 99

  let%span span387 = "/Users/xavier/Code/cdsat/src/trail.rs" 459 4 459 105

  let%span span388 = "/Users/xavier/Code/cdsat/src/theory.rs" 803 15 803 38

  let%span span389 = "/Users/xavier/Code/cdsat/src/theory.rs" 804 15 804 35

  let%span span390 = "/Users/xavier/Code/cdsat/src/theory.rs" 805 4 805 29

  let%span span391 = "/Users/xavier/Code/cdsat/src/theory.rs" 530 15 530 31

  let%span span392 = "/Users/xavier/Code/cdsat/src/theory.rs" 531 15 531 31

  let%span span393 = "/Users/xavier/Code/cdsat/src/theory.rs" 532 14 532 35

  let%span span394 = "/Users/xavier/Code/cdsat/src/trail.rs" 755 14 755 57

  let%span span395 = "/Users/xavier/Code/cdsat/src/trail.rs" 745 14 745 45

  let%span span396 = "/Users/xavier/Code/cdsat/src/trail.rs" 734 14 734 45

  let%span span397 = "/Users/xavier/Code/cdsat/src/trail.rs" 16 9 16 14

  let%span span398 = "/Users/xavier/Code/cdsat/src/trail.rs" 715 15 715 35

  let%span span399 = "/Users/xavier/Code/cdsat/src/trail.rs" 716 14 716 67

  let%span span400 = "/Users/xavier/Code/cdsat/src/trail.rs" 834 11 834 24

  let%span span401 = "/Users/xavier/Code/cdsat/src/trail.rs" 836 10 836 28

  let%span span402 = "/Users/xavier/Code/cdsat/src/trail.rs" 837 0 837 56

  let%span span403 = "/Users/xavier/Code/cdsat/src/trail.rs" 835 10 835 17

  let%span span404 = "/Users/xavier/Code/cdsat/src/heap.rs" 70 32 70 36

  let%span span405 = "/Users/xavier/Code/cdsat/src/heap.rs" 65 14 65 58

  let%span span406 = "/Users/xavier/Code/cdsat/src/heap.rs" 66 4 69 6

  let%span span407 = "/Users/xavier/Code/cdsat/src/trail.rs" 780 0 780 79

  let%span span408 = "/Users/xavier/Code/cdsat/src/trail.rs" 781 0 781 102

  let%span span409 = "/Users/xavier/Code/cdsat/src/trail.rs" 779 10 779 17

  let%span span410 = "/Users/xavier/Code/cdsat/src/trail.rs" 856 11 856 24

  let%span span411 = "/Users/xavier/Code/cdsat/src/trail.rs" 858 0 858 57

  let%span span412 = "/Users/xavier/Code/cdsat/src/trail.rs" 859 0 859 90

  let%span span413 = "/Users/xavier/Code/cdsat/src/trail.rs" 860 0 860 68

  let%span span414 = "/Users/xavier/Code/cdsat/src/trail.rs" 857 10 857 17

  let%span span415 = "/Users/xavier/Code/cdsat/src/trail.rs" 173 14 173 30

  let%span span416 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/option.rs" 29 0 140 1

  let%span span417 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/option.rs" 929 24 929 28

  let%span span418 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/option.rs" 929 4 929 34

  let%span span419 = "/Users/xavier/Code/cdsat/src/heap.rs" 58 24 58 28

  let%span span420 = "/Users/xavier/Code/cdsat/src/heap.rs" 54 8 57 9

  let%span span421 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 239 8 239 85

  let%span span422 = "/Users/xavier/Code/cdsat/src/heap.rs" 25 30 25 34

  let%span span423 = "/Users/xavier/Code/cdsat/src/heap.rs" 24 14 24 43

  let%span span424 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 247 20 247 57

  let%span span425 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/into_iter.rs" 202 17 202 21

  let%span span426 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/into_iter.rs" 202 4 202 35

  let%span span427 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 191 20 191 33

  let%span span428 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 185 20 185 24

  let%span span429 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2998 17 2998 21

  let%span span430 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2998 4 2998 40

  let%span span431 = "/Users/xavier/Code/cdsat/src/heap.rs" 18 14 18 36

  let%span span432 = "/Users/xavier/Code/cdsat/src/heap.rs" 19 27 19 31

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use prelude.prelude.Slice

  predicate invariant'27 (self : slice (TrailIndex'0.t_trailindex)) =
    [%#span68] true

  predicate inv'23 (_x : slice (TrailIndex'0.t_trailindex))

  axiom inv'23 : forall x : slice (TrailIndex'0.t_trailindex) . inv'23 x = true

  use seq.Seq

  predicate invariant'26 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span68] true

  predicate inv'22 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'22 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'22 x = true

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function eq_cmp'2 (_1 : usize) (_2 : usize) : ()

  function antisym2'2 (_1 : usize) (_2 : usize) : ()

  function antisym1'2 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'2 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'2 (_1 : usize) : ()

  function cmp_gt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'2 (_1 : usize) (_2 : usize) : ()

  use Cdsat_Trail_Assignment_Type as Assignment'0

  predicate invariant'25 (self : Seq.seq (Assignment'0.t_assignment)) =
    [%#span68] true

  predicate inv'21 (_x : Seq.seq (Assignment'0.t_assignment))

  axiom inv'21 : forall x : Seq.seq (Assignment'0.t_assignment) . inv'21 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  constant max'0 : usize = [%#span69] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'20 (_x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

  function shallow_model'8 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) : Seq.seq (Assignment'0.t_assignment)


  axiom shallow_model'8_spec : forall self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . ([%#span70] inv'20 self)
   -> ([%#span72] inv'21 (shallow_model'8 self))
  && ([%#span71] Seq.length (shallow_model'8 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'24 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span73] inv'21 (shallow_model'8 self)

  axiom inv'20 : forall x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . inv'20 x = true

  predicate invariant'23 (self : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span68] true

  predicate inv'19 (_x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'19 : forall x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'19 x = true

  use seq.Seq

  predicate inv'18 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  function shallow_model'7 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))


  axiom shallow_model'7_spec : forall self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . ([%#span70] inv'18 self)
   -> ([%#span72] inv'19 (shallow_model'7 self))
  && ([%#span71] Seq.length (shallow_model'7 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'22 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span73] inv'19 (shallow_model'7 self)

  axiom inv'18 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'18 x
  = true

  use set.Fset

  predicate invariant'21 (self : Fset.fset (TrailIndex'0.t_trailindex)) =
    [%#span68] true

  predicate inv'17 (_x : Fset.fset (TrailIndex'0.t_trailindex))

  axiom inv'17 : forall x : Fset.fset (TrailIndex'0.t_trailindex) . inv'17 x = true

  predicate invariant'20 (self : TrailIndex'0.t_trailindex) =
    [%#span68] true

  predicate inv'16 (_x : TrailIndex'0.t_trailindex)

  axiom inv'16 : forall x : TrailIndex'0.t_trailindex . inv'16 x = true

  use Cdsat_Theory_Value_Type as Value'0

  use Cdsat_Theory_Term_Type as Term'0

  predicate invariant'19 (self : (Term'0.t_term, Value'0.t_value)) =
    [%#span68] true

  predicate inv'15 (_x : (Term'0.t_term, Value'0.t_value))

  axiom inv'15 : forall x : (Term'0.t_term, Value'0.t_value) . inv'15 x = true

  predicate invariant'18 (self : Fset.fset (Term'0.t_term, Value'0.t_value)) =
    [%#span68] true

  predicate inv'14 (_x : Fset.fset (Term'0.t_term, Value'0.t_value))

  axiom inv'14 : forall x : Fset.fset (Term'0.t_term, Value'0.t_value) . inv'14 x = true

  predicate invariant'17 (self : slice (TrailIndex'0.t_trailindex)) =
    [%#span68] true

  predicate inv'13 (_x : slice (TrailIndex'0.t_trailindex))

  axiom inv'13 : forall x : slice (TrailIndex'0.t_trailindex) . inv'13 x = true

  predicate invariant'16 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span68] true

  predicate inv'12 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  axiom inv'12 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'12 x = true

  predicate invariant'15 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span68] true

  predicate inv'11 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'11 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'11 x = true

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span74] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span75] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  function eq_cmp'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 147 4 147 31] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom eq_cmp'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span76] (x = y)
  = (cmp_log'0 x y = Ordering'0.C_Equal)

  function antisym2'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 142 4 142 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom antisym2'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span77] cmp_log'0 x y
  = Ordering'0.C_Greater)  -> ([%#span78] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 136 4 136 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom antisym1'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span79] cmp_log'0 x y
  = Ordering'0.C_Less)  -> ([%#span80] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 130 4 130 52] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span81] cmp_log'0 x y
  = o)  -> ([%#span82] cmp_log'0 y z = o)  -> ([%#span83] cmp_log'0 x z = o)

  function refl'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 123 4 123 20] (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'1_spec : forall x : TrailIndex'0.t_trailindex . [%#span84] cmp_log'0 x x = Ordering'0.C_Equal

  function gt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span85] cmp_log'0 self o = Ordering'0.C_Greater

  function cmp_gt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 118 4 118 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_gt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span86] gt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Greater)

  function ge_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span87] cmp_log'0 self o <> Ordering'0.C_Less

  function cmp_ge_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 113 4 113 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_ge_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span88] ge_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Less)

  function lt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span89] cmp_log'0 self o = Ordering'0.C_Less

  function cmp_lt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 108 4 108 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_lt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span90] lt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Less)

  function le_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span91] cmp_log'0 self o <> Ordering'0.C_Greater

  function cmp_le_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 103 4 103 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_le_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span92] le_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Greater)

  predicate invariant'14 (self : TrailIndex'0.t_trailindex) =
    [%#span68] true

  predicate inv'10 (_x : TrailIndex'0.t_trailindex)

  axiom inv'10 : forall x : TrailIndex'0.t_trailindex . inv'10 x = true

  use Core_Option_Option_Type as Option'0

  predicate invariant'13 (self : Option'0.t_option (TrailIndex'0.t_trailindex)) =
    [%#span68] true

  predicate inv'9 (_x : Option'0.t_option (TrailIndex'0.t_trailindex))

  axiom inv'9 : forall x : Option'0.t_option (TrailIndex'0.t_trailindex) . inv'9 x = true

  use Cdsat_Heap_ConflictHeap_Type as ConflictHeap'0

  predicate invariant'12 (self : ConflictHeap'0.t_conflictheap) =
    [%#span68] true

  predicate inv'1 (_x : ConflictHeap'0.t_conflictheap)

  use prelude.prelude.Borrow

  predicate inv'8 (_x : ConflictHeap'0.t_conflictheap)

  axiom inv'8 : forall x : ConflictHeap'0.t_conflictheap . inv'8 x = inv'1 x

  predicate invariant'11 (self : borrowed (ConflictHeap'0.t_conflictheap)) =
    [%#span68] true

  predicate inv'7 (_x : borrowed (ConflictHeap'0.t_conflictheap))

  axiom inv'7 : forall x : borrowed (ConflictHeap'0.t_conflictheap) . inv'7 x = (inv'1 x.current /\ inv'1 x.final)

  predicate invariant'10 (self : Option'0.t_option (TrailIndex'0.t_trailindex)) =
    [%#span68] true

  predicate inv'6 (_x : Option'0.t_option (TrailIndex'0.t_trailindex))

  axiom inv'6 : forall x : Option'0.t_option (TrailIndex'0.t_trailindex) . inv'6 x = true

  use Alloc_Vec_IntoIter_IntoIter_Type as IntoIter'0

  predicate invariant'9 (self : borrowed (IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global))) =
    [%#span68] true

  predicate inv'5 (_x : borrowed (IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global)))

  axiom inv'5 : forall x : borrowed (IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global)) . inv'5 x
  = true

  use seq.Seq

  predicate inv'4 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function shallow_model'1 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom shallow_model'1_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span70] inv'4 self)
   -> ([%#span72] inv'11 (shallow_model'1 self))
  && ([%#span71] Seq.length (shallow_model'1 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'8 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span73] inv'11 (shallow_model'1 self)

  axiom inv'4 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'4 x = true

  use Cdsat_Theory_Sort_Type as Sort'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span93] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'7 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span94] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'0 v

  predicate inv'3 (_x : Model'0.t_model)

  axiom inv'3 : forall x : Model'0.t_model . inv'3 x
  = (invariant'7 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use Core_Slice_Iter_Iter_Type as Iter'0

  use seq.Seq

  use seq.Seq

  use prelude.prelude.Slice

  function shallow_model'16 (self : slice (TrailIndex'0.t_trailindex)) : Seq.seq (TrailIndex'0.t_trailindex)

  axiom shallow_model'16_spec : forall self : slice (TrailIndex'0.t_trailindex) . ([%#span95] inv'23 self)
   -> ([%#span98] inv'11 (shallow_model'16 self))
  && ([%#span97] shallow_model'16 self = Slice.id self)
  && ([%#span96] Seq.length (shallow_model'16 self) <= UIntSize.to_int (max'0 : usize))

  function index_logic'4 [@inline:trivial] (self : slice (TrailIndex'0.t_trailindex)) (ix : int) : TrailIndex'0.t_trailindex

   =
    [%#span99] Seq.get (shallow_model'16 self) ix

  use seq.Seq

  function shallow_model'10 (self : slice (TrailIndex'0.t_trailindex)) : Seq.seq (TrailIndex'0.t_trailindex) =
    [%#span100] shallow_model'16 self

  use seq.Seq

  function to_ref_seq'0 (self : slice (TrailIndex'0.t_trailindex)) : Seq.seq (TrailIndex'0.t_trailindex)

  axiom to_ref_seq'0_spec : forall self : slice (TrailIndex'0.t_trailindex) . ([%#span101] inv'13 self)
   -> ([%#span104] inv'22 (to_ref_seq'0 self))
  && ([%#span103] forall i : int . 0 <= i /\ i < Seq.length (to_ref_seq'0 self)
   -> Seq.get (to_ref_seq'0 self) i = index_logic'4 self i)
  && ([%#span102] Seq.length (to_ref_seq'0 self) = Seq.length (shallow_model'10 self))

  function shallow_model'12 (self : Iter'0.t_iter (TrailIndex'0.t_trailindex)) : slice (TrailIndex'0.t_trailindex)

  predicate produces'1 (self : Iter'0.t_iter (TrailIndex'0.t_trailindex)) (visited : Seq.seq (TrailIndex'0.t_trailindex)) (tl : Iter'0.t_iter (TrailIndex'0.t_trailindex))

   =
    [%#span105] to_ref_seq'0 (shallow_model'12 self) = Seq.(++) visited (to_ref_seq'0 (shallow_model'12 tl))

  function produces_trans'1 (a : Iter'0.t_iter (TrailIndex'0.t_trailindex)) (ab : Seq.seq (TrailIndex'0.t_trailindex)) (b : Iter'0.t_iter (TrailIndex'0.t_trailindex)) (bc : Seq.seq (TrailIndex'0.t_trailindex)) (c : Iter'0.t_iter (TrailIndex'0.t_trailindex)) : ()

   =
    [%#span111] ()

  axiom produces_trans'1_spec : forall a : Iter'0.t_iter (TrailIndex'0.t_trailindex), ab : Seq.seq (TrailIndex'0.t_trailindex), b : Iter'0.t_iter (TrailIndex'0.t_trailindex), bc : Seq.seq (TrailIndex'0.t_trailindex), c : Iter'0.t_iter (TrailIndex'0.t_trailindex) . ([%#span106] produces'1 a ab b)
   -> ([%#span107] produces'1 b bc c)
   -> ([%#span108] inv'22 ab)  -> ([%#span109] inv'22 bc)  -> ([%#span110] produces'1 a (Seq.(++) ab bc) c)

  use seq.Seq

  function produces_refl'1 (self : Iter'0.t_iter (TrailIndex'0.t_trailindex)) : () =
    [%#span113] ()

  axiom produces_refl'1_spec : forall self : Iter'0.t_iter (TrailIndex'0.t_trailindex) . [%#span112] produces'1 self (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) self

  predicate invariant'6 (self : Iter'0.t_iter (TrailIndex'0.t_trailindex)) =
    [%#span68] true

  predicate inv'2 (_x : Iter'0.t_iter (TrailIndex'0.t_trailindex))

  axiom inv'2 : forall x : Iter'0.t_iter (TrailIndex'0.t_trailindex) . inv'2 x = true

  function eq_cmp'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom eq_cmp'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span114] inv'16 x)
   -> ([%#span115] inv'16 y)  -> ([%#span116] (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal))

  function antisym2'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym2'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span117] cmp_log'0 x y
  = Ordering'0.C_Greater)
   -> ([%#span118] inv'16 x)  -> ([%#span119] inv'16 y)  -> ([%#span120] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym1'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span121] cmp_log'0 x y
  = Ordering'0.C_Less)
   -> ([%#span122] inv'16 x)  -> ([%#span123] inv'16 y)  -> ([%#span124] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span125] cmp_log'0 x y
  = o)
   -> ([%#span126] cmp_log'0 y z = o)
   -> ([%#span127] inv'16 x)  -> ([%#span128] inv'16 y)  -> ([%#span129] inv'16 z)  -> ([%#span130] cmp_log'0 x z = o)

  function refl'0 (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'0_spec : forall x : TrailIndex'0.t_trailindex . ([%#span131] inv'16 x)
   -> ([%#span132] cmp_log'0 x x = Ordering'0.C_Equal)

  function cmp_gt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_gt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span133] inv'16 x)
   -> ([%#span134] inv'16 y)  -> ([%#span135] gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater))

  function cmp_ge_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_ge_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span136] inv'16 x)
   -> ([%#span137] inv'16 y)  -> ([%#span138] ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less))

  function cmp_lt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_lt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span139] inv'16 x)
   -> ([%#span140] inv'16 y)  -> ([%#span141] lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less))

  function cmp_le_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_le_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span142] inv'16 x)
   -> ([%#span143] inv'16 y)  -> ([%#span144] le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater))

  predicate sorted_range'0 (self : Seq.seq (TrailIndex'0.t_trailindex)) (l : int) (u : int) =
    [%#span145] forall j : int . forall i : int . l <= i /\ i <= j /\ j < u
     -> le_log'0 (Seq.get self i) (Seq.get self j)

  predicate sorted'0 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span146] sorted_range'0 self 0 (Seq.length self)

  predicate seq_unique'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 828 0 828 46] (s : Seq.seq (TrailIndex'0.t_trailindex))

   =
    [%#span147] forall j : int . forall i : int . 0 <= i /\ i <= j /\ j < Seq.length s
     -> i <> j  -> Seq.get s i <> Seq.get s j

  use Cdsat_Heap_ConflictHeap_Type as Cdsat_Heap_ConflictHeap_Type

  predicate invariant'4 [#"/Users/xavier/Code/cdsat/src/heap.rs" 12 4 12 30] (self : ConflictHeap'0.t_conflictheap) =
    [%#span148] seq_unique'0 (shallow_model'1 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self))
    /\ sorted'0 (shallow_model'1 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self))

  axiom inv'1 : forall x : ConflictHeap'0.t_conflictheap . inv'1 x
  = (invariant'4 x
  /\ match x with
    | ConflictHeap'0.C_ConflictHeap a_0 -> true
    end)

  use seq.Seq

  predicate inv'0 (_x : IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function shallow_model'4 (self : IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  predicate produces'0 (self : IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global)) (visited : Seq.seq (TrailIndex'0.t_trailindex)) (rhs : IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global))

   =
    [%#span149] shallow_model'4 self = Seq.(++) visited (shallow_model'4 rhs)

  function produces_trans'0 (a : IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global)) (ab : Seq.seq (TrailIndex'0.t_trailindex)) (b : IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global)) (bc : Seq.seq (TrailIndex'0.t_trailindex)) (c : IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global)) : ()

   =
    [%#span158] ()

  axiom produces_trans'0_spec : forall a : IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global), ab : Seq.seq (TrailIndex'0.t_trailindex), b : IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global), bc : Seq.seq (TrailIndex'0.t_trailindex), c : IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span150] produces'0 a ab b)
   -> ([%#span151] produces'0 b bc c)
   -> ([%#span152] inv'0 a)
   -> ([%#span153] inv'11 ab)
   -> ([%#span154] inv'0 b)
   -> ([%#span155] inv'11 bc)  -> ([%#span156] inv'0 c)  -> ([%#span157] produces'0 a (Seq.(++) ab bc) c)

  use seq.Seq

  function produces_refl'0 (self : IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global)) : () =
    [%#span161] ()

  axiom produces_refl'0_spec : forall self : IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span159] inv'0 self)
   -> ([%#span160] produces'0 self (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) self)

  predicate invariant'3 (self : IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span68] true

  axiom inv'0 : forall x : IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'0 x = true

  use Cdsat_Concrete_Solver_Type as Solver'0

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span162] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'0 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span165] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span163] inv'3 self)
   -> ([%#span164] invariant'7 self  -> sort'0 (interp'0 self t) = sort'1 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span166] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  use prelude.prelude.Int

  use Cdsat_Theory_Trail_Type as Trail'1

  use Cdsat_Theory_Assign_Type as Assign'0

  predicate invariant'5 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span167] match self with
      | Assign'0.C_Decision t v -> sort'1 t = sort'0 v
      | Assign'0.C_Justified _ t v -> sort'1 t = sort'0 v /\ sort'1 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'1 t = sort'0 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'1.t_trail) =
    [%#span168] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'5 a
      end

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'1.t_trail) : int

  axiom len'0_spec : forall self : Trail'1.t_trail . [%#span169] len'0 self >= 0

  function level'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'1.t_trail) : int =
    [%#span172] match self with
      | Trail'1.C_Empty -> 0
      | Trail'1.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'2 tl
      | Trail'1.C_Assign _ _ tl -> level'2 tl
      end

  axiom level'2_spec : forall self : Trail'1.t_trail . ([%#span171] level'2 self <= len'0 self)
  && ([%#span170] level'2 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'1.t_trail) =
    [%#span173] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'2 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span174] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span178] match self with
      | Trail'1.C_Empty -> Option'0.C_None
      | Trail'1.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span177] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'1 (let (a, _) = d in a) = sort'0 (let (_, a) = d in a)))
  && ([%#span176] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'2 self))
  && ([%#span175] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  predicate contains'4 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span180] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'4_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span179] invariant_assign'0 self
   -> contains'4 self d = true  -> sort'1 (let (a, _) = d in a) = sort'0 (let (_, a) = d in a)

  predicate satisfied_by'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 674 4 674 47] (self : Trail'1.t_trail) (m : Model'0.t_model)

   =
    [%#span181] forall a : (Term'0.t_term, Value'0.t_value) . contains'4 self a  -> satisfies'0 m a

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span184] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span182] invariant_nonneg'0 self)
   -> ([%#span183] level_of'0 self d >= 0 /\ level_of'0 self d <= level'2 self)

  predicate is_bool'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span185] sort'0 self = Sort'0.C_Boolean

  function negate'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span188] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'1_spec : forall self : Value'0.t_value . ([%#span186] is_bool'1 self)
   -> ([%#span187] is_bool'1 (negate'1 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'1.t_trail) =
    [%#span189] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> let ap = to_pair'0 a in not contains'4 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'1 (let (_, a) = ap in a) then
        not contains'4 tl ((let (a, _) = ap in a), negate'1 (let (_, a) = ap in a))
      else
        true
      )
      end

  use set.Fset

  predicate contains'3 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span190] Fset.mem e self

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'1.t_trail) =
    [%#span191] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'3 j a  -> contains'4 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span192] Fset.remove a self

  use set.Fset

  use set.Fset

  use set.Fset

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'1.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_spec : forall self : Trail'1.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#span193] invariant_nonneg'0 self)
   -> ([%#span198] set_level'0 self s <= level'2 self)
  && ([%#span197] set_level'0 self s >= 0)
  && ([%#span196] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#span195] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'3 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span194] forall i : (Term'0.t_term, Value'0.t_value) . contains'3 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'1.t_trail) =
    [%#span200] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'2 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'1.t_trail) =
    [%#span201] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function count_bounds'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 740 4 740 35] (self : Trail'1.t_trail) : ()

  axiom count_bounds'0_spec : forall self : Trail'1.t_trail . ([%#span202] invariant'2 self)
   -> ([%#span203] forall a : (Term'0.t_term, Value'0.t_value) . contains'4 self a
   -> level_of'0 self a <= level'2 self)

  function restrict'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 558 4 558 45] (self : Trail'1.t_trail) (level : int) : Trail'1.t_trail


  axiom restrict'1_spec : forall self : Trail'1.t_trail, level : int . ([%#span204] invariant'2 self)
   -> ([%#span205] level >= 0)
   -> ([%#span213] len'0 (restrict'1 self level) <= len'0 self)
  && ([%#span212] (level'2 self >= level  -> level'2 (restrict'1 self level) = level)
  /\ (level'2 self < level  -> level'2 (restrict'1 self level) = level'2 self))
  && ([%#span211] forall m : Model'0.t_model . inv'3 m
   -> satisfied_by'0 self m  -> satisfied_by'0 (restrict'1 self level) m)
  && ([%#span210] forall a : (Term'0.t_term, Value'0.t_value) . not contains'4 self a
   -> not contains'4 (restrict'1 self level) a)
  && ([%#span209] level >= level'2 self  -> restrict'1 self level = self)
  && ([%#span208] forall a : (Term'0.t_term, Value'0.t_value) . contains'4 (restrict'1 self level) a
   -> contains'4 self a
  /\ level_of'0 (restrict'1 self level) a <= level /\ level_of'0 (restrict'1 self level) a = level_of'0 self a)
  && ([%#span207] forall a : (Term'0.t_term, Value'0.t_value) . contains'4 self a
   -> level_of'0 self a <= level
   -> contains'4 (restrict'1 self level) a /\ level_of'0 (restrict'1 self level) a = level_of'0 self a)
  && ([%#span206] invariant'2 (restrict'1 self level))

  predicate unsat'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 681 4 681 30] (self : Trail'1.t_trail) =
    [%#span214] forall m : Model'0.t_model . inv'3 m  -> satisfied_by'0 (restrict'1 self 0) m  -> false

  predicate impls'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 694 4 694 41] (self : Trail'1.t_trail) (rhs : Trail'1.t_trail)

   =
    [%#span216] forall m : Model'0.t_model . inv'3 m
     -> satisfied_by'0 (restrict'1 self 0) m  -> satisfied_by'0 (restrict'1 rhs 0) m

  axiom impls'0_spec : forall self : Trail'1.t_trail, rhs : Trail'1.t_trail . [%#span215] impls'0 self rhs
   -> unsat'0 rhs  -> unsat'0 self

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span217] forall a : (Term'0.t_term, Value'0.t_value) . contains'3 v a  -> satisfies'0 self a

  use prelude.prelude.Snapshot

  use Cdsat_Trail_Trail_Type as Trail'0

  use Cdsat_Theory_Normal_Type as Normal'0

  use prelude.prelude.Intrinsic

  use Cdsat_Term_Value_Type as Value'1

  use Cdsat_Term_Term_Type as Term'1

  predicate acceptable'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 397 4 397 56] (self : Trail'1.t_trail) (t : Term'0.t_term) (val' : Value'0.t_value)

   =
    [%#span218] not contains'4 self (t, val')
    /\ sort'1 t = sort'0 val' /\ (is_bool'1 val'  -> not contains'4 self (t, negate'1 val'))

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  function deep_model'2 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span219] match self with
      | Value'1.C_Bool b -> Value'0.C_Bool b
      | Value'1.C_Rat br -> Value'0.C_Rat (deep_model'2 br)
      end

  function shallow_model'9 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span220] deep_model'0 self

  use prelude.prelude.Snapshot

  use Cdsat_Trail_Trail_Type as Cdsat_Trail_Trail_Type

  function well_sorted'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 30 4 30 36] (self : Term'0.t_term) : bool =
    [%#span221] match self with
      | Term'0.C_Variable v -> true
      | Term'0.C_Value v -> true
      | Term'0.C_Plus l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'1 l = sort'1 r /\ sort'1 r = Sort'0.C_Rational
      | Term'0.C_Eq l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'1 l = sort'1 r
      | Term'0.C_Conj l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'1 l = sort'1 r /\ sort'1 r = Sort'0.C_Boolean
      | Term'0.C_Disj l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'1 l = sort'1 r /\ sort'1 r = Sort'0.C_Boolean
      | Term'0.C_Neg t -> well_sorted'0 t /\ sort'1 t = Sort'0.C_Boolean
      end

  use set.Fset

  function insert'2 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span222] Fset.add e self

  use seq.Seq

  use prelude.seq_ext.SeqExt

  predicate contains'1 (self : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) =
    [%#span223] exists i : int . 0 <= i /\ i < Seq.length self /\ Seq.get self i = e

  function remove'2 [#"/Users/xavier/Code/cdsat/src/trail.rs" 814 0 814 39] (s : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom remove'2_spec : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . ([%#span224] inv'11 s)
   -> ([%#span225] inv'16 e)
   -> ([%#span231] inv'11 (remove'2 s e))
  && ([%#span230] Seq.length (remove'2 s e) <= Seq.length s)
  && ([%#span229] contains'1 s e  -> Seq.length (remove'2 s e) < Seq.length s)
  && ([%#span228] forall t : TrailIndex'0.t_trailindex . inv'16 t  -> contains'1 (remove'2 s e) t  -> t <> e)
  && ([%#span227] forall t : TrailIndex'0.t_trailindex . inv'16 t  -> contains'1 (remove'2 s e) t  -> contains'1 s t)
  && ([%#span226] forall t : TrailIndex'0.t_trailindex . inv'16 t
   -> contains'1 s t  -> e <> t  -> contains'1 (remove'2 s e) t)

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  use Cdsat_Term_Sort_Type as Sort'1

  function deep_model'4 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'1.t_sort) : Sort'0.t_sort =
    [%#span233] match self with
      | Sort'1.C_Boolean -> Sort'0.C_Boolean
      | Sort'1.C_Rational -> Sort'0.C_Rational
      end

  function deep_model'3 (self : usize) : int =
    [%#span234] UIntSize.to_int self

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 193 4 193 44] (self : Term'1.t_term) : Term'0.t_term =
    [%#span235] match self with
      | Term'1.C_Variable v s -> Term'0.C_Variable (Var'0.C_Var (deep_model'3 v) (deep_model'4 s))
      | Term'1.C_Value v -> Term'0.C_Value (deep_model'0 v)
      | Term'1.C_Plus l r -> Term'0.C_Plus (deep_model'1 l) (deep_model'1 r)
      | Term'1.C_Eq l r -> Term'0.C_Eq (deep_model'1 l) (deep_model'1 r)
      | Term'1.C_Conj l r -> Term'0.C_Conj (deep_model'1 l) (deep_model'1 r)
      | Term'1.C_Disj l r -> Term'0.C_Disj (deep_model'1 l) (deep_model'1 r)
      | Term'1.C_Neg t -> Term'0.C_Neg (deep_model'1 t)
      | Term'1.C_Impl l r -> Term'0.C_Disj (Term'0.C_Neg (deep_model'1 l)) (deep_model'1 r)
      | Term'1.C_Times l r -> Term'0.C_Plus (Term'0.C_Value (Value'0.C_Rat (deep_model'2 l))) (deep_model'1 r)
      | Term'1.C_Lt l r -> Term'0.C_Eq (deep_model'1 l) (deep_model'1 r)
      end

  function shallow_model'13 [#"/Users/xavier/Code/cdsat/src/term.rs" 179 4 179 50] (self : Term'1.t_term) : Term'0.t_term

   =
    [%#span236] deep_model'1 self

  function term_value'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 725 4 725 61] (self : Assignment'0.t_assignment) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span237] (shallow_model'13 (Cdsat_Trail_Assignment_Type.assignment_term self), shallow_model'9 (Cdsat_Trail_Assignment_Type.assignment_val self))

  use seq.Seq

  use seq.Seq

  function index_logic'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 645 4 645 77] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span238] term_value'0 (Seq.get (shallow_model'8 (Seq.get (shallow_model'7 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)))) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)))

  predicate contains'2 [#"/Users/xavier/Code/cdsat/src/trail.rs" 289 4 289 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex)

   =
    [%#span239] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)
    < Seq.length (shallow_model'7 (Cdsat_Trail_Trail_Type.trail_assignments self))
    /\ UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)
    < Seq.length (shallow_model'8 (Seq.get (shallow_model'7 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))))

  function abstract_justification'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 318 4 321 44] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) : Fset.fset (Term'0.t_term, Value'0.t_value)


  axiom abstract_justification'0_spec : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span240] forall i : int . 0
  <= i
  /\ i < Seq.length just  -> contains'2 self (Seq.get just i))
   -> ([%#span244] forall i : int . 0 <= i /\ i < Seq.length just
   -> contains'3 (abstract_justification'0 self just) (index_logic'0 self (Seq.get just i)))
  && ([%#span243] forall a : (Term'0.t_term, Value'0.t_value) . contains'3 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'1 just ix /\ a = index_logic'0 self ix))
  && ([%#span242] forall a : (Term'0.t_term, Value'0.t_value) . contains'3 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'2 self ix /\ a = index_logic'0 self ix))
  && ([%#span241] Fset.cardinal (abstract_justification'0 self just) <= Seq.length just)

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span246] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'3 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate sound'1 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'1.t_trail)
   =
    [%#span247] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a _ tl -> sound'1 tl /\ justified_sound'0 a
      end

  function find_justified'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 619 4 619 46] (self : Trail'1.t_trail) (kv : (Term'0.t_term, Value'0.t_value)) : ()


  axiom find_justified'0_spec : forall self : Trail'1.t_trail, kv : (Term'0.t_term, Value'0.t_value) . ([%#span248] sound'1 self)
   -> ([%#span249] contains'4 self kv)
   -> ([%#span250] forall l : int . forall a : Assign'0.t_assign . find'0 self kv = Option'0.C_Some (a, l)
   -> justified_sound'0 a)

  predicate is_decision'1 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 511 4 511 54] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span251] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Decision _ _, _) -> true
      | _ -> false
      end

  predicate is_input'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 521 4 521 51] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span252] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Input _ _, _) -> true
      | _ -> false
      end

  predicate entails'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 205 4 205 74] (self : Model'0.t_model) (j : Fset.fset (Term'0.t_term, Value'0.t_value)) (c : (Term'0.t_term, Value'0.t_value))

   =
    [%#span253] invariant'7 self  -> satisfy_set'0 self j  -> satisfies'0 self c

  predicate is_justified'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 501 4 501 55] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span254] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified _ _ _, _) -> true
      | _ -> false
      end

  function justification'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 490 4 490 71] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)


  axiom justification'1_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span255] invariant'2 self)
   -> ([%#span256] is_justified'0 self d)
   -> ([%#span257] sound'1 self)
   -> ([%#span260] is_decision'1 self d
   -> justification'1 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#span259] is_input'0 self d
   -> justification'1 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#span258] forall m : Model'0.t_model . inv'3 m  -> entails'0 m (justification'1 self d) d)

  predicate justified_correct'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 267 4 267 78] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) (j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

   =
    [%#span261] (forall i : TrailIndex'0.t_trailindex . contains'1 (shallow_model'1 j) i
     -> lt_log'0 i ix /\ contains'2 self i)
    /\ is_justified'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ justification'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    = abstract_justification'0 self (shallow_model'1 j)

  use Cdsat_Trail_Reason_Type as Reason'0

  function index_logic'6 [@inline:trivial] (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (ix : usize) : Assignment'0.t_assignment

   =
    [%#span262] Seq.get (shallow_model'8 self) (UIntSize.to_int ix)

  function index_logic'5 [@inline:trivial] (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (ix : usize) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span262] Seq.get (shallow_model'7 self) (UIntSize.to_int ix)

  function reason'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 549 4 549 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : Reason'0.t_reason

   =
    [%#span263] Cdsat_Trail_Assignment_Type.assignment_reason (index_logic'6 (index_logic'5 (Cdsat_Trail_Trail_Type.trail_assignments self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)) (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix))

  predicate justified_is_justified'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 253 4 253 47] (self : Trail'0.t_trail) =
    [%#span264] forall ix : TrailIndex'0.t_trailindex . contains'2 self ix
     -> (let reason = reason'0 self ix in (reason = Reason'0.C_Decision)
    = is_decision'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ (reason = Reason'0.C_Input)
    = is_input'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ (forall j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . reason = Reason'0.C_Justified j
     -> justified_correct'0 self ix j))

  function index_logic'2 [@inline:trivial] (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (ix : int) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span265] Seq.get (shallow_model'7 self) ix

  function level_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 180 4 180 33] (self : TrailIndex'0.t_trailindex) : int
   =
    [%#span266] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 self)

  predicate abstract_relation'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 277 4 277 42] (self : Trail'0.t_trail) =
    [%#span267] (forall ix : TrailIndex'0.t_trailindex . contains'2 self ix
     -> contains'4 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix))
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'2 self ix
     -> level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    = UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))
    /\ (forall a : (Term'0.t_term, Value'0.t_value) . contains'4 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
     -> (exists ix : TrailIndex'0.t_trailindex . contains'2 self ix
    /\ level_log'0 ix = level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
    /\ index_logic'0 self ix = a))

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 237 4 237 34] (self : Trail'0.t_trail) =
    [%#span268] abstract_relation'0 self
    /\ sound'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    /\ invariant'2 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    /\ level'2 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    = UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self)
    /\ UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self)
    = Seq.length (shallow_model'7 (Cdsat_Trail_Trail_Type.trail_assignments self)) - 1
    /\ (forall i : int . 0 <= i /\ i < Seq.length (shallow_model'7 (Cdsat_Trail_Trail_Type.trail_assignments self))
     -> Seq.length (shallow_model'8 (index_logic'2 (Cdsat_Trail_Trail_Type.trail_assignments self) i)) > 0)
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'2 self ix
     -> (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix) = 0)
    = is_decision'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix))
    /\ (forall j : TrailIndex'0.t_trailindex . forall i : TrailIndex'0.t_trailindex . contains'2 self i
     -> contains'2 self j  -> i <> j  -> index_logic'0 self i <> index_logic'0 self j)
    /\ justified_is_justified'0 self
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'2 self ix
     -> well_sorted'0 (let (a, _) = index_logic'0 self ix in a))

  let rec add_decision'0 (self:borrowed (Trail'0.t_trail)) (term:Term'1.t_term) (val':Value'1.t_value) (return'  (ret:()))= {[@expl:precondition] [%#span271] acceptable'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self.current)) (shallow_model'13 term) (shallow_model'9 val')}
    {[@expl:precondition] [%#span270] invariant'0 self.current}
    {[@expl:precondition] [%#span269] well_sorted'0 (shallow_model'13 term)}
    any
    [ return' (result:())-> {[%#span273] impls'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self.current)) (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self.final))}
      {[%#span272] invariant'0 self.final}
      (! return' {result}) ]


  predicate resolve'5 (self : TrailIndex'0.t_trailindex) =
    [%#span274] true

  function index_logic'3 [@inline:trivial] (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) (ix : int) : TrailIndex'0.t_trailindex

   =
    [%#span265] Seq.get (shallow_model'1 self) ix

  predicate resolve'4 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span275] forall i : int . 0 <= i /\ i < Seq.length (shallow_model'1 self)  -> resolve'5 (index_logic'3 self i)

  let rec add_justified'0 (self:borrowed (Trail'0.t_trail)) (into_vec:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) (term:Term'1.t_term) (val':Value'1.t_value) (return'  (ret:()))= {[@expl:precondition] [%#span281] forall m : Model'0.t_model . inv'3 m
     -> satisfy_set'0 m (abstract_justification'0 self.current (shallow_model'1 into_vec))
     -> satisfies'0 m (shallow_model'13 term, shallow_model'9 val')}
    {[@expl:precondition] [%#span280] acceptable'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self.current)) (shallow_model'13 term) (shallow_model'9 val')}
    {[@expl:precondition] [%#span279] forall i : TrailIndex'0.t_trailindex . contains'1 (shallow_model'1 into_vec) i
     -> contains'2 self.current i}
    {[@expl:precondition] [%#span278] is_bool'1 (shallow_model'9 val')}
    {[@expl:precondition] [%#span277] well_sorted'0 (shallow_model'13 term)}
    {[@expl:precondition] [%#span276] invariant'0 self.current}
    any
    [ return' (result:())-> {[%#span282] impls'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self.current)) (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self.final))}
      {[%#span276] invariant'0 self.final}
      (! return' {result}) ]


  function shallow_model'14 (self : Value'1.t_value) : Value'0.t_value =
    [%#span100] shallow_model'9 self

  let rec negate'0 (self:Value'1.t_value) (return'  (ret:Value'1.t_value))= {[@expl:precondition] [%#span283] is_bool'1 (shallow_model'14 self)}
    any
    [ return' (result:Value'1.t_value)-> {[%#span284] shallow_model'9 result = negate'1 (shallow_model'14 self)}
      (! return' {result}) ]


  function lemma'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 229 4 229 41] (self : Model'0.t_model) (t : Term'0.t_term) (v : Value'0.t_value) : ()


  axiom lemma'0_spec : forall self : Model'0.t_model, t : Term'0.t_term, v : Value'0.t_value . ([%#span285] sort'0 v
  = Sort'0.C_Boolean)
   -> ([%#span286] sort'1 t = Sort'0.C_Boolean)
   -> ([%#span287] invariant'7 self)
   -> ([%#span288] inv'3 self)  -> ([%#span289] satisfies'0 self (t, v) \/ satisfies'0 self (t, negate'1 v))

  use Cdsat_Theory_Conflict_Type as Conflict'0

  predicate is_bool'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 59 4 59 32] (self : Term'0.t_term) =
    [%#span290] sort'1 self = Sort'0.C_Boolean

  use Cdsat_Theory_Conflict_Type as Cdsat_Theory_Conflict_Type

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 995 4 995 30] (self : Conflict'0.t_conflict)

   =
    [%#span291] sound'1 (Cdsat_Theory_Conflict_Type.conflict_0 self)
    /\ (forall m : Model'0.t_model . inv'3 m  -> satisfy_set'0 m (Cdsat_Theory_Conflict_Type.conflict_1 self)  -> false)

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 988 4 988 34] (self : Conflict'0.t_conflict) =
    [%#span292] set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Conflict_Type.conflict_1 self)
    > 0
    /\ invariant'2 (Cdsat_Theory_Conflict_Type.conflict_0 self)
    /\ (forall a : (Term'0.t_term, Value'0.t_value) . contains'3 (Cdsat_Theory_Conflict_Type.conflict_1 self) a
     -> contains'4 (Cdsat_Theory_Conflict_Type.conflict_0 self) a)

  function learn_justified'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 1012 4 1012 52] (self : Conflict'0.t_conflict) (ass : (Term'0.t_term, Value'0.t_value)) : ()

   =
    [%#span298] let _ = () in ()

  axiom learn_justified'0_spec : forall self : Conflict'0.t_conflict, ass : (Term'0.t_term, Value'0.t_value) . ([%#span293] invariant'1 self)
   -> ([%#span294] sound'0 self)
   -> ([%#span295] contains'3 (Cdsat_Theory_Conflict_Type.conflict_1 self) ass)
   -> ([%#span296] is_bool'2 (let (a, _) = ass in a) /\ is_bool'1 (let (_, a) = ass in a))
   -> ([%#span297] forall m : Model'0.t_model . inv'3 m
   -> satisfy_set'0 m (remove'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) ass)
   -> satisfies'0 m ((let (a, _) = ass in a), negate'1 (let (_, a) = ass in a)))

  predicate ext_eq'0 (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (other : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span302] forall e : (Term'0.t_term, Value'0.t_value) . inv'15 e  -> contains'3 self e = contains'3 other e

  axiom ext_eq'0_spec : forall self : Fset.fset (Term'0.t_term, Value'0.t_value), other : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#span299] inv'14 self)
   -> ([%#span300] inv'14 other)  -> ([%#span301] ext_eq'0 self other  -> self = other)

  function abs_just_equiv'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 542 4 542 67] (self : Trail'0.t_trail) (other : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) : ()


  axiom abs_just_equiv'0_spec : forall self : Trail'0.t_trail, other : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span303] forall j : TrailIndex'0.t_trailindex . contains'1 just j
   -> contains'2 self j /\ contains'2 other j /\ index_logic'0 self j = index_logic'0 other j)
   -> ([%#span304] abstract_justification'0 self just = abstract_justification'0 other just)

  use prelude.prelude.Snapshot

  let rec restrict'0 (self:borrowed (Trail'0.t_trail)) (level:usize) (return'  (ret:()))= {[@expl:precondition] [%#span306] UIntSize.to_int level
    <= UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self.current)}
    {[@expl:precondition] [%#span305] invariant'0 self.current}
    any
    [ return' (result:())-> {[%#span309] forall ix : TrailIndex'0.t_trailindex . contains'2 self.final ix
       -> index_logic'0 self.current ix = index_logic'0 self.final ix}
      {[%#span308] forall ix : TrailIndex'0.t_trailindex . level_log'0 ix <= UIntSize.to_int level
       -> contains'2 self.current ix  -> contains'2 self.final ix}
      {[%#span307] Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self.final)
      = restrict'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self.current)) (UIntSize.to_int level)}
      {[%#span305] invariant'0 self.final}
      (! return' {result}) ]


  use prelude.prelude.Snapshot

  function set_remove'0 [#"/Users/xavier/Code/cdsat/src/concrete.rs" 286 0 286 34] (s : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : ()

   =
    [%#span313] ()

  axiom set_remove'0_spec : forall s : Fset.fset (Term'0.t_term, Value'0.t_value), a : (Term'0.t_term, Value'0.t_value) . ([%#span310] inv'14 s)
   -> ([%#span311] inv'15 a)
   -> ([%#span312] forall x : (Term'0.t_term, Value'0.t_value) . inv'15 x
   -> a <> x  -> contains'3 s x  -> contains'3 (remove'0 s a) x)

  use set.Fset

  predicate contains'0 [@inline:trivial] (self : Fset.fset (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex)
   =
    [%#span190] Fset.mem e self

  use set.Fset

  function insert'1 [@inline:trivial] (self : Fset.fset (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) : Fset.fset (TrailIndex'0.t_trailindex)

   =
    [%#span222] Fset.add e self

  use set.Fset

  function to_set'0 [#"/Users/xavier/Code/cdsat/src/heap.rs" 96 0 96 35] (s : Seq.seq (TrailIndex'0.t_trailindex)) : Fset.fset (TrailIndex'0.t_trailindex)


  axiom to_set'0_spec : forall s : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span314] inv'11 s)
   -> ([%#span316] inv'17 (to_set'0 s))
  && ([%#span315] forall x : TrailIndex'0.t_trailindex . inv'16 x  -> contains'1 s x = contains'0 (to_set'0 s) x)

  function shallow_model'0 [#"/Users/xavier/Code/cdsat/src/heap.rs" 88 4 88 50] (self : ConflictHeap'0.t_conflictheap) : Fset.fset (TrailIndex'0.t_trailindex)


  axiom shallow_model'0_spec : forall self : ConflictHeap'0.t_conflictheap . ([%#span318] inv'1 self)
   -> ([%#span319] forall x : TrailIndex'0.t_trailindex . contains'1 (shallow_model'1 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self)) x
  = contains'0 (shallow_model'0 self) x)

  let rec into_vec'0 (self:ConflictHeap'0.t_conflictheap) (return'  (ret:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)))= {[@expl:precondition] [%#span320] inv'1 self}
    any
    [ return' (result:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> {[%#span323] seq_unique'0 (shallow_model'1 result)}
      {[%#span322] forall i : int . 0 <= i /\ i < Seq.length (shallow_model'1 result)
       -> contains'0 (shallow_model'0 self) (Seq.get (shallow_model'1 result) i)}
      {[%#span321] forall e : TrailIndex'0.t_trailindex . contains'0 (shallow_model'0 self) e
      = contains'1 (shallow_model'1 result) e}
      (! return' {result}) ]


  use prelude.prelude.Snapshot

  function negate_involutive'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 109 4 109 34] (self : Value'0.t_value) : ()

  axiom negate_involutive'0_spec : forall self : Value'0.t_value . ([%#span324] is_bool'1 self)
   -> ([%#span325] negate'1 (negate'1 self) = self)

  function restrict_idempotent'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 775 4 775 54] (self : Trail'1.t_trail) (l1 : int) (l2 : int) : ()


  axiom restrict_idempotent'0_spec : forall self : Trail'1.t_trail, l1 : int, l2 : int . ([%#span326] invariant'2 self)
   -> ([%#span327] l1 >= 0 /\ l2 >= 0)
   -> ([%#span328] l1 <= l2)  -> ([%#span329] restrict'1 self l1 = restrict'1 (restrict'1 self l2) l1)

  function trail_plausible'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 788 4 788 50] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : ()


  axiom trail_plausible'0_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span330] invariant'2 self)
   -> ([%#span331] contains'4 self d)
   -> ([%#span332] is_bool'1 (let (_, a) = d in a))
   -> ([%#span333] not contains'4 self ((let (a, _) = d in a), negate'1 (let (_, a) = d in a)))

  function restrict_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 704 4 704 43] (self : Trail'1.t_trail) (level : int) : ()


  axiom restrict_sound'0_spec : forall self : Trail'1.t_trail, level : int . ([%#span334] sound'1 self)
   -> ([%#span335] sound'1 (restrict'1 self level))

  use Cdsat_Theory_Normal_Type as Cdsat_Theory_Normal_Type

  predicate sound'2 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 826 4 826 30] (self : Normal'0.t_normal)

   =
    [%#span336] sound'1 (Cdsat_Theory_Normal_Type.normal_0 self)

  function backjump2'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 1110 4 1110 54] (self : Conflict'0.t_conflict) (l : (Term'0.t_term, Value'0.t_value)) : Normal'0.t_normal

   =
    [%#span345] let e = remove'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) l in let _ = () in let _ = () in let _ = () in let _ = () in let _ = () in let restricted = restrict'1 (Cdsat_Theory_Conflict_Type.conflict_0 self) (set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e) in Normal'0.C_Normal (Trail'1.C_Assign (Assign'0.C_Justified e (let (a, _) = l in a) (negate'1 (let (_, a) = l in a))) (set_level'0 restricted e) restricted)

  axiom backjump2'0_spec : forall self : Conflict'0.t_conflict, l : (Term'0.t_term, Value'0.t_value) . ([%#span337] invariant'1 self)
   -> ([%#span338] sound'0 self)
   -> ([%#span339] contains'3 (Cdsat_Theory_Conflict_Type.conflict_1 self) l)
   -> ([%#span340] is_bool'1 (let (_, a) = l in a) /\ is_bool'2 (let (a, _) = l in a))
   -> ([%#span341] forall a : (Term'0.t_term, Value'0.t_value) . contains'3 (Cdsat_Theory_Conflict_Type.conflict_1 self) a
   -> level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a
  < level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) l
  \/ a = l)
   -> ([%#span344] impls'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Normal_Type.normal_0 (backjump2'0 self l)))
  && ([%#span343] sound'2 (backjump2'0 self l))
  && ([%#span342] invariant'2 (Cdsat_Theory_Normal_Type.normal_0 (backjump2'0 self l)))

  function shallow_model'6 (self : ConflictHeap'0.t_conflictheap) : Fset.fset (TrailIndex'0.t_trailindex) =
    [%#span100] shallow_model'0 self

  use prelude.prelude.Snapshot

  function shallow_model'3 (self : Snapshot.snap_ty (ConflictHeap'0.t_conflictheap)) : Fset.fset (TrailIndex'0.t_trailindex)

   =
    [%#span346] shallow_model'6 (Snapshot.inner self)

  use prelude.prelude.Snapshot

  use set.Fset

  function resolve_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 215 4 220 5] (self : Model'0.t_model) (cflct : Fset.fset (Term'0.t_term, Value'0.t_value)) (just : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : ()


  axiom resolve_sound'0_spec : forall self : Model'0.t_model, cflct : Fset.fset (Term'0.t_term, Value'0.t_value), just : Fset.fset (Term'0.t_term, Value'0.t_value), a : (Term'0.t_term, Value'0.t_value) . ([%#span347] satisfy_set'0 self just
   -> satisfies'0 self a)
   -> ([%#span348] not satisfy_set'0 self cflct)
   -> ([%#span349] contains'3 cflct a)
   -> ([%#span350] inv'3 self)  -> ([%#span351] not satisfy_set'0 self (Fset.union (remove'0 cflct a) just))

  function justification_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 659 4 659 58] (self : Trail'1.t_trail) (kv : (Term'0.t_term, Value'0.t_value)) : ()


  axiom justification_contains'0_spec : forall self : Trail'1.t_trail, kv : (Term'0.t_term, Value'0.t_value) . ([%#span352] invariant'2 self)
   -> ([%#span353] is_justified'0 self kv)
   -> ([%#span355] set_level'0 self (justification'1 self kv) = level_of'0 self kv)
  && ([%#span354] forall e : (Term'0.t_term, Value'0.t_value) . contains'3 (justification'1 self kv) e
   -> contains'4 self e /\ level_of'0 self e <= level_of'0 self kv)

  function level'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 1001 4 1001 29] (self : Conflict'0.t_conflict) : int =
    [%#span356] set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Conflict_Type.conflict_1 self)

  function resolvef'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 1032 4 1032 51] (self : Conflict'0.t_conflict) (a : (Term'0.t_term, Value'0.t_value)) : Conflict'0.t_conflict

   =
    [%#span365] let just = justification'1 (Cdsat_Theory_Conflict_Type.conflict_0 self) a in let _ = justification_contains'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a in let _ = () in Conflict'0.C_Conflict (Cdsat_Theory_Conflict_Type.conflict_0 self) (Fset.union (remove'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) a) just)

  axiom resolvef'0_spec : forall self : Conflict'0.t_conflict, a : (Term'0.t_term, Value'0.t_value) . ([%#span357] invariant'1 self)
   -> ([%#span358] sound'0 self)
   -> ([%#span359] is_justified'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a)
   -> ([%#span360] contains'3 (Cdsat_Theory_Conflict_Type.conflict_1 self) a)
   -> ([%#span361] forall j : (Term'0.t_term, Value'0.t_value) . contains'3 (justification'1 (Cdsat_Theory_Conflict_Type.conflict_0 self) a) j
   -> not is_bool'1 (let (_, a) = j in a)
   -> is_decision'1 (Cdsat_Theory_Conflict_Type.conflict_0 self) j
   -> level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) j
  < set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Conflict_Type.conflict_1 self))
   -> ([%#span364] level'1 (resolvef'0 self a) = level'1 self)
  && ([%#span363] sound'0 (resolvef'0 self a)) && ([%#span362] invariant'1 (resolvef'0 self a))

  function shallow_model'11 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)

   =
    [%#span100] shallow_model'1 self

  use prelude.prelude.Snapshot

  function shallow_model'2 (self : Snapshot.snap_ty (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))) : Seq.seq (TrailIndex'0.t_trailindex)

   =
    [%#span346] shallow_model'11 (Snapshot.inner self)

  use seq.Seq

  predicate resolve'3 (self : borrowed (Iter'0.t_iter (TrailIndex'0.t_trailindex))) =
    [%#span366] self.final = self.current

  function shallow_model'17 (self : borrowed (Iter'0.t_iter (TrailIndex'0.t_trailindex))) : slice (TrailIndex'0.t_trailindex)

   =
    [%#span367] shallow_model'12 self.current

  predicate completed'1 (self : borrowed (Iter'0.t_iter (TrailIndex'0.t_trailindex))) =
    [%#span368] resolve'3 self
    /\ shallow_model'16 (shallow_model'17 self) = (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex))

  let rec next'1 (self:borrowed (Iter'0.t_iter (TrailIndex'0.t_trailindex))) (return'  (ret:Option'0.t_option (TrailIndex'0.t_trailindex)))= any
    [ return' (result:Option'0.t_option (TrailIndex'0.t_trailindex))-> {[%#span370] inv'9 result}
      {[%#span369] match result with
        | Option'0.C_None -> completed'1 self
        | Option'0.C_Some v -> produces'1 self.current (Seq.singleton v) self.final
        end}
      (! return' {result}) ]


  use prelude.prelude.Snapshot

  function index_logic'1 [@inline:trivial] (self : Snapshot.snap_ty (Seq.seq (TrailIndex'0.t_trailindex))) (ix : int) : TrailIndex'0.t_trailindex

   =
    [%#span371] Seq.get (Snapshot.inner self) ix

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  predicate into_iter_post'1 (self : Iter'0.t_iter (TrailIndex'0.t_trailindex)) (res : Iter'0.t_iter (TrailIndex'0.t_trailindex))

   =
    [%#span372] self = res

  predicate into_iter_pre'1 (self : Iter'0.t_iter (TrailIndex'0.t_trailindex)) =
    [%#span373] true

  let rec into_iter'1 (self:Iter'0.t_iter (TrailIndex'0.t_trailindex)) (return'  (ret:Iter'0.t_iter (TrailIndex'0.t_trailindex)))= {[@expl:precondition] [%#span375] inv'2 self}
    {[@expl:precondition] [%#span374] into_iter_pre'1 self}
    any
    [ return' (result:Iter'0.t_iter (TrailIndex'0.t_trailindex))-> {[%#span376] inv'2 result}
      {[%#span374] into_iter_post'1 self result}
      (! return' {result}) ]


  let rec iter'0 (self:slice (TrailIndex'0.t_trailindex)) (return'  (ret:Iter'0.t_iter (TrailIndex'0.t_trailindex)))= {[@expl:precondition] [%#span377] inv'13 self}
    any
    [ return' (result:Iter'0.t_iter (TrailIndex'0.t_trailindex))-> {[%#span378] shallow_model'12 result = self}
      (! return' {result}) ]


  let rec deref'0 (self:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) (return'  (ret:slice (TrailIndex'0.t_trailindex)))= {[@expl:precondition] [%#span379] inv'12 self}
    any
    [ return' (result:slice (TrailIndex'0.t_trailindex))-> {[%#span381] inv'13 result}
      {[%#span380] shallow_model'10 result = shallow_model'11 self}
      (! return' {result}) ]


  use prelude.prelude.Snapshot

  let rec justification'0 (self:Trail'0.t_trail) (a:TrailIndex'0.t_trailindex) (return'  (ret:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)))= {[@expl:precondition] [%#span384] is_justified'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self a)}
    {[@expl:precondition] [%#span383] contains'2 self a}
    {[@expl:precondition] [%#span382] invariant'0 self}
    any
    [ return' (result:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> {[%#span387] forall i : int . 0
      <= i
      /\ i < Seq.length (shallow_model'1 result)  -> level_log'0 (Seq.get (shallow_model'1 result) i) <= level_log'0 a}
      {[%#span386] abstract_justification'0 self (shallow_model'1 result)
      = justification'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self a)}
      {[%#span385] forall i : int . 0 <= i /\ i < Seq.length (shallow_model'1 result)
       -> contains'2 self (index_logic'3 result i)}
      (! return' {result}) ]


  function justified_is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 806 4 806 52] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : ()


  axiom justified_is_bool'0_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span388] invariant_assign'0 self)
   -> ([%#span389] is_justified'0 self d)  -> ([%#span390] is_bool'1 (let (_, a) = d in a))

  use prelude.prelude.Snapshot

  function is_input_inv'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 533 4 533 47] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : ()


  axiom is_input_inv'0_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span391] invariant'2 self)
   -> ([%#span392] is_input'0 self d)  -> ([%#span393] level_of'0 self d = 0)

  let rec is_decision'0 (self:Assignment'0.t_assignment) (return'  (ret:bool))= any
    [ return' (result:bool)-> {[%#span394] result
      = (Cdsat_Trail_Assignment_Type.assignment_reason self = Reason'0.C_Decision)}
      (! return' {result}) ]


  let rec is_first_order'0 (self:Assignment'0.t_assignment) (return'  (ret:bool))= any
    [ return' (result:bool)-> {[%#span395] result
      <> is_bool'1 (shallow_model'9 (Cdsat_Trail_Assignment_Type.assignment_val self))}
      (! return' {result}) ]


  let rec is_bool'0 (self:Assignment'0.t_assignment) (return'  (ret:bool))= any
    [ return' (result:bool)-> {[%#span396] result
      = is_bool'1 (shallow_model'9 (Cdsat_Trail_Assignment_Type.assignment_val self))}
      (! return' {result}) ]


  let rec clone'0 (self:Assignment'0.t_assignment) (return'  (ret:Assignment'0.t_assignment))= any
    [ return' (result:Assignment'0.t_assignment)-> {[%#span397] result = self} (! return' {result}) ]


  let rec index'0 (self:Trail'0.t_trail) (index:TrailIndex'0.t_trailindex) (return'  (ret:Assignment'0.t_assignment))= {[@expl:precondition] [%#span398] contains'2 self index}
    any
    [ return' (result:Assignment'0.t_assignment)-> {[%#span399] result
      = Seq.get (shallow_model'8 (Seq.get (shallow_model'7 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 index)))) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 index))}
      (! return' {result}) ]


  use set.Fset

  function remove'1 [@inline:trivial] (self : Fset.fset (TrailIndex'0.t_trailindex)) (a : TrailIndex'0.t_trailindex) : Fset.fset (TrailIndex'0.t_trailindex)

   =
    [%#span192] Fset.remove a self

  use set.Fset

  use set.Fset

  use set.Fset

  function set_max'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 838 0 838 56] (s : Fset.fset (TrailIndex'0.t_trailindex)) : TrailIndex'0.t_trailindex


  axiom set_max'0_spec : forall s : Fset.fset (TrailIndex'0.t_trailindex) . ([%#span400] not Fset.is_empty s)
   -> ([%#span402] forall o : TrailIndex'0.t_trailindex . contains'0 s o  -> le_log'0 o (set_max'0 s))
  && ([%#span401] contains'0 s (set_max'0 s))

  function shallow_model'5 (self : borrowed (ConflictHeap'0.t_conflictheap)) : Fset.fset (TrailIndex'0.t_trailindex) =
    [%#span367] shallow_model'0 self.current

  let rec pop_last'0 (self:borrowed (ConflictHeap'0.t_conflictheap)) (return'  (ret:Option'0.t_option (TrailIndex'0.t_trailindex)))= {[@expl:precondition] [%#span404] inv'7 self}
    any
    [ return' (result:Option'0.t_option (TrailIndex'0.t_trailindex))-> {[%#span406] forall a : TrailIndex'0.t_trailindex . result
      = Option'0.C_Some a
       -> shallow_model'0 self.final = remove'1 (shallow_model'5 self) a
      /\ contains'0 (shallow_model'5 self) a
      /\ (forall other : TrailIndex'0.t_trailindex . contains'0 (shallow_model'0 self.final) other
       -> le_log'0 other a)}
      {[%#span405] (shallow_model'5 self = (Fset.empty  : Fset.fset (TrailIndex'0.t_trailindex)))
      = (result = Option'0.C_None)}
      (! return' {result}) ]


  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  function ix_to_abs'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 782 0 782 93] (t : Trail'0.t_trail) (s : Fset.fset (TrailIndex'0.t_trailindex)) : Fset.fset (Term'0.t_term, Value'0.t_value)


  axiom ix_to_abs'0_spec : forall t : Trail'0.t_trail, s : Fset.fset (TrailIndex'0.t_trailindex) . ([%#span408] forall a : (Term'0.t_term, Value'0.t_value) . contains'3 (ix_to_abs'0 t s) a
   -> (exists ix : TrailIndex'0.t_trailindex . a = index_logic'0 t ix /\ contains'0 s ix))
  && ([%#span407] forall ix : TrailIndex'0.t_trailindex . contains'0 s ix
   -> contains'3 (ix_to_abs'0 t s) (index_logic'0 t ix))

  function ix_to_abs_level'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 861 0 861 60] (t : Trail'0.t_trail) (s : Fset.fset (TrailIndex'0.t_trailindex)) : ()


  axiom ix_to_abs_level'0_spec : forall t : Trail'0.t_trail, s : Fset.fset (TrailIndex'0.t_trailindex) . ([%#span410] invariant'0 t)
   -> ([%#span411] forall i : TrailIndex'0.t_trailindex . contains'0 s i  -> contains'2 t i)
   -> ([%#span413] Fset.is_empty s
   -> set_level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost t)) (ix_to_abs'0 t s) = 0)
  && ([%#span412] not Fset.is_empty s
   -> set_level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost t)) (ix_to_abs'0 t s) = level_log'0 (set_max'0 s))

  let rec level'0 (self:TrailIndex'0.t_trailindex) (return'  (ret:usize))= any
    [ return' (result:usize)-> {[%#span415] result = Cdsat_Trail_TrailIndex_Type.trailindex_0 self}
      (! return' {result}) ]


  let rec unwrap'0 (self:Option'0.t_option (TrailIndex'0.t_trailindex)) (return'  (ret:TrailIndex'0.t_trailindex))= {[@expl:precondition] [%#span417] inv'9 self}
    {[@expl:precondition] [%#span416] self <> Option'0.C_None}
    any
    [ return' (result:TrailIndex'0.t_trailindex)-> {[%#span418] inv'10 result}
      {[%#span416] Option'0.C_Some result = self}
      (! return' {result}) ]


  let rec last'0 (self:ConflictHeap'0.t_conflictheap) (return'  (ret:Option'0.t_option (TrailIndex'0.t_trailindex)))= {[@expl:precondition] [%#span419] inv'8 self}
    any
    [ return' (result:Option'0.t_option (TrailIndex'0.t_trailindex))-> {[%#span420] match result with
        | Option'0.C_Some a -> contains'0 (shallow_model'6 self) a /\ set_max'0 (shallow_model'6 self) = a
        | Option'0.C_None -> shallow_model'6 self = (Fset.empty  : Fset.fset (TrailIndex'0.t_trailindex))
        end}
      (! return' {result}) ]


  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  predicate resolve'2 (self : borrowed (Trail'0.t_trail)) =
    [%#span366] self.final = self.current

  predicate resolve'1 (self : IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span421] forall i : int . 0 <= i /\ i < Seq.length (shallow_model'4 self)
     -> resolve'5 (Seq.get (shallow_model'4 self) i)

  let rec insert'0 (self:borrowed (ConflictHeap'0.t_conflictheap)) (e:TrailIndex'0.t_trailindex) (return'  (ret:bool))= {[@expl:precondition] [%#span422] inv'7 self}
    any
    [ return' (result:bool)-> {[%#span423] shallow_model'0 self.final = insert'1 (shallow_model'5 self) e}
      (! return' {result}) ]


  use seq.Seq

  predicate resolve'0 (self : borrowed (IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global))) =
    [%#span366] self.final = self.current

  function shallow_model'15 (self : borrowed (IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global))) : Seq.seq (TrailIndex'0.t_trailindex)

   =
    [%#span367] shallow_model'4 self.current

  predicate completed'0 (self : borrowed (IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global))) =
    [%#span424] resolve'0 self /\ shallow_model'15 self = (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex))

  let rec next'0 (self:borrowed (IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global))) (return'  (ret:Option'0.t_option (TrailIndex'0.t_trailindex)))= {[@expl:precondition] [%#span425] inv'5 self}
    any
    [ return' (result:Option'0.t_option (TrailIndex'0.t_trailindex))-> {[%#span426] inv'6 result}
      {[%#span369] match result with
        | Option'0.C_None -> completed'0 self
        | Option'0.C_Some v -> produces'0 self.current (Seq.singleton v) self.final
        end}
      (! return' {result}) ]


  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  predicate into_iter_post'0 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) (res : IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global))

   =
    [%#span427] shallow_model'1 self = shallow_model'4 res

  predicate into_iter_pre'0 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span428] true

  let rec into_iter'0 (self:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) (return'  (ret:IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global)))= {[@expl:precondition] [%#span429] inv'4 self}
    {[@expl:precondition] [%#span374] into_iter_pre'0 self}
    any
    [ return' (result:IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global))-> {[%#span430] inv'0 result}
      {[%#span374] into_iter_post'0 self result}
      (! return' {result}) ]


  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  let rec new'0 (_1:()) (return'  (ret:ConflictHeap'0.t_conflictheap))= any
    [ return' (result:ConflictHeap'0.t_conflictheap)-> {[%#span432] inv'1 result}
      {[%#span431] shallow_model'0 result = (Fset.empty  : Fset.fset (TrailIndex'0.t_trailindex))}
      (! return' {result}) ]


  let rec resolve_conflict (self:Solver'0.t_solver) (trail:borrowed (Trail'0.t_trail)) (conflict:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) (return'  (ret:()))= {[%#sconcrete65] forall ix : TrailIndex'0.t_trailindex . contains'2 trail.current ix
     -> (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix) = 0)
    = is_decision'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost trail.current)) (index_logic'0 trail.current ix)}
    {[%#sconcrete64] let conflict = abstract_justification'0 trail.current (shallow_model'1 conflict) in set_level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost trail.current)) conflict
    > 0
    /\ (forall m : Model'0.t_model . inv'3 m  -> satisfy_set'0 m conflict  -> false)}
    {[%#sconcrete63] forall i : int . 0 <= i /\ i < Seq.length (shallow_model'1 conflict)
     -> contains'2 trail.current (Seq.get (shallow_model'1 conflict) i)}
    {[%#sconcrete62] Seq.length (shallow_model'1 conflict) > 0}
    {[%#sconcrete61] invariant'0 trail.current}
    (! bb0
    [ bb0 = bb1
    | bb1 = bb2
    | bb2 = bb3
    | bb3 = s0
      [ s0 = new'0 {[%#sconcrete0] ()} (fun (_ret':ConflictHeap'0.t_conflictheap) ->  [ &heap <- _ret' ] s1)
      | s1 = bb4 ]

    | bb4 = s0 [ s0 =  [ &old_conflict <- [%#sconcrete1] Snapshot.new conflict ] s1 | s1 = bb5 ]
    | bb5 = s0 [ s0 =  [ &old_trail <- [%#sconcrete2] Snapshot.new trail ] s1 | s1 = bb6 ]
    | bb6 = s0
      [ s0 = into_iter'0 {conflict}
          (fun (_ret':IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->  [ &iter <- _ret' ] s1)
      | s1 = bb7 ]

    | bb7 = s0 [ s0 =  [ &iter_old <- [%#sconcrete3] Snapshot.new iter ] s1 | s1 = bb8 ]
    | bb8 = s0
      [ s0 =  [ &produced <- [%#sconcrete4] Snapshot.new (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) ] s1
      | s1 = bb9 ]

    | bb9 = bb10
    | bb10 = bb11
    | bb11 = bb12
    | bb12 = bb13
    | bb13 = bb14
    | bb14 = bb14
      [ bb14 = {[@expl:loop invariant] [%#sconcrete6] inv'1 heap}
        {[@expl:loop invariant] [%#sconcrete5] forall a : TrailIndex'0.t_trailindex . contains'0 (shallow_model'0 heap) a
        = contains'1 (Snapshot.inner produced) a}
        {[@expl:loop invariant] [%#sconcrete5] produces'0 (Snapshot.inner iter_old) (Snapshot.inner produced) iter}
        {[@expl:loop invariant] [%#sconcrete5] inv'0 iter}
        (! s0) [ s0 = bb15 ]
        [ bb15 = s0
          [ s0 = Borrow.borrow_mut <IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global)> {iter}
              (fun (_ret':borrowed (IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global))) ->
                 [ &_31 <- _ret' ]
                 [ &iter <- _31.final ]
                s1)
          | s1 = Borrow.borrow_final
              <IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global)>
              {_31.current}
              {Borrow.get_id _31}
              (fun (_ret':borrowed (IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global))) ->
                 [ &_30 <- _ret' ]
                 [ &_31 <- { _31 with current = _30.final ; } ]
                s2)
          | s2 = next'0 {_30} (fun (_ret':Option'0.t_option (TrailIndex'0.t_trailindex)) ->  [ &_29 <- _ret' ] s3)
          | s3 = bb16 ]

        | bb16 = s0
          [ s0 = -{resolve'0 _31}- s1
          | s1 = any
            [ br0 -> {_29 = Option'0.C_None } (! bb19)
            | br1 (a:TrailIndex'0.t_trailindex)-> {_29 = Option'0.C_Some a} (! bb18) ]
             ]

        | bb18 = bb20
        | bb20 = s0
          [ s0 = Option'0.some <TrailIndex'0.t_trailindex> {_29}
              (fun (r0'0:TrailIndex'0.t_trailindex) ->  [ &__creusot_proc_iter_elem <- r0'0 ] s1)
          | s1 =
            [ &_34 <- [%#sconcrete7] Snapshot.new (Seq.(++) (Snapshot.inner produced) (Seq.singleton __creusot_proc_iter_elem)) ]

            s2
          | s2 = bb21 ]

        | bb21 = s0
          [ s0 =  [ &produced <- _34 ]
            (any [ any_ (_any:Snapshot.snap_ty (Seq.seq (TrailIndex'0.t_trailindex)))-> (!  [ &_34 <- _any ] s1) ] )
          | s1 =  [ &a <- __creusot_proc_iter_elem ] s2
          | s2 = Borrow.borrow_mut <ConflictHeap'0.t_conflictheap> {heap}
              (fun (_ret':borrowed (ConflictHeap'0.t_conflictheap)) ->  [ &_38 <- _ret' ]  [ &heap <- _38.final ] s3)
          | s3 = -{inv'1 _38.final}- s4
          | s4 = insert'0 {_38} {a} (fun (_ret':bool) ->  [ &_37 <- _ret' ] s5)
          | s5 = bb22 ]

        | bb22 = bb14 ]
         ]

    | bb17 = s0 [ s0 = -{resolve'1 iter}- s1 | s1 = -{resolve'2 trail}- s2 | s2 = {[%#sconcrete5] false} any ]
    | bb19 = s0 [ s0 = -{resolve'1 iter}- s1 | s1 = bb23 ]
    | bb23 = s0
      [ s0 =
        [ &abs_cflct <- [%#sconcrete8] Snapshot.new (Conflict'0.C_Conflict (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost trail.current)) (ix_to_abs'0 trail.current (shallow_model'0 heap))) ]

        s1
      | s1 = bb24 ]

    | bb24 = s0
      [ s0 = last'0 {heap} (fun (_ret':Option'0.t_option (TrailIndex'0.t_trailindex)) ->  [ &_45 <- _ret' ] s1)
      | s1 = bb25 ]

    | bb25 = s0 [ s0 = unwrap'0 {_45} (fun (_ret':TrailIndex'0.t_trailindex) ->  [ &_44 <- _ret' ] s1) | s1 = bb26 ]
    | bb26 = s0
      [ s0 =  [ &max_ix <- _44 ] s1
      | s1 = level'0 {max_ix} (fun (_ret':usize) ->  [ &conflict_level <- _ret' ] s2)
      | s2 = bb27 ]

    | bb27 = s0
      [ s0 =  [ &_49 <- [%#sconcrete9] Snapshot.new (ix_to_abs_level'0 trail.current (shallow_model'0 heap)) ] s1
      | s1 = bb28 ]

    | bb28 = bb29
    | bb29 = bb30
    | bb30 = bb31
    | bb31 = bb32
    | bb32 = bb33
    | bb33 = bb33
      [ bb33 = {[@expl:loop invariant] [%#sconcrete13] invariant'1 (Snapshot.inner abs_cflct)
        /\ sound'0 (Snapshot.inner abs_cflct)
        /\ Cdsat_Theory_Conflict_Type.conflict_0 (Snapshot.inner abs_cflct)
        = Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost trail.current)
        /\ level'1 (Snapshot.inner abs_cflct) = UIntSize.to_int conflict_level}
        {[@expl:loop invariant] [%#sconcrete10] forall a : (Term'0.t_term, Value'0.t_value) . contains'3 (Cdsat_Theory_Conflict_Type.conflict_1 (Snapshot.inner abs_cflct)) a
         -> (exists ix : TrailIndex'0.t_trailindex . contains'0 (shallow_model'0 heap) ix
        /\ index_logic'0 trail.current ix = a)}
        {[@expl:loop invariant] [%#sconcrete10] forall ix : TrailIndex'0.t_trailindex . contains'0 (shallow_model'0 heap) ix
         -> contains'3 (Cdsat_Theory_Conflict_Type.conflict_1 (Snapshot.inner abs_cflct)) (index_logic'0 trail.current ix)}
        {[@expl:loop invariant] [%#sconcrete12] inv'1 heap}
        {[@expl:loop invariant] [%#sconcrete11] invariant'0 trail.current}
        {[@expl:loop invariant] [%#sconcrete10] forall ix : TrailIndex'0.t_trailindex . contains'0 (shallow_model'0 heap) ix
         -> contains'2 trail.current ix}
        (! s0) [ s0 = bb34 ]
        [ bb34 = s0
          [ s0 = Borrow.borrow_mut <ConflictHeap'0.t_conflictheap> {heap}
              (fun (_ret':borrowed (ConflictHeap'0.t_conflictheap)) ->  [ &_58 <- _ret' ]  [ &heap <- _58.final ] s1)
          | s1 = -{inv'1 _58.final}- s2
          | s2 = pop_last'0 {_58} (fun (_ret':Option'0.t_option (TrailIndex'0.t_trailindex)) ->  [ &_57 <- _ret' ] s3)
          | s3 = bb35 ]

        | bb35 = any
          [ br0 -> {_57 = Option'0.C_None } (! bb146)
          | br1 (a:TrailIndex'0.t_trailindex)-> {_57 = Option'0.C_Some a} (! bb36) ]

        | bb36 = bb37
        | bb37 = s0
          [ s0 = Option'0.some <TrailIndex'0.t_trailindex> {_57}
              (fun (r0'0:TrailIndex'0.t_trailindex) ->  [ &ix <- r0'0 ] s1)
          | s1 = last'0 {heap} (fun (_ret':Option'0.t_option (TrailIndex'0.t_trailindex)) ->  [ &_62 <- _ret' ] s2)
          | s2 = bb38 ]

        | bb38 = any
          [ br0 -> {_62 = Option'0.C_None } (! bb41)
          | br1 (a:TrailIndex'0.t_trailindex)-> {_62 = Option'0.C_Some a} (! bb40) ]

        | bb40 = bb42
        | bb42 = s0
          [ s0 = Option'0.some <TrailIndex'0.t_trailindex> {_62}
              (fun (r0'0:TrailIndex'0.t_trailindex) ->  [ &ix2 <- r0'0 ] s1)
          | s1 =  [ &ix21 <- ix2 ] s2
          | s2 = {[@expl:assertion] [%#sconcrete14] forall i : TrailIndex'0.t_trailindex . contains'0 (shallow_model'0 heap) i
             -> le_log'0 i ix21}
            s3
          | s3 = bb43 ]

        | bb43 = s0
          [ s0 = {[@expl:assertion] [%#sconcrete15] forall i : TrailIndex'0.t_trailindex . contains'0 (shallow_model'0 heap) i
             -> level_log'0 i <= level_log'0 ix21}
            s1
          | s1 = bb44 ]

        | bb44 = s0 [ s0 = level'0 {ix21} (fun (_ret':usize) ->  [ &rem_level <- _ret' ] s1) | s1 = bb45 ]
        | bb45 = bb46
        | bb41 = s0 [ s0 =  [ &rem_level <- [%#sconcrete16] (0 : usize) ] s1 | s1 = bb46 ]
        | bb46 = s0
          [ s0 = {[@expl:assertion] [%#sconcrete17] forall i : TrailIndex'0.t_trailindex . contains'0 (shallow_model'0 heap) i
             -> le_log'0 i ix}
            s1
          | s1 = bb47 ]

        | bb47 = s0
          [ s0 = {[@expl:assertion] [%#sconcrete18] forall i : TrailIndex'0.t_trailindex . contains'0 (shallow_model'0 heap) i
             -> level_log'0 i <= level_log'0 ix}
            s1
          | s1 = bb48 ]

        | bb48 = s0
          [ s0 = {[@expl:assertion] [%#sconcrete19] level_log'0 ix > 0} s1
          | s1 = {[@expl:assertion] [%#sconcrete20] level_log'0 (set_max'0 (shallow_model'0 heap))
            = UIntSize.to_int rem_level
            \/ UIntSize.to_int rem_level = 0}
            s2
          | s2 = bb49 ]

        | bb49 = s0
          [ s0 = {[@expl:assertion] [%#sconcrete21] UIntSize.to_int rem_level <= level_log'0 ix} s1
          | s1 = {[@expl:assertion] [%#sconcrete22] forall i : TrailIndex'0.t_trailindex . contains'0 (shallow_model'0 heap) i
             -> level_log'0 i <= UIntSize.to_int rem_level}
            s2
          | s2 = bb50 ]

        | bb50 = s0
          [ s0 = {[@expl:assertion] [%#sconcrete23] contains'2 trail.current ix} s1
          | s1 = index'0 {trail.current} {ix} (fun (_ret':Assignment'0.t_assignment) ->  [ &_88 <- _ret' ] s2)
          | s2 = bb51 ]

        | bb51 = s0 [ s0 = clone'0 {_88} (fun (_ret':Assignment'0.t_assignment) ->  [ &a1 <- _ret' ] s1) | s1 = bb52 ]
        | bb52 = s0 [ s0 = is_bool'0 {a1} (fun (_ret':bool) ->  [ &_92 <- _ret' ] s1) | s1 = bb53 ]
        | bb53 = any [ br0 -> {_92 = false} (! bb70) | br1 -> {_92} (! bb54) ]
        | bb54 = s0 [ s0 = level'0 {ix} (fun (_ret':usize) ->  [ &_95 <- _ret' ] s1) | s1 = bb55 ]
        | bb55 = s0
          [ s0 = UIntSize.gt {_95} {rem_level}
              (fun (_ret':bool) ->  [ &_94 <- _ret' ] (any [ any_ (_any:usize)-> (!  [ &_95 <- _any ] s1) ] ))
          | s1 = any [ br0 -> {_94 = false} (! bb69) | br1 -> {_94} (! bb56) ]  ]

        | bb69 = bb71
        | bb70 = bb71
        | bb71 = s0 [ s0 = is_first_order'0 {a1} (fun (_ret':bool) ->  [ &_133 <- _ret' ] s1) | s1 = bb72 ]
        | bb72 = any [ br0 -> {_133 = false} (! bb79) | br1 -> {_133} (! bb73) ]
        | bb73 = s0 [ s0 = is_decision'0 {a1} (fun (_ret':bool) ->  [ &_135 <- _ret' ] s1) | s1 = bb74 ]
        | bb74 = any [ br0 -> {_135 = false} (! bb78) | br1 -> {_135} (! bb75) ]
        | bb78 = bb80
        | bb79 = bb80
        | bb80 = s0
          [ s0 = {[@expl:assertion] [%#sconcrete24] level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost trail.current)) (index_logic'0 trail.current ix)
            > 0}
            s1
          | s1 =  [ &_145 <- [%#sconcrete25] Snapshot.new () ] s2
          | s2 = bb81 ]

        | bb81 = s0
          [ s0 = {[@expl:assertion] [%#sconcrete26] not is_input'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost trail.current)) (index_logic'0 trail.current ix)}
            s1
          | s1 = {[@expl:assertion] [%#sconcrete27] not is_decision'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost trail.current)) (index_logic'0 trail.current ix)}
            s2
          | s2 = {[@expl:assertion] [%#sconcrete28] is_justified'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost trail.current)) (index_logic'0 trail.current ix)}
            s3
          | s3 =
            [ &_153 <- [%#sconcrete29] Snapshot.new (justified_is_bool'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost trail.current)) (index_logic'0 trail.current ix)) ]

            s4
          | s4 = bb82 ]

        | bb82 = s0
          [ s0 = justification'0 {trail.current} {ix}
              (fun (_ret':Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->  [ &just1 <- _ret' ] s1)
          | s1 = bb83 ]

        | bb83 = s0 [ s0 =  [ &just_ghost <- [%#sconcrete30] Snapshot.new just1 ] s1 | s1 = bb84 ]
        | bb84 = s0
          [ s0 =
            [ &abs_just <- [%#sconcrete31] Snapshot.new (abstract_justification'0 trail.current (shallow_model'1 just1)) ]

            s1
          | s1 = bb85 ]

        | bb85 = s0
          [ s0 = deref'0 {just1} (fun (_ret':slice (TrailIndex'0.t_trailindex)) ->  [ &_166 <- _ret' ] s1) | s1 = bb86 ]

        | bb86 = s0
          [ s0 = iter'0 {_166} (fun (_ret':Iter'0.t_iter (TrailIndex'0.t_trailindex)) ->  [ &_164 <- _ret' ] s1)
          | s1 = bb87 ]

        | bb87 = s0
          [ s0 = into_iter'1 {_164} (fun (_ret':Iter'0.t_iter (TrailIndex'0.t_trailindex)) ->  [ &iter1 <- _ret' ] s1)
          | s1 = bb88 ]

        | bb88 = s0 [ s0 =  [ &iter_old1 <- [%#sconcrete32] Snapshot.new iter1 ] s1 | s1 = bb89 ]
        | bb89 = s0
          [ s0 =  [ &produced1 <- [%#sconcrete33] Snapshot.new (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) ] s1
          | s1 = bb90 ]

        | bb90 = bb91
        | bb91 = bb91
          [ bb91 = {[@expl:loop invariant] [%#sconcrete34] forall i : int . 0 <= i
            /\ i < Seq.length (Snapshot.inner produced1)
             -> not is_bool'1 (let (_, a) = index_logic'0 trail.current (index_logic'1 produced1 i) in a)
             -> is_decision'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost trail.current)) (index_logic'0 trail.current (index_logic'1 produced1 i))
             -> level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost trail.current)) (index_logic'0 trail.current (index_logic'1 produced1 i))
            < level'1 (Snapshot.inner abs_cflct)}
            {[@expl:loop invariant] [%#sconcrete34] forall i : int . 0 <= i /\ i < Seq.length (Snapshot.inner produced1)
             -> contains'3 (Snapshot.inner abs_just) (index_logic'0 trail.current (index_logic'1 produced1 i))}
            {[@expl:loop invariant] [%#sconcrete34] produces'1 (Snapshot.inner iter_old1) (Snapshot.inner produced1) iter1}
            {[@expl:loop invariant] [%#sconcrete34] inv'2 iter1}
            (! s0) [ s0 = bb92 ]
            [ bb92 = s0
              [ s0 = Borrow.borrow_mut <Iter'0.t_iter (TrailIndex'0.t_trailindex)> {iter1}
                  (fun (_ret':borrowed (Iter'0.t_iter (TrailIndex'0.t_trailindex))) ->
                     [ &_178 <- _ret' ]
                     [ &iter1 <- _178.final ]
                    s1)
              | s1 = Borrow.borrow_final <Iter'0.t_iter (TrailIndex'0.t_trailindex)> {_178.current} {Borrow.get_id _178}
                  (fun (_ret':borrowed (Iter'0.t_iter (TrailIndex'0.t_trailindex))) ->
                     [ &_177 <- _ret' ]
                     [ &_178 <- { _178 with current = _177.final ; } ]
                    s2)
              | s2 = next'1 {_177} (fun (_ret':Option'0.t_option (TrailIndex'0.t_trailindex)) ->  [ &_176 <- _ret' ] s3)
              | s3 = bb93 ]

            | bb93 = s0
              [ s0 = -{resolve'3 _178}- s1
              | s1 = any
                [ br0 -> {_176 = Option'0.C_None } (! bb96)
                | br1 (a:TrailIndex'0.t_trailindex)-> {_176 = Option'0.C_Some a} (! bb95) ]
                 ]

            | bb95 = bb97
            | bb97 = s0
              [ s0 = Option'0.some <TrailIndex'0.t_trailindex> {_176}
                  (fun (r0'0:TrailIndex'0.t_trailindex) ->  [ &__creusot_proc_iter_elem1 <- r0'0 ] s1)
              | s1 =
                [ &_181 <- [%#sconcrete35] Snapshot.new (Seq.(++) (Snapshot.inner produced1) (Seq.singleton __creusot_proc_iter_elem1)) ]

                s2
              | s2 = bb98 ]

            | bb98 = s0
              [ s0 =  [ &produced1 <- _181 ]
                (any
                [ any_ (_any:Snapshot.snap_ty (Seq.seq (TrailIndex'0.t_trailindex)))-> (!  [ &_181 <- _any ] s1) ]
                )
              | s1 =  [ &jix <- __creusot_proc_iter_elem1 ] s2
              | s2 = {[@expl:assertion] [%#sconcrete36] contains'1 (shallow_model'2 just_ghost) jix} s3
              | s3 = level'0 {jix} (fun (_ret':usize) ->  [ &_188 <- _ret' ] s4)
              | s4 = bb99 ]

            | bb99 = s0 [ s0 = level'0 {ix} (fun (_ret':usize) ->  [ &_190 <- _ret' ] s1) | s1 = bb100 ]
            | bb100 = s0
              [ s0 = UIntSize.le {_188} {_190}
                  (fun (_ret':bool) ->
                     [ &_187 <- _ret' ]
                    (any
                    [ any_ (_any:usize)-> (!  [ &_188 <- _any ]
                      (any [ any_ (_any:usize)-> (!  [ &_190 <- _any ] s1) ] )) ]
                    ))
              | s1 = any [ br0 -> {_187 = false} (! bb102) | br1 -> {_187} (! bb101) ]  ]

            | bb101 = s0
              [ s0 = index'0 {trail.current} {jix} (fun (_ret':Assignment'0.t_assignment) ->  [ &_194 <- _ret' ] s1)
              | s1 = bb103 ]

            | bb103 = s0
              [ s0 =  [ &j <- _194 ] s1
              | s1 = is_first_order'0 {j} (fun (_ret':bool) ->  [ &_197 <- _ret' ] s2)
              | s2 = bb104 ]

            | bb104 = any [ br0 -> {_197 = false} (! bb121) | br1 -> {_197} (! bb105) ]
            | bb105 = s0 [ s0 = is_decision'0 {j} (fun (_ret':bool) ->  [ &_199 <- _ret' ] s1) | s1 = bb106 ]
            | bb106 = any [ br0 -> {_199 = false} (! bb120) | br1 -> {_199} (! bb107) ]
            | bb107 = s0 [ s0 = level'0 {jix} (fun (_ret':usize) ->  [ &_202 <- _ret' ] s1) | s1 = bb108 ]
            | bb108 = s0 [ s0 = level'0 {ix} (fun (_ret':usize) ->  [ &_204 <- _ret' ] s1) | s1 = bb109 ]
            | bb109 = s0
              [ s0 = UIntSize.eq {_202} {_204}
                  (fun (_ret':bool) ->
                     [ &_201 <- _ret' ]
                    (any
                    [ any_ (_any:usize)-> (!  [ &_202 <- _any ]
                      (any [ any_ (_any:usize)-> (!  [ &_204 <- _any ] s1) ] )) ]
                    ))
              | s1 = any [ br0 -> {_201 = false} (! bb115) | br1 -> {_201} (! bb110) ]  ]

            | bb115 = s0 [ s0 = level'0 {jix} (fun (_ret':usize) ->  [ &_219 <- _ret' ] s1) | s1 = bb116 ]
            | bb116 = s0 [ s0 = level'0 {ix} (fun (_ret':usize) ->  [ &_221 <- _ret' ] s1) | s1 = bb117 ]
            | bb117 = s0
              [ s0 = UIntSize.lt {_219} {_221}
                  (fun (_ret':bool) ->
                     [ &_218 <- _ret' ]
                    (any
                    [ any_ (_any:usize)-> (!  [ &_219 <- _any ]
                      (any [ any_ (_any:usize)-> (!  [ &_221 <- _any ] s1) ] )) ]
                    ))
              | s1 = any [ br0 -> {_218 = false} (! bb119) | br1 -> {_218} (! bb118) ]  ]

            | bb118 = s0
              [ s0 = {[@expl:assertion] [%#sconcrete37] level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost trail.current)) (index_logic'0 trail.current jix)
                < level'1 (Snapshot.inner abs_cflct)}
                s1
              | s1 = bb123 ]

            | bb120 = bb122
            | bb121 = bb122
            | bb122 = bb123
            | bb123 = bb91 ]
             ]

        | bb96 = s0
          [ s0 =  [ &_227 <- [%#sconcrete38] Snapshot.new (resolvef'0 (Snapshot.inner abs_cflct) (term_value'0 a1)) ] s1
          | s1 = bb124 ]

        | bb124 = s0
          [ s0 =  [ &abs_cflct <- _227 ]
            (any [ any_ (_any:Snapshot.snap_ty (Conflict'0.t_conflict))-> (!  [ &_227 <- _any ] s1) ] )
          | s1 =  [ &old_heap <- [%#sconcrete39] Snapshot.new heap ] s2
          | s2 = bb125 ]

        | bb125 = s0
          [ s0 = into_iter'0 {just1}
              (fun (_ret':IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->
                 [ &iter2 <- _ret' ]
                s1)
          | s1 = bb126 ]

        | bb126 = s0 [ s0 =  [ &iter_old2 <- [%#sconcrete40] Snapshot.new iter2 ] s1 | s1 = bb127 ]
        | bb127 = s0
          [ s0 =  [ &produced2 <- [%#sconcrete41] Snapshot.new (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) ] s1
          | s1 = bb128 ]

        | bb128 = bb129
        | bb129 = bb130
        | bb130 = bb131
        | bb131 = bb132
        | bb132 = bb133
        | bb133 = bb134
        | bb134 = bb134
          [ bb134 = {[@expl:loop invariant] [%#sconcrete43] inv'1 heap}
            {[@expl:loop invariant] [%#sconcrete42] forall a : TrailIndex'0.t_trailindex . contains'1 (Snapshot.inner produced2) a
             -> contains'0 (shallow_model'0 heap) a}
            {[@expl:loop invariant] [%#sconcrete42] forall a : TrailIndex'0.t_trailindex . contains'1 (Snapshot.inner produced2) a
             -> contains'1 (shallow_model'2 just_ghost) a}
            {[@expl:loop invariant] [%#sconcrete42] forall a : TrailIndex'0.t_trailindex . contains'0 (shallow_model'0 heap) a
            = (contains'0 (shallow_model'3 old_heap) a \/ contains'1 (Snapshot.inner produced2) a)}
            {[@expl:loop invariant] [%#sconcrete42] produces'0 (Snapshot.inner iter_old2) (Snapshot.inner produced2) iter2}
            {[@expl:loop invariant] [%#sconcrete42] inv'0 iter2}
            (! s0) [ s0 = bb135 ]
            [ bb135 = s0
              [ s0 = Borrow.borrow_mut <IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global)> {iter2}
                  (fun (_ret':borrowed (IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global))) ->
                     [ &_245 <- _ret' ]
                     [ &iter2 <- _245.final ]
                    s1)
              | s1 = Borrow.borrow_final
                  <IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global)>
                  {_245.current}
                  {Borrow.get_id _245}
                  (fun (_ret':borrowed (IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global))) ->
                     [ &_244 <- _ret' ]
                     [ &_245 <- { _245 with current = _244.final ; } ]
                    s2)
              | s2 = next'0 {_244} (fun (_ret':Option'0.t_option (TrailIndex'0.t_trailindex)) ->  [ &_243 <- _ret' ] s3)
              | s3 = bb136 ]

            | bb136 = s0
              [ s0 = -{resolve'0 _245}- s1
              | s1 = any
                [ br0 -> {_243 = Option'0.C_None } (! bb139)
                | br1 (a:TrailIndex'0.t_trailindex)-> {_243 = Option'0.C_Some a} (! bb138) ]
                 ]

            | bb138 = bb140
            | bb140 = s0
              [ s0 = Option'0.some <TrailIndex'0.t_trailindex> {_243}
                  (fun (r0'0:TrailIndex'0.t_trailindex) ->  [ &__creusot_proc_iter_elem2 <- r0'0 ] s1)
              | s1 =
                [ &_248 <- [%#sconcrete44] Snapshot.new (Seq.(++) (Snapshot.inner produced2) (Seq.singleton __creusot_proc_iter_elem2)) ]

                s2
              | s2 = bb141 ]

            | bb141 = s0
              [ s0 =  [ &produced2 <- _248 ]
                (any
                [ any_ (_any:Snapshot.snap_ty (Seq.seq (TrailIndex'0.t_trailindex)))-> (!  [ &_248 <- _any ] s1) ]
                )
              | s1 =  [ &a2 <- __creusot_proc_iter_elem2 ] s2
              | s2 = Borrow.borrow_mut <ConflictHeap'0.t_conflictheap> {heap}
                  (fun (_ret':borrowed (ConflictHeap'0.t_conflictheap)) ->
                     [ &_252 <- _ret' ]
                     [ &heap <- _252.final ]
                    s3)
              | s3 = -{inv'1 _252.final}- s4
              | s4 = insert'0 {_252} {a2} (fun (_ret':bool) ->  [ &_251 <- _ret' ] s5)
              | s5 = bb142 ]

            | bb142 = bb134 ]
             ]

        | bb139 = s0 [ s0 = -{resolve'1 iter2}- s1 | s1 = bb143 ]
        | bb143 = bb144
        | bb144 = bb145
        | bb145 = bb33 ]
         ]

    | bb146 = s0 [ s0 = -{resolve'2 trail}- s1 | s1 = bb147 ]
    | bb147 = bb153
    | bb39 = s0 [ s0 = -{resolve'2 trail}- s1 | s1 = {[%#sconcrete45] false} any ]
    | bb56 = s0
      [ s0 = {[@expl:assertion] [%#sconcrete46] level_log'0 ix
        = level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost trail.current)) (index_logic'0 trail.current ix)}
        s1
      | s1 =
        [ &_101 <- [%#sconcrete47] Snapshot.new (backjump2'0 (Snapshot.inner abs_cflct) (index_logic'0 trail.current ix)) ]

        s2
      | s2 = bb57 ]

    | bb57 = s0 [ s0 =  [ &oheap <- [%#sconcrete48] Snapshot.new heap ] s1 | s1 = bb58 ]
    | bb58 = s0
      [ s0 = into_vec'0 {heap}
          (fun (_ret':Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->  [ &just <- _ret' ] s1)
      | s1 = bb59 ]

    | bb59 = s0
      [ s0 =  [ &old' <- [%#sconcrete49] Snapshot.new (abstract_justification'0 trail.current (shallow_model'1 just)) ]
        s1
      | s1 = bb60 ]

    | bb60 = s0
      [ s0 =
        [ &_109 <- [%#sconcrete50] Snapshot.new (set_remove'0 (Snapshot.inner old') (index_logic'0 trail.current ix)) ]

        s1
      | s1 = bb61 ]

    | bb61 = s0
      [ s0 = {[@expl:assertion] [%#sconcrete51] forall a : (Term'0.t_term, Value'0.t_value) . contains'3 (ix_to_abs'0 trail.current (shallow_model'3 oheap)) a
         -> contains'3 (Snapshot.inner old') a}
        s1
      | s1 = {[@expl:assertion] [%#sconcrete52] ext_eq'0 (Snapshot.inner old') (remove'0 (Cdsat_Theory_Conflict_Type.conflict_1 (Snapshot.inner abs_cflct)) (index_logic'0 trail.current ix))}
        s2
      | s2 =  [ &old_trail1 <- [%#sconcrete53] Snapshot.new trail.current ] s3
      | s3 = bb62 ]

    | bb62 = s0
      [ s0 = Borrow.borrow_mut <Trail'0.t_trail> {trail.current}
          (fun (_ret':borrowed (Trail'0.t_trail)) ->
             [ &_118 <- _ret' ]
             [ &trail <- { trail with current = _118.final ; } ]
            s1)
      | s1 = restrict'0 {_118} {rem_level} (fun (_ret':()) ->  [ &_117 <- _ret' ] s2)
      | s2 = bb63 ]

    | bb63 = s0
      [ s0 =
        [ &_120 <- [%#sconcrete54] Snapshot.new (abs_just_equiv'0 trail.current (Snapshot.inner old_trail1) (shallow_model'1 just)) ]

        s1
      | s1 = bb64 ]

    | bb64 = s0
      [ s0 =
        [ &_122 <- [%#sconcrete55] Snapshot.new (set_remove'0 (Snapshot.inner old') (index_logic'0 trail.current ix)) ]

        s1
      | s1 = bb65 ]

    | bb65 = s0
      [ s0 =
        [ &_124 <- [%#sconcrete56] Snapshot.new (learn_justified'0 (Snapshot.inner abs_cflct) (index_logic'0 (Snapshot.inner old_trail1) ix)) ]

        s1
      | s1 = bb66 ]

    | bb66 = s0
      [ s0 = Borrow.borrow_final <Trail'0.t_trail> {trail.current} {Borrow.get_id trail}
          (fun (_ret':borrowed (Trail'0.t_trail)) ->
             [ &_127 <- _ret' ]
             [ &trail <- { trail with current = _127.final ; } ]
            s1)
      | s1 = Assignment'0.t_assignment {a1}
          (fun (rterm'0:Term'1.t_term) (rval'0:Value'1.t_value) (rreason'0:Reason'0.t_reason) (rlevel'0:usize) ->
            negate'0 {rval'0} (fun (_ret':Value'1.t_value) ->  [ &_130 <- _ret' ] s2))
      | s2 = bb67 ]

    | bb67 = s0
      [ s0 = Assignment'0.t_assignment {a1}
          (fun (rterm'0:Term'1.t_term) (rval'0:Value'1.t_value) (rreason'0:Reason'0.t_reason) (rlevel'0:usize) ->
            add_justified'0 {_127} {just} {rterm'0} {_130} (fun (_ret':()) ->  [ &_126 <- _ret' ] s1))
      | s1 = bb68 ]

    | bb68 = s0 [ s0 = -{resolve'2 trail}- s1 | s1 = bb149 ]
    | bb149 = bb150
    | bb75 = s0
      [ s0 = Borrow.borrow_final <Trail'0.t_trail> {trail.current} {Borrow.get_id trail}
          (fun (_ret':borrowed (Trail'0.t_trail)) ->
             [ &_139 <- _ret' ]
             [ &trail <- { trail with current = _139.final ; } ]
            s1)
      | s1 = level'0 {ix} (fun (_ret':usize) ->  [ &_141 <- _ret' ] s2)
      | s2 = bb76 ]

    | bb76 = s0
      [ s0 = UIntSize.sub {_141} {[%#sconcrete57] (1 : usize)}
          (fun (_ret':usize) ->  [ &_140 <- _ret' ] (any [ any_ (_any:usize)-> (!  [ &_141 <- _any ] s1) ] ))
      | s1 = restrict'0 {_139} {_140} (fun (_ret':()) ->  [ &_138 <- _ret' ] s2)
      | s2 = bb77 ]

    | bb77 = s0 [ s0 = -{resolve'2 trail}- s1 | s1 = bb150 ]
    | bb94 = s0 [ s0 = -{resolve'2 trail}- s1 | s1 = -{resolve'4 just1}- s2 | s2 = {[%#sconcrete34] false} any ]
    | bb110 = s0
      [ s0 = -{resolve'4 just1}- s1
      | s1 = Borrow.borrow_mut <Trail'0.t_trail> {trail.current}
          (fun (_ret':borrowed (Trail'0.t_trail)) ->
             [ &_208 <- _ret' ]
             [ &trail <- { trail with current = _208.final ; } ]
            s2)
      | s2 = level'0 {ix} (fun (_ret':usize) ->  [ &_210 <- _ret' ] s3)
      | s3 = bb111 ]

    | bb111 = s0
      [ s0 = UIntSize.sub {_210} {[%#sconcrete58] (1 : usize)}
          (fun (_ret':usize) ->  [ &_209 <- _ret' ] (any [ any_ (_any:usize)-> (!  [ &_210 <- _any ] s1) ] ))
      | s1 = restrict'0 {_208} {_209} (fun (_ret':()) ->  [ &_207 <- _ret' ] s2)
      | s2 = bb112 ]

    | bb112 = s0
      [ s0 = Borrow.borrow_final <Trail'0.t_trail> {trail.current} {Borrow.get_id trail}
          (fun (_ret':borrowed (Trail'0.t_trail)) ->
             [ &_213 <- _ret' ]
             [ &trail <- { trail with current = _213.final ; } ]
            s1)
      | s1 = Assignment'0.t_assignment {a1}
          (fun (rterm'0:Term'1.t_term) (rval'0:Value'1.t_value) (rreason'0:Reason'0.t_reason) (rlevel'0:usize) ->
            negate'0 {rval'0} (fun (_ret':Value'1.t_value) ->  [ &_215 <- _ret' ] s2))
      | s2 = bb113 ]

    | bb113 = s0
      [ s0 = Assignment'0.t_assignment {a1}
          (fun (rterm'0:Term'1.t_term) (rval'0:Value'1.t_value) (rreason'0:Reason'0.t_reason) (rlevel'0:usize) ->
            add_decision'0 {_213} {rterm'0} {_215} (fun (_ret':()) ->  [ &_212 <- _ret' ] s1))
      | s1 = bb114 ]

    | bb114 = s0 [ s0 = -{resolve'2 trail}- s1 | s1 = bb148 ]
    | bb148 = bb150
    | bb150 = bb151
    | bb151 = bb152
    | bb152 = bb153
    | bb153 = return' {_0}
    | bb119 = s0 [ s0 = -{resolve'2 trail}- s1 | s1 = -{resolve'4 just1}- s2 | s2 = {[%#sconcrete59] false} any ]
    | bb102 = s0 [ s0 = -{resolve'2 trail}- s1 | s1 = -{resolve'4 just1}- s2 | s2 = {[%#sconcrete60] false} any ]
    | bb137 = s0 [ s0 = -{resolve'1 iter2}- s1 | s1 = -{resolve'2 trail}- s2 | s2 = {[%#sconcrete42] false} any ]  ]
    )
    [ & _0 : () = any_l ()
    | & trail : borrowed (Trail'0.t_trail) = trail
    | & conflict : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) = conflict
    | & heap : ConflictHeap'0.t_conflictheap = any_l ()
    | & old_conflict : Snapshot.snap_ty (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) = any_l ()
    | & old_trail : Snapshot.snap_ty (borrowed (Trail'0.t_trail)) = any_l ()
    | & iter : IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global) = any_l ()
    | & iter_old : Snapshot.snap_ty (IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global)) = any_l ()
    | & produced : Snapshot.snap_ty (Seq.seq (TrailIndex'0.t_trailindex)) = any_l ()
    | & _29 : Option'0.t_option (TrailIndex'0.t_trailindex) = any_l ()
    | & _30 : borrowed (IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global)) = any_l ()
    | & _31 : borrowed (IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global)) = any_l ()
    | & __creusot_proc_iter_elem : TrailIndex'0.t_trailindex = any_l ()
    | & _34 : Snapshot.snap_ty (Seq.seq (TrailIndex'0.t_trailindex)) = any_l ()
    | & a : TrailIndex'0.t_trailindex = any_l ()
    | & _37 : bool = any_l ()
    | & _38 : borrowed (ConflictHeap'0.t_conflictheap) = any_l ()
    | & abs_cflct : Snapshot.snap_ty (Conflict'0.t_conflict) = any_l ()
    | & max_ix : TrailIndex'0.t_trailindex = any_l ()
    | & _44 : TrailIndex'0.t_trailindex = any_l ()
    | & _45 : Option'0.t_option (TrailIndex'0.t_trailindex) = any_l ()
    | & conflict_level : usize = any_l ()
    | & _49 : Snapshot.snap_ty () = any_l ()
    | & _57 : Option'0.t_option (TrailIndex'0.t_trailindex) = any_l ()
    | & _58 : borrowed (ConflictHeap'0.t_conflictheap) = any_l ()
    | & ix : TrailIndex'0.t_trailindex = any_l ()
    | & rem_level : usize = any_l ()
    | & _62 : Option'0.t_option (TrailIndex'0.t_trailindex) = any_l ()
    | & ix2 : TrailIndex'0.t_trailindex = any_l ()
    | & ix21 : TrailIndex'0.t_trailindex = any_l ()
    | & a1 : Assignment'0.t_assignment = any_l ()
    | & _88 : Assignment'0.t_assignment = any_l ()
    | & _92 : bool = any_l ()
    | & _94 : bool = any_l ()
    | & _95 : usize = any_l ()
    | & _101 : Snapshot.snap_ty (Normal'0.t_normal) = any_l ()
    | & oheap : Snapshot.snap_ty (ConflictHeap'0.t_conflictheap) = any_l ()
    | & just : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) = any_l ()
    | & old' : Snapshot.snap_ty (Fset.fset (Term'0.t_term, Value'0.t_value)) = any_l ()
    | & _109 : Snapshot.snap_ty () = any_l ()
    | & old_trail1 : Snapshot.snap_ty (Trail'0.t_trail) = any_l ()
    | & _117 : () = any_l ()
    | & _118 : borrowed (Trail'0.t_trail) = any_l ()
    | & _120 : Snapshot.snap_ty () = any_l ()
    | & _122 : Snapshot.snap_ty () = any_l ()
    | & _124 : Snapshot.snap_ty () = any_l ()
    | & _126 : () = any_l ()
    | & _127 : borrowed (Trail'0.t_trail) = any_l ()
    | & _130 : Value'1.t_value = any_l ()
    | & _133 : bool = any_l ()
    | & _135 : bool = any_l ()
    | & _138 : () = any_l ()
    | & _139 : borrowed (Trail'0.t_trail) = any_l ()
    | & _140 : usize = any_l ()
    | & _141 : usize = any_l ()
    | & _145 : Snapshot.snap_ty () = any_l ()
    | & _153 : Snapshot.snap_ty () = any_l ()
    | & just1 : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) = any_l ()
    | & just_ghost : Snapshot.snap_ty (Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) = any_l ()
    | & abs_just : Snapshot.snap_ty (Fset.fset (Term'0.t_term, Value'0.t_value)) = any_l ()
    | & iter1 : Iter'0.t_iter (TrailIndex'0.t_trailindex) = any_l ()
    | & _164 : Iter'0.t_iter (TrailIndex'0.t_trailindex) = any_l ()
    | & _166 : slice (TrailIndex'0.t_trailindex) = any_l ()
    | & iter_old1 : Snapshot.snap_ty (Iter'0.t_iter (TrailIndex'0.t_trailindex)) = any_l ()
    | & produced1 : Snapshot.snap_ty (Seq.seq (TrailIndex'0.t_trailindex)) = any_l ()
    | & _176 : Option'0.t_option (TrailIndex'0.t_trailindex) = any_l ()
    | & _177 : borrowed (Iter'0.t_iter (TrailIndex'0.t_trailindex)) = any_l ()
    | & _178 : borrowed (Iter'0.t_iter (TrailIndex'0.t_trailindex)) = any_l ()
    | & __creusot_proc_iter_elem1 : TrailIndex'0.t_trailindex = any_l ()
    | & _181 : Snapshot.snap_ty (Seq.seq (TrailIndex'0.t_trailindex)) = any_l ()
    | & jix : TrailIndex'0.t_trailindex = any_l ()
    | & _187 : bool = any_l ()
    | & _188 : usize = any_l ()
    | & _190 : usize = any_l ()
    | & j : Assignment'0.t_assignment = any_l ()
    | & _194 : Assignment'0.t_assignment = any_l ()
    | & _197 : bool = any_l ()
    | & _199 : bool = any_l ()
    | & _201 : bool = any_l ()
    | & _202 : usize = any_l ()
    | & _204 : usize = any_l ()
    | & _207 : () = any_l ()
    | & _208 : borrowed (Trail'0.t_trail) = any_l ()
    | & _209 : usize = any_l ()
    | & _210 : usize = any_l ()
    | & _212 : () = any_l ()
    | & _213 : borrowed (Trail'0.t_trail) = any_l ()
    | & _215 : Value'1.t_value = any_l ()
    | & _218 : bool = any_l ()
    | & _219 : usize = any_l ()
    | & _221 : usize = any_l ()
    | & _227 : Snapshot.snap_ty (Conflict'0.t_conflict) = any_l ()
    | & old_heap : Snapshot.snap_ty (ConflictHeap'0.t_conflictheap) = any_l ()
    | & iter2 : IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global) = any_l ()
    | & iter_old2 : Snapshot.snap_ty (IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global)) = any_l ()
    | & produced2 : Snapshot.snap_ty (Seq.seq (TrailIndex'0.t_trailindex)) = any_l ()
    | & _243 : Option'0.t_option (TrailIndex'0.t_trailindex) = any_l ()
    | & _244 : borrowed (IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global)) = any_l ()
    | & _245 : borrowed (IntoIter'0.t_intoiter (TrailIndex'0.t_trailindex) (Global'0.t_global)) = any_l ()
    | & __creusot_proc_iter_elem2 : TrailIndex'0.t_trailindex = any_l ()
    | & _248 : Snapshot.snap_ty (Seq.seq (TrailIndex'0.t_trailindex)) = any_l ()
    | & a2 : TrailIndex'0.t_trailindex = any_l ()
    | & _251 : bool = any_l ()
    | & _252 : borrowed (ConflictHeap'0.t_conflictheap) = any_l () ]

    [ return' (result:())-> {[@expl:postcondition] [%#sconcrete67] impls'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost trail.current)) (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost trail.final))}
      {[@expl:postcondition] [%#sconcrete66] invariant'0 trail.final}
      {[@expl:postcondition] [%#sconcrete61] invariant'0 trail.final}
      (! return' {result}) ]

end
module Cdsat_Concrete_Impl0_Solver
  let%span sconcrete0 = "/Users/xavier/Code/cdsat/src/concrete.rs" 48 35 48 53

  let%span sconcrete1 = "/Users/xavier/Code/cdsat/src/concrete.rs" 50 8 50 57

  let%span sconcrete2 = "/Users/xavier/Code/cdsat/src/concrete.rs" 51 20 51 37

  let%span sconcrete3 = "/Users/xavier/Code/cdsat/src/concrete.rs" 52 20 55 9

  let%span sconcrete4 = "/Users/xavier/Code/cdsat/src/concrete.rs" 56 20 56 93

  let%span sconcrete5 = "/Users/xavier/Code/cdsat/src/concrete.rs" 59 29 59 50

  let%span sconcrete6 = "/Users/xavier/Code/cdsat/src/concrete.rs" 77 26 77 43

  let%span sconcrete7 = "/Users/xavier/Code/cdsat/src/concrete.rs" 78 12 78 62

  let%span sconcrete8 = "/Users/xavier/Code/cdsat/src/concrete.rs" 94 20 94 65

  let%span sconcrete9 = "/Users/xavier/Code/cdsat/src/concrete.rs" 86 45 86 46

  let%span sconcrete10 = "/Users/xavier/Code/cdsat/src/concrete.rs" 68 30 68 46

  let%span sconcrete11 = "/Users/xavier/Code/cdsat/src/concrete.rs" 61 12 61 32

  let%span sconcrete12 = "/Users/xavier/Code/cdsat/src/concrete.rs" 80 18 80 24

  let%span spanic13 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/panic.rs" 135 8 135 76

  let%span sconcrete14 = "/Users/xavier/Code/cdsat/src/concrete.rs" 43 4 43 41

  let%span sconcrete15 = "/Users/xavier/Code/cdsat/src/concrete.rs" 44 4 44 50

  let%span span16 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span17 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  let%span span18 = "/Users/xavier/Code/cdsat/src/trail.rs" 146 14 146 59

  let%span span19 = "/Users/xavier/Code/cdsat/src/trail.rs" 140 15 140 48

  let%span span20 = "/Users/xavier/Code/cdsat/src/trail.rs" 141 14 141 44

  let%span span21 = "/Users/xavier/Code/cdsat/src/trail.rs" 134 15 134 45

  let%span span22 = "/Users/xavier/Code/cdsat/src/trail.rs" 135 14 135 47

  let%span span23 = "/Users/xavier/Code/cdsat/src/trail.rs" 127 15 127 32

  let%span span24 = "/Users/xavier/Code/cdsat/src/trail.rs" 128 15 128 32

  let%span span25 = "/Users/xavier/Code/cdsat/src/trail.rs" 129 14 129 31

  let%span span26 = "/Users/xavier/Code/cdsat/src/trail.rs" 122 14 122 45

  let%span span27 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 41 20 41 56

  let%span span28 = "/Users/xavier/Code/cdsat/src/trail.rs" 117 14 117 64

  let%span span29 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 31 20 31 53

  let%span span30 = "/Users/xavier/Code/cdsat/src/trail.rs" 112 14 112 61

  let%span span31 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 21 20 21 53

  let%span span32 = "/Users/xavier/Code/cdsat/src/trail.rs" 107 14 107 61

  let%span span33 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 11 20 11 56

  let%span span34 = "/Users/xavier/Code/cdsat/src/trail.rs" 102 14 102 64

  let%span span35 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span36 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 14 70 15

  let%span span37 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 23 70 24

  let%span span38 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 69 14 69 59

  let%span span39 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 64 15 64 48

  let%span span40 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 16 66 17

  let%span span41 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 25 66 26

  let%span span42 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 65 14 65 44

  let%span span43 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 59 15 59 45

  let%span span44 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 16 61 17

  let%span span45 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 25 61 26

  let%span span46 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 60 14 60 47

  let%span span47 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 53 15 53 32

  let%span span48 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 54 15 54 32

  let%span span49 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 13 56 14

  let%span span50 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 22 56 23

  let%span span51 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 31 56 32

  let%span span52 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 55 14 55 31

  let%span span53 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 50 12 50 13

  let%span span54 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 49 14 49 45

  let%span span55 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 18 46 19

  let%span span56 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 27 46 28

  let%span span57 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 45 14 45 64

  let%span span58 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 18 36 19

  let%span span59 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 27 36 28

  let%span span60 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 35 14 35 61

  let%span span61 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 18 26 19

  let%span span62 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 27 26 28

  let%span span63 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 25 14 25 61

  let%span span64 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 18 16 19

  let%span span65 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 27 16 28

  let%span span66 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 15 14 15 64

  let%span span67 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span68 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span69 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span70 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span71 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span72 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span73 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span74 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 46 8 46 12

  let%span span75 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 20 8 20 31

  let%span span76 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 51 8 51 85

  let%span span77 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 26 20 26 34

  let%span span78 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span79 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span80 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span81 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span82 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span83 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span84 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span85 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span86 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span87 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span88 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span89 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span90 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span91 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span92 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span93 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span94 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span95 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span96 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span97 = "/Users/xavier/Code/cdsat/src/theory.rs" 675 8 675 71

  let%span span98 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span99 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span100 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span101 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span102 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span103 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span104 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span105 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span106 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span107 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span108 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span109 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span110 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span111 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span112 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span113 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span114 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span115 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span116 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span117 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span118 = "/Users/xavier/Code/cdsat/src/theory.rs" 738 15 738 31

  let%span span119 = "/Users/xavier/Code/cdsat/src/theory.rs" 739 4 739 83

  let%span span120 = "/Users/xavier/Code/cdsat/src/theory.rs" 548 15 548 31

  let%span span121 = "/Users/xavier/Code/cdsat/src/theory.rs" 550 15 550 25

  let%span span122 = "/Users/xavier/Code/cdsat/src/theory.rs" 549 14 549 32

  let%span span123 = "/Users/xavier/Code/cdsat/src/theory.rs" 551 4 551 141

  let%span span124 = "/Users/xavier/Code/cdsat/src/theory.rs" 552 4 552 142

  let%span span125 = "/Users/xavier/Code/cdsat/src/theory.rs" 553 4 553 56

  let%span span126 = "/Users/xavier/Code/cdsat/src/theory.rs" 554 4 554 71

  let%span span127 = "/Users/xavier/Code/cdsat/src/theory.rs" 555 4 555 77

  let%span span128 = "/Users/xavier/Code/cdsat/src/theory.rs" 556 14 556 126

  let%span span129 = "/Users/xavier/Code/cdsat/src/theory.rs" 557 14 557 40

  let%span span130 = "/Users/xavier/Code/cdsat/src/theory.rs" 682 8 682 82

  let%span span131 = "/Users/xavier/Code/cdsat/src/theory.rs" 693 4 693 55

  let%span span132 = "/Users/xavier/Code/cdsat/src/theory.rs" 695 8 695 108

  let%span span133 = "/Users/xavier/Code/cdsat/src/theory.rs" 398 8 400 79

  let%span span134 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span135 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span136 = "/Users/xavier/Code/cdsat/src/theory.rs" 31 8 54 9

  let%span span137 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span138 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 129 8 129 78

  let%span span139 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 13 814 14

  let%span span140 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 24 814 25

  let%span span141 = "/Users/xavier/Code/cdsat/src/trail.rs" 809 0 809 73

  let%span span142 = "/Users/xavier/Code/cdsat/src/trail.rs" 810 0 810 63

  let%span span143 = "/Users/xavier/Code/cdsat/src/trail.rs" 811 0 811 55

  let%span span144 = "/Users/xavier/Code/cdsat/src/trail.rs" 812 0 812 52

  let%span span145 = "/Users/xavier/Code/cdsat/src/trail.rs" 813 10 813 33

  let%span span146 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 33 814 39

  let%span span147 = "/Users/xavier/Code/cdsat/src/trail.rs" 808 10 808 17

  let%span span148 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span149 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span150 = "/Users/xavier/Code/cdsat/src/term.rs" 195 8 225 9

  let%span span151 = "/Users/xavier/Code/cdsat/src/term.rs" 180 8 180 25

  let%span span152 = "/Users/xavier/Code/cdsat/src/trail.rs" 726 8 726 61

  let%span span153 = "/Users/xavier/Code/cdsat/src/trail.rs" 646 8 648 9

  let%span span154 = "/Users/xavier/Code/cdsat/src/trail.rs" 291 12 291 92

  let%span span155 = "/Users/xavier/Code/cdsat/src/trail.rs" 313 4 313 82

  let%span span156 = "/Users/xavier/Code/cdsat/src/trail.rs" 314 14 314 40

  let%span span157 = "/Users/xavier/Code/cdsat/src/trail.rs" 315 4 315 115

  let%span span158 = "/Users/xavier/Code/cdsat/src/trail.rs" 316 4 316 115

  let%span span159 = "/Users/xavier/Code/cdsat/src/trail.rs" 317 4 317 101

  let%span span160 = "/Users/xavier/Code/cdsat/src/trail.rs" 312 14 312 24

  let%span span161 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span162 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span163 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span164 = "/Users/xavier/Code/cdsat/src/theory.rs" 616 15 616 27

  let%span span165 = "/Users/xavier/Code/cdsat/src/theory.rs" 617 15 617 32

  let%span span166 = "/Users/xavier/Code/cdsat/src/theory.rs" 618 4 618 90

  let%span span167 = "/Users/xavier/Code/cdsat/src/theory.rs" 512 8 515 9

  let%span span168 = "/Users/xavier/Code/cdsat/src/theory.rs" 522 8 525 9

  let%span span169 = "/Users/xavier/Code/cdsat/src/theory.rs" 206 8 206 84

  let%span span170 = "/Users/xavier/Code/cdsat/src/theory.rs" 502 8 505 9

  let%span span171 = "/Users/xavier/Code/cdsat/src/theory.rs" 484 15 484 31

  let%span span172 = "/Users/xavier/Code/cdsat/src/theory.rs" 485 15 485 35

  let%span span173 = "/Users/xavier/Code/cdsat/src/theory.rs" 486 15 486 27

  let%span span174 = "/Users/xavier/Code/cdsat/src/theory.rs" 487 4 487 54

  let%span span175 = "/Users/xavier/Code/cdsat/src/theory.rs" 488 4 488 58

  let%span span176 = "/Users/xavier/Code/cdsat/src/theory.rs" 489 4 489 61

  let%span span177 = "/Users/xavier/Code/cdsat/src/trail.rs" 268 8 272 9

  let%span span178 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 31 8 31 32

  let%span span179 = "/Users/xavier/Code/cdsat/src/trail.rs" 547 4 547 12

  let%span span180 = "/Users/xavier/Code/cdsat/src/trail.rs" 254 8 263 9

  let%span span181 = "/Users/xavier/Code/cdsat/src/trail.rs" 179 4 179 12

  let%span span182 = "/Users/xavier/Code/cdsat/src/trail.rs" 279 12 283 13

  let%span span183 = "/Users/xavier/Code/cdsat/src/trail.rs" 238 8 248 9

  let%span span184 = "/Users/xavier/Code/cdsat/src/trail.rs" 399 4 399 36

  let%span span185 = "/Users/xavier/Code/cdsat/src/trail.rs" 400 15 400 31

  let%span span186 = "/Users/xavier/Code/cdsat/src/trail.rs" 402 4 402 51

  let%span span187 = "/Users/xavier/Code/cdsat/src/trail.rs" 401 14 401 33

  let%span span188 = "/Users/xavier/Code/cdsat/src/trail.rs" 403 4 403 48

  let%span span189 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/option.rs" 1694 27 1694 31

  let%span span190 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/option.rs" 29 0 140 1

  let%span span191 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/option.rs" 1694 4 1694 45

  let%span span192 = "/Users/xavier/Code/cdsat/src/concrete.rs" 115 4 115 41

  let%span span193 = "/Users/xavier/Code/cdsat/src/concrete.rs" 116 15 116 36

  let%span span194 = "/Users/xavier/Code/cdsat/src/concrete.rs" 117 4 117 99

  let%span span195 = "/Users/xavier/Code/cdsat/src/concrete.rs" 118 4 122 7

  let%span span196 = "/Users/xavier/Code/cdsat/src/concrete.rs" 123 4 123 126

  let%span span197 = "/Users/xavier/Code/cdsat/src/concrete.rs" 124 14 124 34

  let%span span198 = "/Users/xavier/Code/cdsat/src/concrete.rs" 125 4 125 53

  let%span span199 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 19 21 19 25

  let%span span200 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 17 14 17 41

  let%span span201 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 18 14 18 42

  let%span span202 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/slice.rs" 19 4 19 50

  let%span span203 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 43 8 43 31

  let%span span204 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 90 8 90 31

  let%span span205 = "/Users/xavier/Code/cdsat/src/trail.rs" 614 15 614 31

  let%span span206 = "/Users/xavier/Code/cdsat/src/trail.rs" 615 4 615 97

  let%span span207 = "/Users/xavier/Code/cdsat/src/trail.rs" 616 14 616 88

  let%span span208 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2816 14 2816 18

  let%span span209 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 163 26 163 42

  let%span span210 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/vec/mod.rs" 2816 4 2816 27

  let%span span211 = "/Users/xavier/Code/cdsat/src/main.rs" 30 8 30 42

  let%span span212 = "/Users/xavier/Code/cdsat/src/main.rs" 31 18 42 9

  let%span span213 = "/Users/xavier/Code/cdsat/src/main.rs" 43 8 43 48

  let%span span214 = "/Users/xavier/Code/cdsat/src/bool.rs" 19 4 19 38

  let%span span215 = "/Users/xavier/Code/cdsat/src/bool.rs" 20 14 31 5

  let%span span216 = "/Users/xavier/Code/cdsat/src/bool.rs" 32 4 32 44

  let%span span217 = "/Users/xavier/Code/cdsat/src/concrete.rs" 21 24 21 33

  let%span span218 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 81 8 81 28

  let%span span219 = "/Users/xavier/Code/cdsat/src/concrete.rs" 21 9 21 18

  let%span span220 = "/Users/xavier/Code/cdsat/src/concrete.rs" 38 14 38 99

  let%span span221 = "/Users/xavier/Code/cdsat/src/trail.rs" 218 14 218 50

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function eq_cmp'2 (_1 : usize) (_2 : usize) : ()

  function antisym2'2 (_1 : usize) (_2 : usize) : ()

  function antisym1'2 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'2 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'2 (_1 : usize) : ()

  function cmp_gt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'2 (_1 : usize) (_2 : usize) : ()

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span16] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span17] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  function eq_cmp'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 147 4 147 31] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom eq_cmp'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span18] (x = y)
  = (cmp_log'0 x y = Ordering'0.C_Equal)

  function antisym2'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 142 4 142 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom antisym2'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span19] cmp_log'0 x y
  = Ordering'0.C_Greater)  -> ([%#span20] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 136 4 136 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom antisym1'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span21] cmp_log'0 x y
  = Ordering'0.C_Less)  -> ([%#span22] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 130 4 130 52] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span23] cmp_log'0 x y
  = o)  -> ([%#span24] cmp_log'0 y z = o)  -> ([%#span25] cmp_log'0 x z = o)

  function refl'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 123 4 123 20] (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'1_spec : forall x : TrailIndex'0.t_trailindex . [%#span26] cmp_log'0 x x = Ordering'0.C_Equal

  function gt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span27] cmp_log'0 self o = Ordering'0.C_Greater

  function cmp_gt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 118 4 118 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_gt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span28] gt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Greater)

  function ge_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span29] cmp_log'0 self o <> Ordering'0.C_Less

  function cmp_ge_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 113 4 113 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_ge_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span30] ge_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Less)

  function lt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span31] cmp_log'0 self o = Ordering'0.C_Less

  function cmp_lt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 108 4 108 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_lt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span32] lt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Less)

  function le_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span33] cmp_log'0 self o <> Ordering'0.C_Greater

  function cmp_le_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 103 4 103 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()


  axiom cmp_le_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span34] le_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Greater)

  use prelude.prelude.Slice

  predicate invariant'15 (self : slice (TrailIndex'0.t_trailindex)) =
    [%#span35] true

  predicate inv'12 (_x : slice (TrailIndex'0.t_trailindex))

  axiom inv'12 : forall x : slice (TrailIndex'0.t_trailindex) . inv'12 x = true

  predicate invariant'14 (self : TrailIndex'0.t_trailindex) =
    [%#span35] true

  predicate inv'11 (_x : TrailIndex'0.t_trailindex)

  axiom inv'11 : forall x : TrailIndex'0.t_trailindex . inv'11 x = true

  function eq_cmp'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom eq_cmp'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span36] inv'11 x)
   -> ([%#span37] inv'11 y)  -> ([%#span38] (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal))

  function antisym2'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym2'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span39] cmp_log'0 x y
  = Ordering'0.C_Greater)
   -> ([%#span40] inv'11 x)  -> ([%#span41] inv'11 y)  -> ([%#span42] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym1'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span43] cmp_log'0 x y
  = Ordering'0.C_Less)
   -> ([%#span44] inv'11 x)  -> ([%#span45] inv'11 y)  -> ([%#span46] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span47] cmp_log'0 x y
  = o)
   -> ([%#span48] cmp_log'0 y z = o)
   -> ([%#span49] inv'11 x)  -> ([%#span50] inv'11 y)  -> ([%#span51] inv'11 z)  -> ([%#span52] cmp_log'0 x z = o)

  function refl'0 (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'0_spec : forall x : TrailIndex'0.t_trailindex . ([%#span53] inv'11 x)
   -> ([%#span54] cmp_log'0 x x = Ordering'0.C_Equal)

  function cmp_gt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_gt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span55] inv'11 x)
   -> ([%#span56] inv'11 y)  -> ([%#span57] gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater))

  function cmp_ge_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_ge_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span58] inv'11 x)
   -> ([%#span59] inv'11 y)  -> ([%#span60] ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less))

  function cmp_lt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_lt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span61] inv'11 x)
   -> ([%#span62] inv'11 y)  -> ([%#span63] lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less))

  function cmp_le_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_le_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span64] inv'11 x)
   -> ([%#span65] inv'11 y)  -> ([%#span66] le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater))

  use seq.Seq

  predicate invariant'13 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span35] true

  predicate inv'10 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'10 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'10 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  constant max'0 : usize = [%#span67] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'9 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function shallow_model'4 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom shallow_model'4_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span68] inv'9 self)
   -> ([%#span70] inv'10 (shallow_model'4 self))
  && ([%#span69] Seq.length (shallow_model'4 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'12 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span71] inv'10 (shallow_model'4 self)

  axiom inv'9 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'9 x = true

  use Cdsat_Trail_Assignment_Type as Assignment'0

  predicate invariant'11 (self : Seq.seq (Assignment'0.t_assignment)) =
    [%#span35] true

  predicate inv'8 (_x : Seq.seq (Assignment'0.t_assignment))

  axiom inv'8 : forall x : Seq.seq (Assignment'0.t_assignment) . inv'8 x = true

  use seq.Seq

  predicate inv'7 (_x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

  function shallow_model'3 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) : Seq.seq (Assignment'0.t_assignment)


  axiom shallow_model'3_spec : forall self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . ([%#span68] inv'7 self)
   -> ([%#span70] inv'8 (shallow_model'3 self))
  && ([%#span69] Seq.length (shallow_model'3 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'10 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span71] inv'8 (shallow_model'3 self)

  axiom inv'7 : forall x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . inv'7 x = true

  predicate invariant'9 (self : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span35] true

  predicate inv'6 (_x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'6 : forall x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'6 x = true

  use seq.Seq

  predicate inv'5 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  function shallow_model'2 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))


  axiom shallow_model'2_spec : forall self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . ([%#span68] inv'5 self)
   -> ([%#span70] inv'6 (shallow_model'2 self))
  && ([%#span69] Seq.length (shallow_model'2 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'8 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span71] inv'6 (shallow_model'2 self)

  axiom inv'5 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'5 x
  = true

  use Cdsat_Term_Value_Type as Value'0

  use Cdsat_Term_Term_Type as Term'0

  use Core_Option_Option_Type as Option'0

  predicate invariant'7 (self : Option'0.t_option (Term'0.t_term, Value'0.t_value)) =
    [%#span35] true

  predicate inv'4 (_x : Option'0.t_option (Term'0.t_term, Value'0.t_value))

  axiom inv'4 : forall x : Option'0.t_option (Term'0.t_term, Value'0.t_value) . inv'4 x = true

  use prelude.prelude.Borrow

  predicate invariant'6 (self : borrowed (Option'0.t_option (Term'0.t_term, Value'0.t_value))) =
    [%#span35] true

  predicate inv'3 (_x : borrowed (Option'0.t_option (Term'0.t_term, Value'0.t_value)))

  axiom inv'3 : forall x : borrowed (Option'0.t_option (Term'0.t_term, Value'0.t_value)) . inv'3 x = true

  predicate invariant'5 (self : slice (TrailIndex'0.t_trailindex)) =
    [%#span35] true

  predicate inv'2 (_x : slice (TrailIndex'0.t_trailindex))

  axiom inv'2 : forall x : slice (TrailIndex'0.t_trailindex) . inv'2 x = true

  predicate invariant'4 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span35] true

  predicate inv'1 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  axiom inv'1 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'1 x = true

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'1

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'1.t_value) : Sort'0.t_sort =
    [%#span72] match self with
      | Value'1.C_Bool _ -> Sort'0.C_Boolean
      | Value'1.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span73] forall v : Value'1.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'2 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use Cdsat_Concrete_Solver_Type as Solver'0

  use prelude.prelude.Snapshot

  use Cdsat_Trail_Trail_Type as Trail'0

  use prelude.prelude.Intrinsic

  predicate resolve'4 (self : TrailIndex'0.t_trailindex) =
    [%#span74] true

  use seq.Seq

  function index_logic'3 [@inline:trivial] (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) (ix : int) : TrailIndex'0.t_trailindex

   =
    [%#span75] Seq.get (shallow_model'4 self) ix

  predicate resolve'3 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span76] forall i : int . 0 <= i /\ i < Seq.length (shallow_model'4 self)  -> resolve'4 (index_logic'3 self i)

  use Cdsat_Concrete_Answer_Type as Answer'0

  predicate resolve'2 (self : borrowed (Solver'0.t_solver)) =
    [%#span77] self.final = self.current

  predicate resolve'1 (self : borrowed (Trail'0.t_trail)) =
    [%#span77] self.final = self.current

  use Cdsat_Theory_Trail_Type as Trail'1

  use Cdsat_Theory_Term_Type as Term'1

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'1.t_term) : Sort'0.t_sort =
    [%#span78] match self with
      | Term'1.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'1.C_Value v -> sort'1 v
      | Term'1.C_Plus _ _ -> Sort'0.C_Rational
      | Term'1.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'1.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'1.C_Neg _ -> Sort'0.C_Boolean
      | Term'1.C_Disj _ _ -> Sort'0.C_Boolean
      end

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'1.t_term) : Value'1.t_value

   =
    [%#span81] match t with
      | Term'1.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'1.C_Value v -> v
      | Term'1.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'1.C_Rat r1, Value'1.C_Rat r2) -> Value'1.C_Rat r1
        | _ -> Value'1.C_Rat (from_int'0 (- 1))
        end
      | Term'1.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'1.C_Bool b1, Value'1.C_Bool b2) -> Value'1.C_Bool (b1 /\ b2)
        | _ -> Value'1.C_Bool false
        end
      | Term'1.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'1.C_Bool b1, Value'1.C_Bool b2) -> Value'1.C_Bool (b1 \/ b2)
        | _ -> Value'1.C_Bool false
        end
      | Term'1.C_Eq l r -> Value'1.C_Bool (interp'0 self l = interp'0 self r)
      | Term'1.C_Neg t -> match interp'0 self t with
        | Value'1.C_Bool b -> Value'1.C_Bool (not b)
        | _ -> Value'1.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'1.t_term . ([%#span79] inv'0 self)
   -> ([%#span80] invariant'2 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'1.t_term, Value'1.t_value))

   =
    [%#span82] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  use prelude.prelude.Int

  use Cdsat_Theory_Assign_Type as Assign'0

  predicate invariant'3 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span83] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'1.t_trail) =
    [%#span84] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'3 a
      end

  function len'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'1.t_trail) : int

  axiom len'1_spec : forall self : Trail'1.t_trail . [%#span85] len'1 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'1.t_trail) : int =
    [%#span88] match self with
      | Trail'1.C_Empty -> 0
      | Trail'1.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'1.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'1.t_trail . ([%#span87] level'0 self <= len'1 self)
  && ([%#span86] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'1.t_trail) =
    [%#span89] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'1.t_term, Value'1.t_value)

   =
    [%#span90] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span94] match self with
      | Trail'1.C_Empty -> Option'0.C_None
      | Trail'1.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'1.t_trail, d : (Term'1.t_term, Value'1.t_value) . ([%#span93] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span92] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span91] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  predicate contains'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value))

   =
    [%#span96] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'1_spec : forall self : Trail'1.t_trail, d : (Term'1.t_term, Value'1.t_value) . [%#span95] invariant_assign'0 self
   -> contains'1 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  predicate satisfied_by'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 674 4 674 47] (self : Trail'1.t_trail) (m : Model'0.t_model)

   =
    [%#span97] forall a : (Term'1.t_term, Value'1.t_value) . contains'1 self a  -> satisfies'0 m a

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value)) : int

   =
    [%#span100] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'1.t_trail, d : (Term'1.t_term, Value'1.t_value) . ([%#span98] invariant_nonneg'0 self)
   -> ([%#span99] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'1.t_value) =
    [%#span101] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'1.t_value) : Value'1.t_value =
    [%#span104] match self with
      | Value'1.C_Bool b -> Value'1.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'1.t_value . ([%#span102] is_bool'0 self)
   -> ([%#span103] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'1.t_trail) =
    [%#span105] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> let ap = to_pair'0 a in not contains'1 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'1 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  use set.Fset

  use set.Fset

  predicate contains'3 [@inline:trivial] (self : Fset.fset (Term'1.t_term, Value'1.t_value)) (e : (Term'1.t_term, Value'1.t_value))

   =
    [%#span106] Fset.mem e self

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'1.t_trail) =
    [%#span107] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'1.t_term, Value'1.t_value) . contains'3 j a  -> contains'1 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'1 [@inline:trivial] (self : Fset.fset (Term'1.t_term, Value'1.t_value)) (a : (Term'1.t_term, Value'1.t_value)) : Fset.fset (Term'1.t_term, Value'1.t_value)

   =
    [%#span108] Fset.remove a self

  use set.Fset

  use set.Fset

  use set.Fset

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'1.t_trail) (s : Fset.fset (Term'1.t_term, Value'1.t_value)) : int


  axiom set_level'0_spec : forall self : Trail'1.t_trail, s : Fset.fset (Term'1.t_term, Value'1.t_value) . ([%#span109] invariant_nonneg'0 self)
   -> ([%#span114] set_level'0 self s <= level'0 self)
  && ([%#span113] set_level'0 self s >= 0)
  && ([%#span112] s = (Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value))  -> set_level'0 self s = 0)
  && ([%#span111] s <> (Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value))
   -> (exists i : (Term'1.t_term, Value'1.t_value) . contains'3 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span110] forall i : (Term'1.t_term, Value'1.t_value) . contains'3 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'1.t_trail) =
    [%#span116] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'1.t_trail) =
    [%#span117] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function count_bounds'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 740 4 740 35] (self : Trail'1.t_trail) : ()

  axiom count_bounds'0_spec : forall self : Trail'1.t_trail . ([%#span118] invariant'1 self)
   -> ([%#span119] forall a : (Term'1.t_term, Value'1.t_value) . contains'1 self a
   -> level_of'0 self a <= level'0 self)

  function restrict'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 558 4 558 45] (self : Trail'1.t_trail) (level : int) : Trail'1.t_trail


  axiom restrict'0_spec : forall self : Trail'1.t_trail, level : int . ([%#span120] invariant'1 self)
   -> ([%#span121] level >= 0)
   -> ([%#span129] len'1 (restrict'0 self level) <= len'1 self)
  && ([%#span128] (level'0 self >= level  -> level'0 (restrict'0 self level) = level)
  /\ (level'0 self < level  -> level'0 (restrict'0 self level) = level'0 self))
  && ([%#span127] forall m : Model'0.t_model . inv'0 m
   -> satisfied_by'0 self m  -> satisfied_by'0 (restrict'0 self level) m)
  && ([%#span126] forall a : (Term'1.t_term, Value'1.t_value) . not contains'1 self a
   -> not contains'1 (restrict'0 self level) a)
  && ([%#span125] level >= level'0 self  -> restrict'0 self level = self)
  && ([%#span124] forall a : (Term'1.t_term, Value'1.t_value) . contains'1 (restrict'0 self level) a
   -> contains'1 self a
  /\ level_of'0 (restrict'0 self level) a <= level /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span123] forall a : (Term'1.t_term, Value'1.t_value) . contains'1 self a
   -> level_of'0 self a <= level
   -> contains'1 (restrict'0 self level) a /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span122] invariant'1 (restrict'0 self level))

  predicate unsat'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 681 4 681 30] (self : Trail'1.t_trail) =
    [%#span130] forall m : Model'0.t_model . inv'0 m  -> satisfied_by'0 (restrict'0 self 0) m  -> false

  predicate impls'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 694 4 694 41] (self : Trail'1.t_trail) (rhs : Trail'1.t_trail)

   =
    [%#span132] forall m : Model'0.t_model . inv'0 m
     -> satisfied_by'0 (restrict'0 self 0) m  -> satisfied_by'0 (restrict'0 rhs 0) m

  axiom impls'0_spec : forall self : Trail'1.t_trail, rhs : Trail'1.t_trail . [%#span131] impls'0 self rhs
   -> unsat'0 rhs  -> unsat'0 self

  predicate acceptable'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 397 4 397 56] (self : Trail'1.t_trail) (t : Term'1.t_term) (val' : Value'1.t_value)

   =
    [%#span133] not contains'1 self (t, val')
    /\ sort'0 t = sort'1 val' /\ (is_bool'0 val'  -> not contains'1 self (t, negate'0 val'))

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  function deep_model'5 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span134] match self with
      | Value'0.C_Bool b -> Value'1.C_Bool b
      | Value'0.C_Rat br -> Value'1.C_Rat (deep_model'5 br)
      end

  function shallow_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span135] deep_model'1 self

  use prelude.prelude.Snapshot

  use Cdsat_Trail_Trail_Type as Cdsat_Trail_Trail_Type

  function well_sorted'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 30 4 30 36] (self : Term'1.t_term) : bool =
    [%#span136] match self with
      | Term'1.C_Variable v -> true
      | Term'1.C_Value v -> true
      | Term'1.C_Plus l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Rational
      | Term'1.C_Eq l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r
      | Term'1.C_Conj l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Boolean
      | Term'1.C_Disj l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Boolean
      | Term'1.C_Neg t -> well_sorted'0 t /\ sort'0 t = Sort'0.C_Boolean
      end

  use set.Fset

  function insert'0 [@inline:trivial] (self : Fset.fset (Term'1.t_term, Value'1.t_value)) (e : (Term'1.t_term, Value'1.t_value)) : Fset.fset (Term'1.t_term, Value'1.t_value)

   =
    [%#span137] Fset.add e self

  use seq.Seq

  use prelude.seq_ext.SeqExt

  use seq.Seq

  predicate contains'2 (self : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) =
    [%#span138] exists i : int . 0 <= i /\ i < Seq.length self /\ Seq.get self i = e

  function remove'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 814 0 814 39] (s : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom remove'0_spec : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . ([%#span139] inv'10 s)
   -> ([%#span140] inv'11 e)
   -> ([%#span146] inv'10 (remove'0 s e))
  && ([%#span145] Seq.length (remove'0 s e) <= Seq.length s)
  && ([%#span144] contains'2 s e  -> Seq.length (remove'0 s e) < Seq.length s)
  && ([%#span143] forall t : TrailIndex'0.t_trailindex . inv'11 t  -> contains'2 (remove'0 s e) t  -> t <> e)
  && ([%#span142] forall t : TrailIndex'0.t_trailindex . inv'11 t  -> contains'2 (remove'0 s e) t  -> contains'2 s t)
  && ([%#span141] forall t : TrailIndex'0.t_trailindex . inv'11 t
   -> contains'2 s t  -> e <> t  -> contains'2 (remove'0 s e) t)

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  use Cdsat_Term_Sort_Type as Sort'1

  function deep_model'4 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'1.t_sort) : Sort'0.t_sort =
    [%#span148] match self with
      | Sort'1.C_Boolean -> Sort'0.C_Boolean
      | Sort'1.C_Rational -> Sort'0.C_Rational
      end

  function deep_model'3 (self : usize) : int =
    [%#span149] UIntSize.to_int self

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 193 4 193 44] (self : Term'0.t_term) : Term'1.t_term =
    [%#span150] match self with
      | Term'0.C_Variable v s -> Term'1.C_Variable (Var'0.C_Var (deep_model'3 v) (deep_model'4 s))
      | Term'0.C_Value v -> Term'1.C_Value (deep_model'1 v)
      | Term'0.C_Plus l r -> Term'1.C_Plus (deep_model'0 l) (deep_model'0 r)
      | Term'0.C_Eq l r -> Term'1.C_Eq (deep_model'0 l) (deep_model'0 r)
      | Term'0.C_Conj l r -> Term'1.C_Conj (deep_model'0 l) (deep_model'0 r)
      | Term'0.C_Disj l r -> Term'1.C_Disj (deep_model'0 l) (deep_model'0 r)
      | Term'0.C_Neg t -> Term'1.C_Neg (deep_model'0 t)
      | Term'0.C_Impl l r -> Term'1.C_Disj (Term'1.C_Neg (deep_model'0 l)) (deep_model'0 r)
      | Term'0.C_Times l r -> Term'1.C_Plus (Term'1.C_Value (Value'1.C_Rat (deep_model'5 l))) (deep_model'0 r)
      | Term'0.C_Lt l r -> Term'1.C_Eq (deep_model'0 l) (deep_model'0 r)
      end

  function shallow_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 179 4 179 50] (self : Term'0.t_term) : Term'1.t_term
   =
    [%#span151] deep_model'0 self

  function term_value'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 725 4 725 61] (self : Assignment'0.t_assignment) : (Term'1.t_term, Value'1.t_value)

   =
    [%#span152] (shallow_model'0 (Cdsat_Trail_Assignment_Type.assignment_term self), shallow_model'1 (Cdsat_Trail_Assignment_Type.assignment_val self))

  use seq.Seq

  use seq.Seq

  function index_logic'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 645 4 645 77] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : (Term'1.t_term, Value'1.t_value)

   =
    [%#span153] term_value'0 (Seq.get (shallow_model'3 (Seq.get (shallow_model'2 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)))) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)))

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 289 4 289 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex)

   =
    [%#span154] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)
    < Seq.length (shallow_model'2 (Cdsat_Trail_Trail_Type.trail_assignments self))
    /\ UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)
    < Seq.length (shallow_model'3 (Seq.get (shallow_model'2 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))))

  function abstract_justification'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 318 4 321 44] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) : Fset.fset (Term'1.t_term, Value'1.t_value)


  axiom abstract_justification'0_spec : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span155] forall i : int . 0
  <= i
  /\ i < Seq.length just  -> contains'0 self (Seq.get just i))
   -> ([%#span159] forall i : int . 0 <= i /\ i < Seq.length just
   -> contains'3 (abstract_justification'0 self just) (index_logic'1 self (Seq.get just i)))
  && ([%#span158] forall a : (Term'1.t_term, Value'1.t_value) . contains'3 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'2 just ix /\ a = index_logic'1 self ix))
  && ([%#span157] forall a : (Term'1.t_term, Value'1.t_value) . contains'3 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'0 self ix /\ a = index_logic'1 self ix))
  && ([%#span156] Fset.cardinal (abstract_justification'0 self just) <= Seq.length just)

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'1.t_term, Value'1.t_value))

   =
    [%#span161] forall a : (Term'1.t_term, Value'1.t_value) . contains'3 v a  -> satisfies'0 self a

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span162] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'0 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'1.t_trail)
   =
    [%#span163] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a _ tl -> sound'0 tl /\ justified_sound'0 a
      end

  function find_justified'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 619 4 619 46] (self : Trail'1.t_trail) (kv : (Term'1.t_term, Value'1.t_value)) : ()


  axiom find_justified'0_spec : forall self : Trail'1.t_trail, kv : (Term'1.t_term, Value'1.t_value) . ([%#span164] sound'0 self)
   -> ([%#span165] contains'1 self kv)
   -> ([%#span166] forall l : int . forall a : Assign'0.t_assign . find'0 self kv = Option'0.C_Some (a, l)
   -> justified_sound'0 a)

  predicate is_decision'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 511 4 511 54] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value))

   =
    [%#span167] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Decision _ _, _) -> true
      | _ -> false
      end

  predicate is_input'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 521 4 521 51] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value))

   =
    [%#span168] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Input _ _, _) -> true
      | _ -> false
      end

  predicate entails'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 205 4 205 74] (self : Model'0.t_model) (j : Fset.fset (Term'1.t_term, Value'1.t_value)) (c : (Term'1.t_term, Value'1.t_value))

   =
    [%#span169] invariant'2 self  -> satisfy_set'0 self j  -> satisfies'0 self c

  predicate is_justified'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 501 4 501 55] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value))

   =
    [%#span170] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified _ _ _, _) -> true
      | _ -> false
      end

  function justification'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 490 4 490 71] (self : Trail'1.t_trail) (d : (Term'1.t_term, Value'1.t_value)) : Fset.fset (Term'1.t_term, Value'1.t_value)


  axiom justification'0_spec : forall self : Trail'1.t_trail, d : (Term'1.t_term, Value'1.t_value) . ([%#span171] invariant'1 self)
   -> ([%#span172] is_justified'0 self d)
   -> ([%#span173] sound'0 self)
   -> ([%#span176] is_decision'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value)))
  && ([%#span175] is_input'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'1.t_term, Value'1.t_value)))
  && ([%#span174] forall m : Model'0.t_model . inv'0 m  -> entails'0 m (justification'0 self d) d)

  predicate justified_correct'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 267 4 267 78] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) (j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

   =
    [%#span177] (forall i : TrailIndex'0.t_trailindex . contains'2 (shallow_model'4 j) i
     -> lt_log'0 i ix /\ contains'0 self i)
    /\ is_justified'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'1 self ix)
    /\ justification'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'1 self ix)
    = abstract_justification'0 self (shallow_model'4 j)

  use Cdsat_Trail_Reason_Type as Reason'0

  function index_logic'5 [@inline:trivial] (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (ix : usize) : Assignment'0.t_assignment

   =
    [%#span178] Seq.get (shallow_model'3 self) (UIntSize.to_int ix)

  function index_logic'4 [@inline:trivial] (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (ix : usize) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span178] Seq.get (shallow_model'2 self) (UIntSize.to_int ix)

  function reason'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 549 4 549 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : Reason'0.t_reason

   =
    [%#span179] Cdsat_Trail_Assignment_Type.assignment_reason (index_logic'5 (index_logic'4 (Cdsat_Trail_Trail_Type.trail_assignments self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)) (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix))

  predicate justified_is_justified'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 253 4 253 47] (self : Trail'0.t_trail) =
    [%#span180] forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> (let reason = reason'0 self ix in (reason = Reason'0.C_Decision)
    = is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'1 self ix)
    /\ (reason = Reason'0.C_Input)
    = is_input'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'1 self ix)
    /\ (forall j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . reason = Reason'0.C_Justified j
     -> justified_correct'0 self ix j))

  function index_logic'0 [@inline:trivial] (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (ix : int) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span75] Seq.get (shallow_model'2 self) ix

  function level_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 180 4 180 33] (self : TrailIndex'0.t_trailindex) : int
   =
    [%#span181] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 self)

  predicate abstract_relation'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 277 4 277 42] (self : Trail'0.t_trail) =
    [%#span182] (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> contains'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'1 self ix))
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'1 self ix)
    = UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))
    /\ (forall a : (Term'1.t_term, Value'1.t_value) . contains'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
     -> (exists ix : TrailIndex'0.t_trailindex . contains'0 self ix
    /\ level_log'0 ix = level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
    /\ index_logic'1 self ix = a))

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 237 4 237 34] (self : Trail'0.t_trail) =
    [%#span183] abstract_relation'0 self
    /\ sound'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    /\ invariant'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    /\ level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    = UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self)
    /\ UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self)
    = Seq.length (shallow_model'2 (Cdsat_Trail_Trail_Type.trail_assignments self)) - 1
    /\ (forall i : int . 0 <= i /\ i < Seq.length (shallow_model'2 (Cdsat_Trail_Trail_Type.trail_assignments self))
     -> Seq.length (shallow_model'3 (index_logic'0 (Cdsat_Trail_Trail_Type.trail_assignments self) i)) > 0)
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix) = 0)
    = is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'1 self ix))
    /\ (forall j : TrailIndex'0.t_trailindex . forall i : TrailIndex'0.t_trailindex . contains'0 self i
     -> contains'0 self j  -> i <> j  -> index_logic'1 self i <> index_logic'1 self j)
    /\ justified_is_justified'0 self
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> well_sorted'0 (let (a, _) = index_logic'1 self ix in a))

  let rec add_decision'0 (self:borrowed (Trail'0.t_trail)) (term:Term'0.t_term) (val':Value'0.t_value) (return'  (ret:()))= {[@expl:precondition] [%#span186] acceptable'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self.current)) (shallow_model'0 term) (shallow_model'1 val')}
    {[@expl:precondition] [%#span185] invariant'0 self.current}
    {[@expl:precondition] [%#span184] well_sorted'0 (shallow_model'0 term)}
    any
    [ return' (result:())-> {[%#span188] impls'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self.current)) (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self.final))}
      {[%#span187] invariant'0 self.final}
      (! return' {result}) ]


  let rec take'0 (self:borrowed (Option'0.t_option (Term'0.t_term, Value'0.t_value))) (return'  (ret:Option'0.t_option (Term'0.t_term, Value'0.t_value)))= {[@expl:precondition] [%#span189] inv'3 self}
    any
    [ return' (result:Option'0.t_option (Term'0.t_term, Value'0.t_value))-> {[%#span191] inv'4 result}
      {[%#span190] result = self.current /\ self.final = Option'0.C_None}
      (! return' {result}) ]


  let rec resolve_conflict'0 (self:Solver'0.t_solver) (trail:borrowed (Trail'0.t_trail)) (conflict:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) (return'  (ret:()))= {[@expl:precondition] [%#span196] forall ix : TrailIndex'0.t_trailindex . contains'0 trail.current ix
     -> (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix) = 0)
    = is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost trail.current)) (index_logic'1 trail.current ix)}
    {[@expl:precondition] [%#span195] let conflict = abstract_justification'0 trail.current (shallow_model'4 conflict) in set_level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost trail.current)) conflict
    > 0
    /\ (forall m : Model'0.t_model . inv'0 m  -> satisfy_set'0 m conflict  -> false)}
    {[@expl:precondition] [%#span194] forall i : int . 0 <= i /\ i < Seq.length (shallow_model'4 conflict)
     -> contains'0 trail.current (Seq.get (shallow_model'4 conflict) i)}
    {[@expl:precondition] [%#span193] Seq.length (shallow_model'4 conflict) > 0}
    {[@expl:precondition] [%#span192] invariant'0 trail.current}
    any
    [ return' (result:())-> {[%#span198] impls'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost trail.current)) (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost trail.final))}
      {[%#span197] invariant'0 trail.final}
      {[%#span192] invariant'0 trail.final}
      (! return' {result}) ]


  use prelude.prelude.Slice

  function shallow_model'7 (self : slice (TrailIndex'0.t_trailindex)) : Seq.seq (TrailIndex'0.t_trailindex)

  axiom shallow_model'7_spec : forall self : slice (TrailIndex'0.t_trailindex) . ([%#span199] inv'12 self)
   -> ([%#span202] inv'10 (shallow_model'7 self))
  && ([%#span201] shallow_model'7 self = Slice.id self)
  && ([%#span200] Seq.length (shallow_model'7 self) <= UIntSize.to_int (max'0 : usize))

  function index_logic'2 [@inline:trivial] (self : slice (TrailIndex'0.t_trailindex)) (ix : int) : TrailIndex'0.t_trailindex

   =
    [%#span203] Seq.get (shallow_model'7 self) ix

  function shallow_model'5 (self : slice (TrailIndex'0.t_trailindex)) : Seq.seq (TrailIndex'0.t_trailindex) =
    [%#span204] shallow_model'7 self

  let rec max_level'0 (self:Trail'0.t_trail) (assignments:slice (TrailIndex'0.t_trailindex)) (return'  (ret:usize))= {[@expl:precondition] [%#span206] forall i : int . 0
    <= i
    /\ i < Seq.length (shallow_model'5 assignments)  -> contains'0 self (index_logic'2 assignments i)}
    {[@expl:precondition] [%#span205] invariant'0 self}
    any
    [ return' (result:usize)-> {[%#span207] set_level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (abstract_justification'0 self (shallow_model'5 assignments))
      = UIntSize.to_int result}
      (! return' {result}) ]


  function shallow_model'6 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)

   =
    [%#span204] shallow_model'4 self

  let rec deref'0 (self:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) (return'  (ret:slice (TrailIndex'0.t_trailindex)))= {[@expl:precondition] [%#span208] inv'1 self}
    any
    [ return' (result:slice (TrailIndex'0.t_trailindex))-> {[%#span210] inv'2 result}
      {[%#span209] shallow_model'5 result = shallow_model'6 self}
      (! return' {result}) ]


  use Cdsat_Concrete_TheoryState_Type as TheoryState'0

  predicate resolve'0 (self : borrowed (TheoryState'0.t_theorystate)) =
    [%#span77] self.final = self.current

  use Cdsat_Lra_LraTheory_Type as LRATheory'0

  use Cdsat_Concrete_ExtendResult_Type as ExtendResult'0

  let rec extend'1 (self:borrowed (LRATheory'0.t_lratheory)) (tl:borrowed (Trail'0.t_trail)) (return'  (ret:ExtendResult'0.t_extendresult))= {[@expl:precondition] [%#span211] invariant'0 tl.current}
    any
    [ return' (result:ExtendResult'0.t_extendresult)-> {[%#span213] impls'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost tl.current)) (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost tl.final))}
      {[%#span212] match result with
        | ExtendResult'0.C_Satisfied -> true
        | ExtendResult'0.C_Decision t v -> acceptable'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost tl.final)) (shallow_model'0 t) (shallow_model'1 v)
        /\ well_sorted'0 (shallow_model'0 t)
        | ExtendResult'0.C_Conflict c -> let conflict = abstract_justification'0 tl.final (shallow_model'4 c) in Seq.length (shallow_model'4 c)
        > 0
        /\ (forall t : TrailIndex'0.t_trailindex . contains'2 (shallow_model'4 c) t  -> contains'0 tl.final t)
        /\ (forall m : Model'0.t_model . inv'0 m  -> satisfy_set'0 m conflict  -> false)
        end}
      {[%#span211] invariant'0 tl.final}
      (! return' {result}) ]


  use Cdsat_Bool_BoolTheory_Type as BoolTheory'0

  let rec extend'0 (self:borrowed (BoolTheory'0.t_booltheory)) (tl:borrowed (Trail'0.t_trail)) (return'  (ret:ExtendResult'0.t_extendresult))= {[@expl:precondition] [%#span214] invariant'0 tl.current}
    any
    [ return' (result:ExtendResult'0.t_extendresult)-> {[%#span216] impls'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost tl.current)) (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost tl.final))}
      {[%#span215] match result with
        | ExtendResult'0.C_Satisfied -> true
        | ExtendResult'0.C_Decision t v -> acceptable'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost tl.final)) (shallow_model'0 t) (shallow_model'1 v)
        /\ well_sorted'0 (shallow_model'0 t)
        | ExtendResult'0.C_Conflict c -> let conflict = abstract_justification'0 tl.final (shallow_model'4 c) in Seq.length (shallow_model'4 c)
        > 0
        /\ (forall t : TrailIndex'0.t_trailindex . contains'2 (shallow_model'4 c) t  -> contains'0 tl.final t)
        /\ (forall m : Model'0.t_model . inv'0 m  -> satisfy_set'0 m conflict  -> false)
        end}
      {[%#span214] invariant'0 tl.final}
      (! return' {result}) ]


  use Cdsat_Concrete_TheoryStateDeepModel_Type as TheoryStateDeepModel'0

  function deep_model'6 [#"/Users/xavier/Code/cdsat/src/concrete.rs" 21 24 21 33] (self : TheoryState'0.t_theorystate) : TheoryStateDeepModel'0.t_theorystatedeepmodel

   =
    [%#span217] match self with
      | TheoryState'0.C_Sat -> TheoryStateDeepModel'0.C_Sat
      | TheoryState'0.C_Decision -> TheoryStateDeepModel'0.C_Decision
      | TheoryState'0.C_Unknown -> TheoryStateDeepModel'0.C_Unknown
      end

  function deep_model'2 (self : TheoryState'0.t_theorystate) : TheoryStateDeepModel'0.t_theorystatedeepmodel =
    [%#span218] deep_model'6 self

  let rec eq'0 (self:TheoryState'0.t_theorystate) (rhs:TheoryState'0.t_theorystate) (return'  (ret:bool))= any
    [ return' (result:bool)-> {[%#span219] result = (deep_model'2 self = deep_model'2 rhs)} (! return' {result}) ]


  use Cdsat_Concrete_Solver_Type as Cdsat_Concrete_Solver_Type

  let rec sat'0 (self:Solver'0.t_solver) (return'  (ret:bool))= any
    [ return' (result:bool)-> {[%#span220] result
      = (Cdsat_Concrete_Solver_Type.solver_bool_state self = TheoryState'0.C_Sat
      /\ Cdsat_Concrete_Solver_Type.solver_lra_state self = TheoryState'0.C_Sat)}
      (! return' {result}) ]


  let rec len'0 (self:Trail'0.t_trail) (return'  (ret:usize))= any
    [ return' (result:usize)-> {[%#span221] UIntSize.to_int result
      = Seq.length (shallow_model'2 (Cdsat_Trail_Trail_Type.trail_assignments self))}
      (! return' {result}) ]


  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  use prelude.prelude.Snapshot

  let rec promoted0 (return'  (ret:TheoryState'0.t_theorystate))= bb0
    [ bb0 = s0 [ s0 =  [ &_1 <- TheoryState'0.C_Decision ] s1 | s1 =  [ &_0 <- _1 ] s2 | s2 = return' {_0} ]  ]
     [ & _0 : TheoryState'0.t_theorystate = any_l () | & _1 : TheoryState'0.t_theorystate = any_l () ]
    [ return' (result:TheoryState'0.t_theorystate)-> return' {result} ]


  let rec promoted1 (return'  (ret:TheoryState'0.t_theorystate))= bb0
    [ bb0 = s0 [ s0 =  [ &_1 <- TheoryState'0.C_Unknown ] s1 | s1 =  [ &_0 <- _1 ] s2 | s2 = return' {_0} ]  ]
     [ & _0 : TheoryState'0.t_theorystate = any_l () | & _1 : TheoryState'0.t_theorystate = any_l () ]
    [ return' (result:TheoryState'0.t_theorystate)-> return' {result} ]


  let rec promoted2 (return'  (ret:TheoryState'0.t_theorystate))= bb0
    [ bb0 = s0 [ s0 =  [ &_1 <- TheoryState'0.C_Unknown ] s1 | s1 =  [ &_0 <- _1 ] s2 | s2 = return' {_0} ]  ]
     [ & _0 : TheoryState'0.t_theorystate = any_l () | & _1 : TheoryState'0.t_theorystate = any_l () ]
    [ return' (result:TheoryState'0.t_theorystate)-> return' {result} ]


  let rec solver (self:borrowed (Solver'0.t_solver)) (trail:borrowed (Trail'0.t_trail)) (return'  (ret:Answer'0.t_answer))= {[%#sconcrete14] invariant'0 trail.current}
    (! bb0
    [ bb0 = s0
      [ s0 =  [ &_6 <- TheoryState'0.C_Unknown ] s1
      | s1 = Solver'0.t_solver {self.current}
          (fun (l_bool_th'0:BoolTheory'0.t_booltheory) (l_bool_state'0:TheoryState'0.t_theorystate) (l_lra_th'0:LRATheory'0.t_lratheory) (l_lra_state'0:TheoryState'0.t_theorystate) ->
             [ &self <- { self with current = Solver'0.C_Solver l_bool_th'0 l_bool_state'0 l_lra_th'0 _6 ; } ]
            (any [ any_ (_any:TheoryState'0.t_theorystate)-> (!  [ &_6 <- _any ] s2) ] ))
      | s2 =  [ &_7 <- TheoryState'0.C_Unknown ] s3
      | s3 = Solver'0.t_solver {self.current}
          (fun (l_bool_th'1:BoolTheory'0.t_booltheory) (l_bool_state'1:TheoryState'0.t_theorystate) (l_lra_th'1:LRATheory'0.t_lratheory) (l_lra_state'1:TheoryState'0.t_theorystate) ->
             [ &self <- { self with current = Solver'0.C_Solver l_bool_th'1 _7 l_lra_th'1 l_lra_state'1 ; } ]
            (any [ any_ (_any:TheoryState'0.t_theorystate)-> (!  [ &_7 <- _any ] s4) ] ))
      | s4 =  [ &old_trail <- [%#sconcrete0] Snapshot.new trail ] s5
      | s5 = bb1 ]

    | bb1 = s0 [ s0 =  [ &decision <- Option'0.C_None ] s1 | s1 = bb2 ]
    | bb2 = bb3
    | bb3 = s0 [ s0 =  [ &old_4_0 <- Snapshot.new self ] s1 | s1 =  [ &old_4_1 <- Snapshot.new trail ] s2 | s2 = bb4 ]
    | bb4 = bb4
      [ bb4 = {[@expl:loop invariant] (Snapshot.inner old_4_1).final = trail.final}
        {[@expl:loop invariant] (Snapshot.inner old_4_0).final = self.final}
        {[@expl:loop invariant] [%#sconcrete1] Cdsat_Concrete_Solver_Type.solver_bool_state self.current
        = TheoryState'0.C_Decision
        \/ Cdsat_Concrete_Solver_Type.solver_lra_state self.current = TheoryState'0.C_Decision
         -> decision <> Option'0.C_None}
        {[@expl:loop invariant] [%#sconcrete4] Cdsat_Concrete_Solver_Type.solver_bool_state self.current
        <> TheoryState'0.C_Sat
        \/ Cdsat_Concrete_Solver_Type.solver_lra_state self.current <> TheoryState'0.C_Sat}
        {[@expl:loop invariant] [%#sconcrete3] match decision with
          | Option'0.C_Some (t, v) -> acceptable'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost trail.current)) (shallow_model'0 t) (shallow_model'1 v)
          /\ well_sorted'0 (shallow_model'0 t)
          | Option'0.C_None -> true
          end}
        {[@expl:loop invariant] [%#sconcrete2] invariant'0 trail.current}
        {[@expl:loop invariant] [%#sconcrete1] impls'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost (Snapshot.inner old_trail).current)) (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost trail.current))}
        (! s0) [ s0 = bb5 ]
        [ bb5 = s0 [ s0 =  [ &iter_trail <- [%#sconcrete5] Snapshot.new trail.current ] s1 | s1 = bb6 ]
        | bb6 = s0 [ s0 = len'0 {trail.current} (fun (_ret':usize) ->  [ &len <- _ret' ] s1) | s1 = bb7 ]
        | bb7 = s0 [ s0 = sat'0 {self.current} (fun (_ret':bool) ->  [ &_23 <- _ret' ] s1) | s1 = bb8 ]
        | bb8 = any [ br0 -> {_23 = false} (! bb10) | br1 -> {_23} (! bb9) ]
        | bb10 = s0
          [ s0 = promoted2 (fun (pr2:TheoryState'0.t_theorystate) ->  [ &_106 <- pr2 ] s1)
          | s1 = Solver'0.t_solver {self.current}
              (fun (rbool_th'0:BoolTheory'0.t_booltheory) (rbool_state'0:TheoryState'0.t_theorystate) (rlra_th'0:LRATheory'0.t_lratheory) (rlra_state'0:TheoryState'0.t_theorystate) ->
                eq'0 {rbool_state'0} {_106} (fun (_ret':bool) ->  [ &_30 <- _ret' ] s2))
          | s2 = bb11 ]

        | bb11 = any [ br0 -> {_30 = false} (! bb15) | br1 -> {_30} (! bb12) ]
        | bb12 = s0
          [ s0 = Solver'0.t_solver {self.current}
              (fun (rbool_th'0:BoolTheory'0.t_booltheory) (rbool_state'0:TheoryState'0.t_theorystate) (rlra_th'0:LRATheory'0.t_lratheory) (rlra_state'0:TheoryState'0.t_theorystate) ->
                Borrow.borrow_mut <BoolTheory'0.t_booltheory> {rbool_th'0}
                  (fun (_ret':borrowed (BoolTheory'0.t_booltheory)) ->
                     [ &_35 <- _ret' ]
                    Solver'0.t_solver {self.current}
                      (fun (l_bool_th'0:BoolTheory'0.t_booltheory) (l_bool_state'0:TheoryState'0.t_theorystate) (l_lra_th'0:LRATheory'0.t_lratheory) (l_lra_state'0:TheoryState'0.t_theorystate) ->

                        [ &self <- { self with current = Solver'0.C_Solver _35.final l_bool_state'0 l_lra_th'0 l_lra_state'0 ; } ]

                        s1)))
          | s1 = Borrow.borrow_mut <Trail'0.t_trail> {trail.current}
              (fun (_ret':borrowed (Trail'0.t_trail)) ->
                 [ &_36 <- _ret' ]
                 [ &trail <- { trail with current = _36.final ; } ]
                s2)
          | s2 = extend'0 {_35} {_36} (fun (_ret':ExtendResult'0.t_extendresult) ->  [ &_34 <- _ret' ] s3)
          | s3 = bb13 ]

        | bb13 = s0
          [ s0 = Solver'0.t_solver {self.current}
              (fun (rbool_th'0:BoolTheory'0.t_booltheory) (rbool_state'0:TheoryState'0.t_theorystate) (rlra_th'0:LRATheory'0.t_lratheory) (rlra_state'0:TheoryState'0.t_theorystate) ->
                Borrow.borrow_mut <TheoryState'0.t_theorystate> {rbool_state'0}
                  (fun (_ret':borrowed (TheoryState'0.t_theorystate)) ->
                     [ &_37 <- _ret' ]
                    Solver'0.t_solver {self.current}
                      (fun (l_bool_th'0:BoolTheory'0.t_booltheory) (l_bool_state'0:TheoryState'0.t_theorystate) (l_lra_th'0:LRATheory'0.t_lratheory) (l_lra_state'0:TheoryState'0.t_theorystate) ->

                        [ &self <- { self with current = Solver'0.C_Solver l_bool_th'0 _37.final l_lra_th'0 l_lra_state'0 ; } ]

                        s1)))
          | s1 = Solver'0.t_solver {self.current}
              (fun (rbool_th'1:BoolTheory'0.t_booltheory) (rbool_state'1:TheoryState'0.t_theorystate) (rlra_th'1:LRATheory'0.t_lratheory) (rlra_state'1:TheoryState'0.t_theorystate) ->
                Borrow.borrow_mut <TheoryState'0.t_theorystate> {rlra_state'1}
                  (fun (_ret':borrowed (TheoryState'0.t_theorystate)) ->
                     [ &_38 <- _ret' ]
                    Solver'0.t_solver {self.current}
                      (fun (l_bool_th'1:BoolTheory'0.t_booltheory) (l_bool_state'1:TheoryState'0.t_theorystate) (l_lra_th'1:LRATheory'0.t_lratheory) (l_lra_state'1:TheoryState'0.t_theorystate) ->

                        [ &self <- { self with current = Solver'0.C_Solver l_bool_th'1 l_bool_state'1 l_lra_th'1 _38.final ; } ]

                        s2)))
          | s2 =  [ &_29 <- (_34, _37, _38) ]
            (any
            [ any_ (_any:ExtendResult'0.t_extendresult)-> (!  [ &_34 <- _any ]
              (any
              [ any_ (_any:borrowed (TheoryState'0.t_theorystate))-> (!  [ &_37 <- _any ]
                (any [ any_ (_any:borrowed (TheoryState'0.t_theorystate))-> (!  [ &_38 <- _any ] s3) ] )) ]
              )) ]
            )
          | s3 = bb14 ]

        | bb14 = bb27
        | bb15 = s0
          [ s0 = promoted1 (fun (pr1:TheoryState'0.t_theorystate) ->  [ &_105 <- pr1 ] s1)
          | s1 = Solver'0.t_solver {self.current}
              (fun (rbool_th'0:BoolTheory'0.t_booltheory) (rbool_state'0:TheoryState'0.t_theorystate) (rlra_th'0:LRATheory'0.t_lratheory) (rlra_state'0:TheoryState'0.t_theorystate) ->
                eq'0 {rlra_state'0} {_105} (fun (_ret':bool) ->  [ &_39 <- _ret' ] s2))
          | s2 = bb16 ]

        | bb16 = any [ br0 -> {_39 = false} (! bb20) | br1 -> {_39} (! bb17) ]
        | bb17 = s0
          [ s0 = Solver'0.t_solver {self.current}
              (fun (rbool_th'0:BoolTheory'0.t_booltheory) (rbool_state'0:TheoryState'0.t_theorystate) (rlra_th'0:LRATheory'0.t_lratheory) (rlra_state'0:TheoryState'0.t_theorystate) ->
                Borrow.borrow_mut <LRATheory'0.t_lratheory> {rlra_th'0}
                  (fun (_ret':borrowed (LRATheory'0.t_lratheory)) ->
                     [ &_44 <- _ret' ]
                    Solver'0.t_solver {self.current}
                      (fun (l_bool_th'0:BoolTheory'0.t_booltheory) (l_bool_state'0:TheoryState'0.t_theorystate) (l_lra_th'0:LRATheory'0.t_lratheory) (l_lra_state'0:TheoryState'0.t_theorystate) ->

                        [ &self <- { self with current = Solver'0.C_Solver l_bool_th'0 l_bool_state'0 _44.final l_lra_state'0 ; } ]

                        s1)))
          | s1 = Borrow.borrow_mut <Trail'0.t_trail> {trail.current}
              (fun (_ret':borrowed (Trail'0.t_trail)) ->
                 [ &_45 <- _ret' ]
                 [ &trail <- { trail with current = _45.final ; } ]
                s2)
          | s2 = extend'1 {_44} {_45} (fun (_ret':ExtendResult'0.t_extendresult) ->  [ &_43 <- _ret' ] s3)
          | s3 = bb18 ]

        | bb18 = s0
          [ s0 = Solver'0.t_solver {self.current}
              (fun (rbool_th'0:BoolTheory'0.t_booltheory) (rbool_state'0:TheoryState'0.t_theorystate) (rlra_th'0:LRATheory'0.t_lratheory) (rlra_state'0:TheoryState'0.t_theorystate) ->
                Borrow.borrow_mut <TheoryState'0.t_theorystate> {rlra_state'0}
                  (fun (_ret':borrowed (TheoryState'0.t_theorystate)) ->
                     [ &_46 <- _ret' ]
                    Solver'0.t_solver {self.current}
                      (fun (l_bool_th'0:BoolTheory'0.t_booltheory) (l_bool_state'0:TheoryState'0.t_theorystate) (l_lra_th'0:LRATheory'0.t_lratheory) (l_lra_state'0:TheoryState'0.t_theorystate) ->

                        [ &self <- { self with current = Solver'0.C_Solver l_bool_th'0 l_bool_state'0 l_lra_th'0 _46.final ; } ]

                        s1)))
          | s1 = Solver'0.t_solver {self.current}
              (fun (rbool_th'1:BoolTheory'0.t_booltheory) (rbool_state'1:TheoryState'0.t_theorystate) (rlra_th'1:LRATheory'0.t_lratheory) (rlra_state'1:TheoryState'0.t_theorystate) ->
                Borrow.borrow_mut <TheoryState'0.t_theorystate> {rbool_state'1}
                  (fun (_ret':borrowed (TheoryState'0.t_theorystate)) ->
                     [ &_47 <- _ret' ]
                    Solver'0.t_solver {self.current}
                      (fun (l_bool_th'1:BoolTheory'0.t_booltheory) (l_bool_state'1:TheoryState'0.t_theorystate) (l_lra_th'1:LRATheory'0.t_lratheory) (l_lra_state'1:TheoryState'0.t_theorystate) ->

                        [ &self <- { self with current = Solver'0.C_Solver l_bool_th'1 _47.final l_lra_th'1 l_lra_state'1 ; } ]

                        s2)))
          | s2 =  [ &_29 <- (_43, _46, _47) ]
            (any
            [ any_ (_any:ExtendResult'0.t_extendresult)-> (!  [ &_43 <- _any ]
              (any
              [ any_ (_any:borrowed (TheoryState'0.t_theorystate))-> (!  [ &_46 <- _any ]
                (any [ any_ (_any:borrowed (TheoryState'0.t_theorystate))-> (!  [ &_47 <- _any ] s3) ] )) ]
              )) ]
            )
          | s3 = bb19 ]

        | bb19 = bb27
        | bb27 = s0
          [ s0 =  [ &answer <- let (r'0, _, _) = _29 in r'0 ]
            (any
            [ any_ (_any:ExtendResult'0.t_extendresult)-> (!  [ &_29 <- let (_, l'2, l'3) = _29 in (_any, l'2, l'3) ]
              s1) ]
            )
          | s1 =  [ &state <- let (_, r'1, _) = _29 in r'1 ]
            (any
            [ any_ (_any:borrowed (TheoryState'0.t_theorystate))-> (!
              [ &_29 <- let (l'5, _, l'7) = _29 in (l'5, _any, l'7) ]

              s2) ]
            )
          | s2 =  [ &other <- let (_, _, r'2) = _29 in r'2 ]
            (any
            [ any_ (_any:borrowed (TheoryState'0.t_theorystate))-> (!
              [ &_29 <- let (l'9, l'10, _) = _29 in (l'9, l'10, _any) ]

              s3) ]
            )
          | s3 = bb28 ]

        | bb28 = s0
          [ s0 = {[@expl:assertion] [%#sconcrete6] invariant'0 trail.current} s1
          | s1 = {[@expl:assertion] [%#sconcrete7] impls'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost (Snapshot.inner old_trail).current)) (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost trail.current))}
            s2
          | s2 = any
            [ br0 (a:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> {answer
              = ExtendResult'0.C_Conflict a}
              (! bb30)
            | br1 (a:Term'0.t_term) (b:Value'0.t_value)-> {answer = ExtendResult'0.C_Decision a b} (! bb31)
            | br2 -> {answer = ExtendResult'0.C_Satisfied } (! bb32) ]
             ]

        | bb32 = s0
          [ s0 =  [ &_94 <- TheoryState'0.C_Sat ] s1
          | s1 =  [ &state <- { state with current = _94 ; } ]
            (any [ any_ (_any:TheoryState'0.t_theorystate)-> (!  [ &_94 <- _any ] s2) ] )
          | s2 = -{resolve'0 state}- s3
          | s3 =  [ &_95 <- Option'0.C_None ] s4
          | s4 = bb53 ]

        | bb53 = s0
          [ s0 =  [ &decision <- _95 ]
            (any [ any_ (_any:Option'0.t_option (Term'0.t_term, Value'0.t_value))-> (!  [ &_95 <- _any ] s1) ] )
          | s1 = bb55 ]

        | bb55 = s0
          [ s0 = promoted0 (fun (pr0:TheoryState'0.t_theorystate) ->  [ &_104 <- pr0 ] s1)
          | s1 = eq'0 {other.current} {_104} (fun (_ret':bool) ->  [ &_96 <- _ret' ] s2)
          | s2 = bb56 ]

        | bb56 = any [ br0 -> {_96 = false} (! bb58) | br1 -> {_96} (! bb57) ]
        | bb57 = s0
          [ s0 =  [ &_100 <- TheoryState'0.C_Unknown ] s1
          | s1 =  [ &other <- { other with current = _100 ; } ]
            (any [ any_ (_any:TheoryState'0.t_theorystate)-> (!  [ &_100 <- _any ] s2) ] )
          | s2 = -{resolve'0 other}- s3
          | s3 = bb59 ]

        | bb58 = s0 [ s0 = -{resolve'0 other}- s1 | s1 = bb59 ]
        | bb59 = bb60
        | bb31 = bb43
        | bb43 = s0
          [ s0 = -{resolve'0 other}- s1
          | s1 = ExtendResult'0.decision {answer}
              (fun (r0'0:Term'0.t_term) (r1'0:Value'0.t_value) ->
                 [ &t1 <- r0'0 ]
                (any
                [ any_ (_any:Term'0.t_term)-> (! ExtendResult'0.decision {answer}
                    (fun (l_0'0:Term'0.t_term) (l_1'0:Value'0.t_value) ->
                       [ &answer <- ExtendResult'0.C_Decision _any l_1'0 ]
                      s2)) ]
                ))
          | s2 = ExtendResult'0.decision {answer}
              (fun (r0'1:Term'0.t_term) (r1'1:Value'0.t_value) ->
                 [ &v1 <- r1'1 ]
                (any
                [ any_ (_any:Value'0.t_value)-> (! ExtendResult'0.decision {answer}
                    (fun (l_0'1:Term'0.t_term) (l_1'1:Value'0.t_value) ->
                       [ &answer <- ExtendResult'0.C_Decision l_0'1 _any ]
                      s3)) ]
                ))
          | s3 =  [ &_87 <- TheoryState'0.C_Decision ] s4
          | s4 =  [ &state <- { state with current = _87 ; } ]
            (any [ any_ (_any:TheoryState'0.t_theorystate)-> (!  [ &_87 <- _any ] s5) ] )
          | s5 = -{resolve'0 state}- s6
          | s6 = {[@expl:assertion] [%#sconcrete8] acceptable'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost trail.current)) (shallow_model'0 t1) (shallow_model'1 v1)}
            s7
          | s7 = bb44 ]

        | bb44 = s0
          [ s0 =  [ &_91 <- (t1, v1) ]
            (any
            [ any_ (_any:Term'0.t_term)-> (!  [ &t1 <- _any ]
              (any [ any_ (_any:Value'0.t_value)-> (!  [ &v1 <- _any ] s1) ] )) ]
            )
          | s1 = bb45 ]

        | bb45 = bb46
        | bb46 = s0
          [ s0 =  [ &_90 <- Option'0.C_Some _91 ]
            (any [ any_ (_any:(Term'0.t_term, Value'0.t_value))-> (!  [ &_91 <- _any ] s1) ] )
          | s1 = bb47 ]

        | bb47 = bb48
        | bb48 = s0
          [ s0 =  [ &decision <- _90 ]
            (any [ any_ (_any:Option'0.t_option (Term'0.t_term, Value'0.t_value))-> (!  [ &_90 <- _any ] s1) ] )
          | s1 = bb50 ]

        | bb50 = bb51
        | bb51 = bb52
        | bb52 = bb60
        | bb30 = bb33
        | bb33 = s0
          [ s0 = -{resolve'0 other}- s1
          | s1 = -{resolve'0 state}- s2
          | s2 = ExtendResult'0.conflict {answer}
              (fun (r0'0:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->
                 [ &c <- r0'0 ]
                (any
                [ any_ (_any:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> (! ExtendResult'0.conflict
                    {answer}
                    (fun (l_0'0:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->
                       [ &answer <- ExtendResult'0.C_Conflict _any ]
                      s3)) ]
                ))
          | s3 =  [ &_70 <- TheoryState'0.C_Unknown ] s4
          | s4 = Solver'0.t_solver {self.current}
              (fun (l_bool_th'0:BoolTheory'0.t_booltheory) (l_bool_state'0:TheoryState'0.t_theorystate) (l_lra_th'0:LRATheory'0.t_lratheory) (l_lra_state'0:TheoryState'0.t_theorystate) ->
                 [ &self <- { self with current = Solver'0.C_Solver l_bool_th'0 _70 l_lra_th'0 l_lra_state'0 ; } ]
                (any [ any_ (_any:TheoryState'0.t_theorystate)-> (!  [ &_70 <- _any ] s5) ] ))
          | s5 =  [ &_71 <- TheoryState'0.C_Unknown ] s6
          | s6 = Solver'0.t_solver {self.current}
              (fun (l_bool_th'1:BoolTheory'0.t_booltheory) (l_bool_state'1:TheoryState'0.t_theorystate) (l_lra_th'1:LRATheory'0.t_lratheory) (l_lra_state'1:TheoryState'0.t_theorystate) ->
                 [ &self <- { self with current = Solver'0.C_Solver l_bool_th'1 l_bool_state'1 l_lra_th'1 _71 ; } ]
                (any [ any_ (_any:TheoryState'0.t_theorystate)-> (!  [ &_71 <- _any ] s7) ] ))
          | s7 =  [ &_72 <- Option'0.C_None ] s8
          | s8 = bb34 ]

        | bb34 = s0
          [ s0 =  [ &decision <- _72 ]
            (any [ any_ (_any:Option'0.t_option (Term'0.t_term, Value'0.t_value))-> (!  [ &_72 <- _any ] s1) ] )
          | s1 = bb36 ]

        | bb36 = s0
          [ s0 =  [ &_79 <- c ] s1
          | s1 = deref'0 {_79} (fun (_ret':slice (TrailIndex'0.t_trailindex)) ->  [ &_77 <- _ret' ] s2)
          | s2 = bb37 ]

        | bb37 = s0 [ s0 = max_level'0 {trail.current} {_77} (fun (_ret':usize) ->  [ &_74 <- _ret' ] s1) | s1 = bb38 ]
        | bb38 = s0
          [ s0 = UIntSize.gt {_74} {[%#sconcrete9] (0 : usize)}
              (fun (_ret':bool) ->  [ &_73 <- _ret' ] (any [ any_ (_any:usize)-> (!  [ &_74 <- _any ] s1) ] ))
          | s1 = any [ br0 -> {_73 = false} (! bb41) | br1 -> {_73} (! bb39) ]  ]

        | bb39 = s0
          [ s0 = Borrow.borrow_mut <Trail'0.t_trail> {trail.current}
              (fun (_ret':borrowed (Trail'0.t_trail)) ->
                 [ &_82 <- _ret' ]
                 [ &trail <- { trail with current = _82.final ; } ]
                s1)
          | s1 = resolve_conflict'0 {self.current} {_82} {c} (fun (_ret':()) ->  [ &_80 <- _ret' ] s2)
          | s2 = bb40 ]

        | bb40 = bb42
        | bb42 = bb60
        | bb60 = s0 [ s0 = sat'0 {self.current} (fun (_ret':bool) ->  [ &_101 <- _ret' ] s1) | s1 = bb61 ]
        | bb61 = any [ br0 -> {_101 = false} (! bb63) | br1 -> {_101} (! bb62) ]
        | bb63 = bb64
        | bb64 = bb4
        | bb20 = s0
          [ s0 = Borrow.borrow_mut <Option'0.t_option (Term'0.t_term, Value'0.t_value)> {decision}
              (fun (_ret':borrowed (Option'0.t_option (Term'0.t_term, Value'0.t_value))) ->
                 [ &_49 <- _ret' ]
                 [ &decision <- _49.final ]
                s1)
          | s1 = take'0 {_49} (fun (_ret':Option'0.t_option (Term'0.t_term, Value'0.t_value)) ->  [ &_48 <- _ret' ] s2)
          | s2 = bb21 ]

        | bb21 = any
          [ br0 -> {_48 = Option'0.C_None } (! bb26)
          | br1 (a:(Term'0.t_term, Value'0.t_value))-> {_48 = Option'0.C_Some a} (! bb22) ]

        | bb22 = bb23
        | bb23 = s0
          [ s0 = Option'0.some <(Term'0.t_term, Value'0.t_value)> {_48}
              (fun (r0'0:(Term'0.t_term, Value'0.t_value)) ->
                 [ &t <- let (r'0, _) = r0'0 in r'0 ]
                (any
                [ any_ (_any:Term'0.t_term)-> (! Option'0.some <(Term'0.t_term, Value'0.t_value)> {_48}
                    (fun (l_0'0:(Term'0.t_term, Value'0.t_value)) ->
                       [ &_48 <- Option'0.C_Some (let (_, l'2) = l_0'0 in (_any, l'2)) ]
                      s1)) ]
                ))
          | s1 = Option'0.some <(Term'0.t_term, Value'0.t_value)> {_48}
              (fun (r0'1:(Term'0.t_term, Value'0.t_value)) ->
                 [ &v <- let (_, r'1) = r0'1 in r'1 ]
                (any
                [ any_ (_any:Value'0.t_value)-> (! Option'0.some <(Term'0.t_term, Value'0.t_value)> {_48}
                    (fun (l_0'1:(Term'0.t_term, Value'0.t_value)) ->
                       [ &_48 <- Option'0.C_Some (let (l'4, _) = l_0'1 in (l'4, _any)) ]
                      s2)) ]
                ))
          | s2 = Borrow.borrow_mut <Trail'0.t_trail> {trail.current}
              (fun (_ret':borrowed (Trail'0.t_trail)) ->
                 [ &_55 <- _ret' ]
                 [ &trail <- { trail with current = _55.final ; } ]
                s3)
          | s3 = add_decision'0 {_55} {t} {v} (fun (_ret':()) ->  [ &_54 <- _ret' ] s4)
          | s4 = bb24 ]

        | bb24 = s0 [ s0 = {[@expl:assertion] [%#sconcrete10] decision = Option'0.C_None} s1 | s1 = bb25 ]
        | bb25 = s0
          [ s0 =  [ &_60 <- TheoryState'0.C_Unknown ] s1
          | s1 = Solver'0.t_solver {self.current}
              (fun (l_bool_th'0:BoolTheory'0.t_booltheory) (l_bool_state'0:TheoryState'0.t_theorystate) (l_lra_th'0:LRATheory'0.t_lratheory) (l_lra_state'0:TheoryState'0.t_theorystate) ->
                 [ &self <- { self with current = Solver'0.C_Solver l_bool_th'0 _60 l_lra_th'0 l_lra_state'0 ; } ]
                (any [ any_ (_any:TheoryState'0.t_theorystate)-> (!  [ &_60 <- _any ] s2) ] ))
          | s2 =  [ &_61 <- TheoryState'0.C_Unknown ] s3
          | s3 = Solver'0.t_solver {self.current}
              (fun (l_bool_th'1:BoolTheory'0.t_booltheory) (l_bool_state'1:TheoryState'0.t_theorystate) (l_lra_th'1:LRATheory'0.t_lratheory) (l_lra_state'1:TheoryState'0.t_theorystate) ->
                 [ &self <- { self with current = Solver'0.C_Solver l_bool_th'1 l_bool_state'1 l_lra_th'1 _61 ; } ]
                (any [ any_ (_any:TheoryState'0.t_theorystate)-> (!  [ &_61 <- _any ] s4) ] ))
          | s4 = bb65 ]

        | bb65 = bb66
        | bb66 = bb67
        | bb67 = bb4 ]
         ]

    | bb9 = s0 [ s0 = -{resolve'1 trail}- s1 | s1 = -{resolve'2 self}- s2 | s2 = {[%#sconcrete11] false} any ]
    | bb29 = s0
      [ s0 = -{resolve'0 other}- s1
      | s1 = -{resolve'0 state}- s2
      | s2 = -{resolve'1 trail}- s3
      | s3 = -{resolve'2 self}- s4
      | s4 = {[%#sconcrete12] false} any ]

    | bb62 = s0
      [ s0 = -{resolve'1 trail}- s1 | s1 = -{resolve'2 self}- s2 | s2 =  [ &_0 <- Answer'0.C_Sat ] s3 | s3 = bb69 ]

    | bb41 = s0
      [ s0 = -{resolve'3 c}- s1
      | s1 = -{resolve'1 trail}- s2
      | s2 = -{resolve'2 self}- s3
      | s3 =  [ &_0 <- Answer'0.C_Unsat ] s4
      | s4 = bb68 ]

    | bb68 = bb69
    | bb69 = bb70
    | bb70 = bb71
    | bb71 = return' {_0}
    | bb26 = s0 [ s0 = -{resolve'1 trail}- s1 | s1 = -{resolve'2 self}- s2 | s2 = {[%#spanic13] false} any ]  ]
    )
    [ & _0 : Answer'0.t_answer = any_l ()
    | & self : borrowed (Solver'0.t_solver) = self
    | & trail : borrowed (Trail'0.t_trail) = trail
    | & _6 : TheoryState'0.t_theorystate = any_l ()
    | & _7 : TheoryState'0.t_theorystate = any_l ()
    | & old_trail : Snapshot.snap_ty (borrowed (Trail'0.t_trail)) = any_l ()
    | & decision : Option'0.t_option (Term'0.t_term, Value'0.t_value) = any_l ()
    | & iter_trail : Snapshot.snap_ty (Trail'0.t_trail) = any_l ()
    | & len : usize = any_l ()
    | & _23 : bool = any_l ()
    | & answer : ExtendResult'0.t_extendresult = any_l ()
    | & state : borrowed (TheoryState'0.t_theorystate) = any_l ()
    | & other : borrowed (TheoryState'0.t_theorystate) = any_l ()
    | & _29 : (ExtendResult'0.t_extendresult, borrowed (TheoryState'0.t_theorystate), borrowed (TheoryState'0.t_theorystate)) = any_l ()
    | & _30 : bool = any_l ()
    | & _34 : ExtendResult'0.t_extendresult = any_l ()
    | & _35 : borrowed (BoolTheory'0.t_booltheory) = any_l ()
    | & _36 : borrowed (Trail'0.t_trail) = any_l ()
    | & _37 : borrowed (TheoryState'0.t_theorystate) = any_l ()
    | & _38 : borrowed (TheoryState'0.t_theorystate) = any_l ()
    | & _39 : bool = any_l ()
    | & _43 : ExtendResult'0.t_extendresult = any_l ()
    | & _44 : borrowed (LRATheory'0.t_lratheory) = any_l ()
    | & _45 : borrowed (Trail'0.t_trail) = any_l ()
    | & _46 : borrowed (TheoryState'0.t_theorystate) = any_l ()
    | & _47 : borrowed (TheoryState'0.t_theorystate) = any_l ()
    | & _48 : Option'0.t_option (Term'0.t_term, Value'0.t_value) = any_l ()
    | & _49 : borrowed (Option'0.t_option (Term'0.t_term, Value'0.t_value)) = any_l ()
    | & t : Term'0.t_term = any_l ()
    | & v : Value'0.t_value = any_l ()
    | & _54 : () = any_l ()
    | & _55 : borrowed (Trail'0.t_trail) = any_l ()
    | & _60 : TheoryState'0.t_theorystate = any_l ()
    | & _61 : TheoryState'0.t_theorystate = any_l ()
    | & c : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) = any_l ()
    | & _70 : TheoryState'0.t_theorystate = any_l ()
    | & _71 : TheoryState'0.t_theorystate = any_l ()
    | & _72 : Option'0.t_option (Term'0.t_term, Value'0.t_value) = any_l ()
    | & _73 : bool = any_l ()
    | & _74 : usize = any_l ()
    | & _77 : slice (TrailIndex'0.t_trailindex) = any_l ()
    | & _79 : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) = any_l ()
    | & _80 : () = any_l ()
    | & _82 : borrowed (Trail'0.t_trail) = any_l ()
    | & t1 : Term'0.t_term = any_l ()
    | & v1 : Value'0.t_value = any_l ()
    | & _87 : TheoryState'0.t_theorystate = any_l ()
    | & _90 : Option'0.t_option (Term'0.t_term, Value'0.t_value) = any_l ()
    | & _91 : (Term'0.t_term, Value'0.t_value) = any_l ()
    | & _94 : TheoryState'0.t_theorystate = any_l ()
    | & _95 : Option'0.t_option (Term'0.t_term, Value'0.t_value) = any_l ()
    | & _96 : bool = any_l ()
    | & _100 : TheoryState'0.t_theorystate = any_l ()
    | & _101 : bool = any_l ()
    | & _104 : TheoryState'0.t_theorystate = any_l ()
    | & _105 : TheoryState'0.t_theorystate = any_l ()
    | & _106 : TheoryState'0.t_theorystate = any_l ()
    | & old_4_0 : Snapshot.snap_ty (borrowed (Solver'0.t_solver)) = any_l ()
    | & old_4_1 : Snapshot.snap_ty (borrowed (Trail'0.t_trail)) = any_l () ]

    [ return' (result:Answer'0.t_answer)-> {[@expl:postcondition] [%#sconcrete15] impls'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost trail.current)) (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost trail.final))}
      {[@expl:postcondition] [%#sconcrete14] invariant'0 trail.final}
      (! return' {result}) ]

end
module Cdsat_Concrete_SetRemove2_Impl
  type t

  let%span sconcrete0 = "/Users/xavier/Code/cdsat/src/concrete.rs" 291 18 291 19

  let%span sconcrete1 = "/Users/xavier/Code/cdsat/src/concrete.rs" 291 30 291 31

  let%span sconcrete2 = "/Users/xavier/Code/cdsat/src/concrete.rs" 290 0 290 67

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span4 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  predicate invariant'1 (self : t)

  predicate inv'1 (_x : t)

  axiom inv'1 : forall x : t . inv'1 x = true

  use set.Fset

  predicate invariant'0 (self : Fset.fset t)

  predicate inv'0 (_x : Fset.fset t)

  axiom inv'0 : forall x : Fset.fset t . inv'0 x = true

  use set.Fset

  predicate contains'0 [@inline:trivial] (self : Fset.fset t) (e : t) =
    [%#span3] Fset.mem e self

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset t) (a : t) : Fset.fset t =
    [%#span4] Fset.remove a self

  constant s  : Fset.fset t

  constant a  : t

  function set_remove2 [#"/Users/xavier/Code/cdsat/src/concrete.rs" 291 0 291 35] (s : Fset.fset t) (a : t) : ()

  goal vc_set_remove2 : ([%#sconcrete1] inv'1 a)
   -> ([%#sconcrete0] inv'0 s)
   -> ([%#sconcrete2] forall x : t . inv'1 x  -> contains'0 (remove'0 s a) x  -> contains'0 s x)
end
module Core_Fmt_Rt_Alignment_Type
  type t_alignment  =
    | C_Left
    | C_Right
    | C_Center
    | C_Unknown

  function any_l (_ : 'b) : 'a

  let rec left (input:t_alignment) (ret  )= any
    [ good -> {C_Left  = input} (! ret) | bad -> {C_Left  <> input} {false} any ]


  let rec right (input:t_alignment) (ret  )= any
    [ good -> {C_Right  = input} (! ret) | bad -> {C_Right  <> input} {false} any ]


  let rec center (input:t_alignment) (ret  )= any
    [ good -> {C_Center  = input} (! ret) | bad -> {C_Center  <> input} {false} any ]


  let rec unknown (input:t_alignment) (ret  )= any
    [ good -> {C_Unknown  = input} (! ret) | bad -> {C_Unknown  <> input} {false} any ]

end
module Core_Fmt_Formatter_Type
  use prelude.prelude.Opaque

  use prelude.prelude.Borrow

  use prelude.prelude.UIntSize

  use Core_Option_Option_Type as Option'0

  use Core_Fmt_Rt_Alignment_Type as Alignment'0

  use prelude.prelude.Char

  use prelude.prelude.UInt32

  use prelude.prelude.Int

  type t_formatter  =
    | C_Formatter uint32 char (Alignment'0.t_alignment) (Option'0.t_option usize) (Option'0.t_option usize) (borrowed dyn)

  function any_l (_ : 'b) : 'a

  let rec t_formatter (input:t_formatter) (ret  (flags:uint32) (fill:char) (align:Alignment'0.t_alignment) (width:Option'0.t_option usize) (precision:Option'0.t_option usize) (buf:borrowed dyn))= any
    [ good (flags:uint32) (fill:char) (align:Alignment'0.t_alignment) (width:Option'0.t_option usize) (precision:Option'0.t_option usize) (buf:borrowed dyn)-> {C_Formatter flags fill align width precision buf
      = input}
      (! ret {flags} {fill} {align} {width} {precision} {buf})
    | bad (flags:uint32) (fill:char) (align:Alignment'0.t_alignment) (width:Option'0.t_option usize) (precision:Option'0.t_option usize) (buf:borrowed dyn)-> {C_Formatter flags fill align width precision buf
      <> input}
      {false}
      any ]

end
module Core_Fmt_Error_Type
  type t_error  =
    | C_Error

  function any_l (_ : 'b) : 'a

  let rec t_error (input:t_error) (ret  )= any
    [ good -> {C_Error  = input} (! ret) | bad -> {C_Error  <> input} {false} any ]

end
module Cdsat_Concrete_Impl4_Fmt
  let%span sconcrete0 = "/Users/xavier/Code/cdsat/src/concrete.rs" 293 9 293 14

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 26 20 26 34

  use prelude.prelude.Intrinsic

  use Core_Fmt_Error_Type as Error'0

  use Core_Result_Result_Type as Result'0

  use Core_Fmt_Formatter_Type as Formatter'0

  use prelude.prelude.Borrow

  let rec write_str'0 (self:borrowed (Formatter'0.t_formatter)) (data:string) (return'  (ret:Result'0.t_result () (Error'0.t_error)))= any
    [ return' (result:Result'0.t_result () (Error'0.t_error))-> (! return' {result}) ]


  predicate resolve'0 (self : borrowed (Formatter'0.t_formatter)) =
    [%#span1] self.final = self.current

  use Cdsat_Concrete_Answer_Type as Answer'0

  let rec fmt (self:Answer'0.t_answer) (f:borrowed (Formatter'0.t_formatter)) (return'  (ret:Result'0.t_result () (Error'0.t_error)))= (! bb0
    [ bb0 = s0
      [ s0 = Borrow.borrow_final <Formatter'0.t_formatter> {f.current} {Borrow.get_id f}
          (fun (_ret':borrowed (Formatter'0.t_formatter)) ->
             [ &_3 <- _ret' ]
             [ &f <- { f with current = _3.final ; } ]
            s1)
      | s1 = any [ br0 -> {self = Answer'0.C_Sat } (! bb2) | br1 -> {self = Answer'0.C_Unsat } (! bb3) ]  ]

    | bb1 = s0 [ s0 = -{resolve'0 _3}- s1 | s1 = -{resolve'0 f}- s2 | s2 = {[%#sconcrete0] false} any ]
    | bb3 = s0 [ s0 =  [ &_7 <- [%#sconcrete0] "Unsat" ] s1 | s1 =  [ &_4 <- _7 ] s2 | s2 = bb5 ]
    | bb2 = bb4
    | bb4 = s0 [ s0 =  [ &_6 <- [%#sconcrete0] "Sat" ] s1 | s1 =  [ &_4 <- _6 ] s2 | s2 = bb5 ]
    | bb5 = s0
      [ s0 = write_str'0 {_3} {_4} (fun (_ret':Result'0.t_result () (Error'0.t_error)) ->  [ &_0 <- _ret' ] s1)
      | s1 = bb6 ]

    | bb6 = s0 [ s0 = -{resolve'0 f}- s1 | s1 = return' {_0} ]  ]
    )
    [ & _0 : Result'0.t_result () (Error'0.t_error) = any_l ()
    | & self : Answer'0.t_answer = self
    | & f : borrowed (Formatter'0.t_formatter) = f
    | & _3 : borrowed (Formatter'0.t_formatter) = any_l ()
    | & _4 : string = any_l ()
    | & _6 : string = any_l ()
    | & _7 : string = any_l () ]
     [ return' (result:Result'0.t_result () (Error'0.t_error))-> (! return' {result}) ]
end
module Cdsat_Concrete_AnswerDeepModel_Type
  type t_answerdeepmodel  =
    | C_Sat
    | C_Unsat

  function any_l (_ : 'b) : 'a

  let rec sat (input:t_answerdeepmodel) (ret  )= any
    [ good -> {C_Sat  = input} (! ret) | bad -> {C_Sat  <> input} {false} any ]


  let rec unsat (input:t_answerdeepmodel) (ret  )= any
    [ good -> {C_Unsat  = input} (! ret) | bad -> {C_Unsat  <> input} {false} any ]

end
module Cdsat_Concrete_Impl5_Eq
  let%span sconcrete0 = "/Users/xavier/Code/cdsat/src/concrete.rs" 293 16 293 25

  let%span span1 = "/Users/xavier/Code/cdsat/src/concrete.rs" 293 31 293 40

  let%span span2 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 81 8 81 28

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 46 8 46 12

  let%span span4 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 17 8 17 60

  use Cdsat_Concrete_AnswerDeepModel_Type as AnswerDeepModel'0

  use Cdsat_Concrete_Answer_Type as Answer'0

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/concrete.rs" 293 31 293 40] (self : Answer'0.t_answer) : AnswerDeepModel'0.t_answerdeepmodel

   =
    [%#span1] match self with
      | Answer'0.C_Sat -> AnswerDeepModel'0.C_Sat
      | Answer'0.C_Unsat -> AnswerDeepModel'0.C_Unsat
      end

  use prelude.prelude.Borrow

  function deep_model'0 (self : Answer'0.t_answer) : AnswerDeepModel'0.t_answerdeepmodel =
    [%#span2] deep_model'1 self

  use prelude.prelude.Intrinsic

  predicate resolve'1 (self : Answer'0.t_answer) =
    [%#span3] true

  predicate resolve'0 (self : (Answer'0.t_answer, Answer'0.t_answer)) =
    [%#span4] resolve'1 (let (a, _) = self in a) /\ resolve'1 (let (_, a) = self in a)

  let rec eq (self:Answer'0.t_answer) (rhs:Answer'0.t_answer) (return'  (ret:bool))= (! bb0
    [ bb0 = s0
      [ s0 =  [ &_4 <- (self, rhs) ] s1
      | s1 = any
        [ br0 -> {(let (r'0, _) = _4 in r'0) = Answer'0.C_Sat } (! bb2)
        | br1 -> {(let (r'0, _) = _4 in r'0) = Answer'0.C_Unsat } (! bb4) ]
         ]

    | bb9 = s0 [ s0 = -{resolve'0 _4}- s1 | s1 = bb1 ]
    | bb4 = s0
      [ s0 = -{resolve'0 _4}- s1
      | s1 = any
        [ br0 -> {(let (_, r'0) = _4 in r'0) = Answer'0.C_Sat } (! bb1)
        | br1 -> {(let (_, r'0) = _4 in r'0) = Answer'0.C_Unsat } (! bb5) ]
         ]

    | bb5 = bb7
    | bb7 = s0 [ s0 =  [ &_0 <- [%#sconcrete0] true ] s1 | s1 = bb8 ]
    | bb2 = any
      [ br0 -> {(let (_, r'0) = _4 in r'0) = Answer'0.C_Sat } (! bb3)
      | br1 -> {(let (_, r'0) = _4 in r'0) = Answer'0.C_Unsat } (! bb10) ]

    | bb10 = s0 [ s0 = -{resolve'0 _4}- s1 | s1 = bb1 ]
    | bb1 = s0 [ s0 =  [ &_0 <- [%#sconcrete0] false ] s1 | s1 = bb8 ]
    | bb3 = bb6
    | bb6 = s0 [ s0 = -{resolve'0 _4}- s1 | s1 =  [ &_0 <- [%#sconcrete0] true ] s2 | s2 = bb8 ]
    | bb8 = return' {_0} ]
    )
    [ & _0 : bool = any_l ()
    | & self : Answer'0.t_answer = self
    | & rhs : Answer'0.t_answer = rhs
    | & _4 : (Answer'0.t_answer, Answer'0.t_answer) = any_l () ]

    [ return' (result:bool)-> {[@expl:postcondition] [%#sconcrete0] result = (deep_model'0 self = deep_model'0 rhs)}
      (! return' {result}) ]

end
module Cdsat_Concrete_Impl6_AssertReceiverIsTotalEq
  use Cdsat_Concrete_Answer_Type as Answer'0

  use prelude.prelude.Borrow

  use prelude.prelude.Intrinsic

  let rec assert_receiver_is_total_eq (self:Answer'0.t_answer) (return'  (ret:()))= (! bb0 [ bb0 = return' {_0} ] )
    [ & _0 : () = any_l () ]
     [ return' (result:())-> (! return' {result}) ]
end
module Cdsat_Concrete_Impl8_Fmt
  let%span sconcrete0 = "/Users/xavier/Code/cdsat/src/concrete.rs" 299 9 299 14

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 26 20 26 34

  use prelude.prelude.Opaque

  use prelude.prelude.Intrinsic

  use Core_Fmt_Error_Type as Error'0

  use Core_Result_Result_Type as Result'0

  use Core_Fmt_Formatter_Type as Formatter'0

  use prelude.prelude.Borrow

  let rec debug_tuple_field1_finish'0 (self:borrowed (Formatter'0.t_formatter)) (name:string) (value1:dyn) (return'  (ret:Result'0.t_result () (Error'0.t_error)))= any
    [ return' (result:Result'0.t_result () (Error'0.t_error))-> (! return' {result}) ]


  let rec debug_tuple_field2_finish'0 (self:borrowed (Formatter'0.t_formatter)) (name:string) (value1:dyn) (value2:dyn) (return'  (ret:Result'0.t_result () (Error'0.t_error)))= any
    [ return' (result:Result'0.t_result () (Error'0.t_error))-> (! return' {result}) ]


  let rec write_str'0 (self:borrowed (Formatter'0.t_formatter)) (data:string) (return'  (ret:Result'0.t_result () (Error'0.t_error)))= any
    [ return' (result:Result'0.t_result () (Error'0.t_error))-> (! return' {result}) ]


  predicate resolve'0 (self : borrowed (Formatter'0.t_formatter)) =
    [%#span1] self.final = self.current

  use Cdsat_Term_Value_Type as Value'0

  use Cdsat_Term_Term_Type as Term'0

  use Cdsat_Concrete_ExtendResult_Type as ExtendResult'0

  use Alloc_Alloc_Global_Type as Global'0

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use Alloc_Vec_Vec_Type as Vec'0

  let rec fmt (self:ExtendResult'0.t_extendresult) (f:borrowed (Formatter'0.t_formatter)) (return'  (ret:Result'0.t_result () (Error'0.t_error)))= (! bb0
    [ bb0 = any
      [ br0 (a:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> {self = ExtendResult'0.C_Conflict a}
        (! bb2)
      | br1 (a:Term'0.t_term) (b:Value'0.t_value)-> {self = ExtendResult'0.C_Decision a b} (! bb3)
      | br2 -> {self = ExtendResult'0.C_Satisfied } (! bb4) ]

    | bb1 = s0 [ s0 = -{resolve'0 f}- s1 | s1 = {[%#sconcrete0] false} any ]
    | bb4 = s0
      [ s0 = Borrow.borrow_final <Formatter'0.t_formatter> {f.current} {Borrow.get_id f}
          (fun (_ret':borrowed (Formatter'0.t_formatter)) ->
             [ &_21 <- _ret' ]
             [ &f <- { f with current = _21.final ; } ]
            s1)
      | s1 =  [ &_23 <- [%#sconcrete0] "Satisfied" ] s2
      | s2 = write_str'0 {_21} {_23} (fun (_ret':Result'0.t_result () (Error'0.t_error)) ->  [ &_0 <- _ret' ] s3)
      | s3 = bb9 ]

    | bb9 = s0 [ s0 = -{resolve'0 f}- s1 | s1 = bb10 ]
    | bb3 = bb7
    | bb7 = s0
      [ s0 = ExtendResult'0.decision {self}
          (fun (r0'0:Term'0.t_term) (r1'0:Value'0.t_value) ->  [ &__self_01 <- r0'0 ] s1)
      | s1 = ExtendResult'0.decision {self}
          (fun (r0'1:Term'0.t_term) (r1'1:Value'0.t_value) ->  [ &__self_1 <- r1'1 ] s2)
      | s2 = Borrow.borrow_final <Formatter'0.t_formatter> {f.current} {Borrow.get_id f}
          (fun (_ret':borrowed (Formatter'0.t_formatter)) ->
             [ &_13 <- _ret' ]
             [ &f <- { f with current = _13.final ; } ]
            s3)
      | s3 =  [ &_15 <- [%#sconcrete0] "Decision" ] s4
      | s4 =  [ &_20 <- __self_1 ] s5
      | s5 = debug_tuple_field2_finish'0 {_13} {_15} {_16} {_18}
          (fun (_ret':Result'0.t_result () (Error'0.t_error)) ->  [ &_0 <- _ret' ] s6)
      | s6 = bb8 ]

    | bb8 = s0 [ s0 = -{resolve'0 f}- s1 | s1 = bb10 ]
    | bb2 = bb5
    | bb5 = s0
      [ s0 = ExtendResult'0.conflict {self}
          (fun (r0'0:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) ->  [ &__self_0 <- r0'0 ] s1)
      | s1 = Borrow.borrow_final <Formatter'0.t_formatter> {f.current} {Borrow.get_id f}
          (fun (_ret':borrowed (Formatter'0.t_formatter)) ->
             [ &_5 <- _ret' ]
             [ &f <- { f with current = _5.final ; } ]
            s2)
      | s2 =  [ &_7 <- [%#sconcrete0] "Conflict" ] s3
      | s3 =  [ &_10 <- __self_0 ] s4
      | s4 = debug_tuple_field1_finish'0 {_5} {_7} {_8}
          (fun (_ret':Result'0.t_result () (Error'0.t_error)) ->  [ &_0 <- _ret' ] s5)
      | s5 = bb6 ]

    | bb6 = s0 [ s0 = -{resolve'0 f}- s1 | s1 = bb10 ]
    | bb10 = return' {_0} ]
    )
    [ & _0 : Result'0.t_result () (Error'0.t_error) = any_l ()
    | & self : ExtendResult'0.t_extendresult = self
    | & f : borrowed (Formatter'0.t_formatter) = f
    | & __self_0 : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) = any_l ()
    | & _5 : borrowed (Formatter'0.t_formatter) = any_l ()
    | & _7 : string = any_l ()
    | & _8 : dyn = any_l ()
    | & _10 : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) = any_l ()
    | & __self_01 : Term'0.t_term = any_l ()
    | & __self_1 : Value'0.t_value = any_l ()
    | & _13 : borrowed (Formatter'0.t_formatter) = any_l ()
    | & _15 : string = any_l ()
    | & _16 : dyn = any_l ()
    | & _18 : dyn = any_l ()
    | & _20 : Value'0.t_value = any_l ()
    | & _21 : borrowed (Formatter'0.t_formatter) = any_l ()
    | & _23 : string = any_l () ]
     [ return' (result:Result'0.t_result () (Error'0.t_error))-> (! return' {result}) ]
end
module Cdsat_Term_Impl19_Eq
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 33 23 33 32

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span2 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span3 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span4 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span5 = "/Users/xavier/Code/cdsat/src/term.rs" 195 8 225 9

  let%span span6 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 81 8 81 28

  let%span span7 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/cmp.rs" 11 26 11 75

  let%span span8 = "/Users/xavier/Code/cdsat/src/term.rs" 14 23 14 32

  let%span span9 = "/Users/xavier/Code/cdsat/src/term.rs" 230 23 230 32

  let%span span10 = "/Users/xavier/.cargo/registry/src/index.crates.io-6f17d22bba15001f/num-rational-0.3.2/src/lib.rs" 381 11 381 15

  let%span span11 = "/Users/xavier/.cargo/registry/src/index.crates.io-6f17d22bba15001f/num-rational-0.3.2/src/lib.rs" 381 17 381 22

  let%span span12 = "/Users/xavier/Code/creusot/creusot-contracts/src/num_rational.rs" 35 22 35 71

  let%span span13 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/boxed.rs" 10 17 10 37

  let%span span14 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/boxed.rs" 1350 11 1350 15

  let%span span15 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloc/src/boxed.rs" 1350 17 1350 22

  let%span span16 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/boxed.rs" 28 26 28 75

  let%span span17 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 46 8 46 12

  let%span span18 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 17 8 17 60

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  predicate invariant'1 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) =
    [%#span1] true

  predicate inv'1 (_x : Ratio'0.t_ratio (BigInt'0.t_bigint))

  axiom inv'1 : forall x : Ratio'0.t_ratio (BigInt'0.t_bigint) . inv'1 x = true

  use Cdsat_Term_Term_Type as Term'0

  predicate invariant'0 (self : Term'0.t_term) =
    [%#span1] true

  predicate inv'0 (_x : Term'0.t_term)

  axiom inv'0 : forall x : Term'0.t_term . inv'0 x = true

  use prelude.prelude.Real

  use Cdsat_Term_Value_Type as Value'0

  use Cdsat_Theory_Sort_Type as Sort'1

  use Cdsat_Term_Sort_Type as Sort'0

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  use Cdsat_Theory_Value_Type as Value'1

  function deep_model'8 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'9 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span2] match self with
      | Value'0.C_Bool b -> Value'1.C_Bool b
      | Value'0.C_Rat br -> Value'1.C_Rat (deep_model'8 br)
      end

  use Cdsat_Theory_Var_Type as Var'0

  function deep_model'10 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'0.t_sort) : Sort'1.t_sort =
    [%#span3] match self with
      | Sort'0.C_Boolean -> Sort'1.C_Boolean
      | Sort'0.C_Rational -> Sort'1.C_Rational
      end

  use prelude.prelude.UIntSize

  function deep_model'11 (self : usize) : int =
    [%#span4] UIntSize.to_int self

  use Cdsat_Theory_Term_Type as Term'1

  function deep_model'6 [#"/Users/xavier/Code/cdsat/src/term.rs" 193 4 193 44] (self : Term'0.t_term) : Term'1.t_term =
    [%#span5] match self with
      | Term'0.C_Variable v s -> Term'1.C_Variable (Var'0.C_Var (deep_model'11 v) (deep_model'10 s))
      | Term'0.C_Value v -> Term'1.C_Value (deep_model'9 v)
      | Term'0.C_Plus l r -> Term'1.C_Plus (deep_model'6 l) (deep_model'6 r)
      | Term'0.C_Eq l r -> Term'1.C_Eq (deep_model'6 l) (deep_model'6 r)
      | Term'0.C_Conj l r -> Term'1.C_Conj (deep_model'6 l) (deep_model'6 r)
      | Term'0.C_Disj l r -> Term'1.C_Disj (deep_model'6 l) (deep_model'6 r)
      | Term'0.C_Neg t -> Term'1.C_Neg (deep_model'6 t)
      | Term'0.C_Impl l r -> Term'1.C_Disj (Term'1.C_Neg (deep_model'6 l)) (deep_model'6 r)
      | Term'0.C_Times l r -> Term'1.C_Plus (Term'1.C_Value (Value'1.C_Rat (deep_model'8 l))) (deep_model'6 r)
      | Term'0.C_Lt l r -> Term'1.C_Eq (deep_model'6 l) (deep_model'6 r)
      end

  use prelude.prelude.Borrow

  function deep_model'0 (self : Term'0.t_term) : Term'1.t_term =
    [%#span6] deep_model'6 self

  use prelude.prelude.Intrinsic

  use prelude.prelude.Int

  function deep_model'5 (self : usize) : int =
    [%#span6] deep_model'11 self

  let rec eq'4 (self:usize) (other:usize) (return'  (ret:bool))= any
    [ return' (result:bool)-> {[%#span7] result = (deep_model'5 self = deep_model'5 other)} (! return' {result}) ]


  function deep_model'4 (self : Sort'0.t_sort) : Sort'1.t_sort =
    [%#span6] deep_model'10 self

  let rec eq'3 (self:Sort'0.t_sort) (rhs:Sort'0.t_sort) (return'  (ret:bool))= any
    [ return' (result:bool)-> {[%#span8] result = (deep_model'4 self = deep_model'4 rhs)} (! return' {result}) ]


  function deep_model'3 (self : Value'0.t_value) : Value'1.t_value =
    [%#span6] deep_model'9 self

  let rec eq'2 (self:Value'0.t_value) (rhs:Value'0.t_value) (return'  (ret:bool))= any
    [ return' (result:bool)-> {[%#span9] result = (deep_model'3 self = deep_model'3 rhs)} (! return' {result}) ]


  function deep_model'2 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real =
    [%#span6] deep_model'8 self

  let rec eq'1 (self:Ratio'0.t_ratio (BigInt'0.t_bigint)) (other:Ratio'0.t_ratio (BigInt'0.t_bigint)) (return'  (ret:bool))= {[@expl:precondition] [%#span11] inv'1 other}
    {[@expl:precondition] [%#span10] inv'1 self}
    any [ return' (result:bool)-> {[%#span12] result = (deep_model'2 self = deep_model'2 other)} (! return' {result}) ]

  use Alloc_Boxed_Box_Type as Box'0

  use Alloc_Alloc_Global_Type as Global'0

  function deep_model'7 (self : Term'0.t_term) : Term'1.t_term =
    [%#span13] deep_model'6 self

  function deep_model'1 (self : Term'0.t_term) : Term'1.t_term =
    [%#span6] deep_model'7 self

  let rec eq'0 (self:Term'0.t_term) (other:Term'0.t_term) (return'  (ret:bool))= {[@expl:precondition] [%#span15] inv'0 other}
    {[@expl:precondition] [%#span14] inv'0 self}
    any [ return' (result:bool)-> {[%#span16] result = (deep_model'1 self = deep_model'1 other)} (! return' {result}) ]

  predicate resolve'1 (self : Term'0.t_term) =
    [%#span17] true

  predicate resolve'0 (self : (Term'0.t_term, Term'0.t_term)) =
    [%#span18] resolve'1 (let (a, _) = self in a) /\ resolve'1 (let (_, a) = self in a)

  let rec eq (self:Term'0.t_term) (rhs:Term'0.t_term) (return'  (ret:bool))= (! bb0
    [ bb0 = s0
      [ s0 =  [ &_4 <- (self, rhs) ] s1
      | s1 = any
        [ br0 (a:usize) (b:Sort'0.t_sort)-> {(let (r'0, _) = _4 in r'0) = Term'0.C_Variable a b} (! bb2)
        | br1 (a:Value'0.t_value)-> {(let (r'0, _) = _4 in r'0) = Term'0.C_Value a} (! bb4)
        | br2 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (r'0, _) = _4 in r'0) = Term'0.C_Plus a b} (! bb6)
        | br3 (a:Ratio'0.t_ratio (BigInt'0.t_bigint)) (b:Term'0.t_term)-> {(let (r'0, _) = _4 in r'0)
          = Term'0.C_Times a b}
          (! bb8)
        | br4 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (r'0, _) = _4 in r'0) = Term'0.C_Eq a b} (! bb10)
        | br5 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (r'0, _) = _4 in r'0) = Term'0.C_Lt a b} (! bb12)
        | br6 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (r'0, _) = _4 in r'0) = Term'0.C_Conj a b} (! bb14)
        | br7 (a:Term'0.t_term)-> {(let (r'0, _) = _4 in r'0) = Term'0.C_Neg a} (! bb16)
        | br8 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (r'0, _) = _4 in r'0) = Term'0.C_Disj a b} (! bb18)
        | br9 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (r'0, _) = _4 in r'0) = Term'0.C_Impl a b} (! bb20) ]
         ]

    | bb20 = any
      [ br0 (a:usize) (b:Sort'0.t_sort)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Variable a b} (! bb1)
      | br1 (a:Value'0.t_value)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Value a} (! bb1)
      | br2 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Plus a b} (! bb1)
      | br3 (a:Ratio'0.t_ratio (BigInt'0.t_bigint)) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0)
        = Term'0.C_Times a b}
        (! bb1)
      | br4 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Eq a b} (! bb1)
      | br5 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Lt a b} (! bb1)
      | br6 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Conj a b} (! bb1)
      | br7 (a:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Neg a} (! bb1)
      | br8 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Disj a b} (! bb1)
      | br9 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Impl a b} (! bb21) ]

    | bb21 = bb95
    | bb95 = s0
      [ s0 = Term'0.impl {let (r'0, _) = _4 in r'0}
          (fun (r0'0:Term'0.t_term) (r1'0:Term'0.t_term) ->  [ &v0_19 <- r0'0 ] s1)
      | s1 = Term'0.impl {let (r'1, _) = _4 in r'1}
          (fun (r0'1:Term'0.t_term) (r1'1:Term'0.t_term) ->  [ &v1_17 <- r1'1 ] s2)
      | s2 = Term'0.impl {let (_, r'2) = _4 in r'2}
          (fun (r0'2:Term'0.t_term) (r1'2:Term'0.t_term) ->  [ &v0_29 <- r0'2 ] s3)
      | s3 = Term'0.impl {let (_, r'3) = _4 in r'3}
          (fun (r0'3:Term'0.t_term) (r1'3:Term'0.t_term) ->  [ &v1_27 <- r1'3 ] s4)
      | s4 = -{resolve'0 _4}- s5
      | s5 = eq'0 {v1_17} {v1_27} (fun (_ret':bool) ->  [ &_102 <- _ret' ] s6)
      | s6 = bb96 ]

    | bb96 = any [ br0 -> {_102 = false} (! bb101) | br1 -> {_102} (! bb97) ]
    | bb97 = s0 [ s0 = eq'0 {v0_19} {v0_29} (fun (_ret':bool) ->  [ &_105 <- _ret' ] s1) | s1 = bb98 ]
    | bb98 = any [ br0 -> {_105 = false} (! bb100) | br1 -> {_105} (! bb99) ]
    | bb99 = s0 [ s0 =  [ &_0 <- [%#sterm0] true ] s1 | s1 = bb103 ]
    | bb100 = bb102
    | bb101 = bb102
    | bb102 = s0 [ s0 =  [ &_0 <- [%#sterm0] false ] s1 | s1 = bb103 ]
    | bb103 = bb104
    | bb18 = any
      [ br0 (a:usize) (b:Sort'0.t_sort)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Variable a b} (! bb1)
      | br1 (a:Value'0.t_value)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Value a} (! bb1)
      | br2 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Plus a b} (! bb1)
      | br3 (a:Ratio'0.t_ratio (BigInt'0.t_bigint)) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0)
        = Term'0.C_Times a b}
        (! bb1)
      | br4 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Eq a b} (! bb1)
      | br5 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Lt a b} (! bb1)
      | br6 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Conj a b} (! bb1)
      | br7 (a:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Neg a} (! bb1)
      | br8 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Disj a b} (! bb19)
      | br9 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Impl a b} (! bb1) ]

    | bb19 = bb86
    | bb86 = s0
      [ s0 = Term'0.disj {let (r'0, _) = _4 in r'0}
          (fun (r0'0:Term'0.t_term) (r1'0:Term'0.t_term) ->  [ &v0_18 <- r0'0 ] s1)
      | s1 = Term'0.disj {let (r'1, _) = _4 in r'1}
          (fun (r0'1:Term'0.t_term) (r1'1:Term'0.t_term) ->  [ &v1_16 <- r1'1 ] s2)
      | s2 = Term'0.disj {let (_, r'2) = _4 in r'2}
          (fun (r0'2:Term'0.t_term) (r1'2:Term'0.t_term) ->  [ &v0_28 <- r0'2 ] s3)
      | s3 = Term'0.disj {let (_, r'3) = _4 in r'3}
          (fun (r0'3:Term'0.t_term) (r1'3:Term'0.t_term) ->  [ &v1_26 <- r1'3 ] s4)
      | s4 = -{resolve'0 _4}- s5
      | s5 = eq'0 {v1_16} {v1_26} (fun (_ret':bool) ->  [ &_92 <- _ret' ] s6)
      | s6 = bb87 ]

    | bb87 = any [ br0 -> {_92 = false} (! bb92) | br1 -> {_92} (! bb88) ]
    | bb88 = s0 [ s0 = eq'0 {v0_18} {v0_28} (fun (_ret':bool) ->  [ &_95 <- _ret' ] s1) | s1 = bb89 ]
    | bb89 = any [ br0 -> {_95 = false} (! bb91) | br1 -> {_95} (! bb90) ]
    | bb90 = s0 [ s0 =  [ &_0 <- [%#sterm0] true ] s1 | s1 = bb94 ]
    | bb91 = bb93
    | bb92 = bb93
    | bb93 = s0 [ s0 =  [ &_0 <- [%#sterm0] false ] s1 | s1 = bb94 ]
    | bb94 = bb104
    | bb16 = any
      [ br0 (a:usize) (b:Sort'0.t_sort)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Variable a b} (! bb1)
      | br1 (a:Value'0.t_value)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Value a} (! bb1)
      | br2 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Plus a b} (! bb1)
      | br3 (a:Ratio'0.t_ratio (BigInt'0.t_bigint)) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0)
        = Term'0.C_Times a b}
        (! bb1)
      | br4 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Eq a b} (! bb1)
      | br5 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Lt a b} (! bb1)
      | br6 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Conj a b} (! bb1)
      | br7 (a:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Neg a} (! bb17)
      | br8 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Disj a b} (! bb1)
      | br9 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Impl a b} (! bb1) ]

    | bb17 = bb81
    | bb81 = s0
      [ s0 = Term'0.neg {let (r'0, _) = _4 in r'0} (fun (r0'0:Term'0.t_term) ->  [ &v0_17 <- r0'0 ] s1)
      | s1 = Term'0.neg {let (_, r'1) = _4 in r'1} (fun (r0'1:Term'0.t_term) ->  [ &v0_27 <- r0'1 ] s2)
      | s2 = -{resolve'0 _4}- s3
      | s3 = eq'0 {v0_17} {v0_27} (fun (_ret':bool) ->  [ &_85 <- _ret' ] s4)
      | s4 = bb82 ]

    | bb82 = any [ br0 -> {_85 = false} (! bb84) | br1 -> {_85} (! bb83) ]
    | bb83 = s0 [ s0 =  [ &_0 <- [%#sterm0] true ] s1 | s1 = bb85 ]
    | bb84 = s0 [ s0 =  [ &_0 <- [%#sterm0] false ] s1 | s1 = bb85 ]
    | bb85 = bb104
    | bb14 = any
      [ br0 (a:usize) (b:Sort'0.t_sort)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Variable a b} (! bb1)
      | br1 (a:Value'0.t_value)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Value a} (! bb1)
      | br2 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Plus a b} (! bb1)
      | br3 (a:Ratio'0.t_ratio (BigInt'0.t_bigint)) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0)
        = Term'0.C_Times a b}
        (! bb1)
      | br4 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Eq a b} (! bb1)
      | br5 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Lt a b} (! bb1)
      | br6 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Conj a b} (! bb15)
      | br7 (a:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Neg a} (! bb1)
      | br8 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Disj a b} (! bb1)
      | br9 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Impl a b} (! bb1) ]

    | bb15 = bb72
    | bb72 = s0
      [ s0 = Term'0.conj {let (r'0, _) = _4 in r'0}
          (fun (r0'0:Term'0.t_term) (r1'0:Term'0.t_term) ->  [ &v0_16 <- r0'0 ] s1)
      | s1 = Term'0.conj {let (r'1, _) = _4 in r'1}
          (fun (r0'1:Term'0.t_term) (r1'1:Term'0.t_term) ->  [ &v1_15 <- r1'1 ] s2)
      | s2 = Term'0.conj {let (_, r'2) = _4 in r'2}
          (fun (r0'2:Term'0.t_term) (r1'2:Term'0.t_term) ->  [ &v0_26 <- r0'2 ] s3)
      | s3 = Term'0.conj {let (_, r'3) = _4 in r'3}
          (fun (r0'3:Term'0.t_term) (r1'3:Term'0.t_term) ->  [ &v1_25 <- r1'3 ] s4)
      | s4 = -{resolve'0 _4}- s5
      | s5 = eq'0 {v1_15} {v1_25} (fun (_ret':bool) ->  [ &_77 <- _ret' ] s6)
      | s6 = bb73 ]

    | bb73 = any [ br0 -> {_77 = false} (! bb78) | br1 -> {_77} (! bb74) ]
    | bb74 = s0 [ s0 = eq'0 {v0_16} {v0_26} (fun (_ret':bool) ->  [ &_80 <- _ret' ] s1) | s1 = bb75 ]
    | bb75 = any [ br0 -> {_80 = false} (! bb77) | br1 -> {_80} (! bb76) ]
    | bb76 = s0 [ s0 =  [ &_0 <- [%#sterm0] true ] s1 | s1 = bb80 ]
    | bb77 = bb79
    | bb78 = bb79
    | bb79 = s0 [ s0 =  [ &_0 <- [%#sterm0] false ] s1 | s1 = bb80 ]
    | bb80 = bb104
    | bb12 = any
      [ br0 (a:usize) (b:Sort'0.t_sort)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Variable a b} (! bb1)
      | br1 (a:Value'0.t_value)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Value a} (! bb1)
      | br2 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Plus a b} (! bb1)
      | br3 (a:Ratio'0.t_ratio (BigInt'0.t_bigint)) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0)
        = Term'0.C_Times a b}
        (! bb1)
      | br4 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Eq a b} (! bb1)
      | br5 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Lt a b} (! bb13)
      | br6 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Conj a b} (! bb1)
      | br7 (a:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Neg a} (! bb1)
      | br8 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Disj a b} (! bb1)
      | br9 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Impl a b} (! bb1) ]

    | bb13 = bb63
    | bb63 = s0
      [ s0 = Term'0.lt {let (r'0, _) = _4 in r'0}
          (fun (r0'0:Term'0.t_term) (r1'0:Term'0.t_term) ->  [ &v0_15 <- r0'0 ] s1)
      | s1 = Term'0.lt {let (r'1, _) = _4 in r'1}
          (fun (r0'1:Term'0.t_term) (r1'1:Term'0.t_term) ->  [ &v1_14 <- r1'1 ] s2)
      | s2 = Term'0.lt {let (_, r'2) = _4 in r'2}
          (fun (r0'2:Term'0.t_term) (r1'2:Term'0.t_term) ->  [ &v0_25 <- r0'2 ] s3)
      | s3 = Term'0.lt {let (_, r'3) = _4 in r'3}
          (fun (r0'3:Term'0.t_term) (r1'3:Term'0.t_term) ->  [ &v1_24 <- r1'3 ] s4)
      | s4 = -{resolve'0 _4}- s5
      | s5 = eq'0 {v1_14} {v1_24} (fun (_ret':bool) ->  [ &_67 <- _ret' ] s6)
      | s6 = bb64 ]

    | bb64 = any [ br0 -> {_67 = false} (! bb69) | br1 -> {_67} (! bb65) ]
    | bb65 = s0 [ s0 = eq'0 {v0_15} {v0_25} (fun (_ret':bool) ->  [ &_70 <- _ret' ] s1) | s1 = bb66 ]
    | bb66 = any [ br0 -> {_70 = false} (! bb68) | br1 -> {_70} (! bb67) ]
    | bb67 = s0 [ s0 =  [ &_0 <- [%#sterm0] true ] s1 | s1 = bb71 ]
    | bb68 = bb70
    | bb69 = bb70
    | bb70 = s0 [ s0 =  [ &_0 <- [%#sterm0] false ] s1 | s1 = bb71 ]
    | bb71 = bb104
    | bb10 = any
      [ br0 (a:usize) (b:Sort'0.t_sort)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Variable a b} (! bb1)
      | br1 (a:Value'0.t_value)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Value a} (! bb1)
      | br2 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Plus a b} (! bb1)
      | br3 (a:Ratio'0.t_ratio (BigInt'0.t_bigint)) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0)
        = Term'0.C_Times a b}
        (! bb1)
      | br4 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Eq a b} (! bb11)
      | br5 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Lt a b} (! bb1)
      | br6 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Conj a b} (! bb1)
      | br7 (a:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Neg a} (! bb1)
      | br8 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Disj a b} (! bb1)
      | br9 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Impl a b} (! bb1) ]

    | bb11 = bb54
    | bb54 = s0
      [ s0 = Term'0.eq {let (r'0, _) = _4 in r'0}
          (fun (r0'0:Term'0.t_term) (r1'0:Term'0.t_term) ->  [ &v0_14 <- r0'0 ] s1)
      | s1 = Term'0.eq {let (r'1, _) = _4 in r'1}
          (fun (r0'1:Term'0.t_term) (r1'1:Term'0.t_term) ->  [ &v1_13 <- r1'1 ] s2)
      | s2 = Term'0.eq {let (_, r'2) = _4 in r'2}
          (fun (r0'2:Term'0.t_term) (r1'2:Term'0.t_term) ->  [ &v0_24 <- r0'2 ] s3)
      | s3 = Term'0.eq {let (_, r'3) = _4 in r'3}
          (fun (r0'3:Term'0.t_term) (r1'3:Term'0.t_term) ->  [ &v1_23 <- r1'3 ] s4)
      | s4 = -{resolve'0 _4}- s5
      | s5 = eq'0 {v1_13} {v1_23} (fun (_ret':bool) ->  [ &_57 <- _ret' ] s6)
      | s6 = bb55 ]

    | bb55 = any [ br0 -> {_57 = false} (! bb60) | br1 -> {_57} (! bb56) ]
    | bb56 = s0 [ s0 = eq'0 {v0_14} {v0_24} (fun (_ret':bool) ->  [ &_60 <- _ret' ] s1) | s1 = bb57 ]
    | bb57 = any [ br0 -> {_60 = false} (! bb59) | br1 -> {_60} (! bb58) ]
    | bb58 = s0 [ s0 =  [ &_0 <- [%#sterm0] true ] s1 | s1 = bb62 ]
    | bb59 = bb61
    | bb60 = bb61
    | bb61 = s0 [ s0 =  [ &_0 <- [%#sterm0] false ] s1 | s1 = bb62 ]
    | bb62 = bb104
    | bb8 = any
      [ br0 (a:usize) (b:Sort'0.t_sort)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Variable a b} (! bb1)
      | br1 (a:Value'0.t_value)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Value a} (! bb1)
      | br2 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Plus a b} (! bb1)
      | br3 (a:Ratio'0.t_ratio (BigInt'0.t_bigint)) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0)
        = Term'0.C_Times a b}
        (! bb9)
      | br4 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Eq a b} (! bb1)
      | br5 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Lt a b} (! bb1)
      | br6 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Conj a b} (! bb1)
      | br7 (a:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Neg a} (! bb1)
      | br8 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Disj a b} (! bb1)
      | br9 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Impl a b} (! bb1) ]

    | bb9 = bb45
    | bb45 = s0
      [ s0 = Term'0.times {let (r'0, _) = _4 in r'0}
          (fun (r0'0:Ratio'0.t_ratio (BigInt'0.t_bigint)) (r1'0:Term'0.t_term) ->  [ &v0_13 <- r0'0 ] s1)
      | s1 = Term'0.times {let (r'1, _) = _4 in r'1}
          (fun (r0'1:Ratio'0.t_ratio (BigInt'0.t_bigint)) (r1'1:Term'0.t_term) ->  [ &v1_12 <- r1'1 ] s2)
      | s2 = Term'0.times {let (_, r'2) = _4 in r'2}
          (fun (r0'2:Ratio'0.t_ratio (BigInt'0.t_bigint)) (r1'2:Term'0.t_term) ->  [ &v0_23 <- r0'2 ] s3)
      | s3 = Term'0.times {let (_, r'3) = _4 in r'3}
          (fun (r0'3:Ratio'0.t_ratio (BigInt'0.t_bigint)) (r1'3:Term'0.t_term) ->  [ &v1_22 <- r1'3 ] s4)
      | s4 = -{resolve'0 _4}- s5
      | s5 = eq'0 {v1_12} {v1_22} (fun (_ret':bool) ->  [ &_47 <- _ret' ] s6)
      | s6 = bb46 ]

    | bb46 = any [ br0 -> {_47 = false} (! bb51) | br1 -> {_47} (! bb47) ]
    | bb47 = s0 [ s0 = eq'1 {v0_13} {v0_23} (fun (_ret':bool) ->  [ &_50 <- _ret' ] s1) | s1 = bb48 ]
    | bb48 = any [ br0 -> {_50 = false} (! bb50) | br1 -> {_50} (! bb49) ]
    | bb49 = s0 [ s0 =  [ &_0 <- [%#sterm0] true ] s1 | s1 = bb53 ]
    | bb50 = bb52
    | bb51 = bb52
    | bb52 = s0 [ s0 =  [ &_0 <- [%#sterm0] false ] s1 | s1 = bb53 ]
    | bb53 = bb104
    | bb6 = any
      [ br0 (a:usize) (b:Sort'0.t_sort)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Variable a b} (! bb1)
      | br1 (a:Value'0.t_value)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Value a} (! bb1)
      | br2 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Plus a b} (! bb7)
      | br3 (a:Ratio'0.t_ratio (BigInt'0.t_bigint)) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0)
        = Term'0.C_Times a b}
        (! bb1)
      | br4 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Eq a b} (! bb1)
      | br5 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Lt a b} (! bb1)
      | br6 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Conj a b} (! bb1)
      | br7 (a:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Neg a} (! bb1)
      | br8 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Disj a b} (! bb1)
      | br9 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Impl a b} (! bb1) ]

    | bb7 = bb36
    | bb36 = s0
      [ s0 = Term'0.plus {let (r'0, _) = _4 in r'0}
          (fun (r0'0:Term'0.t_term) (r1'0:Term'0.t_term) ->  [ &v0_12 <- r0'0 ] s1)
      | s1 = Term'0.plus {let (r'1, _) = _4 in r'1}
          (fun (r0'1:Term'0.t_term) (r1'1:Term'0.t_term) ->  [ &v1_11 <- r1'1 ] s2)
      | s2 = Term'0.plus {let (_, r'2) = _4 in r'2}
          (fun (r0'2:Term'0.t_term) (r1'2:Term'0.t_term) ->  [ &v0_22 <- r0'2 ] s3)
      | s3 = Term'0.plus {let (_, r'3) = _4 in r'3}
          (fun (r0'3:Term'0.t_term) (r1'3:Term'0.t_term) ->  [ &v1_21 <- r1'3 ] s4)
      | s4 = -{resolve'0 _4}- s5
      | s5 = eq'0 {v1_11} {v1_21} (fun (_ret':bool) ->  [ &_37 <- _ret' ] s6)
      | s6 = bb37 ]

    | bb37 = any [ br0 -> {_37 = false} (! bb42) | br1 -> {_37} (! bb38) ]
    | bb38 = s0 [ s0 = eq'0 {v0_12} {v0_22} (fun (_ret':bool) ->  [ &_40 <- _ret' ] s1) | s1 = bb39 ]
    | bb39 = any [ br0 -> {_40 = false} (! bb41) | br1 -> {_40} (! bb40) ]
    | bb40 = s0 [ s0 =  [ &_0 <- [%#sterm0] true ] s1 | s1 = bb44 ]
    | bb41 = bb43
    | bb42 = bb43
    | bb43 = s0 [ s0 =  [ &_0 <- [%#sterm0] false ] s1 | s1 = bb44 ]
    | bb44 = bb104
    | bb4 = any
      [ br0 (a:usize) (b:Sort'0.t_sort)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Variable a b} (! bb1)
      | br1 (a:Value'0.t_value)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Value a} (! bb5)
      | br2 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Plus a b} (! bb1)
      | br3 (a:Ratio'0.t_ratio (BigInt'0.t_bigint)) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0)
        = Term'0.C_Times a b}
        (! bb1)
      | br4 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Eq a b} (! bb1)
      | br5 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Lt a b} (! bb1)
      | br6 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Conj a b} (! bb1)
      | br7 (a:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Neg a} (! bb1)
      | br8 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Disj a b} (! bb1)
      | br9 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Impl a b} (! bb1) ]

    | bb5 = bb31
    | bb31 = s0
      [ s0 = Term'0.value {let (r'0, _) = _4 in r'0} (fun (r0'0:Value'0.t_value) ->  [ &v0_11 <- r0'0 ] s1)
      | s1 = Term'0.value {let (_, r'1) = _4 in r'1} (fun (r0'1:Value'0.t_value) ->  [ &v0_21 <- r0'1 ] s2)
      | s2 = -{resolve'0 _4}- s3
      | s3 = eq'2 {v0_11} {v0_21} (fun (_ret':bool) ->  [ &_30 <- _ret' ] s4)
      | s4 = bb32 ]

    | bb32 = any [ br0 -> {_30 = false} (! bb34) | br1 -> {_30} (! bb33) ]
    | bb33 = s0 [ s0 =  [ &_0 <- [%#sterm0] true ] s1 | s1 = bb35 ]
    | bb34 = s0 [ s0 =  [ &_0 <- [%#sterm0] false ] s1 | s1 = bb35 ]
    | bb35 = bb104
    | bb2 = any
      [ br0 (a:usize) (b:Sort'0.t_sort)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Variable a b} (! bb3)
      | br1 (a:Value'0.t_value)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Value a} (! bb1)
      | br2 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Plus a b} (! bb1)
      | br3 (a:Ratio'0.t_ratio (BigInt'0.t_bigint)) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0)
        = Term'0.C_Times a b}
        (! bb1)
      | br4 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Eq a b} (! bb1)
      | br5 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Lt a b} (! bb1)
      | br6 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Conj a b} (! bb1)
      | br7 (a:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Neg a} (! bb1)
      | br8 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Disj a b} (! bb1)
      | br9 (a:Term'0.t_term) (b:Term'0.t_term)-> {(let (_, r'0) = _4 in r'0) = Term'0.C_Impl a b} (! bb1) ]

    | bb1 = s0 [ s0 = -{resolve'0 _4}- s1 | s1 =  [ &_0 <- [%#sterm0] false ] s2 | s2 = bb104 ]
    | bb3 = bb22
    | bb22 = s0
      [ s0 = Term'0.variable {let (r'0, _) = _4 in r'0} (fun (r0'0:usize) (r1'0:Sort'0.t_sort) ->  [ &v0_1 <- r0'0 ] s1)
      | s1 = Term'0.variable {let (r'1, _) = _4 in r'1} (fun (r0'1:usize) (r1'1:Sort'0.t_sort) ->  [ &v1_1 <- r1'1 ] s2)
      | s2 = Term'0.variable {let (_, r'2) = _4 in r'2} (fun (r0'2:usize) (r1'2:Sort'0.t_sort) ->  [ &v0_2 <- r0'2 ] s3)
      | s3 = Term'0.variable {let (_, r'3) = _4 in r'3} (fun (r0'3:usize) (r1'3:Sort'0.t_sort) ->  [ &v1_2 <- r1'3 ] s4)
      | s4 = -{resolve'0 _4}- s5
      | s5 = eq'3 {v1_1} {v1_2} (fun (_ret':bool) ->  [ &_22 <- _ret' ] s6)
      | s6 = bb23 ]

    | bb23 = any [ br0 -> {_22 = false} (! bb28) | br1 -> {_22} (! bb24) ]
    | bb24 = s0 [ s0 = eq'4 {v0_1} {v0_2} (fun (_ret':bool) ->  [ &_25 <- _ret' ] s1) | s1 = bb25 ]
    | bb25 = any [ br0 -> {_25 = false} (! bb27) | br1 -> {_25} (! bb26) ]
    | bb26 = s0 [ s0 =  [ &_0 <- [%#sterm0] true ] s1 | s1 = bb30 ]
    | bb27 = bb29
    | bb28 = bb29
    | bb29 = s0 [ s0 =  [ &_0 <- [%#sterm0] false ] s1 | s1 = bb30 ]
    | bb30 = bb104
    | bb104 = return' {_0} ]
    )
    [ & _0 : bool = any_l ()
    | & self : Term'0.t_term = self
    | & rhs : Term'0.t_term = rhs
    | & _4 : (Term'0.t_term, Term'0.t_term) = any_l ()
    | & v0_1 : usize = any_l ()
    | & v1_1 : Sort'0.t_sort = any_l ()
    | & v0_2 : usize = any_l ()
    | & v1_2 : Sort'0.t_sort = any_l ()
    | & _22 : bool = any_l ()
    | & _25 : bool = any_l ()
    | & v0_11 : Value'0.t_value = any_l ()
    | & v0_21 : Value'0.t_value = any_l ()
    | & _30 : bool = any_l ()
    | & v0_12 : Term'0.t_term = any_l ()
    | & v1_11 : Term'0.t_term = any_l ()
    | & v0_22 : Term'0.t_term = any_l ()
    | & v1_21 : Term'0.t_term = any_l ()
    | & _37 : bool = any_l ()
    | & _40 : bool = any_l ()
    | & v0_13 : Ratio'0.t_ratio (BigInt'0.t_bigint) = any_l ()
    | & v1_12 : Term'0.t_term = any_l ()
    | & v0_23 : Ratio'0.t_ratio (BigInt'0.t_bigint) = any_l ()
    | & v1_22 : Term'0.t_term = any_l ()
    | & _47 : bool = any_l ()
    | & _50 : bool = any_l ()
    | & v0_14 : Term'0.t_term = any_l ()
    | & v1_13 : Term'0.t_term = any_l ()
    | & v0_24 : Term'0.t_term = any_l ()
    | & v1_23 : Term'0.t_term = any_l ()
    | & _57 : bool = any_l ()
    | & _60 : bool = any_l ()
    | & v0_15 : Term'0.t_term = any_l ()
    | & v1_14 : Term'0.t_term = any_l ()
    | & v0_25 : Term'0.t_term = any_l ()
    | & v1_24 : Term'0.t_term = any_l ()
    | & _67 : bool = any_l ()
    | & _70 : bool = any_l ()
    | & v0_16 : Term'0.t_term = any_l ()
    | & v1_15 : Term'0.t_term = any_l ()
    | & v0_26 : Term'0.t_term = any_l ()
    | & v1_25 : Term'0.t_term = any_l ()
    | & _77 : bool = any_l ()
    | & _80 : bool = any_l ()
    | & v0_17 : Term'0.t_term = any_l ()
    | & v0_27 : Term'0.t_term = any_l ()
    | & _85 : bool = any_l ()
    | & v0_18 : Term'0.t_term = any_l ()
    | & v1_16 : Term'0.t_term = any_l ()
    | & v0_28 : Term'0.t_term = any_l ()
    | & v1_26 : Term'0.t_term = any_l ()
    | & _92 : bool = any_l ()
    | & _95 : bool = any_l ()
    | & v0_19 : Term'0.t_term = any_l ()
    | & v1_17 : Term'0.t_term = any_l ()
    | & v0_29 : Term'0.t_term = any_l ()
    | & v1_27 : Term'0.t_term = any_l ()
    | & _102 : bool = any_l ()
    | & _105 : bool = any_l () ]

    [ return' (result:bool)-> {[@expl:postcondition] [%#sterm0] result = (deep_model'0 self = deep_model'0 rhs)}
      (! return' {result}) ]

end
module Cdsat_Trail_AssignmentDeepModel_Type
  use prelude.prelude.Int

  use Cdsat_Trail_ReasonDeepModel_Type as ReasonDeepModel'0

  use Cdsat_Theory_Value_Type as Value'0

  use Cdsat_Theory_Term_Type as Term'0

  type t_assignmentdeepmodel  =
    | C_AssignmentDeepModel (Term'0.t_term) (Value'0.t_value) (ReasonDeepModel'0.t_reasondeepmodel) int

  function any_l (_ : 'b) : 'a

  let rec t_assignmentdeepmodel (input:t_assignmentdeepmodel) (ret  (term:Term'0.t_term) (val':Value'0.t_value) (reason:ReasonDeepModel'0.t_reasondeepmodel) (level:int))= any
    [ good (term:Term'0.t_term) (val':Value'0.t_value) (reason:ReasonDeepModel'0.t_reasondeepmodel) (level:int)-> {C_AssignmentDeepModel term val' reason level
      = input}
      (! ret {term} {val'} {reason} {level})
    | bad (term:Term'0.t_term) (val':Value'0.t_value) (reason:ReasonDeepModel'0.t_reasondeepmodel) (level:int)-> {C_AssignmentDeepModel term val' reason level
      <> input}
      {false}
      any ]

end
module Cdsat_Trail_Impl14_Eq
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 19 4 25 20

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 16 16 16 25

  let%span span2 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span3 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span4 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span5 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span6 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span7 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span8 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span9 = "/Users/xavier/Code/cdsat/src/trail.rs" 168 8 168 12

  let%span span10 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 20 8 20 31

  let%span span11 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 33 18 33 22

  let%span span12 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 30 14 30 56

  let%span span13 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 31 4 32 53

  let%span span14 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 33 4 33 44

  let%span span15 = "/Users/xavier/Code/cdsat/src/trail.rs" 48 31 48 40

  let%span span16 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span17 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span18 = "/Users/xavier/Code/cdsat/src/term.rs" 195 8 225 9

  let%span span19 = "/Users/xavier/Code/creusot/creusot-contracts-proc/src/lib.rs" 727 0 727 44

  let%span span20 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 81 8 81 28

  let%span span21 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/cmp.rs" 11 26 11 75

  let%span span22 = "/Users/xavier/Code/cdsat/src/trail.rs" 48 16 48 25

  let%span span23 = "/Users/xavier/Code/cdsat/src/term.rs" 230 23 230 32

  let%span span24 = "/Users/xavier/Code/cdsat/src/term.rs" 33 23 33 32

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use seq.Seq

  predicate invariant'1 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span2] true

  predicate inv'1 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'1 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'1 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  constant max'0 : usize = [%#span3] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'0 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function shallow_model'0 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom shallow_model'0_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span4] inv'0 self)
   -> ([%#span6] inv'1 (shallow_model'0 self))
  && ([%#span5] Seq.length (shallow_model'0 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'0 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span7] inv'1 (shallow_model'0 self)

  axiom inv'0 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'0 x = true

  use Cdsat_Trail_ReasonDeepModel_Type as ReasonDeepModel'0

  use Cdsat_Trail_Reason_Type as Reason'0

  use Cdsat_Theory_Value_Type as Value'1

  use Cdsat_Term_Value_Type as Value'0

  use Cdsat_Theory_Term_Type as Term'1

  use Cdsat_Term_Term_Type as Term'0

  function deep_model'9 (self : usize) : int =
    [%#span8] UIntSize.to_int self

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  function deep_model'13 [#"/Users/xavier/Code/cdsat/src/trail.rs" 167 4 167 44] (self : TrailIndex'0.t_trailindex) : TrailIndex'0.t_trailindex

   =
    [%#span9] self

  use seq.Seq

  function index_logic'0 [@inline:trivial] (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) (ix : int) : TrailIndex'0.t_trailindex

   =
    [%#span10] Seq.get (shallow_model'0 self) ix

  function deep_model'12 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom deep_model'12_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span11] inv'0 self)
   -> ([%#span14] inv'1 (deep_model'12 self))
  && ([%#span13] forall i : int . 0 <= i /\ i < Seq.length (shallow_model'0 self)
   -> Seq.get (deep_model'12 self) i = deep_model'13 (index_logic'0 self i))
  && ([%#span12] Seq.length (shallow_model'0 self) = Seq.length (deep_model'12 self))

  function deep_model'8 [#"/Users/xavier/Code/cdsat/src/trail.rs" 48 31 48 40] (self : Reason'0.t_reason) : ReasonDeepModel'0.t_reasondeepmodel

   =
    [%#span15] match self with
      | Reason'0.C_Justified v0_1 -> ReasonDeepModel'0.C_Justified (deep_model'12 v0_1)
      | Reason'0.C_Decision -> ReasonDeepModel'0.C_Decision
      | Reason'0.C_Input -> ReasonDeepModel'0.C_Input
      end

  use prelude.prelude.Real

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  function deep_model'11 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'7 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span16] match self with
      | Value'0.C_Bool b -> Value'1.C_Bool b
      | Value'0.C_Rat br -> Value'1.C_Rat (deep_model'11 br)
      end

  use Cdsat_Theory_Sort_Type as Sort'1

  use Cdsat_Term_Sort_Type as Sort'0

  use Cdsat_Theory_Var_Type as Var'0

  function deep_model'10 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'0.t_sort) : Sort'1.t_sort =
    [%#span17] match self with
      | Sort'0.C_Boolean -> Sort'1.C_Boolean
      | Sort'0.C_Rational -> Sort'1.C_Rational
      end

  function deep_model'6 [#"/Users/xavier/Code/cdsat/src/term.rs" 193 4 193 44] (self : Term'0.t_term) : Term'1.t_term =
    [%#span18] match self with
      | Term'0.C_Variable v s -> Term'1.C_Variable (Var'0.C_Var (deep_model'9 v) (deep_model'10 s))
      | Term'0.C_Value v -> Term'1.C_Value (deep_model'7 v)
      | Term'0.C_Plus l r -> Term'1.C_Plus (deep_model'6 l) (deep_model'6 r)
      | Term'0.C_Eq l r -> Term'1.C_Eq (deep_model'6 l) (deep_model'6 r)
      | Term'0.C_Conj l r -> Term'1.C_Conj (deep_model'6 l) (deep_model'6 r)
      | Term'0.C_Disj l r -> Term'1.C_Disj (deep_model'6 l) (deep_model'6 r)
      | Term'0.C_Neg t -> Term'1.C_Neg (deep_model'6 t)
      | Term'0.C_Impl l r -> Term'1.C_Disj (Term'1.C_Neg (deep_model'6 l)) (deep_model'6 r)
      | Term'0.C_Times l r -> Term'1.C_Plus (Term'1.C_Value (Value'1.C_Rat (deep_model'11 l))) (deep_model'6 r)
      | Term'0.C_Lt l r -> Term'1.C_Eq (deep_model'6 l) (deep_model'6 r)
      end

  use Cdsat_Trail_AssignmentDeepModel_Type as AssignmentDeepModel'0

  use Cdsat_Trail_Assignment_Type as Assignment'0

  function deep_model'5 [#"/Users/xavier/Code/cdsat/src/trail.rs" 16 31 16 40] (self : Assignment'0.t_assignment) : AssignmentDeepModel'0.t_assignmentdeepmodel

   =
    [%#span19] AssignmentDeepModel'0.C_AssignmentDeepModel (deep_model'6 (Cdsat_Trail_Assignment_Type.assignment_term self)) (deep_model'7 (Cdsat_Trail_Assignment_Type.assignment_val self)) (deep_model'8 (Cdsat_Trail_Assignment_Type.assignment_reason self)) (deep_model'9 (Cdsat_Trail_Assignment_Type.assignment_level self))

  use prelude.prelude.Borrow

  function deep_model'0 (self : Assignment'0.t_assignment) : AssignmentDeepModel'0.t_assignmentdeepmodel =
    [%#span20] deep_model'5 self

  use prelude.prelude.Intrinsic

  use prelude.prelude.Int

  function deep_model'4 (self : usize) : int =
    [%#span20] deep_model'9 self

  let rec eq'3 (self:usize) (other:usize) (return'  (ret:bool))= any
    [ return' (result:bool)-> {[%#span21] result = (deep_model'4 self = deep_model'4 other)} (! return' {result}) ]


  function deep_model'3 (self : Reason'0.t_reason) : ReasonDeepModel'0.t_reasondeepmodel =
    [%#span20] deep_model'8 self

  let rec eq'2 (self:Reason'0.t_reason) (rhs:Reason'0.t_reason) (return'  (ret:bool))= any
    [ return' (result:bool)-> {[%#span22] result = (deep_model'3 self = deep_model'3 rhs)} (! return' {result}) ]


  function deep_model'2 (self : Value'0.t_value) : Value'1.t_value =
    [%#span20] deep_model'7 self

  let rec eq'1 (self:Value'0.t_value) (rhs:Value'0.t_value) (return'  (ret:bool))= any
    [ return' (result:bool)-> {[%#span23] result = (deep_model'2 self = deep_model'2 rhs)} (! return' {result}) ]


  function deep_model'1 (self : Term'0.t_term) : Term'1.t_term =
    [%#span20] deep_model'6 self

  let rec eq'0 (self:Term'0.t_term) (rhs:Term'0.t_term) (return'  (ret:bool))= any
    [ return' (result:bool)-> {[%#span24] result = (deep_model'1 self = deep_model'1 rhs)} (! return' {result}) ]


  let rec eq (self:Assignment'0.t_assignment) (rhs:Assignment'0.t_assignment) (return'  (ret:bool))= (! bb0
    [ bb0 = s0
      [ s0 = Assignment'0.t_assignment {rhs}
          (fun (rterm'0:Term'0.t_term) (rval'0:Value'0.t_value) (rreason'0:Reason'0.t_reason) (rlevel'0:usize) ->
             [ &_7 <- rterm'0 ]
            s1)
      | s1 = Assignment'0.t_assignment {self}
          (fun (rterm'1:Term'0.t_term) (rval'1:Value'0.t_value) (rreason'1:Reason'0.t_reason) (rlevel'1:usize) ->
            eq'0 {rterm'1} {_7} (fun (_ret':bool) ->  [ &_4 <- _ret' ] s2))
      | s2 = bb1 ]

    | bb1 = any [ br0 -> {_4 = false} (! bb9) | br1 -> {_4} (! bb2) ]
    | bb2 = s0
      [ s0 = Assignment'0.t_assignment {rhs}
          (fun (rterm'0:Term'0.t_term) (rval'0:Value'0.t_value) (rreason'0:Reason'0.t_reason) (rlevel'0:usize) ->
             [ &_11 <- rval'0 ]
            s1)
      | s1 = Assignment'0.t_assignment {self}
          (fun (rterm'1:Term'0.t_term) (rval'1:Value'0.t_value) (rreason'1:Reason'0.t_reason) (rlevel'1:usize) ->
            eq'1 {rval'1} {_11} (fun (_ret':bool) ->  [ &_8 <- _ret' ] s2))
      | s2 = bb3 ]

    | bb3 = any [ br0 -> {_8 = false} (! bb8) | br1 -> {_8} (! bb4) ]
    | bb4 = s0
      [ s0 = Assignment'0.t_assignment {rhs}
          (fun (rterm'0:Term'0.t_term) (rval'0:Value'0.t_value) (rreason'0:Reason'0.t_reason) (rlevel'0:usize) ->
             [ &_15 <- rreason'0 ]
            s1)
      | s1 = Assignment'0.t_assignment {self}
          (fun (rterm'1:Term'0.t_term) (rval'1:Value'0.t_value) (rreason'1:Reason'0.t_reason) (rlevel'1:usize) ->
            eq'2 {rreason'1} {_15} (fun (_ret':bool) ->  [ &_12 <- _ret' ] s2))
      | s2 = bb5 ]

    | bb5 = any [ br0 -> {_12 = false} (! bb7) | br1 -> {_12} (! bb6) ]
    | bb6 = s0
      [ s0 = Assignment'0.t_assignment {rhs}
          (fun (rterm'0:Term'0.t_term) (rval'0:Value'0.t_value) (rreason'0:Reason'0.t_reason) (rlevel'0:usize) ->
             [ &_18 <- rlevel'0 ]
            s1)
      | s1 = Assignment'0.t_assignment {self}
          (fun (rterm'1:Term'0.t_term) (rval'1:Value'0.t_value) (rreason'1:Reason'0.t_reason) (rlevel'1:usize) ->
            eq'3 {rlevel'1} {_18} (fun (_ret':bool) ->  [ &_0 <- _ret' ] s2))
      | s2 = bb11 ]

    | bb11 = bb12
    | bb7 = bb10
    | bb8 = bb10
    | bb9 = bb10
    | bb10 = s0 [ s0 =  [ &_0 <- [%#strail0] false ] s1 | s1 = bb12 ]
    | bb12 = return' {_0} ]
    )
    [ & _0 : bool = any_l ()
    | & self : Assignment'0.t_assignment = self
    | & rhs : Assignment'0.t_assignment = rhs
    | & _4 : bool = any_l ()
    | & _7 : Term'0.t_term = any_l ()
    | & _8 : bool = any_l ()
    | & _11 : Value'0.t_value = any_l ()
    | & _12 : bool = any_l ()
    | & _15 : Reason'0.t_reason = any_l ()
    | & _18 : usize = any_l () ]

    [ return' (result:bool)-> {[@expl:postcondition] [%#strail1] result = (deep_model'0 self = deep_model'0 rhs)}
      (! return' {result}) ]

end
module Cdsat_Trail_Impl15_AssertReceiverIsTotalEq
  use Cdsat_Trail_Assignment_Type as Assignment'0

  use prelude.prelude.Borrow

  use prelude.prelude.Intrinsic

  let rec assert_receiver_is_total_eq (self:Assignment'0.t_assignment) (return'  (ret:()))= (! bb0
    [ bb0 = return' {_0} ]
    ) [ & _0 : () = any_l () ]  [ return' (result:())-> (! return' {result}) ]
end
module Cdsat_Trail_Impl19_AssertReceiverIsTotalEq
  use Cdsat_Trail_Reason_Type as Reason'0

  use prelude.prelude.Borrow

  use prelude.prelude.Intrinsic

  let rec assert_receiver_is_total_eq (self:Reason'0.t_reason) (return'  (ret:()))= (! bb0 [ bb0 = return' {_0} ] )
    [ & _0 : () = any_l () ]
     [ return' (result:())-> (! return' {result}) ]
end
module Cdsat_Trail_Impl21_Fmt
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 66 9 66 14

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 26 20 26 34

  use prelude.prelude.Opaque

  use prelude.prelude.Intrinsic

  use prelude.prelude.Borrow

  use Core_Fmt_Formatter_Type as Formatter'0

  predicate resolve'0 (self : borrowed (Formatter'0.t_formatter)) =
    [%#span1] self.final = self.current

  use Core_Fmt_Error_Type as Error'0

  use Core_Result_Result_Type as Result'0

  let rec debug_tuple_field2_finish'0 (self:borrowed (Formatter'0.t_formatter)) (name:string) (value1:dyn) (value2:dyn) (return'  (ret:Result'0.t_result () (Error'0.t_error)))= any
    [ return' (result:Result'0.t_result () (Error'0.t_error))-> (! return' {result}) ]


  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  let rec fmt (self:TrailIndex'0.t_trailindex) (f:borrowed (Formatter'0.t_formatter)) (return'  (ret:Result'0.t_result () (Error'0.t_error)))= (! bb0
    [ bb0 = s0
      [ s0 = Borrow.borrow_final <Formatter'0.t_formatter> {f.current} {Borrow.get_id f}
          (fun (_ret':borrowed (Formatter'0.t_formatter)) ->
             [ &_3 <- _ret' ]
             [ &f <- { f with current = _3.final ; } ]
            s1)
      | s1 =  [ &_5 <- [%#strail0] "TrailIndex" ] s2
      | s2 = TrailIndex'0.t_trailindex {self} (fun (r0'0:usize) (r1'0:usize) ->  [ &_8 <- r0'0 ] s3)
      | s3 = TrailIndex'0.t_trailindex {self} (fun (r0'1:usize) (r1'1:usize) ->  [ &_11 <- r1'1 ] s4)
      | s4 = debug_tuple_field2_finish'0 {_3} {_5} {_6} {_9}
          (fun (_ret':Result'0.t_result () (Error'0.t_error)) ->  [ &_0 <- _ret' ] s5)
      | s5 = bb1 ]

    | bb1 = s0 [ s0 = -{resolve'0 f}- s1 | s1 = return' {_0} ]  ]
    )
    [ & _0 : Result'0.t_result () (Error'0.t_error) = any_l ()
    | & self : TrailIndex'0.t_trailindex = self
    | & f : borrowed (Formatter'0.t_formatter) = f
    | & _3 : borrowed (Formatter'0.t_formatter) = any_l ()
    | & _5 : string = any_l ()
    | & _6 : dyn = any_l ()
    | & _8 : usize = any_l ()
    | & _9 : dyn = any_l ()
    | & _11 : usize = any_l () ]
     [ return' (result:Result'0.t_result () (Error'0.t_error))-> (! return' {result}) ]
end
module Cdsat_Trail_Impl23_AssertReceiverIsTotalEq
  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use prelude.prelude.Borrow

  use prelude.prelude.Intrinsic

  let rec assert_receiver_is_total_eq (self:TrailIndex'0.t_trailindex) (return'  (ret:()))= (! bb0
    [ bb0 = return' {_0} ]
    ) [ & _0 : () = any_l () ]  [ return' (result:())-> (! return' {result}) ]
end
module Cdsat_Trail_Impl24_Clone
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 66 31 66 36

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/clone.rs" 7 0 20 1

  use prelude.prelude.Borrow

  use prelude.prelude.Intrinsic

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  let rec clone'0 (self:usize) (return'  (ret:usize))= any
    [ return' (result:usize)-> {[%#span1] result = self} (! return' {result}) ]


  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  let rec clone' (self:TrailIndex'0.t_trailindex) (return'  (ret:TrailIndex'0.t_trailindex))= (! bb0
    [ bb0 = s0
      [ s0 = TrailIndex'0.t_trailindex {self} (fun (r0'0:usize) (r1'0:usize) ->  [ &_5 <- r0'0 ] s1)
      | s1 = clone'0 {_5} (fun (_ret':usize) ->  [ &_3 <- _ret' ] s2)
      | s2 = bb1 ]

    | bb1 = s0
      [ s0 = TrailIndex'0.t_trailindex {self} (fun (r0'0:usize) (r1'0:usize) ->  [ &_8 <- r1'0 ] s1)
      | s1 = clone'0 {_8} (fun (_ret':usize) ->  [ &_6 <- _ret' ] s2)
      | s2 = bb2 ]

    | bb2 = s0
      [ s0 =  [ &_0 <- TrailIndex'0.C_TrailIndex _3 _6 ]
        (any [ any_ (_any:usize)-> (!  [ &_3 <- _any ] (any [ any_ (_any:usize)-> (!  [ &_6 <- _any ] s1) ] )) ] )
      | s1 = return' {_0} ]
       ]
    )
    [ & _0 : TrailIndex'0.t_trailindex = any_l ()
    | & self : TrailIndex'0.t_trailindex = self
    | & _3 : usize = any_l ()
    | & _5 : usize = any_l ()
    | & _6 : usize = any_l ()
    | & _8 : usize = any_l () ]

    [ return' (result:TrailIndex'0.t_trailindex)-> {[@expl:postcondition] [%#strail0] result = self}
      (! return' {result}) ]

end
module Cdsat_Trail_Impl4_Cmp
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 79 14 79 34

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 77 14 77 44

  let%span span2 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span4 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  let%span span5 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 14 70 15

  let%span span6 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 23 70 24

  let%span span7 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 69 14 69 59

  let%span span8 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 64 15 64 48

  let%span span9 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 16 66 17

  let%span span10 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 25 66 26

  let%span span11 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 65 14 65 44

  let%span span12 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 59 15 59 45

  let%span span13 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 16 61 17

  let%span span14 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 25 61 26

  let%span span15 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 60 14 60 47

  let%span span16 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 53 15 53 32

  let%span span17 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 54 15 54 32

  let%span span18 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 13 56 14

  let%span span19 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 22 56 23

  let%span span20 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 31 56 32

  let%span span21 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 55 14 55 31

  let%span span22 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 50 12 50 13

  let%span span23 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 49 14 49 45

  let%span span24 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 41 20 41 56

  let%span span25 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 18 46 19

  let%span span26 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 27 46 28

  let%span span27 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 45 14 45 64

  let%span span28 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 31 20 31 53

  let%span span29 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 18 36 19

  let%span span30 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 27 36 28

  let%span span31 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 35 14 35 61

  let%span span32 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 21 20 21 53

  let%span span33 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 18 26 19

  let%span span34 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 27 26 28

  let%span span35 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 25 14 25 61

  let%span span36 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 11 20 11 56

  let%span span37 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 18 16 19

  let%span span38 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 27 16 28

  let%span span39 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 15 14 15 64

  let%span span40 = "/Users/xavier/Code/cdsat/src/trail.rs" 146 14 146 59

  let%span span41 = "/Users/xavier/Code/cdsat/src/trail.rs" 144 4 144 10

  let%span span42 = "/Users/xavier/Code/cdsat/src/trail.rs" 140 15 140 48

  let%span span43 = "/Users/xavier/Code/cdsat/src/trail.rs" 141 14 141 44

  let%span span44 = "/Users/xavier/Code/cdsat/src/trail.rs" 138 4 138 10

  let%span span45 = "/Users/xavier/Code/cdsat/src/trail.rs" 134 15 134 45

  let%span span46 = "/Users/xavier/Code/cdsat/src/trail.rs" 135 14 135 47

  let%span span47 = "/Users/xavier/Code/cdsat/src/trail.rs" 132 4 132 10

  let%span span48 = "/Users/xavier/Code/cdsat/src/trail.rs" 127 15 127 32

  let%span span49 = "/Users/xavier/Code/cdsat/src/trail.rs" 128 15 128 32

  let%span span50 = "/Users/xavier/Code/cdsat/src/trail.rs" 129 14 129 31

  let%span span51 = "/Users/xavier/Code/cdsat/src/trail.rs" 125 4 125 10

  let%span span52 = "/Users/xavier/Code/cdsat/src/trail.rs" 122 14 122 45

  let%span span53 = "/Users/xavier/Code/cdsat/src/trail.rs" 120 4 120 10

  let%span span54 = "/Users/xavier/Code/cdsat/src/trail.rs" 117 14 117 64

  let%span span55 = "/Users/xavier/Code/cdsat/src/trail.rs" 115 4 115 10

  let%span span56 = "/Users/xavier/Code/cdsat/src/trail.rs" 112 14 112 61

  let%span span57 = "/Users/xavier/Code/cdsat/src/trail.rs" 110 4 110 10

  let%span span58 = "/Users/xavier/Code/cdsat/src/trail.rs" 107 14 107 61

  let%span span59 = "/Users/xavier/Code/cdsat/src/trail.rs" 105 4 105 10

  let%span span60 = "/Users/xavier/Code/cdsat/src/trail.rs" 102 14 102 64

  let%span span61 = "/Users/xavier/Code/cdsat/src/trail.rs" 100 4 100 10

  let%span span62 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span63 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span64 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/cmp.rs" 50 26 50 85

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  predicate invariant'0 (self : TrailIndex'0.t_trailindex) =
    [%#span2] true

  predicate inv'0 (_x : TrailIndex'0.t_trailindex)

  axiom inv'0 : forall x : TrailIndex'0.t_trailindex . inv'0 x = true

  use Core_Cmp_Ordering_Type as Ordering'0

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'2 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span3] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span4] match cmp_log'2 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'2 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  function eq_cmp'3 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom eq_cmp'3_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span5] inv'0 x)
   -> ([%#span6] inv'0 y)  -> ([%#span7] (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal))

  function antisym2'3 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym2'3_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span8] cmp_log'0 x y
  = Ordering'0.C_Greater)
   -> ([%#span9] inv'0 x)  -> ([%#span10] inv'0 y)  -> ([%#span11] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'3 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym1'3_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span12] cmp_log'0 x y
  = Ordering'0.C_Less)
   -> ([%#span13] inv'0 x)  -> ([%#span14] inv'0 y)  -> ([%#span15] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'3 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'3_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span16] cmp_log'0 x y
  = o)
   -> ([%#span17] cmp_log'0 y z = o)
   -> ([%#span18] inv'0 x)  -> ([%#span19] inv'0 y)  -> ([%#span20] inv'0 z)  -> ([%#span21] cmp_log'0 x z = o)

  function refl'3 (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'3_spec : forall x : TrailIndex'0.t_trailindex . ([%#span22] inv'0 x)
   -> ([%#span23] cmp_log'0 x x = Ordering'0.C_Equal)

  function gt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span24] cmp_log'0 self o = Ordering'0.C_Greater

  function cmp_gt_log'3 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_gt_log'3_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span25] inv'0 x)
   -> ([%#span26] inv'0 y)  -> ([%#span27] gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater))

  function ge_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span28] cmp_log'0 self o <> Ordering'0.C_Less

  function cmp_ge_log'3 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_ge_log'3_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span29] inv'0 x)
   -> ([%#span30] inv'0 y)  -> ([%#span31] ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less))

  function lt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span32] cmp_log'0 self o = Ordering'0.C_Less

  function cmp_lt_log'3 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_lt_log'3_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span33] inv'0 x)
   -> ([%#span34] inv'0 y)  -> ([%#span35] lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less))

  function le_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span36] cmp_log'0 self o <> Ordering'0.C_Greater

  function cmp_le_log'3 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_le_log'3_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span37] inv'0 x)
   -> ([%#span38] inv'0 y)  -> ([%#span39] le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater))

  function eq_cmp'2 (_1 : usize) (_2 : usize) : ()

  function antisym2'2 (_1 : usize) (_2 : usize) : ()

  function antisym1'2 (_1 : usize) (_2 : usize) : ()

  function trans'2 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'2 (_1 : usize) : ()

  function cmp_gt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'2 (_1 : usize) (_2 : usize) : ()

  function eq_cmp'1 (_1 : int) (_2 : int) : ()

  function antisym2'1 (_1 : int) (_2 : int) : ()

  function antisym1'1 (_1 : int) (_2 : int) : ()

  function trans'1 (_1 : int) (_2 : int) (_3 : int) (_4 : Ordering'0.t_ordering) : ()

  function refl'1 (_1 : int) : ()

  function cmp_gt_log'1 (_1 : int) (_2 : int) : ()

  function cmp_ge_log'1 (_1 : int) (_2 : int) : ()

  function cmp_lt_log'1 (_1 : int) (_2 : int) : ()

  function cmp_le_log'1 (_1 : int) (_2 : int) : ()

  function eq_cmp'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 147 4 147 31] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span41] ()

  axiom eq_cmp'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span40] (x = y)
  = (cmp_log'0 x y = Ordering'0.C_Equal)

  function antisym2'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 142 4 142 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span44] ()

  axiom antisym2'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span42] cmp_log'0 x y
  = Ordering'0.C_Greater)  -> ([%#span43] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 136 4 136 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span47] ()

  axiom antisym1'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span45] cmp_log'0 x y
  = Ordering'0.C_Less)  -> ([%#span46] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 130 4 130 52] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()

   =
    [%#span51] ()

  axiom trans'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span48] cmp_log'0 x y
  = o)  -> ([%#span49] cmp_log'0 y z = o)  -> ([%#span50] cmp_log'0 x z = o)

  function refl'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 123 4 123 20] (x : TrailIndex'0.t_trailindex) : () =
    [%#span53] ()

  axiom refl'0_spec : forall x : TrailIndex'0.t_trailindex . [%#span52] cmp_log'0 x x = Ordering'0.C_Equal

  function cmp_gt_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 118 4 118 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span55] ()

  axiom cmp_gt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span54] gt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Greater)

  function cmp_ge_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 113 4 113 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span57] ()

  axiom cmp_ge_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span56] ge_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Less)

  function cmp_lt_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 108 4 108 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span59] ()

  axiom cmp_lt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span58] lt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Less)

  function cmp_le_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 103 4 103 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span61] ()

  axiom cmp_le_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span60] le_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Greater)

  use prelude.prelude.Borrow

  use prelude.prelude.Intrinsic

  function cmp_log'1 (self : int) (o : int) : Ordering'0.t_ordering =
    [%#span62] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  use prelude.prelude.UIntSize

  function deep_model'0 (self : usize) : int =
    [%#span63] UIntSize.to_int self

  let rec cmp'0 (self:usize) (other:usize) (return'  (ret:Ordering'0.t_ordering))= any
    [ return' (result:Ordering'0.t_ordering)-> {[%#span64] result = cmp_log'1 (deep_model'0 self) (deep_model'0 other)}
      (! return' {result}) ]


  let rec cmp (self:TrailIndex'0.t_trailindex) (other:TrailIndex'0.t_trailindex) (return'  (ret:Ordering'0.t_ordering))= (! bb0
    [ bb0 = s0
      [ s0 = TrailIndex'0.t_trailindex {other} (fun (r0'0:usize) (r1'0:usize) ->  [ &_7 <- r0'0 ] s1)
      | s1 = TrailIndex'0.t_trailindex {self}
          (fun (r0'1:usize) (r1'1:usize) ->
            cmp'0 {r0'1} {_7} (fun (_ret':Ordering'0.t_ordering) ->  [ &_4 <- _ret' ] s2))
      | s2 = bb1 ]

    | bb1 = any
      [ br0 -> {_4 = Ordering'0.C_Less } (! bb3)
      | br1 -> {_4 = Ordering'0.C_Equal } (! bb5)
      | br2 -> {_4 = Ordering'0.C_Greater } (! bb4) ]

    | bb2 = {[%#strail0] false} any
    | bb4 = bb7
    | bb7 = s0 [ s0 =  [ &_0 <- Ordering'0.C_Greater ] s1 | s1 = bb9 ]
    | bb5 = s0
      [ s0 = TrailIndex'0.t_trailindex {other} (fun (r0'0:usize) (r1'0:usize) ->  [ &_11 <- r1'0 ] s1)
      | s1 = TrailIndex'0.t_trailindex {self}
          (fun (r0'1:usize) (r1'1:usize) ->
            cmp'0 {r1'1} {_11} (fun (_ret':Ordering'0.t_ordering) ->  [ &_0 <- _ret' ] s2))
      | s2 = bb8 ]

    | bb8 = bb9
    | bb3 = bb6
    | bb6 = s0 [ s0 =  [ &_0 <- Ordering'0.C_Less ] s1 | s1 = bb9 ]
    | bb9 = return' {_0} ]
    )
    [ & _0 : Ordering'0.t_ordering = any_l ()
    | & self : TrailIndex'0.t_trailindex = self
    | & other : TrailIndex'0.t_trailindex = other
    | & _4 : Ordering'0.t_ordering = any_l ()
    | & _7 : usize = any_l ()
    | & _11 : usize = any_l () ]

    [ return' (result:Ordering'0.t_ordering)-> {[@expl:postcondition] [%#strail1] result = cmp_log'0 self other}
      (! return' {result}) ]

end
module Cdsat_Trail_Impl3_PartialCmp
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 70 14 70 50

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span2 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span3 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  let%span span4 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 14 70 15

  let%span span5 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 23 70 24

  let%span span6 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 69 14 69 59

  let%span span7 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 64 15 64 48

  let%span span8 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 16 66 17

  let%span span9 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 25 66 26

  let%span span10 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 65 14 65 44

  let%span span11 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 59 15 59 45

  let%span span12 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 16 61 17

  let%span span13 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 25 61 26

  let%span span14 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 60 14 60 47

  let%span span15 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 53 15 53 32

  let%span span16 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 54 15 54 32

  let%span span17 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 13 56 14

  let%span span18 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 22 56 23

  let%span span19 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 31 56 32

  let%span span20 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 55 14 55 31

  let%span span21 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 50 12 50 13

  let%span span22 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 49 14 49 45

  let%span span23 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 41 20 41 56

  let%span span24 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 18 46 19

  let%span span25 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 27 46 28

  let%span span26 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 45 14 45 64

  let%span span27 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 31 20 31 53

  let%span span28 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 18 36 19

  let%span span29 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 27 36 28

  let%span span30 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 35 14 35 61

  let%span span31 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 21 20 21 53

  let%span span32 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 18 26 19

  let%span span33 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 27 26 28

  let%span span34 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 25 14 25 61

  let%span span35 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 11 20 11 56

  let%span span36 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 18 16 19

  let%span span37 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 27 16 28

  let%span span38 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 15 14 15 64

  let%span span39 = "/Users/xavier/Code/cdsat/src/trail.rs" 146 14 146 59

  let%span span40 = "/Users/xavier/Code/cdsat/src/trail.rs" 144 4 144 10

  let%span span41 = "/Users/xavier/Code/cdsat/src/trail.rs" 140 15 140 48

  let%span span42 = "/Users/xavier/Code/cdsat/src/trail.rs" 141 14 141 44

  let%span span43 = "/Users/xavier/Code/cdsat/src/trail.rs" 138 4 138 10

  let%span span44 = "/Users/xavier/Code/cdsat/src/trail.rs" 134 15 134 45

  let%span span45 = "/Users/xavier/Code/cdsat/src/trail.rs" 135 14 135 47

  let%span span46 = "/Users/xavier/Code/cdsat/src/trail.rs" 132 4 132 10

  let%span span47 = "/Users/xavier/Code/cdsat/src/trail.rs" 127 15 127 32

  let%span span48 = "/Users/xavier/Code/cdsat/src/trail.rs" 128 15 128 32

  let%span span49 = "/Users/xavier/Code/cdsat/src/trail.rs" 129 14 129 31

  let%span span50 = "/Users/xavier/Code/cdsat/src/trail.rs" 125 4 125 10

  let%span span51 = "/Users/xavier/Code/cdsat/src/trail.rs" 122 14 122 45

  let%span span52 = "/Users/xavier/Code/cdsat/src/trail.rs" 120 4 120 10

  let%span span53 = "/Users/xavier/Code/cdsat/src/trail.rs" 117 14 117 64

  let%span span54 = "/Users/xavier/Code/cdsat/src/trail.rs" 115 4 115 10

  let%span span55 = "/Users/xavier/Code/cdsat/src/trail.rs" 112 14 112 61

  let%span span56 = "/Users/xavier/Code/cdsat/src/trail.rs" 110 4 110 10

  let%span span57 = "/Users/xavier/Code/cdsat/src/trail.rs" 107 14 107 61

  let%span span58 = "/Users/xavier/Code/cdsat/src/trail.rs" 105 4 105 10

  let%span span59 = "/Users/xavier/Code/cdsat/src/trail.rs" 102 14 102 64

  let%span span60 = "/Users/xavier/Code/cdsat/src/trail.rs" 100 4 100 10

  let%span span61 = "/Users/xavier/Code/cdsat/src/trail.rs" 77 14 77 44

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  predicate invariant'0 (self : TrailIndex'0.t_trailindex) =
    [%#span1] true

  predicate inv'0 (_x : TrailIndex'0.t_trailindex)

  axiom inv'0 : forall x : TrailIndex'0.t_trailindex . inv'0 x = true

  use Core_Cmp_Ordering_Type as Ordering'0

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span2] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span3] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  function eq_cmp'2 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom eq_cmp'2_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span4] inv'0 x)
   -> ([%#span5] inv'0 y)  -> ([%#span6] (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal))

  function antisym2'2 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym2'2_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span7] cmp_log'0 x y
  = Ordering'0.C_Greater)
   -> ([%#span8] inv'0 x)  -> ([%#span9] inv'0 y)  -> ([%#span10] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'2 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym1'2_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span11] cmp_log'0 x y
  = Ordering'0.C_Less)
   -> ([%#span12] inv'0 x)  -> ([%#span13] inv'0 y)  -> ([%#span14] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'2 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'2_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span15] cmp_log'0 x y
  = o)
   -> ([%#span16] cmp_log'0 y z = o)
   -> ([%#span17] inv'0 x)  -> ([%#span18] inv'0 y)  -> ([%#span19] inv'0 z)  -> ([%#span20] cmp_log'0 x z = o)

  function refl'2 (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'2_spec : forall x : TrailIndex'0.t_trailindex . ([%#span21] inv'0 x)
   -> ([%#span22] cmp_log'0 x x = Ordering'0.C_Equal)

  function gt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span23] cmp_log'0 self o = Ordering'0.C_Greater

  function cmp_gt_log'2 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_gt_log'2_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span24] inv'0 x)
   -> ([%#span25] inv'0 y)  -> ([%#span26] gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater))

  function ge_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span27] cmp_log'0 self o <> Ordering'0.C_Less

  function cmp_ge_log'2 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_ge_log'2_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span28] inv'0 x)
   -> ([%#span29] inv'0 y)  -> ([%#span30] ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less))

  function lt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span31] cmp_log'0 self o = Ordering'0.C_Less

  function cmp_lt_log'2 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_lt_log'2_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span32] inv'0 x)
   -> ([%#span33] inv'0 y)  -> ([%#span34] lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less))

  function le_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span35] cmp_log'0 self o <> Ordering'0.C_Greater

  function cmp_le_log'2 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_le_log'2_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span36] inv'0 x)
   -> ([%#span37] inv'0 y)  -> ([%#span38] le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater))

  function eq_cmp'1 (_1 : usize) (_2 : usize) : ()

  function antisym2'1 (_1 : usize) (_2 : usize) : ()

  function antisym1'1 (_1 : usize) (_2 : usize) : ()

  function trans'1 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'1 (_1 : usize) : ()

  function cmp_gt_log'1 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'1 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'1 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'1 (_1 : usize) (_2 : usize) : ()

  function eq_cmp'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 147 4 147 31] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span40] ()

  axiom eq_cmp'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span39] (x = y)
  = (cmp_log'0 x y = Ordering'0.C_Equal)

  function antisym2'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 142 4 142 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span43] ()

  axiom antisym2'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span41] cmp_log'0 x y
  = Ordering'0.C_Greater)  -> ([%#span42] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 136 4 136 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span46] ()

  axiom antisym1'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span44] cmp_log'0 x y
  = Ordering'0.C_Less)  -> ([%#span45] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 130 4 130 52] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()

   =
    [%#span50] ()

  axiom trans'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span47] cmp_log'0 x y
  = o)  -> ([%#span48] cmp_log'0 y z = o)  -> ([%#span49] cmp_log'0 x z = o)

  function refl'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 123 4 123 20] (x : TrailIndex'0.t_trailindex) : () =
    [%#span52] ()

  axiom refl'0_spec : forall x : TrailIndex'0.t_trailindex . [%#span51] cmp_log'0 x x = Ordering'0.C_Equal

  function cmp_gt_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 118 4 118 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span54] ()

  axiom cmp_gt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span53] gt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Greater)

  function cmp_ge_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 113 4 113 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span56] ()

  axiom cmp_ge_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span55] ge_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Less)

  function cmp_lt_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 108 4 108 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span58] ()

  axiom cmp_lt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span57] lt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Less)

  function cmp_le_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 103 4 103 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span60] ()

  axiom cmp_le_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span59] le_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Greater)

  use prelude.prelude.Borrow

  use prelude.prelude.Intrinsic

  use Core_Option_Option_Type as Option'0

  let rec cmp'0 (self:TrailIndex'0.t_trailindex) (other:TrailIndex'0.t_trailindex) (return'  (ret:Ordering'0.t_ordering))= any
    [ return' (result:Ordering'0.t_ordering)-> {[%#span61] result = cmp_log'0 self other} (! return' {result}) ]


  let rec partial_cmp (self:TrailIndex'0.t_trailindex) (other:TrailIndex'0.t_trailindex) (return'  (ret:Option'0.t_option (Ordering'0.t_ordering)))= (! bb0
    [ bb0 = s0 [ s0 = cmp'0 {self} {other} (fun (_ret':Ordering'0.t_ordering) ->  [ &_4 <- _ret' ] s1) | s1 = bb1 ]
    | bb1 = s0
      [ s0 =  [ &_0 <- Option'0.C_Some _4 ] (any [ any_ (_any:Ordering'0.t_ordering)-> (!  [ &_4 <- _any ] s1) ] )
      | s1 = return' {_0} ]
       ]
    )
    [ & _0 : Option'0.t_option (Ordering'0.t_ordering) = any_l ()
    | & self : TrailIndex'0.t_trailindex = self
    | & other : TrailIndex'0.t_trailindex = other
    | & _4 : Ordering'0.t_ordering = any_l () ]

    [ return' (result:Option'0.t_option (Ordering'0.t_ordering))-> {[@expl:postcondition] [%#strail0] result
      = Option'0.C_Some (cmp_log'0 self other)}
      (! return' {result}) ]

end
module Cdsat_Trail_Impl9_LemmaAbsJust_Impl
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 349 15 349 38

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 350 4 350 105

  let%span strail2 = "/Users/xavier/Code/cdsat/src/trail.rs" 351 14 351 81

  let%span strail3 = "/Users/xavier/Code/cdsat/src/trail.rs" 348 14 348 24

  let%span strail4 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 13 814 14

  let%span strail5 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 24 814 25

  let%span strail6 = "/Users/xavier/Code/cdsat/src/trail.rs" 809 0 809 73

  let%span strail7 = "/Users/xavier/Code/cdsat/src/trail.rs" 810 0 810 63

  let%span strail8 = "/Users/xavier/Code/cdsat/src/trail.rs" 811 0 811 55

  let%span strail9 = "/Users/xavier/Code/cdsat/src/trail.rs" 812 0 812 52

  let%span strail10 = "/Users/xavier/Code/cdsat/src/trail.rs" 813 10 813 33

  let%span strail11 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 33 814 39

  let%span strail12 = "/Users/xavier/Code/cdsat/src/trail.rs" 808 10 808 17

  let%span span13 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span14 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span15 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span16 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span17 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span18 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span19 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 129 8 129 78

  let%span span20 = "/Users/xavier/Code/cdsat/src/trail.rs" 807 0 807 8

  let%span span21 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span22 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span23 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span24 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span25 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span26 = "/Users/xavier/Code/cdsat/src/term.rs" 195 8 225 9

  let%span span27 = "/Users/xavier/Code/cdsat/src/term.rs" 180 8 180 25

  let%span span28 = "/Users/xavier/Code/cdsat/src/trail.rs" 726 8 726 61

  let%span span29 = "/Users/xavier/Code/cdsat/src/trail.rs" 646 8 648 9

  let%span span30 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span31 = "/Users/xavier/Code/cdsat/src/trail.rs" 291 12 291 92

  let%span span32 = "/Users/xavier/Code/cdsat/src/trail.rs" 313 4 313 82

  let%span span33 = "/Users/xavier/Code/cdsat/src/trail.rs" 314 14 314 40

  let%span span34 = "/Users/xavier/Code/cdsat/src/trail.rs" 315 4 315 115

  let%span span35 = "/Users/xavier/Code/cdsat/src/trail.rs" 316 4 316 115

  let%span span36 = "/Users/xavier/Code/cdsat/src/trail.rs" 317 4 317 101

  let%span span37 = "/Users/xavier/Code/cdsat/src/trail.rs" 312 14 312 24

  let%span span38 = "/Users/xavier/Code/cdsat/src/trail.rs" 310 4 310 12

  let%span span39 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span40 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span41 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span42 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span43 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span44 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span45 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span46 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span47 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span48 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span49 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span50 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span51 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span52 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span53 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span54 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span55 = "/Users/xavier/Code/cdsat/src/trail.rs" 331 4 331 16

  use Cdsat_Trail_Assignment_Type as Assignment'0

  use seq.Seq

  predicate invariant'6 (self : Seq.seq (Assignment'0.t_assignment)) =
    [%#span13] true

  predicate inv'5 (_x : Seq.seq (Assignment'0.t_assignment))

  axiom inv'5 : forall x : Seq.seq (Assignment'0.t_assignment) . inv'5 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  constant max'0 : usize = [%#span14] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'4 (_x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

  function shallow_model'1 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) : Seq.seq (Assignment'0.t_assignment)


  axiom shallow_model'1_spec : forall self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . ([%#span15] inv'4 self)
   -> ([%#span17] inv'5 (shallow_model'1 self))
  && ([%#span16] Seq.length (shallow_model'1 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'5 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span18] inv'5 (shallow_model'1 self)

  axiom inv'4 : forall x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . inv'4 x = true

  predicate invariant'4 (self : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span13] true

  predicate inv'3 (_x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'3 : forall x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'3 x = true

  use seq.Seq

  predicate inv'2 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  function shallow_model'0 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))


  axiom shallow_model'0_spec : forall self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . ([%#span15] inv'2 self)
   -> ([%#span17] inv'3 (shallow_model'0 self))
  && ([%#span16] Seq.length (shallow_model'0 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'3 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span18] inv'3 (shallow_model'0 self)

  axiom inv'2 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'2 x
  = true

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  predicate invariant'1 (self : TrailIndex'0.t_trailindex) =
    [%#span13] true

  predicate inv'1 (_x : TrailIndex'0.t_trailindex)

  axiom inv'1 : forall x : TrailIndex'0.t_trailindex . inv'1 x = true

  predicate invariant'0 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span13] true

  predicate inv'0 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'0 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'0 x = true

  use seq.Seq

  use seq.Seq

  predicate contains'1 (self : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) =
    [%#span19] exists i : int . 0 <= i /\ i < Seq.length self /\ Seq.get self i = e

  use seq.Seq

  use prelude.seq_ext.SeqExt

  use seq.Seq

  function remove'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 814 0 814 39] (s : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom remove'0_def : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . remove'0 s e
  = ([%#span20] if s = (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) then
    Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)
  else
    if Seq.get s (Seq.length s - 1) = e then
      remove'0 (SeqExt.subsequence s 0 (Seq.length s - 1)) e
    else
      Seq.snoc (remove'0 (SeqExt.subsequence s 0 (Seq.length s - 1)) e) (Seq.get s (Seq.length s - 1))

  )

  axiom remove'0_spec : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . ([%#strail4] inv'0 s)
   -> ([%#strail5] inv'1 e)
   -> ([%#strail11] inv'0 (remove'0 s e))
  && ([%#strail10] Seq.length (remove'0 s e) <= Seq.length s)
  && ([%#strail9] contains'1 s e  -> Seq.length (remove'0 s e) < Seq.length s)
  && ([%#strail8] forall t : TrailIndex'0.t_trailindex . inv'1 t  -> contains'1 (remove'0 s e) t  -> t <> e)
  && ([%#strail7] forall t : TrailIndex'0.t_trailindex . inv'1 t  -> contains'1 (remove'0 s e) t  -> contains'1 s t)
  && ([%#strail6] forall t : TrailIndex'0.t_trailindex . inv'1 t
   -> contains'1 s t  -> e <> t  -> contains'1 (remove'0 s e) t)

  use Cdsat_Trail_Trail_Type as Trail'0

  use set.Fset

  use set.Fset

  use Cdsat_Theory_Value_Type as Value'0

  use Cdsat_Theory_Term_Type as Term'0

  use set.Fset

  function insert'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span21] Fset.add e self

  use prelude.prelude.Borrow

  use Cdsat_Term_Value_Type as Value'1

  use Cdsat_Term_Term_Type as Term'1

  use prelude.prelude.Real

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  function deep_model'4 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span22] match self with
      | Value'1.C_Bool b -> Value'0.C_Bool b
      | Value'1.C_Rat br -> Value'0.C_Rat (deep_model'4 br)
      end

  function shallow_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span23] deep_model'1 self

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Term_Sort_Type as Sort'1

  use Cdsat_Theory_Var_Type as Var'0

  function deep_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'1.t_sort) : Sort'0.t_sort =
    [%#span24] match self with
      | Sort'1.C_Boolean -> Sort'0.C_Boolean
      | Sort'1.C_Rational -> Sort'0.C_Rational
      end

  function deep_model'2 (self : usize) : int =
    [%#span25] UIntSize.to_int self

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 193 4 193 44] (self : Term'1.t_term) : Term'0.t_term =
    [%#span26] match self with
      | Term'1.C_Variable v s -> Term'0.C_Variable (Var'0.C_Var (deep_model'2 v) (deep_model'3 s))
      | Term'1.C_Value v -> Term'0.C_Value (deep_model'1 v)
      | Term'1.C_Plus l r -> Term'0.C_Plus (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Eq l r -> Term'0.C_Eq (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Conj l r -> Term'0.C_Conj (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Disj l r -> Term'0.C_Disj (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Neg t -> Term'0.C_Neg (deep_model'0 t)
      | Term'1.C_Impl l r -> Term'0.C_Disj (Term'0.C_Neg (deep_model'0 l)) (deep_model'0 r)
      | Term'1.C_Times l r -> Term'0.C_Plus (Term'0.C_Value (Value'0.C_Rat (deep_model'4 l))) (deep_model'0 r)
      | Term'1.C_Lt l r -> Term'0.C_Eq (deep_model'0 l) (deep_model'0 r)
      end

  function shallow_model'2 [#"/Users/xavier/Code/cdsat/src/term.rs" 179 4 179 50] (self : Term'1.t_term) : Term'0.t_term
   =
    [%#span27] deep_model'0 self

  function term_value'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 725 4 725 61] (self : Assignment'0.t_assignment) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span28] (shallow_model'2 (Cdsat_Trail_Assignment_Type.assignment_term self), shallow_model'3 (Cdsat_Trail_Assignment_Type.assignment_val self))

  use seq.Seq

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  use seq.Seq

  use Cdsat_Trail_Trail_Type as Cdsat_Trail_Trail_Type

  function index_logic'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 645 4 645 77] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span29] term_value'0 (Seq.get (shallow_model'1 (Seq.get (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)))) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)))

  use set.Fset

  predicate contains'3 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span30] Fset.mem e self

  use set.Fset

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 289 4 289 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex)

   =
    [%#span31] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)
    < Seq.length (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self))
    /\ UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)
    < Seq.length (shallow_model'1 (Seq.get (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))))

  function abstract_justification'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 318 4 321 44] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) : Fset.fset (Term'0.t_term, Value'0.t_value)


  axiom abstract_justification'0_def : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . abstract_justification'0 self just
  = ([%#span38] if Seq.length just > 0 then
    let set = abstract_justification'0 self (remove'0 just (Seq.get just 0)) in let a = index_logic'0 self (Seq.get just 0) in insert'0 set a
  else
    Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)
  )

  axiom abstract_justification'0_spec : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span32] forall i : int . 0
  <= i
  /\ i < Seq.length just  -> contains'0 self (Seq.get just i))
   -> ([%#span36] forall i : int . 0 <= i /\ i < Seq.length just
   -> contains'3 (abstract_justification'0 self just) (index_logic'0 self (Seq.get just i)))
  && ([%#span35] forall a : (Term'0.t_term, Value'0.t_value) . contains'3 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'1 just ix /\ a = index_logic'0 self ix))
  && ([%#span34] forall a : (Term'0.t_term, Value'0.t_value) . contains'3 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'0 self ix /\ a = index_logic'0 self ix))
  && ([%#span33] Fset.cardinal (abstract_justification'0 self just) <= Seq.length just)

  use prelude.prelude.Int

  use Cdsat_Theory_Assign_Type as Assign'0

  use Core_Option_Option_Type as Option'0

  use Cdsat_Theory_Trail_Type as Trail'1

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span39] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span40] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span41] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'1.t_trail) =
    [%#span42] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'2 a
      end

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'1.t_trail) : int

  axiom len'0_spec : forall self : Trail'1.t_trail . [%#span43] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'1.t_trail) : int =
    [%#span46] match self with
      | Trail'1.C_Empty -> 0
      | Trail'1.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'1.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'1.t_trail . ([%#span45] level'0 self <= len'0 self)
  && ([%#span44] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'1.t_trail) =
    [%#span47] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span48] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span52] match self with
      | Trail'1.C_Empty -> Option'0.C_None
      | Trail'1.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span51] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span50] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span49] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  predicate contains'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span54] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'2_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span53] invariant_assign'0 self
   -> contains'2 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  use prelude.prelude.Snapshot

  predicate trail_extension'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 332 4 332 45] (self : Trail'0.t_trail) (o : Trail'0.t_trail)

   =
    [%#span55] if Cdsat_Trail_Trail_Type.trail_level self <= Cdsat_Trail_Trail_Type.trail_level o then
      (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix  -> index_logic'0 self ix = index_logic'0 o ix)
      /\ (forall kv : (Term'0.t_term, Value'0.t_value) . contains'2 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) kv
       -> find'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) kv
      = find'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost o)) kv)
    else
      (forall ix : TrailIndex'0.t_trailindex . contains'0 o ix  -> index_logic'0 self ix = index_logic'0 o ix)
      /\ (forall kv : (Term'0.t_term, Value'0.t_value) . contains'2 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost o)) kv
       -> find'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost o)) kv
      = find'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) kv)


  constant self  : Trail'0.t_trail

  constant o  : Trail'0.t_trail

  constant just  : Seq.seq (TrailIndex'0.t_trailindex)

  function lemma_abs_just [#"/Users/xavier/Code/cdsat/src/trail.rs" 352 4 352 59] (self : Trail'0.t_trail) (o : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) : ()


  goal vc_lemma_abs_just : ([%#strail1] forall i : int . 0 <= i /\ i < Seq.length just
   -> contains'0 self (Seq.get just i) /\ contains'0 o (Seq.get just i))
   -> ([%#strail0] trail_extension'0 self o)
   -> (if Seq.length just = 0 then
    [%#strail2] abstract_justification'0 self just = abstract_justification'0 o just
  else
    (([%#strail5] inv'1 (Seq.get just 0)) && ([%#strail4] inv'0 just))
    /\ (([%#strail11] inv'0 (remove'0 just (Seq.get just 0)))
    && ([%#strail10] Seq.length (remove'0 just (Seq.get just 0)) <= Seq.length just)
    && ([%#strail9] contains'1 just (Seq.get just 0)  -> Seq.length (remove'0 just (Seq.get just 0)) < Seq.length just)
    && ([%#strail8] forall t : TrailIndex'0.t_trailindex . inv'1 t
     -> contains'1 (remove'0 just (Seq.get just 0)) t  -> t <> Seq.get just 0)
    && ([%#strail7] forall t : TrailIndex'0.t_trailindex . inv'1 t
     -> contains'1 (remove'0 just (Seq.get just 0)) t  -> contains'1 just t)
    && ([%#strail6] forall t : TrailIndex'0.t_trailindex . inv'1 t
     -> contains'1 just t  -> Seq.get just 0 <> t  -> contains'1 (remove'0 just (Seq.get just 0)) t)
     -> ((([%#strail1] forall i : int . 0 <= i /\ i < Seq.length (remove'0 just (Seq.get just 0))
     -> contains'0 self (Seq.get (remove'0 just (Seq.get just 0)) i)
    /\ contains'0 o (Seq.get (remove'0 just (Seq.get just 0)) i))
    && ([%#strail0] trail_extension'0 self o))
    /\ 0 <= ([%#strail3] Seq.length just)
    /\ ([%#strail3] Seq.length (remove'0 just (Seq.get just 0))) < ([%#strail3] Seq.length just))
    /\ (([%#strail2] abstract_justification'0 self (remove'0 just (Seq.get just 0))
    = abstract_justification'0 o (remove'0 just (Seq.get just 0)))
     -> ([%#strail2] abstract_justification'0 self just = abstract_justification'0 o just)))
  )
end
module Cdsat_Trail_Impl9_Level
  use prelude.prelude.Borrow

  use prelude.prelude.Intrinsic

  use Cdsat_Theory_Trail_Type as Trail'1

  use prelude.prelude.Snapshot

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  use Alloc_Alloc_Global_Type as Global'0

  use Cdsat_Trail_Assignment_Type as Assignment'0

  use Alloc_Vec_Vec_Type as Vec'0

  use Cdsat_Trail_Trail_Type as Trail'0

  let rec level (self:Trail'0.t_trail) (return'  (ret:usize))= (! bb0
    [ bb0 = s0
      [ s0 = Trail'0.t_trail {self}
          (fun (rassignments'0:Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (rlevel'0:usize) (rghost'0:Snapshot.snap_ty (Trail'1.t_trail)) (rnum_assign'0:usize) ->
             [ &_0 <- rlevel'0 ]
            s1)
      | s1 = return' {_0} ]
       ]
    ) [ & _0 : usize = any_l () | & self : Trail'0.t_trail = self ]  [ return' (result:usize)-> (! return' {result}) ]
end
module Cdsat_Trail_Impl12_Level
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 729 14 729 34

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  use prelude.prelude.Borrow

  use prelude.prelude.Intrinsic

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  use Cdsat_Trail_Reason_Type as Reason'0

  use Cdsat_Term_Value_Type as Value'0

  use Cdsat_Term_Term_Type as Term'0

  use Cdsat_Trail_Assignment_Type as Assignment'0

  let rec level (self:Assignment'0.t_assignment) (return'  (ret:usize))= (! bb0
    [ bb0 = s0
      [ s0 = Assignment'0.t_assignment {self}
          (fun (rterm'0:Term'0.t_term) (rval'0:Value'0.t_value) (rreason'0:Reason'0.t_reason) (rlevel'0:usize) ->
             [ &_0 <- rlevel'0 ]
            s1)
      | s1 = return' {_0} ]
       ]
    ) [ & _0 : usize = any_l () | & self : Assignment'0.t_assignment = self ]
    [ return' (result:usize)-> {[@expl:postcondition] [%#strail0] result
      = Cdsat_Trail_Assignment_Type.assignment_level self}
      (! return' {result}) ]

end
module Cdsat_Trail_Impl12_IsRational
  let%span smod0 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/macros/mod.rs" 459 17 459 22

  let%span smod1 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/macros/mod.rs" 458 38 458 42

  let%span strail2 = "/Users/xavier/Code/cdsat/src/trail.rs" 741 8 742 86

  let%span span3 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span4 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span5 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span6 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span7 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 90 8 90 31

  let%span span8 = "/Users/xavier/Code/cdsat/src/term.rs" 298 14 298 41

  use prelude.prelude.Borrow

  use prelude.prelude.Intrinsic

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  use Cdsat_Term_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'1

  use Cdsat_Term_Value_Type as Value'0

  use Cdsat_Theory_Sort_Type as Sort'1

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'1.t_value) : Sort'1.t_sort =
    [%#span3] match self with
      | Value'1.C_Bool _ -> Sort'1.C_Boolean
      | Value'1.C_Rat _ -> Sort'1.C_Rational
      end

  predicate is_bool'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'1.t_value) =
    [%#span4] sort'0 self = Sort'1.C_Boolean

  use prelude.prelude.Real

  function deep_model'1 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span5] match self with
      | Value'0.C_Bool b -> Value'1.C_Bool b
      | Value'0.C_Rat br -> Value'1.C_Rat (deep_model'1 br)
      end

  function shallow_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span6] deep_model'0 self

  function shallow_model'0 (self : Value'0.t_value) : Value'1.t_value =
    [%#span7] shallow_model'1 self

  let rec is_bool'0 (self:Value'0.t_value) (return'  (ret:bool))= any
    [ return' (result:bool)-> {[%#span8] result = is_bool'1 (shallow_model'0 self)} (! return' {result}) ]


  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  use Cdsat_Trail_Reason_Type as Reason'0

  use Cdsat_Term_Term_Type as Term'0

  use Cdsat_Trail_Assignment_Type as Assignment'0

  let rec is_rational (self:Assignment'0.t_assignment) (return'  (ret:bool))= (! bb0
    [ bb0 = s0
      [ s0 = Assignment'0.t_assignment {self}
          (fun (rterm'0:Term'0.t_term) (rval'0:Value'0.t_value) (rreason'0:Reason'0.t_reason) (rlevel'0:usize) ->
            is_bool'0 {rval'0} (fun (_ret':bool) ->  [ &_2 <- _ret' ] s1))
      | s1 = bb1 ]

    | bb1 = any [ br0 -> {_2 = false} (! bb3) | br1 -> {_2} (! bb2) ]
    | bb2 = Assignment'0.t_assignment {self}
        (fun (rterm'0:Term'0.t_term) (rval'0:Value'0.t_value) (rreason'0:Reason'0.t_reason) (rlevel'0:usize) ->
          any
          [ br0 (a:usize) (b:Sort'0.t_sort)-> {rterm'0 = Term'0.C_Variable a b} (! bb4)
          | br1 (a:Value'0.t_value)-> {rterm'0 = Term'0.C_Value a} (! bb4)
          | br2 (a:Term'0.t_term) (b:Term'0.t_term)-> {rterm'0 = Term'0.C_Plus a b} (! bb5)
          | br3 (a:Ratio'0.t_ratio (BigInt'0.t_bigint)) (b:Term'0.t_term)-> {rterm'0 = Term'0.C_Times a b} (! bb4)
          | br4 (a:Term'0.t_term) (b:Term'0.t_term)-> {rterm'0 = Term'0.C_Eq a b} (! bb5)
          | br5 (a:Term'0.t_term) (b:Term'0.t_term)-> {rterm'0 = Term'0.C_Lt a b} (! bb5)
          | br6 (a:Term'0.t_term) (b:Term'0.t_term)-> {rterm'0 = Term'0.C_Conj a b} (! bb4)
          | br7 (a:Term'0.t_term)-> {rterm'0 = Term'0.C_Neg a} (! bb4)
          | br8 (a:Term'0.t_term) (b:Term'0.t_term)-> {rterm'0 = Term'0.C_Disj a b} (! bb4)
          | br9 (a:Term'0.t_term) (b:Term'0.t_term)-> {rterm'0 = Term'0.C_Impl a b} (! bb4) ]
          )
    | bb4 = s0 [ s0 =  [ &_0 <- [%#smod0] false ] s1 | s1 = bb7 ]
    | bb5 = bb6
    | bb6 = s0 [ s0 =  [ &_0 <- [%#smod1] true ] s1 | s1 = bb7 ]
    | bb3 = s0 [ s0 =  [ &_0 <- [%#strail2] true ] s1 | s1 = bb7 ]
    | bb7 = return' {_0} ]
    ) [ & _0 : bool = any_l () | & self : Assignment'0.t_assignment = self | & _2 : bool = any_l () ]
    [ return' (result:bool)-> (! return' {result}) ]

end
module Cdsat_Trail_Impl12_IsJustified
  let%span smod0 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/macros/mod.rs" 459 17 459 22

  let%span smod1 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/macros/mod.rs" 458 38 458 42

  let%span strail2 = "/Users/xavier/Code/cdsat/src/trail.rs" 750 14 750 75

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  use prelude.prelude.Borrow

  use prelude.prelude.Intrinsic

  use Alloc_Alloc_Global_Type as Global'0

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  use Cdsat_Trail_Reason_Type as Reason'0

  use Cdsat_Term_Value_Type as Value'0

  use Cdsat_Term_Term_Type as Term'0

  use Cdsat_Trail_Assignment_Type as Assignment'0

  let rec is_justified (self:Assignment'0.t_assignment) (return'  (ret:bool))= (! bb0
    [ bb0 = Assignment'0.t_assignment {self}
        (fun (rterm'0:Term'0.t_term) (rval'0:Value'0.t_value) (rreason'0:Reason'0.t_reason) (rlevel'0:usize) ->
          any
          [ br0 (a:Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))-> {rreason'0 = Reason'0.C_Justified a}
            (! bb2)
          | br1 -> {rreason'0 = Reason'0.C_Decision } (! bb1)
          | br2 -> {rreason'0 = Reason'0.C_Input } (! bb1) ]
          )
    | bb1 = s0 [ s0 =  [ &_0 <- [%#smod0] false ] s1 | s1 = bb4 ]
    | bb2 = bb3
    | bb3 = s0 [ s0 =  [ &_0 <- [%#smod1] true ] s1 | s1 = bb4 ]
    | bb4 = return' {_0} ]
    ) [ & _0 : bool = any_l () | & self : Assignment'0.t_assignment = self ]
    [ return' (result:bool)-> {[@expl:postcondition] [%#strail2] result
      = (exists j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . Cdsat_Trail_Assignment_Type.assignment_reason self
      = Reason'0.C_Justified j)}
      (! return' {result}) ]

end
module Cdsat_Trail_Impl12_IsInput
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 760 14 760 54

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span2 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span4 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span5 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span6 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span7 = "/Users/xavier/Code/cdsat/src/trail.rs" 168 8 168 12

  let%span span8 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 20 8 20 31

  let%span span9 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 33 18 33 22

  let%span span10 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 30 14 30 56

  let%span span11 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 31 4 32 53

  let%span span12 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 33 4 33 44

  let%span span13 = "/Users/xavier/Code/cdsat/src/trail.rs" 48 31 48 40

  let%span span14 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 81 8 81 28

  let%span span15 = "/Users/xavier/Code/cdsat/src/trail.rs" 48 16 48 25

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use seq.Seq

  predicate invariant'1 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span1] true

  predicate inv'1 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'1 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'1 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  constant max'0 : usize = [%#span2] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'0 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function shallow_model'0 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom shallow_model'0_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span3] inv'0 self)
   -> ([%#span5] inv'1 (shallow_model'0 self))
  && ([%#span4] Seq.length (shallow_model'0 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'0 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span6] inv'1 (shallow_model'0 self)

  axiom inv'0 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'0 x = true

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  use prelude.prelude.Intrinsic

  use Cdsat_Trail_ReasonDeepModel_Type as ReasonDeepModel'0

  use Cdsat_Trail_Reason_Type as Reason'0

  use prelude.prelude.Borrow

  function deep_model'3 [#"/Users/xavier/Code/cdsat/src/trail.rs" 167 4 167 44] (self : TrailIndex'0.t_trailindex) : TrailIndex'0.t_trailindex

   =
    [%#span7] self

  use seq.Seq

  function index_logic'0 [@inline:trivial] (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) (ix : int) : TrailIndex'0.t_trailindex

   =
    [%#span8] Seq.get (shallow_model'0 self) ix

  function deep_model'2 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom deep_model'2_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span9] inv'0 self)
   -> ([%#span12] inv'1 (deep_model'2 self))
  && ([%#span11] forall i : int . 0 <= i /\ i < Seq.length (shallow_model'0 self)
   -> Seq.get (deep_model'2 self) i = deep_model'3 (index_logic'0 self i))
  && ([%#span10] Seq.length (shallow_model'0 self) = Seq.length (deep_model'2 self))

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 48 31 48 40] (self : Reason'0.t_reason) : ReasonDeepModel'0.t_reasondeepmodel

   =
    [%#span13] match self with
      | Reason'0.C_Justified v0_1 -> ReasonDeepModel'0.C_Justified (deep_model'2 v0_1)
      | Reason'0.C_Decision -> ReasonDeepModel'0.C_Decision
      | Reason'0.C_Input -> ReasonDeepModel'0.C_Input
      end

  function deep_model'0 (self : Reason'0.t_reason) : ReasonDeepModel'0.t_reasondeepmodel =
    [%#span14] deep_model'1 self

  let rec eq'0 (self:Reason'0.t_reason) (rhs:Reason'0.t_reason) (return'  (ret:bool))= any
    [ return' (result:bool)-> {[%#span15] result = (deep_model'0 self = deep_model'0 rhs)} (! return' {result}) ]


  use Cdsat_Term_Value_Type as Value'0

  use Cdsat_Term_Term_Type as Term'0

  use Cdsat_Trail_Assignment_Type as Assignment'0

  let rec promoted0 (return'  (ret:Reason'0.t_reason))= bb0
    [ bb0 = s0 [ s0 =  [ &_1 <- Reason'0.C_Input ] s1 | s1 =  [ &_0 <- _1 ] s2 | s2 = return' {_0} ]  ]
     [ & _0 : Reason'0.t_reason = any_l () | & _1 : Reason'0.t_reason = any_l () ]
    [ return' (result:Reason'0.t_reason)-> return' {result} ]


  let rec is_input (self:Assignment'0.t_assignment) (return'  (ret:bool))= (! bb0
    [ bb0 = s0
      [ s0 = promoted0 (fun (pr0:Reason'0.t_reason) ->  [ &_6 <- pr0 ] s1)
      | s1 = Assignment'0.t_assignment {self}
          (fun (rterm'0:Term'0.t_term) (rval'0:Value'0.t_value) (rreason'0:Reason'0.t_reason) (rlevel'0:usize) ->
            eq'0 {rreason'0} {_6} (fun (_ret':bool) ->  [ &_0 <- _ret' ] s2))
      | s2 = bb1 ]

    | bb1 = return' {_0} ]
    ) [ & _0 : bool = any_l () | & self : Assignment'0.t_assignment = self | & _6 : Reason'0.t_reason = any_l () ]
    [ return' (result:bool)-> {[@expl:postcondition] [%#strail0] result
      = (Cdsat_Trail_Assignment_Type.assignment_reason self = Reason'0.C_Input)}
      (! return' {result}) ]

end
module Cdsat_Trail_Impl12_Value
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 765 14 765 33

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  use prelude.prelude.Intrinsic

  use prelude.prelude.Borrow

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  use Cdsat_Trail_Reason_Type as Reason'0

  use Cdsat_Term_Value_Type as Value'0

  use Cdsat_Term_Term_Type as Term'0

  use Cdsat_Trail_Assignment_Type as Assignment'0

  let rec value (self:Assignment'0.t_assignment) (return'  (ret:Value'0.t_value))= (! bb0
    [ bb0 = s0
      [ s0 = Assignment'0.t_assignment {self}
          (fun (rterm'0:Term'0.t_term) (rval'0:Value'0.t_value) (rreason'0:Reason'0.t_reason) (rlevel'0:usize) ->
             [ &_3 <- rval'0 ]
            s1)
      | s1 =  [ &_0 <- _3 ] s2
      | s2 = return' {_0} ]
       ]
    )
    [ & _0 : Value'0.t_value = any_l ()
    | & self : Assignment'0.t_assignment = self
    | & _3 : Value'0.t_value = any_l () ]

    [ return' (result:Value'0.t_value)-> {[@expl:postcondition] [%#strail0] result
      = Cdsat_Trail_Assignment_Type.assignment_val self}
      (! return' {result}) ]

end
module Cdsat_Trail_Impl12_Term
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 770 14 770 34

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  use prelude.prelude.Intrinsic

  use prelude.prelude.Borrow

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  use Cdsat_Trail_Reason_Type as Reason'0

  use Cdsat_Term_Value_Type as Value'0

  use Cdsat_Term_Term_Type as Term'0

  use Cdsat_Trail_Assignment_Type as Assignment'0

  let rec term (self:Assignment'0.t_assignment) (return'  (ret:Term'0.t_term))= (! bb0
    [ bb0 = s0
      [ s0 = Assignment'0.t_assignment {self}
          (fun (rterm'0:Term'0.t_term) (rval'0:Value'0.t_value) (rreason'0:Reason'0.t_reason) (rlevel'0:usize) ->
             [ &_3 <- rterm'0 ]
            s1)
      | s1 =  [ &_0 <- _3 ] s2
      | s2 = return' {_0} ]
       ]
    ) [ & _0 : Term'0.t_term = any_l () | & self : Assignment'0.t_assignment = self | & _3 : Term'0.t_term = any_l () ]
    [ return' (result:Term'0.t_term)-> {[@expl:postcondition] [%#strail0] result
      = Cdsat_Trail_Assignment_Type.assignment_term self}
      (! return' {result}) ]

end
module Cdsat_Trail_SeqToSet_Impl
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 795 0 795 58

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 796 0 796 58

  let%span strail2 = "/Users/xavier/Code/cdsat/src/trail.rs" 797 10 797 64

  let%span strail3 = "/Users/xavier/Code/cdsat/src/trail.rs" 793 10 793 17

  let%span strail4 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 13 814 14

  let%span strail5 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 24 814 25

  let%span strail6 = "/Users/xavier/Code/cdsat/src/trail.rs" 809 0 809 73

  let%span strail7 = "/Users/xavier/Code/cdsat/src/trail.rs" 810 0 810 63

  let%span strail8 = "/Users/xavier/Code/cdsat/src/trail.rs" 811 0 811 55

  let%span strail9 = "/Users/xavier/Code/cdsat/src/trail.rs" 812 0 812 52

  let%span strail10 = "/Users/xavier/Code/cdsat/src/trail.rs" 813 10 813 33

  let%span strail11 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 33 814 39

  let%span strail12 = "/Users/xavier/Code/cdsat/src/trail.rs" 808 10 808 17

  let%span span13 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span14 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span15 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span16 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span17 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span18 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span19 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span20 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 129 8 129 78

  let%span span21 = "/Users/xavier/Code/cdsat/src/trail.rs" 807 0 807 8

  let%span span22 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span23 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span24 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span25 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span26 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span27 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span28 = "/Users/xavier/Code/cdsat/src/term.rs" 195 8 225 9

  let%span span29 = "/Users/xavier/Code/cdsat/src/term.rs" 180 8 180 25

  let%span span30 = "/Users/xavier/Code/cdsat/src/trail.rs" 726 8 726 61

  let%span span31 = "/Users/xavier/Code/cdsat/src/trail.rs" 646 8 648 9

  let%span span32 = "/Users/xavier/Code/cdsat/src/trail.rs" 780 0 780 79

  let%span span33 = "/Users/xavier/Code/cdsat/src/trail.rs" 781 0 781 102

  let%span span34 = "/Users/xavier/Code/cdsat/src/trail.rs" 779 10 779 17

  let%span span35 = "/Users/xavier/Code/cdsat/src/trail.rs" 777 0 777 8

  let%span span36 = "/Users/xavier/Code/cdsat/src/trail.rs" 291 12 291 92

  let%span span37 = "/Users/xavier/Code/cdsat/src/trail.rs" 313 4 313 82

  let%span span38 = "/Users/xavier/Code/cdsat/src/trail.rs" 314 14 314 40

  let%span span39 = "/Users/xavier/Code/cdsat/src/trail.rs" 315 4 315 115

  let%span span40 = "/Users/xavier/Code/cdsat/src/trail.rs" 316 4 316 115

  let%span span41 = "/Users/xavier/Code/cdsat/src/trail.rs" 317 4 317 101

  let%span span42 = "/Users/xavier/Code/cdsat/src/trail.rs" 312 14 312 24

  let%span span43 = "/Users/xavier/Code/cdsat/src/trail.rs" 310 4 310 12

  use Cdsat_Trail_Assignment_Type as Assignment'0

  use seq.Seq

  predicate invariant'5 (self : Seq.seq (Assignment'0.t_assignment)) =
    [%#span13] true

  predicate inv'5 (_x : Seq.seq (Assignment'0.t_assignment))

  axiom inv'5 : forall x : Seq.seq (Assignment'0.t_assignment) . inv'5 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  constant max'0 : usize = [%#span14] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'4 (_x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

  function shallow_model'1 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) : Seq.seq (Assignment'0.t_assignment)


  axiom shallow_model'1_spec : forall self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . ([%#span15] inv'4 self)
   -> ([%#span17] inv'5 (shallow_model'1 self))
  && ([%#span16] Seq.length (shallow_model'1 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'4 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span18] inv'5 (shallow_model'1 self)

  axiom inv'4 : forall x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . inv'4 x = true

  predicate invariant'3 (self : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span13] true

  predicate inv'3 (_x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'3 : forall x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'3 x = true

  use seq.Seq

  predicate inv'2 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  function shallow_model'0 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))


  axiom shallow_model'0_spec : forall self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . ([%#span15] inv'2 self)
   -> ([%#span17] inv'3 (shallow_model'0 self))
  && ([%#span16] Seq.length (shallow_model'0 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'2 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span18] inv'3 (shallow_model'0 self)

  axiom inv'2 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'2 x
  = true

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  predicate invariant'1 (self : TrailIndex'0.t_trailindex) =
    [%#span13] true

  predicate inv'1 (_x : TrailIndex'0.t_trailindex)

  axiom inv'1 : forall x : TrailIndex'0.t_trailindex . inv'1 x = true

  predicate invariant'0 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span13] true

  predicate inv'0 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'0 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'0 x = true

  use set.Fset

  use set.Fset

  function remove'1 [@inline:trivial] (self : Fset.fset (TrailIndex'0.t_trailindex)) (a : TrailIndex'0.t_trailindex) : Fset.fset (TrailIndex'0.t_trailindex)

   =
    [%#span19] Fset.remove a self

  use seq.Seq

  use prelude.seq_ext.SeqExt

  use seq.Seq

  use seq.Seq

  use seq.Seq

  predicate contains'0 (self : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) =
    [%#span20] exists i : int . 0 <= i /\ i < Seq.length self /\ Seq.get self i = e

  function remove'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 814 0 814 39] (s : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom remove'0_def : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . remove'0 s e
  = ([%#span21] if s = (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) then
    Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)
  else
    if Seq.get s (Seq.length s - 1) = e then
      remove'0 (SeqExt.subsequence s 0 (Seq.length s - 1)) e
    else
      Seq.snoc (remove'0 (SeqExt.subsequence s 0 (Seq.length s - 1)) e) (Seq.get s (Seq.length s - 1))

  )

  axiom remove'0_spec : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . ([%#strail4] inv'0 s)
   -> ([%#strail5] inv'1 e)
   -> ([%#strail11] inv'0 (remove'0 s e))
  && ([%#strail10] Seq.length (remove'0 s e) <= Seq.length s)
  && ([%#strail9] contains'0 s e  -> Seq.length (remove'0 s e) < Seq.length s)
  && ([%#strail8] forall t : TrailIndex'0.t_trailindex . inv'1 t  -> contains'0 (remove'0 s e) t  -> t <> e)
  && ([%#strail7] forall t : TrailIndex'0.t_trailindex . inv'1 t  -> contains'0 (remove'0 s e) t  -> contains'0 s t)
  && ([%#strail6] forall t : TrailIndex'0.t_trailindex . inv'1 t
   -> contains'0 s t  -> e <> t  -> contains'0 (remove'0 s e) t)

  use Cdsat_Trail_Trail_Type as Trail'0

  use set.Fset

  use Cdsat_Theory_Value_Type as Value'0

  use Cdsat_Theory_Term_Type as Term'0

  function insert'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span22] Fset.add e self

  use set.Fset

  use set.Fset

  use set.Fset

  use set.Fset

  use set.Fset

  predicate contains'3 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span23] Fset.mem e self

  use prelude.prelude.Borrow

  use Cdsat_Term_Value_Type as Value'1

  use Cdsat_Term_Term_Type as Term'1

  use prelude.prelude.Real

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  function deep_model'4 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span24] match self with
      | Value'1.C_Bool b -> Value'0.C_Bool b
      | Value'1.C_Rat br -> Value'0.C_Rat (deep_model'4 br)
      end

  function shallow_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span25] deep_model'1 self

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  use Cdsat_Theory_Sort_Type as Sort'1

  use Cdsat_Term_Sort_Type as Sort'0

  use Cdsat_Theory_Var_Type as Var'0

  function deep_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'0.t_sort) : Sort'1.t_sort =
    [%#span26] match self with
      | Sort'0.C_Boolean -> Sort'1.C_Boolean
      | Sort'0.C_Rational -> Sort'1.C_Rational
      end

  function deep_model'2 (self : usize) : int =
    [%#span27] UIntSize.to_int self

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 193 4 193 44] (self : Term'1.t_term) : Term'0.t_term =
    [%#span28] match self with
      | Term'1.C_Variable v s -> Term'0.C_Variable (Var'0.C_Var (deep_model'2 v) (deep_model'3 s))
      | Term'1.C_Value v -> Term'0.C_Value (deep_model'1 v)
      | Term'1.C_Plus l r -> Term'0.C_Plus (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Eq l r -> Term'0.C_Eq (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Conj l r -> Term'0.C_Conj (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Disj l r -> Term'0.C_Disj (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Neg t -> Term'0.C_Neg (deep_model'0 t)
      | Term'1.C_Impl l r -> Term'0.C_Disj (Term'0.C_Neg (deep_model'0 l)) (deep_model'0 r)
      | Term'1.C_Times l r -> Term'0.C_Plus (Term'0.C_Value (Value'0.C_Rat (deep_model'4 l))) (deep_model'0 r)
      | Term'1.C_Lt l r -> Term'0.C_Eq (deep_model'0 l) (deep_model'0 r)
      end

  function shallow_model'2 [#"/Users/xavier/Code/cdsat/src/term.rs" 179 4 179 50] (self : Term'1.t_term) : Term'0.t_term
   =
    [%#span29] deep_model'0 self

  function term_value'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 725 4 725 61] (self : Assignment'0.t_assignment) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span30] (shallow_model'2 (Cdsat_Trail_Assignment_Type.assignment_term self), shallow_model'3 (Cdsat_Trail_Assignment_Type.assignment_val self))

  use seq.Seq

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  use seq.Seq

  use Cdsat_Trail_Trail_Type as Cdsat_Trail_Trail_Type

  function index_logic'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 645 4 645 77] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span31] term_value'0 (Seq.get (shallow_model'1 (Seq.get (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)))) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)))

  use set.Fset

  predicate contains'1 [@inline:trivial] (self : Fset.fset (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex)
   =
    [%#span23] Fset.mem e self

  function ix_to_abs'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 782 0 782 93] (t : Trail'0.t_trail) (s : Fset.fset (TrailIndex'0.t_trailindex)) : Fset.fset (Term'0.t_term, Value'0.t_value)


  axiom ix_to_abs'0_def : forall t : Trail'0.t_trail, s : Fset.fset (TrailIndex'0.t_trailindex) . ix_to_abs'0 t s
  = ([%#span35] if s = (Fset.empty  : Fset.fset (TrailIndex'0.t_trailindex)) then
    Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)
  else
    let a = Fset.pick s in insert'0 (ix_to_abs'0 t (remove'1 s a)) (index_logic'0 t a)
  )

  axiom ix_to_abs'0_spec : forall t : Trail'0.t_trail, s : Fset.fset (TrailIndex'0.t_trailindex) . ([%#span33] forall a : (Term'0.t_term, Value'0.t_value) . contains'3 (ix_to_abs'0 t s) a
   -> (exists ix : TrailIndex'0.t_trailindex . a = index_logic'0 t ix /\ contains'1 s ix))
  && ([%#span32] forall ix : TrailIndex'0.t_trailindex . contains'1 s ix
   -> contains'3 (ix_to_abs'0 t s) (index_logic'0 t ix))

  use set.Fset

  predicate contains'2 [#"/Users/xavier/Code/cdsat/src/trail.rs" 289 4 289 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex)

   =
    [%#span36] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)
    < Seq.length (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self))
    /\ UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)
    < Seq.length (shallow_model'1 (Seq.get (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))))

  function abstract_justification'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 318 4 321 44] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) : Fset.fset (Term'0.t_term, Value'0.t_value)


  axiom abstract_justification'0_def : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . abstract_justification'0 self just
  = ([%#span43] if Seq.length just > 0 then
    let set = abstract_justification'0 self (remove'0 just (Seq.get just 0)) in let a = index_logic'0 self (Seq.get just 0) in insert'0 set a
  else
    Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)
  )

  axiom abstract_justification'0_spec : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span37] forall i : int . 0
  <= i
  /\ i < Seq.length just  -> contains'2 self (Seq.get just i))
   -> ([%#span41] forall i : int . 0 <= i /\ i < Seq.length just
   -> contains'3 (abstract_justification'0 self just) (index_logic'0 self (Seq.get just i)))
  && ([%#span40] forall a : (Term'0.t_term, Value'0.t_value) . contains'3 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'0 just ix /\ a = index_logic'0 self ix))
  && ([%#span39] forall a : (Term'0.t_term, Value'0.t_value) . contains'3 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'2 self ix /\ a = index_logic'0 self ix))
  && ([%#span38] Fset.cardinal (abstract_justification'0 self just) <= Seq.length just)

  constant trail  : Trail'0.t_trail

  constant s  : Seq.seq (TrailIndex'0.t_trailindex)

  constant t  : Fset.fset (TrailIndex'0.t_trailindex)

  function seq_to_set [#"/Users/xavier/Code/cdsat/src/trail.rs" 798 0 798 79] (trail : Trail'0.t_trail) (s : Seq.seq (TrailIndex'0.t_trailindex)) (t : Fset.fset (TrailIndex'0.t_trailindex)) : ()


  goal vc_seq_to_set : ([%#strail1] forall i : TrailIndex'0.t_trailindex . contains'1 t i  -> contains'0 s i)
   -> ([%#strail0] forall i : TrailIndex'0.t_trailindex . contains'0 s i  -> contains'1 t i)
   -> (if s = (Seq.empty : Seq.seq (TrailIndex'0.t_trailindex)) then
    [%#strail2] abstract_justification'0 trail s = ix_to_abs'0 trail t
  else
    let a = Seq.get s 0 in (([%#strail5] inv'1 a) && ([%#strail4] inv'0 s))
    /\ (([%#strail11] inv'0 (remove'0 s a))
    && ([%#strail10] Seq.length (remove'0 s a) <= Seq.length s)
    && ([%#strail9] contains'0 s a  -> Seq.length (remove'0 s a) < Seq.length s)
    && ([%#strail8] forall t : TrailIndex'0.t_trailindex . inv'1 t  -> contains'0 (remove'0 s a) t  -> t <> a)
    && ([%#strail7] forall t : TrailIndex'0.t_trailindex . inv'1 t  -> contains'0 (remove'0 s a) t  -> contains'0 s t)
    && ([%#strail6] forall t : TrailIndex'0.t_trailindex . inv'1 t
     -> contains'0 s t  -> a <> t  -> contains'0 (remove'0 s a) t)
     -> ((([%#strail1] forall i : TrailIndex'0.t_trailindex . contains'1 (remove'1 t a) i
     -> contains'0 (remove'0 s a) i)
    && ([%#strail0] forall i : TrailIndex'0.t_trailindex . contains'0 (remove'0 s a) i  -> contains'1 (remove'1 t a) i))
    /\ 0 <= ([%#strail3] Seq.length s) /\ ([%#strail3] Seq.length (remove'0 s a)) < ([%#strail3] Seq.length s))
    /\ (([%#strail2] abstract_justification'0 trail (remove'0 s a) = ix_to_abs'0 trail (remove'1 t a))
     -> ([%#strail2] abstract_justification'0 trail s = ix_to_abs'0 trail t)))
  )
end
module Cdsat_Trail_IxToAbsRemove_Impl
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 876 11 876 24

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 877 11 877 24

  let%span strail2 = "/Users/xavier/Code/cdsat/src/trail.rs" 878 0 878 58

  let%span strail3 = "/Users/xavier/Code/cdsat/src/trail.rs" 879 10 879 79

  let%span strail4 = "/Users/xavier/Code/cdsat/src/trail.rs" 875 10 875 17

  let%span strail5 = "/Users/xavier/Code/cdsat/src/trail.rs" 780 0 780 79

  let%span strail6 = "/Users/xavier/Code/cdsat/src/trail.rs" 781 0 781 102

  let%span strail7 = "/Users/xavier/Code/cdsat/src/trail.rs" 779 10 779 17

  let%span sfset8 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 105 18 105 22

  let%span sfset9 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 105 24 105 29

  let%span sfset10 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 104 4 104 40

  let%span span11 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span12 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span13 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  let%span span14 = "/Users/xavier/Code/cdsat/src/trail.rs" 146 14 146 59

  let%span span15 = "/Users/xavier/Code/cdsat/src/trail.rs" 144 4 144 10

  let%span span16 = "/Users/xavier/Code/cdsat/src/trail.rs" 140 15 140 48

  let%span span17 = "/Users/xavier/Code/cdsat/src/trail.rs" 141 14 141 44

  let%span span18 = "/Users/xavier/Code/cdsat/src/trail.rs" 138 4 138 10

  let%span span19 = "/Users/xavier/Code/cdsat/src/trail.rs" 134 15 134 45

  let%span span20 = "/Users/xavier/Code/cdsat/src/trail.rs" 135 14 135 47

  let%span span21 = "/Users/xavier/Code/cdsat/src/trail.rs" 132 4 132 10

  let%span span22 = "/Users/xavier/Code/cdsat/src/trail.rs" 127 15 127 32

  let%span span23 = "/Users/xavier/Code/cdsat/src/trail.rs" 128 15 128 32

  let%span span24 = "/Users/xavier/Code/cdsat/src/trail.rs" 129 14 129 31

  let%span span25 = "/Users/xavier/Code/cdsat/src/trail.rs" 125 4 125 10

  let%span span26 = "/Users/xavier/Code/cdsat/src/trail.rs" 122 14 122 45

  let%span span27 = "/Users/xavier/Code/cdsat/src/trail.rs" 120 4 120 10

  let%span span28 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 41 20 41 56

  let%span span29 = "/Users/xavier/Code/cdsat/src/trail.rs" 117 14 117 64

  let%span span30 = "/Users/xavier/Code/cdsat/src/trail.rs" 115 4 115 10

  let%span span31 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 31 20 31 53

  let%span span32 = "/Users/xavier/Code/cdsat/src/trail.rs" 112 14 112 61

  let%span span33 = "/Users/xavier/Code/cdsat/src/trail.rs" 110 4 110 10

  let%span span34 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 21 20 21 53

  let%span span35 = "/Users/xavier/Code/cdsat/src/trail.rs" 107 14 107 61

  let%span span36 = "/Users/xavier/Code/cdsat/src/trail.rs" 105 4 105 10

  let%span span37 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 11 20 11 56

  let%span span38 = "/Users/xavier/Code/cdsat/src/trail.rs" 102 14 102 64

  let%span span39 = "/Users/xavier/Code/cdsat/src/trail.rs" 100 4 100 10

  let%span span40 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span41 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span42 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span43 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span44 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span45 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 14 70 15

  let%span span46 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 23 70 24

  let%span span47 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 69 14 69 59

  let%span span48 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 64 15 64 48

  let%span span49 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 16 66 17

  let%span span50 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 25 66 26

  let%span span51 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 65 14 65 44

  let%span span52 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 59 15 59 45

  let%span span53 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 16 61 17

  let%span span54 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 25 61 26

  let%span span55 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 60 14 60 47

  let%span span56 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 53 15 53 32

  let%span span57 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 54 15 54 32

  let%span span58 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 13 56 14

  let%span span59 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 22 56 23

  let%span span60 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 31 56 32

  let%span span61 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 55 14 55 31

  let%span span62 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 50 12 50 13

  let%span span63 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 49 14 49 45

  let%span span64 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 18 46 19

  let%span span65 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 27 46 28

  let%span span66 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 45 14 45 64

  let%span span67 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 18 36 19

  let%span span68 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 27 36 28

  let%span span69 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 35 14 35 61

  let%span span70 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 18 26 19

  let%span span71 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 27 26 28

  let%span span72 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 25 14 25 61

  let%span span73 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 18 16 19

  let%span span74 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 27 16 28

  let%span span75 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 15 14 15 64

  let%span span76 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span77 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span78 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span79 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 109 8 111 9

  let%span span80 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span81 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span82 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span83 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span84 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span85 = "/Users/xavier/Code/cdsat/src/term.rs" 195 8 225 9

  let%span span86 = "/Users/xavier/Code/cdsat/src/term.rs" 180 8 180 25

  let%span span87 = "/Users/xavier/Code/cdsat/src/trail.rs" 726 8 726 61

  let%span span88 = "/Users/xavier/Code/cdsat/src/trail.rs" 646 8 648 9

  let%span span89 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span90 = "/Users/xavier/Code/cdsat/src/trail.rs" 777 0 777 8

  let%span span91 = "/Users/xavier/Code/cdsat/src/trail.rs" 291 12 291 92

  let%span span92 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span93 = "/Users/xavier/Code/cdsat/src/theory.rs" 31 8 54 9

  let%span span94 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 129 8 129 78

  let%span span95 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 13 814 14

  let%span span96 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 24 814 25

  let%span span97 = "/Users/xavier/Code/cdsat/src/trail.rs" 809 0 809 73

  let%span span98 = "/Users/xavier/Code/cdsat/src/trail.rs" 810 0 810 63

  let%span span99 = "/Users/xavier/Code/cdsat/src/trail.rs" 811 0 811 55

  let%span span100 = "/Users/xavier/Code/cdsat/src/trail.rs" 812 0 812 52

  let%span span101 = "/Users/xavier/Code/cdsat/src/trail.rs" 813 10 813 33

  let%span span102 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 33 814 39

  let%span span103 = "/Users/xavier/Code/cdsat/src/trail.rs" 808 10 808 17

  let%span span104 = "/Users/xavier/Code/cdsat/src/trail.rs" 807 0 807 8

  let%span span105 = "/Users/xavier/Code/cdsat/src/trail.rs" 313 4 313 82

  let%span span106 = "/Users/xavier/Code/cdsat/src/trail.rs" 314 14 314 40

  let%span span107 = "/Users/xavier/Code/cdsat/src/trail.rs" 315 4 315 115

  let%span span108 = "/Users/xavier/Code/cdsat/src/trail.rs" 316 4 316 115

  let%span span109 = "/Users/xavier/Code/cdsat/src/trail.rs" 317 4 317 101

  let%span span110 = "/Users/xavier/Code/cdsat/src/trail.rs" 312 14 312 24

  let%span span111 = "/Users/xavier/Code/cdsat/src/trail.rs" 310 4 310 12

  let%span span112 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span113 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span114 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span115 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span116 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span117 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span118 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span119 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span120 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span121 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span122 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span123 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span124 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span125 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span126 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span127 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span128 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span129 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span130 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span131 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span132 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span133 = "/Users/xavier/Code/cdsat/src/theory.rs" 616 15 616 27

  let%span span134 = "/Users/xavier/Code/cdsat/src/theory.rs" 617 15 617 32

  let%span span135 = "/Users/xavier/Code/cdsat/src/theory.rs" 618 4 618 90

  let%span span136 = "/Users/xavier/Code/cdsat/src/theory.rs" 512 8 515 9

  let%span span137 = "/Users/xavier/Code/cdsat/src/theory.rs" 522 8 525 9

  let%span span138 = "/Users/xavier/Code/cdsat/src/theory.rs" 206 8 206 84

  let%span span139 = "/Users/xavier/Code/cdsat/src/theory.rs" 502 8 505 9

  let%span span140 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span141 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span142 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span143 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span144 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span145 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span146 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span147 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span148 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span149 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span150 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span151 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span152 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span153 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span154 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span155 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span156 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span157 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span158 = "/Users/xavier/Code/cdsat/src/theory.rs" 484 15 484 31

  let%span span159 = "/Users/xavier/Code/cdsat/src/theory.rs" 485 15 485 35

  let%span span160 = "/Users/xavier/Code/cdsat/src/theory.rs" 486 15 486 27

  let%span span161 = "/Users/xavier/Code/cdsat/src/theory.rs" 487 4 487 54

  let%span span162 = "/Users/xavier/Code/cdsat/src/theory.rs" 488 4 488 58

  let%span span163 = "/Users/xavier/Code/cdsat/src/theory.rs" 489 4 489 61

  let%span span164 = "/Users/xavier/Code/cdsat/src/trail.rs" 268 8 272 9

  let%span span165 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 31 8 31 32

  let%span span166 = "/Users/xavier/Code/cdsat/src/trail.rs" 547 4 547 12

  let%span span167 = "/Users/xavier/Code/cdsat/src/trail.rs" 254 8 263 9

  let%span span168 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 20 8 20 31

  let%span span169 = "/Users/xavier/Code/cdsat/src/trail.rs" 179 4 179 12

  let%span span170 = "/Users/xavier/Code/cdsat/src/trail.rs" 279 12 283 13

  let%span span171 = "/Users/xavier/Code/cdsat/src/trail.rs" 238 8 248 9

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function eq_cmp'2 (_1 : usize) (_2 : usize) : ()

  function antisym2'2 (_1 : usize) (_2 : usize) : ()

  function antisym1'2 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'2 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'2 (_1 : usize) : ()

  function cmp_gt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'2 (_1 : usize) (_2 : usize) : ()

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  predicate invariant'12 (self : TrailIndex'0.t_trailindex) =
    [%#span11] true

  predicate inv'9 (_x : TrailIndex'0.t_trailindex)

  axiom inv'9 : forall x : TrailIndex'0.t_trailindex . inv'9 x = true

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span12] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span13] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  function eq_cmp'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 147 4 147 31] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span15] ()

  axiom eq_cmp'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span14] (x = y)
  = (cmp_log'0 x y = Ordering'0.C_Equal)

  function antisym2'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 142 4 142 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span18] ()

  axiom antisym2'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span16] cmp_log'0 x y
  = Ordering'0.C_Greater)  -> ([%#span17] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 136 4 136 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span21] ()

  axiom antisym1'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span19] cmp_log'0 x y
  = Ordering'0.C_Less)  -> ([%#span20] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 130 4 130 52] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()

   =
    [%#span25] ()

  axiom trans'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span22] cmp_log'0 x y
  = o)  -> ([%#span23] cmp_log'0 y z = o)  -> ([%#span24] cmp_log'0 x z = o)

  function refl'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 123 4 123 20] (x : TrailIndex'0.t_trailindex) : () =
    [%#span27] ()

  axiom refl'1_spec : forall x : TrailIndex'0.t_trailindex . [%#span26] cmp_log'0 x x = Ordering'0.C_Equal

  function gt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span28] cmp_log'0 self o = Ordering'0.C_Greater

  function cmp_gt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 118 4 118 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span30] ()

  axiom cmp_gt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span29] gt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Greater)

  function ge_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span31] cmp_log'0 self o <> Ordering'0.C_Less

  function cmp_ge_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 113 4 113 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span33] ()

  axiom cmp_ge_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span32] ge_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Less)

  function lt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span34] cmp_log'0 self o = Ordering'0.C_Less

  function cmp_lt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 108 4 108 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span36] ()

  axiom cmp_lt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span35] lt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Less)

  function le_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span37] cmp_log'0 self o <> Ordering'0.C_Greater

  function cmp_le_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 103 4 103 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span39] ()

  axiom cmp_le_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span38] le_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Greater)

  use seq.Seq

  predicate invariant'11 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span11] true

  predicate inv'8 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'8 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'8 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  constant max'0 : usize = [%#span40] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'7 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function shallow_model'4 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom shallow_model'4_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span41] inv'7 self)
   -> ([%#span43] inv'8 (shallow_model'4 self))
  && ([%#span42] Seq.length (shallow_model'4 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'10 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span44] inv'8 (shallow_model'4 self)

  axiom inv'7 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'7 x = true

  function eq_cmp'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom eq_cmp'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span45] inv'9 x)
   -> ([%#span46] inv'9 y)  -> ([%#span47] (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal))

  function antisym2'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym2'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span48] cmp_log'0 x y
  = Ordering'0.C_Greater)
   -> ([%#span49] inv'9 x)  -> ([%#span50] inv'9 y)  -> ([%#span51] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym1'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span52] cmp_log'0 x y
  = Ordering'0.C_Less)
   -> ([%#span53] inv'9 x)  -> ([%#span54] inv'9 y)  -> ([%#span55] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span56] cmp_log'0 x y
  = o)
   -> ([%#span57] cmp_log'0 y z = o)
   -> ([%#span58] inv'9 x)  -> ([%#span59] inv'9 y)  -> ([%#span60] inv'9 z)  -> ([%#span61] cmp_log'0 x z = o)

  function refl'0 (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'0_spec : forall x : TrailIndex'0.t_trailindex . ([%#span62] inv'9 x)
   -> ([%#span63] cmp_log'0 x x = Ordering'0.C_Equal)

  function cmp_gt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_gt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span64] inv'9 x)
   -> ([%#span65] inv'9 y)  -> ([%#span66] gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater))

  function cmp_ge_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_ge_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span67] inv'9 x)
   -> ([%#span68] inv'9 y)  -> ([%#span69] ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less))

  function cmp_lt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_lt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span70] inv'9 x)
   -> ([%#span71] inv'9 y)  -> ([%#span72] lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less))

  function cmp_le_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_le_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span73] inv'9 x)
   -> ([%#span74] inv'9 y)  -> ([%#span75] le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater))

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span76] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'9 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span77] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'6 (_x : Model'0.t_model)

  axiom inv'6 : forall x : Model'0.t_model . inv'6 x
  = (invariant'9 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use Cdsat_Trail_Assignment_Type as Assignment'0

  predicate invariant'8 (self : Seq.seq (Assignment'0.t_assignment)) =
    [%#span11] true

  predicate inv'5 (_x : Seq.seq (Assignment'0.t_assignment))

  axiom inv'5 : forall x : Seq.seq (Assignment'0.t_assignment) . inv'5 x = true

  use seq.Seq

  predicate inv'4 (_x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

  function shallow_model'1 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) : Seq.seq (Assignment'0.t_assignment)


  axiom shallow_model'1_spec : forall self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . ([%#span41] inv'4 self)
   -> ([%#span43] inv'5 (shallow_model'1 self))
  && ([%#span42] Seq.length (shallow_model'1 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'7 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span44] inv'5 (shallow_model'1 self)

  axiom inv'4 : forall x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . inv'4 x = true

  predicate invariant'6 (self : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span11] true

  predicate inv'3 (_x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'3 : forall x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'3 x = true

  use seq.Seq

  predicate inv'2 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  function shallow_model'0 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))


  axiom shallow_model'0_spec : forall self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . ([%#span41] inv'2 self)
   -> ([%#span43] inv'3 (shallow_model'0 self))
  && ([%#span42] Seq.length (shallow_model'0 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'5 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span44] inv'3 (shallow_model'0 self)

  axiom inv'2 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'2 x
  = true

  use Cdsat_Theory_Term_Type as Term'0

  predicate invariant'4 (self : (Term'0.t_term, Value'0.t_value)) =
    [%#span11] true

  predicate inv'1 (_x : (Term'0.t_term, Value'0.t_value))

  axiom inv'1 : forall x : (Term'0.t_term, Value'0.t_value) . inv'1 x = true

  use set.Fset

  predicate invariant'2 (self : Fset.fset (Term'0.t_term, Value'0.t_value)) =
    [%#span11] true

  predicate inv'0 (_x : Fset.fset (Term'0.t_term, Value'0.t_value))

  axiom inv'0 : forall x : Fset.fset (Term'0.t_term, Value'0.t_value) . inv'0 x = true

  use set.Fset

  predicate contains'2 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span78] Fset.mem e self

  predicate ext_eq'0 (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (other : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span79] forall e : (Term'0.t_term, Value'0.t_value) . inv'1 e  -> contains'2 self e = contains'2 other e

  axiom ext_eq'0_spec : forall self : Fset.fset (Term'0.t_term, Value'0.t_value), other : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#sfset8] inv'0 self)
   -> ([%#sfset9] inv'0 other)  -> ([%#sfset10] ext_eq'0 self other  -> self = other)

  use Cdsat_Trail_Trail_Type as Trail'0

  use set.Fset

  use set.Fset

  function remove'1 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span80] Fset.remove a self

  use prelude.prelude.Borrow

  use Cdsat_Term_Value_Type as Value'1

  use Cdsat_Term_Term_Type as Term'1

  use prelude.prelude.Real

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  function deep_model'4 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span81] match self with
      | Value'1.C_Bool b -> Value'0.C_Bool b
      | Value'1.C_Rat br -> Value'0.C_Rat (deep_model'4 br)
      end

  function shallow_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span82] deep_model'1 self

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  use Cdsat_Term_Sort_Type as Sort'1

  function deep_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'1.t_sort) : Sort'0.t_sort =
    [%#span83] match self with
      | Sort'1.C_Boolean -> Sort'0.C_Boolean
      | Sort'1.C_Rational -> Sort'0.C_Rational
      end

  function deep_model'2 (self : usize) : int =
    [%#span84] UIntSize.to_int self

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 193 4 193 44] (self : Term'1.t_term) : Term'0.t_term =
    [%#span85] match self with
      | Term'1.C_Variable v s -> Term'0.C_Variable (Var'0.C_Var (deep_model'2 v) (deep_model'3 s))
      | Term'1.C_Value v -> Term'0.C_Value (deep_model'1 v)
      | Term'1.C_Plus l r -> Term'0.C_Plus (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Eq l r -> Term'0.C_Eq (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Conj l r -> Term'0.C_Conj (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Disj l r -> Term'0.C_Disj (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Neg t -> Term'0.C_Neg (deep_model'0 t)
      | Term'1.C_Impl l r -> Term'0.C_Disj (Term'0.C_Neg (deep_model'0 l)) (deep_model'0 r)
      | Term'1.C_Times l r -> Term'0.C_Plus (Term'0.C_Value (Value'0.C_Rat (deep_model'4 l))) (deep_model'0 r)
      | Term'1.C_Lt l r -> Term'0.C_Eq (deep_model'0 l) (deep_model'0 r)
      end

  function shallow_model'2 [#"/Users/xavier/Code/cdsat/src/term.rs" 179 4 179 50] (self : Term'1.t_term) : Term'0.t_term
   =
    [%#span86] deep_model'0 self

  function term_value'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 725 4 725 61] (self : Assignment'0.t_assignment) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span87] (shallow_model'2 (Cdsat_Trail_Assignment_Type.assignment_term self), shallow_model'3 (Cdsat_Trail_Assignment_Type.assignment_val self))

  use seq.Seq

  use seq.Seq

  use Cdsat_Trail_Trail_Type as Cdsat_Trail_Trail_Type

  function index_logic'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 645 4 645 77] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span88] term_value'0 (Seq.get (shallow_model'1 (Seq.get (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)))) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)))

  use set.Fset

  function insert'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span89] Fset.add e self

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (TrailIndex'0.t_trailindex)) (a : TrailIndex'0.t_trailindex) : Fset.fset (TrailIndex'0.t_trailindex)

   =
    [%#span80] Fset.remove a self

  use set.Fset

  use set.Fset

  use set.Fset

  use set.Fset

  predicate contains'1 [@inline:trivial] (self : Fset.fset (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex)
   =
    [%#span78] Fset.mem e self

  function ix_to_abs'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 782 0 782 93] (t : Trail'0.t_trail) (s : Fset.fset (TrailIndex'0.t_trailindex)) : Fset.fset (Term'0.t_term, Value'0.t_value)


  axiom ix_to_abs'0_def : forall t : Trail'0.t_trail, s : Fset.fset (TrailIndex'0.t_trailindex) . ix_to_abs'0 t s
  = ([%#span90] if s = (Fset.empty  : Fset.fset (TrailIndex'0.t_trailindex)) then
    Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)
  else
    let a = Fset.pick s in insert'0 (ix_to_abs'0 t (remove'0 s a)) (index_logic'0 t a)
  )

  axiom ix_to_abs'0_spec : forall t : Trail'0.t_trail, s : Fset.fset (TrailIndex'0.t_trailindex) . ([%#strail6] forall a : (Term'0.t_term, Value'0.t_value) . contains'2 (ix_to_abs'0 t s) a
   -> (exists ix : TrailIndex'0.t_trailindex . a = index_logic'0 t ix /\ contains'1 s ix))
  && ([%#strail5] forall ix : TrailIndex'0.t_trailindex . contains'1 s ix
   -> contains'2 (ix_to_abs'0 t s) (index_logic'0 t ix))

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 289 4 289 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex)

   =
    [%#span91] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)
    < Seq.length (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self))
    /\ UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)
    < Seq.length (shallow_model'1 (Seq.get (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))))

  use Cdsat_Theory_Trail_Type as Trail'1

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span92] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  function well_sorted'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 30 4 30 36] (self : Term'0.t_term) : bool =
    [%#span93] match self with
      | Term'0.C_Variable v -> true
      | Term'0.C_Value v -> true
      | Term'0.C_Plus l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Rational
      | Term'0.C_Eq l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r
      | Term'0.C_Conj l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Boolean
      | Term'0.C_Disj l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Boolean
      | Term'0.C_Neg t -> well_sorted'0 t /\ sort'0 t = Sort'0.C_Boolean
      end

  use seq.Seq

  use prelude.seq_ext.SeqExt

  use seq.Seq

  use seq.Seq

  predicate contains'4 (self : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) =
    [%#span94] exists i : int . 0 <= i /\ i < Seq.length self /\ Seq.get self i = e

  function remove'2 [#"/Users/xavier/Code/cdsat/src/trail.rs" 814 0 814 39] (s : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom remove'2_def : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . remove'2 s e
  = ([%#span104] if s = (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) then
    Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)
  else
    if Seq.get s (Seq.length s - 1) = e then
      remove'2 (SeqExt.subsequence s 0 (Seq.length s - 1)) e
    else
      Seq.snoc (remove'2 (SeqExt.subsequence s 0 (Seq.length s - 1)) e) (Seq.get s (Seq.length s - 1))

  )

  axiom remove'2_spec : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . ([%#span95] inv'8 s)
   -> ([%#span96] inv'9 e)
   -> ([%#span102] inv'8 (remove'2 s e))
  && ([%#span101] Seq.length (remove'2 s e) <= Seq.length s)
  && ([%#span100] contains'4 s e  -> Seq.length (remove'2 s e) < Seq.length s)
  && ([%#span99] forall t : TrailIndex'0.t_trailindex . inv'9 t  -> contains'4 (remove'2 s e) t  -> t <> e)
  && ([%#span98] forall t : TrailIndex'0.t_trailindex . inv'9 t  -> contains'4 (remove'2 s e) t  -> contains'4 s t)
  && ([%#span97] forall t : TrailIndex'0.t_trailindex . inv'9 t
   -> contains'4 s t  -> e <> t  -> contains'4 (remove'2 s e) t)

  use set.Fset

  function abstract_justification'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 318 4 321 44] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) : Fset.fset (Term'0.t_term, Value'0.t_value)


  axiom abstract_justification'0_def : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . abstract_justification'0 self just
  = ([%#span111] if Seq.length just > 0 then
    let set = abstract_justification'0 self (remove'2 just (Seq.get just 0)) in let a = index_logic'0 self (Seq.get just 0) in insert'0 set a
  else
    Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)
  )

  axiom abstract_justification'0_spec : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span105] forall i : int . 0
  <= i
  /\ i < Seq.length just  -> contains'0 self (Seq.get just i))
   -> ([%#span109] forall i : int . 0 <= i /\ i < Seq.length just
   -> contains'2 (abstract_justification'0 self just) (index_logic'0 self (Seq.get just i)))
  && ([%#span108] forall a : (Term'0.t_term, Value'0.t_value) . contains'2 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'4 just ix /\ a = index_logic'0 self ix))
  && ([%#span107] forall a : (Term'0.t_term, Value'0.t_value) . contains'2 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'0 self ix /\ a = index_logic'0 self ix))
  && ([%#span106] Fset.cardinal (abstract_justification'0 self just) <= Seq.length just)

  use prelude.prelude.Int

  use Cdsat_Theory_Assign_Type as Assign'0

  predicate invariant'3 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span112] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'1.t_trail) =
    [%#span113] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'3 a
      end

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'1.t_trail) : int

  axiom len'0_spec : forall self : Trail'1.t_trail . [%#span114] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'1.t_trail) : int =
    [%#span117] match self with
      | Trail'1.C_Empty -> 0
      | Trail'1.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'1.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'1.t_trail . ([%#span116] level'0 self <= len'0 self)
  && ([%#span115] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'1.t_trail) =
    [%#span118] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span119] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span123] match self with
      | Trail'1.C_Empty -> Option'0.C_None
      | Trail'1.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span122] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span121] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span120] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  function from_int'0 (_1 : int) : Real.real

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span126] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span124] inv'6 self)
   -> ([%#span125] invariant'9 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span127] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span128] forall a : (Term'0.t_term, Value'0.t_value) . contains'2 v a  -> satisfies'0 self a

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span129] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'6 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate contains'3 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span131] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'3_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span130] invariant_assign'0 self
   -> contains'3 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'1.t_trail)
   =
    [%#span132] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a _ tl -> sound'0 tl /\ justified_sound'0 a
      end

  function find_justified'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 619 4 619 46] (self : Trail'1.t_trail) (kv : (Term'0.t_term, Value'0.t_value)) : ()


  axiom find_justified'0_spec : forall self : Trail'1.t_trail, kv : (Term'0.t_term, Value'0.t_value) . ([%#span133] sound'0 self)
   -> ([%#span134] contains'3 self kv)
   -> ([%#span135] forall l : int . forall a : Assign'0.t_assign . find'0 self kv = Option'0.C_Some (a, l)
   -> justified_sound'0 a)

  predicate is_decision'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 511 4 511 54] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span136] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Decision _ _, _) -> true
      | _ -> false
      end

  predicate is_input'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 521 4 521 51] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span137] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Input _ _, _) -> true
      | _ -> false
      end

  predicate entails'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 205 4 205 74] (self : Model'0.t_model) (j : Fset.fset (Term'0.t_term, Value'0.t_value)) (c : (Term'0.t_term, Value'0.t_value))

   =
    [%#span138] invariant'9 self  -> satisfy_set'0 self j  -> satisfies'0 self c

  predicate is_justified'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 501 4 501 55] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span139] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified _ _ _, _) -> true
      | _ -> false
      end

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span140] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span143] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span141] is_bool'0 self)
   -> ([%#span142] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'1.t_trail) =
    [%#span144] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> let ap = to_pair'0 a in not contains'3 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'3 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'1.t_trail) =
    [%#span145] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'2 j a  -> contains'3 tl a
        | _ -> true
        end
      end

  use set.Fset

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span148] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span146] invariant_nonneg'0 self)
   -> ([%#span147] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'1.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_spec : forall self : Trail'1.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#span149] invariant_nonneg'0 self)
   -> ([%#span154] set_level'0 self s <= level'0 self)
  && ([%#span153] set_level'0 self s >= 0)
  && ([%#span152] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#span151] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'2 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span150] forall i : (Term'0.t_term, Value'0.t_value) . contains'2 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'1.t_trail) =
    [%#span156] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'1.t_trail) =
    [%#span157] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function justification'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 490 4 490 71] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)


  axiom justification'0_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span158] invariant'1 self)
   -> ([%#span159] is_justified'0 self d)
   -> ([%#span160] sound'0 self)
   -> ([%#span163] is_decision'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#span162] is_input'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#span161] forall m : Model'0.t_model . inv'6 m  -> entails'0 m (justification'0 self d) d)

  use prelude.prelude.Snapshot

  predicate justified_correct'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 267 4 267 78] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) (j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

   =
    [%#span164] (forall i : TrailIndex'0.t_trailindex . contains'4 (shallow_model'4 j) i
     -> lt_log'0 i ix /\ contains'0 self i)
    /\ is_justified'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ justification'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    = abstract_justification'0 self (shallow_model'4 j)

  use Cdsat_Trail_Reason_Type as Reason'0

  function index_logic'3 [@inline:trivial] (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (ix : usize) : Assignment'0.t_assignment

   =
    [%#span165] Seq.get (shallow_model'1 self) (UIntSize.to_int ix)

  function index_logic'2 [@inline:trivial] (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (ix : usize) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span165] Seq.get (shallow_model'0 self) (UIntSize.to_int ix)

  function reason'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 549 4 549 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : Reason'0.t_reason

   =
    [%#span166] Cdsat_Trail_Assignment_Type.assignment_reason (index_logic'3 (index_logic'2 (Cdsat_Trail_Trail_Type.trail_assignments self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)) (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix))

  predicate justified_is_justified'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 253 4 253 47] (self : Trail'0.t_trail) =
    [%#span167] forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> (let reason = reason'0 self ix in (reason = Reason'0.C_Decision)
    = is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ (reason = Reason'0.C_Input)
    = is_input'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ (forall j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . reason = Reason'0.C_Justified j
     -> justified_correct'0 self ix j))

  function index_logic'1 [@inline:trivial] (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (ix : int) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span168] Seq.get (shallow_model'0 self) ix

  function level_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 180 4 180 33] (self : TrailIndex'0.t_trailindex) : int
   =
    [%#span169] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 self)

  predicate abstract_relation'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 277 4 277 42] (self : Trail'0.t_trail) =
    [%#span170] (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> contains'3 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix))
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    = UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))
    /\ (forall a : (Term'0.t_term, Value'0.t_value) . contains'3 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
     -> (exists ix : TrailIndex'0.t_trailindex . contains'0 self ix
    /\ level_log'0 ix = level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
    /\ index_logic'0 self ix = a))

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 237 4 237 34] (self : Trail'0.t_trail) =
    [%#span171] abstract_relation'0 self
    /\ sound'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    /\ invariant'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    /\ level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    = UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self)
    /\ UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self)
    = Seq.length (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) - 1
    /\ (forall i : int . 0 <= i /\ i < Seq.length (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self))
     -> Seq.length (shallow_model'1 (index_logic'1 (Cdsat_Trail_Trail_Type.trail_assignments self) i)) > 0)
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix) = 0)
    = is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix))
    /\ (forall j : TrailIndex'0.t_trailindex . forall i : TrailIndex'0.t_trailindex . contains'0 self i
     -> contains'0 self j  -> i <> j  -> index_logic'0 self i <> index_logic'0 self j)
    /\ justified_is_justified'0 self
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> well_sorted'0 (let (a, _) = index_logic'0 self ix in a))

  constant t  : Trail'0.t_trail

  constant x  : TrailIndex'0.t_trailindex

  constant s  : Fset.fset (TrailIndex'0.t_trailindex)

  function ix_to_abs_remove [#"/Users/xavier/Code/cdsat/src/trail.rs" 880 0 880 76] (t : Trail'0.t_trail) (x : TrailIndex'0.t_trailindex) (s : Fset.fset (TrailIndex'0.t_trailindex)) : ()


  goal vc_ix_to_abs_remove : ([%#strail2] forall i : TrailIndex'0.t_trailindex . contains'1 s i  -> contains'0 t i)
   -> ([%#strail1] contains'0 t x)
   -> ([%#strail0] invariant'0 t)
   -> ([%#strail6] forall a : (Term'0.t_term, Value'0.t_value) . contains'2 (ix_to_abs'0 t (remove'0 s x)) a
   -> (exists ix : TrailIndex'0.t_trailindex . a = index_logic'0 t ix /\ contains'1 (remove'0 s x) ix))
  && ([%#strail5] forall ix : TrailIndex'0.t_trailindex . contains'1 (remove'0 s x) ix
   -> contains'2 (ix_to_abs'0 t (remove'0 s x)) (index_logic'0 t ix))
   -> ([%#strail6] forall a : (Term'0.t_term, Value'0.t_value) . contains'2 (ix_to_abs'0 t s) a
   -> (exists ix : TrailIndex'0.t_trailindex . a = index_logic'0 t ix /\ contains'1 s ix))
  && ([%#strail5] forall ix : TrailIndex'0.t_trailindex . contains'1 s ix
   -> contains'2 (ix_to_abs'0 t s) (index_logic'0 t ix))
   -> (([%#sfset9] inv'0 (remove'1 (ix_to_abs'0 t s) (index_logic'0 t x)))
  && ([%#sfset8] inv'0 (ix_to_abs'0 t (remove'0 s x))))
  /\ (([%#sfset10] ext_eq'0 (ix_to_abs'0 t (remove'0 s x)) (remove'1 (ix_to_abs'0 t s) (index_logic'0 t x))
   -> ix_to_abs'0 t (remove'0 s x) = remove'1 (ix_to_abs'0 t s) (index_logic'0 t x))
   -> ext_eq'0 (ix_to_abs'0 t (remove'0 s x)) (remove'1 (ix_to_abs'0 t s) (index_logic'0 t x))
  && (let _ = () in [%#strail3] ix_to_abs'0 t (remove'0 s x) = remove'1 (ix_to_abs'0 t s) (index_logic'0 t x)))
end
module Cdsat_Trail_IxToAbsInsert_Impl
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 889 11 889 24

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 890 11 890 24

  let%span strail2 = "/Users/xavier/Code/cdsat/src/trail.rs" 891 0 891 58

  let%span strail3 = "/Users/xavier/Code/cdsat/src/trail.rs" 892 10 892 79

  let%span strail4 = "/Users/xavier/Code/cdsat/src/trail.rs" 888 10 888 17

  let%span strail5 = "/Users/xavier/Code/cdsat/src/trail.rs" 780 0 780 79

  let%span strail6 = "/Users/xavier/Code/cdsat/src/trail.rs" 781 0 781 102

  let%span strail7 = "/Users/xavier/Code/cdsat/src/trail.rs" 779 10 779 17

  let%span sfset8 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 105 18 105 22

  let%span sfset9 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 105 24 105 29

  let%span sfset10 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 104 4 104 40

  let%span span11 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span12 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span13 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  let%span span14 = "/Users/xavier/Code/cdsat/src/trail.rs" 146 14 146 59

  let%span span15 = "/Users/xavier/Code/cdsat/src/trail.rs" 144 4 144 10

  let%span span16 = "/Users/xavier/Code/cdsat/src/trail.rs" 140 15 140 48

  let%span span17 = "/Users/xavier/Code/cdsat/src/trail.rs" 141 14 141 44

  let%span span18 = "/Users/xavier/Code/cdsat/src/trail.rs" 138 4 138 10

  let%span span19 = "/Users/xavier/Code/cdsat/src/trail.rs" 134 15 134 45

  let%span span20 = "/Users/xavier/Code/cdsat/src/trail.rs" 135 14 135 47

  let%span span21 = "/Users/xavier/Code/cdsat/src/trail.rs" 132 4 132 10

  let%span span22 = "/Users/xavier/Code/cdsat/src/trail.rs" 127 15 127 32

  let%span span23 = "/Users/xavier/Code/cdsat/src/trail.rs" 128 15 128 32

  let%span span24 = "/Users/xavier/Code/cdsat/src/trail.rs" 129 14 129 31

  let%span span25 = "/Users/xavier/Code/cdsat/src/trail.rs" 125 4 125 10

  let%span span26 = "/Users/xavier/Code/cdsat/src/trail.rs" 122 14 122 45

  let%span span27 = "/Users/xavier/Code/cdsat/src/trail.rs" 120 4 120 10

  let%span span28 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 41 20 41 56

  let%span span29 = "/Users/xavier/Code/cdsat/src/trail.rs" 117 14 117 64

  let%span span30 = "/Users/xavier/Code/cdsat/src/trail.rs" 115 4 115 10

  let%span span31 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 31 20 31 53

  let%span span32 = "/Users/xavier/Code/cdsat/src/trail.rs" 112 14 112 61

  let%span span33 = "/Users/xavier/Code/cdsat/src/trail.rs" 110 4 110 10

  let%span span34 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 21 20 21 53

  let%span span35 = "/Users/xavier/Code/cdsat/src/trail.rs" 107 14 107 61

  let%span span36 = "/Users/xavier/Code/cdsat/src/trail.rs" 105 4 105 10

  let%span span37 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 11 20 11 56

  let%span span38 = "/Users/xavier/Code/cdsat/src/trail.rs" 102 14 102 64

  let%span span39 = "/Users/xavier/Code/cdsat/src/trail.rs" 100 4 100 10

  let%span span40 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span41 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span42 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span43 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span44 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span45 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 14 70 15

  let%span span46 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 70 23 70 24

  let%span span47 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 69 14 69 59

  let%span span48 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 64 15 64 48

  let%span span49 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 16 66 17

  let%span span50 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 66 25 66 26

  let%span span51 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 65 14 65 44

  let%span span52 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 59 15 59 45

  let%span span53 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 16 61 17

  let%span span54 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 61 25 61 26

  let%span span55 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 60 14 60 47

  let%span span56 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 53 15 53 32

  let%span span57 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 54 15 54 32

  let%span span58 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 13 56 14

  let%span span59 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 22 56 23

  let%span span60 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 56 31 56 32

  let%span span61 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 55 14 55 31

  let%span span62 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 50 12 50 13

  let%span span63 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 49 14 49 45

  let%span span64 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 18 46 19

  let%span span65 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 46 27 46 28

  let%span span66 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 45 14 45 64

  let%span span67 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 18 36 19

  let%span span68 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 36 27 36 28

  let%span span69 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 35 14 35 61

  let%span span70 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 18 26 19

  let%span span71 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 26 27 26 28

  let%span span72 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 25 14 25 61

  let%span span73 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 18 16 19

  let%span span74 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 16 27 16 28

  let%span span75 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 15 14 15 64

  let%span span76 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span77 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span78 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span79 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 109 8 111 9

  let%span span80 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span81 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span82 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span83 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span84 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span85 = "/Users/xavier/Code/cdsat/src/term.rs" 195 8 225 9

  let%span span86 = "/Users/xavier/Code/cdsat/src/term.rs" 180 8 180 25

  let%span span87 = "/Users/xavier/Code/cdsat/src/trail.rs" 726 8 726 61

  let%span span88 = "/Users/xavier/Code/cdsat/src/trail.rs" 646 8 648 9

  let%span span89 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span90 = "/Users/xavier/Code/cdsat/src/trail.rs" 777 0 777 8

  let%span span91 = "/Users/xavier/Code/cdsat/src/trail.rs" 291 12 291 92

  let%span span92 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span93 = "/Users/xavier/Code/cdsat/src/theory.rs" 31 8 54 9

  let%span span94 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 129 8 129 78

  let%span span95 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 13 814 14

  let%span span96 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 24 814 25

  let%span span97 = "/Users/xavier/Code/cdsat/src/trail.rs" 809 0 809 73

  let%span span98 = "/Users/xavier/Code/cdsat/src/trail.rs" 810 0 810 63

  let%span span99 = "/Users/xavier/Code/cdsat/src/trail.rs" 811 0 811 55

  let%span span100 = "/Users/xavier/Code/cdsat/src/trail.rs" 812 0 812 52

  let%span span101 = "/Users/xavier/Code/cdsat/src/trail.rs" 813 10 813 33

  let%span span102 = "/Users/xavier/Code/cdsat/src/trail.rs" 814 33 814 39

  let%span span103 = "/Users/xavier/Code/cdsat/src/trail.rs" 808 10 808 17

  let%span span104 = "/Users/xavier/Code/cdsat/src/trail.rs" 807 0 807 8

  let%span span105 = "/Users/xavier/Code/cdsat/src/trail.rs" 313 4 313 82

  let%span span106 = "/Users/xavier/Code/cdsat/src/trail.rs" 314 14 314 40

  let%span span107 = "/Users/xavier/Code/cdsat/src/trail.rs" 315 4 315 115

  let%span span108 = "/Users/xavier/Code/cdsat/src/trail.rs" 316 4 316 115

  let%span span109 = "/Users/xavier/Code/cdsat/src/trail.rs" 317 4 317 101

  let%span span110 = "/Users/xavier/Code/cdsat/src/trail.rs" 312 14 312 24

  let%span span111 = "/Users/xavier/Code/cdsat/src/trail.rs" 310 4 310 12

  let%span span112 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span113 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span114 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span115 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span116 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span117 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span118 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span119 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span120 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span121 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span122 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span123 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span124 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span125 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span126 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span127 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span128 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span129 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span130 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span131 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span132 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span133 = "/Users/xavier/Code/cdsat/src/theory.rs" 616 15 616 27

  let%span span134 = "/Users/xavier/Code/cdsat/src/theory.rs" 617 15 617 32

  let%span span135 = "/Users/xavier/Code/cdsat/src/theory.rs" 618 4 618 90

  let%span span136 = "/Users/xavier/Code/cdsat/src/theory.rs" 512 8 515 9

  let%span span137 = "/Users/xavier/Code/cdsat/src/theory.rs" 522 8 525 9

  let%span span138 = "/Users/xavier/Code/cdsat/src/theory.rs" 206 8 206 84

  let%span span139 = "/Users/xavier/Code/cdsat/src/theory.rs" 502 8 505 9

  let%span span140 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span141 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span142 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span143 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span144 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span145 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span146 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span147 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span148 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span149 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span150 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span151 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span152 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span153 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span154 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span155 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span156 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span157 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span158 = "/Users/xavier/Code/cdsat/src/theory.rs" 484 15 484 31

  let%span span159 = "/Users/xavier/Code/cdsat/src/theory.rs" 485 15 485 35

  let%span span160 = "/Users/xavier/Code/cdsat/src/theory.rs" 486 15 486 27

  let%span span161 = "/Users/xavier/Code/cdsat/src/theory.rs" 487 4 487 54

  let%span span162 = "/Users/xavier/Code/cdsat/src/theory.rs" 488 4 488 58

  let%span span163 = "/Users/xavier/Code/cdsat/src/theory.rs" 489 4 489 61

  let%span span164 = "/Users/xavier/Code/cdsat/src/trail.rs" 268 8 272 9

  let%span span165 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 31 8 31 32

  let%span span166 = "/Users/xavier/Code/cdsat/src/trail.rs" 547 4 547 12

  let%span span167 = "/Users/xavier/Code/cdsat/src/trail.rs" 254 8 263 9

  let%span span168 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 20 8 20 31

  let%span span169 = "/Users/xavier/Code/cdsat/src/trail.rs" 179 4 179 12

  let%span span170 = "/Users/xavier/Code/cdsat/src/trail.rs" 279 12 283 13

  let%span span171 = "/Users/xavier/Code/cdsat/src/trail.rs" 238 8 248 9

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  function eq_cmp'2 (_1 : usize) (_2 : usize) : ()

  function antisym2'2 (_1 : usize) (_2 : usize) : ()

  function antisym1'2 (_1 : usize) (_2 : usize) : ()

  use Core_Cmp_Ordering_Type as Ordering'0

  function trans'2 (_1 : usize) (_2 : usize) (_3 : usize) (_4 : Ordering'0.t_ordering) : ()

  function refl'2 (_1 : usize) : ()

  function cmp_gt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_ge_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_lt_log'2 (_1 : usize) (_2 : usize) : ()

  function cmp_le_log'2 (_1 : usize) (_2 : usize) : ()

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  predicate invariant'12 (self : TrailIndex'0.t_trailindex) =
    [%#span11] true

  predicate inv'9 (_x : TrailIndex'0.t_trailindex)

  axiom inv'9 : forall x : TrailIndex'0.t_trailindex . inv'9 x = true

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span12] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span13] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  function eq_cmp'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 147 4 147 31] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span15] ()

  axiom eq_cmp'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span14] (x = y)
  = (cmp_log'0 x y = Ordering'0.C_Equal)

  function antisym2'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 142 4 142 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span18] ()

  axiom antisym2'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span16] cmp_log'0 x y
  = Ordering'0.C_Greater)  -> ([%#span17] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 136 4 136 33] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span21] ()

  axiom antisym1'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span19] cmp_log'0 x y
  = Ordering'0.C_Less)  -> ([%#span20] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 130 4 130 52] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()

   =
    [%#span25] ()

  axiom trans'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span22] cmp_log'0 x y
  = o)  -> ([%#span23] cmp_log'0 y z = o)  -> ([%#span24] cmp_log'0 x z = o)

  function refl'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 123 4 123 20] (x : TrailIndex'0.t_trailindex) : () =
    [%#span27] ()

  axiom refl'1_spec : forall x : TrailIndex'0.t_trailindex . [%#span26] cmp_log'0 x x = Ordering'0.C_Equal

  function gt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span28] cmp_log'0 self o = Ordering'0.C_Greater

  function cmp_gt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 118 4 118 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span30] ()

  axiom cmp_gt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span29] gt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Greater)

  function ge_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span31] cmp_log'0 self o <> Ordering'0.C_Less

  function cmp_ge_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 113 4 113 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span33] ()

  axiom cmp_ge_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span32] ge_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Less)

  function lt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span34] cmp_log'0 self o = Ordering'0.C_Less

  function cmp_lt_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 108 4 108 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span36] ()

  axiom cmp_lt_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span35] lt_log'0 x y
  = (cmp_log'0 x y = Ordering'0.C_Less)

  function le_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span37] cmp_log'0 self o <> Ordering'0.C_Greater

  function cmp_le_log'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 103 4 103 35] (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

   =
    [%#span39] ()

  axiom cmp_le_log'1_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . [%#span38] le_log'0 x y
  = (cmp_log'0 x y <> Ordering'0.C_Greater)

  use seq.Seq

  predicate invariant'11 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span11] true

  predicate inv'8 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'8 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'8 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  constant max'0 : usize = [%#span40] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'7 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function shallow_model'4 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom shallow_model'4_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span41] inv'7 self)
   -> ([%#span43] inv'8 (shallow_model'4 self))
  && ([%#span42] Seq.length (shallow_model'4 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'10 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span44] inv'8 (shallow_model'4 self)

  axiom inv'7 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'7 x = true

  function eq_cmp'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom eq_cmp'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span45] inv'9 x)
   -> ([%#span46] inv'9 y)  -> ([%#span47] (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal))

  function antisym2'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym2'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span48] cmp_log'0 x y
  = Ordering'0.C_Greater)
   -> ([%#span49] inv'9 x)  -> ([%#span50] inv'9 y)  -> ([%#span51] cmp_log'0 y x = Ordering'0.C_Less)

  function antisym1'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom antisym1'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span52] cmp_log'0 x y
  = Ordering'0.C_Less)
   -> ([%#span53] inv'9 x)  -> ([%#span54] inv'9 y)  -> ([%#span55] cmp_log'0 y x = Ordering'0.C_Greater)

  function trans'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) (z : TrailIndex'0.t_trailindex) (o : Ordering'0.t_ordering) : ()


  axiom trans'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex, z : TrailIndex'0.t_trailindex, o : Ordering'0.t_ordering . ([%#span56] cmp_log'0 x y
  = o)
   -> ([%#span57] cmp_log'0 y z = o)
   -> ([%#span58] inv'9 x)  -> ([%#span59] inv'9 y)  -> ([%#span60] inv'9 z)  -> ([%#span61] cmp_log'0 x z = o)

  function refl'0 (x : TrailIndex'0.t_trailindex) : ()

  axiom refl'0_spec : forall x : TrailIndex'0.t_trailindex . ([%#span62] inv'9 x)
   -> ([%#span63] cmp_log'0 x x = Ordering'0.C_Equal)

  function cmp_gt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_gt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span64] inv'9 x)
   -> ([%#span65] inv'9 y)  -> ([%#span66] gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater))

  function cmp_ge_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_ge_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span67] inv'9 x)
   -> ([%#span68] inv'9 y)  -> ([%#span69] ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less))

  function cmp_lt_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_lt_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span70] inv'9 x)
   -> ([%#span71] inv'9 y)  -> ([%#span72] lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less))

  function cmp_le_log'0 (x : TrailIndex'0.t_trailindex) (y : TrailIndex'0.t_trailindex) : ()

  axiom cmp_le_log'0_spec : forall x : TrailIndex'0.t_trailindex, y : TrailIndex'0.t_trailindex . ([%#span73] inv'9 x)
   -> ([%#span74] inv'9 y)  -> ([%#span75] le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater))

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span76] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'9 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span77] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'6 (_x : Model'0.t_model)

  axiom inv'6 : forall x : Model'0.t_model . inv'6 x
  = (invariant'9 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use Cdsat_Trail_Assignment_Type as Assignment'0

  predicate invariant'8 (self : Seq.seq (Assignment'0.t_assignment)) =
    [%#span11] true

  predicate inv'5 (_x : Seq.seq (Assignment'0.t_assignment))

  axiom inv'5 : forall x : Seq.seq (Assignment'0.t_assignment) . inv'5 x = true

  use seq.Seq

  predicate inv'4 (_x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))

  function shallow_model'1 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) : Seq.seq (Assignment'0.t_assignment)


  axiom shallow_model'1_spec : forall self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . ([%#span41] inv'4 self)
   -> ([%#span43] inv'5 (shallow_model'1 self))
  && ([%#span42] Seq.length (shallow_model'1 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'7 (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) =
    [%#span44] inv'5 (shallow_model'1 self)

  axiom inv'4 : forall x : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global) . inv'4 x = true

  predicate invariant'6 (self : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))) =
    [%#span11] true

  predicate inv'3 (_x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)))

  axiom inv'3 : forall x : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) . inv'3 x = true

  use seq.Seq

  predicate inv'2 (_x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

  function shallow_model'0 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) : Seq.seq (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global))


  axiom shallow_model'0_spec : forall self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . ([%#span41] inv'2 self)
   -> ([%#span43] inv'3 (shallow_model'0 self))
  && ([%#span42] Seq.length (shallow_model'0 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'5 (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global))

   =
    [%#span44] inv'3 (shallow_model'0 self)

  axiom inv'2 : forall x : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global) . inv'2 x
  = true

  use Cdsat_Theory_Term_Type as Term'0

  predicate invariant'4 (self : (Term'0.t_term, Value'0.t_value)) =
    [%#span11] true

  predicate inv'1 (_x : (Term'0.t_term, Value'0.t_value))

  axiom inv'1 : forall x : (Term'0.t_term, Value'0.t_value) . inv'1 x = true

  use set.Fset

  predicate invariant'2 (self : Fset.fset (Term'0.t_term, Value'0.t_value)) =
    [%#span11] true

  predicate inv'0 (_x : Fset.fset (Term'0.t_term, Value'0.t_value))

  axiom inv'0 : forall x : Fset.fset (Term'0.t_term, Value'0.t_value) . inv'0 x = true

  use set.Fset

  predicate contains'2 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span78] Fset.mem e self

  predicate ext_eq'0 (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (other : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span79] forall e : (Term'0.t_term, Value'0.t_value) . inv'1 e  -> contains'2 self e = contains'2 other e

  axiom ext_eq'0_spec : forall self : Fset.fset (Term'0.t_term, Value'0.t_value), other : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#sfset8] inv'0 self)
   -> ([%#sfset9] inv'0 other)  -> ([%#sfset10] ext_eq'0 self other  -> self = other)

  use Cdsat_Trail_Trail_Type as Trail'0

  use set.Fset

  use set.Fset

  function insert'1 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span80] Fset.add e self

  use prelude.prelude.Borrow

  use Cdsat_Term_Value_Type as Value'1

  use Cdsat_Term_Term_Type as Term'1

  use prelude.prelude.Real

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  function deep_model'4 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span81] match self with
      | Value'1.C_Bool b -> Value'0.C_Bool b
      | Value'1.C_Rat br -> Value'0.C_Rat (deep_model'4 br)
      end

  function shallow_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span82] deep_model'1 self

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  use Cdsat_Term_Sort_Type as Sort'1

  function deep_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'1.t_sort) : Sort'0.t_sort =
    [%#span83] match self with
      | Sort'1.C_Boolean -> Sort'0.C_Boolean
      | Sort'1.C_Rational -> Sort'0.C_Rational
      end

  function deep_model'2 (self : usize) : int =
    [%#span84] UIntSize.to_int self

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 193 4 193 44] (self : Term'1.t_term) : Term'0.t_term =
    [%#span85] match self with
      | Term'1.C_Variable v s -> Term'0.C_Variable (Var'0.C_Var (deep_model'2 v) (deep_model'3 s))
      | Term'1.C_Value v -> Term'0.C_Value (deep_model'1 v)
      | Term'1.C_Plus l r -> Term'0.C_Plus (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Eq l r -> Term'0.C_Eq (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Conj l r -> Term'0.C_Conj (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Disj l r -> Term'0.C_Disj (deep_model'0 l) (deep_model'0 r)
      | Term'1.C_Neg t -> Term'0.C_Neg (deep_model'0 t)
      | Term'1.C_Impl l r -> Term'0.C_Disj (Term'0.C_Neg (deep_model'0 l)) (deep_model'0 r)
      | Term'1.C_Times l r -> Term'0.C_Plus (Term'0.C_Value (Value'0.C_Rat (deep_model'4 l))) (deep_model'0 r)
      | Term'1.C_Lt l r -> Term'0.C_Eq (deep_model'0 l) (deep_model'0 r)
      end

  function shallow_model'2 [#"/Users/xavier/Code/cdsat/src/term.rs" 179 4 179 50] (self : Term'1.t_term) : Term'0.t_term
   =
    [%#span86] deep_model'0 self

  function term_value'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 725 4 725 61] (self : Assignment'0.t_assignment) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span87] (shallow_model'2 (Cdsat_Trail_Assignment_Type.assignment_term self), shallow_model'3 (Cdsat_Trail_Assignment_Type.assignment_val self))

  use seq.Seq

  use seq.Seq

  use Cdsat_Trail_Trail_Type as Cdsat_Trail_Trail_Type

  function index_logic'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 645 4 645 77] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span88] term_value'0 (Seq.get (shallow_model'1 (Seq.get (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)))) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)))

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (TrailIndex'0.t_trailindex)) (a : TrailIndex'0.t_trailindex) : Fset.fset (TrailIndex'0.t_trailindex)

   =
    [%#span89] Fset.remove a self

  use set.Fset

  use set.Fset

  use set.Fset

  use set.Fset

  predicate contains'1 [@inline:trivial] (self : Fset.fset (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex)
   =
    [%#span78] Fset.mem e self

  function ix_to_abs'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 782 0 782 93] (t : Trail'0.t_trail) (s : Fset.fset (TrailIndex'0.t_trailindex)) : Fset.fset (Term'0.t_term, Value'0.t_value)


  axiom ix_to_abs'0_def : forall t : Trail'0.t_trail, s : Fset.fset (TrailIndex'0.t_trailindex) . ix_to_abs'0 t s
  = ([%#span90] if s = (Fset.empty  : Fset.fset (TrailIndex'0.t_trailindex)) then
    Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)
  else
    let a = Fset.pick s in insert'1 (ix_to_abs'0 t (remove'0 s a)) (index_logic'0 t a)
  )

  axiom ix_to_abs'0_spec : forall t : Trail'0.t_trail, s : Fset.fset (TrailIndex'0.t_trailindex) . ([%#strail6] forall a : (Term'0.t_term, Value'0.t_value) . contains'2 (ix_to_abs'0 t s) a
   -> (exists ix : TrailIndex'0.t_trailindex . a = index_logic'0 t ix /\ contains'1 s ix))
  && ([%#strail5] forall ix : TrailIndex'0.t_trailindex . contains'1 s ix
   -> contains'2 (ix_to_abs'0 t s) (index_logic'0 t ix))

  use set.Fset

  function insert'0 [@inline:trivial] (self : Fset.fset (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) : Fset.fset (TrailIndex'0.t_trailindex)

   =
    [%#span80] Fset.add e self

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 289 4 289 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex)

   =
    [%#span91] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)
    < Seq.length (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self))
    /\ UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix)
    < Seq.length (shallow_model'1 (Seq.get (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))))

  use Cdsat_Theory_Trail_Type as Trail'1

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span92] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  function well_sorted'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 30 4 30 36] (self : Term'0.t_term) : bool =
    [%#span93] match self with
      | Term'0.C_Variable v -> true
      | Term'0.C_Value v -> true
      | Term'0.C_Plus l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Rational
      | Term'0.C_Eq l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r
      | Term'0.C_Conj l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Boolean
      | Term'0.C_Disj l r -> well_sorted'0 l /\ well_sorted'0 r /\ sort'0 l = sort'0 r /\ sort'0 r = Sort'0.C_Boolean
      | Term'0.C_Neg t -> well_sorted'0 t /\ sort'0 t = Sort'0.C_Boolean
      end

  use seq.Seq

  use prelude.seq_ext.SeqExt

  use seq.Seq

  use seq.Seq

  predicate contains'4 (self : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) =
    [%#span94] exists i : int . 0 <= i /\ i < Seq.length self /\ Seq.get self i = e

  function remove'2 [#"/Users/xavier/Code/cdsat/src/trail.rs" 814 0 814 39] (s : Seq.seq (TrailIndex'0.t_trailindex)) (e : TrailIndex'0.t_trailindex) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom remove'2_def : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . remove'2 s e
  = ([%#span104] if s = (Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)) then
    Seq.empty  : Seq.seq (TrailIndex'0.t_trailindex)
  else
    if Seq.get s (Seq.length s - 1) = e then
      remove'2 (SeqExt.subsequence s 0 (Seq.length s - 1)) e
    else
      Seq.snoc (remove'2 (SeqExt.subsequence s 0 (Seq.length s - 1)) e) (Seq.get s (Seq.length s - 1))

  )

  axiom remove'2_spec : forall s : Seq.seq (TrailIndex'0.t_trailindex), e : TrailIndex'0.t_trailindex . ([%#span95] inv'8 s)
   -> ([%#span96] inv'9 e)
   -> ([%#span102] inv'8 (remove'2 s e))
  && ([%#span101] Seq.length (remove'2 s e) <= Seq.length s)
  && ([%#span100] contains'4 s e  -> Seq.length (remove'2 s e) < Seq.length s)
  && ([%#span99] forall t : TrailIndex'0.t_trailindex . inv'9 t  -> contains'4 (remove'2 s e) t  -> t <> e)
  && ([%#span98] forall t : TrailIndex'0.t_trailindex . inv'9 t  -> contains'4 (remove'2 s e) t  -> contains'4 s t)
  && ([%#span97] forall t : TrailIndex'0.t_trailindex . inv'9 t
   -> contains'4 s t  -> e <> t  -> contains'4 (remove'2 s e) t)

  use set.Fset

  function abstract_justification'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 318 4 321 44] (self : Trail'0.t_trail) (just : Seq.seq (TrailIndex'0.t_trailindex)) : Fset.fset (Term'0.t_term, Value'0.t_value)


  axiom abstract_justification'0_def : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . abstract_justification'0 self just
  = ([%#span111] if Seq.length just > 0 then
    let set = abstract_justification'0 self (remove'2 just (Seq.get just 0)) in let a = index_logic'0 self (Seq.get just 0) in insert'1 set a
  else
    Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)
  )

  axiom abstract_justification'0_spec : forall self : Trail'0.t_trail, just : Seq.seq (TrailIndex'0.t_trailindex) . ([%#span105] forall i : int . 0
  <= i
  /\ i < Seq.length just  -> contains'0 self (Seq.get just i))
   -> ([%#span109] forall i : int . 0 <= i /\ i < Seq.length just
   -> contains'2 (abstract_justification'0 self just) (index_logic'0 self (Seq.get just i)))
  && ([%#span108] forall a : (Term'0.t_term, Value'0.t_value) . contains'2 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'4 just ix /\ a = index_logic'0 self ix))
  && ([%#span107] forall a : (Term'0.t_term, Value'0.t_value) . contains'2 (abstract_justification'0 self just) a
   -> (exists ix : TrailIndex'0.t_trailindex . contains'0 self ix /\ a = index_logic'0 self ix))
  && ([%#span106] Fset.cardinal (abstract_justification'0 self just) <= Seq.length just)

  use prelude.prelude.Int

  use Cdsat_Theory_Assign_Type as Assign'0

  predicate invariant'3 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span112] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'1.t_trail) =
    [%#span113] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'3 a
      end

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'1.t_trail) : int

  axiom len'0_spec : forall self : Trail'1.t_trail . [%#span114] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'1.t_trail) : int =
    [%#span117] match self with
      | Trail'1.C_Empty -> 0
      | Trail'1.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'1.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'1.t_trail . ([%#span116] level'0 self <= len'0 self)
  && ([%#span115] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'1.t_trail) =
    [%#span118] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span119] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span123] match self with
      | Trail'1.C_Empty -> Option'0.C_None
      | Trail'1.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span122] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span121] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span120] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  function from_int'0 (_1 : int) : Real.real

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span126] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span124] inv'6 self)
   -> ([%#span125] invariant'9 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span127] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span128] forall a : (Term'0.t_term, Value'0.t_value) . contains'2 v a  -> satisfies'0 self a

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span129] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'6 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate contains'3 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span131] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'3_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span130] invariant_assign'0 self
   -> contains'3 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'1.t_trail)
   =
    [%#span132] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a _ tl -> sound'0 tl /\ justified_sound'0 a
      end

  function find_justified'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 619 4 619 46] (self : Trail'1.t_trail) (kv : (Term'0.t_term, Value'0.t_value)) : ()


  axiom find_justified'0_spec : forall self : Trail'1.t_trail, kv : (Term'0.t_term, Value'0.t_value) . ([%#span133] sound'0 self)
   -> ([%#span134] contains'3 self kv)
   -> ([%#span135] forall l : int . forall a : Assign'0.t_assign . find'0 self kv = Option'0.C_Some (a, l)
   -> justified_sound'0 a)

  predicate is_decision'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 511 4 511 54] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span136] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Decision _ _, _) -> true
      | _ -> false
      end

  predicate is_input'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 521 4 521 51] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span137] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Input _ _, _) -> true
      | _ -> false
      end

  predicate entails'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 205 4 205 74] (self : Model'0.t_model) (j : Fset.fset (Term'0.t_term, Value'0.t_value)) (c : (Term'0.t_term, Value'0.t_value))

   =
    [%#span138] invariant'9 self  -> satisfy_set'0 self j  -> satisfies'0 self c

  predicate is_justified'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 501 4 501 55] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span139] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified _ _ _, _) -> true
      | _ -> false
      end

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span140] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span143] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span141] is_bool'0 self)
   -> ([%#span142] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'1.t_trail) =
    [%#span144] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> let ap = to_pair'0 a in not contains'3 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'3 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'1.t_trail) =
    [%#span145] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'2 j a  -> contains'3 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'1 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span89] Fset.remove a self

  use set.Fset

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span148] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span146] invariant_nonneg'0 self)
   -> ([%#span147] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'1.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_spec : forall self : Trail'1.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#span149] invariant_nonneg'0 self)
   -> ([%#span154] set_level'0 self s <= level'0 self)
  && ([%#span153] set_level'0 self s >= 0)
  && ([%#span152] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#span151] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'2 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span150] forall i : (Term'0.t_term, Value'0.t_value) . contains'2 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'1.t_trail) =
    [%#span156] match self with
      | Trail'1.C_Empty -> true
      | Trail'1.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'1.t_trail) =
    [%#span157] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function justification'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 490 4 490 71] (self : Trail'1.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)


  axiom justification'0_spec : forall self : Trail'1.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span158] invariant'1 self)
   -> ([%#span159] is_justified'0 self d)
   -> ([%#span160] sound'0 self)
   -> ([%#span163] is_decision'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#span162] is_input'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#span161] forall m : Model'0.t_model . inv'6 m  -> entails'0 m (justification'0 self d) d)

  use prelude.prelude.Snapshot

  predicate justified_correct'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 267 4 267 78] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) (j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

   =
    [%#span164] (forall i : TrailIndex'0.t_trailindex . contains'4 (shallow_model'4 j) i
     -> lt_log'0 i ix /\ contains'0 self i)
    /\ is_justified'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ justification'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    = abstract_justification'0 self (shallow_model'4 j)

  use Cdsat_Trail_Reason_Type as Reason'0

  function index_logic'3 [@inline:trivial] (self : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (ix : usize) : Assignment'0.t_assignment

   =
    [%#span165] Seq.get (shallow_model'1 self) (UIntSize.to_int ix)

  function index_logic'2 [@inline:trivial] (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (ix : usize) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span165] Seq.get (shallow_model'0 self) (UIntSize.to_int ix)

  function reason'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 549 4 549 49] (self : Trail'0.t_trail) (ix : TrailIndex'0.t_trailindex) : Reason'0.t_reason

   =
    [%#span166] Cdsat_Trail_Assignment_Type.assignment_reason (index_logic'3 (index_logic'2 (Cdsat_Trail_Trail_Type.trail_assignments self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix)) (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix))

  predicate justified_is_justified'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 253 4 253 47] (self : Trail'0.t_trail) =
    [%#span167] forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> (let reason = reason'0 self ix in (reason = Reason'0.C_Decision)
    = is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ (reason = Reason'0.C_Input)
    = is_input'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    /\ (forall j : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . reason = Reason'0.C_Justified j
     -> justified_correct'0 self ix j))

  function index_logic'1 [@inline:trivial] (self : Vec'0.t_vec (Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)) (Global'0.t_global)) (ix : int) : Vec'0.t_vec (Assignment'0.t_assignment) (Global'0.t_global)

   =
    [%#span168] Seq.get (shallow_model'0 self) ix

  function level_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 180 4 180 33] (self : TrailIndex'0.t_trailindex) : int
   =
    [%#span169] UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 self)

  predicate abstract_relation'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 277 4 277 42] (self : Trail'0.t_trail) =
    [%#span170] (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> contains'3 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix))
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix)
    = UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_0 ix))
    /\ (forall a : (Term'0.t_term, Value'0.t_value) . contains'3 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
     -> (exists ix : TrailIndex'0.t_trailindex . contains'0 self ix
    /\ level_log'0 ix = level_of'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) a
    /\ index_logic'0 self ix = a))

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 237 4 237 34] (self : Trail'0.t_trail) =
    [%#span171] abstract_relation'0 self
    /\ sound'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    /\ invariant'1 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    /\ level'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self))
    = UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self)
    /\ UIntSize.to_int (Cdsat_Trail_Trail_Type.trail_level self)
    = Seq.length (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self)) - 1
    /\ (forall i : int . 0 <= i /\ i < Seq.length (shallow_model'0 (Cdsat_Trail_Trail_Type.trail_assignments self))
     -> Seq.length (shallow_model'1 (index_logic'1 (Cdsat_Trail_Trail_Type.trail_assignments self) i)) > 0)
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> (UIntSize.to_int (Cdsat_Trail_TrailIndex_Type.trailindex_1 ix) = 0)
    = is_decision'0 (Snapshot.inner (Cdsat_Trail_Trail_Type.trail_ghost self)) (index_logic'0 self ix))
    /\ (forall j : TrailIndex'0.t_trailindex . forall i : TrailIndex'0.t_trailindex . contains'0 self i
     -> contains'0 self j  -> i <> j  -> index_logic'0 self i <> index_logic'0 self j)
    /\ justified_is_justified'0 self
    /\ (forall ix : TrailIndex'0.t_trailindex . contains'0 self ix
     -> well_sorted'0 (let (a, _) = index_logic'0 self ix in a))

  constant t  : Trail'0.t_trail

  constant x  : TrailIndex'0.t_trailindex

  constant s  : Fset.fset (TrailIndex'0.t_trailindex)

  function ix_to_abs_insert [#"/Users/xavier/Code/cdsat/src/trail.rs" 893 0 893 76] (t : Trail'0.t_trail) (x : TrailIndex'0.t_trailindex) (s : Fset.fset (TrailIndex'0.t_trailindex)) : ()


  goal vc_ix_to_abs_insert : ([%#strail2] forall i : TrailIndex'0.t_trailindex . contains'1 s i  -> contains'0 t i)
   -> ([%#strail1] contains'0 t x)
   -> ([%#strail0] invariant'0 t)
   -> ([%#strail6] forall a : (Term'0.t_term, Value'0.t_value) . contains'2 (ix_to_abs'0 t (insert'0 s x)) a
   -> (exists ix : TrailIndex'0.t_trailindex . a = index_logic'0 t ix /\ contains'1 (insert'0 s x) ix))
  && ([%#strail5] forall ix : TrailIndex'0.t_trailindex . contains'1 (insert'0 s x) ix
   -> contains'2 (ix_to_abs'0 t (insert'0 s x)) (index_logic'0 t ix))
   -> ([%#strail6] forall a : (Term'0.t_term, Value'0.t_value) . contains'2 (ix_to_abs'0 t s) a
   -> (exists ix : TrailIndex'0.t_trailindex . a = index_logic'0 t ix /\ contains'1 s ix))
  && ([%#strail5] forall ix : TrailIndex'0.t_trailindex . contains'1 s ix
   -> contains'2 (ix_to_abs'0 t s) (index_logic'0 t ix))
   -> (([%#sfset9] inv'0 (insert'1 (ix_to_abs'0 t s) (index_logic'0 t x)))
  && ([%#sfset8] inv'0 (ix_to_abs'0 t (insert'0 s x))))
  /\ (([%#sfset10] ext_eq'0 (ix_to_abs'0 t (insert'0 s x)) (insert'1 (ix_to_abs'0 t s) (index_logic'0 t x))
   -> ix_to_abs'0 t (insert'0 s x) = insert'1 (ix_to_abs'0 t s) (index_logic'0 t x))
   -> ext_eq'0 (ix_to_abs'0 t (insert'0 s x)) (insert'1 (ix_to_abs'0 t s) (index_logic'0 t x))
  && (let _ = () in let _ = () in [%#strail3] ix_to_abs'0 t (insert'0 s x)
  = insert'1 (ix_to_abs'0 t s) (index_logic'0 t x)))
end
module Cdsat_Theory_Impl5_ContainsInverse_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 427 15 427 34

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 428 15 428 31

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 429 4 429 30

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 430 14 430 49

  let%span stheory4 = "/Users/xavier/Code/cdsat/src/theory.rs" 107 15 107 29

  let%span stheory5 = "/Users/xavier/Code/cdsat/src/theory.rs" 108 14 108 44

  let%span span6 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span7 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span8 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span9 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span10 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span11 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span12 = "/Users/xavier/Code/cdsat/src/theory.rs" 105 4 105 12

  let%span span13 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span14 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span15 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span16 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span17 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span20 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span21 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span22 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span23 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span24 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span25 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span26 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span28 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  use Cdsat_Theory_Assign_Type as Assign'0

  use Cdsat_Theory_Value_Type as Value'0

  use Cdsat_Theory_Term_Type as Term'0

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span6] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Cdsat_Theory_Sort_Type as Sort'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span7] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span8] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span11] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span9] is_bool'0 self)
   -> ([%#span10] is_bool'0 (negate'0 self))

  function negate_involutive'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 109 4 109 34] (self : Value'0.t_value) : () =
    [%#span12] ()

  axiom negate_involutive'0_spec : forall self : Value'0.t_value . ([%#stheory4] is_bool'0 self)
   -> ([%#stheory5] negate'0 (negate'0 self) = self)

  use Cdsat_Theory_Trail_Type as Trail'0

  use prelude.prelude.Int

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span13] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span14] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span15] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'0 a
      end

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span17] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span16] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span20] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span19] level'0 self <= len'0 self)
  && ([%#span18] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span21] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span25] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span24] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span23] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span22] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span27] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span26] invariant_assign'0 self
   -> contains'0 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span28] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'0 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'0 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  constant self  : Trail'0.t_trail

  constant d  : (Term'0.t_term, Value'0.t_value)

  function contains_inverse [#"/Users/xavier/Code/cdsat/src/theory.rs" 431 4 431 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : ()


  goal vc_contains_inverse : ([%#stheory2] is_bool'0 (let (_, a) = d in a))
   -> ([%#stheory1] contains'0 self d)
   -> ([%#stheory0] trail_unique'0 self)
   -> ([%#stheory4] is_bool'0 (let (_, a) = d in a))
  /\ (([%#stheory5] negate'0 (negate'0 (let (_, a) = d in a)) = (let (_, a) = d in a))
   -> (let _ = negate_involutive'0 (let (_, a) = d in a) in match self with
    | Trail'0.C_Empty -> [%#stheory3] not contains'0 self ((let (a, _) = d in a), negate'0 (let (_, a) = d in a))
    | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then
      [%#stheory3] not contains'0 self ((let (a, _) = d in a), negate'0 (let (_, a) = d in a))
    else
      (([%#stheory2] is_bool'0 (let (_, a) = d in a))
      && ([%#stheory1] contains'0 tl d) && ([%#stheory0] trail_unique'0 tl))
      /\ (([%#stheory3] not contains'0 tl ((let (a, _) = d in a), negate'0 (let (_, a) = d in a)))
       -> ([%#stheory3] not contains'0 self ((let (a, _) = d in a), negate'0 (let (_, a) = d in a))))

    end))
end
module Cdsat_Theory_Impl5_RestrictTooBig_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 751 15 751 25

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 752 15 752 31

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 753 15 753 31

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 754 15 754 39

  let%span stheory4 = "/Users/xavier/Code/cdsat/src/theory.rs" 755 14 755 47

  let%span span5 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span6 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span7 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span8 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span9 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span10 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span11 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span12 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span13 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span14 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span15 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span16 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span17 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span20 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span21 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span22 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span23 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span24 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span25 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span26 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span28 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span29 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span30 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span31 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span32 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span33 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span34 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span35 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span36 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span37 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span38 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span39 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span40 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span41 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  let%span span42 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span43 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span44 = "/Users/xavier/Code/cdsat/src/theory.rs" 738 15 738 31

  let%span span45 = "/Users/xavier/Code/cdsat/src/theory.rs" 739 4 739 83

  let%span span46 = "/Users/xavier/Code/cdsat/src/theory.rs" 741 8 746 9

  let%span span47 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span48 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span49 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span50 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span51 = "/Users/xavier/Code/cdsat/src/theory.rs" 675 8 675 71

  let%span span52 = "/Users/xavier/Code/cdsat/src/theory.rs" 548 15 548 31

  let%span span53 = "/Users/xavier/Code/cdsat/src/theory.rs" 550 15 550 25

  let%span span54 = "/Users/xavier/Code/cdsat/src/theory.rs" 549 14 549 32

  let%span span55 = "/Users/xavier/Code/cdsat/src/theory.rs" 551 4 551 141

  let%span span56 = "/Users/xavier/Code/cdsat/src/theory.rs" 552 4 552 142

  let%span span57 = "/Users/xavier/Code/cdsat/src/theory.rs" 553 4 553 56

  let%span span58 = "/Users/xavier/Code/cdsat/src/theory.rs" 554 4 554 71

  let%span span59 = "/Users/xavier/Code/cdsat/src/theory.rs" 555 4 555 77

  let%span span60 = "/Users/xavier/Code/cdsat/src/theory.rs" 556 14 556 126

  let%span span61 = "/Users/xavier/Code/cdsat/src/theory.rs" 557 14 557 40

  let%span span62 = "/Users/xavier/Code/cdsat/src/theory.rs" 559 8 570 9

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span5] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span6] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k = v
     -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'2 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use Cdsat_Theory_Assign_Type as Assign'0

  use Cdsat_Theory_Term_Type as Term'0

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span7] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Cdsat_Theory_Trail_Type as Trail'0

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span9] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span8] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span12] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span11] level'0 self <= len'0 self)
  && ([%#span10] level'0 self >= 0)

  use prelude.prelude.Int

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span13] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span14] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span15] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'1 a
      end

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span16] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span20] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span19] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span18] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span17] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span23] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span21] invariant_nonneg'0 self)
   -> ([%#span22] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span25] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span24] invariant_assign'0 self
   -> contains'0 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span26] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span29] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span27] is_bool'0 self)
   -> ([%#span28] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span30] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'0 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'0 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  use set.Fset

  use set.Fset

  predicate contains'1 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span31] Fset.mem e self

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'0.t_trail) =
    [%#span32] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'1 j a  -> contains'0 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span33] Fset.remove a self

  use set.Fset

  use set.Fset

  use set.Fset

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span41] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#span34] invariant_nonneg'0 self)
   -> ([%#span39] set_level'0 self s <= level'0 self)
  && ([%#span38] set_level'0 self s >= 0)
  && ([%#span37] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#span36] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'1 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span35] forall i : (Term'0.t_term, Value'0.t_value) . contains'1 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'0.t_trail) =
    [%#span42] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'0.t_trail) =
    [%#span43] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function count_bounds'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 740 4 740 35] (self : Trail'0.t_trail) : () =
    [%#span46] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign (Assign'0.C_Input _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Justified _ _ _) _ tl -> count_bounds'0 tl
      end

  axiom count_bounds'0_spec : forall self : Trail'0.t_trail . ([%#span44] invariant'0 self)
   -> ([%#span45] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a  -> level_of'0 self a <= level'0 self)

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span49] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span47] inv'0 self)
   -> ([%#span48] invariant'2 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span50] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  predicate satisfied_by'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 674 4 674 47] (self : Trail'0.t_trail) (m : Model'0.t_model)

   =
    [%#span51] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a  -> satisfies'0 m a

  function restrict'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 558 4 558 45] (self : Trail'0.t_trail) (level : int) : Trail'0.t_trail

   =
    [%#span62] match self with
      | Trail'0.C_Empty -> Trail'0.C_Empty
      | Trail'0.C_Assign a l tl -> let tl = restrict'0 tl level in let _ = count_bounds'0 tl in if l <= level then
        Trail'0.C_Assign a l tl
      else
        tl

      end

  axiom restrict'0_spec : forall self : Trail'0.t_trail, level : int . ([%#span52] invariant'0 self)
   -> ([%#span53] level >= 0)
   -> ([%#span61] len'0 (restrict'0 self level) <= len'0 self)
  && ([%#span60] (level'0 self >= level  -> level'0 (restrict'0 self level) = level)
  /\ (level'0 self < level  -> level'0 (restrict'0 self level) = level'0 self))
  && ([%#span59] forall m : Model'0.t_model . inv'0 m
   -> satisfied_by'0 self m  -> satisfied_by'0 (restrict'0 self level) m)
  && ([%#span58] forall a : (Term'0.t_term, Value'0.t_value) . not contains'0 self a
   -> not contains'0 (restrict'0 self level) a)
  && ([%#span57] level >= level'0 self  -> restrict'0 self level = self)
  && ([%#span56] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 (restrict'0 self level) a
   -> contains'0 self a
  /\ level_of'0 (restrict'0 self level) a <= level /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span55] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a
   -> level_of'0 self a <= level
   -> contains'0 (restrict'0 self level) a /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span54] invariant'0 (restrict'0 self level))

  constant self  : Trail'0.t_trail

  constant level  : int

  constant d  : (Term'0.t_term, Value'0.t_value)

  function restrict_too_big [#"/Users/xavier/Code/cdsat/src/theory.rs" 756 4 756 63] (self : Trail'0.t_trail) (level : int) (d : (Term'0.t_term, Value'0.t_value)) : ()


  goal vc_restrict_too_big : ([%#stheory3] level < level_of'0 self d)
   -> ([%#stheory2] contains'0 self d)
   -> ([%#stheory1] invariant'0 self)
   -> ([%#stheory0] level >= 0)
   -> match self with
    | Trail'0.C_Empty -> [%#stheory4] not contains'0 (restrict'0 self level) d
    | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then
      [%#stheory4] not contains'0 (restrict'0 self level) d
    else
      (([%#stheory3] level < level_of'0 tl d)
      && ([%#stheory2] contains'0 tl d) && ([%#stheory1] invariant'0 tl) && ([%#stheory0] level >= 0))
      /\ (([%#stheory4] not contains'0 (restrict'0 tl level) d)
       -> (let _ = restrict_too_big tl level d in [%#stheory4] not contains'0 (restrict'0 self level) d))

    end
end
module Cdsat_Theory_Impl6_Decide_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 833 15 833 35

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 834 15 834 27

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 835 4 835 46

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 836 4 836 38

  let%span stheory4 = "/Users/xavier/Code/cdsat/src/theory.rs" 837 4 837 46

  let%span stheory5 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span stheory6 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span7 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span8 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span9 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span10 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span11 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span12 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span13 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span14 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span15 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span16 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span17 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span20 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span21 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span22 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span23 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span24 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span25 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span26 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 398 8 400 79

  let%span span28 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span29 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span30 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span31 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span32 = "/Users/xavier/Code/cdsat/src/theory.rs" 675 8 675 71

  let%span span33 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span34 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span35 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span36 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span37 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span38 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span39 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span40 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span41 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span42 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span43 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span44 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span45 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span46 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span47 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  let%span span48 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span49 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span50 = "/Users/xavier/Code/cdsat/src/theory.rs" 738 15 738 31

  let%span span51 = "/Users/xavier/Code/cdsat/src/theory.rs" 739 4 739 83

  let%span span52 = "/Users/xavier/Code/cdsat/src/theory.rs" 741 8 746 9

  let%span span53 = "/Users/xavier/Code/cdsat/src/theory.rs" 548 15 548 31

  let%span span54 = "/Users/xavier/Code/cdsat/src/theory.rs" 550 15 550 25

  let%span span55 = "/Users/xavier/Code/cdsat/src/theory.rs" 549 14 549 32

  let%span span56 = "/Users/xavier/Code/cdsat/src/theory.rs" 551 4 551 141

  let%span span57 = "/Users/xavier/Code/cdsat/src/theory.rs" 552 4 552 142

  let%span span58 = "/Users/xavier/Code/cdsat/src/theory.rs" 553 4 553 56

  let%span span59 = "/Users/xavier/Code/cdsat/src/theory.rs" 554 4 554 71

  let%span span60 = "/Users/xavier/Code/cdsat/src/theory.rs" 555 4 555 77

  let%span span61 = "/Users/xavier/Code/cdsat/src/theory.rs" 556 14 556 126

  let%span span62 = "/Users/xavier/Code/cdsat/src/theory.rs" 557 14 557 40

  let%span span63 = "/Users/xavier/Code/cdsat/src/theory.rs" 559 8 570 9

  let%span span64 = "/Users/xavier/Code/cdsat/src/theory.rs" 682 8 682 82

  let%span span65 = "/Users/xavier/Code/cdsat/src/theory.rs" 693 4 693 55

  let%span span66 = "/Users/xavier/Code/cdsat/src/theory.rs" 695 8 695 108

  let%span span67 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span68 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span69 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span70 = "/Users/xavier/Code/cdsat/src/theory.rs" 823 4 823 16

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span7] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span8] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k = v
     -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'2 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use Cdsat_Theory_Trail_Type as Trail'0

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span10] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span9] len'0 self >= 0

  use Cdsat_Theory_Assign_Type as Assign'0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span11] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#stheory6] level'0 self <= len'0 self)
  && ([%#stheory5] level'0 self >= 0)

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span12] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span15] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span13] is_bool'0 self)
   -> ([%#span14] is_bool'0 (negate'0 self))

  use Cdsat_Theory_Term_Type as Term'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span16] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  use prelude.prelude.Int

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span17] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span18] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'1 a
      end

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span19] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span20] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span24] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span23] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span22] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span21] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span26] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span25] invariant_assign'0 self
   -> contains'0 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  predicate acceptable'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 397 4 397 56] (self : Trail'0.t_trail) (t : Term'0.t_term) (val' : Value'0.t_value)

   =
    [%#span27] not contains'0 self (t, val')
    /\ sort'0 t = sort'1 val' /\ (is_bool'0 val'  -> not contains'0 self (t, negate'0 val'))

  use Cdsat_Theory_Normal_Type as Normal'0

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span30] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span28] inv'0 self)
   -> ([%#span29] invariant'2 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span31] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  predicate satisfied_by'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 674 4 674 47] (self : Trail'0.t_trail) (m : Model'0.t_model)

   =
    [%#span32] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a  -> satisfies'0 m a

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span35] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span33] invariant_nonneg'0 self)
   -> ([%#span34] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span36] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'0 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'0 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  use set.Fset

  use set.Fset

  predicate contains'1 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span37] Fset.mem e self

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'0.t_trail) =
    [%#span38] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'1 j a  -> contains'0 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span39] Fset.remove a self

  use set.Fset

  use set.Fset

  use set.Fset

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span47] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#span40] invariant_nonneg'0 self)
   -> ([%#span45] set_level'0 self s <= level'0 self)
  && ([%#span44] set_level'0 self s >= 0)
  && ([%#span43] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#span42] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'1 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span41] forall i : (Term'0.t_term, Value'0.t_value) . contains'1 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'0.t_trail) =
    [%#span48] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'0.t_trail) =
    [%#span49] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function count_bounds'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 740 4 740 35] (self : Trail'0.t_trail) : () =
    [%#span52] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign (Assign'0.C_Input _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Justified _ _ _) _ tl -> count_bounds'0 tl
      end

  axiom count_bounds'0_spec : forall self : Trail'0.t_trail . ([%#span50] invariant'0 self)
   -> ([%#span51] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a  -> level_of'0 self a <= level'0 self)

  function restrict'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 558 4 558 45] (self : Trail'0.t_trail) (level : int) : Trail'0.t_trail

   =
    [%#span63] match self with
      | Trail'0.C_Empty -> Trail'0.C_Empty
      | Trail'0.C_Assign a l tl -> let tl = restrict'0 tl level in let _ = count_bounds'0 tl in if l <= level then
        Trail'0.C_Assign a l tl
      else
        tl

      end

  axiom restrict'0_spec : forall self : Trail'0.t_trail, level : int . ([%#span53] invariant'0 self)
   -> ([%#span54] level >= 0)
   -> ([%#span62] len'0 (restrict'0 self level) <= len'0 self)
  && ([%#span61] (level'0 self >= level  -> level'0 (restrict'0 self level) = level)
  /\ (level'0 self < level  -> level'0 (restrict'0 self level) = level'0 self))
  && ([%#span60] forall m : Model'0.t_model . inv'0 m
   -> satisfied_by'0 self m  -> satisfied_by'0 (restrict'0 self level) m)
  && ([%#span59] forall a : (Term'0.t_term, Value'0.t_value) . not contains'0 self a
   -> not contains'0 (restrict'0 self level) a)
  && ([%#span58] level >= level'0 self  -> restrict'0 self level = self)
  && ([%#span57] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 (restrict'0 self level) a
   -> contains'0 self a
  /\ level_of'0 (restrict'0 self level) a <= level /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span56] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a
   -> level_of'0 self a <= level
   -> contains'0 (restrict'0 self level) a /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span55] invariant'0 (restrict'0 self level))

  predicate unsat'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 681 4 681 30] (self : Trail'0.t_trail) =
    [%#span64] forall m : Model'0.t_model . inv'0 m  -> satisfied_by'0 (restrict'0 self 0) m  -> false

  predicate impls'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 694 4 694 41] (self : Trail'0.t_trail) (rhs : Trail'0.t_trail)

   =
    [%#span66] forall m : Model'0.t_model . inv'0 m
     -> satisfied_by'0 (restrict'0 self 0) m  -> satisfied_by'0 (restrict'0 rhs 0) m

  axiom impls'0_spec : forall self : Trail'0.t_trail, rhs : Trail'0.t_trail . [%#span65] impls'0 self rhs
   -> unsat'0 rhs  -> unsat'0 self

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span67] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 v a  -> satisfies'0 self a

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span68] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'0 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate sound'1 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'0.t_trail)
   =
    [%#span69] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a _ tl -> sound'1 tl /\ justified_sound'0 a
      end

  use Cdsat_Theory_Normal_Type as Cdsat_Theory_Normal_Type

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 826 4 826 30] (self : Normal'0.t_normal)

   =
    [%#span70] sound'1 (Cdsat_Theory_Normal_Type.normal_0 self)

  constant self  : Normal'0.t_normal

  constant t  : Term'0.t_term

  constant val'  : Value'0.t_value

  constant tgt  : Normal'0.t_normal

  predicate decide [#"/Users/xavier/Code/cdsat/src/theory.rs" 838 4 838 63] (self : Normal'0.t_normal) (t : Term'0.t_term) (val' : Value'0.t_value) (tgt : Normal'0.t_normal)


  goal vc_decide : ([%#stheory1] sound'0 self)
   -> ([%#stheory0] invariant'0 (Cdsat_Theory_Normal_Type.normal_0 self))
   -> (if acceptable'0 (Cdsat_Theory_Normal_Type.normal_0 self) t val' then
    ([%#stheory6] level'0 (Cdsat_Theory_Normal_Type.normal_0 self) <= len'0 (Cdsat_Theory_Normal_Type.normal_0 self))
    && ([%#stheory5] level'0 (Cdsat_Theory_Normal_Type.normal_0 self) >= 0)
     -> (let result = Cdsat_Theory_Normal_Type.normal_0 tgt
    = Trail'0.C_Assign (Assign'0.C_Decision t val') (level'0 (Cdsat_Theory_Normal_Type.normal_0 self)
    + 1) (Cdsat_Theory_Normal_Type.normal_0 self) in ([%#stheory4] result
     -> impls'0 (Cdsat_Theory_Normal_Type.normal_0 self) (Cdsat_Theory_Normal_Type.normal_0 tgt))
    && ([%#stheory3] result  -> sound'0 tgt)
    && ([%#stheory2] result  -> invariant'0 (Cdsat_Theory_Normal_Type.normal_0 tgt)))
  else
    let result = false in ([%#stheory4] result
     -> impls'0 (Cdsat_Theory_Normal_Type.normal_0 self) (Cdsat_Theory_Normal_Type.normal_0 tgt))
    && ([%#stheory3] result  -> sound'0 tgt)
    && ([%#stheory2] result  -> invariant'0 (Cdsat_Theory_Normal_Type.normal_0 tgt))
  )
end
module Cdsat_Theory_Impl6_Deduce_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 865 15 865 35

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 866 15 866 27

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 867 4 867 46

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 868 4 868 38

  let%span stheory4 = "/Users/xavier/Code/cdsat/src/theory.rs" 869 4 869 46

  let%span stheory5 = "/Users/xavier/Code/cdsat/src/theory.rs" 738 15 738 31

  let%span stheory6 = "/Users/xavier/Code/cdsat/src/theory.rs" 739 4 739 83

  let%span stheory7 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span stheory8 = "/Users/xavier/Code/cdsat/src/theory.rs" 874 15 874 84

  let%span stheory9 = "/Users/xavier/Code/cdsat/src/theory.rs" 875 15 875 82

  let%span stheory10 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span stheory11 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span stheory12 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span stheory13 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span stheory14 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span stheory15 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span stheory16 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span17 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span20 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span21 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span22 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span23 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span24 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span25 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span26 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span28 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span29 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span30 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span31 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span32 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span33 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span34 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span35 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span36 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span37 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span38 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  let%span span39 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span40 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span41 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span42 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span43 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span44 = "/Users/xavier/Code/cdsat/src/theory.rs" 206 8 206 84

  let%span span45 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span46 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span47 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span48 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span49 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span50 = "/Users/xavier/Code/cdsat/src/theory.rs" 398 8 400 79

  let%span span51 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span52 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span53 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span54 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span55 = "/Users/xavier/Code/cdsat/src/theory.rs" 741 8 746 9

  let%span span56 = "/Users/xavier/Code/cdsat/src/theory.rs" 675 8 675 71

  let%span span57 = "/Users/xavier/Code/cdsat/src/theory.rs" 548 15 548 31

  let%span span58 = "/Users/xavier/Code/cdsat/src/theory.rs" 550 15 550 25

  let%span span59 = "/Users/xavier/Code/cdsat/src/theory.rs" 549 14 549 32

  let%span span60 = "/Users/xavier/Code/cdsat/src/theory.rs" 551 4 551 141

  let%span span61 = "/Users/xavier/Code/cdsat/src/theory.rs" 552 4 552 142

  let%span span62 = "/Users/xavier/Code/cdsat/src/theory.rs" 553 4 553 56

  let%span span63 = "/Users/xavier/Code/cdsat/src/theory.rs" 554 4 554 71

  let%span span64 = "/Users/xavier/Code/cdsat/src/theory.rs" 555 4 555 77

  let%span span65 = "/Users/xavier/Code/cdsat/src/theory.rs" 556 14 556 126

  let%span span66 = "/Users/xavier/Code/cdsat/src/theory.rs" 557 14 557 40

  let%span span67 = "/Users/xavier/Code/cdsat/src/theory.rs" 559 8 570 9

  let%span span68 = "/Users/xavier/Code/cdsat/src/theory.rs" 682 8 682 82

  let%span span69 = "/Users/xavier/Code/cdsat/src/theory.rs" 693 4 693 55

  let%span span70 = "/Users/xavier/Code/cdsat/src/theory.rs" 695 8 695 108

  let%span span71 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span72 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span73 = "/Users/xavier/Code/cdsat/src/theory.rs" 823 4 823 16

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span17] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span18] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'2 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use set.Fset

  use set.Fset

  use Cdsat_Theory_Assign_Type as Assign'0

  use Cdsat_Theory_Trail_Type as Trail'0

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span20] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span19] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span23] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span22] level'0 self <= len'0 self)
  && ([%#span21] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span24] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  use set.Fset

  use Cdsat_Theory_Term_Type as Term'0

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span25] Fset.remove a self

  use set.Fset

  use prelude.prelude.Int

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span26] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span27] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span28] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'1 a
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span29] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span33] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span32] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span31] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span30] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span36] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span34] invariant_nonneg'0 self)
   -> ([%#span35] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  use set.Fset

  predicate contains'1 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span37] Fset.mem e self

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span38] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#stheory10] invariant_nonneg'0 self)
   -> ([%#stheory15] set_level'0 self s <= level'0 self)
  && ([%#stheory14] set_level'0 self s >= 0)
  && ([%#stheory13] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#stheory12] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'1 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#stheory11] forall i : (Term'0.t_term, Value'0.t_value) . contains'1 s i
   -> level_of'0 self i <= set_level'0 self s)

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span41] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span39] inv'0 self)
   -> ([%#span40] invariant'2 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span42] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span43] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 v a  -> satisfies'0 self a

  predicate entails'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 205 4 205 74] (self : Model'0.t_model) (j : Fset.fset (Term'0.t_term, Value'0.t_value)) (c : (Term'0.t_term, Value'0.t_value))

   =
    [%#span44] invariant'2 self  -> satisfy_set'0 self j  -> satisfies'0 self c

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span45] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span48] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span46] is_bool'0 self)
   -> ([%#span47] is_bool'0 (negate'0 self))

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span49] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#stheory7] invariant_assign'0 self
   -> contains'0 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  predicate acceptable'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 397 4 397 56] (self : Trail'0.t_trail) (t : Term'0.t_term) (val' : Value'0.t_value)

   =
    [%#span50] not contains'0 self (t, val')
    /\ sort'0 t = sort'1 val' /\ (is_bool'0 val'  -> not contains'0 self (t, negate'0 val'))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span51] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'0 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'0 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'0.t_trail) =
    [%#span52] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'1 j a  -> contains'0 tl a
        | _ -> true
        end
      end

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'0.t_trail) =
    [%#span53] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'0.t_trail) =
    [%#span54] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function count_bounds'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 740 4 740 35] (self : Trail'0.t_trail) : () =
    [%#span55] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign (Assign'0.C_Input _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Justified _ _ _) _ tl -> count_bounds'0 tl
      end

  axiom count_bounds'0_spec : forall self : Trail'0.t_trail . ([%#stheory5] invariant'0 self)
   -> ([%#stheory6] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a
   -> level_of'0 self a <= level'0 self)

  use Cdsat_Theory_Normal_Type as Normal'0

  predicate satisfied_by'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 674 4 674 47] (self : Trail'0.t_trail) (m : Model'0.t_model)

   =
    [%#span56] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a  -> satisfies'0 m a

  function restrict'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 558 4 558 45] (self : Trail'0.t_trail) (level : int) : Trail'0.t_trail

   =
    [%#span67] match self with
      | Trail'0.C_Empty -> Trail'0.C_Empty
      | Trail'0.C_Assign a l tl -> let tl = restrict'0 tl level in let _ = count_bounds'0 tl in if l <= level then
        Trail'0.C_Assign a l tl
      else
        tl

      end

  axiom restrict'0_spec : forall self : Trail'0.t_trail, level : int . ([%#span57] invariant'0 self)
   -> ([%#span58] level >= 0)
   -> ([%#span66] len'0 (restrict'0 self level) <= len'0 self)
  && ([%#span65] (level'0 self >= level  -> level'0 (restrict'0 self level) = level)
  /\ (level'0 self < level  -> level'0 (restrict'0 self level) = level'0 self))
  && ([%#span64] forall m : Model'0.t_model . inv'0 m
   -> satisfied_by'0 self m  -> satisfied_by'0 (restrict'0 self level) m)
  && ([%#span63] forall a : (Term'0.t_term, Value'0.t_value) . not contains'0 self a
   -> not contains'0 (restrict'0 self level) a)
  && ([%#span62] level >= level'0 self  -> restrict'0 self level = self)
  && ([%#span61] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 (restrict'0 self level) a
   -> contains'0 self a
  /\ level_of'0 (restrict'0 self level) a <= level /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span60] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a
   -> level_of'0 self a <= level
   -> contains'0 (restrict'0 self level) a /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span59] invariant'0 (restrict'0 self level))

  predicate unsat'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 681 4 681 30] (self : Trail'0.t_trail) =
    [%#span68] forall m : Model'0.t_model . inv'0 m  -> satisfied_by'0 (restrict'0 self 0) m  -> false

  predicate impls'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 694 4 694 41] (self : Trail'0.t_trail) (rhs : Trail'0.t_trail)

   =
    [%#span70] forall m : Model'0.t_model . inv'0 m
     -> satisfied_by'0 (restrict'0 self 0) m  -> satisfied_by'0 (restrict'0 rhs 0) m

  axiom impls'0_spec : forall self : Trail'0.t_trail, rhs : Trail'0.t_trail . [%#span69] impls'0 self rhs
   -> unsat'0 rhs  -> unsat'0 self

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span71] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'0 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate sound'1 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'0.t_trail)
   =
    [%#span72] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a _ tl -> sound'1 tl /\ justified_sound'0 a
      end

  use Cdsat_Theory_Normal_Type as Cdsat_Theory_Normal_Type

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 826 4 826 30] (self : Normal'0.t_normal)

   =
    [%#span73] sound'1 (Cdsat_Theory_Normal_Type.normal_0 self)

  constant self  : Normal'0.t_normal

  constant just  : (Fset.fset (Term'0.t_term, Value'0.t_value), Term'0.t_term, Value'0.t_value)

  constant tgt  : Normal'0.t_normal

  predicate deduce [#"/Users/xavier/Code/cdsat/src/theory.rs" 870 4 870 84] (self : Normal'0.t_normal) (just : (Fset.fset (Term'0.t_term, Value'0.t_value), Term'0.t_term, Value'0.t_value)) (tgt : Normal'0.t_normal)


  goal vc_deduce : ([%#stheory1] sound'0 self)
   -> ([%#stheory0] invariant'0 (Cdsat_Theory_Normal_Type.normal_0 self))
   -> ([%#stheory5] invariant'0 (Cdsat_Theory_Normal_Type.normal_0 self))
  /\ (([%#stheory6] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 (Cdsat_Theory_Normal_Type.normal_0 self) a
   -> level_of'0 (Cdsat_Theory_Normal_Type.normal_0 self) a <= level'0 (Cdsat_Theory_Normal_Type.normal_0 self))
   -> (let _ = count_bounds'0 (Cdsat_Theory_Normal_Type.normal_0 self) in if is_bool'0 (let (_, _, a) = just in a) then
    if acceptable'0 (Cdsat_Theory_Normal_Type.normal_0 self) (let (_, a, _) = just in a) (let (_, _, a) = just in a) then
      if [%#stheory8] forall j : (Term'0.t_term, Value'0.t_value) . contains'1 (let (a, _, _) = just in a) j
       -> contains'0 (Cdsat_Theory_Normal_Type.normal_0 self) j then
        if [%#stheory9] forall m : Model'0.t_model . inv'0 m
         -> entails'0 m (let (a, _, _) = just in a) ((let (_, a, _) = just in a), (let (_, _, a) = just in a)) then
          ([%#stheory10] invariant_nonneg'0 (Cdsat_Theory_Normal_Type.normal_0 self))
          /\ (([%#stheory15] set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) (let (a, _, _) = just in a)
          <= level'0 (Cdsat_Theory_Normal_Type.normal_0 self))
          && ([%#stheory14] set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) (let (a, _, _) = just in a) >= 0)
          && ([%#stheory13] (let (a, _, _) = just in a) = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
           -> set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) (let (a, _, _) = just in a) = 0)
          && ([%#stheory12] (let (a, _, _) = just in a) <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
           -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'1 (let (a, _, _) = just in a) i
          /\ level_of'0 (Cdsat_Theory_Normal_Type.normal_0 self) i
          = set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) (let (a, _, _) = just in a)))
          && ([%#stheory11] forall i : (Term'0.t_term, Value'0.t_value) . contains'1 (let (a, _, _) = just in a) i
           -> level_of'0 (Cdsat_Theory_Normal_Type.normal_0 self) i
          <= set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) (let (a, _, _) = just in a))
           -> (let result = Cdsat_Theory_Normal_Type.normal_0 tgt
          = Trail'0.C_Assign (Assign'0.C_Justified (let (a, _, _) = just in a) (let (_, a, _) = just in a) (let (_, _, a) = just in a)) (set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) (let (a, _, _) = just in a)) (Cdsat_Theory_Normal_Type.normal_0 self) in ([%#stheory4] result
           -> impls'0 (Cdsat_Theory_Normal_Type.normal_0 self) (Cdsat_Theory_Normal_Type.normal_0 tgt))
          && ([%#stheory3] result  -> sound'0 tgt)
          && ([%#stheory2] result  -> invariant'0 (Cdsat_Theory_Normal_Type.normal_0 tgt))))
        else
          let result = false in ([%#stheory4] result
           -> impls'0 (Cdsat_Theory_Normal_Type.normal_0 self) (Cdsat_Theory_Normal_Type.normal_0 tgt))
          && ([%#stheory3] result  -> sound'0 tgt)
          && ([%#stheory2] result  -> invariant'0 (Cdsat_Theory_Normal_Type.normal_0 tgt))

      else
        let result = false in ([%#stheory4] result
         -> impls'0 (Cdsat_Theory_Normal_Type.normal_0 self) (Cdsat_Theory_Normal_Type.normal_0 tgt))
        && ([%#stheory3] result  -> sound'0 tgt)
        && ([%#stheory2] result  -> invariant'0 (Cdsat_Theory_Normal_Type.normal_0 tgt))

    else
      let result = false in ([%#stheory4] result
       -> impls'0 (Cdsat_Theory_Normal_Type.normal_0 self) (Cdsat_Theory_Normal_Type.normal_0 tgt))
      && ([%#stheory3] result  -> sound'0 tgt)
      && ([%#stheory2] result  -> invariant'0 (Cdsat_Theory_Normal_Type.normal_0 tgt))

  else
    let result = false in ([%#stheory4] result
     -> impls'0 (Cdsat_Theory_Normal_Type.normal_0 self) (Cdsat_Theory_Normal_Type.normal_0 tgt))
    && ([%#stheory3] result  -> sound'0 tgt)
    && ([%#stheory2] result  -> invariant'0 (Cdsat_Theory_Normal_Type.normal_0 tgt))
  ))
end
module Cdsat_Theory_Impl6_Fail_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 908 15 908 35

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 909 15 909 27

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 910 4 910 33

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 911 4 911 92

  let%span stheory4 = "/Users/xavier/Code/cdsat/src/theory.rs" 912 4 912 41

  let%span stheory5 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span stheory6 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span stheory7 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span stheory8 = "/Users/xavier/Code/cdsat/src/theory.rs" 914 8 921 11

  let%span stheory9 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span stheory10 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span stheory11 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span stheory12 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span stheory13 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span stheory14 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span stheory15 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span stheory16 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span stheory17 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span20 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span21 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span22 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span23 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span24 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span25 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span26 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span28 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span29 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span30 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span31 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span32 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span33 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span34 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span35 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span36 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span37 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  let%span span38 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span39 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span40 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span41 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span42 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span43 = "/Users/xavier/Code/cdsat/src/theory.rs" 206 8 206 84

  let%span span44 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span45 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span46 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span47 = "/Users/xavier/Code/cdsat/src/theory.rs" 675 8 675 71

  let%span span48 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span49 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span50 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span51 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span52 = "/Users/xavier/Code/cdsat/src/theory.rs" 738 15 738 31

  let%span span53 = "/Users/xavier/Code/cdsat/src/theory.rs" 739 4 739 83

  let%span span54 = "/Users/xavier/Code/cdsat/src/theory.rs" 741 8 746 9

  let%span span55 = "/Users/xavier/Code/cdsat/src/theory.rs" 548 15 548 31

  let%span span56 = "/Users/xavier/Code/cdsat/src/theory.rs" 550 15 550 25

  let%span span57 = "/Users/xavier/Code/cdsat/src/theory.rs" 549 14 549 32

  let%span span58 = "/Users/xavier/Code/cdsat/src/theory.rs" 551 4 551 141

  let%span span59 = "/Users/xavier/Code/cdsat/src/theory.rs" 552 4 552 142

  let%span span60 = "/Users/xavier/Code/cdsat/src/theory.rs" 553 4 553 56

  let%span span61 = "/Users/xavier/Code/cdsat/src/theory.rs" 554 4 554 71

  let%span span62 = "/Users/xavier/Code/cdsat/src/theory.rs" 555 4 555 77

  let%span span63 = "/Users/xavier/Code/cdsat/src/theory.rs" 556 14 556 126

  let%span span64 = "/Users/xavier/Code/cdsat/src/theory.rs" 557 14 557 40

  let%span span65 = "/Users/xavier/Code/cdsat/src/theory.rs" 559 8 570 9

  let%span span66 = "/Users/xavier/Code/cdsat/src/theory.rs" 682 8 682 82

  let%span span67 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span68 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span69 = "/Users/xavier/Code/cdsat/src/theory.rs" 823 4 823 16

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span18] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span19] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'2 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use set.Fset

  use set.Fset

  use set.Fset

  use Cdsat_Theory_Term_Type as Term'0

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span20] Fset.remove a self

  use set.Fset

  use Cdsat_Theory_Trail_Type as Trail'0

  use Cdsat_Theory_Assign_Type as Assign'0

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span22] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span21] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span25] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span24] level'0 self <= len'0 self)
  && ([%#span23] level'0 self >= 0)

  use prelude.prelude.Int

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span26] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span27] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span28] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'1 a
      end

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span29] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span30] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span34] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span33] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span32] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span31] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span35] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#stheory9] invariant_nonneg'0 self)
   -> ([%#stheory10] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  use set.Fset

  predicate contains'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span36] Fset.mem e self

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span37] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#stheory11] invariant_nonneg'0 self)
   -> ([%#stheory16] set_level'0 self s <= level'0 self)
  && ([%#stheory15] set_level'0 self s >= 0)
  && ([%#stheory14] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#stheory13] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#stheory12] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 s i
   -> level_of'0 self i <= set_level'0 self s)

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span40] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span38] inv'0 self)
   -> ([%#span39] invariant'2 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span41] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span42] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 v a  -> satisfies'0 self a

  predicate entails'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 205 4 205 74] (self : Model'0.t_model) (j : Fset.fset (Term'0.t_term, Value'0.t_value)) (c : (Term'0.t_term, Value'0.t_value))

   =
    [%#span43] invariant'2 self  -> satisfy_set'0 self j  -> satisfies'0 self c

  predicate contains'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span44] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'1_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#stheory7] invariant_assign'0 self
   -> contains'1 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span45] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span46] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#stheory5] is_bool'0 self)
   -> ([%#stheory6] is_bool'0 (negate'0 self))

  use Cdsat_Theory_Normal_Type as Normal'0

  predicate satisfied_by'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 674 4 674 47] (self : Trail'0.t_trail) (m : Model'0.t_model)

   =
    [%#span47] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 self a  -> satisfies'0 m a

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span48] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'1 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'1 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'0.t_trail) =
    [%#span49] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'0 j a  -> contains'1 tl a
        | _ -> true
        end
      end

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'0.t_trail) =
    [%#span50] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'0.t_trail) =
    [%#span51] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function count_bounds'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 740 4 740 35] (self : Trail'0.t_trail) : () =
    [%#span54] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign (Assign'0.C_Input _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Justified _ _ _) _ tl -> count_bounds'0 tl
      end

  axiom count_bounds'0_spec : forall self : Trail'0.t_trail . ([%#span52] invariant'0 self)
   -> ([%#span53] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 self a  -> level_of'0 self a <= level'0 self)

  function restrict'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 558 4 558 45] (self : Trail'0.t_trail) (level : int) : Trail'0.t_trail

   =
    [%#span65] match self with
      | Trail'0.C_Empty -> Trail'0.C_Empty
      | Trail'0.C_Assign a l tl -> let tl = restrict'0 tl level in let _ = count_bounds'0 tl in if l <= level then
        Trail'0.C_Assign a l tl
      else
        tl

      end

  axiom restrict'0_spec : forall self : Trail'0.t_trail, level : int . ([%#span55] invariant'0 self)
   -> ([%#span56] level >= 0)
   -> ([%#span64] len'0 (restrict'0 self level) <= len'0 self)
  && ([%#span63] (level'0 self >= level  -> level'0 (restrict'0 self level) = level)
  /\ (level'0 self < level  -> level'0 (restrict'0 self level) = level'0 self))
  && ([%#span62] forall m : Model'0.t_model . inv'0 m
   -> satisfied_by'0 self m  -> satisfied_by'0 (restrict'0 self level) m)
  && ([%#span61] forall a : (Term'0.t_term, Value'0.t_value) . not contains'1 self a
   -> not contains'1 (restrict'0 self level) a)
  && ([%#span60] level >= level'0 self  -> restrict'0 self level = self)
  && ([%#span59] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (restrict'0 self level) a
   -> contains'1 self a
  /\ level_of'0 (restrict'0 self level) a <= level /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span58] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 self a
   -> level_of'0 self a <= level
   -> contains'1 (restrict'0 self level) a /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span57] invariant'0 (restrict'0 self level))

  predicate unsat'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 681 4 681 30] (self : Trail'0.t_trail) =
    [%#span66] forall m : Model'0.t_model . inv'0 m  -> satisfied_by'0 (restrict'0 self 0) m  -> false

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span67] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'0 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate sound'1 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'0.t_trail)
   =
    [%#span68] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a _ tl -> sound'1 tl /\ justified_sound'0 a
      end

  use Cdsat_Theory_Normal_Type as Cdsat_Theory_Normal_Type

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 826 4 826 30] (self : Normal'0.t_normal)

   =
    [%#span69] sound'1 (Cdsat_Theory_Normal_Type.normal_0 self)

  constant self  : Normal'0.t_normal

  constant just  : (Fset.fset (Term'0.t_term, Value'0.t_value), Term'0.t_term, Value'0.t_value)

  predicate fail [#"/Users/xavier/Code/cdsat/src/theory.rs" 913 4 913 71] (self : Normal'0.t_normal) (just : (Fset.fset (Term'0.t_term, Value'0.t_value), Term'0.t_term, Value'0.t_value))


  goal vc_fail : ([%#stheory3] forall m : Model'0.t_model . inv'0 m
   -> satisfy_set'0 m (let (a, _, _) = just in a)
   -> satisfies'0 m ((let (_, a, _) = just in a), (let (_, _, a) = just in a)))
   -> ([%#stheory2] is_bool'0 (let (_, _, a) = just in a))
   -> ([%#stheory1] sound'0 self)
   -> ([%#stheory0] invariant'0 (Cdsat_Theory_Normal_Type.normal_0 self))
   -> ([%#stheory5] is_bool'0 (let (_, _, a) = just in a))
  /\ (([%#stheory6] is_bool'0 (negate'0 (let (_, _, a) = just in a)))
   -> (let not_l = ((let (_, a, _) = just in a), negate'0 (let (_, _, a) = just in a)) in if [%#stheory8] forall j : (Term'0.t_term, Value'0.t_value) . contains'0 (let (a, _, _) = just in a) j
   -> contains'1 (Cdsat_Theory_Normal_Type.normal_0 self) j then
    ([%#stheory7] invariant_assign'0 (Cdsat_Theory_Normal_Type.normal_0 self)
     -> contains'1 (Cdsat_Theory_Normal_Type.normal_0 self) ((let (_, a, _) = just in a), (let (_, _, a) = just in a))
    = true
     -> sort'0 (let (a, _) = ((let (_, a, _) = just in a), (let (_, _, a) = just in a)) in a)
    = sort'1 (let (_, a) = ((let (_, a, _) = just in a), (let (_, _, a) = just in a)) in a))
     -> (if not contains'1 (Cdsat_Theory_Normal_Type.normal_0 self) ((let (_, a, _) = just in a), (let (_, _, a) = just in a)) then
      if [%#stheory8] forall m : Model'0.t_model . inv'0 m
       -> entails'0 m (let (a, _, _) = just in a) ((let (_, a, _) = just in a), (let (_, _, a) = just in a)) then
        ([%#stheory7] invariant_assign'0 (Cdsat_Theory_Normal_Type.normal_0 self)
         -> contains'1 (Cdsat_Theory_Normal_Type.normal_0 self) not_l = true
         -> sort'0 (let (a, _) = not_l in a) = sort'1 (let (_, a) = not_l in a))
         -> (if contains'1 (Cdsat_Theory_Normal_Type.normal_0 self) not_l then
          ([%#stheory9] invariant_nonneg'0 (Cdsat_Theory_Normal_Type.normal_0 self))
          /\ (([%#stheory10] level_of'0 (Cdsat_Theory_Normal_Type.normal_0 self) not_l >= 0
          /\ level_of'0 (Cdsat_Theory_Normal_Type.normal_0 self) not_l
          <= level'0 (Cdsat_Theory_Normal_Type.normal_0 self))
           -> (if level_of'0 (Cdsat_Theory_Normal_Type.normal_0 self) not_l = 0 then
            ([%#stheory11] invariant_nonneg'0 (Cdsat_Theory_Normal_Type.normal_0 self))
            /\ (([%#stheory16] set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) (let (a, _, _) = just in a)
            <= level'0 (Cdsat_Theory_Normal_Type.normal_0 self))
            && ([%#stheory15] set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) (let (a, _, _) = just in a) >= 0)
            && ([%#stheory14] (let (a, _, _) = just in a) = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
             -> set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) (let (a, _, _) = just in a) = 0)
            && ([%#stheory13] (let (a, _, _) = just in a) <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
             -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 (let (a, _, _) = just in a) i
            /\ level_of'0 (Cdsat_Theory_Normal_Type.normal_0 self) i
            = set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) (let (a, _, _) = just in a)))
            && ([%#stheory12] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 (let (a, _, _) = just in a) i
             -> level_of'0 (Cdsat_Theory_Normal_Type.normal_0 self) i
            <= set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) (let (a, _, _) = just in a))
             -> ([%#stheory4] set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) (let (a, _, _) = just in a) = 0
             -> unsat'0 (Cdsat_Theory_Normal_Type.normal_0 self)))
          else
            [%#stheory4] false  -> unsat'0 (Cdsat_Theory_Normal_Type.normal_0 self)
          ))
        else
          [%#stheory4] false  -> unsat'0 (Cdsat_Theory_Normal_Type.normal_0 self)
        )
      else
        [%#stheory4] false  -> unsat'0 (Cdsat_Theory_Normal_Type.normal_0 self)

    else
      [%#stheory4] false  -> unsat'0 (Cdsat_Theory_Normal_Type.normal_0 self)
    )
  else
    [%#stheory4] false  -> unsat'0 (Cdsat_Theory_Normal_Type.normal_0 self)
  ))
end
module Cdsat_Theory_Impl6_Fail2_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 927 15 927 35

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 928 15 928 27

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 929 4 929 41

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span stheory4 = "/Users/xavier/Code/cdsat/src/theory.rs" 933 8 937 11

  let%span stheory5 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span stheory6 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span stheory7 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span stheory8 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span stheory9 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span stheory10 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span stheory11 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span12 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span13 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span14 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span15 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span16 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span17 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span20 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span21 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span22 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span23 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span24 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span25 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span26 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span28 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span29 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span30 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span31 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span32 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span33 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  let%span span34 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span35 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span36 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span37 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span38 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span39 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span40 = "/Users/xavier/Code/cdsat/src/theory.rs" 675 8 675 71

  let%span span41 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span42 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span43 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span44 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span45 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span46 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span47 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span48 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span49 = "/Users/xavier/Code/cdsat/src/theory.rs" 738 15 738 31

  let%span span50 = "/Users/xavier/Code/cdsat/src/theory.rs" 739 4 739 83

  let%span span51 = "/Users/xavier/Code/cdsat/src/theory.rs" 741 8 746 9

  let%span span52 = "/Users/xavier/Code/cdsat/src/theory.rs" 548 15 548 31

  let%span span53 = "/Users/xavier/Code/cdsat/src/theory.rs" 550 15 550 25

  let%span span54 = "/Users/xavier/Code/cdsat/src/theory.rs" 549 14 549 32

  let%span span55 = "/Users/xavier/Code/cdsat/src/theory.rs" 551 4 551 141

  let%span span56 = "/Users/xavier/Code/cdsat/src/theory.rs" 552 4 552 142

  let%span span57 = "/Users/xavier/Code/cdsat/src/theory.rs" 553 4 553 56

  let%span span58 = "/Users/xavier/Code/cdsat/src/theory.rs" 554 4 554 71

  let%span span59 = "/Users/xavier/Code/cdsat/src/theory.rs" 555 4 555 77

  let%span span60 = "/Users/xavier/Code/cdsat/src/theory.rs" 556 14 556 126

  let%span span61 = "/Users/xavier/Code/cdsat/src/theory.rs" 557 14 557 40

  let%span span62 = "/Users/xavier/Code/cdsat/src/theory.rs" 559 8 570 9

  let%span span63 = "/Users/xavier/Code/cdsat/src/theory.rs" 682 8 682 82

  let%span span64 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span65 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span66 = "/Users/xavier/Code/cdsat/src/theory.rs" 823 4 823 16

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span12] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span13] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'2 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use set.Fset

  use Cdsat_Theory_Assign_Type as Assign'0

  use Cdsat_Theory_Trail_Type as Trail'0

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span15] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span14] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span18] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span17] level'0 self <= len'0 self)
  && ([%#span16] level'0 self >= 0)

  use set.Fset

  use prelude.prelude.Int

  use Cdsat_Theory_Term_Type as Term'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span19] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span20] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span21] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'1 a
      end

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span22] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span23] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span27] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span26] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span25] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span24] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span30] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span28] invariant_nonneg'0 self)
   -> ([%#span29] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  use set.Fset

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span31] Fset.remove a self

  use set.Fset

  use set.Fset

  predicate contains'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span32] Fset.mem e self

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span33] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#stheory5] invariant_nonneg'0 self)
   -> ([%#stheory10] set_level'0 self s <= level'0 self)
  && ([%#stheory9] set_level'0 self s >= 0)
  && ([%#stheory8] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#stheory7] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#stheory6] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 s i
   -> level_of'0 self i <= set_level'0 self s)

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span36] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span34] inv'0 self)
   -> ([%#span35] invariant'2 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span37] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span38] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 v a  -> satisfies'0 self a

  predicate contains'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span39] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'1_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#stheory3] invariant_assign'0 self
   -> contains'1 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  use Cdsat_Theory_Normal_Type as Normal'0

  predicate satisfied_by'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 674 4 674 47] (self : Trail'0.t_trail) (m : Model'0.t_model)

   =
    [%#span40] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 self a  -> satisfies'0 m a

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span41] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span44] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span42] is_bool'0 self)
   -> ([%#span43] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span45] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'1 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'1 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'0.t_trail) =
    [%#span46] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'0 j a  -> contains'1 tl a
        | _ -> true
        end
      end

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'0.t_trail) =
    [%#span47] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'0.t_trail) =
    [%#span48] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function count_bounds'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 740 4 740 35] (self : Trail'0.t_trail) : () =
    [%#span51] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign (Assign'0.C_Input _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Justified _ _ _) _ tl -> count_bounds'0 tl
      end

  axiom count_bounds'0_spec : forall self : Trail'0.t_trail . ([%#span49] invariant'0 self)
   -> ([%#span50] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 self a  -> level_of'0 self a <= level'0 self)

  function restrict'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 558 4 558 45] (self : Trail'0.t_trail) (level : int) : Trail'0.t_trail

   =
    [%#span62] match self with
      | Trail'0.C_Empty -> Trail'0.C_Empty
      | Trail'0.C_Assign a l tl -> let tl = restrict'0 tl level in let _ = count_bounds'0 tl in if l <= level then
        Trail'0.C_Assign a l tl
      else
        tl

      end

  axiom restrict'0_spec : forall self : Trail'0.t_trail, level : int . ([%#span52] invariant'0 self)
   -> ([%#span53] level >= 0)
   -> ([%#span61] len'0 (restrict'0 self level) <= len'0 self)
  && ([%#span60] (level'0 self >= level  -> level'0 (restrict'0 self level) = level)
  /\ (level'0 self < level  -> level'0 (restrict'0 self level) = level'0 self))
  && ([%#span59] forall m : Model'0.t_model . inv'0 m
   -> satisfied_by'0 self m  -> satisfied_by'0 (restrict'0 self level) m)
  && ([%#span58] forall a : (Term'0.t_term, Value'0.t_value) . not contains'1 self a
   -> not contains'1 (restrict'0 self level) a)
  && ([%#span57] level >= level'0 self  -> restrict'0 self level = self)
  && ([%#span56] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (restrict'0 self level) a
   -> contains'1 self a
  /\ level_of'0 (restrict'0 self level) a <= level /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span55] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 self a
   -> level_of'0 self a <= level
   -> contains'1 (restrict'0 self level) a /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span54] invariant'0 (restrict'0 self level))

  predicate unsat'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 681 4 681 30] (self : Trail'0.t_trail) =
    [%#span63] forall m : Model'0.t_model . inv'0 m  -> satisfied_by'0 (restrict'0 self 0) m  -> false

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span64] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'0 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate sound'1 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'0.t_trail)
   =
    [%#span65] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a _ tl -> sound'1 tl /\ justified_sound'0 a
      end

  use Cdsat_Theory_Normal_Type as Cdsat_Theory_Normal_Type

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 826 4 826 30] (self : Normal'0.t_normal)

   =
    [%#span66] sound'1 (Cdsat_Theory_Normal_Type.normal_0 self)

  constant self  : Normal'0.t_normal

  constant just  : Fset.fset (Term'0.t_term, Value'0.t_value)

  predicate fail2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 930 4 930 57] (self : Normal'0.t_normal) (just : Fset.fset (Term'0.t_term, Value'0.t_value))


  goal vc_fail2 : ([%#stheory1] sound'0 self)
   -> ([%#stheory0] invariant'0 (Cdsat_Theory_Normal_Type.normal_0 self))
   -> (if [%#stheory4] forall j : (Term'0.t_term, Value'0.t_value) . contains'0 just j
   -> contains'1 (Cdsat_Theory_Normal_Type.normal_0 self) j then
    if [%#stheory4] forall m : Model'0.t_model . inv'0 m  -> satisfy_set'0 m just  -> false then
      ([%#stheory5] invariant_nonneg'0 (Cdsat_Theory_Normal_Type.normal_0 self))
      /\ (([%#stheory10] set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) just
      <= level'0 (Cdsat_Theory_Normal_Type.normal_0 self))
      && ([%#stheory9] set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) just >= 0)
      && ([%#stheory8] just = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
       -> set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) just = 0)
      && ([%#stheory7] just <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
       -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 just i
      /\ level_of'0 (Cdsat_Theory_Normal_Type.normal_0 self) i
      = set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) just))
      && ([%#stheory6] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 just i
       -> level_of'0 (Cdsat_Theory_Normal_Type.normal_0 self) i
      <= set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) just)
       -> ([%#stheory2] set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) just = 0
       -> unsat'0 (Cdsat_Theory_Normal_Type.normal_0 self)))
    else
      [%#stheory2] false  -> unsat'0 (Cdsat_Theory_Normal_Type.normal_0 self)

  else
    [%#stheory2] false  -> unsat'0 (Cdsat_Theory_Normal_Type.normal_0 self)
  )
end
module Cdsat_Theory_Impl6_ConflictSolve_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 944 15 944 35

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 945 15 945 27

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 946 4 946 33

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 947 4 947 46

  let%span stheory4 = "/Users/xavier/Code/cdsat/src/theory.rs" 948 4 948 38

  let%span stheory5 = "/Users/xavier/Code/cdsat/src/theory.rs" 949 4 949 46

  let%span stheory6 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span stheory7 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span stheory8 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span stheory9 = "/Users/xavier/Code/cdsat/src/theory.rs" 951 8 961 11

  let%span stheory10 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span stheory11 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span stheory12 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span stheory13 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span stheory14 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span stheory15 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span stheory16 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span17 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span20 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span21 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span22 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span23 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span24 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span25 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span26 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span28 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span29 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span30 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span31 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span32 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span33 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span34 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span35 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span36 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span37 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span38 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  let%span span39 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span40 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span41 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span42 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span43 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span44 = "/Users/xavier/Code/cdsat/src/theory.rs" 206 8 206 84

  let%span span45 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span46 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 31 8 31 26

  let%span span47 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span48 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span49 = "/Users/xavier/Code/cdsat/src/theory.rs" 675 8 675 71

  let%span span50 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span51 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span52 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span53 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span54 = "/Users/xavier/Code/cdsat/src/theory.rs" 738 15 738 31

  let%span span55 = "/Users/xavier/Code/cdsat/src/theory.rs" 739 4 739 83

  let%span span56 = "/Users/xavier/Code/cdsat/src/theory.rs" 741 8 746 9

  let%span span57 = "/Users/xavier/Code/cdsat/src/theory.rs" 548 15 548 31

  let%span span58 = "/Users/xavier/Code/cdsat/src/theory.rs" 550 15 550 25

  let%span span59 = "/Users/xavier/Code/cdsat/src/theory.rs" 549 14 549 32

  let%span span60 = "/Users/xavier/Code/cdsat/src/theory.rs" 551 4 551 141

  let%span span61 = "/Users/xavier/Code/cdsat/src/theory.rs" 552 4 552 142

  let%span span62 = "/Users/xavier/Code/cdsat/src/theory.rs" 553 4 553 56

  let%span span63 = "/Users/xavier/Code/cdsat/src/theory.rs" 554 4 554 71

  let%span span64 = "/Users/xavier/Code/cdsat/src/theory.rs" 555 4 555 77

  let%span span65 = "/Users/xavier/Code/cdsat/src/theory.rs" 556 14 556 126

  let%span span66 = "/Users/xavier/Code/cdsat/src/theory.rs" 557 14 557 40

  let%span span67 = "/Users/xavier/Code/cdsat/src/theory.rs" 559 8 570 9

  let%span span68 = "/Users/xavier/Code/cdsat/src/theory.rs" 682 8 682 82

  let%span span69 = "/Users/xavier/Code/cdsat/src/theory.rs" 693 4 693 55

  let%span span70 = "/Users/xavier/Code/cdsat/src/theory.rs" 695 8 695 108

  let%span span71 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span72 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span73 = "/Users/xavier/Code/cdsat/src/theory.rs" 996 8 996 91

  let%span span74 = "/Users/xavier/Code/cdsat/src/theory.rs" 823 4 823 16

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span17] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span18] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'2 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use set.Fset

  use Cdsat_Theory_Assign_Type as Assign'0

  use Cdsat_Theory_Trail_Type as Trail'0

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span20] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span19] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span23] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span22] level'0 self <= len'0 self)
  && ([%#span21] level'0 self >= 0)

  use set.Fset

  use prelude.prelude.Int

  use Cdsat_Theory_Term_Type as Term'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span24] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span25] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span26] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'1 a
      end

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span27] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span28] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span32] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span31] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span30] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span29] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span35] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span33] invariant_nonneg'0 self)
   -> ([%#span34] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  use set.Fset

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span36] Fset.remove a self

  use set.Fset

  use set.Fset

  predicate contains'1 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span37] Fset.mem e self

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span38] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#stheory10] invariant_nonneg'0 self)
   -> ([%#stheory15] set_level'0 self s <= level'0 self)
  && ([%#stheory14] set_level'0 self s >= 0)
  && ([%#stheory13] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#stheory12] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'1 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#stheory11] forall i : (Term'0.t_term, Value'0.t_value) . contains'1 s i
   -> level_of'0 self i <= set_level'0 self s)

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span41] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span39] inv'0 self)
   -> ([%#span40] invariant'2 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span42] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span43] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 v a  -> satisfies'0 self a

  predicate entails'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 205 4 205 74] (self : Model'0.t_model) (j : Fset.fset (Term'0.t_term, Value'0.t_value)) (c : (Term'0.t_term, Value'0.t_value))

   =
    [%#span44] invariant'2 self  -> satisfy_set'0 self j  -> satisfies'0 self c

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span45] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#stheory8] invariant_assign'0 self
   -> contains'0 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  use set.Fset

  function insert'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span46] Fset.add e self

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span47] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span48] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#stheory6] is_bool'0 self)
   -> ([%#stheory7] is_bool'0 (negate'0 self))

  use Cdsat_Theory_Conflict_Type as Conflict'0

  use Cdsat_Theory_Normal_Type as Normal'0

  predicate satisfied_by'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 674 4 674 47] (self : Trail'0.t_trail) (m : Model'0.t_model)

   =
    [%#span49] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a  -> satisfies'0 m a

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span50] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'0 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'0 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'0.t_trail) =
    [%#span51] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'1 j a  -> contains'0 tl a
        | _ -> true
        end
      end

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'0.t_trail) =
    [%#span52] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'0.t_trail) =
    [%#span53] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function count_bounds'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 740 4 740 35] (self : Trail'0.t_trail) : () =
    [%#span56] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign (Assign'0.C_Input _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Justified _ _ _) _ tl -> count_bounds'0 tl
      end

  axiom count_bounds'0_spec : forall self : Trail'0.t_trail . ([%#span54] invariant'0 self)
   -> ([%#span55] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a  -> level_of'0 self a <= level'0 self)

  function restrict'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 558 4 558 45] (self : Trail'0.t_trail) (level : int) : Trail'0.t_trail

   =
    [%#span67] match self with
      | Trail'0.C_Empty -> Trail'0.C_Empty
      | Trail'0.C_Assign a l tl -> let tl = restrict'0 tl level in let _ = count_bounds'0 tl in if l <= level then
        Trail'0.C_Assign a l tl
      else
        tl

      end

  axiom restrict'0_spec : forall self : Trail'0.t_trail, level : int . ([%#span57] invariant'0 self)
   -> ([%#span58] level >= 0)
   -> ([%#span66] len'0 (restrict'0 self level) <= len'0 self)
  && ([%#span65] (level'0 self >= level  -> level'0 (restrict'0 self level) = level)
  /\ (level'0 self < level  -> level'0 (restrict'0 self level) = level'0 self))
  && ([%#span64] forall m : Model'0.t_model . inv'0 m
   -> satisfied_by'0 self m  -> satisfied_by'0 (restrict'0 self level) m)
  && ([%#span63] forall a : (Term'0.t_term, Value'0.t_value) . not contains'0 self a
   -> not contains'0 (restrict'0 self level) a)
  && ([%#span62] level >= level'0 self  -> restrict'0 self level = self)
  && ([%#span61] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 (restrict'0 self level) a
   -> contains'0 self a
  /\ level_of'0 (restrict'0 self level) a <= level /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span60] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a
   -> level_of'0 self a <= level
   -> contains'0 (restrict'0 self level) a /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span59] invariant'0 (restrict'0 self level))

  predicate unsat'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 681 4 681 30] (self : Trail'0.t_trail) =
    [%#span68] forall m : Model'0.t_model . inv'0 m  -> satisfied_by'0 (restrict'0 self 0) m  -> false

  predicate impls'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 694 4 694 41] (self : Trail'0.t_trail) (rhs : Trail'0.t_trail)

   =
    [%#span70] forall m : Model'0.t_model . inv'0 m
     -> satisfied_by'0 (restrict'0 self 0) m  -> satisfied_by'0 (restrict'0 rhs 0) m

  axiom impls'0_spec : forall self : Trail'0.t_trail, rhs : Trail'0.t_trail . [%#span69] impls'0 self rhs
   -> unsat'0 rhs  -> unsat'0 self

  use Cdsat_Theory_Conflict_Type as Cdsat_Theory_Conflict_Type

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span71] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'0 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate sound'2 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'0.t_trail)
   =
    [%#span72] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a _ tl -> sound'2 tl /\ justified_sound'0 a
      end

  predicate sound'1 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 995 4 995 30] (self : Conflict'0.t_conflict)

   =
    [%#span73] sound'2 (Cdsat_Theory_Conflict_Type.conflict_0 self)
    /\ (forall m : Model'0.t_model . inv'0 m  -> satisfy_set'0 m (Cdsat_Theory_Conflict_Type.conflict_1 self)  -> false)

  use Cdsat_Theory_Normal_Type as Cdsat_Theory_Normal_Type

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 826 4 826 30] (self : Normal'0.t_normal)

   =
    [%#span74] sound'2 (Cdsat_Theory_Normal_Type.normal_0 self)

  constant self  : Normal'0.t_normal

  constant just  : (Fset.fset (Term'0.t_term, Value'0.t_value), Term'0.t_term, Value'0.t_value)

  constant tgt  : Conflict'0.t_conflict

  predicate conflict_solve [#"/Users/xavier/Code/cdsat/src/theory.rs" 950 4 950 96] (self : Normal'0.t_normal) (just : (Fset.fset (Term'0.t_term, Value'0.t_value), Term'0.t_term, Value'0.t_value)) (tgt : Conflict'0.t_conflict)


  goal vc_conflict_solve : ([%#stheory2] is_bool'0 (let (_, _, a) = just in a))
   -> ([%#stheory1] sound'0 self)
   -> ([%#stheory0] invariant'0 (Cdsat_Theory_Normal_Type.normal_0 self))
   -> ([%#stheory6] is_bool'0 (let (_, _, a) = just in a))
  /\ (([%#stheory7] is_bool'0 (negate'0 (let (_, _, a) = just in a)))
   -> (let not_l = ((let (_, a, _) = just in a), negate'0 (let (_, _, a) = just in a)) in let conflict = insert'0 (let (a, _, _) = just in a) not_l in ([%#stheory8] invariant_assign'0 (Cdsat_Theory_Normal_Type.normal_0 self)
   -> contains'0 (Cdsat_Theory_Normal_Type.normal_0 self) not_l = true
   -> sort'0 (let (a, _) = not_l in a) = sort'1 (let (_, a) = not_l in a))
   -> (if contains'0 (Cdsat_Theory_Normal_Type.normal_0 self) not_l then
    if [%#stheory9] forall j : (Term'0.t_term, Value'0.t_value) . contains'1 (let (a, _, _) = just in a) j
     -> contains'0 (Cdsat_Theory_Normal_Type.normal_0 self) j then
      ([%#stheory8] invariant_assign'0 (Cdsat_Theory_Normal_Type.normal_0 self)
       -> contains'0 (Cdsat_Theory_Normal_Type.normal_0 self) ((let (_, a, _) = just in a), (let (_, _, a) = just in a))
      = true
       -> sort'0 (let (a, _) = ((let (_, a, _) = just in a), (let (_, _, a) = just in a)) in a)
      = sort'1 (let (_, a) = ((let (_, a, _) = just in a), (let (_, _, a) = just in a)) in a))
       -> (if not contains'0 (Cdsat_Theory_Normal_Type.normal_0 self) ((let (_, a, _) = just in a), (let (_, _, a) = just in a)) then
        if [%#stheory9] forall m : Model'0.t_model . inv'0 m
         -> entails'0 m (let (a, _, _) = just in a) ((let (_, a, _) = just in a), (let (_, _, a) = just in a)) then
          ([%#stheory10] invariant_nonneg'0 (Cdsat_Theory_Normal_Type.normal_0 self))
          /\ (([%#stheory15] set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) conflict
          <= level'0 (Cdsat_Theory_Normal_Type.normal_0 self))
          && ([%#stheory14] set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) conflict >= 0)
          && ([%#stheory13] conflict = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
           -> set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) conflict = 0)
          && ([%#stheory12] conflict <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
           -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'1 conflict i
          /\ level_of'0 (Cdsat_Theory_Normal_Type.normal_0 self) i
          = set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) conflict))
          && ([%#stheory11] forall i : (Term'0.t_term, Value'0.t_value) . contains'1 conflict i
           -> level_of'0 (Cdsat_Theory_Normal_Type.normal_0 self) i
          <= set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) conflict)
           -> (if set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) conflict > 0 then
            let result = tgt
            = Conflict'0.C_Conflict (Cdsat_Theory_Normal_Type.normal_0 self) conflict in ([%#stheory5] result
             -> impls'0 (Cdsat_Theory_Normal_Type.normal_0 self) (Cdsat_Theory_Conflict_Type.conflict_0 tgt))
            && ([%#stheory4] result  -> sound'1 tgt)
            && ([%#stheory3] result  -> invariant'0 (Cdsat_Theory_Conflict_Type.conflict_0 tgt))
          else
            let result = false in ([%#stheory5] result
             -> impls'0 (Cdsat_Theory_Normal_Type.normal_0 self) (Cdsat_Theory_Conflict_Type.conflict_0 tgt))
            && ([%#stheory4] result  -> sound'1 tgt)
            && ([%#stheory3] result  -> invariant'0 (Cdsat_Theory_Conflict_Type.conflict_0 tgt))
          ))
        else
          let result = false in ([%#stheory5] result
           -> impls'0 (Cdsat_Theory_Normal_Type.normal_0 self) (Cdsat_Theory_Conflict_Type.conflict_0 tgt))
          && ([%#stheory4] result  -> sound'1 tgt)
          && ([%#stheory3] result  -> invariant'0 (Cdsat_Theory_Conflict_Type.conflict_0 tgt))

      else
        let result = false in ([%#stheory5] result
         -> impls'0 (Cdsat_Theory_Normal_Type.normal_0 self) (Cdsat_Theory_Conflict_Type.conflict_0 tgt))
        && ([%#stheory4] result  -> sound'1 tgt)
        && ([%#stheory3] result  -> invariant'0 (Cdsat_Theory_Conflict_Type.conflict_0 tgt))
      )
    else
      let result = false in ([%#stheory5] result
       -> impls'0 (Cdsat_Theory_Normal_Type.normal_0 self) (Cdsat_Theory_Conflict_Type.conflict_0 tgt))
      && ([%#stheory4] result  -> sound'1 tgt)
      && ([%#stheory3] result  -> invariant'0 (Cdsat_Theory_Conflict_Type.conflict_0 tgt))

  else
    let result = false in ([%#stheory5] result
     -> impls'0 (Cdsat_Theory_Normal_Type.normal_0 self) (Cdsat_Theory_Conflict_Type.conflict_0 tgt))
    && ([%#stheory4] result  -> sound'1 tgt)
    && ([%#stheory3] result  -> invariant'0 (Cdsat_Theory_Conflict_Type.conflict_0 tgt))
  )))
end
module Cdsat_Theory_Impl6_ConflictSolve2_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 968 15 968 35

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 969 15 969 27

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 970 4 970 46

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 971 4 971 38

  let%span stheory4 = "/Users/xavier/Code/cdsat/src/theory.rs" 972 4 972 46

  let%span stheory5 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span stheory6 = "/Users/xavier/Code/cdsat/src/theory.rs" 974 8 979 11

  let%span stheory7 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span stheory8 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span stheory9 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span stheory10 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span stheory11 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span stheory12 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span stheory13 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span14 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span15 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span16 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span17 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span20 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span21 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span22 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span23 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span24 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span25 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span26 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span28 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span29 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span30 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span31 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span32 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span33 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span34 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span35 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  let%span span36 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span37 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span38 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span39 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span40 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span41 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span42 = "/Users/xavier/Code/cdsat/src/theory.rs" 675 8 675 71

  let%span span43 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span44 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span45 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span46 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span47 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span48 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span49 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span50 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span51 = "/Users/xavier/Code/cdsat/src/theory.rs" 738 15 738 31

  let%span span52 = "/Users/xavier/Code/cdsat/src/theory.rs" 739 4 739 83

  let%span span53 = "/Users/xavier/Code/cdsat/src/theory.rs" 741 8 746 9

  let%span span54 = "/Users/xavier/Code/cdsat/src/theory.rs" 548 15 548 31

  let%span span55 = "/Users/xavier/Code/cdsat/src/theory.rs" 550 15 550 25

  let%span span56 = "/Users/xavier/Code/cdsat/src/theory.rs" 549 14 549 32

  let%span span57 = "/Users/xavier/Code/cdsat/src/theory.rs" 551 4 551 141

  let%span span58 = "/Users/xavier/Code/cdsat/src/theory.rs" 552 4 552 142

  let%span span59 = "/Users/xavier/Code/cdsat/src/theory.rs" 553 4 553 56

  let%span span60 = "/Users/xavier/Code/cdsat/src/theory.rs" 554 4 554 71

  let%span span61 = "/Users/xavier/Code/cdsat/src/theory.rs" 555 4 555 77

  let%span span62 = "/Users/xavier/Code/cdsat/src/theory.rs" 556 14 556 126

  let%span span63 = "/Users/xavier/Code/cdsat/src/theory.rs" 557 14 557 40

  let%span span64 = "/Users/xavier/Code/cdsat/src/theory.rs" 559 8 570 9

  let%span span65 = "/Users/xavier/Code/cdsat/src/theory.rs" 682 8 682 82

  let%span span66 = "/Users/xavier/Code/cdsat/src/theory.rs" 693 4 693 55

  let%span span67 = "/Users/xavier/Code/cdsat/src/theory.rs" 695 8 695 108

  let%span span68 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span69 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span70 = "/Users/xavier/Code/cdsat/src/theory.rs" 996 8 996 91

  let%span span71 = "/Users/xavier/Code/cdsat/src/theory.rs" 823 4 823 16

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span14] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span15] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'2 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use set.Fset

  use Cdsat_Theory_Assign_Type as Assign'0

  use Cdsat_Theory_Trail_Type as Trail'0

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span17] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span16] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span20] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span19] level'0 self <= len'0 self)
  && ([%#span18] level'0 self >= 0)

  use set.Fset

  use prelude.prelude.Int

  use Cdsat_Theory_Term_Type as Term'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span21] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span22] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span23] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'1 a
      end

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span24] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span25] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span29] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span28] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span27] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span26] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span32] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span30] invariant_nonneg'0 self)
   -> ([%#span31] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  use set.Fset

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span33] Fset.remove a self

  use set.Fset

  use set.Fset

  predicate contains'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span34] Fset.mem e self

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span35] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#stheory7] invariant_nonneg'0 self)
   -> ([%#stheory12] set_level'0 self s <= level'0 self)
  && ([%#stheory11] set_level'0 self s >= 0)
  && ([%#stheory10] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#stheory9] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#stheory8] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 s i
   -> level_of'0 self i <= set_level'0 self s)

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span38] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span36] inv'0 self)
   -> ([%#span37] invariant'2 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span39] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span40] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 v a  -> satisfies'0 self a

  predicate contains'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span41] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'1_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#stheory5] invariant_assign'0 self
   -> contains'1 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  use Cdsat_Theory_Conflict_Type as Conflict'0

  use Cdsat_Theory_Normal_Type as Normal'0

  predicate satisfied_by'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 674 4 674 47] (self : Trail'0.t_trail) (m : Model'0.t_model)

   =
    [%#span42] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 self a  -> satisfies'0 m a

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span43] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span46] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span44] is_bool'0 self)
   -> ([%#span45] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span47] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'1 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'1 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'0.t_trail) =
    [%#span48] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'0 j a  -> contains'1 tl a
        | _ -> true
        end
      end

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'0.t_trail) =
    [%#span49] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'0.t_trail) =
    [%#span50] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function count_bounds'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 740 4 740 35] (self : Trail'0.t_trail) : () =
    [%#span53] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign (Assign'0.C_Input _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Justified _ _ _) _ tl -> count_bounds'0 tl
      end

  axiom count_bounds'0_spec : forall self : Trail'0.t_trail . ([%#span51] invariant'0 self)
   -> ([%#span52] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 self a  -> level_of'0 self a <= level'0 self)

  function restrict'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 558 4 558 45] (self : Trail'0.t_trail) (level : int) : Trail'0.t_trail

   =
    [%#span64] match self with
      | Trail'0.C_Empty -> Trail'0.C_Empty
      | Trail'0.C_Assign a l tl -> let tl = restrict'0 tl level in let _ = count_bounds'0 tl in if l <= level then
        Trail'0.C_Assign a l tl
      else
        tl

      end

  axiom restrict'0_spec : forall self : Trail'0.t_trail, level : int . ([%#span54] invariant'0 self)
   -> ([%#span55] level >= 0)
   -> ([%#span63] len'0 (restrict'0 self level) <= len'0 self)
  && ([%#span62] (level'0 self >= level  -> level'0 (restrict'0 self level) = level)
  /\ (level'0 self < level  -> level'0 (restrict'0 self level) = level'0 self))
  && ([%#span61] forall m : Model'0.t_model . inv'0 m
   -> satisfied_by'0 self m  -> satisfied_by'0 (restrict'0 self level) m)
  && ([%#span60] forall a : (Term'0.t_term, Value'0.t_value) . not contains'1 self a
   -> not contains'1 (restrict'0 self level) a)
  && ([%#span59] level >= level'0 self  -> restrict'0 self level = self)
  && ([%#span58] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (restrict'0 self level) a
   -> contains'1 self a
  /\ level_of'0 (restrict'0 self level) a <= level /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span57] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 self a
   -> level_of'0 self a <= level
   -> contains'1 (restrict'0 self level) a /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#span56] invariant'0 (restrict'0 self level))

  predicate unsat'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 681 4 681 30] (self : Trail'0.t_trail) =
    [%#span65] forall m : Model'0.t_model . inv'0 m  -> satisfied_by'0 (restrict'0 self 0) m  -> false

  predicate impls'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 694 4 694 41] (self : Trail'0.t_trail) (rhs : Trail'0.t_trail)

   =
    [%#span67] forall m : Model'0.t_model . inv'0 m
     -> satisfied_by'0 (restrict'0 self 0) m  -> satisfied_by'0 (restrict'0 rhs 0) m

  axiom impls'0_spec : forall self : Trail'0.t_trail, rhs : Trail'0.t_trail . [%#span66] impls'0 self rhs
   -> unsat'0 rhs  -> unsat'0 self

  use Cdsat_Theory_Conflict_Type as Cdsat_Theory_Conflict_Type

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span68] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'0 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate sound'2 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'0.t_trail)
   =
    [%#span69] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a _ tl -> sound'2 tl /\ justified_sound'0 a
      end

  predicate sound'1 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 995 4 995 30] (self : Conflict'0.t_conflict)

   =
    [%#span70] sound'2 (Cdsat_Theory_Conflict_Type.conflict_0 self)
    /\ (forall m : Model'0.t_model . inv'0 m  -> satisfy_set'0 m (Cdsat_Theory_Conflict_Type.conflict_1 self)  -> false)

  use Cdsat_Theory_Normal_Type as Cdsat_Theory_Normal_Type

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 826 4 826 30] (self : Normal'0.t_normal)

   =
    [%#span71] sound'2 (Cdsat_Theory_Normal_Type.normal_0 self)

  constant self  : Normal'0.t_normal

  constant conflict  : Fset.fset (Term'0.t_term, Value'0.t_value)

  constant tgt  : Conflict'0.t_conflict

  predicate conflict_solve2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 973 4 973 86] (self : Normal'0.t_normal) (conflict : Fset.fset (Term'0.t_term, Value'0.t_value)) (tgt : Conflict'0.t_conflict)


  goal vc_conflict_solve2 : ([%#stheory1] sound'0 self)
   -> ([%#stheory0] invariant'0 (Cdsat_Theory_Normal_Type.normal_0 self))
   -> (if [%#stheory6] forall j : (Term'0.t_term, Value'0.t_value) . contains'0 conflict j
   -> contains'1 (Cdsat_Theory_Normal_Type.normal_0 self) j then
    if [%#stheory6] forall m : Model'0.t_model . inv'0 m  -> satisfy_set'0 m conflict  -> false then
      ([%#stheory7] invariant_nonneg'0 (Cdsat_Theory_Normal_Type.normal_0 self))
      /\ (([%#stheory12] set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) conflict
      <= level'0 (Cdsat_Theory_Normal_Type.normal_0 self))
      && ([%#stheory11] set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) conflict >= 0)
      && ([%#stheory10] conflict = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
       -> set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) conflict = 0)
      && ([%#stheory9] conflict <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
       -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 conflict i
      /\ level_of'0 (Cdsat_Theory_Normal_Type.normal_0 self) i
      = set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) conflict))
      && ([%#stheory8] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 conflict i
       -> level_of'0 (Cdsat_Theory_Normal_Type.normal_0 self) i
      <= set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) conflict)
       -> (if set_level'0 (Cdsat_Theory_Normal_Type.normal_0 self) conflict > 0 then
        let result = tgt
        = Conflict'0.C_Conflict (Cdsat_Theory_Normal_Type.normal_0 self) conflict in ([%#stheory4] result
         -> impls'0 (Cdsat_Theory_Normal_Type.normal_0 self) (Cdsat_Theory_Conflict_Type.conflict_0 tgt))
        && ([%#stheory3] result  -> sound'1 tgt)
        && ([%#stheory2] result  -> invariant'0 (Cdsat_Theory_Conflict_Type.conflict_0 tgt))
      else
        let result = false in ([%#stheory4] result
         -> impls'0 (Cdsat_Theory_Normal_Type.normal_0 self) (Cdsat_Theory_Conflict_Type.conflict_0 tgt))
        && ([%#stheory3] result  -> sound'1 tgt)
        && ([%#stheory2] result  -> invariant'0 (Cdsat_Theory_Conflict_Type.conflict_0 tgt))
      ))
    else
      let result = false in ([%#stheory4] result
       -> impls'0 (Cdsat_Theory_Normal_Type.normal_0 self) (Cdsat_Theory_Conflict_Type.conflict_0 tgt))
      && ([%#stheory3] result  -> sound'1 tgt)
      && ([%#stheory2] result  -> invariant'0 (Cdsat_Theory_Conflict_Type.conflict_0 tgt))

  else
    let result = false in ([%#stheory4] result
     -> impls'0 (Cdsat_Theory_Normal_Type.normal_0 self) (Cdsat_Theory_Conflict_Type.conflict_0 tgt))
    && ([%#stheory3] result  -> sound'1 tgt)
    && ([%#stheory2] result  -> invariant'0 (Cdsat_Theory_Conflict_Type.conflict_0 tgt))
  )
end
module Cdsat_Theory_Impl7_Resolve_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 1043 15 1043 31

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 1044 15 1044 27

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 1045 4 1045 39

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 1046 4 1046 42

  let%span stheory4 = "/Users/xavier/Code/cdsat/src/theory.rs" 1047 4 1047 38

  let%span stheory5 = "/Users/xavier/Code/cdsat/src/theory.rs" 1048 4 1048 54

  let%span stheory6 = "/Users/xavier/Code/cdsat/src/theory.rs" 484 15 484 31

  let%span stheory7 = "/Users/xavier/Code/cdsat/src/theory.rs" 485 15 485 35

  let%span stheory8 = "/Users/xavier/Code/cdsat/src/theory.rs" 486 15 486 27

  let%span stheory9 = "/Users/xavier/Code/cdsat/src/theory.rs" 487 4 487 54

  let%span stheory10 = "/Users/xavier/Code/cdsat/src/theory.rs" 488 4 488 58

  let%span stheory11 = "/Users/xavier/Code/cdsat/src/theory.rs" 489 4 489 61

  let%span stheory12 = "/Users/xavier/Code/cdsat/src/theory.rs" 655 15 655 31

  let%span stheory13 = "/Users/xavier/Code/cdsat/src/theory.rs" 656 15 656 36

  let%span stheory14 = "/Users/xavier/Code/cdsat/src/theory.rs" 657 4 657 126

  let%span stheory15 = "/Users/xavier/Code/cdsat/src/theory.rs" 658 14 658 73

  let%span stheory16 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span stheory17 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span stheory18 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span stheory19 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span stheory20 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span stheory21 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span stheory22 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span stheory23 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span stheory24 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span stheory25 = "/Users/xavier/Code/cdsat/src/theory.rs" 1055 15 1055 154

  let%span span26 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span28 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span29 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span30 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span31 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span32 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span33 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span34 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span35 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span36 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span37 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span38 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span39 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span40 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span41 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span42 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span43 = "/Users/xavier/Code/cdsat/src/theory.rs" 211 4 211 61

  let%span span44 = "/Users/xavier/Code/cdsat/src/theory.rs" 212 15 212 39

  let%span span45 = "/Users/xavier/Code/cdsat/src/theory.rs" 213 15 213 32

  let%span span46 = "/Users/xavier/Code/cdsat/src/theory.rs" 216 8 216 12

  let%span span47 = "/Users/xavier/Code/cdsat/src/theory.rs" 214 14 214 60

  let%span span48 = "/Users/xavier/Code/cdsat/src/theory.rs" 209 4 209 12

  let%span span49 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span50 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span51 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span52 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span53 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span54 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span55 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span56 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span57 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  let%span span58 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span59 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span60 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span61 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span62 = "/Users/xavier/Code/cdsat/src/theory.rs" 616 15 616 27

  let%span span63 = "/Users/xavier/Code/cdsat/src/theory.rs" 617 15 617 32

  let%span span64 = "/Users/xavier/Code/cdsat/src/theory.rs" 618 4 618 90

  let%span span65 = "/Users/xavier/Code/cdsat/src/theory.rs" 620 8 629 9

  let%span span66 = "/Users/xavier/Code/cdsat/src/theory.rs" 512 8 515 9

  let%span span67 = "/Users/xavier/Code/cdsat/src/theory.rs" 522 8 525 9

  let%span span68 = "/Users/xavier/Code/cdsat/src/theory.rs" 206 8 206 84

  let%span span69 = "/Users/xavier/Code/cdsat/src/theory.rs" 502 8 505 9

  let%span span70 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span71 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span72 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span73 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span74 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span75 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span76 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span77 = "/Users/xavier/Code/cdsat/src/theory.rs" 491 8 491 30

  let%span span78 = "/Users/xavier/Code/cdsat/src/theory.rs" 660 8 669 9

  let%span span79 = "/Users/xavier/Code/cdsat/src/theory.rs" 999 4 999 12

  let%span span80 = "/Users/xavier/Code/cdsat/src/theory.rs" 996 8 996 91

  let%span span81 = "/Users/xavier/Code/cdsat/src/theory.rs" 989 8 989 131

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span26] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span27] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'2 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use set.Fset

  use set.Fset

  use Cdsat_Theory_Term_Type as Term'0

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span28] Fset.remove a self

  use set.Fset

  use Cdsat_Theory_Assign_Type as Assign'0

  use Cdsat_Theory_Trail_Type as Trail'0

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span30] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span29] len'0 self >= 0

  function level'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span33] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'1 tl
      | Trail'0.C_Assign _ _ tl -> level'1 tl
      end

  axiom level'1_spec : forall self : Trail'0.t_trail . ([%#span32] level'1 self <= len'0 self)
  && ([%#span31] level'1 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span34] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'1 self
      end

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span35] sort'1 self = Sort'0.C_Boolean

  use Cdsat_Theory_Conflict_Type as Cdsat_Theory_Conflict_Type

  use set.Fset

  predicate contains'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span36] Fset.mem e self

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span37] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span40] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span38] inv'0 self)
   -> ([%#span39] invariant'2 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span41] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span42] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 v a  -> satisfies'0 self a

  function resolve_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 215 4 220 5] (self : Model'0.t_model) (cflct : Fset.fset (Term'0.t_term, Value'0.t_value)) (just : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : ()

   =
    [%#span48] ()

  axiom resolve_sound'0_spec : forall self : Model'0.t_model, cflct : Fset.fset (Term'0.t_term, Value'0.t_value), just : Fset.fset (Term'0.t_term, Value'0.t_value), a : (Term'0.t_term, Value'0.t_value) . ([%#span43] satisfy_set'0 self just
   -> satisfies'0 self a)
   -> ([%#span44] not satisfy_set'0 self cflct)
   -> ([%#span45] contains'0 cflct a)
   -> ([%#span46] inv'0 self)  -> ([%#span47] not satisfy_set'0 self (Fset.union (remove'0 cflct a) just))

  use set.Fset

  use set.Fset

  use prelude.prelude.Int

  predicate invariant'3 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span49] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span50] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'3 a
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span51] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span55] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span54] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span53] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'1 self))
  && ([%#span52] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span56] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#stheory16] invariant_nonneg'0 self)
   -> ([%#stheory17] level_of'0 self d >= 0 /\ level_of'0 self d <= level'1 self)

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span57] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#stheory18] invariant_nonneg'0 self)
   -> ([%#stheory23] set_level'0 self s <= level'1 self)
  && ([%#stheory22] set_level'0 self s >= 0)
  && ([%#stheory21] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#stheory20] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#stheory19] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate contains'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span59] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'1_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span58] invariant_assign'0 self
   -> contains'1 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span60] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'0 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate sound'1 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'0.t_trail)
   =
    [%#span61] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a _ tl -> sound'1 tl /\ justified_sound'0 a
      end

  function find_justified'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 619 4 619 46] (self : Trail'0.t_trail) (kv : (Term'0.t_term, Value'0.t_value)) : ()

   =
    [%#span65] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = kv then () else find_justified'0 tl kv
      end

  axiom find_justified'0_spec : forall self : Trail'0.t_trail, kv : (Term'0.t_term, Value'0.t_value) . ([%#span62] sound'1 self)
   -> ([%#span63] contains'1 self kv)
   -> ([%#span64] forall l : int . forall a : Assign'0.t_assign . find'0 self kv = Option'0.C_Some (a, l)
   -> justified_sound'0 a)

  predicate is_decision'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 511 4 511 54] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span66] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Decision _ _, _) -> true
      | _ -> false
      end

  predicate is_input'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 521 4 521 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span67] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Input _ _, _) -> true
      | _ -> false
      end

  predicate entails'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 205 4 205 74] (self : Model'0.t_model) (j : Fset.fset (Term'0.t_term, Value'0.t_value)) (c : (Term'0.t_term, Value'0.t_value))

   =
    [%#span68] invariant'2 self  -> satisfy_set'0 self j  -> satisfies'0 self c

  predicate is_justified'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 501 4 501 55] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span69] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified _ _ _, _) -> true
      | _ -> false
      end

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span72] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span70] is_bool'0 self)
   -> ([%#span71] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span73] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'1 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'1 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'0.t_trail) =
    [%#span74] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'0 j a  -> contains'1 tl a
        | _ -> true
        end
      end

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'0.t_trail) =
    [%#span75] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'1 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'0.t_trail) =
    [%#span76] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function justification'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 490 4 490 71] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span77] let _ = find_justified'0 self d in match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified j _ _, _) -> j
      | _ -> Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)
      end

  axiom justification'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#stheory6] invariant'1 self)
   -> ([%#stheory7] is_justified'0 self d)
   -> ([%#stheory8] sound'1 self)
   -> ([%#stheory11] is_decision'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#stheory10] is_input'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#stheory9] forall m : Model'0.t_model . inv'0 m  -> entails'0 m (justification'0 self d) d)

  function justification_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 659 4 659 58] (self : Trail'0.t_trail) (kv : (Term'0.t_term, Value'0.t_value)) : ()

   =
    [%#span78] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = kv then () else justification_contains'0 tl kv
      end

  axiom justification_contains'0_spec : forall self : Trail'0.t_trail, kv : (Term'0.t_term, Value'0.t_value) . ([%#stheory12] invariant'1 self)
   -> ([%#stheory13] is_justified'0 self kv)
   -> ([%#stheory15] set_level'0 self (justification'0 self kv) = level_of'0 self kv)
  && ([%#stheory14] forall e : (Term'0.t_term, Value'0.t_value) . contains'0 (justification'0 self kv) e
   -> contains'1 self e /\ level_of'0 self e <= level_of'0 self kv)

  use Cdsat_Theory_Conflict_Type as Conflict'0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 1001 4 1001 29] (self : Conflict'0.t_conflict) : int =
    [%#span79] set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Conflict_Type.conflict_1 self)

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 995 4 995 30] (self : Conflict'0.t_conflict)

   =
    [%#span80] sound'1 (Cdsat_Theory_Conflict_Type.conflict_0 self)
    /\ (forall m : Model'0.t_model . inv'0 m  -> satisfy_set'0 m (Cdsat_Theory_Conflict_Type.conflict_1 self)  -> false)

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 988 4 988 34] (self : Conflict'0.t_conflict) =
    [%#span81] set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Conflict_Type.conflict_1 self) > 0
    /\ invariant'1 (Cdsat_Theory_Conflict_Type.conflict_0 self)
    /\ (forall a : (Term'0.t_term, Value'0.t_value) . contains'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) a
     -> contains'1 (Cdsat_Theory_Conflict_Type.conflict_0 self) a)

  constant self  : Conflict'0.t_conflict

  constant a  : (Term'0.t_term, Value'0.t_value)

  constant tgt  : Conflict'0.t_conflict

  predicate resolve [#"/Users/xavier/Code/cdsat/src/theory.rs" 1049 4 1049 61] (self : Conflict'0.t_conflict) (a : (Term'0.t_term, Value'0.t_value)) (tgt : Conflict'0.t_conflict)


  goal vc_resolve : ([%#stheory2] is_justified'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a)
   -> ([%#stheory1] sound'0 self)
   -> ([%#stheory0] invariant'0 self)
   -> (([%#stheory8] sound'1 (Cdsat_Theory_Conflict_Type.conflict_0 self))
  && ([%#stheory7] is_justified'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a)
  && ([%#stheory6] invariant'1 (Cdsat_Theory_Conflict_Type.conflict_0 self)))
  /\ (([%#stheory11] is_decision'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a
   -> justification'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a
  = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#stheory10] is_input'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a
   -> justification'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a
  = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#stheory9] forall m : Model'0.t_model . inv'0 m
   -> entails'0 m (justification'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a) a)
   -> (let just = justification'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a in (([%#stheory13] is_justified'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a)
  && ([%#stheory12] invariant'1 (Cdsat_Theory_Conflict_Type.conflict_0 self)))
  /\ (([%#stheory15] set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (justification'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a)
  = level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a)
  && ([%#stheory14] forall e : (Term'0.t_term, Value'0.t_value) . contains'0 (justification'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a) e
   -> contains'1 (Cdsat_Theory_Conflict_Type.conflict_0 self) e
  /\ level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e
  <= level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a)
   -> (let _ = justification_contains'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a in let _ = resolve_sound'0 in if contains'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) a then
    (forall a : (Term'0.t_term, Value'0.t_value) . if contains'0 just a then
      if not is_bool'0 (let (_, a) = a in a) then
        if is_decision'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a then
          ([%#stheory16] invariant_nonneg'0 (Cdsat_Theory_Conflict_Type.conflict_0 self))
          /\ (([%#stheory17] level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a >= 0
          /\ level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a
          <= level'1 (Cdsat_Theory_Conflict_Type.conflict_0 self))
           -> ([%#stheory18] invariant_nonneg'0 (Cdsat_Theory_Conflict_Type.conflict_0 self)))
        else
          true

      else
        true

    else
      true
    )
    /\ (if [%#stheory25] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 just a
    /\ not is_bool'0 (let (_, a) = a in a) /\ is_decision'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a
     -> level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a
    < set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Conflict_Type.conflict_1 self) then
      let result = tgt
      = Conflict'0.C_Conflict (Cdsat_Theory_Conflict_Type.conflict_0 self) (Fset.union (remove'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) a) just) in ([%#stheory5] result
       -> level'0 tgt = level'0 self)
      && ([%#stheory4] result  -> sound'0 tgt) && ([%#stheory3] result  -> invariant'0 tgt)
    else
      let result = false in ([%#stheory5] result  -> level'0 tgt = level'0 self)
      && ([%#stheory4] result  -> sound'0 tgt) && ([%#stheory3] result  -> invariant'0 tgt)
    )
  else
    let result = false in ([%#stheory5] result  -> level'0 tgt = level'0 self)
    && ([%#stheory4] result  -> sound'0 tgt) && ([%#stheory3] result  -> invariant'0 tgt)
  ))))
end
module Cdsat_Theory_Impl7_Backjump_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 1062 15 1062 31

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 1063 15 1063 27

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 1064 4 1064 44

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 1065 4 1065 38

  let%span stheory4 = "/Users/xavier/Code/cdsat/src/theory.rs" 1066 4 1066 46

  let%span stheory5 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span stheory6 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span stheory7 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span stheory8 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span stheory9 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span stheory10 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span stheory11 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span stheory12 = "/Users/xavier/Code/cdsat/src/theory.rs" 548 15 548 31

  let%span stheory13 = "/Users/xavier/Code/cdsat/src/theory.rs" 550 15 550 25

  let%span stheory14 = "/Users/xavier/Code/cdsat/src/theory.rs" 549 14 549 32

  let%span stheory15 = "/Users/xavier/Code/cdsat/src/theory.rs" 551 4 551 141

  let%span stheory16 = "/Users/xavier/Code/cdsat/src/theory.rs" 552 4 552 142

  let%span stheory17 = "/Users/xavier/Code/cdsat/src/theory.rs" 553 4 553 56

  let%span stheory18 = "/Users/xavier/Code/cdsat/src/theory.rs" 554 4 554 71

  let%span stheory19 = "/Users/xavier/Code/cdsat/src/theory.rs" 555 4 555 77

  let%span stheory20 = "/Users/xavier/Code/cdsat/src/theory.rs" 556 14 556 126

  let%span stheory21 = "/Users/xavier/Code/cdsat/src/theory.rs" 557 14 557 40

  let%span stheory22 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span stheory23 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span stheory24 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span stheory25 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span26 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span28 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span29 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span30 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span31 = "/Users/xavier/Code/cdsat/src/theory.rs" 60 8 60 36

  let%span span32 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span33 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span34 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span35 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span36 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span37 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span38 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span39 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span40 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span41 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span42 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span43 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span44 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span45 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span46 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span47 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span48 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span49 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span50 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span51 = "/Users/xavier/Code/cdsat/src/theory.rs" 675 8 675 71

  let%span span52 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span53 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span54 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span55 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span56 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span57 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  let%span span58 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span59 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span60 = "/Users/xavier/Code/cdsat/src/theory.rs" 738 15 738 31

  let%span span61 = "/Users/xavier/Code/cdsat/src/theory.rs" 739 4 739 83

  let%span span62 = "/Users/xavier/Code/cdsat/src/theory.rs" 741 8 746 9

  let%span span63 = "/Users/xavier/Code/cdsat/src/theory.rs" 559 8 570 9

  let%span span64 = "/Users/xavier/Code/cdsat/src/theory.rs" 225 15 225 40

  let%span span65 = "/Users/xavier/Code/cdsat/src/theory.rs" 226 15 226 40

  let%span span66 = "/Users/xavier/Code/cdsat/src/theory.rs" 227 15 227 31

  let%span span67 = "/Users/xavier/Code/cdsat/src/theory.rs" 229 17 229 21

  let%span span68 = "/Users/xavier/Code/cdsat/src/theory.rs" 228 14 228 71

  let%span span69 = "/Users/xavier/Code/cdsat/src/theory.rs" 230 8 233 9

  let%span span70 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span71 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span72 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span73 = "/Users/xavier/Code/cdsat/src/theory.rs" 996 8 996 91

  let%span span74 = "/Users/xavier/Code/cdsat/src/theory.rs" 989 8 989 131

  let%span span75 = "/Users/xavier/Code/cdsat/src/theory.rs" 1007 15 1007 31

  let%span span76 = "/Users/xavier/Code/cdsat/src/theory.rs" 1008 15 1008 27

  let%span span77 = "/Users/xavier/Code/cdsat/src/theory.rs" 1009 4 1009 37

  let%span span78 = "/Users/xavier/Code/cdsat/src/theory.rs" 1010 4 1010 51

  let%span span79 = "/Users/xavier/Code/cdsat/src/theory.rs" 1011 4 1011 108

  let%span span80 = "/Users/xavier/Code/cdsat/src/theory.rs" 1005 4 1005 12

  let%span span81 = "/Users/xavier/Code/cdsat/src/theory.rs" 107 15 107 29

  let%span span82 = "/Users/xavier/Code/cdsat/src/theory.rs" 108 14 108 44

  let%span span83 = "/Users/xavier/Code/cdsat/src/theory.rs" 105 4 105 12

  let%span span84 = "/Users/xavier/Code/cdsat/src/theory.rs" 771 15 771 31

  let%span span85 = "/Users/xavier/Code/cdsat/src/theory.rs" 772 15 772 33

  let%span span86 = "/Users/xavier/Code/cdsat/src/theory.rs" 773 15 773 23

  let%span span87 = "/Users/xavier/Code/cdsat/src/theory.rs" 774 14 774 65

  let%span span88 = "/Users/xavier/Code/cdsat/src/theory.rs" 776 8 779 9

  let%span span89 = "/Users/xavier/Code/cdsat/src/theory.rs" 784 15 784 31

  let%span span90 = "/Users/xavier/Code/cdsat/src/theory.rs" 785 15 785 31

  let%span span91 = "/Users/xavier/Code/cdsat/src/theory.rs" 786 4 786 30

  let%span span92 = "/Users/xavier/Code/cdsat/src/theory.rs" 787 14 787 49

  let%span span93 = "/Users/xavier/Code/cdsat/src/theory.rs" 789 8 798 9

  let%span span94 = "/Users/xavier/Code/cdsat/src/theory.rs" 702 15 702 27

  let%span span95 = "/Users/xavier/Code/cdsat/src/theory.rs" 703 14 703 42

  let%span span96 = "/Users/xavier/Code/cdsat/src/theory.rs" 705 8 710 9

  let%span span97 = "/Users/xavier/Code/cdsat/src/theory.rs" 682 8 682 82

  let%span span98 = "/Users/xavier/Code/cdsat/src/theory.rs" 693 4 693 55

  let%span span99 = "/Users/xavier/Code/cdsat/src/theory.rs" 695 8 695 108

  let%span span100 = "/Users/xavier/Code/cdsat/src/theory.rs" 823 4 823 16

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span26] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'3 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span27] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'3 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use Cdsat_Theory_Assign_Type as Assign'0

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span28] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span29] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#stheory24] is_bool'0 self)
   -> ([%#stheory25] is_bool'0 (negate'0 self))

  use Cdsat_Theory_Term_Type as Term'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span30] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  predicate is_bool'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 59 4 59 32] (self : Term'0.t_term) =
    [%#span31] sort'0 self = Sort'0.C_Boolean

  use Cdsat_Theory_Trail_Type as Trail'0

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span33] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span32] len'0 self >= 0

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span36] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span34] inv'0 self)
   -> ([%#span35] invariant'3 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span37] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  use prelude.prelude.Int

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span38] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span39] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'2 a
      end

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span42] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span41] level'0 self <= len'0 self)
  && ([%#span40] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span43] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span44] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span48] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span47] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span46] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span45] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  predicate contains'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span50] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'1_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span49] invariant_assign'0 self
   -> contains'1 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  predicate satisfied_by'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 674 4 674 47] (self : Trail'0.t_trail) (m : Model'0.t_model)

   =
    [%#span51] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 self a  -> satisfies'0 m a

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span52] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#stheory22] invariant_nonneg'0 self)
   -> ([%#stheory23] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span53] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'1 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'1 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  use set.Fset

  use set.Fset

  predicate contains'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span54] Fset.mem e self

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'0.t_trail) =
    [%#span55] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'0 j a  -> contains'1 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span56] Fset.remove a self

  use set.Fset

  use set.Fset

  use set.Fset

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span57] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#stheory5] invariant_nonneg'0 self)
   -> ([%#stheory10] set_level'0 self s <= level'0 self)
  && ([%#stheory9] set_level'0 self s >= 0)
  && ([%#stheory8] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#stheory7] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#stheory6] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'0.t_trail) =
    [%#span58] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'0.t_trail) =
    [%#span59] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function count_bounds'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 740 4 740 35] (self : Trail'0.t_trail) : () =
    [%#span62] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign (Assign'0.C_Input _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Justified _ _ _) _ tl -> count_bounds'0 tl
      end

  axiom count_bounds'0_spec : forall self : Trail'0.t_trail . ([%#span60] invariant'1 self)
   -> ([%#span61] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 self a  -> level_of'0 self a <= level'0 self)

  function restrict'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 558 4 558 45] (self : Trail'0.t_trail) (level : int) : Trail'0.t_trail

   =
    [%#span63] match self with
      | Trail'0.C_Empty -> Trail'0.C_Empty
      | Trail'0.C_Assign a l tl -> let tl = restrict'0 tl level in let _ = count_bounds'0 tl in if l <= level then
        Trail'0.C_Assign a l tl
      else
        tl

      end

  axiom restrict'0_spec : forall self : Trail'0.t_trail, level : int . ([%#stheory12] invariant'1 self)
   -> ([%#stheory13] level >= 0)
   -> ([%#stheory21] len'0 (restrict'0 self level) <= len'0 self)
  && ([%#stheory20] (level'0 self >= level  -> level'0 (restrict'0 self level) = level)
  /\ (level'0 self < level  -> level'0 (restrict'0 self level) = level'0 self))
  && ([%#stheory19] forall m : Model'0.t_model . inv'0 m
   -> satisfied_by'0 self m  -> satisfied_by'0 (restrict'0 self level) m)
  && ([%#stheory18] forall a : (Term'0.t_term, Value'0.t_value) . not contains'1 self a
   -> not contains'1 (restrict'0 self level) a)
  && ([%#stheory17] level >= level'0 self  -> restrict'0 self level = self)
  && ([%#stheory16] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (restrict'0 self level) a
   -> contains'1 self a
  /\ level_of'0 (restrict'0 self level) a <= level /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#stheory15] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 self a
   -> level_of'0 self a <= level
   -> contains'1 (restrict'0 self level) a /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#stheory14] invariant'1 (restrict'0 self level))

  function lemma'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 229 4 229 41] (self : Model'0.t_model) (t : Term'0.t_term) (v : Value'0.t_value) : ()

   =
    [%#span69] match interp'0 self t with
      | Value'0.C_Bool _ -> ()
      | _ -> ()
      end

  axiom lemma'0_spec : forall self : Model'0.t_model, t : Term'0.t_term, v : Value'0.t_value . ([%#span64] sort'1 v
  = Sort'0.C_Boolean)
   -> ([%#span65] sort'0 t = Sort'0.C_Boolean)
   -> ([%#span66] invariant'3 self)
   -> ([%#span67] inv'0 self)  -> ([%#span68] satisfies'0 self (t, v) \/ satisfies'0 self (t, negate'0 v))

  use Cdsat_Theory_Conflict_Type as Conflict'0

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span70] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 v a  -> satisfies'0 self a

  use Cdsat_Theory_Conflict_Type as Cdsat_Theory_Conflict_Type

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span71] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'0 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate sound'2 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'0.t_trail)
   =
    [%#span72] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a _ tl -> sound'2 tl /\ justified_sound'0 a
      end

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 995 4 995 30] (self : Conflict'0.t_conflict)

   =
    [%#span73] sound'2 (Cdsat_Theory_Conflict_Type.conflict_0 self)
    /\ (forall m : Model'0.t_model . inv'0 m  -> satisfy_set'0 m (Cdsat_Theory_Conflict_Type.conflict_1 self)  -> false)

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 988 4 988 34] (self : Conflict'0.t_conflict) =
    [%#span74] set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Conflict_Type.conflict_1 self) > 0
    /\ invariant'1 (Cdsat_Theory_Conflict_Type.conflict_0 self)
    /\ (forall a : (Term'0.t_term, Value'0.t_value) . contains'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) a
     -> contains'1 (Cdsat_Theory_Conflict_Type.conflict_0 self) a)

  function learn_justified'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 1012 4 1012 52] (self : Conflict'0.t_conflict) (ass : (Term'0.t_term, Value'0.t_value)) : ()

   =
    [%#span80] let _ = () in ()

  axiom learn_justified'0_spec : forall self : Conflict'0.t_conflict, ass : (Term'0.t_term, Value'0.t_value) . ([%#span75] invariant'0 self)
   -> ([%#span76] sound'0 self)
   -> ([%#span77] contains'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) ass)
   -> ([%#span78] is_bool'1 (let (a, _) = ass in a) /\ is_bool'0 (let (_, a) = ass in a))
   -> ([%#span79] forall m : Model'0.t_model . inv'0 m
   -> satisfy_set'0 m (remove'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) ass)
   -> satisfies'0 m ((let (a, _) = ass in a), negate'0 (let (_, a) = ass in a)))

  function negate_involutive'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 109 4 109 34] (self : Value'0.t_value) : () =
    [%#span83] ()

  axiom negate_involutive'0_spec : forall self : Value'0.t_value . ([%#span81] is_bool'0 self)
   -> ([%#span82] negate'0 (negate'0 self) = self)

  function restrict_idempotent'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 775 4 775 54] (self : Trail'0.t_trail) (l1 : int) (l2 : int) : ()

   =
    [%#span88] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign _ _ tl -> restrict_idempotent'0 tl l1 l2
      end

  axiom restrict_idempotent'0_spec : forall self : Trail'0.t_trail, l1 : int, l2 : int . ([%#span84] invariant'1 self)
   -> ([%#span85] l1 >= 0 /\ l2 >= 0)
   -> ([%#span86] l1 <= l2)  -> ([%#span87] restrict'0 self l1 = restrict'0 (restrict'0 self l2) l1)

  function trail_plausible'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 788 4 788 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : ()

   =
    [%#span93] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then () else let _ = trail_plausible'0 tl d in ()
      end

  axiom trail_plausible'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span89] invariant'1 self)
   -> ([%#span90] contains'1 self d)
   -> ([%#span91] is_bool'0 (let (_, a) = d in a))
   -> ([%#span92] not contains'1 self ((let (a, _) = d in a), negate'0 (let (_, a) = d in a)))

  function restrict_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 704 4 704 43] (self : Trail'0.t_trail) (level : int) : ()

   =
    [%#span96] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign a l tl -> let _ = restrict_sound'0 tl level in ()
      end

  axiom restrict_sound'0_spec : forall self : Trail'0.t_trail, level : int . ([%#span94] sound'2 self)
   -> ([%#span95] sound'2 (restrict'0 self level))

  use Cdsat_Theory_Normal_Type as Normal'0

  predicate unsat'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 681 4 681 30] (self : Trail'0.t_trail) =
    [%#span97] forall m : Model'0.t_model . inv'0 m  -> satisfied_by'0 (restrict'0 self 0) m  -> false

  predicate impls'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 694 4 694 41] (self : Trail'0.t_trail) (rhs : Trail'0.t_trail)

   =
    [%#span99] forall m : Model'0.t_model . inv'0 m
     -> satisfied_by'0 (restrict'0 self 0) m  -> satisfied_by'0 (restrict'0 rhs 0) m

  axiom impls'0_spec : forall self : Trail'0.t_trail, rhs : Trail'0.t_trail . [%#span98] impls'0 self rhs
   -> unsat'0 rhs  -> unsat'0 self

  use Cdsat_Theory_Normal_Type as Cdsat_Theory_Normal_Type

  predicate sound'1 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 826 4 826 30] (self : Normal'0.t_normal)

   =
    [%#span100] sound'2 (Cdsat_Theory_Normal_Type.normal_0 self)

  constant self  : Conflict'0.t_conflict

  constant l  : (Term'0.t_term, Value'0.t_value)

  constant tgt  : Normal'0.t_normal

  predicate backjump [#"/Users/xavier/Code/cdsat/src/theory.rs" 1067 4 1067 64] (self : Conflict'0.t_conflict) (l : (Term'0.t_term, Value'0.t_value)) (tgt : Normal'0.t_normal)


  goal vc_backjump : ([%#stheory1] sound'0 self)
   -> ([%#stheory0] invariant'0 self)
   -> (let e = remove'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) l in let _ = restrict_sound'0 in let _ = trail_plausible'0 in let _ = restrict_idempotent'0 in let _ = negate_involutive'0 in let _ = learn_justified'0 in ([%#stheory5] invariant_nonneg'0 (Cdsat_Theory_Conflict_Type.conflict_0 self))
  /\ (([%#stheory10] set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e
  <= level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self))
  && ([%#stheory9] set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e >= 0)
  && ([%#stheory8] e = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e = 0)
  && ([%#stheory7] e <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 e i
  /\ level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) i
  = set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e))
  && ([%#stheory6] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 e i
   -> level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) i
  <= set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e)
   -> (([%#stheory13] set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e >= 0)
  && ([%#stheory12] invariant'1 (Cdsat_Theory_Conflict_Type.conflict_0 self)))
  /\ (([%#stheory21] len'0 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e))
  <= len'0 (Cdsat_Theory_Conflict_Type.conflict_0 self))
  && ([%#stheory20] (level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self)
  >= set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e
   -> level'0 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e))
  = set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e)
  /\ (level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) < set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e
   -> level'0 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e))
  = level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self)))
  && ([%#stheory19] forall m : Model'0.t_model . inv'0 m
   -> satisfied_by'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) m
   -> satisfied_by'0 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e)) m)
  && ([%#stheory18] forall a : (Term'0.t_term, Value'0.t_value) . not contains'1 (Cdsat_Theory_Conflict_Type.conflict_0 self) a
   -> not contains'1 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e)) a)
  && ([%#stheory17] set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e
  >= level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self)
   -> restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e)
  = Cdsat_Theory_Conflict_Type.conflict_0 self)
  && ([%#stheory16] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e)) a
   -> contains'1 (Cdsat_Theory_Conflict_Type.conflict_0 self) a
  /\ level_of'0 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e)) a
  <= set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e
  /\ level_of'0 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e)) a
  = level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a)
  && ([%#stheory15] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (Cdsat_Theory_Conflict_Type.conflict_0 self) a
   -> level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a
  <= set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e
   -> contains'1 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e)) a
  /\ level_of'0 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e)) a
  = level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a)
  && ([%#stheory14] invariant'1 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e)))
   -> (let restricted = restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e) in if contains'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) l then
    if is_bool'0 (let (_, a) = l in a) then
      if is_bool'1 (let (a, _) = l in a) then
        ([%#stheory22] invariant_nonneg'0 (Cdsat_Theory_Conflict_Type.conflict_0 self))
        /\ (([%#stheory23] level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) l >= 0
        /\ level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) l
        <= level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self))
         -> ([%#stheory5] invariant_nonneg'0 (Cdsat_Theory_Conflict_Type.conflict_0 self))
        /\ (([%#stheory10] set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e
        <= level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self))
        && ([%#stheory9] set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e >= 0)
        && ([%#stheory8] e = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
         -> set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e = 0)
        && ([%#stheory7] e <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
         -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 e i
        /\ level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) i
        = set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e))
        && ([%#stheory6] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 e i
         -> level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) i
        <= set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e)
         -> (if level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) l
        > set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e then
          ([%#stheory24] is_bool'0 (let (_, a) = l in a))
          /\ (([%#stheory25] is_bool'0 (negate'0 (let (_, a) = l in a)))
           -> ([%#stheory5] invariant_nonneg'0 restricted)
          /\ (([%#stheory10] set_level'0 restricted e <= level'0 restricted)
          && ([%#stheory9] set_level'0 restricted e >= 0)
          && ([%#stheory8] e = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
           -> set_level'0 restricted e = 0)
          && ([%#stheory7] e <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
           -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 e i
          /\ level_of'0 restricted i = set_level'0 restricted e))
          && ([%#stheory6] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 e i
           -> level_of'0 restricted i <= set_level'0 restricted e)
           -> (let result = Cdsat_Theory_Normal_Type.normal_0 tgt
          = Trail'0.C_Assign (Assign'0.C_Justified e (let (a, _) = l in a) (negate'0 (let (_, a) = l in a))) (set_level'0 restricted e) restricted in ([%#stheory4] result
           -> impls'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Normal_Type.normal_0 tgt))
          && ([%#stheory3] result  -> sound'1 tgt)
          && ([%#stheory2] result  -> invariant'1 (Cdsat_Theory_Normal_Type.normal_0 tgt)))))
        else
          let result = false in ([%#stheory4] result
           -> impls'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Normal_Type.normal_0 tgt))
          && ([%#stheory3] result  -> sound'1 tgt)
          && ([%#stheory2] result  -> invariant'1 (Cdsat_Theory_Normal_Type.normal_0 tgt))
        )))
      else
        let result = false in ([%#stheory4] result
         -> impls'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Normal_Type.normal_0 tgt))
        && ([%#stheory3] result  -> sound'1 tgt)
        && ([%#stheory2] result  -> invariant'1 (Cdsat_Theory_Normal_Type.normal_0 tgt))

    else
      let result = false in ([%#stheory4] result
       -> impls'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Normal_Type.normal_0 tgt))
      && ([%#stheory3] result  -> sound'1 tgt)
      && ([%#stheory2] result  -> invariant'1 (Cdsat_Theory_Normal_Type.normal_0 tgt))

  else
    let result = false in ([%#stheory4] result
     -> impls'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Normal_Type.normal_0 tgt))
    && ([%#stheory3] result  -> sound'1 tgt)
    && ([%#stheory2] result  -> invariant'1 (Cdsat_Theory_Normal_Type.normal_0 tgt))
  ))))
end
module Cdsat_Theory_Impl7_Backjump2Pre_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 1089 4 1089 91

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span stheory4 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span stheory5 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span stheory6 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span stheory7 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span stheory8 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span stheory9 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span10 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span11 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span12 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span13 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span14 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span15 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span16 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span17 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span18 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span19 = "/Users/xavier/Code/cdsat/src/theory.rs" 60 8 60 36

  let%span span20 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span21 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span22 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span23 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span24 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span25 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span26 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span28 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span29 = "/Users/xavier/Code/cdsat/src/theory.rs" 996 8 996 91

  let%span span30 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span31 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span32 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span33 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span34 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span35 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span36 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span37 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span38 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span39 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span40 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span41 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span42 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span43 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span44 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span45 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span46 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  let%span span47 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span48 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span49 = "/Users/xavier/Code/cdsat/src/theory.rs" 989 8 989 131

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span10] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'3 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span11] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'0 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'3 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use set.Fset

  use set.Fset

  use Cdsat_Theory_Trail_Type as Trail'0

  use Cdsat_Theory_Assign_Type as Assign'0

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span13] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span12] len'0 self >= 0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span16] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'0 tl
      | Trail'0.C_Assign _ _ tl -> level'0 tl
      end

  axiom level'0_spec : forall self : Trail'0.t_trail . ([%#span15] level'0 self <= len'0 self)
  && ([%#span14] level'0 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span17] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'0 self
      end

  use Cdsat_Theory_Term_Type as Term'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span18] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'0 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  predicate is_bool'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 59 4 59 32] (self : Term'0.t_term) =
    [%#span19] sort'1 self = Sort'0.C_Boolean

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span20] sort'0 self = Sort'0.C_Boolean

  use set.Fset

  use set.Fset

  predicate contains'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span21] Fset.mem e self

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span24] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span22] inv'0 self)
   -> ([%#span23] invariant'3 self  -> sort'0 (interp'0 self t) = sort'1 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span25] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span26] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 v a  -> satisfies'0 self a

  use Cdsat_Theory_Conflict_Type as Cdsat_Theory_Conflict_Type

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span27] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'0 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate sound'1 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'0.t_trail)
   =
    [%#span28] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a _ tl -> sound'1 tl /\ justified_sound'0 a
      end

  use Cdsat_Theory_Conflict_Type as Conflict'0

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 995 4 995 30] (self : Conflict'0.t_conflict)

   =
    [%#span29] sound'1 (Cdsat_Theory_Conflict_Type.conflict_0 self)
    /\ (forall m : Model'0.t_model . inv'0 m  -> satisfy_set'0 m (Cdsat_Theory_Conflict_Type.conflict_1 self)  -> false)

  use prelude.prelude.Int

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span30] match self with
      | Assign'0.C_Decision t v -> sort'1 t = sort'0 v
      | Assign'0.C_Justified _ t v -> sort'1 t = sort'0 v /\ sort'1 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'1 t = sort'0 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span31] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'2 a
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span32] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span36] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span35] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'1 (let (a, _) = d in a) = sort'0 (let (_, a) = d in a)))
  && ([%#span34] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'0 self))
  && ([%#span33] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  predicate contains'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span38] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'1_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span37] invariant_assign'0 self
   -> contains'1 self d = true  -> sort'1 (let (a, _) = d in a) = sort'0 (let (_, a) = d in a)

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span41] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span39] is_bool'0 self)
   -> ([%#span40] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span42] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'1 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'1 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'0.t_trail) =
    [%#span43] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'0 j a  -> contains'1 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span44] Fset.remove a self

  use set.Fset

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span45] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#stheory1] invariant_nonneg'0 self)
   -> ([%#stheory2] level_of'0 self d >= 0 /\ level_of'0 self d <= level'0 self)

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span46] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#stheory3] invariant_nonneg'0 self)
   -> ([%#stheory8] set_level'0 self s <= level'0 self)
  && ([%#stheory7] set_level'0 self s >= 0)
  && ([%#stheory6] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#stheory5] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#stheory4] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'0.t_trail) =
    [%#span47] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'0 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'0.t_trail) =
    [%#span48] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 988 4 988 34] (self : Conflict'0.t_conflict) =
    [%#span49] set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Conflict_Type.conflict_1 self) > 0
    /\ invariant'1 (Cdsat_Theory_Conflict_Type.conflict_0 self)
    /\ (forall a : (Term'0.t_term, Value'0.t_value) . contains'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) a
     -> contains'1 (Cdsat_Theory_Conflict_Type.conflict_0 self) a)

  constant self  : Conflict'0.t_conflict

  constant l  : (Term'0.t_term, Value'0.t_value)

  predicate backjump2_pre [#"/Users/xavier/Code/cdsat/src/theory.rs" 1090 4 1090 56] (self : Conflict'0.t_conflict) (l : (Term'0.t_term, Value'0.t_value))


  goal vc_backjump2_pre : if invariant'0 self then
    if sound'0 self then
      if contains'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) l then
        if is_bool'0 (let (_, a) = l in a) then
          if is_bool'1 (let (a, _) = l in a) then
            ([%#stheory1] invariant_nonneg'0 (Cdsat_Theory_Conflict_Type.conflict_0 self))
            /\ (([%#stheory2] level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) l >= 0
            /\ level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) l
            <= level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self))
             -> ([%#stheory3] invariant_nonneg'0 (Cdsat_Theory_Conflict_Type.conflict_0 self))
            /\ (([%#stheory8] set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (remove'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) l)
            <= level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self))
            && ([%#stheory7] set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (remove'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) l)
            >= 0)
            && ([%#stheory6] remove'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) l
            = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
             -> set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (remove'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) l)
            = 0)
            && ([%#stheory5] remove'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) l
            <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
             -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 (remove'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) l) i
            /\ level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) i
            = set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (remove'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) l)))
            && ([%#stheory4] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 (remove'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) l) i
             -> level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) i
            <= set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (remove'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) l))
             -> ([%#stheory0] (level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) l
            > set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (remove'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) l))
            = true
             -> set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (remove'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) l)
            <= level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) l)))
          else
            [%#stheory0] false = true
             -> set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (remove'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) l)
            <= level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) l

        else
          [%#stheory0] false = true
           -> set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (remove'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) l)
          <= level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) l

      else
        [%#stheory0] false = true
         -> set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (remove'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) l)
        <= level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) l

    else
      [%#stheory0] false = true
       -> set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (remove'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) l)
      <= level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) l

  else
    [%#stheory0] false = true
     -> set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (remove'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) l)
    <= level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) l

end
module Cdsat_Theory_Impl7_UndoClear_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 1151 15 1151 31

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 1152 15 1152 27

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 1153 4 1153 44

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 1154 4 1154 38

  let%span stheory4 = "/Users/xavier/Code/cdsat/src/theory.rs" 1155 4 1155 46

  let%span stheory5 = "/Users/xavier/Code/cdsat/src/theory.rs" 702 15 702 27

  let%span stheory6 = "/Users/xavier/Code/cdsat/src/theory.rs" 703 14 703 42

  let%span stheory7 = "/Users/xavier/Code/cdsat/src/theory.rs" 771 15 771 31

  let%span stheory8 = "/Users/xavier/Code/cdsat/src/theory.rs" 772 15 772 33

  let%span stheory9 = "/Users/xavier/Code/cdsat/src/theory.rs" 773 15 773 23

  let%span stheory10 = "/Users/xavier/Code/cdsat/src/theory.rs" 774 14 774 65

  let%span stheory11 = "/Users/xavier/Code/cdsat/src/theory.rs" 1157 8 1163 11

  let%span stheory12 = "/Users/xavier/Code/cdsat/src/theory.rs" 548 15 548 31

  let%span stheory13 = "/Users/xavier/Code/cdsat/src/theory.rs" 550 15 550 25

  let%span stheory14 = "/Users/xavier/Code/cdsat/src/theory.rs" 549 14 549 32

  let%span stheory15 = "/Users/xavier/Code/cdsat/src/theory.rs" 551 4 551 141

  let%span stheory16 = "/Users/xavier/Code/cdsat/src/theory.rs" 552 4 552 142

  let%span stheory17 = "/Users/xavier/Code/cdsat/src/theory.rs" 553 4 553 56

  let%span stheory18 = "/Users/xavier/Code/cdsat/src/theory.rs" 554 4 554 71

  let%span stheory19 = "/Users/xavier/Code/cdsat/src/theory.rs" 555 4 555 77

  let%span stheory20 = "/Users/xavier/Code/cdsat/src/theory.rs" 556 14 556 126

  let%span stheory21 = "/Users/xavier/Code/cdsat/src/theory.rs" 557 14 557 40

  let%span span22 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span23 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span24 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span25 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span26 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span27 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span28 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span29 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span30 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span31 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span32 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span33 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span span34 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span35 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span36 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span37 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span38 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span39 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span40 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span41 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span42 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span43 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span44 = "/Users/xavier/Code/cdsat/src/theory.rs" 675 8 675 71

  let%span span45 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span span46 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span span47 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span48 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span49 = "/Users/xavier/Code/cdsat/src/theory.rs" 272 12 274 67

  let%span span50 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span51 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span52 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span span53 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span span54 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span55 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span56 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span57 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span58 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span59 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span60 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span61 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span62 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span63 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span64 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  let%span span65 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span66 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span67 = "/Users/xavier/Code/cdsat/src/theory.rs" 738 15 738 31

  let%span span68 = "/Users/xavier/Code/cdsat/src/theory.rs" 739 4 739 83

  let%span span69 = "/Users/xavier/Code/cdsat/src/theory.rs" 741 8 746 9

  let%span span70 = "/Users/xavier/Code/cdsat/src/theory.rs" 559 8 570 9

  let%span span71 = "/Users/xavier/Code/cdsat/src/theory.rs" 776 8 779 9

  let%span span72 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span73 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span74 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span75 = "/Users/xavier/Code/cdsat/src/theory.rs" 705 8 710 9

  let%span span76 = "/Users/xavier/Code/cdsat/src/theory.rs" 999 4 999 12

  let%span span77 = "/Users/xavier/Code/cdsat/src/theory.rs" 682 8 682 82

  let%span span78 = "/Users/xavier/Code/cdsat/src/theory.rs" 693 4 693 55

  let%span span79 = "/Users/xavier/Code/cdsat/src/theory.rs" 695 8 695 108

  let%span span80 = "/Users/xavier/Code/cdsat/src/theory.rs" 823 4 823 16

  let%span span81 = "/Users/xavier/Code/cdsat/src/theory.rs" 996 8 996 91

  let%span span82 = "/Users/xavier/Code/cdsat/src/theory.rs" 989 8 989 131

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span22] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'3 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span23] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'0 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'3 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use Cdsat_Theory_Trail_Type as Trail'0

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span25] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span24] len'0 self >= 0

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  use Cdsat_Theory_Term_Type as Term'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span26] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'0 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span29] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span27] inv'0 self)
   -> ([%#span28] invariant'3 self  -> sort'0 (interp'0 self t) = sort'1 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span30] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  use prelude.prelude.Int

  use Cdsat_Theory_Assign_Type as Assign'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span31] match self with
      | Assign'0.C_Decision t v -> sort'1 t = sort'0 v
      | Assign'0.C_Justified _ t v -> sort'1 t = sort'0 v /\ sort'1 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'1 t = sort'0 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span32] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'2 a
      end

  function level'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span35] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'1 tl
      | Trail'0.C_Assign _ _ tl -> level'1 tl
      end

  axiom level'1_spec : forall self : Trail'0.t_trail . ([%#span34] level'1 self <= len'0 self)
  && ([%#span33] level'1 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span36] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'1 self
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span37] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span41] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span40] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'1 (let (a, _) = d in a) = sort'0 (let (_, a) = d in a)))
  && ([%#span39] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'1 self))
  && ([%#span38] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  predicate contains'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span43] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'1_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span42] invariant_assign'0 self
   -> contains'1 self d = true  -> sort'1 (let (a, _) = d in a) = sort'0 (let (_, a) = d in a)

  predicate satisfied_by'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 674 4 674 47] (self : Trail'0.t_trail) (m : Model'0.t_model)

   =
    [%#span44] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 self a  -> satisfies'0 m a

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span47] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span45] invariant_nonneg'0 self)
   -> ([%#span46] level_of'0 self d >= 0 /\ level_of'0 self d <= level'1 self)

  use set.Fset

  use set.Fset

  predicate contains'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span48] Fset.mem e self

  use set.Fset

  predicate is_set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 270 4 270 69] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) (m : int)

   =
    [%#span49] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)) /\ m = 0
    \/ (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 s i /\ level_of'0 self i = m)
    /\ (forall i : (Term'0.t_term, Value'0.t_value) . contains'0 s i  -> level_of'0 self i <= m)

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span50] sort'0 self = Sort'0.C_Boolean

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span51] Fset.remove a self

  use Cdsat_Theory_Conflict_Type as Cdsat_Theory_Conflict_Type

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span54] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#span52] is_bool'0 self)
   -> ([%#span53] is_bool'0 (negate'0 self))

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span55] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'1 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'1 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'0.t_trail) =
    [%#span56] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'0 j a  -> contains'1 tl a
        | _ -> true
        end
      end

  use set.Fset

  use set.Fset

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span64] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#span57] invariant_nonneg'0 self)
   -> ([%#span62] set_level'0 self s <= level'1 self)
  && ([%#span61] set_level'0 self s >= 0)
  && ([%#span60] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#span59] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'0 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span58] forall i : (Term'0.t_term, Value'0.t_value) . contains'0 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'0.t_trail) =
    [%#span65] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'1 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'0.t_trail) =
    [%#span66] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function count_bounds'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 740 4 740 35] (self : Trail'0.t_trail) : () =
    [%#span69] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign (Assign'0.C_Input _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Justified _ _ _) _ tl -> count_bounds'0 tl
      end

  axiom count_bounds'0_spec : forall self : Trail'0.t_trail . ([%#span67] invariant'1 self)
   -> ([%#span68] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 self a  -> level_of'0 self a <= level'1 self)

  function restrict'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 558 4 558 45] (self : Trail'0.t_trail) (level : int) : Trail'0.t_trail

   =
    [%#span70] match self with
      | Trail'0.C_Empty -> Trail'0.C_Empty
      | Trail'0.C_Assign a l tl -> let tl = restrict'0 tl level in let _ = count_bounds'0 tl in if l <= level then
        Trail'0.C_Assign a l tl
      else
        tl

      end

  axiom restrict'0_spec : forall self : Trail'0.t_trail, level : int . ([%#stheory12] invariant'1 self)
   -> ([%#stheory13] level >= 0)
   -> ([%#stheory21] len'0 (restrict'0 self level) <= len'0 self)
  && ([%#stheory20] (level'1 self >= level  -> level'1 (restrict'0 self level) = level)
  /\ (level'1 self < level  -> level'1 (restrict'0 self level) = level'1 self))
  && ([%#stheory19] forall m : Model'0.t_model . inv'0 m
   -> satisfied_by'0 self m  -> satisfied_by'0 (restrict'0 self level) m)
  && ([%#stheory18] forall a : (Term'0.t_term, Value'0.t_value) . not contains'1 self a
   -> not contains'1 (restrict'0 self level) a)
  && ([%#stheory17] level >= level'1 self  -> restrict'0 self level = self)
  && ([%#stheory16] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (restrict'0 self level) a
   -> contains'1 self a
  /\ level_of'0 (restrict'0 self level) a <= level /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#stheory15] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 self a
   -> level_of'0 self a <= level
   -> contains'1 (restrict'0 self level) a /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#stheory14] invariant'1 (restrict'0 self level))

  function restrict_idempotent'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 775 4 775 54] (self : Trail'0.t_trail) (l1 : int) (l2 : int) : ()

   =
    [%#span71] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign _ _ tl -> restrict_idempotent'0 tl l1 l2
      end

  axiom restrict_idempotent'0_spec : forall self : Trail'0.t_trail, l1 : int, l2 : int . ([%#stheory7] invariant'1 self)
   -> ([%#stheory8] l1 >= 0 /\ l2 >= 0)
   -> ([%#stheory9] l1 <= l2)  -> ([%#stheory10] restrict'0 self l1 = restrict'0 (restrict'0 self l2) l1)

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span72] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 v a  -> satisfies'0 self a

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span73] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'0 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate sound'2 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'0.t_trail)
   =
    [%#span74] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a _ tl -> sound'2 tl /\ justified_sound'0 a
      end

  function restrict_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 704 4 704 43] (self : Trail'0.t_trail) (level : int) : ()

   =
    [%#span75] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign a l tl -> let _ = restrict_sound'0 tl level in ()
      end

  axiom restrict_sound'0_spec : forall self : Trail'0.t_trail, level : int . ([%#stheory5] sound'2 self)
   -> ([%#stheory6] sound'2 (restrict'0 self level))

  use Cdsat_Theory_Conflict_Type as Conflict'0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 1001 4 1001 29] (self : Conflict'0.t_conflict) : int =
    [%#span76] set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Conflict_Type.conflict_1 self)

  use Cdsat_Theory_Normal_Type as Normal'0

  predicate unsat'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 681 4 681 30] (self : Trail'0.t_trail) =
    [%#span77] forall m : Model'0.t_model . inv'0 m  -> satisfied_by'0 (restrict'0 self 0) m  -> false

  predicate impls'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 694 4 694 41] (self : Trail'0.t_trail) (rhs : Trail'0.t_trail)

   =
    [%#span79] forall m : Model'0.t_model . inv'0 m
     -> satisfied_by'0 (restrict'0 self 0) m  -> satisfied_by'0 (restrict'0 rhs 0) m

  axiom impls'0_spec : forall self : Trail'0.t_trail, rhs : Trail'0.t_trail . [%#span78] impls'0 self rhs
   -> unsat'0 rhs  -> unsat'0 self

  use Cdsat_Theory_Normal_Type as Cdsat_Theory_Normal_Type

  predicate sound'1 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 826 4 826 30] (self : Normal'0.t_normal)

   =
    [%#span80] sound'2 (Cdsat_Theory_Normal_Type.normal_0 self)

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 995 4 995 30] (self : Conflict'0.t_conflict)

   =
    [%#span81] sound'2 (Cdsat_Theory_Conflict_Type.conflict_0 self)
    /\ (forall m : Model'0.t_model . inv'0 m  -> satisfy_set'0 m (Cdsat_Theory_Conflict_Type.conflict_1 self)  -> false)

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 988 4 988 34] (self : Conflict'0.t_conflict) =
    [%#span82] set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Conflict_Type.conflict_1 self) > 0
    /\ invariant'1 (Cdsat_Theory_Conflict_Type.conflict_0 self)
    /\ (forall a : (Term'0.t_term, Value'0.t_value) . contains'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) a
     -> contains'1 (Cdsat_Theory_Conflict_Type.conflict_0 self) a)

  constant self  : Conflict'0.t_conflict

  constant a  : (Term'0.t_term, Value'0.t_value)

  constant tgt  : Normal'0.t_normal

  predicate undo_clear [#"/Users/xavier/Code/cdsat/src/theory.rs" 1156 4 1156 66] (self : Conflict'0.t_conflict) (a : (Term'0.t_term, Value'0.t_value)) (tgt : Normal'0.t_normal)


  goal vc_undo_clear : ([%#stheory1] sound'0 self)
   -> ([%#stheory0] invariant'0 self)
   -> ([%#stheory5] sound'2 (Cdsat_Theory_Conflict_Type.conflict_0 self))
  /\ (([%#stheory6] sound'2 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (level'0 self - 1)))
   -> (let _ = restrict_sound'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (level'0 self - 1) in (([%#stheory9] 0
  <= level'0 self - 1)
  && ([%#stheory8] 0 >= 0 /\ level'0 self - 1 >= 0)
  && ([%#stheory7] invariant'1 (Cdsat_Theory_Conflict_Type.conflict_0 self)))
  /\ (([%#stheory10] restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) 0
  = restrict'0 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (level'0 self - 1)) 0)
   -> (let _ = restrict_idempotent'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) 0 (level'0 self
  - 1) in let e = remove'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) a in if contains'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) a then
    if not is_bool'0 (let (_, a) = a in a) then
      if [%#stheory11] exists l : int . l >= 0
      /\ level'0 self > l /\ is_set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) e l then
        (([%#stheory13] level'0 self - 1 >= 0)
        && ([%#stheory12] invariant'1 (Cdsat_Theory_Conflict_Type.conflict_0 self)))
        /\ (([%#stheory21] len'0 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (level'0 self - 1))
        <= len'0 (Cdsat_Theory_Conflict_Type.conflict_0 self))
        && ([%#stheory20] (level'1 (Cdsat_Theory_Conflict_Type.conflict_0 self) >= level'0 self - 1
         -> level'1 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (level'0 self - 1)) = level'0 self - 1)
        /\ (level'1 (Cdsat_Theory_Conflict_Type.conflict_0 self) < level'0 self - 1
         -> level'1 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (level'0 self - 1))
        = level'1 (Cdsat_Theory_Conflict_Type.conflict_0 self)))
        && ([%#stheory19] forall m : Model'0.t_model . inv'0 m
         -> satisfied_by'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) m
         -> satisfied_by'0 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (level'0 self - 1)) m)
        && ([%#stheory18] forall a : (Term'0.t_term, Value'0.t_value) . not contains'1 (Cdsat_Theory_Conflict_Type.conflict_0 self) a
         -> not contains'1 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (level'0 self - 1)) a)
        && ([%#stheory17] level'0 self - 1 >= level'1 (Cdsat_Theory_Conflict_Type.conflict_0 self)
         -> restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (level'0 self - 1)
        = Cdsat_Theory_Conflict_Type.conflict_0 self)
        && ([%#stheory16] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (level'0 self
        - 1)) a
         -> contains'1 (Cdsat_Theory_Conflict_Type.conflict_0 self) a
        /\ level_of'0 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (level'0 self - 1)) a <= level'0 self - 1
        /\ level_of'0 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (level'0 self - 1)) a
        = level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a)
        && ([%#stheory15] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (Cdsat_Theory_Conflict_Type.conflict_0 self) a
         -> level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a <= level'0 self - 1
         -> contains'1 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (level'0 self - 1)) a
        /\ level_of'0 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (level'0 self - 1)) a
        = level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a)
        && ([%#stheory14] invariant'1 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (level'0 self - 1)))
         -> (let result = Cdsat_Theory_Normal_Type.normal_0 tgt
        = restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (level'0 self - 1) in ([%#stheory4] result
         -> impls'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Normal_Type.normal_0 tgt))
        && ([%#stheory3] result  -> sound'1 tgt)
        && ([%#stheory2] result  -> invariant'1 (Cdsat_Theory_Normal_Type.normal_0 tgt))))
      else
        let result = false in ([%#stheory4] result
         -> impls'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Normal_Type.normal_0 tgt))
        && ([%#stheory3] result  -> sound'1 tgt)
        && ([%#stheory2] result  -> invariant'1 (Cdsat_Theory_Normal_Type.normal_0 tgt))

    else
      let result = false in ([%#stheory4] result
       -> impls'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Normal_Type.normal_0 tgt))
      && ([%#stheory3] result  -> sound'1 tgt)
      && ([%#stheory2] result  -> invariant'1 (Cdsat_Theory_Normal_Type.normal_0 tgt))

  else
    let result = false in ([%#stheory4] result
     -> impls'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Normal_Type.normal_0 tgt))
    && ([%#stheory3] result  -> sound'1 tgt)
    && ([%#stheory2] result  -> invariant'1 (Cdsat_Theory_Normal_Type.normal_0 tgt))
  ))))
end
module Cdsat_Theory_Impl7_UndoDecide_Impl
  let%span stheory0 = "/Users/xavier/Code/cdsat/src/theory.rs" 1169 15 1169 31

  let%span stheory1 = "/Users/xavier/Code/cdsat/src/theory.rs" 1170 15 1170 27

  let%span stheory2 = "/Users/xavier/Code/cdsat/src/theory.rs" 1171 4 1171 39

  let%span stheory3 = "/Users/xavier/Code/cdsat/src/theory.rs" 1172 4 1172 44

  let%span stheory4 = "/Users/xavier/Code/cdsat/src/theory.rs" 1173 4 1173 38

  let%span stheory5 = "/Users/xavier/Code/cdsat/src/theory.rs" 1174 4 1174 46

  let%span stheory6 = "/Users/xavier/Code/cdsat/src/theory.rs" 484 15 484 31

  let%span stheory7 = "/Users/xavier/Code/cdsat/src/theory.rs" 485 15 485 35

  let%span stheory8 = "/Users/xavier/Code/cdsat/src/theory.rs" 486 15 486 27

  let%span stheory9 = "/Users/xavier/Code/cdsat/src/theory.rs" 487 4 487 54

  let%span stheory10 = "/Users/xavier/Code/cdsat/src/theory.rs" 488 4 488 58

  let%span stheory11 = "/Users/xavier/Code/cdsat/src/theory.rs" 489 4 489 61

  let%span stheory12 = "/Users/xavier/Code/cdsat/src/theory.rs" 548 15 548 31

  let%span stheory13 = "/Users/xavier/Code/cdsat/src/theory.rs" 550 15 550 25

  let%span stheory14 = "/Users/xavier/Code/cdsat/src/theory.rs" 549 14 549 32

  let%span stheory15 = "/Users/xavier/Code/cdsat/src/theory.rs" 551 4 551 141

  let%span stheory16 = "/Users/xavier/Code/cdsat/src/theory.rs" 552 4 552 142

  let%span stheory17 = "/Users/xavier/Code/cdsat/src/theory.rs" 553 4 553 56

  let%span stheory18 = "/Users/xavier/Code/cdsat/src/theory.rs" 554 4 554 71

  let%span stheory19 = "/Users/xavier/Code/cdsat/src/theory.rs" 555 4 555 77

  let%span stheory20 = "/Users/xavier/Code/cdsat/src/theory.rs" 556 14 556 126

  let%span stheory21 = "/Users/xavier/Code/cdsat/src/theory.rs" 557 14 557 40

  let%span stheory22 = "/Users/xavier/Code/cdsat/src/theory.rs" 406 15 406 38

  let%span stheory23 = "/Users/xavier/Code/cdsat/src/theory.rs" 407 14 407 51

  let%span stheory24 = "/Users/xavier/Code/cdsat/src/theory.rs" 1180 8 1187 11

  let%span stheory25 = "/Users/xavier/Code/cdsat/src/theory.rs" 96 15 96 29

  let%span stheory26 = "/Users/xavier/Code/cdsat/src/theory.rs" 97 14 97 30

  let%span stheory27 = "/Users/xavier/Code/cdsat/src/theory.rs" 594 14 594 25

  let%span stheory28 = "/Users/xavier/Code/cdsat/src/theory.rs" 595 14 595 34

  let%span span29 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span30 = "/Users/xavier/Code/cdsat/src/theory.rs" 157 8 159 9

  let%span span31 = "/Users/xavier/Code/cdsat/src/theory.rs" 82 8 82 36

  let%span span32 = "/Users/xavier/Code/cdsat/src/theory.rs" 99 8 102 9

  let%span span33 = "/Users/xavier/Code/cdsat/src/theory.rs" 607 14 607 25

  let%span span34 = "/Users/xavier/Code/cdsat/src/theory.rs" 609 8 612 9

  let%span span35 = "/Users/xavier/Code/cdsat/src/theory.rs" 598 8 602 9

  let%span span36 = "/Users/xavier/Code/cdsat/src/theory.rs" 337 8 340 9

  let%span span37 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 16 8 16 26

  let%span span38 = "/Users/xavier/Code/cdsat/src/theory.rs" 17 8 25 9

  let%span span39 = "/Users/xavier/Code/cdsat/src/theory.rs" 167 18 167 22

  let%span span40 = "/Users/xavier/Code/cdsat/src/theory.rs" 166 4 166 62

  let%span span41 = "/Users/xavier/Code/cdsat/src/theory.rs" 168 8 188 9

  let%span span42 = "/Users/xavier/Code/cdsat/src/theory.rs" 194 8 194 31

  let%span span43 = "/Users/xavier/Code/cdsat/src/theory.rs" 122 8 126 9

  let%span span44 = "/Users/xavier/Code/cdsat/src/theory.rs" 346 8 349 9

  let%span span45 = "/Users/xavier/Code/cdsat/src/theory.rs" 132 8 136 9

  let%span span46 = "/Users/xavier/Code/cdsat/src/theory.rs" 463 14 466 5

  let%span span47 = "/Users/xavier/Code/cdsat/src/theory.rs" 467 4 467 111

  let%span span48 = "/Users/xavier/Code/cdsat/src/theory.rs" 468 4 468 104

  let%span span49 = "/Users/xavier/Code/cdsat/src/theory.rs" 470 8 479 9

  let%span span50 = "/Users/xavier/Code/cdsat/src/theory.rs" 417 4 417 87

  let%span span51 = "/Users/xavier/Code/cdsat/src/theory.rs" 419 8 422 9

  let%span span52 = "/Users/xavier/Code/cdsat/src/theory.rs" 675 8 675 71

  let%span span53 = "/Users/xavier/Code/cdsat/src/theory.rs" 409 8 412 9

  let%span span54 = "/Users/xavier/Code/cdsat/src/theory.rs" 374 8 382 9

  let%span span55 = "/Users/xavier/Code/cdsat/src/theory.rs" 355 8 368 9

  let%span span56 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/fset.rs" 53 8 53 26

  let%span span57 = "/Users/xavier/Code/cdsat/src/theory.rs" 281 15 281 38

  let%span span58 = "/Users/xavier/Code/cdsat/src/theory.rs" 282 4 282 74

  let%span span59 = "/Users/xavier/Code/cdsat/src/theory.rs" 283 4 283 94

  let%span span60 = "/Users/xavier/Code/cdsat/src/theory.rs" 284 4 284 48

  let%span span61 = "/Users/xavier/Code/cdsat/src/theory.rs" 285 14 285 25

  let%span span62 = "/Users/xavier/Code/cdsat/src/theory.rs" 286 14 286 36

  let%span span63 = "/Users/xavier/Code/cdsat/src/theory.rs" 280 14 280 21

  let%span span64 = "/Users/xavier/Code/cdsat/src/theory.rs" 278 4 278 12

  let%span span65 = "/Users/xavier/Code/cdsat/src/theory.rs" 321 8 331 9

  let%span span66 = "/Users/xavier/Code/cdsat/src/theory.rs" 388 8 392 38

  let%span span67 = "/Users/xavier/Code/cdsat/src/theory.rs" 738 15 738 31

  let%span span68 = "/Users/xavier/Code/cdsat/src/theory.rs" 739 4 739 83

  let%span span69 = "/Users/xavier/Code/cdsat/src/theory.rs" 741 8 746 9

  let%span span70 = "/Users/xavier/Code/cdsat/src/theory.rs" 559 8 570 9

  let%span span71 = "/Users/xavier/Code/cdsat/src/theory.rs" 999 4 999 12

  let%span span72 = "/Users/xavier/Code/cdsat/src/theory.rs" 512 8 515 9

  let%span span73 = "/Users/xavier/Code/cdsat/src/theory.rs" 522 8 525 9

  let%span span74 = "/Users/xavier/Code/cdsat/src/theory.rs" 200 8 200 71

  let%span span75 = "/Users/xavier/Code/cdsat/src/theory.rs" 206 8 206 84

  let%span span76 = "/Users/xavier/Code/cdsat/src/theory.rs" 142 8 147 9

  let%span span77 = "/Users/xavier/Code/cdsat/src/theory.rs" 262 8 265 9

  let%span span78 = "/Users/xavier/Code/cdsat/src/theory.rs" 616 15 616 27

  let%span span79 = "/Users/xavier/Code/cdsat/src/theory.rs" 617 15 617 32

  let%span span80 = "/Users/xavier/Code/cdsat/src/theory.rs" 618 4 618 90

  let%span span81 = "/Users/xavier/Code/cdsat/src/theory.rs" 620 8 629 9

  let%span span82 = "/Users/xavier/Code/cdsat/src/theory.rs" 502 8 505 9

  let%span span83 = "/Users/xavier/Code/cdsat/src/theory.rs" 491 8 491 30

  let%span span84 = "/Users/xavier/Code/cdsat/src/theory.rs" 107 15 107 29

  let%span span85 = "/Users/xavier/Code/cdsat/src/theory.rs" 108 14 108 44

  let%span span86 = "/Users/xavier/Code/cdsat/src/theory.rs" 105 4 105 12

  let%span span87 = "/Users/xavier/Code/cdsat/src/theory.rs" 784 15 784 31

  let%span span88 = "/Users/xavier/Code/cdsat/src/theory.rs" 785 15 785 31

  let%span span89 = "/Users/xavier/Code/cdsat/src/theory.rs" 786 4 786 30

  let%span span90 = "/Users/xavier/Code/cdsat/src/theory.rs" 787 14 787 49

  let%span span91 = "/Users/xavier/Code/cdsat/src/theory.rs" 789 8 798 9

  let%span span92 = "/Users/xavier/Code/cdsat/src/theory.rs" 751 15 751 25

  let%span span93 = "/Users/xavier/Code/cdsat/src/theory.rs" 752 15 752 31

  let%span span94 = "/Users/xavier/Code/cdsat/src/theory.rs" 753 15 753 31

  let%span span95 = "/Users/xavier/Code/cdsat/src/theory.rs" 754 15 754 39

  let%span span96 = "/Users/xavier/Code/cdsat/src/theory.rs" 755 14 755 47

  let%span span97 = "/Users/xavier/Code/cdsat/src/theory.rs" 757 8 766 9

  let%span span98 = "/Users/xavier/Code/cdsat/src/theory.rs" 702 15 702 27

  let%span span99 = "/Users/xavier/Code/cdsat/src/theory.rs" 703 14 703 42

  let%span span100 = "/Users/xavier/Code/cdsat/src/theory.rs" 705 8 710 9

  let%span span101 = "/Users/xavier/Code/cdsat/src/theory.rs" 682 8 682 82

  let%span span102 = "/Users/xavier/Code/cdsat/src/theory.rs" 693 4 693 55

  let%span span103 = "/Users/xavier/Code/cdsat/src/theory.rs" 695 8 695 108

  let%span span104 = "/Users/xavier/Code/cdsat/src/theory.rs" 823 4 823 16

  let%span span105 = "/Users/xavier/Code/cdsat/src/theory.rs" 996 8 996 91

  let%span span106 = "/Users/xavier/Code/cdsat/src/theory.rs" 989 8 989 131

  use Cdsat_Theory_Sort_Type as Sort'0

  use Cdsat_Theory_Value_Type as Value'0

  function sort'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'0.t_value) : Sort'0.t_sort =
    [%#span29] match self with
      | Value'0.C_Bool _ -> Sort'0.C_Boolean
      | Value'0.C_Rat _ -> Sort'0.C_Rational
      end

  use Cdsat_Theory_Var_Type as Cdsat_Theory_Var_Type

  use map.Map

  use Cdsat_Theory_Model_Type as Cdsat_Theory_Model_Type

  use Cdsat_Theory_Var_Type as Var'0

  use Cdsat_Theory_Model_Type as Model'0

  predicate invariant'2 [#"/Users/xavier/Code/cdsat/src/theory.rs" 156 4 156 30] (self : Model'0.t_model) =
    [%#span30] forall v : Value'0.t_value . forall k : Var'0.t_var . Map.get (Cdsat_Theory_Model_Type.model_0 self) k
    = v  -> Cdsat_Theory_Var_Type.var_1 k = sort'1 v

  predicate inv'0 (_x : Model'0.t_model)

  axiom inv'0 : forall x : Model'0.t_model . inv'0 x
  = (invariant'2 x
  /\ match x with
    | Model'0.C_Model a_0 -> true
    end)

  use Cdsat_Theory_Assign_Type as Assign'0

  predicate is_bool'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 81 4 81 32] (self : Value'0.t_value) =
    [%#span31] sort'1 self = Sort'0.C_Boolean

  function negate'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 98 4 98 31] (self : Value'0.t_value) : Value'0.t_value =
    [%#span32] match self with
      | Value'0.C_Bool b -> Value'0.C_Bool (not b)
      | _ -> self
      end

  axiom negate'0_spec : forall self : Value'0.t_value . ([%#stheory25] is_bool'0 self)
   -> ([%#stheory26] is_bool'0 (negate'0 self))

  use Cdsat_Theory_Trail_Type as Trail'0

  use prelude.prelude.Int

  function len'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 608 4 608 27] (self : Trail'0.t_trail) : int =
    [%#span34] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign _ _ tl -> len'0 tl + 1
      end

  axiom len'0_spec : forall self : Trail'0.t_trail . [%#span33] len'0 self >= 0

  function level'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 597 4 597 29] (self : Trail'0.t_trail) : int =
    [%#span35] match self with
      | Trail'0.C_Empty -> 0
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> 1 + level'1 tl
      | Trail'0.C_Assign _ _ tl -> level'1 tl
      end

  axiom level'1_spec : forall self : Trail'0.t_trail . ([%#stheory28] level'1 self <= len'0 self)
  && ([%#stheory27] level'1 self >= 0)

  predicate invariant_nonneg'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 336 4 336 41] (self : Trail'0.t_trail) =
    [%#span36] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_nonneg'0 tl /\ l >= 0 /\ l <= level'1 self
      end

  use set.Fset

  use Cdsat_Theory_Term_Type as Term'0

  use set.Fset

  predicate contains'1 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (e : (Term'0.t_term, Value'0.t_value))

   =
    [%#span37] Fset.mem e self

  use prelude.prelude.Real

  function from_int'0 (_1 : int) : Real.real

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 16 4 16 29] (self : Term'0.t_term) : Sort'0.t_sort =
    [%#span38] match self with
      | Term'0.C_Variable v -> Cdsat_Theory_Var_Type.var_1 v
      | Term'0.C_Value v -> sort'1 v
      | Term'0.C_Plus _ _ -> Sort'0.C_Rational
      | Term'0.C_Eq _ _ -> Sort'0.C_Boolean
      | Term'0.C_Conj _ _ -> Sort'0.C_Boolean
      | Term'0.C_Neg _ -> Sort'0.C_Boolean
      | Term'0.C_Disj _ _ -> Sort'0.C_Boolean
      end

  function interp'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 167 4 167 41] (self : Model'0.t_model) (t : Term'0.t_term) : Value'0.t_value

   =
    [%#span41] match t with
      | Term'0.C_Variable v -> Map.get (Cdsat_Theory_Model_Type.model_0 self) v
      | Term'0.C_Value v -> v
      | Term'0.C_Plus l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Rat r1, Value'0.C_Rat r2) -> Value'0.C_Rat r1
        | _ -> Value'0.C_Rat (from_int'0 (- 1))
        end
      | Term'0.C_Conj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 /\ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Disj l r -> match (interp'0 self l, interp'0 self r) with
        | (Value'0.C_Bool b1, Value'0.C_Bool b2) -> Value'0.C_Bool (b1 \/ b2)
        | _ -> Value'0.C_Bool false
        end
      | Term'0.C_Eq l r -> Value'0.C_Bool (interp'0 self l = interp'0 self r)
      | Term'0.C_Neg t -> match interp'0 self t with
        | Value'0.C_Bool b -> Value'0.C_Bool (not b)
        | _ -> Value'0.C_Bool false
        end
      end

  axiom interp'0_spec : forall self : Model'0.t_model, t : Term'0.t_term . ([%#span39] inv'0 self)
   -> ([%#span40] invariant'2 self  -> sort'1 (interp'0 self t) = sort'0 t)

  predicate satisfies'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 193 4 193 52] (self : Model'0.t_model) (v : (Term'0.t_term, Value'0.t_value))

   =
    [%#span42] interp'0 self (let (a, _) = v in a) = (let (_, a) = v in a)

  use prelude.prelude.Int

  predicate invariant'3 [#"/Users/xavier/Code/cdsat/src/theory.rs" 121 4 121 34] (self : Assign'0.t_assign) =
    [%#span43] match self with
      | Assign'0.C_Decision t v -> sort'0 t = sort'1 v
      | Assign'0.C_Justified _ t v -> sort'0 t = sort'1 v /\ sort'0 t = Sort'0.C_Boolean
      | Assign'0.C_Input t v -> sort'0 t = sort'1 v
      end

  predicate invariant_assign'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 345 4 345 41] (self : Trail'0.t_trail) =
    [%#span44] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_assign'0 tl /\ invariant'3 a
      end

  function to_pair'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 131 4 131 41] (self : Assign'0.t_assign) : (Term'0.t_term, Value'0.t_value)

   =
    [%#span45] match self with
      | Assign'0.C_Decision t val' -> (t, val')
      | Assign'0.C_Input t val' -> (t, val')
      | Assign'0.C_Justified _ t val' -> (t, val')
      end

  use Core_Option_Option_Type as Option'0

  function find'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 469 4 469 64] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Option'0.t_option (Assign'0.t_assign, int)

   =
    [%#span49] match self with
      | Trail'0.C_Empty -> Option'0.C_None
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then Option'0.C_Some (a, l) else find'0 tl d
      end

  axiom find'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span48] invariant_assign'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)))
  && ([%#span47] invariant_nonneg'0 self
   -> (forall p : (Assign'0.t_assign, int) . find'0 self d = Option'0.C_Some p
   -> (let (_, a) = p in a) >= 0 /\ (let (_, a) = p in a) <= level'1 self))
  && ([%#span46] match find'0 self d with
    | Option'0.C_Some (a, l) -> to_pair'0 a = d
    | _ -> true
    end)

  predicate contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 418 4 418 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span51] match find'0 self d with
      | Option'0.C_Some ix -> true
      | Option'0.C_None -> false
      end

  axiom contains'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . [%#span50] invariant_assign'0 self
   -> contains'0 self d = true  -> sort'0 (let (a, _) = d in a) = sort'1 (let (_, a) = d in a)

  predicate satisfied_by'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 674 4 674 47] (self : Trail'0.t_trail) (m : Model'0.t_model)

   =
    [%#span52] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a  -> satisfies'0 m a

  function level_of'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 408 4 408 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : int

   =
    [%#span53] match find'0 self d with
      | Option'0.C_Some (_, l) -> l
      | Option'0.C_None -> 0
      end

  axiom level_of'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#stheory22] invariant_nonneg'0 self)
   -> ([%#stheory23] level_of'0 self d >= 0 /\ level_of'0 self d <= level'1 self)

  predicate trail_unique'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 373 4 373 37] (self : Trail'0.t_trail) =
    [%#span54] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> let ap = to_pair'0 a in not contains'0 tl ap
      /\ trail_unique'0 tl
      /\ (if is_bool'0 (let (_, a) = ap in a) then
        not contains'0 tl ((let (a, _) = ap in a), negate'0 (let (_, a) = ap in a))
      else
        true
      )
      end

  predicate invariant_contains'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 354 4 354 43] (self : Trail'0.t_trail) =
    [%#span55] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_contains'0 tl
      /\ match a with
        | Assign'0.C_Justified j _ _ -> forall a : (Term'0.t_term, Value'0.t_value) . contains'1 j a  -> contains'0 tl a
        | _ -> true
        end
      end

  use set.Fset

  function remove'0 [@inline:trivial] (self : Fset.fset (Term'0.t_term, Value'0.t_value)) (a : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span56] Fset.remove a self

  use set.Fset

  use set.Fset

  use set.Fset

  function set_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 287 4 287 57] (self : Trail'0.t_trail) (s : Fset.fset (Term'0.t_term, Value'0.t_value)) : int


  axiom set_level'0_def : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . set_level'0 self s
  = ([%#span64] if Fset.cardinal s = 0 then
    0
  else
    if Fset.cardinal s = 1 then
      level_of'0 self (Fset.pick s)
    else
      let a = Fset.pick s in let rec' = set_level'0 self (remove'0 s a) in if level_of'0 self a >= rec' then
        level_of'0 self a
      else
        rec'


  )

  axiom set_level'0_spec : forall self : Trail'0.t_trail, s : Fset.fset (Term'0.t_term, Value'0.t_value) . ([%#span57] invariant_nonneg'0 self)
   -> ([%#span62] set_level'0 self s <= level'1 self)
  && ([%#span61] set_level'0 self s >= 0)
  && ([%#span60] s = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))  -> set_level'0 self s = 0)
  && ([%#span59] s <> (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value))
   -> (exists i : (Term'0.t_term, Value'0.t_value) . contains'1 s i /\ level_of'0 self i = set_level'0 self s))
  && ([%#span58] forall i : (Term'0.t_term, Value'0.t_value) . contains'1 s i
   -> level_of'0 self i <= set_level'0 self s)

  predicate invariant_level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 320 4 320 40] (self : Trail'0.t_trail) =
    [%#span65] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a l tl -> invariant_level'0 tl
      /\ match a with
        | Assign'0.C_Input _ _ -> l = 0
        | Assign'0.C_Decision _ _ -> level'1 tl + 1 = l
        | Assign'0.C_Justified j _ _ -> set_level'0 tl j = l
        end
      end

  predicate invariant'1 [#"/Users/xavier/Code/cdsat/src/theory.rs" 387 4 387 34] (self : Trail'0.t_trail) =
    [%#span66] invariant_level'0 self
    /\ invariant_contains'0 self /\ trail_unique'0 self /\ invariant_nonneg'0 self /\ invariant_assign'0 self

  function count_bounds'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 740 4 740 35] (self : Trail'0.t_trail) : () =
    [%#span69] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign (Assign'0.C_Input _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Decision _ _) _ tl -> count_bounds'0 tl
      | Trail'0.C_Assign (Assign'0.C_Justified _ _ _) _ tl -> count_bounds'0 tl
      end

  axiom count_bounds'0_spec : forall self : Trail'0.t_trail . ([%#span67] invariant'1 self)
   -> ([%#span68] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a  -> level_of'0 self a <= level'1 self)

  function restrict'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 558 4 558 45] (self : Trail'0.t_trail) (level : int) : Trail'0.t_trail

   =
    [%#span70] match self with
      | Trail'0.C_Empty -> Trail'0.C_Empty
      | Trail'0.C_Assign a l tl -> let tl = restrict'0 tl level in let _ = count_bounds'0 tl in if l <= level then
        Trail'0.C_Assign a l tl
      else
        tl

      end

  axiom restrict'0_spec : forall self : Trail'0.t_trail, level : int . ([%#stheory12] invariant'1 self)
   -> ([%#stheory13] level >= 0)
   -> ([%#stheory21] len'0 (restrict'0 self level) <= len'0 self)
  && ([%#stheory20] (level'1 self >= level  -> level'1 (restrict'0 self level) = level)
  /\ (level'1 self < level  -> level'1 (restrict'0 self level) = level'1 self))
  && ([%#stheory19] forall m : Model'0.t_model . inv'0 m
   -> satisfied_by'0 self m  -> satisfied_by'0 (restrict'0 self level) m)
  && ([%#stheory18] forall a : (Term'0.t_term, Value'0.t_value) . not contains'0 self a
   -> not contains'0 (restrict'0 self level) a)
  && ([%#stheory17] level >= level'1 self  -> restrict'0 self level = self)
  && ([%#stheory16] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 (restrict'0 self level) a
   -> contains'0 self a
  /\ level_of'0 (restrict'0 self level) a <= level /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#stheory15] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 self a
   -> level_of'0 self a <= level
   -> contains'0 (restrict'0 self level) a /\ level_of'0 (restrict'0 self level) a = level_of'0 self a)
  && ([%#stheory14] invariant'1 (restrict'0 self level))

  use Cdsat_Theory_Conflict_Type as Cdsat_Theory_Conflict_Type

  use Cdsat_Theory_Conflict_Type as Conflict'0

  function level'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 1001 4 1001 29] (self : Conflict'0.t_conflict) : int =
    [%#span71] set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Conflict_Type.conflict_1 self)

  predicate is_decision'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 511 4 511 54] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span72] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Decision _ _, _) -> true
      | _ -> false
      end

  predicate is_input'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 521 4 521 51] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span73] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Input _ _, _) -> true
      | _ -> false
      end

  predicate satisfy_set'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 199 4 199 60] (self : Model'0.t_model) (v : Fset.fset (Term'0.t_term, Value'0.t_value))

   =
    [%#span74] forall a : (Term'0.t_term, Value'0.t_value) . contains'1 v a  -> satisfies'0 self a

  predicate entails'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 205 4 205 74] (self : Model'0.t_model) (j : Fset.fset (Term'0.t_term, Value'0.t_value)) (c : (Term'0.t_term, Value'0.t_value))

   =
    [%#span75] invariant'2 self  -> satisfy_set'0 self j  -> satisfies'0 self c

  predicate justified_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 141 4 141 40] (self : Assign'0.t_assign) =
    [%#span76] match self with
      | Assign'0.C_Justified just t val' -> forall m : Model'0.t_model . inv'0 m
       -> satisfy_set'0 m just  -> satisfies'0 m (t, val')
      | _ -> true
      end

  predicate sound'2 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 261 4 261 30] (self : Trail'0.t_trail)
   =
    [%#span77] match self with
      | Trail'0.C_Empty -> true
      | Trail'0.C_Assign a _ tl -> sound'2 tl /\ justified_sound'0 a
      end

  function find_justified'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 619 4 619 46] (self : Trail'0.t_trail) (kv : (Term'0.t_term, Value'0.t_value)) : ()

   =
    [%#span81] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = kv then () else find_justified'0 tl kv
      end

  axiom find_justified'0_spec : forall self : Trail'0.t_trail, kv : (Term'0.t_term, Value'0.t_value) . ([%#span78] sound'2 self)
   -> ([%#span79] contains'0 self kv)
   -> ([%#span80] forall l : int . forall a : Assign'0.t_assign . find'0 self kv = Option'0.C_Some (a, l)
   -> justified_sound'0 a)

  predicate is_justified'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 501 4 501 55] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value))

   =
    [%#span82] match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified _ _ _, _) -> true
      | _ -> false
      end

  function justification'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 490 4 490 71] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : Fset.fset (Term'0.t_term, Value'0.t_value)

   =
    [%#span83] let _ = find_justified'0 self d in match find'0 self d with
      | Option'0.C_Some (Assign'0.C_Justified j _ _, _) -> j
      | _ -> Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)
      end

  axiom justification'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#stheory6] invariant'1 self)
   -> ([%#stheory7] is_justified'0 self d)
   -> ([%#stheory8] sound'2 self)
   -> ([%#stheory11] is_decision'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#stheory10] is_input'0 self d
   -> justification'0 self d = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#stheory9] forall m : Model'0.t_model . inv'0 m  -> entails'0 m (justification'0 self d) d)

  function negate_involutive'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 109 4 109 34] (self : Value'0.t_value) : () =
    [%#span86] ()

  axiom negate_involutive'0_spec : forall self : Value'0.t_value . ([%#span84] is_bool'0 self)
   -> ([%#span85] negate'0 (negate'0 self) = self)

  function trail_plausible'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 788 4 788 50] (self : Trail'0.t_trail) (d : (Term'0.t_term, Value'0.t_value)) : ()

   =
    [%#span91] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then () else let _ = trail_plausible'0 tl d in ()
      end

  axiom trail_plausible'0_spec : forall self : Trail'0.t_trail, d : (Term'0.t_term, Value'0.t_value) . ([%#span87] invariant'1 self)
   -> ([%#span88] contains'0 self d)
   -> ([%#span89] is_bool'0 (let (_, a) = d in a))
   -> ([%#span90] not contains'0 self ((let (a, _) = d in a), negate'0 (let (_, a) = d in a)))

  function restrict_too_big'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 756 4 756 63] (self : Trail'0.t_trail) (level : int) (d : (Term'0.t_term, Value'0.t_value)) : ()

   =
    [%#span97] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign a l tl -> if to_pair'0 a = d then () else let _ = restrict_too_big'0 tl level d in ()
      end

  axiom restrict_too_big'0_spec : forall self : Trail'0.t_trail, level : int, d : (Term'0.t_term, Value'0.t_value) . ([%#span92] level
  >= 0)
   -> ([%#span93] invariant'1 self)
   -> ([%#span94] contains'0 self d)
   -> ([%#span95] level < level_of'0 self d)  -> ([%#span96] not contains'0 (restrict'0 self level) d)

  function restrict_sound'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 704 4 704 43] (self : Trail'0.t_trail) (level : int) : ()

   =
    [%#span100] match self with
      | Trail'0.C_Empty -> ()
      | Trail'0.C_Assign a l tl -> let _ = restrict_sound'0 tl level in ()
      end

  axiom restrict_sound'0_spec : forall self : Trail'0.t_trail, level : int . ([%#span98] sound'2 self)
   -> ([%#span99] sound'2 (restrict'0 self level))

  use Cdsat_Theory_Normal_Type as Normal'0

  predicate unsat'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 681 4 681 30] (self : Trail'0.t_trail) =
    [%#span101] forall m : Model'0.t_model . inv'0 m  -> satisfied_by'0 (restrict'0 self 0) m  -> false

  predicate impls'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 694 4 694 41] (self : Trail'0.t_trail) (rhs : Trail'0.t_trail)

   =
    [%#span103] forall m : Model'0.t_model . inv'0 m
     -> satisfied_by'0 (restrict'0 self 0) m  -> satisfied_by'0 (restrict'0 rhs 0) m

  axiom impls'0_spec : forall self : Trail'0.t_trail, rhs : Trail'0.t_trail . [%#span102] impls'0 self rhs
   -> unsat'0 rhs  -> unsat'0 self

  use Cdsat_Theory_Normal_Type as Cdsat_Theory_Normal_Type

  predicate sound'1 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 826 4 826 30] (self : Normal'0.t_normal)

   =
    [%#span104] sound'2 (Cdsat_Theory_Normal_Type.normal_0 self)

  predicate sound'0 [@inline:trivial] [#"/Users/xavier/Code/cdsat/src/theory.rs" 995 4 995 30] (self : Conflict'0.t_conflict)

   =
    [%#span105] sound'2 (Cdsat_Theory_Conflict_Type.conflict_0 self)
    /\ (forall m : Model'0.t_model . inv'0 m  -> satisfy_set'0 m (Cdsat_Theory_Conflict_Type.conflict_1 self)  -> false)

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 988 4 988 34] (self : Conflict'0.t_conflict) =
    [%#span106] set_level'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Conflict_Type.conflict_1 self)
    > 0
    /\ invariant'1 (Cdsat_Theory_Conflict_Type.conflict_0 self)
    /\ (forall a : (Term'0.t_term, Value'0.t_value) . contains'1 (Cdsat_Theory_Conflict_Type.conflict_1 self) a
     -> contains'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a)

  constant self  : Conflict'0.t_conflict

  constant l  : (Term'0.t_term, Value'0.t_value)

  constant tgt  : Normal'0.t_normal

  predicate undo_decide [#"/Users/xavier/Code/cdsat/src/theory.rs" 1175 4 1175 67] (self : Conflict'0.t_conflict) (l : (Term'0.t_term, Value'0.t_value)) (tgt : Normal'0.t_normal)


  goal vc_undo_decide : ([%#stheory2] is_justified'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) l)
   -> ([%#stheory1] sound'0 self)
   -> ([%#stheory0] invariant'0 self)
   -> (let _ = restrict_sound'0 in let _ = restrict_too_big'0 in let _ = trail_plausible'0 in let _ = negate_involutive'0 in (([%#stheory8] sound'2 (Cdsat_Theory_Conflict_Type.conflict_0 self))
  && ([%#stheory7] is_justified'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) l)
  && ([%#stheory6] invariant'1 (Cdsat_Theory_Conflict_Type.conflict_0 self)))
  /\ (([%#stheory11] is_decision'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) l
   -> justification'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) l
  = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#stheory10] is_input'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) l
   -> justification'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) l
  = (Fset.empty  : Fset.fset (Term'0.t_term, Value'0.t_value)))
  && ([%#stheory9] forall m : Model'0.t_model . inv'0 m
   -> entails'0 m (justification'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) l) l)
   -> (let just = justification'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) l in let e = remove'0 (Cdsat_Theory_Conflict_Type.conflict_1 self) l in (([%#stheory13] level'0 self
  - 1
  >= 0)
  && ([%#stheory12] invariant'1 (Cdsat_Theory_Conflict_Type.conflict_0 self)))
  /\ (([%#stheory21] len'0 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (level'0 self - 1))
  <= len'0 (Cdsat_Theory_Conflict_Type.conflict_0 self))
  && ([%#stheory20] (level'1 (Cdsat_Theory_Conflict_Type.conflict_0 self) >= level'0 self - 1
   -> level'1 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (level'0 self - 1)) = level'0 self - 1)
  /\ (level'1 (Cdsat_Theory_Conflict_Type.conflict_0 self) < level'0 self - 1
   -> level'1 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (level'0 self - 1))
  = level'1 (Cdsat_Theory_Conflict_Type.conflict_0 self)))
  && ([%#stheory19] forall m : Model'0.t_model . inv'0 m
   -> satisfied_by'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) m
   -> satisfied_by'0 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (level'0 self - 1)) m)
  && ([%#stheory18] forall a : (Term'0.t_term, Value'0.t_value) . not contains'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a
   -> not contains'0 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (level'0 self - 1)) a)
  && ([%#stheory17] level'0 self - 1 >= level'1 (Cdsat_Theory_Conflict_Type.conflict_0 self)
   -> restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (level'0 self - 1)
  = Cdsat_Theory_Conflict_Type.conflict_0 self)
  && ([%#stheory16] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (level'0 self
  - 1)) a
   -> contains'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a
  /\ level_of'0 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (level'0 self - 1)) a <= level'0 self - 1
  /\ level_of'0 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (level'0 self - 1)) a
  = level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a)
  && ([%#stheory15] forall a : (Term'0.t_term, Value'0.t_value) . contains'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a
   -> level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a <= level'0 self - 1
   -> contains'0 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (level'0 self - 1)) a
  /\ level_of'0 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (level'0 self - 1)) a
  = level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a)
  && ([%#stheory14] invariant'1 (restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (level'0 self - 1)))
   -> (let restr = restrict'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (level'0 self
  - 1) in if is_bool'0 (let (_, a) = l in a) then
    (forall a : (Term'0.t_term, Value'0.t_value) . if contains'1 just a then
      if not is_bool'0 (let (_, a) = a in a) then
        [%#stheory22] invariant_nonneg'0 (Cdsat_Theory_Conflict_Type.conflict_0 self)
      else
        true

    else
      true
    )
    /\ (if [%#stheory24] exists a : (Term'0.t_term, Value'0.t_value) . contains'1 just a
    /\ not is_bool'0 (let (_, a) = a in a)
    /\ level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) a = level'0 self then
      ([%#stheory22] invariant_nonneg'0 (Cdsat_Theory_Conflict_Type.conflict_0 self))
      /\ (([%#stheory23] level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) l >= 0
      /\ level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) l
      <= level'1 (Cdsat_Theory_Conflict_Type.conflict_0 self))
       -> (if level'0 self = level_of'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) l then
        ([%#stheory25] is_bool'0 (let (_, a) = l in a))
        /\ (([%#stheory26] is_bool'0 (negate'0 (let (_, a) = l in a)))
         -> ([%#stheory28] level'1 restr <= len'0 restr) && ([%#stheory27] level'1 restr >= 0)
         -> (let result = Cdsat_Theory_Normal_Type.normal_0 tgt
        = Trail'0.C_Assign (Assign'0.C_Decision (let (a, _) = l in a) (negate'0 (let (_, a) = l in a))) (level'1 restr
        + 1) restr in ([%#stheory5] result
         -> impls'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Normal_Type.normal_0 tgt))
        && ([%#stheory4] result  -> sound'1 tgt)
        && ([%#stheory3] result  -> invariant'1 (Cdsat_Theory_Normal_Type.normal_0 tgt))))
      else
        let result = false in ([%#stheory5] result
         -> impls'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Normal_Type.normal_0 tgt))
        && ([%#stheory4] result  -> sound'1 tgt)
        && ([%#stheory3] result  -> invariant'1 (Cdsat_Theory_Normal_Type.normal_0 tgt))
      ))
    else
      let result = false in ([%#stheory5] result
       -> impls'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Normal_Type.normal_0 tgt))
      && ([%#stheory4] result  -> sound'1 tgt)
      && ([%#stheory3] result  -> invariant'1 (Cdsat_Theory_Normal_Type.normal_0 tgt))
    )
  else
    let result = false in ([%#stheory5] result
     -> impls'0 (Cdsat_Theory_Conflict_Type.conflict_0 self) (Cdsat_Theory_Normal_Type.normal_0 tgt))
    && ([%#stheory4] result  -> sound'1 tgt)
    && ([%#stheory3] result  -> invariant'1 (Cdsat_Theory_Normal_Type.normal_0 tgt))
  )))))
end
module Cdsat_Term_Impl12_Fmt
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 14 16 14 21

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 26 20 26 34

  use prelude.prelude.Intrinsic

  use Core_Fmt_Error_Type as Error'0

  use Core_Result_Result_Type as Result'0

  use Core_Fmt_Formatter_Type as Formatter'0

  use prelude.prelude.Borrow

  let rec write_str'0 (self:borrowed (Formatter'0.t_formatter)) (data:string) (return'  (ret:Result'0.t_result () (Error'0.t_error)))= any
    [ return' (result:Result'0.t_result () (Error'0.t_error))-> (! return' {result}) ]


  predicate resolve'0 (self : borrowed (Formatter'0.t_formatter)) =
    [%#span1] self.final = self.current

  use Cdsat_Term_Sort_Type as Sort'0

  let rec fmt (self:Sort'0.t_sort) (f:borrowed (Formatter'0.t_formatter)) (return'  (ret:Result'0.t_result () (Error'0.t_error)))= (! bb0
    [ bb0 = s0
      [ s0 = Borrow.borrow_final <Formatter'0.t_formatter> {f.current} {Borrow.get_id f}
          (fun (_ret':borrowed (Formatter'0.t_formatter)) ->
             [ &_3 <- _ret' ]
             [ &f <- { f with current = _3.final ; } ]
            s1)
      | s1 = any [ br0 -> {self = Sort'0.C_Boolean } (! bb2) | br1 -> {self = Sort'0.C_Rational } (! bb3) ]  ]

    | bb1 = s0 [ s0 = -{resolve'0 _3}- s1 | s1 = -{resolve'0 f}- s2 | s2 = {[%#sterm0] false} any ]
    | bb3 = s0 [ s0 =  [ &_7 <- [%#sterm0] "Rational" ] s1 | s1 =  [ &_4 <- _7 ] s2 | s2 = bb5 ]
    | bb2 = bb4
    | bb4 = s0 [ s0 =  [ &_6 <- [%#sterm0] "Boolean" ] s1 | s1 =  [ &_4 <- _6 ] s2 | s2 = bb5 ]
    | bb5 = s0
      [ s0 = write_str'0 {_3} {_4} (fun (_ret':Result'0.t_result () (Error'0.t_error)) ->  [ &_0 <- _ret' ] s1)
      | s1 = bb6 ]

    | bb6 = s0 [ s0 = -{resolve'0 f}- s1 | s1 = return' {_0} ]  ]
    )
    [ & _0 : Result'0.t_result () (Error'0.t_error) = any_l ()
    | & self : Sort'0.t_sort = self
    | & f : borrowed (Formatter'0.t_formatter) = f
    | & _3 : borrowed (Formatter'0.t_formatter) = any_l ()
    | & _4 : string = any_l ()
    | & _6 : string = any_l ()
    | & _7 : string = any_l () ]
     [ return' (result:Result'0.t_result () (Error'0.t_error))-> (! return' {result}) ]
end
module Cdsat_Term_Impl14_AssertReceiverIsTotalEq
  use Cdsat_Term_Sort_Type as Sort'0

  use prelude.prelude.Borrow

  use prelude.prelude.Intrinsic

  let rec assert_receiver_is_total_eq (self:Sort'0.t_sort) (return'  (ret:()))= (! bb0 [ bb0 = return' {_0} ] )
    [ & _0 : () = any_l () ]
     [ return' (result:())-> (! return' {result}) ]
end
module Cdsat_Term_Impl18_Fmt
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 33 16 33 21

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 26 20 26 34

  use prelude.prelude.Opaque

  use prelude.prelude.Intrinsic

  use Core_Fmt_Error_Type as Error'0

  use Core_Result_Result_Type as Result'0

  use Core_Fmt_Formatter_Type as Formatter'0

  use prelude.prelude.Borrow

  let rec debug_tuple_field1_finish'0 (self:borrowed (Formatter'0.t_formatter)) (name:string) (value1:dyn) (return'  (ret:Result'0.t_result () (Error'0.t_error)))= any
    [ return' (result:Result'0.t_result () (Error'0.t_error))-> (! return' {result}) ]


  let rec debug_tuple_field2_finish'0 (self:borrowed (Formatter'0.t_formatter)) (name:string) (value1:dyn) (value2:dyn) (return'  (ret:Result'0.t_result () (Error'0.t_error)))= any
    [ return' (result:Result'0.t_result () (Error'0.t_error))-> (! return' {result}) ]


  predicate resolve'0 (self : borrowed (Formatter'0.t_formatter)) =
    [%#span1] self.final = self.current

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  use Cdsat_Term_Value_Type as Value'0

  use Cdsat_Term_Term_Type as Term'0

  use Cdsat_Term_Sort_Type as Sort'0

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  let rec fmt (self:Term'0.t_term) (f:borrowed (Formatter'0.t_formatter)) (return'  (ret:Result'0.t_result () (Error'0.t_error)))= (! bb0
    [ bb0 = any
      [ br0 (a:usize) (b:Sort'0.t_sort)-> {self = Term'0.C_Variable a b} (! bb2)
      | br1 (a:Value'0.t_value)-> {self = Term'0.C_Value a} (! bb3)
      | br2 (a:Term'0.t_term) (b:Term'0.t_term)-> {self = Term'0.C_Plus a b} (! bb4)
      | br3 (a:Ratio'0.t_ratio (BigInt'0.t_bigint)) (b:Term'0.t_term)-> {self = Term'0.C_Times a b} (! bb5)
      | br4 (a:Term'0.t_term) (b:Term'0.t_term)-> {self = Term'0.C_Eq a b} (! bb6)
      | br5 (a:Term'0.t_term) (b:Term'0.t_term)-> {self = Term'0.C_Lt a b} (! bb7)
      | br6 (a:Term'0.t_term) (b:Term'0.t_term)-> {self = Term'0.C_Conj a b} (! bb8)
      | br7 (a:Term'0.t_term)-> {self = Term'0.C_Neg a} (! bb9)
      | br8 (a:Term'0.t_term) (b:Term'0.t_term)-> {self = Term'0.C_Disj a b} (! bb10)
      | br9 (a:Term'0.t_term) (b:Term'0.t_term)-> {self = Term'0.C_Impl a b} (! bb11) ]

    | bb1 = s0 [ s0 = -{resolve'0 f}- s1 | s1 = {[%#sterm0] false} any ]
    | bb11 = s0
      [ s0 = Term'0.impl {self} (fun (r0'0:Term'0.t_term) (r1'0:Term'0.t_term) ->  [ &__self_09 <- r0'0 ] s1)
      | s1 = Term'0.impl {self} (fun (r0'1:Term'0.t_term) (r1'1:Term'0.t_term) ->  [ &__self_17 <- r1'1 ] s2)
      | s2 = Borrow.borrow_final <Formatter'0.t_formatter> {f.current} {Borrow.get_id f}
          (fun (_ret':borrowed (Formatter'0.t_formatter)) ->
             [ &_90 <- _ret' ]
             [ &f <- { f with current = _90.final ; } ]
            s3)
      | s3 =  [ &_92 <- [%#sterm0] "Impl" ] s4
      | s4 =  [ &_97 <- __self_17 ] s5
      | s5 = debug_tuple_field2_finish'0 {_90} {_92} {_93} {_95}
          (fun (_ret':Result'0.t_result () (Error'0.t_error)) ->  [ &_0 <- _ret' ] s6)
      | s6 = bb30 ]

    | bb30 = s0 [ s0 = -{resolve'0 f}- s1 | s1 = bb31 ]
    | bb10 = bb28
    | bb28 = s0
      [ s0 = Term'0.disj {self} (fun (r0'0:Term'0.t_term) (r1'0:Term'0.t_term) ->  [ &__self_08 <- r0'0 ] s1)
      | s1 = Term'0.disj {self} (fun (r0'1:Term'0.t_term) (r1'1:Term'0.t_term) ->  [ &__self_16 <- r1'1 ] s2)
      | s2 = Borrow.borrow_final <Formatter'0.t_formatter> {f.current} {Borrow.get_id f}
          (fun (_ret':borrowed (Formatter'0.t_formatter)) ->
             [ &_80 <- _ret' ]
             [ &f <- { f with current = _80.final ; } ]
            s3)
      | s3 =  [ &_82 <- [%#sterm0] "Disj" ] s4
      | s4 =  [ &_87 <- __self_16 ] s5
      | s5 = debug_tuple_field2_finish'0 {_80} {_82} {_83} {_85}
          (fun (_ret':Result'0.t_result () (Error'0.t_error)) ->  [ &_0 <- _ret' ] s6)
      | s6 = bb29 ]

    | bb29 = s0 [ s0 = -{resolve'0 f}- s1 | s1 = bb31 ]
    | bb9 = bb26
    | bb26 = s0
      [ s0 = Term'0.neg {self} (fun (r0'0:Term'0.t_term) ->  [ &__self_07 <- r0'0 ] s1)
      | s1 = Borrow.borrow_final <Formatter'0.t_formatter> {f.current} {Borrow.get_id f}
          (fun (_ret':borrowed (Formatter'0.t_formatter)) ->
             [ &_72 <- _ret' ]
             [ &f <- { f with current = _72.final ; } ]
            s2)
      | s2 =  [ &_74 <- [%#sterm0] "Neg" ] s3
      | s3 =  [ &_77 <- __self_07 ] s4
      | s4 = debug_tuple_field1_finish'0 {_72} {_74} {_75}
          (fun (_ret':Result'0.t_result () (Error'0.t_error)) ->  [ &_0 <- _ret' ] s5)
      | s5 = bb27 ]

    | bb27 = s0 [ s0 = -{resolve'0 f}- s1 | s1 = bb31 ]
    | bb8 = bb24
    | bb24 = s0
      [ s0 = Term'0.conj {self} (fun (r0'0:Term'0.t_term) (r1'0:Term'0.t_term) ->  [ &__self_06 <- r0'0 ] s1)
      | s1 = Term'0.conj {self} (fun (r0'1:Term'0.t_term) (r1'1:Term'0.t_term) ->  [ &__self_15 <- r1'1 ] s2)
      | s2 = Borrow.borrow_final <Formatter'0.t_formatter> {f.current} {Borrow.get_id f}
          (fun (_ret':borrowed (Formatter'0.t_formatter)) ->
             [ &_63 <- _ret' ]
             [ &f <- { f with current = _63.final ; } ]
            s3)
      | s3 =  [ &_65 <- [%#sterm0] "Conj" ] s4
      | s4 =  [ &_70 <- __self_15 ] s5
      | s5 = debug_tuple_field2_finish'0 {_63} {_65} {_66} {_68}
          (fun (_ret':Result'0.t_result () (Error'0.t_error)) ->  [ &_0 <- _ret' ] s6)
      | s6 = bb25 ]

    | bb25 = s0 [ s0 = -{resolve'0 f}- s1 | s1 = bb31 ]
    | bb7 = bb22
    | bb22 = s0
      [ s0 = Term'0.lt {self} (fun (r0'0:Term'0.t_term) (r1'0:Term'0.t_term) ->  [ &__self_05 <- r0'0 ] s1)
      | s1 = Term'0.lt {self} (fun (r0'1:Term'0.t_term) (r1'1:Term'0.t_term) ->  [ &__self_14 <- r1'1 ] s2)
      | s2 = Borrow.borrow_final <Formatter'0.t_formatter> {f.current} {Borrow.get_id f}
          (fun (_ret':borrowed (Formatter'0.t_formatter)) ->
             [ &_53 <- _ret' ]
             [ &f <- { f with current = _53.final ; } ]
            s3)
      | s3 =  [ &_55 <- [%#sterm0] "Lt" ] s4
      | s4 =  [ &_60 <- __self_14 ] s5
      | s5 = debug_tuple_field2_finish'0 {_53} {_55} {_56} {_58}
          (fun (_ret':Result'0.t_result () (Error'0.t_error)) ->  [ &_0 <- _ret' ] s6)
      | s6 = bb23 ]

    | bb23 = s0 [ s0 = -{resolve'0 f}- s1 | s1 = bb31 ]
    | bb6 = bb20
    | bb20 = s0
      [ s0 = Term'0.eq {self} (fun (r0'0:Term'0.t_term) (r1'0:Term'0.t_term) ->  [ &__self_04 <- r0'0 ] s1)
      | s1 = Term'0.eq {self} (fun (r0'1:Term'0.t_term) (r1'1:Term'0.t_term) ->  [ &__self_13 <- r1'1 ] s2)
      | s2 = Borrow.borrow_final <Formatter'0.t_formatter> {f.current} {Borrow.get_id f}
          (fun (_ret':borrowed (Formatter'0.t_formatter)) ->
             [ &_43 <- _ret' ]
             [ &f <- { f with current = _43.final ; } ]
            s3)
      | s3 =  [ &_45 <- [%#sterm0] "Eq" ] s4
      | s4 =  [ &_50 <- __self_13 ] s5
      | s5 = debug_tuple_field2_finish'0 {_43} {_45} {_46} {_48}
          (fun (_ret':Result'0.t_result () (Error'0.t_error)) ->  [ &_0 <- _ret' ] s6)
      | s6 = bb21 ]

    | bb21 = s0 [ s0 = -{resolve'0 f}- s1 | s1 = bb31 ]
    | bb5 = bb18
    | bb18 = s0
      [ s0 = Term'0.times {self}
          (fun (r0'0:Ratio'0.t_ratio (BigInt'0.t_bigint)) (r1'0:Term'0.t_term) ->  [ &__self_03 <- r0'0 ] s1)
      | s1 = Term'0.times {self}
          (fun (r0'1:Ratio'0.t_ratio (BigInt'0.t_bigint)) (r1'1:Term'0.t_term) ->  [ &__self_12 <- r1'1 ] s2)
      | s2 = Borrow.borrow_final <Formatter'0.t_formatter> {f.current} {Borrow.get_id f}
          (fun (_ret':borrowed (Formatter'0.t_formatter)) ->
             [ &_33 <- _ret' ]
             [ &f <- { f with current = _33.final ; } ]
            s3)
      | s3 =  [ &_35 <- [%#sterm0] "Times" ] s4
      | s4 =  [ &_40 <- __self_12 ] s5
      | s5 = debug_tuple_field2_finish'0 {_33} {_35} {_36} {_38}
          (fun (_ret':Result'0.t_result () (Error'0.t_error)) ->  [ &_0 <- _ret' ] s6)
      | s6 = bb19 ]

    | bb19 = s0 [ s0 = -{resolve'0 f}- s1 | s1 = bb31 ]
    | bb4 = bb16
    | bb16 = s0
      [ s0 = Term'0.plus {self} (fun (r0'0:Term'0.t_term) (r1'0:Term'0.t_term) ->  [ &__self_02 <- r0'0 ] s1)
      | s1 = Term'0.plus {self} (fun (r0'1:Term'0.t_term) (r1'1:Term'0.t_term) ->  [ &__self_11 <- r1'1 ] s2)
      | s2 = Borrow.borrow_final <Formatter'0.t_formatter> {f.current} {Borrow.get_id f}
          (fun (_ret':borrowed (Formatter'0.t_formatter)) ->
             [ &_23 <- _ret' ]
             [ &f <- { f with current = _23.final ; } ]
            s3)
      | s3 =  [ &_25 <- [%#sterm0] "Plus" ] s4
      | s4 =  [ &_30 <- __self_11 ] s5
      | s5 = debug_tuple_field2_finish'0 {_23} {_25} {_26} {_28}
          (fun (_ret':Result'0.t_result () (Error'0.t_error)) ->  [ &_0 <- _ret' ] s6)
      | s6 = bb17 ]

    | bb17 = s0 [ s0 = -{resolve'0 f}- s1 | s1 = bb31 ]
    | bb3 = bb14
    | bb14 = s0
      [ s0 = Term'0.value {self} (fun (r0'0:Value'0.t_value) ->  [ &__self_01 <- r0'0 ] s1)
      | s1 = Borrow.borrow_final <Formatter'0.t_formatter> {f.current} {Borrow.get_id f}
          (fun (_ret':borrowed (Formatter'0.t_formatter)) ->
             [ &_15 <- _ret' ]
             [ &f <- { f with current = _15.final ; } ]
            s2)
      | s2 =  [ &_17 <- [%#sterm0] "Value" ] s3
      | s3 =  [ &_20 <- __self_01 ] s4
      | s4 = debug_tuple_field1_finish'0 {_15} {_17} {_18}
          (fun (_ret':Result'0.t_result () (Error'0.t_error)) ->  [ &_0 <- _ret' ] s5)
      | s5 = bb15 ]

    | bb15 = s0 [ s0 = -{resolve'0 f}- s1 | s1 = bb31 ]
    | bb2 = bb12
    | bb12 = s0
      [ s0 = Term'0.variable {self} (fun (r0'0:usize) (r1'0:Sort'0.t_sort) ->  [ &__self_0 <- r0'0 ] s1)
      | s1 = Term'0.variable {self} (fun (r0'1:usize) (r1'1:Sort'0.t_sort) ->  [ &__self_1 <- r1'1 ] s2)
      | s2 = Borrow.borrow_final <Formatter'0.t_formatter> {f.current} {Borrow.get_id f}
          (fun (_ret':borrowed (Formatter'0.t_formatter)) ->
             [ &_6 <- _ret' ]
             [ &f <- { f with current = _6.final ; } ]
            s3)
      | s3 =  [ &_8 <- [%#sterm0] "Variable" ] s4
      | s4 =  [ &_13 <- __self_1 ] s5
      | s5 = debug_tuple_field2_finish'0 {_6} {_8} {_9} {_11}
          (fun (_ret':Result'0.t_result () (Error'0.t_error)) ->  [ &_0 <- _ret' ] s6)
      | s6 = bb13 ]

    | bb13 = s0 [ s0 = -{resolve'0 f}- s1 | s1 = bb31 ]
    | bb31 = return' {_0} ]
    )
    [ & _0 : Result'0.t_result () (Error'0.t_error) = any_l ()
    | & self : Term'0.t_term = self
    | & f : borrowed (Formatter'0.t_formatter) = f
    | & __self_0 : usize = any_l ()
    | & __self_1 : Sort'0.t_sort = any_l ()
    | & _6 : borrowed (Formatter'0.t_formatter) = any_l ()
    | & _8 : string = any_l ()
    | & _9 : dyn = any_l ()
    | & _11 : dyn = any_l ()
    | & _13 : Sort'0.t_sort = any_l ()
    | & __self_01 : Value'0.t_value = any_l ()
    | & _15 : borrowed (Formatter'0.t_formatter) = any_l ()
    | & _17 : string = any_l ()
    | & _18 : dyn = any_l ()
    | & _20 : Value'0.t_value = any_l ()
    | & __self_02 : Term'0.t_term = any_l ()
    | & __self_11 : Term'0.t_term = any_l ()
    | & _23 : borrowed (Formatter'0.t_formatter) = any_l ()
    | & _25 : string = any_l ()
    | & _26 : dyn = any_l ()
    | & _28 : dyn = any_l ()
    | & _30 : Term'0.t_term = any_l ()
    | & __self_03 : Ratio'0.t_ratio (BigInt'0.t_bigint) = any_l ()
    | & __self_12 : Term'0.t_term = any_l ()
    | & _33 : borrowed (Formatter'0.t_formatter) = any_l ()
    | & _35 : string = any_l ()
    | & _36 : dyn = any_l ()
    | & _38 : dyn = any_l ()
    | & _40 : Term'0.t_term = any_l ()
    | & __self_04 : Term'0.t_term = any_l ()
    | & __self_13 : Term'0.t_term = any_l ()
    | & _43 : borrowed (Formatter'0.t_formatter) = any_l ()
    | & _45 : string = any_l ()
    | & _46 : dyn = any_l ()
    | & _48 : dyn = any_l ()
    | & _50 : Term'0.t_term = any_l ()
    | & __self_05 : Term'0.t_term = any_l ()
    | & __self_14 : Term'0.t_term = any_l ()
    | & _53 : borrowed (Formatter'0.t_formatter) = any_l ()
    | & _55 : string = any_l ()
    | & _56 : dyn = any_l ()
    | & _58 : dyn = any_l ()
    | & _60 : Term'0.t_term = any_l ()
    | & __self_06 : Term'0.t_term = any_l ()
    | & __self_15 : Term'0.t_term = any_l ()
    | & _63 : borrowed (Formatter'0.t_formatter) = any_l ()
    | & _65 : string = any_l ()
    | & _66 : dyn = any_l ()
    | & _68 : dyn = any_l ()
    | & _70 : Term'0.t_term = any_l ()
    | & __self_07 : Term'0.t_term = any_l ()
    | & _72 : borrowed (Formatter'0.t_formatter) = any_l ()
    | & _74 : string = any_l ()
    | & _75 : dyn = any_l ()
    | & _77 : Term'0.t_term = any_l ()
    | & __self_08 : Term'0.t_term = any_l ()
    | & __self_16 : Term'0.t_term = any_l ()
    | & _80 : borrowed (Formatter'0.t_formatter) = any_l ()
    | & _82 : string = any_l ()
    | & _83 : dyn = any_l ()
    | & _85 : dyn = any_l ()
    | & _87 : Term'0.t_term = any_l ()
    | & __self_09 : Term'0.t_term = any_l ()
    | & __self_17 : Term'0.t_term = any_l ()
    | & _90 : borrowed (Formatter'0.t_formatter) = any_l ()
    | & _92 : string = any_l ()
    | & _93 : dyn = any_l ()
    | & _95 : dyn = any_l ()
    | & _97 : Term'0.t_term = any_l () ]
     [ return' (result:Result'0.t_result () (Error'0.t_error))-> (! return' {result}) ]
end
module Cdsat_Term_Impl20_AssertReceiverIsTotalEq
  use Cdsat_Term_Term_Type as Term'0

  use prelude.prelude.Borrow

  use prelude.prelude.Intrinsic

  let rec assert_receiver_is_total_eq (self:Term'0.t_term) (return'  (ret:()))= (! bb0 [ bb0 = return' {_0} ] )
    [ & _0 : () = any_l () ]
     [ return' (result:())-> (! return' {result}) ]
end
module Cdsat_Term_Impl1_Not
  use prelude.prelude.Intrinsic

  use Cdsat_Term_Term_Type as Term'0

  let rec not' (remove:Term'0.t_term) (return'  (ret:Term'0.t_term))= (! bb0
    [ bb0 = bb1
    | bb1 = s0
      [ s0 =  [ &_0 <- Term'0.C_Neg remove ] (any [ any_ (_any:Term'0.t_term)-> (!  [ &remove <- _any ] s1) ] )
      | s1 = bb2 ]

    | bb2 = bb3
    | bb3 = return' {_0} ]
    ) [ & _0 : Term'0.t_term = any_l () | & remove : Term'0.t_term = remove ]
    [ return' (result:Term'0.t_term)-> (! return' {result}) ]

end
module Cdsat_Term_Impl1_True
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 71 32 71 36

  use prelude.prelude.Intrinsic

  use Cdsat_Term_Term_Type as Term'0

  use Cdsat_Term_Value_Type as Value'0

  let rec true_ (_1:()) (return'  (ret:Term'0.t_term))= (! bb0
    [ bb0 = s0
      [ s0 =  [ &_1 <- Value'0.C_Bool ([%#sterm0] true) ] s1
      | s1 =  [ &_0 <- Term'0.C_Value _1 ] (any [ any_ (_any:Value'0.t_value)-> (!  [ &_1 <- _any ] s2) ] )
      | s2 = bb1 ]

    | bb1 = return' {_0} ]
    ) [ & _0 : Term'0.t_term = any_l () | & _1 : Value'0.t_value = any_l () ]
    [ return' (result:Term'0.t_term)-> (! return' {result}) ]

end
module Cdsat_Term_Impl1_False
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 75 32 75 37

  use prelude.prelude.Intrinsic

  use Cdsat_Term_Term_Type as Term'0

  use Cdsat_Term_Value_Type as Value'0

  let rec false_ (_1:()) (return'  (ret:Term'0.t_term))= (! bb0
    [ bb0 = s0
      [ s0 =  [ &_1 <- Value'0.C_Bool ([%#sterm0] false) ] s1
      | s1 =  [ &_0 <- Term'0.C_Value _1 ] (any [ any_ (_any:Value'0.t_value)-> (!  [ &_1 <- _any ] s2) ] )
      | s2 = bb1 ]

    | bb1 = return' {_0} ]
    ) [ & _0 : Term'0.t_term = any_l () | & _1 : Value'0.t_value = any_l () ]
    [ return' (result:Term'0.t_term)-> (! return' {result}) ]

end
module Cdsat_Term_Impl1_Var
  use Cdsat_Term_Sort_Type as Sort'0

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  use prelude.prelude.Intrinsic

  use Cdsat_Term_Term_Type as Term'0

  let rec var' (ix:usize) (sort:Sort'0.t_sort) (return'  (ret:Term'0.t_term))= (! bb0
    [ bb0 = s0 [ s0 =  [ &_0 <- Term'0.C_Variable ix sort ] s1 | s1 = return' {_0} ]  ]
    ) [ & _0 : Term'0.t_term = any_l () | & ix : usize = ix | & sort : Sort'0.t_sort = sort ]
    [ return' (result:Term'0.t_term)-> (! return' {result}) ]

end
module Cdsat_Term_Impl1_Val
  use prelude.prelude.Intrinsic

  use Cdsat_Term_Value_Type as Value'0

  use Cdsat_Term_Term_Type as Term'0

  let rec val' (v:Value'0.t_value) (return'  (ret:Term'0.t_term))= (! bb0
    [ bb0 = s0
      [ s0 =  [ &_0 <- Term'0.C_Value v ] (any [ any_ (_any:Value'0.t_value)-> (!  [ &v <- _any ] s1) ] ) | s1 = bb1 ]

    | bb1 = bb2
    | bb2 = return' {_0} ]
    ) [ & _0 : Term'0.t_term = any_l () | & v : Value'0.t_value = v ]
    [ return' (result:Term'0.t_term)-> (! return' {result}) ]

end
module Cdsat_Term_Impl1_Plus
  use prelude.prelude.Intrinsic

  use Cdsat_Term_Term_Type as Term'0

  let rec plus (a:Term'0.t_term) (b:Term'0.t_term) (return'  (ret:Term'0.t_term))= (! bb0
    [ bb0 = bb1
    | bb1 = bb2
    | bb2 = s0
      [ s0 =  [ &_0 <- Term'0.C_Plus a b ]
        (any
        [ any_ (_any:Term'0.t_term)-> (!  [ &a <- _any ]
          (any [ any_ (_any:Term'0.t_term)-> (!  [ &b <- _any ] s1) ] )) ]
        )
      | s1 = bb3 ]

    | bb3 = bb4
    | bb4 = bb5
    | bb5 = bb6
    | bb6 = return' {_0} ]
    ) [ & _0 : Term'0.t_term = any_l () | & a : Term'0.t_term = a | & b : Term'0.t_term = b ]
    [ return' (result:Term'0.t_term)-> (! return' {result}) ]

end
module Cdsat_Term_Impl1_And
  use prelude.prelude.Intrinsic

  use Cdsat_Term_Term_Type as Term'0

  let rec and (a:Term'0.t_term) (b:Term'0.t_term) (return'  (ret:Term'0.t_term))= (! bb0
    [ bb0 = bb1
    | bb1 = bb2
    | bb2 = s0
      [ s0 =  [ &_0 <- Term'0.C_Conj a b ]
        (any
        [ any_ (_any:Term'0.t_term)-> (!  [ &a <- _any ]
          (any [ any_ (_any:Term'0.t_term)-> (!  [ &b <- _any ] s1) ] )) ]
        )
      | s1 = bb3 ]

    | bb3 = bb4
    | bb4 = bb5
    | bb5 = bb6
    | bb6 = return' {_0} ]
    ) [ & _0 : Term'0.t_term = any_l () | & a : Term'0.t_term = a | & b : Term'0.t_term = b ]
    [ return' (result:Term'0.t_term)-> (! return' {result}) ]

end
module Cdsat_Term_Impl1_Or
  use prelude.prelude.Intrinsic

  use Cdsat_Term_Term_Type as Term'0

  let rec or (a:Term'0.t_term) (b:Term'0.t_term) (return'  (ret:Term'0.t_term))= (! bb0
    [ bb0 = bb1
    | bb1 = bb2
    | bb2 = s0
      [ s0 =  [ &_0 <- Term'0.C_Disj a b ]
        (any
        [ any_ (_any:Term'0.t_term)-> (!  [ &a <- _any ]
          (any [ any_ (_any:Term'0.t_term)-> (!  [ &b <- _any ] s1) ] )) ]
        )
      | s1 = bb3 ]

    | bb3 = bb4
    | bb4 = bb5
    | bb5 = bb6
    | bb6 = return' {_0} ]
    ) [ & _0 : Term'0.t_term = any_l () | & a : Term'0.t_term = a | & b : Term'0.t_term = b ]
    [ return' (result:Term'0.t_term)-> (! return' {result}) ]

end
module Cdsat_Term_Impl1_Leq
  let%span span0 = "/Users/xavier/Code/cdsat/src/term.rs" 33 9 33 14

  use prelude.prelude.Intrinsic

  use Cdsat_Term_Term_Type as Term'0

  use prelude.prelude.Borrow

  let rec clone'0 (self:Term'0.t_term) (return'  (ret:Term'0.t_term))= any
    [ return' (result:Term'0.t_term)-> {[%#span0] result = self} (! return' {result}) ]


  let rec leq (a:Term'0.t_term) (b:Term'0.t_term) (return'  (ret:Term'0.t_term))= (! bb0
    [ bb0 = s0 [ s0 = clone'0 {a} (fun (_ret':Term'0.t_term) ->  [ &_6 <- _ret' ] s1) | s1 = bb1 ]
    | bb1 = bb2
    | bb2 = s0 [ s0 = clone'0 {b} (fun (_ret':Term'0.t_term) ->  [ &_9 <- _ret' ] s1) | s1 = bb3 ]
    | bb3 = bb4
    | bb4 = s0
      [ s0 =  [ &_4 <- Term'0.C_Lt _6 _9 ]
        (any
        [ any_ (_any:Term'0.t_term)-> (!  [ &_6 <- _any ]
          (any [ any_ (_any:Term'0.t_term)-> (!  [ &_9 <- _any ] s1) ] )) ]
        )
      | s1 = bb5 ]

    | bb5 = bb6
    | bb6 = bb7
    | bb7 = bb8
    | bb8 = bb9
    | bb9 = s0
      [ s0 =  [ &_12 <- Term'0.C_Eq a b ]
        (any
        [ any_ (_any:Term'0.t_term)-> (!  [ &a <- _any ]
          (any [ any_ (_any:Term'0.t_term)-> (!  [ &b <- _any ] s1) ] )) ]
        )
      | s1 = bb10 ]

    | bb10 = bb11
    | bb11 = bb12
    | bb12 = s0
      [ s0 =  [ &_0 <- Term'0.C_Disj _4 _12 ]
        (any
        [ any_ (_any:Term'0.t_term)-> (!  [ &_4 <- _any ]
          (any [ any_ (_any:Term'0.t_term)-> (!  [ &_12 <- _any ] s1) ] )) ]
        )
      | s1 = bb13 ]

    | bb13 = bb14
    | bb14 = bb15
    | bb15 = bb16
    | bb16 = return' {_0} ]
    )
    [ & _0 : Term'0.t_term = any_l ()
    | & a : Term'0.t_term = a
    | & b : Term'0.t_term = b
    | & _4 : Term'0.t_term = any_l ()
    | & _6 : Term'0.t_term = any_l ()
    | & _9 : Term'0.t_term = any_l ()
    | & _12 : Term'0.t_term = any_l () ]
     [ return' (result:Term'0.t_term)-> (! return' {result}) ]
end
module Cdsat_Term_Impl1_Geq
  use prelude.prelude.Intrinsic

  use Cdsat_Term_Term_Type as Term'0

  let rec leq'0 (a:Term'0.t_term) (b:Term'0.t_term) (return'  (ret:Term'0.t_term))= any
    [ return' (result:Term'0.t_term)-> (! return' {result}) ]


  let rec geq (a:Term'0.t_term) (b:Term'0.t_term) (return'  (ret:Term'0.t_term))= (! bb0
    [ bb0 = s0 [ s0 = leq'0 {b} {a} (fun (_ret':Term'0.t_term) ->  [ &_0 <- _ret' ] s1) | s1 = bb1 ]
    | bb1 = bb2
    | bb2 = bb3
    | bb3 = return' {_0} ]
    ) [ & _0 : Term'0.t_term = any_l () | & a : Term'0.t_term = a | & b : Term'0.t_term = b ]
    [ return' (result:Term'0.t_term)-> (! return' {result}) ]

end
module Cdsat_Term_Impl1_Lt
  use prelude.prelude.Intrinsic

  use Cdsat_Term_Term_Type as Term'0

  let rec lt (a:Term'0.t_term) (b:Term'0.t_term) (return'  (ret:Term'0.t_term))= (! bb0
    [ bb0 = bb1
    | bb1 = bb2
    | bb2 = s0
      [ s0 =  [ &_0 <- Term'0.C_Lt a b ]
        (any
        [ any_ (_any:Term'0.t_term)-> (!  [ &a <- _any ]
          (any [ any_ (_any:Term'0.t_term)-> (!  [ &b <- _any ] s1) ] )) ]
        )
      | s1 = bb3 ]

    | bb3 = bb4
    | bb4 = bb5
    | bb5 = bb6
    | bb6 = return' {_0} ]
    ) [ & _0 : Term'0.t_term = any_l () | & a : Term'0.t_term = a | & b : Term'0.t_term = b ]
    [ return' (result:Term'0.t_term)-> (! return' {result}) ]

end
module Cdsat_Term_Impl1_Eq
  use prelude.prelude.Intrinsic

  use Cdsat_Term_Term_Type as Term'0

  let rec eq_ (a:Term'0.t_term) (b:Term'0.t_term) (return'  (ret:Term'0.t_term))= (! bb0
    [ bb0 = bb1
    | bb1 = bb2
    | bb2 = s0
      [ s0 =  [ &_0 <- Term'0.C_Eq a b ]
        (any
        [ any_ (_any:Term'0.t_term)-> (!  [ &a <- _any ]
          (any [ any_ (_any:Term'0.t_term)-> (!  [ &b <- _any ] s1) ] )) ]
        )
      | s1 = bb3 ]

    | bb3 = bb4
    | bb4 = bb5
    | bb5 = bb6
    | bb6 = return' {_0} ]
    ) [ & _0 : Term'0.t_term = any_l () | & a : Term'0.t_term = a | & b : Term'0.t_term = b ]
    [ return' (result:Term'0.t_term)-> (! return' {result}) ]

end
module Cdsat_Term_Impl22_Fmt
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 230 16 230 21

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 26 20 26 34

  use prelude.prelude.Opaque

  use prelude.prelude.Intrinsic

  use Core_Fmt_Error_Type as Error'0

  use Core_Result_Result_Type as Result'0

  use Core_Fmt_Formatter_Type as Formatter'0

  use prelude.prelude.Borrow

  let rec debug_tuple_field1_finish'0 (self:borrowed (Formatter'0.t_formatter)) (name:string) (value1:dyn) (return'  (ret:Result'0.t_result () (Error'0.t_error)))= any
    [ return' (result:Result'0.t_result () (Error'0.t_error))-> (! return' {result}) ]


  predicate resolve'0 (self : borrowed (Formatter'0.t_formatter)) =
    [%#span1] self.final = self.current

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  use Cdsat_Term_Value_Type as Value'0

  let rec fmt (self:Value'0.t_value) (f:borrowed (Formatter'0.t_formatter)) (return'  (ret:Result'0.t_result () (Error'0.t_error)))= (! bb0
    [ bb0 = any
      [ br0 (a:bool)-> {self = Value'0.C_Bool a} (! bb2)
      | br1 (a:Ratio'0.t_ratio (BigInt'0.t_bigint))-> {self = Value'0.C_Rat a} (! bb3) ]

    | bb1 = s0 [ s0 = -{resolve'0 f}- s1 | s1 = {[%#sterm0] false} any ]
    | bb3 = s0
      [ s0 = Value'0.rat {self} (fun (r0'0:Ratio'0.t_ratio (BigInt'0.t_bigint)) ->  [ &__self_01 <- r0'0 ] s1)
      | s1 = Borrow.borrow_final <Formatter'0.t_formatter> {f.current} {Borrow.get_id f}
          (fun (_ret':borrowed (Formatter'0.t_formatter)) ->
             [ &_12 <- _ret' ]
             [ &f <- { f with current = _12.final ; } ]
            s2)
      | s2 =  [ &_14 <- [%#sterm0] "Rat" ] s3
      | s3 =  [ &_17 <- __self_01 ] s4
      | s4 = debug_tuple_field1_finish'0 {_12} {_14} {_15}
          (fun (_ret':Result'0.t_result () (Error'0.t_error)) ->  [ &_0 <- _ret' ] s5)
      | s5 = bb6 ]

    | bb6 = s0 [ s0 = -{resolve'0 f}- s1 | s1 = bb7 ]
    | bb2 = bb4
    | bb4 = s0
      [ s0 = Value'0.bool {self} (fun (r0'0:bool) ->  [ &__self_0 <- r0'0 ] s1)
      | s1 = Borrow.borrow_final <Formatter'0.t_formatter> {f.current} {Borrow.get_id f}
          (fun (_ret':borrowed (Formatter'0.t_formatter)) ->
             [ &_5 <- _ret' ]
             [ &f <- { f with current = _5.final ; } ]
            s2)
      | s2 =  [ &_7 <- [%#sterm0] "Bool" ] s3
      | s3 =  [ &_10 <- __self_0 ] s4
      | s4 = debug_tuple_field1_finish'0 {_5} {_7} {_8}
          (fun (_ret':Result'0.t_result () (Error'0.t_error)) ->  [ &_0 <- _ret' ] s5)
      | s5 = bb5 ]

    | bb5 = s0 [ s0 = -{resolve'0 f}- s1 | s1 = bb7 ]
    | bb7 = return' {_0} ]
    )
    [ & _0 : Result'0.t_result () (Error'0.t_error) = any_l ()
    | & self : Value'0.t_value = self
    | & f : borrowed (Formatter'0.t_formatter) = f
    | & __self_0 : bool = any_l ()
    | & _5 : borrowed (Formatter'0.t_formatter) = any_l ()
    | & _7 : string = any_l ()
    | & _8 : dyn = any_l ()
    | & _10 : bool = any_l ()
    | & __self_01 : Ratio'0.t_ratio (BigInt'0.t_bigint) = any_l ()
    | & _12 : borrowed (Formatter'0.t_formatter) = any_l ()
    | & _14 : string = any_l ()
    | & _15 : dyn = any_l ()
    | & _17 : Ratio'0.t_ratio (BigInt'0.t_bigint) = any_l () ]
     [ return' (result:Result'0.t_result () (Error'0.t_error))-> (! return' {result}) ]
end
module Cdsat_Term_Impl24_AssertReceiverIsTotalEq
  use Cdsat_Term_Value_Type as Value'0

  use prelude.prelude.Borrow

  use prelude.prelude.Intrinsic

  let rec assert_receiver_is_total_eq (self:Value'0.t_value) (return'  (ret:()))= (! bb0 [ bb0 = return' {_0} ] )
    [ & _0 : () = any_l () ]
     [ return' (result:())-> (! return' {result}) ]
end
module Cdsat_Term_Impl8_Sort
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 263 14 263 18

  let%span sterm1 = "/Users/xavier/Code/cdsat/src/term.rs" 261 14 261 37

  let%span span2 = "/Users/xavier/Code/cdsat/src/theory.rs" 88 8 91 9

  let%span span3 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span4 = "/Users/xavier/Code/cdsat/src/term.rs" 256 8 256 25

  let%span span5 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 90 8 90 31

  let%span span6 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span7 = "/Users/xavier/Code/cdsat/src/term.rs" 28 8 28 25

  use Cdsat_Theory_Sort_Type as Sort'1

  use Cdsat_Theory_Value_Type as Value'1

  function sort'0 [#"/Users/xavier/Code/cdsat/src/theory.rs" 87 4 87 29] (self : Value'1.t_value) : Sort'1.t_sort =
    [%#span2] match self with
      | Value'1.C_Bool _ -> Sort'1.C_Boolean
      | Value'1.C_Rat _ -> Sort'1.C_Rational
      end

  use prelude.prelude.Real

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  function deep_model'2 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  use Cdsat_Term_Value_Type as Value'0

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span3] match self with
      | Value'0.C_Bool b -> Value'1.C_Bool b
      | Value'0.C_Rat br -> Value'1.C_Rat (deep_model'2 br)
      end

  function shallow_model'2 [#"/Users/xavier/Code/cdsat/src/term.rs" 255 4 255 50] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span4] deep_model'1 self

  use prelude.prelude.Borrow

  function shallow_model'1 (self : Value'0.t_value) : Value'1.t_value =
    [%#span5] shallow_model'2 self

  use Cdsat_Term_Sort_Type as Sort'0

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'0.t_sort) : Sort'1.t_sort =
    [%#span6] match self with
      | Sort'0.C_Boolean -> Sort'1.C_Boolean
      | Sort'0.C_Rational -> Sort'1.C_Rational
      end

  function shallow_model'0 [#"/Users/xavier/Code/cdsat/src/term.rs" 27 4 27 50] (self : Sort'0.t_sort) : Sort'1.t_sort =
    [%#span7] deep_model'0 self

  use prelude.prelude.Intrinsic

  let rec sort (self:Value'0.t_value) (return'  (ret:Sort'0.t_sort))= (! bb0
    [ bb0 = any
      [ br0 (a:bool)-> {self = Value'0.C_Bool a} (! bb2)
      | br1 (a:Ratio'0.t_ratio (BigInt'0.t_bigint))-> {self = Value'0.C_Rat a} (! bb3) ]

    | bb1 = {[%#sterm0] false} any
    | bb3 = s0 [ s0 =  [ &_0 <- Sort'0.C_Rational ] s1 | s1 = bb5 ]
    | bb2 = bb4
    | bb4 = s0 [ s0 =  [ &_0 <- Sort'0.C_Boolean ] s1 | s1 = bb5 ]
    | bb5 = return' {_0} ]
    ) [ & _0 : Sort'0.t_sort = any_l () | & self : Value'0.t_value = self ]
    [ return' (result:Sort'0.t_sort)-> {[@expl:postcondition] [%#sterm1] shallow_model'0 result
      = sort'0 (shallow_model'1 self)}
      (! return' {result}) ]

end
module Cdsat_Term_Impl9_True
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 320 20 320 24

  use prelude.prelude.Intrinsic

  use Cdsat_Term_Value_Type as Value'0

  let rec true_ (_1:()) (return'  (ret:Value'0.t_value))= (! bb0
    [ bb0 = s0 [ s0 =  [ &_0 <- Value'0.C_Bool ([%#sterm0] true) ] s1 | s1 = return' {_0} ]  ]
    ) [ & _0 : Value'0.t_value = any_l () ]  [ return' (result:Value'0.t_value)-> (! return' {result}) ]
end
module Cdsat_Term_Impl9_False
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 324 20 324 25

  use prelude.prelude.Intrinsic

  use Cdsat_Term_Value_Type as Value'0

  let rec false_ (_1:()) (return'  (ret:Value'0.t_value))= (! bb0
    [ bb0 = s0 [ s0 =  [ &_0 <- Value'0.C_Bool ([%#sterm0] false) ] s1 | s1 = return' {_0} ]  ]
    ) [ & _0 : Value'0.t_value = any_l () ]  [ return' (result:Value'0.t_value)-> (! return' {result}) ]
end
module Cdsat_Term_Impl9_Zero
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 328 19 328 20

  let%span sterm1 = "/Users/xavier/Code/cdsat/src/term.rs" 328 22 328 23

  use prelude.prelude.Intrinsic

  use Cdsat_Term_Value_Type as Value'0

  use prelude.prelude.Int64

  use prelude.prelude.Int

  let rec rat'0 (a:int64) (b:int64) (return'  (ret:Value'0.t_value))= any
    [ return' (result:Value'0.t_value)-> (! return' {result}) ]


  let rec zero (_1:()) (return'  (ret:Value'0.t_value))= (! bb0
    [ bb0 = s0
      [ s0 = rat'0 {[%#sterm0] (0 : int64)} {[%#sterm1] (1 : int64)}
          (fun (_ret':Value'0.t_value) ->  [ &_0 <- _ret' ] s1)
      | s1 = bb1 ]

    | bb1 = return' {_0} ]
    ) [ & _0 : Value'0.t_value = any_l () ]  [ return' (result:Value'0.t_value)-> (! return' {result}) ]
end
module Hashbrown_Raw_Inner_RawTableInner_Type
  use prelude.prelude.UInt8

  use Core_Ptr_NonNull_NonNull_Type as NonNull'0

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  type t_rawtableinner 'a =
    | C_RawTableInner usize (NonNull'0.t_nonnull uint8) usize usize 'a

  function any_l (_ : 'b) : 'a

  let rec t_rawtableinner < 'a > (input:t_rawtableinner 'a) (ret  (bucket_mask:usize) (ctrl:NonNull'0.t_nonnull uint8) (growth_left:usize) (items:usize) (alloc:'a))= any
    [ good (bucket_mask:usize) (ctrl:NonNull'0.t_nonnull uint8) (growth_left:usize) (items:usize) (alloc:'a)-> {C_RawTableInner bucket_mask ctrl growth_left items alloc
      = input}
      (! ret {bucket_mask} {ctrl} {growth_left} {items} {alloc})
    | bad (bucket_mask:usize) (ctrl:NonNull'0.t_nonnull uint8) (growth_left:usize) (items:usize) (alloc:'a)-> {C_RawTableInner bucket_mask ctrl growth_left items alloc
      <> input}
      {false}
      any ]

end
module Hashbrown_Raw_Inner_RawTable_Type
  use Core_Marker_PhantomData_Type as PhantomData'0

  use Hashbrown_Raw_Inner_RawTableInner_Type as RawTableInner'0

  type t_rawtable 't 'a =
    | C_RawTable (RawTableInner'0.t_rawtableinner 'a) (PhantomData'0.t_phantomdata 't)

  function any_l (_ : 'b) : 'a

  let rec t_rawtable < 't > < 'a > (input:t_rawtable 't 'a) (ret  (table:RawTableInner'0.t_rawtableinner 'a) (marker:PhantomData'0.t_phantomdata 't))= any
    [ good (table:RawTableInner'0.t_rawtableinner 'a) (marker:PhantomData'0.t_phantomdata 't)-> {C_RawTable table marker
      = input}
      (! ret {table} {marker})
    | bad (table:RawTableInner'0.t_rawtableinner 'a) (marker:PhantomData'0.t_phantomdata 't)-> {C_RawTable table marker
      <> input}
      {false}
      any ]

end
module Hashbrown_Raw_Inner_Alloc_Inner_Global_Type
  type t_global  =
    | C_Global

  function any_l (_ : 'b) : 'a

  let rec t_global (input:t_global) (ret  )= any
    [ good -> {C_Global  = input} (! ret) | bad -> {C_Global  <> input} {false} any ]

end
module Indexmap_HashValue_Type
  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  type t_hashvalue  =
    | C_HashValue usize

  function any_l (_ : 'b) : 'a

  let rec t_hashvalue (input:t_hashvalue) (ret  (field_0:usize))= any
    [ good (field_0:usize)-> {C_HashValue field_0 = input} (! ret {field_0})
    | bad (field_0:usize)-> {C_HashValue field_0 <> input} {false} any ]

end
module Indexmap_Bucket_Type
  use Indexmap_HashValue_Type as HashValue'0

  type t_bucket 'k 'v =
    | C_Bucket (HashValue'0.t_hashvalue) 'k 'v

  function any_l (_ : 'b) : 'a

  let rec t_bucket < 'k > < 'v > (input:t_bucket 'k 'v) (ret  (hash:HashValue'0.t_hashvalue) (key:'k) (value:'v))= any
    [ good (hash:HashValue'0.t_hashvalue) (key:'k) (value:'v)-> {C_Bucket hash key value = input}
      (! ret {hash} {key} {value})
    | bad (hash:HashValue'0.t_hashvalue) (key:'k) (value:'v)-> {C_Bucket hash key value <> input} {false} any ]

end
module Indexmap_Map_Core_IndexMapCore_Type
  use Alloc_Alloc_Global_Type as Global'1

  use Indexmap_Bucket_Type as Bucket'0

  use Alloc_Vec_Vec_Type as Vec'0

  use Hashbrown_Raw_Inner_Alloc_Inner_Global_Type as Global'0

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  use Hashbrown_Raw_Inner_RawTable_Type as RawTable'0

  type t_indexmapcore 'k 'v =
    | C_IndexMapCore (RawTable'0.t_rawtable usize (Global'0.t_global)) (Vec'0.t_vec (Bucket'0.t_bucket 'k 'v) (Global'1.t_global))

  function any_l (_ : 'b) : 'a

  let rec t_indexmapcore < 'k > < 'v > (input:t_indexmapcore 'k 'v) (ret  (indices:RawTable'0.t_rawtable usize (Global'0.t_global)) (entries:Vec'0.t_vec (Bucket'0.t_bucket 'k 'v) (Global'1.t_global)))= any
    [ good (indices:RawTable'0.t_rawtable usize (Global'0.t_global)) (entries:Vec'0.t_vec (Bucket'0.t_bucket 'k 'v) (Global'1.t_global))-> {C_IndexMapCore indices entries
      = input}
      (! ret {indices} {entries})
    | bad (indices:RawTable'0.t_rawtable usize (Global'0.t_global)) (entries:Vec'0.t_vec (Bucket'0.t_bucket 'k 'v) (Global'1.t_global))-> {C_IndexMapCore indices entries
      <> input}
      {false}
      any ]

end
module Indexmap_Map_IndexMap_Type
  use Indexmap_Map_Core_IndexMapCore_Type as IndexMapCore'0

  type t_indexmap 'k 'v 's =
    | C_IndexMap (IndexMapCore'0.t_indexmapcore 'k 'v) 's

  function any_l (_ : 'b) : 'a

  let rec t_indexmap < 'k > < 'v > < 's > (input:t_indexmap 'k 'v 's) (ret  (core:IndexMapCore'0.t_indexmapcore 'k 'v) (hash_builder:'s))= any
    [ good (core:IndexMapCore'0.t_indexmapcore 'k 'v) (hash_builder:'s)-> {C_IndexMap core hash_builder = input}
      (! ret {core} {hash_builder})
    | bad (core:IndexMapCore'0.t_indexmapcore 'k 'v) (hash_builder:'s)-> {C_IndexMap core hash_builder <> input}
      {false}
      any ]

end
module Alloc_String_String_Type
  use Alloc_Alloc_Global_Type as Global'0

  use prelude.prelude.UInt8

  use prelude.prelude.Int

  use Alloc_Vec_Vec_Type as Vec'0

  type t_string  =
    | C_String (Vec'0.t_vec uint8 (Global'0.t_global))

  function any_l (_ : 'b) : 'a

  let rec t_string (input:t_string) (ret  (vec:Vec'0.t_vec uint8 (Global'0.t_global)))= any
    [ good (vec:Vec'0.t_vec uint8 (Global'0.t_global))-> {C_String vec = input} (! ret {vec})
    | bad (vec:Vec'0.t_vec uint8 (Global'0.t_global))-> {C_String vec <> input} {false} any ]

end
module Smt2parser_Concrete_Symbol_Type
  use Alloc_String_String_Type as String'0

  type t_symbol  =
    | C_Symbol (String'0.t_string)

  function any_l (_ : 'b) : 'a

  let rec t_symbol (input:t_symbol) (ret  (field_0:String'0.t_string))= any
    [ good (field_0:String'0.t_string)-> {C_Symbol field_0 = input} (! ret {field_0})
    | bad (field_0:String'0.t_string)-> {C_Symbol field_0 <> input} {false} any ]

end
module Std_Hash_Random_RandomState_Type
  use prelude.prelude.UInt64

  use prelude.prelude.Int

  type t_randomstate  =
    | C_RandomState uint64 uint64

  function any_l (_ : 'b) : 'a

  let rec t_randomstate (input:t_randomstate) (ret  (k0:uint64) (k1:uint64))= any
    [ good (k0:uint64) (k1:uint64)-> {C_RandomState k0 k1 = input} (! ret {k0} {k1})
    | bad (k0:uint64) (k1:uint64)-> {C_RandomState k0 k1 <> input} {false} any ]

end
module Smt2parser_Visitors_AttributeValue_Type
  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  type t_attributevalue 'constant' 'symbol 'sexpr =
    | C_None
    | C_Constant 'constant'
    | C_Symbol 'symbol
    | C_SExpr (Vec'0.t_vec 'sexpr (Global'0.t_global))

  function any_l (_ : 'b) : 'a

  let rec none < 'constant' > < 'symbol > < 'sexpr > (input:t_attributevalue 'constant' 'symbol 'sexpr) (ret  )= any
    [ good -> {C_None  = input} (! ret) | bad -> {C_None  <> input} {false} any ]


  let rec constant' < 'constant' > < 'symbol > < 'sexpr > (input:t_attributevalue 'constant' 'symbol 'sexpr) (ret  (field_0:'constant'))= any
    [ good (field_0:'constant')-> {C_Constant field_0 = input} (! ret {field_0})
    | bad (field_0:'constant')-> {C_Constant field_0 <> input} {false} any ]


  let rec symbol < 'constant' > < 'symbol > < 'sexpr > (input:t_attributevalue 'constant' 'symbol 'sexpr) (ret  (field_0:'symbol))= any
    [ good (field_0:'symbol)-> {C_Symbol field_0 = input} (! ret {field_0})
    | bad (field_0:'symbol)-> {C_Symbol field_0 <> input} {false} any ]


  let rec s_expr < 'constant' > < 'symbol > < 'sexpr > (input:t_attributevalue 'constant' 'symbol 'sexpr) (ret  (field_0:Vec'0.t_vec 'sexpr (Global'0.t_global)))= any
    [ good (field_0:Vec'0.t_vec 'sexpr (Global'0.t_global))-> {C_SExpr field_0 = input} (! ret {field_0})
    | bad (field_0:Vec'0.t_vec 'sexpr (Global'0.t_global))-> {C_SExpr field_0 <> input} {false} any ]

end
module Smt2parser_Concrete_Term_Type
  use Smt2parser_Visitors_AttributeValue_Type as AttributeValue'0

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  type t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort =
    | C_Constant 'constant'
    | C_QualIdentifier 'qualidentifier
    | C_Application 'qualidentifier (Vec'0.t_vec (t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort) (Global'0.t_global))
    | C_Let (Vec'0.t_vec ('symbol, t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort) (Global'0.t_global)) (t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort)
    | C_Forall (Vec'0.t_vec ('symbol, 'sort) (Global'0.t_global)) (t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort)
    | C_Exists (Vec'0.t_vec ('symbol, 'sort) (Global'0.t_global)) (t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort)
    | C_Match (t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort) (Vec'0.t_vec (Vec'0.t_vec 'symbol (Global'0.t_global), t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort) (Global'0.t_global))
    | C_Attributes (t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort) (Vec'0.t_vec ('keyword, AttributeValue'0.t_attributevalue 'constant' 'symbol 'sexpr) (Global'0.t_global))

  function any_l (_ : 'b) : 'a

  let rec constant' < 'constant' > < 'qualidentifier > < 'keyword > < 'sexpr > < 'symbol > < 'sort > (input:t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort) (ret  (field_0:'constant'))= any
    [ good (field_0:'constant')-> {C_Constant field_0 = input} (! ret {field_0})
    | bad (field_0:'constant')-> {C_Constant field_0 <> input} {false} any ]


  let rec qual_identifier < 'constant' > < 'qualidentifier > < 'keyword > < 'sexpr > < 'symbol > < 'sort > (input:t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort) (ret  (field_0:'qualidentifier))= any
    [ good (field_0:'qualidentifier)-> {C_QualIdentifier field_0 = input} (! ret {field_0})
    | bad (field_0:'qualidentifier)-> {C_QualIdentifier field_0 <> input} {false} any ]


  let rec application < 'constant' > < 'qualidentifier > < 'keyword > < 'sexpr > < 'symbol > < 'sort > (input:t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort) (ret  (qual_identifier:'qualidentifier) (arguments:Vec'0.t_vec (t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort) (Global'0.t_global)))= any
    [ good (qual_identifier:'qualidentifier) (arguments:Vec'0.t_vec (t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort) (Global'0.t_global))-> {C_Application qual_identifier arguments
      = input}
      (! ret {qual_identifier} {arguments})
    | bad (qual_identifier:'qualidentifier) (arguments:Vec'0.t_vec (t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort) (Global'0.t_global))-> {C_Application qual_identifier arguments
      <> input}
      {false}
      any ]


  let rec let' < 'constant' > < 'qualidentifier > < 'keyword > < 'sexpr > < 'symbol > < 'sort > (input:t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort) (ret  (var_bindings:Vec'0.t_vec ('symbol, t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort) (Global'0.t_global)) (term:t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort))= any
    [ good (var_bindings:Vec'0.t_vec ('symbol, t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort) (Global'0.t_global)) (term:t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort)-> {C_Let var_bindings term
      = input}
      (! ret {var_bindings} {term})
    | bad (var_bindings:Vec'0.t_vec ('symbol, t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort) (Global'0.t_global)) (term:t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort)-> {C_Let var_bindings term
      <> input}
      {false}
      any ]


  let rec forall' < 'constant' > < 'qualidentifier > < 'keyword > < 'sexpr > < 'symbol > < 'sort > (input:t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort) (ret  (vars:Vec'0.t_vec ('symbol, 'sort) (Global'0.t_global)) (term:t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort))= any
    [ good (vars:Vec'0.t_vec ('symbol, 'sort) (Global'0.t_global)) (term:t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort)-> {C_Forall vars term
      = input}
      (! ret {vars} {term})
    | bad (vars:Vec'0.t_vec ('symbol, 'sort) (Global'0.t_global)) (term:t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort)-> {C_Forall vars term
      <> input}
      {false}
      any ]


  let rec exists' < 'constant' > < 'qualidentifier > < 'keyword > < 'sexpr > < 'symbol > < 'sort > (input:t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort) (ret  (vars:Vec'0.t_vec ('symbol, 'sort) (Global'0.t_global)) (term:t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort))= any
    [ good (vars:Vec'0.t_vec ('symbol, 'sort) (Global'0.t_global)) (term:t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort)-> {C_Exists vars term
      = input}
      (! ret {vars} {term})
    | bad (vars:Vec'0.t_vec ('symbol, 'sort) (Global'0.t_global)) (term:t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort)-> {C_Exists vars term
      <> input}
      {false}
      any ]


  let rec match' < 'constant' > < 'qualidentifier > < 'keyword > < 'sexpr > < 'symbol > < 'sort > (input:t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort) (ret  (term:t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort) (cases:Vec'0.t_vec (Vec'0.t_vec 'symbol (Global'0.t_global), t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort) (Global'0.t_global)))= any
    [ good (term:t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort) (cases:Vec'0.t_vec (Vec'0.t_vec 'symbol (Global'0.t_global), t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort) (Global'0.t_global))-> {C_Match term cases
      = input}
      (! ret {term} {cases})
    | bad (term:t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort) (cases:Vec'0.t_vec (Vec'0.t_vec 'symbol (Global'0.t_global), t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort) (Global'0.t_global))-> {C_Match term cases
      <> input}
      {false}
      any ]


  let rec attributes < 'constant' > < 'qualidentifier > < 'keyword > < 'sexpr > < 'symbol > < 'sort > (input:t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort) (ret  (term:t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort) (attributes:Vec'0.t_vec ('keyword, AttributeValue'0.t_attributevalue 'constant' 'symbol 'sexpr) (Global'0.t_global)))= any
    [ good (term:t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort) (attributes:Vec'0.t_vec ('keyword, AttributeValue'0.t_attributevalue 'constant' 'symbol 'sexpr) (Global'0.t_global))-> {C_Attributes term attributes
      = input}
      (! ret {term} {attributes})
    | bad (term:t_term 'constant' 'qualidentifier 'keyword 'sexpr 'symbol 'sort) (attributes:Vec'0.t_vec ('keyword, AttributeValue'0.t_attributevalue 'constant' 'symbol 'sexpr) (Global'0.t_global))-> {C_Attributes term attributes
      <> input}
      {false}
      any ]

end
module Smt2parser_Concrete_Constant_Type
  use Alloc_String_String_Type as String'0

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UInt8

  use prelude.prelude.Int

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  use NumBigint_Biguint_BigUint_Type as BigUint'0

  type t_constant  =
    | C_Numeral (BigUint'0.t_biguint)
    | C_Decimal (Ratio'0.t_ratio (BigInt'0.t_bigint))
    | C_Hexadecimal (Vec'0.t_vec uint8 (Global'0.t_global))
    | C_Binary (Vec'0.t_vec bool (Global'0.t_global))
    | C_String (String'0.t_string)

  function any_l (_ : 'b) : 'a

  let rec numeral (input:t_constant) (ret  (field_0:BigUint'0.t_biguint))= any
    [ good (field_0:BigUint'0.t_biguint)-> {C_Numeral field_0 = input} (! ret {field_0})
    | bad (field_0:BigUint'0.t_biguint)-> {C_Numeral field_0 <> input} {false} any ]


  let rec decimal (input:t_constant) (ret  (field_0:Ratio'0.t_ratio (BigInt'0.t_bigint)))= any
    [ good (field_0:Ratio'0.t_ratio (BigInt'0.t_bigint))-> {C_Decimal field_0 = input} (! ret {field_0})
    | bad (field_0:Ratio'0.t_ratio (BigInt'0.t_bigint))-> {C_Decimal field_0 <> input} {false} any ]


  let rec hexadecimal (input:t_constant) (ret  (field_0:Vec'0.t_vec uint8 (Global'0.t_global)))= any
    [ good (field_0:Vec'0.t_vec uint8 (Global'0.t_global))-> {C_Hexadecimal field_0 = input} (! ret {field_0})
    | bad (field_0:Vec'0.t_vec uint8 (Global'0.t_global))-> {C_Hexadecimal field_0 <> input} {false} any ]


  let rec binary (input:t_constant) (ret  (field_0:Vec'0.t_vec bool (Global'0.t_global)))= any
    [ good (field_0:Vec'0.t_vec bool (Global'0.t_global))-> {C_Binary field_0 = input} (! ret {field_0})
    | bad (field_0:Vec'0.t_vec bool (Global'0.t_global))-> {C_Binary field_0 <> input} {false} any ]


  let rec string (input:t_constant) (ret  (field_0:String'0.t_string))= any
    [ good (field_0:String'0.t_string)-> {C_String field_0 = input} (! ret {field_0})
    | bad (field_0:String'0.t_string)-> {C_String field_0 <> input} {false} any ]

end
module Smt2parser_Concrete_QualIdentifier_Type
  type t_qualidentifier 'identifier 'sort =
    | C_Simple 'identifier
    | C_Sorted 'identifier 'sort

  function any_l (_ : 'b) : 'a

  let rec simple < 'identifier > < 'sort > (input:t_qualidentifier 'identifier 'sort) (ret  (identifier:'identifier))= any
    [ good (identifier:'identifier)-> {C_Simple identifier = input} (! ret {identifier})
    | bad (identifier:'identifier)-> {C_Simple identifier <> input} {false} any ]


  let rec sorted < 'identifier > < 'sort > (input:t_qualidentifier 'identifier 'sort) (ret  (identifier:'identifier) (sort:'sort))= any
    [ good (identifier:'identifier) (sort:'sort)-> {C_Sorted identifier sort = input} (! ret {identifier} {sort})
    | bad (identifier:'identifier) (sort:'sort)-> {C_Sorted identifier sort <> input} {false} any ]

end
module Smt2parser_Visitors_Index_Type
  use NumBigint_Biguint_BigUint_Type as BigUint'0

  type t_index 'symbol =
    | C_Numeral (BigUint'0.t_biguint)
    | C_Symbol 'symbol

  function any_l (_ : 'b) : 'a

  let rec numeral < 'symbol > (input:t_index 'symbol) (ret  (field_0:BigUint'0.t_biguint))= any
    [ good (field_0:BigUint'0.t_biguint)-> {C_Numeral field_0 = input} (! ret {field_0})
    | bad (field_0:BigUint'0.t_biguint)-> {C_Numeral field_0 <> input} {false} any ]


  let rec symbol < 'symbol > (input:t_index 'symbol) (ret  (field_0:'symbol))= any
    [ good (field_0:'symbol)-> {C_Symbol field_0 = input} (! ret {field_0})
    | bad (field_0:'symbol)-> {C_Symbol field_0 <> input} {false} any ]

end
module Smt2parser_Visitors_Identifier_Type
  use Alloc_Alloc_Global_Type as Global'0

  use Smt2parser_Visitors_Index_Type as Index'0

  use Alloc_Vec_Vec_Type as Vec'0

  type t_identifier 'symbol =
    | C_Simple 'symbol
    | C_Indexed 'symbol (Vec'0.t_vec (Index'0.t_index 'symbol) (Global'0.t_global))

  function any_l (_ : 'b) : 'a

  let rec simple < 'symbol > (input:t_identifier 'symbol) (ret  (symbol:'symbol))= any
    [ good (symbol:'symbol)-> {C_Simple symbol = input} (! ret {symbol})
    | bad (symbol:'symbol)-> {C_Simple symbol <> input} {false} any ]


  let rec indexed < 'symbol > (input:t_identifier 'symbol) (ret  (symbol:'symbol) (indices:Vec'0.t_vec (Index'0.t_index 'symbol) (Global'0.t_global)))= any
    [ good (symbol:'symbol) (indices:Vec'0.t_vec (Index'0.t_index 'symbol) (Global'0.t_global))-> {C_Indexed symbol indices
      = input}
      (! ret {symbol} {indices})
    | bad (symbol:'symbol) (indices:Vec'0.t_vec (Index'0.t_index 'symbol) (Global'0.t_global))-> {C_Indexed symbol indices
      <> input}
      {false}
      any ]

end
module Smt2parser_Concrete_Sort_Type
  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  type t_sort 'identifier =
    | C_Simple 'identifier
    | C_Parameterized 'identifier (Vec'0.t_vec (t_sort 'identifier) (Global'0.t_global))

  function any_l (_ : 'b) : 'a

  let rec simple < 'identifier > (input:t_sort 'identifier) (ret  (identifier:'identifier))= any
    [ good (identifier:'identifier)-> {C_Simple identifier = input} (! ret {identifier})
    | bad (identifier:'identifier)-> {C_Simple identifier <> input} {false} any ]


  let rec parameterized < 'identifier > (input:t_sort 'identifier) (ret  (identifier:'identifier) (parameters:Vec'0.t_vec (t_sort 'identifier) (Global'0.t_global)))= any
    [ good (identifier:'identifier) (parameters:Vec'0.t_vec (t_sort 'identifier) (Global'0.t_global))-> {C_Parameterized identifier parameters
      = input}
      (! ret {identifier} {parameters})
    | bad (identifier:'identifier) (parameters:Vec'0.t_vec (t_sort 'identifier) (Global'0.t_global))-> {C_Parameterized identifier parameters
      <> input}
      {false}
      any ]

end
module Smt2parser_Concrete_Keyword_Type
  use Alloc_String_String_Type as String'0

  type t_keyword  =
    | C_Keyword (String'0.t_string)

  function any_l (_ : 'b) : 'a

  let rec t_keyword (input:t_keyword) (ret  (field_0:String'0.t_string))= any
    [ good (field_0:String'0.t_string)-> {C_Keyword field_0 = input} (! ret {field_0})
    | bad (field_0:String'0.t_string)-> {C_Keyword field_0 <> input} {false} any ]

end
module Smt2parser_Concrete_SExpr_Type
  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  type t_sexpr 'constant' 'symbol 'keyword =
    | C_Constant 'constant'
    | C_Symbol 'symbol
    | C_Keyword 'keyword
    | C_Application (Vec'0.t_vec (t_sexpr 'constant' 'symbol 'keyword) (Global'0.t_global))

  function any_l (_ : 'b) : 'a

  let rec constant' < 'constant' > < 'symbol > < 'keyword > (input:t_sexpr 'constant' 'symbol 'keyword) (ret  (field_0:'constant'))= any
    [ good (field_0:'constant')-> {C_Constant field_0 = input} (! ret {field_0})
    | bad (field_0:'constant')-> {C_Constant field_0 <> input} {false} any ]


  let rec symbol < 'constant' > < 'symbol > < 'keyword > (input:t_sexpr 'constant' 'symbol 'keyword) (ret  (field_0:'symbol))= any
    [ good (field_0:'symbol)-> {C_Symbol field_0 = input} (! ret {field_0})
    | bad (field_0:'symbol)-> {C_Symbol field_0 <> input} {false} any ]


  let rec keyword < 'constant' > < 'symbol > < 'keyword > (input:t_sexpr 'constant' 'symbol 'keyword) (ret  (field_0:'keyword))= any
    [ good (field_0:'keyword)-> {C_Keyword field_0 = input} (! ret {field_0})
    | bad (field_0:'keyword)-> {C_Keyword field_0 <> input} {false} any ]


  let rec application < 'constant' > < 'symbol > < 'keyword > (input:t_sexpr 'constant' 'symbol 'keyword) (ret  (field_0:Vec'0.t_vec (t_sexpr 'constant' 'symbol 'keyword) (Global'0.t_global)))= any
    [ good (field_0:Vec'0.t_vec (t_sexpr 'constant' 'symbol 'keyword) (Global'0.t_global))-> {C_Application field_0
      = input}
      (! ret {field_0})
    | bad (field_0:Vec'0.t_vec (t_sexpr 'constant' 'symbol 'keyword) (Global'0.t_global))-> {C_Application field_0
      <> input}
      {false}
      any ]

end
module Cdsat_TermToTerm_Closure0_Type
  use Cdsat_Term_Term_Type as Term'1

  use Smt2parser_Concrete_Keyword_Type as Keyword'0

  use Smt2parser_Concrete_Symbol_Type as Symbol'0

  use Smt2parser_Concrete_Constant_Type as Constant'0

  use Smt2parser_Concrete_SExpr_Type as SExpr'0

  use Smt2parser_Visitors_Identifier_Type as Identifier'0

  use Smt2parser_Concrete_Sort_Type as Sort'1

  use Smt2parser_Concrete_QualIdentifier_Type as QualIdentifier'0

  use Smt2parser_Concrete_Term_Type as Term'0

  use prelude.prelude.Int16

  use Std_Hash_Random_RandomState_Type as RandomState'0

  use Cdsat_Term_Sort_Type as Sort'0

  use Indexmap_Map_IndexMap_Type as IndexMap'0

  use prelude.prelude.Borrow

  type cdsat_termtoterm_closure0  =
    | Cdsat_termtoterm_closure0 (IndexMap'0.t_indexmap (Symbol'0.t_symbol) (Sort'0.t_sort) (RandomState'0.t_randomstate))

  let rec cdsat_termtoterm_closure0 (input:cdsat_termtoterm_closure0) (ret  (vars:IndexMap'0.t_indexmap (Symbol'0.t_symbol) (Sort'0.t_sort) (RandomState'0.t_randomstate)))= any
    [ good (vars:IndexMap'0.t_indexmap (Symbol'0.t_symbol) (Sort'0.t_sort) (RandomState'0.t_randomstate))-> {Cdsat_termtoterm_closure0 vars
      = input}
      (! ret {vars})
    | bad (vars:IndexMap'0.t_indexmap (Symbol'0.t_symbol) (Sort'0.t_sort) (RandomState'0.t_randomstate))-> {Cdsat_termtoterm_closure0 vars
      <> input}
      {false}
      any ]

end
module Cdsat_TermToTerm_Closure0
  let%span span0 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 26 20 26 34

  use prelude.prelude.Int16

  use prelude.prelude.Borrow

  use Std_Hash_Random_RandomState_Type as RandomState'0

  use Cdsat_Term_Sort_Type as Sort'0

  use Smt2parser_Concrete_Symbol_Type as Symbol'0

  use Indexmap_Map_IndexMap_Type as IndexMap'0

  use Cdsat_Term_Term_Type as Term'0

  use Smt2parser_Concrete_Keyword_Type as Keyword'0

  use Smt2parser_Concrete_Constant_Type as Constant'0

  use Smt2parser_Concrete_SExpr_Type as SExpr'0

  use Smt2parser_Visitors_Identifier_Type as Identifier'0

  use Smt2parser_Concrete_Sort_Type as Sort'1

  use Smt2parser_Concrete_QualIdentifier_Type as QualIdentifier'0

  use Smt2parser_Concrete_Term_Type as Term'1

  use Cdsat_TermToTerm_Closure0_Type as Closure'0

  function field_0'0 [#"/Users/xavier/Code/cdsat/src/main.rs" 96 42 96 45] (self : Closure'0.cdsat_termtoterm_closure0) : IndexMap'0.t_indexmap (Symbol'0.t_symbol) (Sort'0.t_sort) (RandomState'0.t_randomstate)

   =
    let Closure'0.Cdsat_termtoterm_closure0 a = self in a

  predicate unnest'0 [#"/Users/xavier/Code/cdsat/src/main.rs" 96 42 96 45] (self : Closure'0.cdsat_termtoterm_closure0) (_2 : Closure'0.cdsat_termtoterm_closure0)

   =
    field_0'0 _2 = field_0'0 self

  use prelude.prelude.Intrinsic

  let rec term_to_term'0 (vars:IndexMap'0.t_indexmap (Symbol'0.t_symbol) (Sort'0.t_sort) (RandomState'0.t_randomstate)) (t:Term'1.t_term (Constant'0.t_constant) (QualIdentifier'0.t_qualidentifier (Identifier'0.t_identifier (Symbol'0.t_symbol)) (Sort'1.t_sort (Identifier'0.t_identifier (Symbol'0.t_symbol)))) (Keyword'0.t_keyword) (SExpr'0.t_sexpr (Constant'0.t_constant) (Symbol'0.t_symbol) (Keyword'0.t_keyword)) (Symbol'0.t_symbol) (Sort'1.t_sort (Identifier'0.t_identifier (Symbol'0.t_symbol)))) (return'  (ret:Term'0.t_term))= any
    [ return' (result:Term'0.t_term)-> (! return' {result}) ]


  predicate resolve'0 (self : borrowed Closure'0.cdsat_termtoterm_closure0) =
    [%#span0] self.final = self.current

  let rec cdsat_termtoterm_closure0 (_1:borrowed Closure'0.cdsat_termtoterm_closure0) (a:Term'1.t_term (Constant'0.t_constant) (QualIdentifier'0.t_qualidentifier (Identifier'0.t_identifier (Symbol'0.t_symbol)) (Sort'1.t_sort (Identifier'0.t_identifier (Symbol'0.t_symbol)))) (Keyword'0.t_keyword) (SExpr'0.t_sexpr (Constant'0.t_constant) (Symbol'0.t_symbol) (Keyword'0.t_keyword)) (Symbol'0.t_symbol) (Sort'1.t_sort (Identifier'0.t_identifier (Symbol'0.t_symbol)))) (return'  (ret:Term'0.t_term))= (! bb0
    [ bb0 = s0
      [ s0 = -{resolve'0 _1}- s1
      | s1 = Closure'0.cdsat_termtoterm_closure0 {_1.current}
          (fun (r'0:IndexMap'0.t_indexmap (Symbol'0.t_symbol) (Sort'0.t_sort) (RandomState'0.t_randomstate)) ->
            term_to_term'0 {r'0} {a} (fun (_ret':Term'0.t_term) ->  [ &_0 <- _ret' ] s2))
      | s2 = bb1 ]

    | bb1 = bb2
    | bb2 = return' {_0} ]
    )
    [ & _0 : Term'0.t_term = any_l ()
    | & _1 : borrowed Closure'0.cdsat_termtoterm_closure0 = _1
    | & a : Term'1.t_term (Constant'0.t_constant) (QualIdentifier'0.t_qualidentifier (Identifier'0.t_identifier (Symbol'0.t_symbol)) (Sort'1.t_sort (Identifier'0.t_identifier (Symbol'0.t_symbol)))) (Keyword'0.t_keyword) (SExpr'0.t_sexpr (Constant'0.t_constant) (Symbol'0.t_symbol) (Keyword'0.t_keyword)) (Symbol'0.t_symbol) (Sort'1.t_sort (Identifier'0.t_identifier (Symbol'0.t_symbol))) = a ]
     [ return' (result:Term'0.t_term)-> {[@expl:postcondition] unnest'0 _1.current _1.final} (! return' {result}) ]
end
module Smt2parser_Visitors_ConstructorDec_Type
  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  type t_constructordec 'symbol 'sort =
    | C_ConstructorDec 'symbol (Vec'0.t_vec ('symbol, 'sort) (Global'0.t_global))

  function any_l (_ : 'b) : 'a

  let rec t_constructordec < 'symbol > < 'sort > (input:t_constructordec 'symbol 'sort) (ret  (symbol:'symbol) (selectors:Vec'0.t_vec ('symbol, 'sort) (Global'0.t_global)))= any
    [ good (symbol:'symbol) (selectors:Vec'0.t_vec ('symbol, 'sort) (Global'0.t_global))-> {C_ConstructorDec symbol selectors
      = input}
      (! ret {symbol} {selectors})
    | bad (symbol:'symbol) (selectors:Vec'0.t_vec ('symbol, 'sort) (Global'0.t_global))-> {C_ConstructorDec symbol selectors
      <> input}
      {false}
      any ]

end
module Smt2parser_Visitors_DatatypeDec_Type
  use Smt2parser_Visitors_ConstructorDec_Type as ConstructorDec'0

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  type t_datatypedec 'symbol 'sort =
    | C_DatatypeDec (Vec'0.t_vec 'symbol (Global'0.t_global)) (Vec'0.t_vec (ConstructorDec'0.t_constructordec 'symbol 'sort) (Global'0.t_global))

  function any_l (_ : 'b) : 'a

  let rec t_datatypedec < 'symbol > < 'sort > (input:t_datatypedec 'symbol 'sort) (ret  (parameters:Vec'0.t_vec 'symbol (Global'0.t_global)) (constructors:Vec'0.t_vec (ConstructorDec'0.t_constructordec 'symbol 'sort) (Global'0.t_global)))= any
    [ good (parameters:Vec'0.t_vec 'symbol (Global'0.t_global)) (constructors:Vec'0.t_vec (ConstructorDec'0.t_constructordec 'symbol 'sort) (Global'0.t_global))-> {C_DatatypeDec parameters constructors
      = input}
      (! ret {parameters} {constructors})
    | bad (parameters:Vec'0.t_vec 'symbol (Global'0.t_global)) (constructors:Vec'0.t_vec (ConstructorDec'0.t_constructordec 'symbol 'sort) (Global'0.t_global))-> {C_DatatypeDec parameters constructors
      <> input}
      {false}
      any ]

end
module Smt2parser_Visitors_FunctionDec_Type
  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  type t_functiondec 'symbol 'sort =
    | C_FunctionDec 'symbol (Vec'0.t_vec ('symbol, 'sort) (Global'0.t_global)) 'sort

  function any_l (_ : 'b) : 'a

  let rec t_functiondec < 'symbol > < 'sort > (input:t_functiondec 'symbol 'sort) (ret  (name:'symbol) (parameters:Vec'0.t_vec ('symbol, 'sort) (Global'0.t_global)) (result:'sort))= any
    [ good (name:'symbol) (parameters:Vec'0.t_vec ('symbol, 'sort) (Global'0.t_global)) (result:'sort)-> {C_FunctionDec name parameters result
      = input}
      (! ret {name} {parameters} {result})
    | bad (name:'symbol) (parameters:Vec'0.t_vec ('symbol, 'sort) (Global'0.t_global)) (result:'sort)-> {C_FunctionDec name parameters result
      <> input}
      {false}
      any ]

end
module Smt2parser_Concrete_Command_Type
  use Smt2parser_Visitors_AttributeValue_Type as AttributeValue'0

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use Alloc_String_String_Type as String'0

  use Smt2parser_Visitors_FunctionDec_Type as FunctionDec'0

  use NumBigint_Biguint_BigUint_Type as BigUint'0

  use Smt2parser_Visitors_DatatypeDec_Type as DatatypeDec'0

  type t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr =
    | C_Assert 'term
    | C_CheckSat
    | C_CheckSatAssuming (Vec'0.t_vec ('symbol, bool) (Global'0.t_global))
    | C_DeclareConst 'symbol 'sort
    | C_DeclareDatatype 'symbol (DatatypeDec'0.t_datatypedec 'symbol 'sort)
    | C_DeclareDatatypes (Vec'0.t_vec ('symbol, BigUint'0.t_biguint, DatatypeDec'0.t_datatypedec 'symbol 'sort) (Global'0.t_global))
    | C_DeclareFun 'symbol (Vec'0.t_vec 'sort (Global'0.t_global)) 'sort
    | C_DeclareSort 'symbol (BigUint'0.t_biguint)
    | C_DefineFun (FunctionDec'0.t_functiondec 'symbol 'sort) 'term
    | C_DefineFunRec (FunctionDec'0.t_functiondec 'symbol 'sort) 'term
    | C_DefineFunsRec (Vec'0.t_vec (FunctionDec'0.t_functiondec 'symbol 'sort, 'term) (Global'0.t_global))
    | C_DefineSort 'symbol (Vec'0.t_vec 'symbol (Global'0.t_global)) 'sort
    | C_Echo (String'0.t_string)
    | C_Exit
    | C_GetAssertions
    | C_GetAssignment
    | C_GetInfo 'keyword
    | C_GetModel
    | C_GetOption 'keyword
    | C_GetProof
    | C_GetUnsatAssumptions
    | C_GetUnsatCore
    | C_GetValue (Vec'0.t_vec 'term (Global'0.t_global))
    | C_Pop (BigUint'0.t_biguint)
    | C_Push (BigUint'0.t_biguint)
    | C_Reset
    | C_ResetAssertions
    | C_SetInfo 'keyword (AttributeValue'0.t_attributevalue 'constant' 'symbol 'sexpr)
    | C_SetLogic 'symbol
    | C_SetOption 'keyword (AttributeValue'0.t_attributevalue 'constant' 'symbol 'sexpr)

  function any_l (_ : 'b) : 'a

  let rec assert' < 'term > < 'symbol > < 'sort > < 'keyword > < 'constant' > < 'sexpr > (input:t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr) (ret  (term:'term))= any
    [ good (term:'term)-> {C_Assert term = input} (! ret {term})
    | bad (term:'term)-> {C_Assert term <> input} {false} any ]


  let rec check_sat < 'term > < 'symbol > < 'sort > < 'keyword > < 'constant' > < 'sexpr > (input:t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr) (ret  )= any
    [ good -> {C_CheckSat  = input} (! ret) | bad -> {C_CheckSat  <> input} {false} any ]


  let rec check_sat_assuming < 'term > < 'symbol > < 'sort > < 'keyword > < 'constant' > < 'sexpr > (input:t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr) (ret  (literals:Vec'0.t_vec ('symbol, bool) (Global'0.t_global)))= any
    [ good (literals:Vec'0.t_vec ('symbol, bool) (Global'0.t_global))-> {C_CheckSatAssuming literals = input}
      (! ret {literals})
    | bad (literals:Vec'0.t_vec ('symbol, bool) (Global'0.t_global))-> {C_CheckSatAssuming literals <> input}
      {false}
      any ]


  let rec declare_const < 'term > < 'symbol > < 'sort > < 'keyword > < 'constant' > < 'sexpr > (input:t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr) (ret  (symbol:'symbol) (sort:'sort))= any
    [ good (symbol:'symbol) (sort:'sort)-> {C_DeclareConst symbol sort = input} (! ret {symbol} {sort})
    | bad (symbol:'symbol) (sort:'sort)-> {C_DeclareConst symbol sort <> input} {false} any ]


  let rec declare_datatype < 'term > < 'symbol > < 'sort > < 'keyword > < 'constant' > < 'sexpr > (input:t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr) (ret  (symbol:'symbol) (datatype:DatatypeDec'0.t_datatypedec 'symbol 'sort))= any
    [ good (symbol:'symbol) (datatype:DatatypeDec'0.t_datatypedec 'symbol 'sort)-> {C_DeclareDatatype symbol datatype
      = input}
      (! ret {symbol} {datatype})
    | bad (symbol:'symbol) (datatype:DatatypeDec'0.t_datatypedec 'symbol 'sort)-> {C_DeclareDatatype symbol datatype
      <> input}
      {false}
      any ]


  let rec declare_datatypes < 'term > < 'symbol > < 'sort > < 'keyword > < 'constant' > < 'sexpr > (input:t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr) (ret  (datatypes:Vec'0.t_vec ('symbol, BigUint'0.t_biguint, DatatypeDec'0.t_datatypedec 'symbol 'sort) (Global'0.t_global)))= any
    [ good (datatypes:Vec'0.t_vec ('symbol, BigUint'0.t_biguint, DatatypeDec'0.t_datatypedec 'symbol 'sort) (Global'0.t_global))-> {C_DeclareDatatypes datatypes
      = input}
      (! ret {datatypes})
    | bad (datatypes:Vec'0.t_vec ('symbol, BigUint'0.t_biguint, DatatypeDec'0.t_datatypedec 'symbol 'sort) (Global'0.t_global))-> {C_DeclareDatatypes datatypes
      <> input}
      {false}
      any ]


  let rec declare_fun < 'term > < 'symbol > < 'sort > < 'keyword > < 'constant' > < 'sexpr > (input:t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr) (ret  (symbol:'symbol) (parameters:Vec'0.t_vec 'sort (Global'0.t_global)) (sort:'sort))= any
    [ good (symbol:'symbol) (parameters:Vec'0.t_vec 'sort (Global'0.t_global)) (sort:'sort)-> {C_DeclareFun symbol parameters sort
      = input}
      (! ret {symbol} {parameters} {sort})
    | bad (symbol:'symbol) (parameters:Vec'0.t_vec 'sort (Global'0.t_global)) (sort:'sort)-> {C_DeclareFun symbol parameters sort
      <> input}
      {false}
      any ]


  let rec declare_sort < 'term > < 'symbol > < 'sort > < 'keyword > < 'constant' > < 'sexpr > (input:t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr) (ret  (symbol:'symbol) (arity:BigUint'0.t_biguint))= any
    [ good (symbol:'symbol) (arity:BigUint'0.t_biguint)-> {C_DeclareSort symbol arity = input} (! ret {symbol} {arity})
    | bad (symbol:'symbol) (arity:BigUint'0.t_biguint)-> {C_DeclareSort symbol arity <> input} {false} any ]


  let rec define_fun < 'term > < 'symbol > < 'sort > < 'keyword > < 'constant' > < 'sexpr > (input:t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr) (ret  (sig:FunctionDec'0.t_functiondec 'symbol 'sort) (term:'term))= any
    [ good (sig:FunctionDec'0.t_functiondec 'symbol 'sort) (term:'term)-> {C_DefineFun sig term = input}
      (! ret {sig} {term})
    | bad (sig:FunctionDec'0.t_functiondec 'symbol 'sort) (term:'term)-> {C_DefineFun sig term <> input} {false} any ]


  let rec define_fun_rec < 'term > < 'symbol > < 'sort > < 'keyword > < 'constant' > < 'sexpr > (input:t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr) (ret  (sig:FunctionDec'0.t_functiondec 'symbol 'sort) (term:'term))= any
    [ good (sig:FunctionDec'0.t_functiondec 'symbol 'sort) (term:'term)-> {C_DefineFunRec sig term = input}
      (! ret {sig} {term})
    | bad (sig:FunctionDec'0.t_functiondec 'symbol 'sort) (term:'term)-> {C_DefineFunRec sig term <> input}
      {false}
      any ]


  let rec define_funs_rec < 'term > < 'symbol > < 'sort > < 'keyword > < 'constant' > < 'sexpr > (input:t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr) (ret  (funs:Vec'0.t_vec (FunctionDec'0.t_functiondec 'symbol 'sort, 'term) (Global'0.t_global)))= any
    [ good (funs:Vec'0.t_vec (FunctionDec'0.t_functiondec 'symbol 'sort, 'term) (Global'0.t_global))-> {C_DefineFunsRec funs
      = input}
      (! ret {funs})
    | bad (funs:Vec'0.t_vec (FunctionDec'0.t_functiondec 'symbol 'sort, 'term) (Global'0.t_global))-> {C_DefineFunsRec funs
      <> input}
      {false}
      any ]


  let rec define_sort < 'term > < 'symbol > < 'sort > < 'keyword > < 'constant' > < 'sexpr > (input:t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr) (ret  (symbol:'symbol) (parameters:Vec'0.t_vec 'symbol (Global'0.t_global)) (sort:'sort))= any
    [ good (symbol:'symbol) (parameters:Vec'0.t_vec 'symbol (Global'0.t_global)) (sort:'sort)-> {C_DefineSort symbol parameters sort
      = input}
      (! ret {symbol} {parameters} {sort})
    | bad (symbol:'symbol) (parameters:Vec'0.t_vec 'symbol (Global'0.t_global)) (sort:'sort)-> {C_DefineSort symbol parameters sort
      <> input}
      {false}
      any ]


  let rec echo < 'term > < 'symbol > < 'sort > < 'keyword > < 'constant' > < 'sexpr > (input:t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr) (ret  (message:String'0.t_string))= any
    [ good (message:String'0.t_string)-> {C_Echo message = input} (! ret {message})
    | bad (message:String'0.t_string)-> {C_Echo message <> input} {false} any ]


  let rec exit < 'term > < 'symbol > < 'sort > < 'keyword > < 'constant' > < 'sexpr > (input:t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr) (ret  )= any
    [ good -> {C_Exit  = input} (! ret) | bad -> {C_Exit  <> input} {false} any ]


  let rec get_assertions < 'term > < 'symbol > < 'sort > < 'keyword > < 'constant' > < 'sexpr > (input:t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr) (ret  )= any
    [ good -> {C_GetAssertions  = input} (! ret) | bad -> {C_GetAssertions  <> input} {false} any ]


  let rec get_assignment < 'term > < 'symbol > < 'sort > < 'keyword > < 'constant' > < 'sexpr > (input:t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr) (ret  )= any
    [ good -> {C_GetAssignment  = input} (! ret) | bad -> {C_GetAssignment  <> input} {false} any ]


  let rec get_info < 'term > < 'symbol > < 'sort > < 'keyword > < 'constant' > < 'sexpr > (input:t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr) (ret  (flag:'keyword))= any
    [ good (flag:'keyword)-> {C_GetInfo flag = input} (! ret {flag})
    | bad (flag:'keyword)-> {C_GetInfo flag <> input} {false} any ]


  let rec get_model < 'term > < 'symbol > < 'sort > < 'keyword > < 'constant' > < 'sexpr > (input:t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr) (ret  )= any
    [ good -> {C_GetModel  = input} (! ret) | bad -> {C_GetModel  <> input} {false} any ]


  let rec get_option < 'term > < 'symbol > < 'sort > < 'keyword > < 'constant' > < 'sexpr > (input:t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr) (ret  (keyword:'keyword))= any
    [ good (keyword:'keyword)-> {C_GetOption keyword = input} (! ret {keyword})
    | bad (keyword:'keyword)-> {C_GetOption keyword <> input} {false} any ]


  let rec get_proof < 'term > < 'symbol > < 'sort > < 'keyword > < 'constant' > < 'sexpr > (input:t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr) (ret  )= any
    [ good -> {C_GetProof  = input} (! ret) | bad -> {C_GetProof  <> input} {false} any ]


  let rec get_unsat_assumptions < 'term > < 'symbol > < 'sort > < 'keyword > < 'constant' > < 'sexpr > (input:t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr) (ret  )= any
    [ good -> {C_GetUnsatAssumptions  = input} (! ret) | bad -> {C_GetUnsatAssumptions  <> input} {false} any ]


  let rec get_unsat_core < 'term > < 'symbol > < 'sort > < 'keyword > < 'constant' > < 'sexpr > (input:t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr) (ret  )= any
    [ good -> {C_GetUnsatCore  = input} (! ret) | bad -> {C_GetUnsatCore  <> input} {false} any ]


  let rec get_value < 'term > < 'symbol > < 'sort > < 'keyword > < 'constant' > < 'sexpr > (input:t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr) (ret  (terms:Vec'0.t_vec 'term (Global'0.t_global)))= any
    [ good (terms:Vec'0.t_vec 'term (Global'0.t_global))-> {C_GetValue terms = input} (! ret {terms})
    | bad (terms:Vec'0.t_vec 'term (Global'0.t_global))-> {C_GetValue terms <> input} {false} any ]


  let rec pop < 'term > < 'symbol > < 'sort > < 'keyword > < 'constant' > < 'sexpr > (input:t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr) (ret  (level:BigUint'0.t_biguint))= any
    [ good (level:BigUint'0.t_biguint)-> {C_Pop level = input} (! ret {level})
    | bad (level:BigUint'0.t_biguint)-> {C_Pop level <> input} {false} any ]


  let rec push < 'term > < 'symbol > < 'sort > < 'keyword > < 'constant' > < 'sexpr > (input:t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr) (ret  (level:BigUint'0.t_biguint))= any
    [ good (level:BigUint'0.t_biguint)-> {C_Push level = input} (! ret {level})
    | bad (level:BigUint'0.t_biguint)-> {C_Push level <> input} {false} any ]


  let rec reset < 'term > < 'symbol > < 'sort > < 'keyword > < 'constant' > < 'sexpr > (input:t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr) (ret  )= any
    [ good -> {C_Reset  = input} (! ret) | bad -> {C_Reset  <> input} {false} any ]


  let rec reset_assertions < 'term > < 'symbol > < 'sort > < 'keyword > < 'constant' > < 'sexpr > (input:t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr) (ret  )= any
    [ good -> {C_ResetAssertions  = input} (! ret) | bad -> {C_ResetAssertions  <> input} {false} any ]


  let rec set_info < 'term > < 'symbol > < 'sort > < 'keyword > < 'constant' > < 'sexpr > (input:t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr) (ret  (keyword:'keyword) (value:AttributeValue'0.t_attributevalue 'constant' 'symbol 'sexpr))= any
    [ good (keyword:'keyword) (value:AttributeValue'0.t_attributevalue 'constant' 'symbol 'sexpr)-> {C_SetInfo keyword value
      = input}
      (! ret {keyword} {value})
    | bad (keyword:'keyword) (value:AttributeValue'0.t_attributevalue 'constant' 'symbol 'sexpr)-> {C_SetInfo keyword value
      <> input}
      {false}
      any ]


  let rec set_logic < 'term > < 'symbol > < 'sort > < 'keyword > < 'constant' > < 'sexpr > (input:t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr) (ret  (symbol:'symbol))= any
    [ good (symbol:'symbol)-> {C_SetLogic symbol = input} (! ret {symbol})
    | bad (symbol:'symbol)-> {C_SetLogic symbol <> input} {false} any ]


  let rec set_option < 'term > < 'symbol > < 'sort > < 'keyword > < 'constant' > < 'sexpr > (input:t_command 'term 'symbol 'sort 'keyword 'constant' 'sexpr) (ret  (keyword:'keyword) (value:AttributeValue'0.t_attributevalue 'constant' 'symbol 'sexpr))= any
    [ good (keyword:'keyword) (value:AttributeValue'0.t_attributevalue 'constant' 'symbol 'sexpr)-> {C_SetOption keyword value
      = input}
      (! ret {keyword} {value})
    | bad (keyword:'keyword) (value:AttributeValue'0.t_attributevalue 'constant' 'symbol 'sexpr)-> {C_SetOption keyword value
      <> input}
      {false}
      any ]

end
module Std_Io_Error_ErrorKind_Type
  type t_errorkind  =
    | C_NotFound
    | C_PermissionDenied
    | C_ConnectionRefused
    | C_ConnectionReset
    | C_HostUnreachable
    | C_NetworkUnreachable
    | C_ConnectionAborted
    | C_NotConnected
    | C_AddrInUse
    | C_AddrNotAvailable
    | C_NetworkDown
    | C_BrokenPipe
    | C_AlreadyExists
    | C_WouldBlock
    | C_NotADirectory
    | C_IsADirectory
    | C_DirectoryNotEmpty
    | C_ReadOnlyFilesystem
    | C_FilesystemLoop
    | C_StaleNetworkFileHandle
    | C_InvalidInput
    | C_InvalidData
    | C_TimedOut
    | C_WriteZero
    | C_StorageFull
    | C_NotSeekable
    | C_FilesystemQuotaExceeded
    | C_FileTooLarge
    | C_ResourceBusy
    | C_ExecutableFileBusy
    | C_Deadlock
    | C_CrossesDevices
    | C_TooManyLinks
    | C_InvalidFilename
    | C_ArgumentListTooLong
    | C_Interrupted
    | C_Unsupported
    | C_UnexpectedEof
    | C_OutOfMemory
    | C_Other
    | C_Uncategorized

  function any_l (_ : 'b) : 'a

  let rec not_found (input:t_errorkind) (ret  )= any
    [ good -> {C_NotFound  = input} (! ret) | bad -> {C_NotFound  <> input} {false} any ]


  let rec permission_denied (input:t_errorkind) (ret  )= any
    [ good -> {C_PermissionDenied  = input} (! ret) | bad -> {C_PermissionDenied  <> input} {false} any ]


  let rec connection_refused (input:t_errorkind) (ret  )= any
    [ good -> {C_ConnectionRefused  = input} (! ret) | bad -> {C_ConnectionRefused  <> input} {false} any ]


  let rec connection_reset (input:t_errorkind) (ret  )= any
    [ good -> {C_ConnectionReset  = input} (! ret) | bad -> {C_ConnectionReset  <> input} {false} any ]


  let rec host_unreachable (input:t_errorkind) (ret  )= any
    [ good -> {C_HostUnreachable  = input} (! ret) | bad -> {C_HostUnreachable  <> input} {false} any ]


  let rec network_unreachable (input:t_errorkind) (ret  )= any
    [ good -> {C_NetworkUnreachable  = input} (! ret) | bad -> {C_NetworkUnreachable  <> input} {false} any ]


  let rec connection_aborted (input:t_errorkind) (ret  )= any
    [ good -> {C_ConnectionAborted  = input} (! ret) | bad -> {C_ConnectionAborted  <> input} {false} any ]


  let rec not_connected (input:t_errorkind) (ret  )= any
    [ good -> {C_NotConnected  = input} (! ret) | bad -> {C_NotConnected  <> input} {false} any ]


  let rec addr_in_use (input:t_errorkind) (ret  )= any
    [ good -> {C_AddrInUse  = input} (! ret) | bad -> {C_AddrInUse  <> input} {false} any ]


  let rec addr_not_available (input:t_errorkind) (ret  )= any
    [ good -> {C_AddrNotAvailable  = input} (! ret) | bad -> {C_AddrNotAvailable  <> input} {false} any ]


  let rec network_down (input:t_errorkind) (ret  )= any
    [ good -> {C_NetworkDown  = input} (! ret) | bad -> {C_NetworkDown  <> input} {false} any ]


  let rec broken_pipe (input:t_errorkind) (ret  )= any
    [ good -> {C_BrokenPipe  = input} (! ret) | bad -> {C_BrokenPipe  <> input} {false} any ]


  let rec already_exists (input:t_errorkind) (ret  )= any
    [ good -> {C_AlreadyExists  = input} (! ret) | bad -> {C_AlreadyExists  <> input} {false} any ]


  let rec would_block (input:t_errorkind) (ret  )= any
    [ good -> {C_WouldBlock  = input} (! ret) | bad -> {C_WouldBlock  <> input} {false} any ]


  let rec not_a_directory (input:t_errorkind) (ret  )= any
    [ good -> {C_NotADirectory  = input} (! ret) | bad -> {C_NotADirectory  <> input} {false} any ]


  let rec is_a_directory (input:t_errorkind) (ret  )= any
    [ good -> {C_IsADirectory  = input} (! ret) | bad -> {C_IsADirectory  <> input} {false} any ]


  let rec directory_not_empty (input:t_errorkind) (ret  )= any
    [ good -> {C_DirectoryNotEmpty  = input} (! ret) | bad -> {C_DirectoryNotEmpty  <> input} {false} any ]


  let rec read_only_filesystem (input:t_errorkind) (ret  )= any
    [ good -> {C_ReadOnlyFilesystem  = input} (! ret) | bad -> {C_ReadOnlyFilesystem  <> input} {false} any ]


  let rec filesystem_loop (input:t_errorkind) (ret  )= any
    [ good -> {C_FilesystemLoop  = input} (! ret) | bad -> {C_FilesystemLoop  <> input} {false} any ]


  let rec stale_network_file_handle (input:t_errorkind) (ret  )= any
    [ good -> {C_StaleNetworkFileHandle  = input} (! ret) | bad -> {C_StaleNetworkFileHandle  <> input} {false} any ]


  let rec invalid_input (input:t_errorkind) (ret  )= any
    [ good -> {C_InvalidInput  = input} (! ret) | bad -> {C_InvalidInput  <> input} {false} any ]


  let rec invalid_data (input:t_errorkind) (ret  )= any
    [ good -> {C_InvalidData  = input} (! ret) | bad -> {C_InvalidData  <> input} {false} any ]


  let rec timed_out (input:t_errorkind) (ret  )= any
    [ good -> {C_TimedOut  = input} (! ret) | bad -> {C_TimedOut  <> input} {false} any ]


  let rec write_zero (input:t_errorkind) (ret  )= any
    [ good -> {C_WriteZero  = input} (! ret) | bad -> {C_WriteZero  <> input} {false} any ]


  let rec storage_full (input:t_errorkind) (ret  )= any
    [ good -> {C_StorageFull  = input} (! ret) | bad -> {C_StorageFull  <> input} {false} any ]


  let rec not_seekable (input:t_errorkind) (ret  )= any
    [ good -> {C_NotSeekable  = input} (! ret) | bad -> {C_NotSeekable  <> input} {false} any ]


  let rec filesystem_quota_exceeded (input:t_errorkind) (ret  )= any
    [ good -> {C_FilesystemQuotaExceeded  = input} (! ret) | bad -> {C_FilesystemQuotaExceeded  <> input} {false} any ]


  let rec file_too_large (input:t_errorkind) (ret  )= any
    [ good -> {C_FileTooLarge  = input} (! ret) | bad -> {C_FileTooLarge  <> input} {false} any ]


  let rec resource_busy (input:t_errorkind) (ret  )= any
    [ good -> {C_ResourceBusy  = input} (! ret) | bad -> {C_ResourceBusy  <> input} {false} any ]


  let rec executable_file_busy (input:t_errorkind) (ret  )= any
    [ good -> {C_ExecutableFileBusy  = input} (! ret) | bad -> {C_ExecutableFileBusy  <> input} {false} any ]


  let rec deadlock (input:t_errorkind) (ret  )= any
    [ good -> {C_Deadlock  = input} (! ret) | bad -> {C_Deadlock  <> input} {false} any ]


  let rec crosses_devices (input:t_errorkind) (ret  )= any
    [ good -> {C_CrossesDevices  = input} (! ret) | bad -> {C_CrossesDevices  <> input} {false} any ]


  let rec too_many_links (input:t_errorkind) (ret  )= any
    [ good -> {C_TooManyLinks  = input} (! ret) | bad -> {C_TooManyLinks  <> input} {false} any ]


  let rec invalid_filename (input:t_errorkind) (ret  )= any
    [ good -> {C_InvalidFilename  = input} (! ret) | bad -> {C_InvalidFilename  <> input} {false} any ]


  let rec argument_list_too_long (input:t_errorkind) (ret  )= any
    [ good -> {C_ArgumentListTooLong  = input} (! ret) | bad -> {C_ArgumentListTooLong  <> input} {false} any ]


  let rec interrupted (input:t_errorkind) (ret  )= any
    [ good -> {C_Interrupted  = input} (! ret) | bad -> {C_Interrupted  <> input} {false} any ]


  let rec unsupported (input:t_errorkind) (ret  )= any
    [ good -> {C_Unsupported  = input} (! ret) | bad -> {C_Unsupported  <> input} {false} any ]


  let rec unexpected_eof (input:t_errorkind) (ret  )= any
    [ good -> {C_UnexpectedEof  = input} (! ret) | bad -> {C_UnexpectedEof  <> input} {false} any ]


  let rec out_of_memory (input:t_errorkind) (ret  )= any
    [ good -> {C_OutOfMemory  = input} (! ret) | bad -> {C_OutOfMemory  <> input} {false} any ]


  let rec other (input:t_errorkind) (ret  )= any
    [ good -> {C_Other  = input} (! ret) | bad -> {C_Other  <> input} {false} any ]


  let rec uncategorized (input:t_errorkind) (ret  )= any
    [ good -> {C_Uncategorized  = input} (! ret) | bad -> {C_Uncategorized  <> input} {false} any ]

end
module Std_Io_Error_SimpleMessage_Type
  use prelude.prelude.Borrow

  use Std_Io_Error_ErrorKind_Type as ErrorKind'0

  type t_simplemessage  =
    | C_SimpleMessage (ErrorKind'0.t_errorkind) string

  function any_l (_ : 'b) : 'a

  let rec t_simplemessage (input:t_simplemessage) (ret  (kind:ErrorKind'0.t_errorkind) (message:string))= any
    [ good (kind:ErrorKind'0.t_errorkind) (message:string)-> {C_SimpleMessage kind message = input}
      (! ret {kind} {message})
    | bad (kind:ErrorKind'0.t_errorkind) (message:string)-> {C_SimpleMessage kind message <> input} {false} any ]

end
module Std_Io_Error_ErrorData_Type
  use Std_Io_Error_SimpleMessage_Type as SimpleMessage'0

  use prelude.prelude.Borrow

  use Std_Io_Error_ErrorKind_Type as ErrorKind'0

  use prelude.prelude.Int32

  use prelude.prelude.Int

  type t_errordata 'c =
    | C_Os int32
    | C_Simple (ErrorKind'0.t_errorkind)
    | C_SimpleMessage (SimpleMessage'0.t_simplemessage)
    | C_Custom 'c

  function any_l (_ : 'b) : 'a

  let rec os < 'c > (input:t_errordata 'c) (ret  (field_0:int32))= any
    [ good (field_0:int32)-> {C_Os field_0 = input} (! ret {field_0})
    | bad (field_0:int32)-> {C_Os field_0 <> input} {false} any ]


  let rec simple < 'c > (input:t_errordata 'c) (ret  (field_0:ErrorKind'0.t_errorkind))= any
    [ good (field_0:ErrorKind'0.t_errorkind)-> {C_Simple field_0 = input} (! ret {field_0})
    | bad (field_0:ErrorKind'0.t_errorkind)-> {C_Simple field_0 <> input} {false} any ]


  let rec simple_message < 'c > (input:t_errordata 'c) (ret  (field_0:SimpleMessage'0.t_simplemessage))= any
    [ good (field_0:SimpleMessage'0.t_simplemessage)-> {C_SimpleMessage field_0 = input} (! ret {field_0})
    | bad (field_0:SimpleMessage'0.t_simplemessage)-> {C_SimpleMessage field_0 <> input} {false} any ]


  let rec custom < 'c > (input:t_errordata 'c) (ret  (field_0:'c))= any
    [ good (field_0:'c)-> {C_Custom field_0 = input} (! ret {field_0})
    | bad (field_0:'c)-> {C_Custom field_0 <> input} {false} any ]

end
module Std_Io_Error_Custom_Type
  use prelude.prelude.Opaque

  use Std_Io_Error_ErrorKind_Type as ErrorKind'0

  type t_custom  =
    | C_Custom (ErrorKind'0.t_errorkind) dyn

  function any_l (_ : 'b) : 'a

  let rec t_custom (input:t_custom) (ret  (kind:ErrorKind'0.t_errorkind) (error:dyn))= any
    [ good (kind:ErrorKind'0.t_errorkind) (error:dyn)-> {C_Custom kind error = input} (! ret {kind} {error})
    | bad (kind:ErrorKind'0.t_errorkind) (error:dyn)-> {C_Custom kind error <> input} {false} any ]

end
module Std_Io_Error_ReprBitpacked_Repr_Type
  use Std_Io_Error_Custom_Type as Custom'0

  use Std_Io_Error_ErrorData_Type as ErrorData'0

  use Core_Marker_PhantomData_Type as PhantomData'0

  use Core_Ptr_NonNull_NonNull_Type as NonNull'0

  type t_repr  =
    | C_Repr (NonNull'0.t_nonnull ()) (PhantomData'0.t_phantomdata (ErrorData'0.t_errordata (Custom'0.t_custom)))

  function any_l (_ : 'b) : 'a

  let rec t_repr (input:t_repr) (ret  (field_0:NonNull'0.t_nonnull ()) (field_1:PhantomData'0.t_phantomdata (ErrorData'0.t_errordata (Custom'0.t_custom))))= any
    [ good (field_0:NonNull'0.t_nonnull ()) (field_1:PhantomData'0.t_phantomdata (ErrorData'0.t_errordata (Custom'0.t_custom)))-> {C_Repr field_0 field_1
      = input}
      (! ret {field_0} {field_1})
    | bad (field_0:NonNull'0.t_nonnull ()) (field_1:PhantomData'0.t_phantomdata (ErrorData'0.t_errordata (Custom'0.t_custom)))-> {C_Repr field_0 field_1
      <> input}
      {false}
      any ]

end
module Std_Io_Error_Error_Type
  use Std_Io_Error_ReprBitpacked_Repr_Type as Repr'0

  type t_error  =
    | C_Error (Repr'0.t_repr)

  function any_l (_ : 'b) : 'a

  let rec t_error (input:t_error) (ret  (repr:Repr'0.t_repr))= any
    [ good (repr:Repr'0.t_repr)-> {C_Error repr = input} (! ret {repr})
    | bad (repr:Repr'0.t_repr)-> {C_Error repr <> input} {false} any ]

end
module Cdsat_Main_Closure0_Type
  use Cdsat_Term_Value_Type as Value'0

  use Cdsat_Term_Term_Type as Term'1

  use Core_Option_Option_Type as Option'0

  use Smt2parser_Concrete_Keyword_Type as Keyword'0

  use Smt2parser_Concrete_Symbol_Type as Symbol'0

  use Smt2parser_Concrete_Constant_Type as Constant'0

  use Smt2parser_Concrete_SExpr_Type as SExpr'0

  use Smt2parser_Visitors_Identifier_Type as Identifier'0

  use Smt2parser_Concrete_Sort_Type as Sort'1

  use Smt2parser_Concrete_QualIdentifier_Type as QualIdentifier'0

  use Smt2parser_Concrete_Term_Type as Term'0

  use Smt2parser_Concrete_Command_Type as Command'0

  use prelude.prelude.Int16

  use Std_Hash_Random_RandomState_Type as RandomState'0

  use Cdsat_Term_Sort_Type as Sort'0

  use Indexmap_Map_IndexMap_Type as IndexMap'0

  use prelude.prelude.Borrow

  type cdsat_main_closure0  =
    | Cdsat_main_closure0 (borrowed (IndexMap'0.t_indexmap (Symbol'0.t_symbol) (Sort'0.t_sort) (RandomState'0.t_randomstate)))

  let rec cdsat_main_closure0 (input:cdsat_main_closure0) (ret  (vars:borrowed (IndexMap'0.t_indexmap (Symbol'0.t_symbol) (Sort'0.t_sort) (RandomState'0.t_randomstate))))= any
    [ good (vars:borrowed (IndexMap'0.t_indexmap (Symbol'0.t_symbol) (Sort'0.t_sort) (RandomState'0.t_randomstate)))-> {Cdsat_main_closure0 vars
      = input}
      (! ret {vars})
    | bad (vars:borrowed (IndexMap'0.t_indexmap (Symbol'0.t_symbol) (Sort'0.t_sort) (RandomState'0.t_randomstate)))-> {Cdsat_main_closure0 vars
      <> input}
      {false}
      any ]

end
module Cdsat_Main_Closure0
  let%span span0 = "/Users/xavier/Code/creusot/creusot-contracts/src/resolve.rs" 26 20 26 34

  use prelude.prelude.Int16

  use Std_Hash_Random_RandomState_Type as RandomState'0

  use Cdsat_Term_Sort_Type as Sort'0

  use Smt2parser_Concrete_Symbol_Type as Symbol'0

  use Indexmap_Map_IndexMap_Type as IndexMap'0

  use prelude.prelude.Borrow

  use Cdsat_Term_Value_Type as Value'0

  use Cdsat_Term_Term_Type as Term'0

  use Core_Option_Option_Type as Option'0

  use Smt2parser_Concrete_Keyword_Type as Keyword'0

  use Smt2parser_Concrete_Constant_Type as Constant'0

  use Smt2parser_Concrete_SExpr_Type as SExpr'0

  use Smt2parser_Visitors_Identifier_Type as Identifier'0

  use Smt2parser_Concrete_Sort_Type as Sort'1

  use Smt2parser_Concrete_QualIdentifier_Type as QualIdentifier'0

  use Smt2parser_Concrete_Term_Type as Term'1

  use Smt2parser_Concrete_Command_Type as Command'0

  use Cdsat_Main_Closure0_Type as Closure'0

  function field_0'0 [#"/Users/xavier/Code/cdsat/src/main.rs" 240 40 240 43] (self : Closure'0.cdsat_main_closure0) : borrowed (IndexMap'0.t_indexmap (Symbol'0.t_symbol) (Sort'0.t_sort) (RandomState'0.t_randomstate))

   =
    let Closure'0.Cdsat_main_closure0 a = self in a

  predicate unnest'0 [#"/Users/xavier/Code/cdsat/src/main.rs" 240 40 240 43] (self : Closure'0.cdsat_main_closure0) (_2 : Closure'0.cdsat_main_closure0)

   =
    (field_0'0 _2).final = (field_0'0 self).final

  use prelude.prelude.Intrinsic

  predicate resolve'1 (self : borrowed Closure'0.cdsat_main_closure0) =
    [%#span0] self.final = self.current

  predicate resolve'0 (self : borrowed (IndexMap'0.t_indexmap (Symbol'0.t_symbol) (Sort'0.t_sort) (RandomState'0.t_randomstate)))

   =
    [%#span0] self.final = self.current

  let rec to_assign'0 (vars:borrowed (IndexMap'0.t_indexmap (Symbol'0.t_symbol) (Sort'0.t_sort) (RandomState'0.t_randomstate))) (c:Command'0.t_command (Term'1.t_term (Constant'0.t_constant) (QualIdentifier'0.t_qualidentifier (Identifier'0.t_identifier (Symbol'0.t_symbol)) (Sort'1.t_sort (Identifier'0.t_identifier (Symbol'0.t_symbol)))) (Keyword'0.t_keyword) (SExpr'0.t_sexpr (Constant'0.t_constant) (Symbol'0.t_symbol) (Keyword'0.t_keyword)) (Symbol'0.t_symbol) (Sort'1.t_sort (Identifier'0.t_identifier (Symbol'0.t_symbol)))) (Symbol'0.t_symbol) (Sort'1.t_sort (Identifier'0.t_identifier (Symbol'0.t_symbol))) (Keyword'0.t_keyword) (Constant'0.t_constant) (SExpr'0.t_sexpr (Constant'0.t_constant) (Symbol'0.t_symbol) (Keyword'0.t_keyword))) (return'  (ret:Option'0.t_option (Term'0.t_term, Value'0.t_value)))= any
    [ return' (result:Option'0.t_option (Term'0.t_term, Value'0.t_value))-> (! return' {result}) ]


  let rec cdsat_main_closure0 (_1:borrowed Closure'0.cdsat_main_closure0) (c:Command'0.t_command (Term'1.t_term (Constant'0.t_constant) (QualIdentifier'0.t_qualidentifier (Identifier'0.t_identifier (Symbol'0.t_symbol)) (Sort'1.t_sort (Identifier'0.t_identifier (Symbol'0.t_symbol)))) (Keyword'0.t_keyword) (SExpr'0.t_sexpr (Constant'0.t_constant) (Symbol'0.t_symbol) (Keyword'0.t_keyword)) (Symbol'0.t_symbol) (Sort'1.t_sort (Identifier'0.t_identifier (Symbol'0.t_symbol)))) (Symbol'0.t_symbol) (Sort'1.t_sort (Identifier'0.t_identifier (Symbol'0.t_symbol))) (Keyword'0.t_keyword) (Constant'0.t_constant) (SExpr'0.t_sexpr (Constant'0.t_constant) (Symbol'0.t_symbol) (Keyword'0.t_keyword))) (return'  (ret:Option'0.t_option (Term'0.t_term, Value'0.t_value)))= (! bb0
    [ bb0 = s0
      [ s0 = Closure'0.cdsat_main_closure0 {_1.current}
          (fun (r'0:borrowed (IndexMap'0.t_indexmap (Symbol'0.t_symbol) (Sort'0.t_sort) (RandomState'0.t_randomstate))) ->
            Borrow.borrow_mut
              <IndexMap'0.t_indexmap (Symbol'0.t_symbol) (Sort'0.t_sort) (RandomState'0.t_randomstate)>
              {r'0.current}
              (fun (_ret':borrowed (IndexMap'0.t_indexmap (Symbol'0.t_symbol) (Sort'0.t_sort) (RandomState'0.t_randomstate))) ->
                 [ &_4 <- _ret' ]
                Closure'0.cdsat_main_closure0 {_1.current}
                  (fun (l'0:borrowed (IndexMap'0.t_indexmap (Symbol'0.t_symbol) (Sort'0.t_sort) (RandomState'0.t_randomstate))) ->

                    [ &_1 <- { _1 with current = Closure'0.Cdsat_main_closure0 ({ l'0 with current = _4.final ; }) ; } ]

                    s1)))
      | s1 = Borrow.borrow_final
          <IndexMap'0.t_indexmap (Symbol'0.t_symbol) (Sort'0.t_sort) (RandomState'0.t_randomstate)>
          {_4.current}
          {Borrow.get_id _4}
          (fun (_ret':borrowed (IndexMap'0.t_indexmap (Symbol'0.t_symbol) (Sort'0.t_sort) (RandomState'0.t_randomstate))) ->
             [ &_3 <- _ret' ]
             [ &_4 <- { _4 with current = _3.final ; } ]
            s2)
      | s2 = to_assign'0 {_3} {c}
          (fun (_ret':Option'0.t_option (Term'0.t_term, Value'0.t_value)) ->  [ &_0 <- _ret' ] s3)
      | s3 = bb1 ]

    | bb1 = s0 [ s0 = -{resolve'0 _4}- s1 | s1 = -{resolve'1 _1}- s2 | s2 = bb2 ]
    | bb2 = return' {_0} ]
    )
    [ & _0 : Option'0.t_option (Term'0.t_term, Value'0.t_value) = any_l ()
    | & _1 : borrowed Closure'0.cdsat_main_closure0 = _1
    | & c : Command'0.t_command (Term'1.t_term (Constant'0.t_constant) (QualIdentifier'0.t_qualidentifier (Identifier'0.t_identifier (Symbol'0.t_symbol)) (Sort'1.t_sort (Identifier'0.t_identifier (Symbol'0.t_symbol)))) (Keyword'0.t_keyword) (SExpr'0.t_sexpr (Constant'0.t_constant) (Symbol'0.t_symbol) (Keyword'0.t_keyword)) (Symbol'0.t_symbol) (Sort'1.t_sort (Identifier'0.t_identifier (Symbol'0.t_symbol)))) (Symbol'0.t_symbol) (Sort'1.t_sort (Identifier'0.t_identifier (Symbol'0.t_symbol))) (Keyword'0.t_keyword) (Constant'0.t_constant) (SExpr'0.t_sexpr (Constant'0.t_constant) (Symbol'0.t_symbol) (Keyword'0.t_keyword)) = c
    | & _3 : borrowed (IndexMap'0.t_indexmap (Symbol'0.t_symbol) (Sort'0.t_sort) (RandomState'0.t_randomstate)) = any_l ()
    | & _4 : borrowed (IndexMap'0.t_indexmap (Symbol'0.t_symbol) (Sort'0.t_sort) (RandomState'0.t_randomstate)) = any_l () ]

    [ return' (result:Option'0.t_option (Term'0.t_term, Value'0.t_value))-> {[@expl:postcondition] unnest'0 _1.current _1.final}
      (! return' {result}) ]

end
module Cdsat_Concrete_Impl1
  let%span sconcrete0 = "/Users/xavier/Code/cdsat/src/concrete.rs" 21 9 21 18

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span2 = "/Users/xavier/Code/cdsat/src/concrete.rs" 21 24 21 33

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 81 8 81 28

  use Cdsat_Concrete_TheoryState_Type as TheoryState'0

  predicate invariant'0 (self : TheoryState'0.t_theorystate) =
    [%#span1] true

  predicate inv'0 (_x : TheoryState'0.t_theorystate)

  axiom inv'0 : forall x : TheoryState'0.t_theorystate . inv'0 x = true

  use Cdsat_Concrete_TheoryStateDeepModel_Type as TheoryStateDeepModel'0

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/concrete.rs" 21 24 21 33] (self : TheoryState'0.t_theorystate) : TheoryStateDeepModel'0.t_theorystatedeepmodel

   =
    [%#span2] match self with
      | TheoryState'0.C_Sat -> TheoryStateDeepModel'0.C_Sat
      | TheoryState'0.C_Decision -> TheoryStateDeepModel'0.C_Decision
      | TheoryState'0.C_Unknown -> TheoryStateDeepModel'0.C_Unknown
      end

  use prelude.prelude.Borrow

  function deep_model'0 (self : TheoryState'0.t_theorystate) : TheoryStateDeepModel'0.t_theorystatedeepmodel =
    [%#span3] deep_model'1 self

  goal eq_refn : [%#sconcrete0] forall self : TheoryState'0.t_theorystate . forall other : TheoryState'0.t_theorystate . inv'0 other
  /\ inv'0 self
   -> (forall result : bool . result = (deep_model'0 self = deep_model'0 other)
   -> result = (deep_model'0 self = deep_model'0 other))
end
module Cdsat_Concrete_Impl5
  let%span sconcrete0 = "/Users/xavier/Code/cdsat/src/concrete.rs" 293 16 293 25

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span2 = "/Users/xavier/Code/cdsat/src/concrete.rs" 293 31 293 40

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 81 8 81 28

  use Cdsat_Concrete_Answer_Type as Answer'0

  predicate invariant'0 (self : Answer'0.t_answer) =
    [%#span1] true

  predicate inv'0 (_x : Answer'0.t_answer)

  axiom inv'0 : forall x : Answer'0.t_answer . inv'0 x = true

  use Cdsat_Concrete_AnswerDeepModel_Type as AnswerDeepModel'0

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/concrete.rs" 293 31 293 40] (self : Answer'0.t_answer) : AnswerDeepModel'0.t_answerdeepmodel

   =
    [%#span2] match self with
      | Answer'0.C_Sat -> AnswerDeepModel'0.C_Sat
      | Answer'0.C_Unsat -> AnswerDeepModel'0.C_Unsat
      end

  use prelude.prelude.Borrow

  function deep_model'0 (self : Answer'0.t_answer) : AnswerDeepModel'0.t_answerdeepmodel =
    [%#span3] deep_model'1 self

  goal eq_refn : [%#sconcrete0] forall self : Answer'0.t_answer . forall other : Answer'0.t_answer . inv'0 other
  /\ inv'0 self
   -> (forall result : bool . result = (deep_model'0 self = deep_model'0 other)
   -> result = (deep_model'0 self = deep_model'0 other))
end
module Cdsat_Trail_Impl14
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 16 16 16 25

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span2 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span4 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span5 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span6 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span7 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span8 = "/Users/xavier/Code/cdsat/src/trail.rs" 168 8 168 12

  let%span span9 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 20 8 20 31

  let%span span10 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 33 18 33 22

  let%span span11 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 30 14 30 56

  let%span span12 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 31 4 32 53

  let%span span13 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 33 4 33 44

  let%span span14 = "/Users/xavier/Code/cdsat/src/trail.rs" 48 31 48 40

  let%span span15 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span16 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span17 = "/Users/xavier/Code/cdsat/src/term.rs" 195 8 225 9

  let%span span18 = "/Users/xavier/Code/creusot/creusot-contracts-proc/src/lib.rs" 727 0 727 44

  let%span span19 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 81 8 81 28

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use seq.Seq

  predicate invariant'2 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span1] true

  predicate inv'2 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'2 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'2 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  constant max'0 : usize = [%#span2] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'1 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function shallow_model'0 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom shallow_model'0_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span3] inv'1 self)
   -> ([%#span5] inv'2 (shallow_model'0 self))
  && ([%#span4] Seq.length (shallow_model'0 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'1 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span6] inv'2 (shallow_model'0 self)

  axiom inv'1 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'1 x = true

  use Cdsat_Trail_Assignment_Type as Assignment'0

  predicate invariant'0 (self : Assignment'0.t_assignment) =
    [%#span1] true

  predicate inv'0 (_x : Assignment'0.t_assignment)

  axiom inv'0 : forall x : Assignment'0.t_assignment . inv'0 x = true

  use Cdsat_Trail_ReasonDeepModel_Type as ReasonDeepModel'0

  use Cdsat_Trail_Reason_Type as Reason'0

  use Cdsat_Theory_Value_Type as Value'1

  use Cdsat_Term_Value_Type as Value'0

  use Cdsat_Theory_Term_Type as Term'1

  use Cdsat_Term_Term_Type as Term'0

  function deep_model'5 (self : usize) : int =
    [%#span7] UIntSize.to_int self

  use Cdsat_Trail_Assignment_Type as Cdsat_Trail_Assignment_Type

  function deep_model'9 [#"/Users/xavier/Code/cdsat/src/trail.rs" 167 4 167 44] (self : TrailIndex'0.t_trailindex) : TrailIndex'0.t_trailindex

   =
    [%#span8] self

  use seq.Seq

  function index_logic'0 [@inline:trivial] (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) (ix : int) : TrailIndex'0.t_trailindex

   =
    [%#span9] Seq.get (shallow_model'0 self) ix

  function deep_model'8 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom deep_model'8_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span10] inv'1 self)
   -> ([%#span13] inv'2 (deep_model'8 self))
  && ([%#span12] forall i : int . 0 <= i /\ i < Seq.length (shallow_model'0 self)
   -> Seq.get (deep_model'8 self) i = deep_model'9 (index_logic'0 self i))
  && ([%#span11] Seq.length (shallow_model'0 self) = Seq.length (deep_model'8 self))

  function deep_model'4 [#"/Users/xavier/Code/cdsat/src/trail.rs" 48 31 48 40] (self : Reason'0.t_reason) : ReasonDeepModel'0.t_reasondeepmodel

   =
    [%#span14] match self with
      | Reason'0.C_Justified v0_1 -> ReasonDeepModel'0.C_Justified (deep_model'8 v0_1)
      | Reason'0.C_Decision -> ReasonDeepModel'0.C_Decision
      | Reason'0.C_Input -> ReasonDeepModel'0.C_Input
      end

  use prelude.prelude.Real

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  function deep_model'7 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span15] match self with
      | Value'0.C_Bool b -> Value'1.C_Bool b
      | Value'0.C_Rat br -> Value'1.C_Rat (deep_model'7 br)
      end

  use Cdsat_Theory_Sort_Type as Sort'1

  use Cdsat_Term_Sort_Type as Sort'0

  use Cdsat_Theory_Var_Type as Var'0

  function deep_model'6 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'0.t_sort) : Sort'1.t_sort =
    [%#span16] match self with
      | Sort'0.C_Boolean -> Sort'1.C_Boolean
      | Sort'0.C_Rational -> Sort'1.C_Rational
      end

  function deep_model'2 [#"/Users/xavier/Code/cdsat/src/term.rs" 193 4 193 44] (self : Term'0.t_term) : Term'1.t_term =
    [%#span17] match self with
      | Term'0.C_Variable v s -> Term'1.C_Variable (Var'0.C_Var (deep_model'5 v) (deep_model'6 s))
      | Term'0.C_Value v -> Term'1.C_Value (deep_model'3 v)
      | Term'0.C_Plus l r -> Term'1.C_Plus (deep_model'2 l) (deep_model'2 r)
      | Term'0.C_Eq l r -> Term'1.C_Eq (deep_model'2 l) (deep_model'2 r)
      | Term'0.C_Conj l r -> Term'1.C_Conj (deep_model'2 l) (deep_model'2 r)
      | Term'0.C_Disj l r -> Term'1.C_Disj (deep_model'2 l) (deep_model'2 r)
      | Term'0.C_Neg t -> Term'1.C_Neg (deep_model'2 t)
      | Term'0.C_Impl l r -> Term'1.C_Disj (Term'1.C_Neg (deep_model'2 l)) (deep_model'2 r)
      | Term'0.C_Times l r -> Term'1.C_Plus (Term'1.C_Value (Value'1.C_Rat (deep_model'7 l))) (deep_model'2 r)
      | Term'0.C_Lt l r -> Term'1.C_Eq (deep_model'2 l) (deep_model'2 r)
      end

  use Cdsat_Trail_AssignmentDeepModel_Type as AssignmentDeepModel'0

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 16 31 16 40] (self : Assignment'0.t_assignment) : AssignmentDeepModel'0.t_assignmentdeepmodel

   =
    [%#span18] AssignmentDeepModel'0.C_AssignmentDeepModel (deep_model'2 (Cdsat_Trail_Assignment_Type.assignment_term self)) (deep_model'3 (Cdsat_Trail_Assignment_Type.assignment_val self)) (deep_model'4 (Cdsat_Trail_Assignment_Type.assignment_reason self)) (deep_model'5 (Cdsat_Trail_Assignment_Type.assignment_level self))

  use prelude.prelude.Borrow

  function deep_model'0 (self : Assignment'0.t_assignment) : AssignmentDeepModel'0.t_assignmentdeepmodel =
    [%#span19] deep_model'1 self

  goal eq_refn : [%#strail0] forall self : Assignment'0.t_assignment . forall other : Assignment'0.t_assignment . inv'0 other
  /\ inv'0 self
   -> (forall result : bool . result = (deep_model'0 self = deep_model'0 other)
   -> result = (deep_model'0 self = deep_model'0 other))
end
module Cdsat_Trail_Impl18
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 48 16 48 25

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span2 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span4 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span5 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span6 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span7 = "/Users/xavier/Code/cdsat/src/trail.rs" 168 8 168 12

  let%span span8 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ops.rs" 20 8 20 31

  let%span span9 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 33 18 33 22

  let%span span10 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 30 14 30 56

  let%span span11 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 31 4 32 53

  let%span span12 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 33 4 33 44

  let%span span13 = "/Users/xavier/Code/cdsat/src/trail.rs" 48 31 48 40

  let%span span14 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 81 8 81 28

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use seq.Seq

  predicate invariant'2 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span1] true

  predicate inv'2 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'2 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'2 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  constant max'0 : usize = [%#span2] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'1 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function shallow_model'0 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom shallow_model'0_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span3] inv'1 self)
   -> ([%#span5] inv'2 (shallow_model'0 self))
  && ([%#span4] Seq.length (shallow_model'0 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'1 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span6] inv'2 (shallow_model'0 self)

  axiom inv'1 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'1 x = true

  use Cdsat_Trail_Reason_Type as Reason'0

  predicate invariant'0 (self : Reason'0.t_reason) =
    [%#span1] true

  predicate inv'0 (_x : Reason'0.t_reason)

  axiom inv'0 : forall x : Reason'0.t_reason . inv'0 x = true

  function deep_model'3 [#"/Users/xavier/Code/cdsat/src/trail.rs" 167 4 167 44] (self : TrailIndex'0.t_trailindex) : TrailIndex'0.t_trailindex

   =
    [%#span7] self

  use seq.Seq

  function index_logic'0 [@inline:trivial] (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) (ix : int) : TrailIndex'0.t_trailindex

   =
    [%#span8] Seq.get (shallow_model'0 self) ix

  function deep_model'2 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom deep_model'2_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span9] inv'1 self)
   -> ([%#span12] inv'2 (deep_model'2 self))
  && ([%#span11] forall i : int . 0 <= i /\ i < Seq.length (shallow_model'0 self)
   -> Seq.get (deep_model'2 self) i = deep_model'3 (index_logic'0 self i))
  && ([%#span10] Seq.length (shallow_model'0 self) = Seq.length (deep_model'2 self))

  use Cdsat_Trail_ReasonDeepModel_Type as ReasonDeepModel'0

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 48 31 48 40] (self : Reason'0.t_reason) : ReasonDeepModel'0.t_reasondeepmodel

   =
    [%#span13] match self with
      | Reason'0.C_Justified v0_1 -> ReasonDeepModel'0.C_Justified (deep_model'2 v0_1)
      | Reason'0.C_Decision -> ReasonDeepModel'0.C_Decision
      | Reason'0.C_Input -> ReasonDeepModel'0.C_Input
      end

  use prelude.prelude.Borrow

  function deep_model'0 (self : Reason'0.t_reason) : ReasonDeepModel'0.t_reasondeepmodel =
    [%#span14] deep_model'1 self

  goal eq_refn : [%#strail0] forall self : Reason'0.t_reason . forall other : Reason'0.t_reason . inv'0 other
  /\ inv'0 self
   -> (forall result : bool . result = (deep_model'0 self = deep_model'0 other)
   -> result = (deep_model'0 self = deep_model'0 other))
end
module Cdsat_Trail_Impl22
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 66 16 66 25

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span2 = "/Users/xavier/Code/cdsat/src/trail.rs" 168 8 168 12

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 81 8 81 28

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  predicate invariant'0 (self : TrailIndex'0.t_trailindex) =
    [%#span1] true

  predicate inv'0 (_x : TrailIndex'0.t_trailindex)

  axiom inv'0 : forall x : TrailIndex'0.t_trailindex . inv'0 x = true

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/trail.rs" 167 4 167 44] (self : TrailIndex'0.t_trailindex) : TrailIndex'0.t_trailindex

   =
    [%#span2] self

  use prelude.prelude.Borrow

  function deep_model'0 (self : TrailIndex'0.t_trailindex) : TrailIndex'0.t_trailindex =
    [%#span3] deep_model'1 self

  goal eq_refn : [%#strail0] forall self : TrailIndex'0.t_trailindex . forall other : TrailIndex'0.t_trailindex . inv'0 other
  /\ inv'0 self
   -> (forall result : bool . result = (deep_model'0 self = deep_model'0 other)
   -> result = (deep_model'0 self = deep_model'0 other))
end
module Cdsat_Term_Impl13
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 14 23 14 32

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span2 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 81 8 81 28

  use Cdsat_Term_Sort_Type as Sort'0

  predicate invariant'0 (self : Sort'0.t_sort) =
    [%#span1] true

  predicate inv'0 (_x : Sort'0.t_sort)

  axiom inv'0 : forall x : Sort'0.t_sort . inv'0 x = true

  use Cdsat_Theory_Sort_Type as Sort'1

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'0.t_sort) : Sort'1.t_sort =
    [%#span2] match self with
      | Sort'0.C_Boolean -> Sort'1.C_Boolean
      | Sort'0.C_Rational -> Sort'1.C_Rational
      end

  use prelude.prelude.Borrow

  function deep_model'0 (self : Sort'0.t_sort) : Sort'1.t_sort =
    [%#span3] deep_model'1 self

  goal eq_refn : [%#sterm0] forall self : Sort'0.t_sort . forall other : Sort'0.t_sort . inv'0 other /\ inv'0 self
   -> (forall result : bool . result = (deep_model'0 self = deep_model'0 other)
   -> result = (deep_model'0 self = deep_model'0 other))
end
module Cdsat_Term_Impl19
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 33 23 33 32

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span2 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span3 = "/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47

  let%span span4 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/num.rs" 22 16 22 35

  let%span span5 = "/Users/xavier/Code/cdsat/src/term.rs" 195 8 225 9

  let%span span6 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 81 8 81 28

  use Cdsat_Term_Term_Type as Term'0

  predicate invariant'0 (self : Term'0.t_term) =
    [%#span1] true

  predicate inv'0 (_x : Term'0.t_term)

  axiom inv'0 : forall x : Term'0.t_term . inv'0 x = true

  use prelude.prelude.Real

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  use Cdsat_Term_Value_Type as Value'1

  use Cdsat_Theory_Sort_Type as Sort'1

  use Cdsat_Term_Sort_Type as Sort'0

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  use Cdsat_Theory_Value_Type as Value'0

  function deep_model'5 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  function deep_model'4 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'1.t_value) : Value'0.t_value

   =
    [%#span2] match self with
      | Value'1.C_Bool b -> Value'0.C_Bool b
      | Value'1.C_Rat br -> Value'0.C_Rat (deep_model'5 br)
      end

  use Cdsat_Theory_Var_Type as Var'0

  function deep_model'3 [#"/Users/xavier/Code/cdsat/src/term.rs" 14 38 14 47] (self : Sort'0.t_sort) : Sort'1.t_sort =
    [%#span3] match self with
      | Sort'0.C_Boolean -> Sort'1.C_Boolean
      | Sort'0.C_Rational -> Sort'1.C_Rational
      end

  use prelude.prelude.UIntSize

  function deep_model'2 (self : usize) : int =
    [%#span4] UIntSize.to_int self

  use Cdsat_Theory_Term_Type as Term'1

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 193 4 193 44] (self : Term'0.t_term) : Term'1.t_term =
    [%#span5] match self with
      | Term'0.C_Variable v s -> Term'1.C_Variable (Var'0.C_Var (deep_model'2 v) (deep_model'3 s))
      | Term'0.C_Value v -> Term'1.C_Value (deep_model'4 v)
      | Term'0.C_Plus l r -> Term'1.C_Plus (deep_model'1 l) (deep_model'1 r)
      | Term'0.C_Eq l r -> Term'1.C_Eq (deep_model'1 l) (deep_model'1 r)
      | Term'0.C_Conj l r -> Term'1.C_Conj (deep_model'1 l) (deep_model'1 r)
      | Term'0.C_Disj l r -> Term'1.C_Disj (deep_model'1 l) (deep_model'1 r)
      | Term'0.C_Neg t -> Term'1.C_Neg (deep_model'1 t)
      | Term'0.C_Impl l r -> Term'1.C_Disj (Term'1.C_Neg (deep_model'1 l)) (deep_model'1 r)
      | Term'0.C_Times l r -> Term'1.C_Plus (Term'1.C_Value (Value'0.C_Rat (deep_model'5 l))) (deep_model'1 r)
      | Term'0.C_Lt l r -> Term'1.C_Eq (deep_model'1 l) (deep_model'1 r)
      end

  use prelude.prelude.Borrow

  function deep_model'0 (self : Term'0.t_term) : Term'1.t_term =
    [%#span6] deep_model'1 self

  goal eq_refn : [%#sterm0] forall self : Term'0.t_term . forall other : Term'0.t_term . inv'0 other /\ inv'0 self
   -> (forall result : bool . result = (deep_model'0 self = deep_model'0 other)
   -> result = (deep_model'0 self = deep_model'0 other))
end
module Cdsat_Term_Impl23
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 230 23 230 32

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span2 = "/Users/xavier/Code/cdsat/src/term.rs" 242 8 245 9

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/model.rs" 81 8 81 28

  use Cdsat_Term_Value_Type as Value'0

  predicate invariant'0 (self : Value'0.t_value) =
    [%#span1] true

  predicate inv'0 (_x : Value'0.t_value)

  axiom inv'0 : forall x : Value'0.t_value . inv'0 x = true

  use prelude.prelude.Real

  use NumBigint_Bigint_BigInt_Type as BigInt'0

  use NumRational_Ratio_Type as Ratio'0

  function deep_model'2 (self : Ratio'0.t_ratio (BigInt'0.t_bigint)) : Real.real

  use Cdsat_Theory_Value_Type as Value'1

  function deep_model'1 [#"/Users/xavier/Code/cdsat/src/term.rs" 241 4 241 44] (self : Value'0.t_value) : Value'1.t_value

   =
    [%#span2] match self with
      | Value'0.C_Bool b -> Value'1.C_Bool b
      | Value'0.C_Rat br -> Value'1.C_Rat (deep_model'2 br)
      end

  use prelude.prelude.Borrow

  function deep_model'0 (self : Value'0.t_value) : Value'1.t_value =
    [%#span3] deep_model'1 self

  goal eq_refn : [%#sterm0] forall self : Value'0.t_value . forall other : Value'0.t_value . inv'0 other /\ inv'0 self
   -> (forall result : bool . result = (deep_model'0 self = deep_model'0 other)
   -> result = (deep_model'0 self = deep_model'0 other))
end
module Cdsat_Concrete_Impl2
  let%span sconcrete0 = "/Users/xavier/Code/cdsat/src/concrete.rs" 21 20 21 22

  goal assert_receiver_is_total_eq_refn : [%#sconcrete0] true
end
module Cdsat_Concrete_Impl6
  let%span sconcrete0 = "/Users/xavier/Code/cdsat/src/concrete.rs" 293 27 293 29

  goal assert_receiver_is_total_eq_refn : [%#sconcrete0] true
end
module Cdsat_Trail_Impl15
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 16 27 16 29

  goal assert_receiver_is_total_eq_refn : [%#strail0] true
end
module Cdsat_Trail_Impl19
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 48 27 48 29

  goal assert_receiver_is_total_eq_refn : [%#strail0] true
end
module Cdsat_Trail_Impl23
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 66 27 66 29

  goal assert_receiver_is_total_eq_refn : [%#strail0] true
end
module Cdsat_Term_Impl14
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 14 34 14 36

  goal assert_receiver_is_total_eq_refn : [%#sterm0] true
end
module Cdsat_Term_Impl20
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 33 34 33 36

  goal assert_receiver_is_total_eq_refn : [%#sterm0] true
end
module Cdsat_Term_Impl24
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 230 34 230 36

  goal assert_receiver_is_total_eq_refn : [%#sterm0] true
end
module Cdsat_Concrete_Impl3

end
module Cdsat_Concrete_Impl7

end
module Cdsat_Trail_Impl16

end
module Cdsat_Trail_Impl20

end
module Cdsat_Trail_Impl7

end
module Cdsat_Term_Impl15

end
module Cdsat_Term_Impl5

end
module Cdsat_Term_Impl6

end
module Cdsat_Concrete_Impl4
  let%span sconcrete0 = "/Users/xavier/Code/cdsat/src/concrete.rs" 293 9 293 14

  goal fmt_refn : [%#sconcrete0] true
end
module Cdsat_Concrete_Impl8
  let%span sconcrete0 = "/Users/xavier/Code/cdsat/src/concrete.rs" 299 9 299 14

  goal fmt_refn : [%#sconcrete0] true
end
module Cdsat_Trail_Impl21
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 66 9 66 14

  goal fmt_refn : [%#strail0] true
end
module Cdsat_Term_Impl12
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 14 16 14 21

  goal fmt_refn : [%#sterm0] true
end
module Cdsat_Term_Impl18
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 33 16 33 21

  goal fmt_refn : [%#sterm0] true
end
module Cdsat_Term_Impl22
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 230 16 230 21

  goal fmt_refn : [%#sterm0] true
end
module Cdsat_Heap_Impl0

end
module Cdsat_Theory_Impl3

end
module Cdsat_Heap_Impl2
  let%span sheap0 = "/Users/xavier/Code/cdsat/src/heap.rs" 88 4 88 50

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span2 = "/Users/xavier/.rustup/toolchains/nightly-2024-05-15-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/num/uint_macros.rs" 49 8 49 27

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 21 19 25

  let%span span4 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 18 14 18 41

  let%span span5 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 19 4 19 36

  let%span span6 = "/Users/xavier/Code/creusot/creusot-contracts/src/std/vec.rs" 60 20 60 41

  let%span span7 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span8 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  let%span span9 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 11 20 11 56

  let%span span10 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 138 8 140 9

  let%span span11 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/seq.rs" 149 8 149 40

  let%span span12 = "/Users/xavier/Code/cdsat/src/trail.rs" 829 4 829 98

  let%span span13 = "/Users/xavier/Code/cdsat/src/heap.rs" 10 4 10 16

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  use seq.Seq

  predicate invariant'2 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span1] true

  predicate inv'2 (_x : Seq.seq (TrailIndex'0.t_trailindex))

  axiom inv'2 : forall x : Seq.seq (TrailIndex'0.t_trailindex) . inv'2 x = true

  use Alloc_Alloc_Global_Type as Global'0

  use Alloc_Vec_Vec_Type as Vec'0

  use prelude.prelude.UIntSize

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  constant max'0 : usize = [%#span2] (18446744073709551615 : usize)

  use seq.Seq

  predicate inv'1 (_x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global))

  function shallow_model'0 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) : Seq.seq (TrailIndex'0.t_trailindex)


  axiom shallow_model'0_spec : forall self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . ([%#span3] inv'1 self)
   -> ([%#span5] inv'2 (shallow_model'0 self))
  && ([%#span4] Seq.length (shallow_model'0 self) <= UIntSize.to_int (max'0 : usize))

  predicate invariant'1 (self : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global)) =
    [%#span6] inv'2 (shallow_model'0 self)

  axiom inv'1 : forall x : Vec'0.t_vec (TrailIndex'0.t_trailindex) (Global'0.t_global) . inv'1 x = true

  use Core_Cmp_Ordering_Type as Ordering'0

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span7] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span8] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  function le_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span9] cmp_log'0 self o <> Ordering'0.C_Greater

  use seq.Seq

  predicate sorted_range'0 (self : Seq.seq (TrailIndex'0.t_trailindex)) (l : int) (u : int) =
    [%#span10] forall j : int . forall i : int . l <= i /\ i <= j /\ j < u
     -> le_log'0 (Seq.get self i) (Seq.get self j)

  predicate sorted'0 (self : Seq.seq (TrailIndex'0.t_trailindex)) =
    [%#span11] sorted_range'0 self 0 (Seq.length self)

  predicate seq_unique'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 828 0 828 46] (s : Seq.seq (TrailIndex'0.t_trailindex))

   =
    [%#span12] forall j : int . forall i : int . 0 <= i /\ i <= j /\ j < Seq.length s
     -> i <> j  -> Seq.get s i <> Seq.get s j

  use Cdsat_Heap_ConflictHeap_Type as Cdsat_Heap_ConflictHeap_Type

  use Cdsat_Heap_ConflictHeap_Type as ConflictHeap'0

  predicate invariant'0 [#"/Users/xavier/Code/cdsat/src/heap.rs" 12 4 12 30] (self : ConflictHeap'0.t_conflictheap) =
    [%#span13] seq_unique'0 (shallow_model'0 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self))
    /\ sorted'0 (shallow_model'0 (Cdsat_Heap_ConflictHeap_Type.conflictheap_0 self))

  predicate inv'0 (_x : ConflictHeap'0.t_conflictheap)

  axiom inv'0 : forall x : ConflictHeap'0.t_conflictheap . inv'0 x
  = (invariant'0 x
  /\ match x with
    | ConflictHeap'0.C_ConflictHeap a_0 -> true
    end)

  goal shallow_model_refn : [%#sheap0] forall self : ConflictHeap'0.t_conflictheap . inv'0 self
end
module Cdsat_Trail_Impl1

end
module Cdsat_Trail_Impl2

end
module Cdsat_Trail_Impl6

end
module Cdsat_Term_Impl0

end
module Cdsat_Term_Impl4

end
module Cdsat_Term_Impl7

end
module Cdsat_Trail_Impl13
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 16 9 16 14

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  use Cdsat_Trail_Assignment_Type as Assignment'0

  predicate invariant'1 (self : Assignment'0.t_assignment) =
    [%#span1] true

  predicate inv'1 (_x : Assignment'0.t_assignment)

  axiom inv'1 : forall x : Assignment'0.t_assignment . inv'1 x = true

  predicate invariant'0 (self : Assignment'0.t_assignment) =
    [%#span1] true

  predicate inv'0 (_x : Assignment'0.t_assignment)

  axiom inv'0 : forall x : Assignment'0.t_assignment . inv'0 x = true

  use prelude.prelude.Borrow

  goal clone'_refn : [%#strail0] forall self : Assignment'0.t_assignment . inv'0 self
   -> (forall result : Assignment'0.t_assignment . result = self  -> inv'1 result /\ result = self)
end
module Cdsat_Trail_Impl17
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 48 9 48 14

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  use Cdsat_Trail_Reason_Type as Reason'0

  predicate invariant'1 (self : Reason'0.t_reason) =
    [%#span1] true

  predicate inv'1 (_x : Reason'0.t_reason)

  axiom inv'1 : forall x : Reason'0.t_reason . inv'1 x = true

  predicate invariant'0 (self : Reason'0.t_reason) =
    [%#span1] true

  predicate inv'0 (_x : Reason'0.t_reason)

  axiom inv'0 : forall x : Reason'0.t_reason . inv'0 x = true

  use prelude.prelude.Borrow

  goal clone'_refn : [%#strail0] forall self : Reason'0.t_reason . inv'0 self
   -> (forall result : Reason'0.t_reason . result = self  -> inv'1 result /\ result = self)
end
module Cdsat_Trail_Impl24
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 66 31 66 36

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  predicate invariant'1 (self : TrailIndex'0.t_trailindex) =
    [%#span1] true

  predicate inv'1 (_x : TrailIndex'0.t_trailindex)

  axiom inv'1 : forall x : TrailIndex'0.t_trailindex . inv'1 x = true

  predicate invariant'0 (self : TrailIndex'0.t_trailindex) =
    [%#span1] true

  predicate inv'0 (_x : TrailIndex'0.t_trailindex)

  axiom inv'0 : forall x : TrailIndex'0.t_trailindex . inv'0 x = true

  use prelude.prelude.Borrow

  goal clone'_refn : [%#strail0] forall self : TrailIndex'0.t_trailindex . inv'0 self
   -> (forall result : TrailIndex'0.t_trailindex . result = self  -> inv'1 result /\ result = self)
end
module Cdsat_Term_Impl11
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 14 9 14 14

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  use Cdsat_Term_Sort_Type as Sort'0

  predicate invariant'1 (self : Sort'0.t_sort) =
    [%#span1] true

  predicate inv'1 (_x : Sort'0.t_sort)

  axiom inv'1 : forall x : Sort'0.t_sort . inv'1 x = true

  predicate invariant'0 (self : Sort'0.t_sort) =
    [%#span1] true

  predicate inv'0 (_x : Sort'0.t_sort)

  axiom inv'0 : forall x : Sort'0.t_sort . inv'0 x = true

  use prelude.prelude.Borrow

  goal clone'_refn : [%#sterm0] forall self : Sort'0.t_sort . inv'0 self
   -> (forall result : Sort'0.t_sort . result = self  -> inv'1 result /\ result = self)
end
module Cdsat_Term_Impl17
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 33 9 33 14

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  use Cdsat_Term_Term_Type as Term'0

  predicate invariant'1 (self : Term'0.t_term) =
    [%#span1] true

  predicate inv'1 (_x : Term'0.t_term)

  axiom inv'1 : forall x : Term'0.t_term . inv'1 x = true

  predicate invariant'0 (self : Term'0.t_term) =
    [%#span1] true

  predicate inv'0 (_x : Term'0.t_term)

  axiom inv'0 : forall x : Term'0.t_term . inv'0 x = true

  use prelude.prelude.Borrow

  goal clone'_refn : [%#sterm0] forall self : Term'0.t_term . inv'0 self
   -> (forall result : Term'0.t_term . result = self  -> inv'1 result /\ result = self)
end
module Cdsat_Term_Impl21
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 230 9 230 14

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  use Cdsat_Term_Value_Type as Value'0

  predicate invariant'1 (self : Value'0.t_value) =
    [%#span1] true

  predicate inv'1 (_x : Value'0.t_value)

  axiom inv'1 : forall x : Value'0.t_value . inv'1 x = true

  predicate invariant'0 (self : Value'0.t_value) =
    [%#span1] true

  predicate inv'0 (_x : Value'0.t_value)

  axiom inv'0 : forall x : Value'0.t_value . inv'0 x = true

  use prelude.prelude.Borrow

  goal clone'_refn : [%#sterm0] forall self : Value'0.t_value . inv'0 self
   -> (forall result : Value'0.t_value . result = self  -> inv'1 result /\ result = self)
end
module Cdsat_Trail_Impl0
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 30 4 30 74

  goal fmt_refn : [%#strail0] true
end
module Cdsat_Term_Impl2
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 147 4 147 74

  goal fmt_refn : [%#sterm0] true
end
module Cdsat_Term_Impl3
  let%span sterm0 = "/Users/xavier/Code/cdsat/src/term.rs" 166 4 166 74

  goal fmt_refn : [%#sterm0] true
end
module Cdsat_Trail_Impl25

end
module Cdsat_Term_Impl16

end
module Cdsat_Trail_Impl3
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 71 4 71 59

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span2 = "/Users/xavier/Code/cdsat/src/trail.rs" 168 8 168 12

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span4 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  predicate invariant'0 (self : TrailIndex'0.t_trailindex) =
    [%#span1] true

  predicate inv'0 (_x : TrailIndex'0.t_trailindex)

  axiom inv'0 : forall x : TrailIndex'0.t_trailindex . inv'0 x = true

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 167 4 167 44] (self : TrailIndex'0.t_trailindex) : TrailIndex'0.t_trailindex

   =
    [%#span2] self

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  use Core_Cmp_Ordering_Type as Ordering'0

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span3] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span4] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  use Core_Option_Option_Type as Option'0

  use prelude.prelude.Borrow

  goal partial_cmp_refn : [%#strail0] forall self : TrailIndex'0.t_trailindex . forall other : TrailIndex'0.t_trailindex . inv'0 other
  /\ inv'0 self
   -> (forall result : Option'0.t_option (Ordering'0.t_ordering) . result = Option'0.C_Some (cmp_log'0 self other)
   -> result = Option'0.C_Some (cmp_log'0 (deep_model'0 self) (deep_model'0 other)))
end
module Cdsat_Trail_Impl4
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 78 4 78 43

  let%span span1 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span2 = "/Users/xavier/Code/cdsat/src/trail.rs" 168 8 168 12

  let%span span3 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span4 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  predicate invariant'0 (self : TrailIndex'0.t_trailindex) =
    [%#span1] true

  predicate inv'0 (_x : TrailIndex'0.t_trailindex)

  axiom inv'0 : forall x : TrailIndex'0.t_trailindex . inv'0 x = true

  function deep_model'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 167 4 167 44] (self : TrailIndex'0.t_trailindex) : TrailIndex'0.t_trailindex

   =
    [%#span2] self

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  use Core_Cmp_Ordering_Type as Ordering'0

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span3] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span4] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  use prelude.prelude.Borrow

  goal cmp_refn : [%#strail0] forall self : TrailIndex'0.t_trailindex . forall other : TrailIndex'0.t_trailindex . inv'0 other
  /\ inv'0 self
   -> (forall result : Ordering'0.t_ordering . result = cmp_log'0 self other
   -> result = cmp_log'0 (deep_model'0 self) (deep_model'0 other))
end
module Cdsat_Trail_Impl5
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 136 4 136 33

  let%span strail1 = "/Users/xavier/Code/cdsat/src/trail.rs" 118 4 118 35

  let%span strail2 = "/Users/xavier/Code/cdsat/src/trail.rs" 130 4 130 52

  let%span strail3 = "/Users/xavier/Code/cdsat/src/trail.rs" 142 4 142 33

  let%span strail4 = "/Users/xavier/Code/cdsat/src/trail.rs" 103 4 103 35

  let%span strail5 = "/Users/xavier/Code/cdsat/src/trail.rs" 108 4 108 35

  let%span strail6 = "/Users/xavier/Code/cdsat/src/trail.rs" 147 4 147 31

  let%span strail7 = "/Users/xavier/Code/cdsat/src/trail.rs" 113 4 113 35

  let%span strail8 = "/Users/xavier/Code/cdsat/src/trail.rs" 123 4 123 20

  let%span span9 = "/Users/xavier/Code/creusot/creusot-contracts/src/invariant.rs" 8 8 8 12

  let%span span10 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 140 16 146 17

  let%span span11 = "/Users/xavier/Code/cdsat/src/trail.rs" 93 8 97 9

  let%span span12 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 31 20 31 53

  let%span span13 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 21 20 21 53

  let%span span14 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 11 20 11 56

  let%span span15 = "/Users/xavier/Code/creusot/creusot-contracts/src/logic/ord.rs" 41 20 41 56

  use Cdsat_Trail_TrailIndex_Type as TrailIndex'0

  predicate invariant'0 (self : TrailIndex'0.t_trailindex) =
    [%#span9] true

  predicate inv'0 (_x : TrailIndex'0.t_trailindex)

  axiom inv'0 : forall x : TrailIndex'0.t_trailindex . inv'0 x = true

  use Core_Cmp_Ordering_Type as Ordering'0

  use prelude.prelude.UIntSize

  use prelude.prelude.Int

  use Cdsat_Trail_TrailIndex_Type as Cdsat_Trail_TrailIndex_Type

  function cmp_log'1 (self : usize) (o : usize) : Ordering'0.t_ordering =
    [%#span10] if self < o then Ordering'0.C_Less else if self = o then Ordering'0.C_Equal else Ordering'0.C_Greater

  function cmp_log'0 [#"/Users/xavier/Code/cdsat/src/trail.rs" 92 4 92 43] (self : TrailIndex'0.t_trailindex) (rhs : TrailIndex'0.t_trailindex) : Ordering'0.t_ordering

   =
    [%#span11] match cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_0 self) (Cdsat_Trail_TrailIndex_Type.trailindex_0 rhs) with
      | Ordering'0.C_Less -> Ordering'0.C_Less
      | Ordering'0.C_Greater -> Ordering'0.C_Greater
      | Ordering'0.C_Equal -> cmp_log'1 (Cdsat_Trail_TrailIndex_Type.trailindex_1 self) (Cdsat_Trail_TrailIndex_Type.trailindex_1 rhs)
      end

  function ge_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span12] cmp_log'0 self o <> Ordering'0.C_Less

  function lt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span13] cmp_log'0 self o = Ordering'0.C_Less

  function le_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span14] cmp_log'0 self o <> Ordering'0.C_Greater

  function gt_log'0 (self : TrailIndex'0.t_trailindex) (o : TrailIndex'0.t_trailindex) : bool =
    [%#span15] cmp_log'0 self o = Ordering'0.C_Greater

  goal antisym1_refn : [%#strail0] forall x : TrailIndex'0.t_trailindex . forall y : TrailIndex'0.t_trailindex . inv'0 y
  /\ inv'0 x /\ cmp_log'0 x y = Ordering'0.C_Less
   -> cmp_log'0 x y = Ordering'0.C_Less
  /\ (forall result : () . cmp_log'0 y x = Ordering'0.C_Greater  -> cmp_log'0 y x = Ordering'0.C_Greater)

  goal cmp_gt_log_refn : [%#strail1] forall x : TrailIndex'0.t_trailindex . forall y : TrailIndex'0.t_trailindex . inv'0 y
  /\ inv'0 x
   -> (forall result : () . gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater)
   -> gt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Greater))

  goal trans_refn : [%#strail2] forall x : TrailIndex'0.t_trailindex . forall y : TrailIndex'0.t_trailindex . forall z : TrailIndex'0.t_trailindex . forall o : Ordering'0.t_ordering . inv'0 z
  /\ inv'0 y /\ inv'0 x /\ cmp_log'0 y z = o /\ cmp_log'0 x y = o
   -> cmp_log'0 y z = o /\ cmp_log'0 x y = o /\ (forall result : () . cmp_log'0 x z = o  -> cmp_log'0 x z = o)

  goal antisym2_refn : [%#strail3] forall x : TrailIndex'0.t_trailindex . forall y : TrailIndex'0.t_trailindex . inv'0 y
  /\ inv'0 x /\ cmp_log'0 x y = Ordering'0.C_Greater
   -> cmp_log'0 x y = Ordering'0.C_Greater
  /\ (forall result : () . cmp_log'0 y x = Ordering'0.C_Less  -> cmp_log'0 y x = Ordering'0.C_Less)

  goal cmp_le_log_refn : [%#strail4] forall x : TrailIndex'0.t_trailindex . forall y : TrailIndex'0.t_trailindex . inv'0 y
  /\ inv'0 x
   -> (forall result : () . le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater)
   -> le_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Greater))

  goal cmp_lt_log_refn : [%#strail5] forall x : TrailIndex'0.t_trailindex . forall y : TrailIndex'0.t_trailindex . inv'0 y
  /\ inv'0 x
   -> (forall result : () . lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less)
   -> lt_log'0 x y = (cmp_log'0 x y = Ordering'0.C_Less))

  goal eq_cmp_refn : [%#strail6] forall x : TrailIndex'0.t_trailindex . forall y : TrailIndex'0.t_trailindex . inv'0 y
  /\ inv'0 x
   -> (forall result : () . (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal)
   -> (x = y) = (cmp_log'0 x y = Ordering'0.C_Equal))

  goal cmp_ge_log_refn : [%#strail7] forall x : TrailIndex'0.t_trailindex . forall y : TrailIndex'0.t_trailindex . inv'0 y
  /\ inv'0 x
   -> (forall result : () . ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less)
   -> ge_log'0 x y = (cmp_log'0 x y <> Ordering'0.C_Less))

  goal refl_refn : [%#strail8] forall x : TrailIndex'0.t_trailindex . inv'0 x
   -> (forall result : () . cmp_log'0 x x = Ordering'0.C_Equal  -> cmp_log'0 x x = Ordering'0.C_Equal)
end
module Cdsat_Trail_Impl26

end
module Cdsat_Trail_Impl11
  let%span strail0 = "/Users/xavier/Code/cdsat/src/trail.rs" 717 4 717 55

  goal index_refn : [%#strail0] true
end
